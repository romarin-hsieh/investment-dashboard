const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dataVersionService-Be1dOQ2R.js","assets/vendor-Hg5dAsSo.js","assets/utils-C6BRd-cb.js"])))=>i.map(i=>d[i]);
var as=Object.defineProperty;var ns=(n,e,a)=>e in n?as(n,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[e]=a;var Te=(n,e,a)=>ns(n,typeof e!="symbol"?e+"":e,a);import{c as h,a as t,b as se,d as R,w as Ye,r as is,e as V,o as u,f as A,g as k,t as l,n as z,h as w,F,i as O,j as zt,k as H,v as pt,l as Je,m as os,p as he,q as gt,s as Ht,u as re,x as rs,y as ls,z as cs}from"./vendor-Hg5dAsSo.js";import{s as x,e as Ce,u as ds,l as ct,o as W,n as P,b as K,a as vt,r as Ae,c as Q,Z as us}from"./utils-C6BRd-cb.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function a(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(s){if(s.ep)return;s.ep=!0;const i=a(s);fetch(s.href,i)}})();const E=(n,e)=>{const a=n.__vccOpts||n;for(const[o,s]of e)a[o]=s;return a},hs={name:"Layout"},gs={class:"layout"},ms={class:"header"},fs={class:"nav"},ps={class:"container"},vs={class:"nav-list"},ys={class:"main-content"},ws={class:"container"};function Ss(n,e,a,o,s,i){const r=V("router-link");return u(),h("div",gs,[t("header",ms,[t("nav",fs,[t("div",ps,[e[3]||(e[3]=t("div",{class:"nav-brand"},[t("h1",null,"Investment Dashboard")],-1)),t("ul",vs,[t("li",null,[R(r,{to:"/market-overview",class:"nav-link"},{default:Ye(()=>[...e[0]||(e[0]=[A("Market Overview",-1)])]),_:1})]),t("li",null,[R(r,{to:"/stock-overview",class:"nav-link"},{default:Ye(()=>[...e[1]||(e[1]=[A("Stock Overview",-1)])]),_:1})]),t("li",null,[R(r,{to:"/system-manager",class:"nav-link"},{default:Ye(()=>[...e[2]||(e[2]=[A("Control Panel",-1)])]),_:1})])])])])]),t("main",ys,[t("div",ws,[is(n.$slots,"default",{},void 0)])]),e[4]||(e[4]=se('<footer class="footer" data-v-4a6f8141><div class="container" data-v-4a6f8141><div class="footer-content" data-v-4a6f8141><span class="copyright" data-v-4a6f8141>¬© 2025 Investment Dashboard POC</span><span class="separator" data-v-4a6f8141>‚Ä¢</span><span class="attribution" data-v-4a6f8141> Market data powered by <a href="https://www.tradingview.com/" target="_blank" rel="noopener noreferrer" class="tradingview-link" data-v-4a6f8141> TradingView </a></span></div></div></footer>',1))])}const bs=E(hs,[["render",Ss],["__scopeId","data-v-4a6f8141"]]),_s={name:"App",components:{Layout:bs}},ks={id:"app"};function Cs(n,e,a,o,s,i){const r=V("router-view"),c=V("Layout");return u(),h("div",ks,[R(c,null,{default:Ye(()=>[R(r)]),_:1})])}const Ts=E(_s,[["render",Cs]]);class Ds{constructor(){this.preloadedScripts=new Set,this.scriptPromises=new Map}preloadScript(e){if(this.preloadedScripts.has(e))return Promise.resolve();if(this.scriptPromises.has(e))return this.scriptPromises.get(e);const a=new Promise((o,s)=>{const i=document.createElement("link");i.rel="preload",i.as="script",i.href=e,i.crossOrigin="anonymous",i.onload=()=>{this.preloadedScripts.add(e),o()},i.onerror=()=>{s(new Error(`Failed to preload script: ${e}`))},document.head.appendChild(i)});return this.scriptPromises.set(e,a),a}async preloadAllScripts(){const e=["https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js","https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js"];try{await Promise.all(e.map(a=>this.preloadScript(a))),console.log("All TradingView scripts preloaded successfully")}catch(a){console.warn("Some TradingView scripts failed to preload:",a)}}isPreloaded(e){return this.preloadedScripts.has(e)}}const mt=new Ds;typeof window<"u"&&window.addEventListener("load",()=>{setTimeout(()=>{mt.preloadAllScripts()},1e3)});const As="modulepreload",Is=function(n){return"/investment-dashboard/"+n},qt={},at=function(e,a,o){let s=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),c=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));s=Promise.allSettled(a.map(d=>{if(d=Is(d),d in qt)return;qt[d]=!0;const g=d.endsWith(".css"),f=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${f}`))return;const m=document.createElement("link");if(m.rel=g?"stylesheet":As,g||(m.as="script"),m.crossOrigin="",m.href=d,c&&m.setAttribute("nonce",c),document.head.appendChild(m),g)return new Promise((p,D)=>{m.addEventListener("load",p),m.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(r){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=r,window.dispatchEvent(c),!c.defaultPrevented)throw r}return s.then(r=>{for(const c of r||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})};let xs=class{constructor(){this.metrics=new Map,this.startTimes=new Map}start(e){this.startTimes.set(e,performance.now()),console.log(`‚è±Ô∏è Started timing: ${e}`)}end(e){const a=this.startTimes.get(e);if(!a)return console.warn(`No start time found for: ${e}`),null;const o=performance.now()-a;return this.metrics.set(e,o),this.startTimes.delete(e),console.log(`‚úÖ Completed: ${e} - ${o.toFixed(2)}ms`),o}getMetric(e){return this.metrics.get(e)}getAllMetrics(){return Object.fromEntries(this.metrics)}clear(){this.metrics.clear(),this.startTimes.clear()}async measureAsync(e,a){this.start(e);try{const o=await a();return this.end(e),o}catch(o){throw this.end(e),console.error(`‚ùå Error in ${e}:`,o),o}}generateReport(){const e=this.getAllMetrics(),a={timestamp:new Date().toISOString(),metrics:e,summary:{totalOperations:Object.keys(e).length,totalTime:Object.values(e).reduce((o,s)=>o+s,0),averageTime:Object.values(e).reduce((o,s)=>o+s,0)/Object.keys(e).length||0,slowestOperation:this.getSlowestOperation(),fastestOperation:this.getFastestOperation()}};return console.log("üìä Performance Report:",a),a}getSlowestOperation(){let e={name:null,time:0};for(const[a,o]of this.metrics)o>e.time&&(e={name:a,time:o});return e}getFastestOperation(){let e={name:null,time:1/0};for(const[a,o]of this.metrics)o<e.time&&(e={name:a,time:o});return e.time===1/0?{name:null,time:0}:e}checkPerformanceWarnings(){const e=[],a=this.getAllMetrics();Object.entries(a).forEach(([s,i])=>{i>5e3&&e.push({type:"SLOW_OPERATION",operation:s,time:i,message:`Operation "${s}" took ${i.toFixed(2)}ms (>5s)`})});const o=Object.values(a).reduce((s,i)=>s+i,0);return o>1e4&&e.push({type:"SLOW_TOTAL_LOAD",time:o,message:`Total load time ${o.toFixed(2)}ms (>10s)`}),e.length>0&&console.warn("‚ö†Ô∏è Performance Warnings:",e),e}};const _e=new xs;class Ms{constructor(){this.memoryCache=new Map,this.localStoragePrefix="investment_dashboard_cache_",this.defaultTTL=24*60*60*1e3}set(e,a,o=this.defaultTTL){const s={data:a,timestamp:Date.now(),ttl:o};this.memoryCache.set(e,s);try{localStorage.setItem(this.localStoragePrefix+e,JSON.stringify(s))}catch(i){console.warn("Failed to save to localStorage:",i)}}get(e){if(this.memoryCache.has(e)){const a=this.memoryCache.get(e);if(this.isValid(a))return a.data;this.memoryCache.delete(e)}try{const a=localStorage.getItem(this.localStoragePrefix+e);if(a){const o=JSON.parse(a);if(this.isValid(o))return this.memoryCache.set(e,o),o.data;localStorage.removeItem(this.localStoragePrefix+e)}}catch(a){console.warn("Failed to read from localStorage:",a)}return null}isValid(e){return!e||!e.timestamp?!1:Date.now()-e.timestamp<e.ttl}has(e){return this.get(e)!==null}delete(e){this.memoryCache.delete(e);try{localStorage.removeItem(this.localStoragePrefix+e)}catch(a){console.warn("Failed to remove from localStorage:",a)}}clear(){this.memoryCache.clear();try{Object.keys(localStorage).forEach(a=>{a.startsWith(this.localStoragePrefix)&&localStorage.removeItem(a)})}catch(e){console.warn("Failed to clear localStorage:",e)}}getStats(){const e=this.memoryCache.size;let a=0;try{a=Object.keys(localStorage).filter(s=>s.startsWith(this.localStoragePrefix)).length}catch(o){console.warn("Failed to get localStorage stats:",o)}return{memoryCache:e,localStorage:a,totalSize:e+a}}async preload(e,a,o=this.defaultTTL){if(this.has(e))return this.get(e);try{const s=await a();return this.set(e,s,o),s}catch(s){throw console.error(`Failed to preload data for key ${e}:`,s),s}}async batchPreload(e){const a=new Map,o=e.map(async({key:s,loader:i,ttl:r})=>{try{const c=await this.preload(s,i,r);a.set(s,c)}catch(c){console.error(`Failed to preload ${s}:`,c),a.set(s,null)}});return await Promise.all(o),a}}const G=new Ms,et={QUOTES_SNAPSHOT:"quotes_snapshot",DAILY_SNAPSHOT:"daily_snapshot",METADATA_BATCH:"metadata_batch",SYMBOLS_CONFIG:"symbols_config",STOCK_OVERVIEW_DATA:"stock_overview_data"};class Ns{constructor(){this.updateIntervals=new Map,this.isRunning=!1,this.config={technicalIndicators:{enabled:!0,interval:24*60*60*1e3,retryAttempts:3,retryDelay:5*60*1e3},metadata:{enabled:!0,interval:24*60*60*1e3,retryAttempts:2,retryDelay:30*60*1e3},cacheCleanup:{enabled:!0,interval:6*60*60*1e3,maxAge:7*24*60*60*1e3}}}start(){if(this.isRunning){console.log("‚ö†Ô∏è Auto update scheduler is already running");return}console.log("üöÄ Starting auto update scheduler..."),this.isRunning=!0,this.performInitialUpdate(),this.scheduleUpdates(),console.log("‚úÖ Auto update scheduler started successfully")}stop(){if(!this.isRunning){console.log("‚ö†Ô∏è Auto update scheduler is not running");return}console.log("üõë Stopping auto update scheduler...");for(const[e,a]of this.updateIntervals)clearInterval(a),console.log(`   Cleared interval: ${e}`);this.updateIntervals.clear(),this.isRunning=!1,console.log("‚úÖ Auto update scheduler stopped")}async performInitialUpdate(){console.log("üîÑ Performing initial update check...");try{this.config.technicalIndicators.enabled&&await this.checkAndUpdateTechnicalIndicators(),this.config.metadata.enabled&&await this.checkAndUpdateMetadata(),this.config.cacheCleanup.enabled&&await this.performCacheCleanup()}catch(e){console.error("‚ùå Initial update failed:",e)}}scheduleUpdates(){if(this.config.technicalIndicators.enabled){const e=setInterval(()=>this.checkAndUpdateTechnicalIndicators(),this.config.technicalIndicators.interval);this.updateIntervals.set("technicalIndicators",e),console.log(`üìä Scheduled technical indicators update every ${this.config.technicalIndicators.interval/6e4} minutes`)}if(this.config.metadata.enabled){const e=setInterval(()=>this.checkAndUpdateMetadata(),this.config.metadata.interval);this.updateIntervals.set("metadata",e),console.log(`üìã Scheduled metadata update every ${this.config.metadata.interval/36e5} hours`)}if(this.config.cacheCleanup.enabled){const e=setInterval(()=>this.performCacheCleanup(),this.config.cacheCleanup.interval);this.updateIntervals.set("cacheCleanup",e),console.log(`üßπ Scheduled cache cleanup every ${this.config.cacheCleanup.interval/36e5} hours`)}}async checkAndUpdateTechnicalIndicators(){const e="auto_update_technical_indicators";_e.start(e);try{console.log("üîç Checking technical indicators update...");const{dataVersionService:a}=await at(async()=>{const{dataVersionService:s}=await import("./dataVersionService-Be1dOQ2R.js");return{dataVersionService:s}},__vite__mapDeps([0,1,2]));if(await a.checkDataVersionAndRefresh()){console.log("‚úÖ Data version changed - technical indicators refreshed automatically");return}else{console.log("‚úÖ Technical indicators are up to date (version unchanged)");return}}catch(a){console.error("‚ùå Technical indicators version check failed:",a);try{await this.checkTechnicalIndicatorsAge()&&(console.log("üîÑ Fallback: Clearing cache due to data age"),this.clearTechnicalIndicatorsCache())}catch(o){console.error("‚ùå Fallback check also failed:",o)}}finally{_e.end(e)}}async checkAndUpdateMetadata(){const e="auto_update_metadata";_e.start(e);try{console.log("üîç Checking metadata update...");const{dataVersionService:a}=await at(async()=>{const{dataVersionService:s}=await import("./dataVersionService-Be1dOQ2R.js");return{dataVersionService:s}},__vite__mapDeps([0,1,2]));if(await a.checkDataVersionAndRefresh()){console.log("‚úÖ Data version changed - metadata refreshed automatically");return}else{console.log("‚úÖ Metadata is up to date (version unchanged)");return}}catch(a){console.error("‚ùå Metadata version check failed:",a);try{await this.checkMetadataAge()&&(console.log("üîÑ Fallback: Clearing metadata cache due to age"),this.clearMetadataCache())}catch(o){console.error("‚ùå Metadata fallback check failed:",o)}}finally{_e.end(e)}}async checkTechnicalIndicatorsAge(){try{const{paths:e}=await at(async()=>{const{paths:c}=await Promise.resolve().then(()=>Kt);return{paths:c}},void 0),a=await fetch(e.technicalIndicatorsIndex());if(!a.ok)return console.log("üìä No precomputed data found, update needed"),!0;const o=await a.json(),s=new Date(o.generatedAt),r=(new Date-s)/(1e3*60*60);return console.log(`üìä Technical indicators age: ${r.toFixed(1)} hours`),r>24}catch(e){return console.error("Error checking technical indicators age:",e),!0}}async checkMetadataAge(){try{const e=G.get(et.METADATA_BATCH);if(!e)return!0;const o=(Date.now()-e.timestamp)/(1e3*60*60);return console.log(`üìã Metadata cache age: ${o.toFixed(1)} hours`),o>24}catch(e){return console.error("Error checking metadata age:",e),!0}}async updateTechnicalIndicatorsData(){console.log("üîÑ Technical indicators update requested"),console.log("‚ö†Ô∏è Note: Actual precomputation requires server-side execution");try{this.clearTechnicalIndicatorsCache(),console.log("‚úÖ Technical indicators cache cleared, data will be refreshed on next load")}catch(e){throw console.error("Failed to update technical indicators:",e),e}}async updateMetadataData(){G.delete(et.METADATA_BATCH),console.log("üóëÔ∏è Cleared metadata cache to force refresh")}clearTechnicalIndicatorsCache(){try{const e=[];for(let a=0;a<localStorage.length;a++){const o=localStorage.key(a);o&&(o.includes("technical_indicators_")||o.includes("precomputed_")||o.includes("TECHNICAL_INDICATORS")||o.includes("hybrid_technical_"))&&e.push(o)}e.forEach(a=>{localStorage.removeItem(a),console.log(`üóëÔ∏è Cleared cache key: ${a}`)}),typeof G<"u"&&G.clear&&console.log("üóëÔ∏è Cleared performance cache items"),console.log(`‚úÖ Cleared ${e.length} technical indicators cache entries`)}catch(e){console.error("Error clearing technical indicators cache:",e)}}clearMetadataCache(){G.delete(et.METADATA_BATCH),G.delete(et.STOCK_OVERVIEW_DATA),console.log("üóëÔ∏è Cleared metadata and stock overview cache")}async performCacheCleanup(){console.log("üßπ Performing cache cleanup...");try{const e=G.getStats();console.log("üìä Cache stats before cleanup:",e);const a=G.getStats();console.log("üìä Cache stats after cleanup:",a),console.log("‚úÖ Cache cleanup completed")}catch(e){console.error("‚ùå Cache cleanup failed:",e)}}async retryUpdate(e,a){const o=this.config[e];!o||!o.retryAttempts||(console.log(`üîÑ Retrying ${e} update in ${o.retryDelay/6e4} minutes...`),setTimeout(async()=>{try{e==="technicalIndicators"?await this.checkAndUpdateTechnicalIndicators():e==="metadata"&&await this.checkAndUpdateMetadata()}catch(s){console.error(`‚ùå Retry failed for ${e}:`,s)}},o.retryDelay))}getStatus(){return{isRunning:this.isRunning,activeIntervals:Array.from(this.updateIntervals.keys()),config:this.config,nextUpdates:this.getNextUpdateTimes()}}getNextUpdateTimes(){const e=Date.now();return{technicalIndicators:new Date(e+this.config.technicalIndicators.interval),metadata:new Date(e+this.config.metadata.interval),cacheCleanup:new Date(e+this.config.cacheCleanup.interval)}}async triggerManualUpdate(e="all"){console.log(`üîÑ Manual update triggered: ${e}`);try{(e==="all"||e==="technicalIndicators")&&await this.checkAndUpdateTechnicalIndicators(),(e==="all"||e==="metadata")&&await this.checkAndUpdateMetadata(),(e==="all"||e==="cache")&&await this.performCacheCleanup(),console.log("‚úÖ Manual update completed")}catch(a){throw console.error("‚ùå Manual update failed:",a),a}}}const ne=new Ns;typeof window<"u"&&window.location.hostname!=="localhost"&&setTimeout(()=>{ne.start()},3e4);class Ps{constructor(){this.baseUrl=this.getCorrectBaseUrl(),this.cache=new Map,this.cacheTimeout=60*60*1e3,this.indexCache=null,this.indexCacheTimestamp=null,this.indexCacheTimeout=10*60*1e3,console.log("PrecomputedIndicatorsAPI initialized:",{hostname:window.location.hostname,pathname:window.location.pathname,baseUrl:this.baseUrl,fullUrl:window.location.href})}getCorrectBaseUrl(){return"/investment-dashboard/data/technical-indicators/"}getTodayString(){return new Date().toISOString().split("T")[0]}async getCachedIndex(){if(this.indexCache&&this.indexCacheTimestamp&&Date.now()-this.indexCacheTimestamp<this.indexCacheTimeout)return console.log("üì¶ Using cached index data"),this.indexCache;try{console.log("üîÑ Loading latest_index.json...");const e=await fetch(`${this.baseUrl}latest_index.json`);if(e.ok){const a=await e.json();return this.indexCache=a,this.indexCacheTimestamp=Date.now(),console.log(`‚úÖ Loaded latest_index.json: ${a.symbols.length} symbols, date: ${a.date}`),a}else return console.warn("‚ö†Ô∏è latest_index.json not found, using fallback"),null}catch(e){return console.error("‚ùå Failed to load latest_index.json:",e),null}}async getTechnicalIndicators(e){const a=`precomputed_${e}`;if(this.cache.has(a)){const o=this.cache.get(a);if(Date.now()-o.timestamp<this.cacheTimeout)return console.log(`üì¶ Using precomputed cache for ${e}`),o.data}try{const o=await this.getCachedIndex();let s=this.getTodayString();if(o&&(s=o.date,!o.symbols.includes(e)))throw new Error(`Symbol ${e} not found in precomputed data`);const i=`${this.baseUrl}${s}_${e}.json`;console.log(`üîç Fetching precomputed data for ${e} from ${i}`);const r=await fetch(i);if(!r.ok)throw new Error(`Precomputed data not found for ${e} (${r.status})`);const c=await r.json(),d={...c.indicators,source:"Precomputed",lastUpdated:c.computedAt,dataAge:this.calculateDataAge(c.computedAt),precomputedDate:c.date,symbol:e};return this.cache.set(a,{data:d,timestamp:Date.now()}),console.log(`‚úÖ Loaded precomputed data for ${e} (date: ${s}, age: ${d.dataAge})`),d}catch(o){throw console.error(`‚ùå Failed to load precomputed data for ${e}:`,o),o}}calculateDataAge(e){const a=new Date,o=new Date(e),s=a-o,i=Math.floor(s/(1e3*60*60)),r=Math.floor(s%(1e3*60*60)/(1e3*60));return i>0?`${i}h ${r}m ago`:`${r}m ago`}async getAvailableData(){return await this.getCachedIndex()}async isPrecomputedDataAvailable(e){try{const a=await this.getCachedIndex();return a&&a.symbols.includes(e)}catch{return!1}}clearCache(){this.cache.clear(),this.indexCache=null,this.indexCacheTimestamp=null,console.log("üóëÔ∏è Cleared all precomputed caches")}getCacheStats(){const e={size:this.cache.size,indexCached:!!this.indexCache,indexAge:this.indexCacheTimestamp?Date.now()-this.indexCacheTimestamp:null,items:[]};for(const[a,o]of this.cache.entries())e.items.push({key:a,age:Date.now()-o.timestamp,expired:Date.now()-o.timestamp>this.cacheTimeout});return e}}const dt=new Ps;class Ls{constructor(){this.cachePrefix="technical_indicators_",this.cacheTimeout=24*60*60*1e3,this.memoryCache=new Map}getCacheKey(e){const a=new Date().toISOString().split("T")[0];return`${this.cachePrefix}${e}_${a}`}async getTechnicalIndicators(e){const a=this.getCacheKey(e);if(this.memoryCache.has(a)){const o=this.memoryCache.get(a);if(Date.now()-o.timestamp<this.cacheTimeout)return console.log(`Using memory cache for ${e}`),{...o.data,source:"Daily Cache (Memory)"};this.memoryCache.delete(a)}try{const o=localStorage.getItem(a);if(o){const s=JSON.parse(o);if(Date.now()-s.timestamp<this.cacheTimeout)return console.log(`Using localStorage cache for ${e}`),this.memoryCache.set(a,s),{...s.data,source:"Daily Cache (LocalStorage)"};localStorage.removeItem(a)}}catch(o){console.warn(`Failed to read cache for ${e}:`,o)}return null}async setTechnicalIndicators(e,a){const o=this.getCacheKey(e),s={data:a,timestamp:Date.now(),symbol:e,date:new Date().toISOString().split("T")[0]};try{localStorage.setItem(o,JSON.stringify(s)),this.memoryCache.set(o,s),console.log(`Cached technical indicators for ${e}`),this.cleanupOldCache()}catch(i){console.warn(`Failed to cache technical indicators for ${e}:`,i)}}cleanupOldCache(){try{const e=[];for(let a=0;a<localStorage.length;a++){const o=localStorage.key(a);if(o&&o.startsWith(this.cachePrefix))try{const s=JSON.parse(localStorage.getItem(o));Date.now()-s.timestamp>this.cacheTimeout&&e.push(o)}catch{e.push(o)}}e.forEach(a=>{localStorage.removeItem(a),console.log(`Removed expired cache: ${a}`)});for(const[a,o]of this.memoryCache.entries())Date.now()-o.timestamp>this.cacheTimeout&&this.memoryCache.delete(a)}catch(e){console.warn("Failed to cleanup old cache:",e)}}clearSymbolCache(e){const a=this.getCacheKey(e);localStorage.removeItem(a),this.memoryCache.delete(a),console.log(`Cleared cache for ${e}`)}clearAllCache(){try{const e=[];for(let a=0;a<localStorage.length;a++){const o=localStorage.key(a);o&&o.startsWith(this.cachePrefix)&&e.push(o)}e.forEach(a=>localStorage.removeItem(a)),this.memoryCache.clear(),console.log(`Cleared all technical indicators cache (${e.length} items)`)}catch(e){console.warn("Failed to clear all cache:",e)}}getCacheStats(){const e={memoryCache:this.memoryCache.size,localStorageCache:0,totalSize:0};try{for(let a=0;a<localStorage.length;a++){const o=localStorage.key(a);if(o&&o.startsWith(this.cachePrefix)){e.localStorageCache++;const s=localStorage.getItem(o);s&&(e.totalSize+=s.length)}}}catch(a){console.warn("Failed to get cache stats:",a)}return e}}const ue=new Ls,ot=1e-12;function $s(n){return Math.max(0,Math.min(100,n))}function Rs(n,e){const a=new Array(n.length);for(let o=0;o<n.length;o++)if(o<e-1)a[o]=NaN;else{let s=-1/0;for(let i=o-e+1;i<=o;i++)isNaN(n[i])||(s=Math.max(s,n[i]));a[o]=s===-1/0?NaN:s}return a}function Es(n,e){const a=new Array(n.length);for(let o=0;o<n.length;o++)if(o<e-1)a[o]=NaN;else{let s=1/0;for(let i=o-e+1;i<=o;i++)isNaN(n[i])||(s=Math.min(s,n[i]));a[o]=s===1/0?NaN:s}return a}function Fs(n,e,a="strict",o=null){if(e<=0)throw new Error("Period must be positive");const s=n.length,i=new Array(s).fill(NaN);o===null&&(o=e);for(let r=0;r<s;r++){if(r<e-1)continue;const c=n.slice(r-e+1,r+1);if(a==="strict")c.some(d=>isNaN(d))?i[r]=NaN:i[r]=c.reduce((d,g)=>d+g,0)/c.length;else if(a==="skipna"){const d=c.filter(g=>!isNaN(g));d.length<o?i[r]=NaN:i[r]=d.reduce((g,f)=>g+f,0)/d.length}}return i}function nt(n,e,a=null,o="sma_seed",s="strict_recover"){if(e<=0)throw new Error("Period must be positive");const i=n.length,r=new Array(i).fill(NaN);if(a===null&&(a=2/(e+1)),a<=0||a>1)throw new Error("Alpha must be in (0, 1]");if(o==="first_value"){let c=-1;for(let d=0;d<i;d++)if(!isNaN(n[d])){c=d;break}if(c===-1)return r;r[c]=n[c];for(let d=c+1;d<i;d++)isNaN(n[d])?s==="hold_last"?r[d]=r[d-1]:r[d]=NaN:isNaN(r[d-1])?s==="strict_recover"?r[d]=NaN:r[d]=NaN:r[d]=a*n[d]+(1-a)*r[d-1]}else if(o==="sma_seed"){for(let c=0;c<i;c++)if(!(c<e-1))if(c===e-1){const d=n.slice(0,e);d.some(g=>isNaN(g))?r[c]=NaN:r[c]=d.reduce((g,f)=>g+f,0)/d.length}else if(isNaN(n[c]))s==="hold_last"?r[c]=r[c-1]:s==="strict_break"?r[c]=NaN:s==="strict_recover"&&(r[c]=NaN);else if(isNaN(r[c-1]))if(s==="strict_recover"){const d=n.slice(c-e+1,c+1);d.some(g=>isNaN(g))?r[c]=NaN:r[c]=d.reduce((g,f)=>g+f,0)/d.length}else r[c]=NaN;else r[c]=a*n[c]+(1-a)*r[c-1]}return r}function De(n,e){if(e<=0)throw new Error("Period must be positive");const a=new Array(n.length);for(let d=0;d<e-1;d++)a[d]=NaN;if(n.length<e)return console.log(`Wilder: Insufficient data length ${n.length} < ${e}`),a;let o=0,s=0,i=[];for(let d=0;d<n.length&&i.length<e;d++)isNaN(n[d])||(i.push(d),o+=n[d],s++);if(console.log(`Wilder: Found ${s} valid values in first ${e} positions for SMA initialization`),s<e)return console.warn(`Wilder: Insufficient valid data for SMA initialization: ${s} < ${e}`),a;const r=Math.max(e-1,i[e-1]);a[r]=o/e,console.log(`Wilder: Initialized at index ${r} with value ${a[r]}`);for(let d=r+1;d<n.length;d++)isNaN(a[d-1])||isNaN(n[d])?a[d]=NaN:a[d]=(a[d-1]*(e-1)+n[d])/e;const c=a.filter(d=>!isNaN(d)).length;return console.log(`Wilder: Generated ${c} valid smoothed values`),a}function ut(n,e=5,a=null,o="sma_seed",s="strict_recover"){return nt(n,e,a,o,s)}function ht(n,e=5,a="strict",o=null){return Fs(n,e,a,o)}function jt(n,e,a=26){const o=Rs(n,a),s=Es(e,a),i=new Array(n.length);for(let r=0;r<n.length;r++)isNaN(o[r])||isNaN(s[r])?i[r]=NaN:i[r]=(o[r]+s[r])/2;return i}function Os(n,e,a=9){return jt(n,e,a)}function Us(n,e=26){if(e<0)throw new Error("Shift must be non-negative");const a=new Array(n.length);for(let o=0;o<n.length;o++)o+e<n.length?a[o]=n[o]:a[o]=NaN;return a}function Vs(n,e,a=20){const o=new Array(n.length);for(let s=0;s<n.length;s++)if(s<a-1)o[s]=NaN;else{let i=0,r=0;for(let c=s-a+1;c<=s;c++)!isNaN(n[c])&&!isNaN(e[c])&&(i+=n[c]*e[c],r+=e[c]);o[s]=r<=ot?NaN:i/r}return o}function Ws(n,e=14){if(n.length<e+1)return new Array(n.length).fill(NaN);const a=new Array(n.length),o=new Array(n.length),s=new Array(n.length);a[0]=NaN,o[0]=NaN,s[0]=NaN;for(let d=1;d<n.length;d++)isNaN(n[d])||isNaN(n[d-1])?(a[d]=NaN,o[d]=NaN,s[d]=NaN):(a[d]=n[d]-n[d-1],o[d]=Math.max(a[d],0),s[d]=Math.max(-a[d],0));const i=De(o.slice(1),e),r=De(s.slice(1),e),c=new Array(n.length);c[0]=NaN;for(let d=1;d<n.length;d++){const g=i[d-1],f=r[d-1];if(isNaN(g)||isNaN(f))c[d]=NaN;else if(f<=ot)c[d]=100;else{const p=100-100/(1+g/f);c[d]=$s(p)}}return c}function Bs(n,e,a,o=14){const s=Math.min(n.length,e.length,a.length);if(s<o*2)return console.warn(`ADX: Insufficient data length ${s} < ${o*2} for period ${o}`),{adx:new Array(s).fill(NaN),plusDI:new Array(s).fill(NaN),minusDI:new Array(s).fill(NaN)};let i=0;for(let y=0;y<s;y++)!isNaN(n[y])&&!isNaN(e[y])&&!isNaN(a[y])&&i++;if(console.log(`ADX: Processing ${s} data points, ${i} valid OHLC points`),i<o*2)return console.warn(`ADX: Insufficient valid OHLC data ${i} < ${o*2}`),{adx:new Array(s).fill(NaN),plusDI:new Array(s).fill(NaN),minusDI:new Array(s).fill(NaN)};const r=new Array(s),c=new Array(s),d=new Array(s),g=new Array(s),f=new Array(s);r[0]=NaN,c[0]=NaN,d[0]=NaN,g[0]=NaN,f[0]=NaN;for(let y=1;y<s;y++){if(isNaN(n[y])||isNaN(e[y])||isNaN(a[y])||isNaN(n[y-1])||isNaN(e[y-1])||isNaN(a[y-1])){r[y]=NaN,c[y]=NaN,d[y]=NaN,g[y]=NaN,f[y]=NaN;continue}r[y]=n[y]-n[y-1],c[y]=e[y-1]-e[y],r[y]>c[y]&&r[y]>0?d[y]=r[y]:d[y]=0,c[y]>r[y]&&c[y]>0?g[y]=c[y]:g[y]=0;const B=n[y]-e[y],C=Math.abs(n[y]-a[y-1]),M=Math.abs(e[y]-a[y-1]);f[y]=Math.max(B,C,M)}const m=De(f.slice(1),o),p=De(d.slice(1),o),D=De(g.slice(1),o);console.log(`ADX: Wilder smoothing results - TR valid: ${m.filter(y=>!isNaN(y)).length}, +DM valid: ${p.filter(y=>!isNaN(y)).length}, -DM valid: ${D.filter(y=>!isNaN(y)).length}`);const S=new Array(s),T=new Array(s),_=new Array(s);S[0]=NaN,T[0]=NaN,_[0]=NaN;for(let y=1;y<s;y++){const B=m[y-1],C=p[y-1],M=D[y-1];if(isNaN(B)||isNaN(C)||isNaN(M)||B<=ot)S[y]=NaN,T[y]=NaN,_[y]=NaN;else{S[y]=100*C/B,T[y]=100*M/B;const v=S[y]+T[y];v<=ot?_[y]=NaN:_[y]=100*Math.abs(S[y]-T[y])/v}}const $=De(_.slice(1),o);console.log(`ADX: Final ADX smoothing - DX valid: ${_.filter(y=>!isNaN(y)).length}, ADX valid: ${$.filter(y=>!isNaN(y)).length}`);const I=new Array(s);I[0]=NaN;for(let y=1;y<s;y++)I[y]=$[y-1];const N=I.filter(y=>!isNaN(y)).length;return console.log(`ADX: Final result - ${N} valid ADX values out of ${s} total`),{adx:I,plusDI:S,minusDI:T}}function Hs(n,e=12,a=26,o=9){a<=e&&console.warn("Slow period should be greater than fast period");const s=nt(n,e),i=nt(n,a),r=new Array(n.length);for(let g=0;g<n.length;g++)isNaN(s[g])||isNaN(i[g])?r[g]=NaN:r[g]=s[g]-i[g];const c=nt(r,o),d=new Array(n.length);for(let g=0;g<n.length;g++)isNaN(r[g])||isNaN(c[g])?d[g]=NaN:d[g]=r[g]-c[g];return{macd:r,signal:c,histogram:d}}function qs(n){const{open:e,high:a,low:o,close:s,volume:i}=n,r=s.length;if(a.length!==r||o.length!==r||e.length!==r||i.length!==r)throw new Error("All OHLCV arrays must have the same length");const c={MA_5:ut(s,5),MA_10:ut(s,10),MA_30:ut(s,30),SMA_5:ht(s,5),SMA_10:ht(s,10),SMA_30:ht(s,30),ICHIMOKU_BASELINE_26:jt(a,o,26),ICHIMOKU_CONVERSIONLINE_9:Os(a,o,9),ICHIMOKU_LAGGINGSPAN_26:Us(s,26),VWMA_20:Vs(s,i,20),RSI_14:Ws(s,14),...(()=>{const d=Hs(s,12,26,9);return{MACD_12_26_9:d.macd,MACD_SIGNAL_9:d.signal,MACD_HIST:d.histogram}})(),...(()=>{const d=Bs(a,o,s,14);return{ADX_14:d.adx,ADX_14_PLUS_DI:d.plusDI,ADX_14_MINUS_DI:d.minusDI}})()};for(const[d,g]of Object.entries(c))g.length!==r&&console.error(`Length mismatch for ${d}: expected ${r}, got ${g.length}`);return c}class zs{constructor(){this.corsProxies=["https://api.allorigins.win/raw?url=","https://corsproxy.io/?","https://cors.sh/","https://proxy-cors.isomorphic-git.org/","https://thingproxy.freeboard.io/fetch/","https://cors-proxy.htmldriven.com/?url=","https://cors-anywhere.herokuapp.com/"],this.baseUrl="https://query1.finance.yahoo.com/v8/finance/chart/",this.cache=new Map,this.cacheTimeout=5*60*1e3,this.currentProxyIndex=0}async getTechnicalIndicators(e){const a=await ue.getTechnicalIndicators(e);if(a)return a;const o=await this.fetchTechnicalIndicatorsFromAPI(e);return o&&!o.error&&await ue.setTechnicalIndicators(e,o),o}async fetchTechnicalIndicatorsFromAPI(e){var o,s;const a=`technical_${e}`;if(this.cache.has(a)){const i=this.cache.get(a);if(Date.now()-i.timestamp<this.cacheTimeout)return console.log(`Using cached data for ${e}`),i.data}for(let i=0;i<this.corsProxies.length;i++)try{const r=(this.currentProxyIndex+i)%this.corsProxies.length,c=this.corsProxies[r];console.log(`Fetching data for ${e} using proxy ${r+1}...`);const d=`${this.baseUrl}${e}?interval=1d&range=6mo&indicators=quote&includePrePost=false`,g=`${c}${encodeURIComponent(d)}`;console.log(`Request URL: ${g}`);const f=await fetch(g,{method:"GET"});if(console.log(`Response status: ${f.status}`),!f.ok)throw new Error(`HTTP error! status: ${f.status}`);const m=await f.json();if(console.log("Raw data structure:",m),!m.chart||!m.chart.result||m.chart.result.length===0)throw new Error("No chart data available");const p=m.chart.result[0];if(!p.indicators||!p.indicators.quote||!p.indicators.quote[0])throw new Error("Invalid data structure - missing indicators");const D=p.indicators.quote[0],S={open:D.open||[],high:D.high||[],low:D.low||[],close:D.close||[],volume:D.volume||[]},T=S.close.length,_={open:new Array(T),high:new Array(T),low:new Array(T),close:new Array(T),volume:new Array(T)};let $=0;for(let C=0;C<T;C++)_.open[C]=S.open[C]!==null?S.open[C]:NaN,_.high[C]=S.high[C]!==null?S.high[C]:NaN,_.low[C]=S.low[C]!==null?S.low[C]:NaN,_.close[C]=S.close[C]!==null?S.close[C]:NaN,_.volume[C]=S.volume[C]!==null?S.volume[C]:NaN,!isNaN(_.open[C])&&!isNaN(_.high[C])&&!isNaN(_.low[C])&&!isNaN(_.close[C])&&$++;if(console.log(`Found ${T} total data points, ${$} valid OHLC points for ${e}`),$<28&&console.warn(`‚ö†Ô∏è Insufficient valid data for ADX calculation: ${$} < 28`),T<50)throw new Error(`Insufficient data points (${T}) for technical analysis`);const I=qs(_),N=C=>{if(!C||!Array.isArray(C))return console.warn("getLastValue: Invalid series data"),null;for(let M=C.length-1;M>=0;M--){const v=C[M];if(v!=null&&!isNaN(v)&&isFinite(v))return console.log(`getLastValue: Found valid value ${v} at index ${M} of ${C.length}`),v}return console.warn(`getLastValue: No valid values found in series of length ${C.length}`),null},y=(C,M=null)=>{const v=N(C),b=N(_.close);let L="NEUTRAL";return M&&v!==null&&b!==null&&(M.type==="price_comparison"?b>v*M.buy?L="BUY":b<v*M.sell&&(L="SELL"):M.type==="rsi"?v>M.overbought?L="OVERBOUGHT":v<M.oversold&&(L="OVERSOLD"):M.type==="adx"&&(v>M.strong?L="STRONG_TREND":v<M.weak&&(L="WEAK_TREND"))),{value:v!==null?v.toFixed(2):null,signal:L,currentPrice:b!==null?b.toFixed(2):null}},B={ma5:y(I.MA_5,{type:"price_comparison",buy:1.02,sell:.98}),sma5:y(I.SMA_5,{type:"price_comparison",buy:1.02,sell:.98}),ma10:y(I.MA_10,{type:"price_comparison",buy:1.02,sell:.98}),sma10:y(I.SMA_10,{type:"price_comparison",buy:1.02,sell:.98}),ma30:y(I.MA_30,{type:"price_comparison",buy:1.02,sell:.98}),sma30:y(I.SMA_30,{type:"price_comparison",buy:1.02,sell:.98}),sma50:{value:null,signal:"N/A"},ichimokuBaseLine:y(I.ICHIMOKU_BASELINE_26,{type:"price_comparison",buy:1.01,sell:.99}),ichimokuConversionLine:y(I.ICHIMOKU_CONVERSIONLINE_9,{type:"price_comparison",buy:1.01,sell:.99}),ichimokuLaggingSpan:y(I.ICHIMOKU_LAGGINGSPAN_26),vwma20:y(I.VWMA_20,{type:"price_comparison",buy:1.02,sell:.98}),rsi14:y(I.RSI_14,{type:"rsi",overbought:70,oversold:30}),adx14:(()=>{console.log("üîç Processing ADX results..."),console.log("ADX_14 series:",I.ADX_14),console.log("ADX_14_PLUS_DI series:",I.ADX_14_PLUS_DI),console.log("ADX_14_MINUS_DI series:",I.ADX_14_MINUS_DI);const C=N(I.ADX_14),M=N(I.ADX_14_PLUS_DI),v=N(I.ADX_14_MINUS_DI);console.log("ADX extracted values:",{adxValue:C,plusDI:M,minusDI:v});let b="NEUTRAL";C!==null&&!isNaN(C)&&(C>25?b="STRONG_TREND":C<20&&(b="WEAK_TREND"));const L={value:C!==null&&!isNaN(C)?C.toFixed(2):null,signal:b,plusDI:M!==null&&!isNaN(M)?M.toFixed(2):null,minusDI:v!==null&&!isNaN(v)?v.toFixed(2):null};return console.log("ADX final result:",L),L})(),macd:(()=>{const C=N(I.MACD_12_26_9),M=N(I.MACD_SIGNAL_9),v=N(I.MACD_HIST);let b="NEUTRAL";return C!==null&&M!==null&&v!==null&&(C>M&&v>0?b="BUY":C<M&&v<0&&(b="SELL")),{value:C!==null?C.toFixed(2):null,signal:b,signalLine:M!==null?M.toFixed(2):null,histogram:v!==null?v.toFixed(2):null}})(),lastUpdated:new Date().toISOString(),dataPoints:T,proxy:`Proxy ${r+1}`,source:"Yahoo Finance API (Fresh) - Core v1.0.0",fullSeries:I,priceRange:{min:Math.min(..._.close.filter(C=>!isNaN(C))).toFixed(2),max:Math.max(..._.close.filter(C=>!isNaN(C))).toFixed(2),latest:((o=N(_.close))==null?void 0:o.toFixed(2))||"N/A",first:((s=_.close.find(C=>!isNaN(C)))==null?void 0:s.toFixed(2))||"N/A"}};return console.log(`Price data for ${e}:`,{dataPoints:T,priceRange:B.priceRange,samplePrices:_.close.slice(-10).filter(C=>!isNaN(C))}),console.log(`Calculated indicators for ${e}:`,B),this.cache.set(a,{data:B,timestamp:Date.now()}),this.currentProxyIndex=r,B}catch(r){if(console.warn(`Proxy ${i+1} failed for ${e}:`,r.message),i===this.corsProxies.length-1)return console.error(`All proxies failed for ${e}:`,r),{ma5:{value:null,signal:"N/A"},sma5:{value:null,signal:"N/A"},ma10:{value:null,signal:"N/A"},sma10:{value:null,signal:"N/A"},ma30:{value:null,signal:"N/A"},sma30:{value:null,signal:"N/A"},sma50:{value:null,signal:"N/A"},ichimokuBaseLine:{value:null,signal:"N/A"},ichimokuConversionLine:{value:null,signal:"N/A"},ichimokuLaggingSpan:{value:null,signal:"N/A"},vwma20:{value:null,signal:"N/A"},rsi14:{value:null,signal:"N/A"},adx14:{value:null,signal:"N/A"},macd:{value:null,signal:"N/A"},lastUpdated:new Date().toISOString(),error:`All proxies failed: ${r.message}`,source:"Error"}}}clearCache(){this.cache.clear()}async getStockInfo(e){const a=`info_${e}`,o=24*60*60*1e3;if(this.cache.has(a)){const s=this.cache.get(a);if(Date.now()-s.timestamp<o)return console.log(`Using cached stock info for ${e}`),s.data}for(let s=0;s<this.corsProxies.length;s++)try{const i=(this.currentProxyIndex+s)%this.corsProxies.length,r=this.corsProxies[i];console.log(`Fetching stock info for ${e} using proxy ${i+1}...`);const c=`https://query1.finance.yahoo.com/v10/finance/quoteSummary/${e}?modules=summaryProfile,price,defaultKeyStatistics`,d=`${r}${encodeURIComponent(c)}`,g=await fetch(d,{method:"GET"});if(!g.ok)throw new Error(`HTTP error! status: ${g.status}`);const f=await g.json();if(!f.quoteSummary||!f.quoteSummary.result||f.quoteSummary.result.length===0)throw new Error("No quoteSummary data available");const m=f.quoteSummary.result[0],p=m.summaryProfile||{},D=m.price||{},S=m.defaultKeyStatistics||{},T={symbol:e,sector:p.sector||"Unknown",industry:p.industry||"Unknown Industry",exchange:D.exchangeName||D.exchange||this.getDefaultExchange(e),marketCap:D.marketCap?D.marketCap.raw:null,marketCapFormatted:D.marketCap?D.marketCap.fmt:"N/A",currency:D.currency||"USD",country:p.country||"Unknown",website:p.website||null,employees:p.fullTimeEmployees||null,businessSummary:p.longBusinessSummary||null,marketCapCategory:this.getMarketCapCategory(D.marketCap?D.marketCap.raw:null),lastUpdated:new Date().toISOString(),source:"Yahoo Finance API (Live)",proxy:`Proxy ${i+1}`,confidence:.95};return console.log(`Stock info for ${e}:`,T),this.cache.set(a,{data:T,timestamp:Date.now()}),this.currentProxyIndex=i,T}catch(i){if(console.warn(`Proxy ${s+1} failed for stock info ${e}:`,i.message),s===this.corsProxies.length-1){console.error(`All proxies failed for stock info ${e}:`,i);const r={symbol:e,sector:"Unknown",industry:"Unknown Industry",exchange:this.getDefaultExchange(e),marketCap:null,marketCapFormatted:"N/A",currency:"USD",country:"Unknown",website:null,employees:null,businessSummary:null,marketCapCategory:"unknown",lastUpdated:new Date().toISOString(),source:"Default (API Failed)",error:`All proxies failed: ${i.message}`,confidence:0};return this.cache.set(a,{data:r,timestamp:Date.now()}),r}}}getDefaultExchange(e){const a=["AAPL","MSFT","GOOGL","GOOG","AMZN","TSLA","NVDA","META","NFLX","RKLB","ASTS","RIVN","MDB","ONDS","PL","AVAV","CRM","AVGO","LEU","SMR","CRWV","IONQ","PLTR","HIMS"],o=["TSM","ORCL","RDW"];return a.includes(e)?"NASDAQ":o.includes(e)?"NYSE":"NASDAQ"}getMarketCapCategory(e){return!e||e<=0?"unknown":e>=2e11?"mega_cap":e>=1e10?"large_cap":e>=2e9?"mid_cap":e>=3e8?"small_cap":"micro_cap"}clearDailyCache(){ue.clearAllCache()}getCacheStats(){const e={};for(const[a,o]of this.cache.entries())e[a]={age:Date.now()-o.timestamp,expired:Date.now()-o.timestamp>this.cacheTimeout};return{apiCache:e,dailyCache:ue.getCacheStats()}}buildProxyUrl(e){return`${this.corsProxies[this.currentProxyIndex]}${encodeURIComponent(e)}`}async getOhlcv(e,a="1d",o="3mo"){const s=`ohlcv_${e}_${a}_${o}`;if(this.cache.has(s)){const i=this.cache.get(s);if(Date.now()-i.timestamp<this.cacheTimeout)return console.log(`üìä Using cached OHLCV data for ${e}`),i.data}for(let i=0;i<this.corsProxies.length;i++)try{const r=(this.currentProxyIndex+i)%this.corsProxies.length,c=this.corsProxies[r];console.log(`üìä Fetching OHLCV data for ${e} using proxy ${r+1}...`);const d=`${this.baseUrl}${e}?interval=${a}&range=${o}&indicators=quote&includePrePost=false`,g=this.buildProxyUrl(d),f=await fetch(g,{method:"GET"});if(!f.ok)throw new Error(`HTTP error! status: ${f.status}`);const m=await f.json();if(!m.chart||!m.chart.result||m.chart.result.length===0)throw new Error("No chart data available");const p=m.chart.result[0];if(!p.indicators||!p.indicators.quote||!p.indicators.quote[0])throw new Error("Invalid data structure - missing indicators");const D=p.indicators.quote[0],T={timestamps:p.timestamp||[],open:D.open||[],high:D.high||[],low:D.low||[],close:D.close||[],volume:D.volume||[]},_=T.timestamps.length;if(_<20)throw new Error(`Insufficient OHLCV data points: ${_} < 20`);let $=0;for(let N=0;N<_;N++)T.open[N]!=null&&T.high[N]!=null&&T.low[N]!=null&&T.close[N]!=null&&T.volume[N]!=null&&$++;if(console.log(`üìä OHLCV data for ${e}: ${_} total points, ${$} valid points`),$<15)throw new Error(`Insufficient valid OHLCV data: ${$} < 15`);const I={...T,metadata:{symbol:e,period:a,range:o,totalPoints:_,validPoints:$,fetchedAt:new Date().toISOString(),source:"Yahoo Finance API",proxy:`Proxy ${r+1}`}};return this.cache.set(s,{data:I,timestamp:Date.now()}),this.currentProxyIndex=r,I}catch(r){if(console.warn(`üìä Proxy ${i+1} failed for OHLCV ${e}:`,r.message),i===this.corsProxies.length-1)throw console.error(`üìä All proxies failed for OHLCV ${e}:`,r),new Error(`Failed to fetch OHLCV data: ${r.message}`)}}}const ie=new zs;class js{constructor(){this.preferPrecomputed=!0,this.maxPrecomputedAge=24*60*60*1e3,this.fallbackToRealtime=!0}async getTechnicalIndicators(e){console.log(`üîç Getting technical indicators for ${e}`);try{if(this.preferPrecomputed){const o=await this.tryPrecomputedData(e);if(o&&this.isADXValid(o))return console.log(`‚úÖ Using precomputed data with valid ADX for ${e}`),o;o&&console.log(`‚ö†Ô∏è Precomputed data has invalid ADX for ${e}, falling back to real-time`)}const a=await ue.getTechnicalIndicators(e);if(a&&this.isADXValid(a))return console.log(`üì¶ Using daily cache with valid ADX for ${e}`),a;if(a&&console.log(`‚ö†Ô∏è Cached data has invalid ADX for ${e}, falling back to real-time`),this.fallbackToRealtime){console.log(`‚ö° Using real-time calculation for ${e}`);const o=await ie.fetchTechnicalIndicatorsFromAPI(e);if(o&&!o.error)return await ue.setTechnicalIndicators(e,o),o}throw new Error("All data sources failed")}catch(a){return console.error(`‚ùå Failed to get technical indicators for ${e}:`,a),this.createErrorResponse(e,a.message)}}isADXValid(e){if(!e||!e.adx14)return!1;const a=e.adx14.value;if(a==null||a==="N/A")return!1;if(e.fullSeries&&e.fullSeries.ADX_14){const s=e.fullSeries.ADX_14.filter(i=>i!=null&&!isNaN(i)).length;if(s<5)return console.log(`ADX validation failed: only ${s} valid values`),!1}return!0}async tryPrecomputedData(e){try{console.log(`üîÑ Trying precomputed data for ${e}`);const a=await dt.getTechnicalIndicators(e),o=new Date(a.lastUpdated);return Date.now()-o.getTime()<=this.maxPrecomputedAge?(console.log(`‚úÖ Using precomputed data for ${e} (${a.dataAge})`),{...a,source:`Precomputed (${a.dataAge})`,loadTime:"<50ms"}):(console.log(`‚è∞ Precomputed data too old for ${e} (${a.dataAge})`),null)}catch(a){return console.log(`‚ùå Precomputed data not available for ${e}: ${a.message}`),null}}createErrorResponse(e,a){return{ma5:{value:null,signal:"N/A"},sma5:{value:null,signal:"N/A"},ma10:{value:null,signal:"N/A"},sma10:{value:null,signal:"N/A"},ma30:{value:null,signal:"N/A"},sma30:{value:null,signal:"N/A"},sma50:{value:null,signal:"N/A"},ichimokuBaseLine:{value:null,signal:"N/A"},ichimokuConversionLine:{value:null,signal:"N/A"},ichimokuLaggingSpan:{value:null,signal:"N/A"},vwma20:{value:null,signal:"N/A"},rsi14:{value:null,signal:"N/A"},adx14:{value:null,signal:"N/A"},macd:{value:null,signal:"N/A"},lastUpdated:new Date().toISOString(),error:a,source:"Error",symbol:e}}async refreshTechnicalIndicators(e){console.log(`üîÑ Force refreshing data for ${e}`),ue.clearSymbolCache(e),dt.clearCache();const a=this.fallbackToRealtime,o=this.preferPrecomputed;this.fallbackToRealtime=!0,this.preferPrecomputed=!1;try{return await this.getTechnicalIndicators(e)}finally{this.fallbackToRealtime=a,this.preferPrecomputed=o}}async getBatchTechnicalIndicators(e,a=3){const o=new Map,s=[];for(let i=0;i<e.length;i+=a)s.push(e.slice(i,i+a));console.log(`üì¶ Processing ${e.length} symbols in ${s.length} batches`);for(const i of s){const r=i.map(async d=>{try{const g=await this.getTechnicalIndicators(d);return{symbol:d,success:!0,data:g}}catch(g){return{symbol:d,success:!1,error:g.message}}});(await Promise.all(r)).forEach(d=>{o.set(d.symbol,d)}),s.indexOf(i)<s.length-1&&await new Promise(d=>setTimeout(d,100))}return o}async getDataSourceStatus(){const e={precomputed:{available:!1,symbols:[],lastUpdate:null},cache:ue.getCacheStats(),realtime:{available:!0,proxies:ie.corsProxies.length}};try{const a=await dt.getAvailableData();a&&(e.precomputed={available:!0,symbols:a.symbols,lastUpdate:a.generatedAt,successful:a.successful,failed:a.failed})}catch(a){console.warn("Failed to get precomputed status:",a)}return e}setPreferences(e){e.preferPrecomputed!==void 0&&(this.preferPrecomputed=e.preferPrecomputed),e.fallbackToRealtime!==void 0&&(this.fallbackToRealtime=e.fallbackToRealtime),e.maxPrecomputedAge!==void 0&&(this.maxPrecomputedAge=e.maxPrecomputedAge),console.log("Updated preferences:",{preferPrecomputed:this.preferPrecomputed,fallbackToRealtime:this.fallbackToRealtime,maxPrecomputedAge:this.maxPrecomputedAge})}}const ke=new js;class Gs{constructor(){this.isWarming=!1,this.warmupProgress=0,this.warmupResults=new Map,this.warmupStartTime=null,this.warmupEndTime=null,this.config={maxConcurrent:2,batchDelay:2e3,retryAttempts:2,retryDelay:5e3,enableAutoWarmup:this.isProductionEnvironment(),warmupOnVersionChange:!1,warmupOnFirstLoad:!1,warmupInterval:24*60*60*1e3,minCacheCoverage:.95},this.trackedSymbols=["ASTS","RIVN","PL","ONDS","RDW","AVAV","MDB","ORCL","TSM","RKLB","CRM","NVDA","AVGO","AMZN","GOOG","META","NFLX","LEU","SMR","CRWV","IONQ","PLTR","HIMS","TSLA"]}async start(){if(console.log("üî• Starting Cache Warmup Service..."),!this.isProductionEnvironment()){console.log("üö´ Cache warmup disabled in development environment");return}try{const e=await this.shouldPerformWarmup();e.needed?(console.log(`üî• Warmup needed: ${e.reason}`),await this.performWarmup()):console.log("‚úÖ Cache warmup not needed"),this.config.enableAutoWarmup&&this.schedulePeriodicWarmup()}catch(e){console.error("‚ùå Failed to start cache warmup service:",e)}}async shouldPerformWarmup(){try{const e=await this.getCurrentVersion(),a=this.getLastWarmupVersion();if(this.config.warmupOnVersionChange&&e!==a)return{needed:!0,reason:`Version changed from ${a} to ${e}`};const o=this.getLastWarmupTime();if(this.config.warmupOnFirstLoad&&!o)return{needed:!0,reason:"First load - no previous warmup found"};if(o){const i=Date.now()-o;if(i>this.config.warmupInterval)return{needed:!0,reason:`Time interval exceeded (${Math.round(i/36e5)}h ago)`}}const s=await this.getCacheStats();return s.coverage<this.config.minCacheCoverage?{needed:!0,reason:`Low cache coverage (${Math.round(s.coverage*100)}%)`}:{needed:!1,reason:"Cache is fresh and complete"}}catch(e){return console.error("Error checking warmup need:",e),{needed:!0,reason:"Error checking - performing warmup as fallback"}}}async performWarmup(){if(this.isWarming)return console.log("‚ö†Ô∏è Warmup already in progress"),this.warmupResults;console.log(`üî• Starting cache warmup for ${this.trackedSymbols.length} symbols...`),this.isWarming=!0,this.warmupProgress=0,this.warmupResults.clear(),this.warmupStartTime=Date.now();const e="cache_warmup_total";_e.start(e);try{const a=this.createBatches(this.trackedSymbols,this.config.maxConcurrent);for(let i=0;i<a.length;i++){const r=a[i];console.log(`üî• Processing batch ${i+1}/${a.length}: ${r.join(", ")}`);const c=r.map(g=>this.warmupSymbol(g));(await Promise.all(c)).forEach((g,f)=>{this.warmupResults.set(r[f],g)}),this.warmupProgress=(i+1)/a.length*100,console.log(`üìä Warmup progress: ${Math.round(this.warmupProgress)}%`),i<a.length-1&&(console.log(`‚è≥ Waiting ${this.config.batchDelay}ms before next batch...`),await this.sleep(this.config.batchDelay))}this.warmupEndTime=Date.now();const o=this.warmupEndTime-this.warmupStartTime,s=this.getWarmupStats();return console.log(`üéâ Cache warmup completed in ${Math.round(o/1e3)}s`),console.log(`üìä Results: ${s.successful}/${s.total} successful (${s.successRate}%)`),this.saveWarmupRecord(s),this.warmupResults}catch(a){throw console.error("‚ùå Cache warmup failed:",a),a}finally{this.isWarming=!1,_e.end(e)}}async warmupSymbol(e,a=1){const o=Date.now();try{console.log(`üî• Warming up ${e} (attempt ${a}/${this.config.retryAttempts+1})`);const s=await ke.getTechnicalIndicators(e),i=Date.now()-o;if(s&&!s.error)return console.log(`‚úÖ ${e} warmed up successfully in ${i}ms (${s.source})`),{success:!0,duration:i,source:s.source,timestamp:new Date().toISOString()};throw new Error((s==null?void 0:s.error)||"Unknown error")}catch(s){return console.error(`‚ùå Failed to warm up ${e} (attempt ${a}): ${s.message}`),a<=this.config.retryAttempts?(console.log(`üîÑ Retrying ${e} in ${this.config.retryDelay}ms...`),await this.sleep(this.config.retryDelay),this.warmupSymbol(e,a+1)):{success:!1,error:s.message,duration:Date.now()-o,timestamp:new Date().toISOString()}}}createBatches(e,a){const o=[];for(let s=0;s<e.length;s+=a)o.push(e.slice(s,s+a));return o}async getCurrentVersion(){try{const e=this.getPackageJsonUrl(),a=await fetch(e);if(a.ok)return(await a.json()).version||"1.0.0"}catch(e){return console.warn("Failed to fetch package.json:",e),Date.now().toString()}return"1.0.0"}getPackageJsonUrl(){return at(async()=>{const{paths:a}=await Promise.resolve().then(()=>Kt);return{paths:a}},void 0).then(({paths:a})=>a.packageJson()),"/investment-dashboard/package.json"}getLastWarmupVersion(){return localStorage.getItem("cache_warmup_version")||null}getLastWarmupTime(){const e=localStorage.getItem("cache_warmup_time");return e?parseInt(e):null}async getCacheStats(){let e=0;for(const a of this.trackedSymbols)try{G.get(`technical_indicators_${a}`)&&e++}catch{}return{total:this.trackedSymbols.length,cached:e,coverage:e/this.trackedSymbols.length}}getWarmupStats(){const e=Array.from(this.warmupResults.values()),a=e.filter(s=>s.success).length,o=e.filter(s=>!s.success).length;return{total:e.length,successful:a,failed:o,successRate:Math.round(a/e.length*100),duration:this.warmupEndTime-this.warmupStartTime,averageDuration:e.reduce((s,i)=>s+i.duration,0)/e.length}}saveWarmupRecord(e){const a=this.getCurrentVersion();localStorage.setItem("cache_warmup_version",a),localStorage.setItem("cache_warmup_time",Date.now().toString()),localStorage.setItem("cache_warmup_stats",JSON.stringify(e)),console.log("üíæ Warmup record saved")}schedulePeriodicWarmup(){console.log(`‚è∞ Scheduled periodic warmup every ${this.config.warmupInterval/36e5} hours`),setInterval(async()=>{console.log("‚è∞ Periodic warmup triggered");try{await this.performWarmup()}catch(e){console.error("‚ùå Periodic warmup failed:",e)}},this.config.warmupInterval)}async triggerManualWarmup(){return console.log("üî• Manual warmup triggered"),this.performWarmup()}getWarmupStatus(){return{isWarming:this.isWarming,progress:this.warmupProgress,results:Object.fromEntries(this.warmupResults),lastWarmupTime:this.getLastWarmupTime(),lastWarmupVersion:this.getLastWarmupVersion(),trackedSymbols:this.trackedSymbols,config:this.config}}sleep(e){return new Promise(a=>setTimeout(a,e))}isProductionEnvironment(){return!0}updateConfig(e){this.config={...this.config,...e},console.log("üîß Cache warmup config updated:",this.config)}addTrackedSymbol(e){this.trackedSymbols.includes(e)||(this.trackedSymbols.push(e),console.log(`‚ûï Added ${e} to tracked symbols`))}removeTrackedSymbol(e){const a=this.trackedSymbols.indexOf(e);a>-1&&(this.trackedSymbols.splice(a,1),console.log(`‚ûñ Removed ${e} from tracked symbols`))}}const ft=new Gs;class Qs{constructor(){this.maxConcurrent=3,this.currentLoading=0,this.queue=[],this.loadingWidgets=new Set,this.stats={totalRequests:0,completedRequests:0,failedRequests:0,averageLoadTime:0,loadTimes:[]}}async addToQueue(e,a,o=2){return new Promise((s,i)=>{const r={id:a,loadFunction:e,priority:o,resolve:s,reject:i,createdAt:Date.now()};if(this.loadingWidgets.has(a)){console.warn(`Widget ${a} is already loading, skipping duplicate request`),i(new Error("Widget already loading"));return}this.insertByPriority(r),this.stats.totalRequests++,console.log(`WidgetLoadManager: Added ${a} to queue (priority: ${o}, queue size: ${this.queue.length})`),this.processQueue()})}insertByPriority(e){let a=this.queue.length;for(let o=0;o<this.queue.length;o++)if(e.priority<this.queue[o].priority){a=o;break}this.queue.splice(a,0,e)}async processQueue(){if(this.currentLoading>=this.maxConcurrent||this.queue.length===0)return;const e=this.queue.shift();this.currentLoading++,this.loadingWidgets.add(e.id);const a=Date.now();console.log(`WidgetLoadManager: Starting load for ${e.id} (${this.currentLoading}/${this.maxConcurrent} slots used)`);try{await e.loadFunction();const o=Date.now()-a;this.updateStats(o,!0),console.log(`WidgetLoadManager: Successfully loaded ${e.id} in ${o}ms`),e.resolve()}catch(o){const s=Date.now()-a;this.updateStats(s,!1),console.error(`WidgetLoadManager: Failed to load ${e.id} after ${s}ms:`,o),e.reject(o)}finally{this.currentLoading--,this.loadingWidgets.delete(e.id),setTimeout(()=>this.processQueue(),100)}}updateStats(e,a){a?this.stats.completedRequests++:this.stats.failedRequests++,this.stats.loadTimes.push(e),this.stats.loadTimes.length>100&&this.stats.loadTimes.shift(),this.stats.averageLoadTime=this.stats.loadTimes.reduce((o,s)=>o+s,0)/this.stats.loadTimes.length}cancelWidget(e){const a=this.queue.findIndex(o=>o.id===e);return a!==-1?(this.queue.splice(a,1)[0].reject(new Error("Widget load cancelled")),console.log(`WidgetLoadManager: Cancelled queued widget ${e}`),!0):!1}clearQueue(){const e=this.queue.length;this.queue.forEach(a=>{a.reject(new Error("Queue cleared"))}),this.queue=[],console.log(`WidgetLoadManager: Cleared queue, cancelled ${e} tasks`)}getStatus(){return{currentLoading:this.currentLoading,queueSize:this.queue.length,maxConcurrent:this.maxConcurrent,stats:{...this.stats}}}setMaxConcurrent(e){this.maxConcurrent=Math.max(1,Math.min(10,e)),console.log(`WidgetLoadManager: Max concurrent set to ${this.maxConcurrent}`),this.currentLoading<this.maxConcurrent&&this.processQueue()}resetStats(){this.stats={totalRequests:0,completedRequests:0,failedRequests:0,averageLoadTime:0,loadTimes:[]},console.log("WidgetLoadManager: Stats reset")}}const yt=new Qs,Xs={name:"LazyTradingViewWidget",props:{widgetType:{type:String,required:!0},config:{type:Object,required:!0},scriptUrl:{type:String,required:!0},height:{type:String,default:"400px"},priority:{type:Number,default:1}},data(){return{isVisible:!1,loaded:!1,error:!1,observer:null,loadStartTime:0}},computed:{containerId(){return`lazy-widget-${this.widgetType}-${Date.now()}`}},mounted(){this.setupIntersectionObserver()},beforeUnmount(){this.observer&&this.observer.disconnect()},methods:{setupIntersectionObserver(){const n={1:"200px",2:"100px",3:"50px"};this.observer=new IntersectionObserver(e=>{e.forEach(a=>{a.isIntersecting&&!this.loaded&&!this.error&&(this.isVisible=!0,this.loadWidget(),this.observer.disconnect())})},{rootMargin:n[this.priority]||"100px",threshold:.1}),this.observer.observe(this.$refs.container)},async loadWidget(){this.loadStartTime=performance.now();try{const e={1:0,2:500,3:1e3}[this.priority]||0;e>0&&await new Promise(o=>setTimeout(o,e));const a=`lazy-${this.widgetType}-${this.containerId}`;await yt.addToQueue(()=>this.createWidget(),a,this.priority)}catch(n){console.error("Failed to load widget:",n),this.error=!0}},async createWidget(){return new Promise((n,e)=>{this.$nextTick(()=>{const a=this.$refs.container;if(!a){e(new Error("Container not found"));return}const o=a.querySelector(".widget-placeholder, .widget-loading");o&&(o.style.display="none");try{const s=document.createElement("div");s.className="tradingview-widget-container",s.style.height="100%",s.style.width="100%";const i=document.createElement("div");i.className="tradingview-widget-container__widget",i.style.height="100%",i.style.width="100%",s.appendChild(i);const r=document.createElement("script");r.type="text/javascript",r.src=this.scriptUrl,r.async=!0;const c=JSON.stringify(this.config);r.innerHTML=c,console.log(`üîß Creating ${this.widgetType} widget with config:`,this.config),console.log("üìù Config JSON:",c);const g=setTimeout(()=>{console.warn(`${this.widgetType} widget load timeout`),this.error=!0,e(new Error("Widget load timeout"))},{1:8e3,2:1e4,3:12e3}[this.priority]||1e4);r.onload=()=>{clearTimeout(g),this.loaded=!0;const f=performance.now()-this.loadStartTime;console.log(`‚úÖ ${this.widgetType} widget loaded in ${f.toFixed(2)}ms (Priority: ${this.priority})`),n()},r.onerror=f=>{clearTimeout(g),console.error(`‚ùå ${this.widgetType} script load failed:`,f),this.error=!0,e(new Error("Script load failed"))},i.appendChild(r),a.appendChild(s)}catch(s){console.error(`‚ùå ${this.widgetType} widget creation failed:`,s),this.error=!0,e(s)}})})},async retry(){this.error=!1,this.loaded=!1,await this.loadWidget()}}},Ks=["id"],Ys={key:0,class:"widget-placeholder"},Js={class:"placeholder-content"},Zs={class:"placeholder-text"},ea={key:1,class:"widget-loading"},ta={key:2,class:"widget-error"};function sa(n,e,a,o,s,i){return u(),h("div",{class:"lazy-widget",id:i.containerId,ref:"container",style:z({height:a.height})},[!s.isVisible&&!s.loaded?(u(),h("div",Ys,[t("div",Js,[e[1]||(e[1]=t("div",{class:"placeholder-icon"},"üìä",-1)),t("div",Zs,l(a.widgetType)+" Widget",1),e[2]||(e[2]=t("div",{class:"placeholder-subtext"},"Scroll to load",-1))])])):k("",!0),s.isVisible&&!s.loaded&&!s.error?(u(),h("div",ea,[e[3]||(e[3]=t("div",{class:"loading-spinner"},null,-1)),t("span",null,"Loading "+l(a.widgetType)+"...",1)])):k("",!0),s.error?(u(),h("div",ta,[e[4]||(e[4]=t("span",null,"‚ö†Ô∏è Failed to load",-1)),t("button",{onClick:e[0]||(e[0]=(...r)=>i.retry&&i.retry(...r)),class:"retry-btn"},"Retry")])):k("",!0)],12,Ks)}const wt=E(Xs,[["render",sa],["__scopeId","data-v-f6167f96"]]),aa={name:"VixWidget",data(){return{loading:!0,error:!1,widgetId:`vix-widget-${Date.now()}`}},mounted(){this.loadVixWidget()},methods:{async loadVixWidget(){this.loading=!0,this.error=!1;try{const n=this.$refs.vixContainer;if(!n)return;for(;n.firstChild;)n.removeChild(n.firstChild);console.log("üîß Starting VIX widget creation with FRED:VIXCLS..."),await this.createWidget()}catch(n){console.error("‚ùå VIX widget creation failed:",n),this.error=!0,this.loading=!1}},async createWidget(){return new Promise((n,e)=>{this.$nextTick(()=>{const a=this.$refs.vixContainer;if(!a){e(new Error("Container not found"));return}try{const o=document.createElement("div");o.className="tradingview-widget-container",o.style.height="100%",o.style.width="100%";const s=document.createElement("div");s.className="tradingview-widget-container__widget",s.style.height="100%",s.style.width="100%",o.appendChild(s);const i=document.createElement("script");i.type="text/javascript",i.src="https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js",i.async=!0;const r={lineWidth:2,lineType:2,chartType:"line",showVolume:!1,fontColor:"rgb(106, 109, 120)",gridLineColor:"rgba(46, 46, 46, 0.06)",volumeUpColor:"rgba(34, 171, 148, 0.5)",volumeDownColor:"rgba(247, 82, 95, 0.5)",backgroundColor:"#ffffff",widgetFontColor:"#0F0F0F",upColor:"#22ab94",downColor:"#f7525f",borderUpColor:"#22ab94",borderDownColor:"#f7525f",wickUpColor:"#22ab94",wickDownColor:"#f7525f",colorTheme:"light",isTransparent:!0,locale:"en",chartOnly:!1,scalePosition:"right",scaleMode:"Normal",fontFamily:"-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif",valuesTracking:"1",changeMode:"price-and-percent",symbols:[["FRED:VIXCLS|12M"]],dateRanges:["12m|1D","60m|1W","all|1M"],fontSize:"10",headerFontSize:"medium",autosize:!0,width:"100%",height:"100%",noTimeScale:!1,hideDateRanges:!1,hideMarketStatus:!1,hideSymbolLogo:!1},c=JSON.stringify(r);i.innerHTML=c,console.log("üîß FRED:VIXCLS Config:",r),console.log("üìù Config JSON:",c);const d=setTimeout(()=>{console.warn("‚è∞ VIX widget load timeout"),this.error=!0,this.loading=!1,e(new Error("Widget load timeout"))},8e3);i.onload=()=>{clearTimeout(d),console.log("‚úÖ FRED:VIXCLS widget script loaded"),this.loading=!1,n()},i.onerror=g=>{clearTimeout(d),console.error("‚ùå VIX widget script failed:",g),this.error=!0,this.loading=!1,e(new Error("Script load failed"))},s.appendChild(i),a.appendChild(o)}catch(o){console.error("‚ùå VIX widget creation failed:",o),this.error=!0,this.loading=!1,e(o)}})})}}},na={class:"vix-widget-container",ref:"vixContainer",style:{height:"600px"}},ia={key:0,class:"loading-state"},oa={key:1,class:"error-state"};function ra(n,e,a,o,s,i){return u(),h("div",na,[s.loading?(u(),h("div",ia,[...e[1]||(e[1]=[t("div",{class:"loading-spinner"},null,-1),t("span",null,"Loading VIX Index...",-1)])])):k("",!0),s.error?(u(),h("div",oa,[e[2]||(e[2]=t("span",null,"‚ö†Ô∏è Failed to load VIX",-1)),t("button",{onClick:e[0]||(e[0]=(...r)=>i.loadVixWidget&&i.loadVixWidget(...r)),class:"retry-btn"},"Retry")])):k("",!0)],512)}const la=E(aa,[["render",ra],["__scopeId","data-v-d1b725d9"]]),ca={name:"ZeiiermanFearGreedGauge",data(){return{components:{sp125:65,hl52:52,mcsi:60,putCall:45,vix50:55,safe:62,yieldSpread:67},lastUpdate:new Date}},computed:{fearGreedValue(){const n=Object.values(this.components);return n.reduce((a,o)=>a+o,0)/n.length},needleAngle(){return(this.fearGreedValue-50)*1.8},needleX(){const n=this.needleAngle*(Math.PI/180);return 200+140*Math.sin(n)},needleY(){const n=this.needleAngle*(Math.PI/180);return 200-140*Math.cos(n)},currentSentiment(){return this.fearGreedValue<=25?"Extreme Fear":this.fearGreedValue<=45?"Fear":this.fearGreedValue<=55?"Neutral":this.fearGreedValue<=75?"Greed":"Extreme Greed"},sentimentClass(){return this.fearGreedValue<=25?"extreme-fear":this.fearGreedValue<=45?"fear":this.fearGreedValue<=55?"neutral":this.fearGreedValue<=75?"greed":"extreme-greed"},sentimentDescription(){return this.fearGreedValue<=25?"Market showing extreme pessimism and panic selling conditions":this.fearGreedValue<=45?"Elevated market anxiety with defensive investor positioning":this.fearGreedValue<=55?"Balanced market sentiment with mixed investor signals":this.fearGreedValue<=75?"Optimistic market conditions with increased risk appetite":"Excessive market euphoria indicating potential overvaluation"}},mounted(){console.log("Zeiierman Fear & Greed Index loaded with fixed value:",this.fearGreedValue)},methods:{updateComponents(){this.lastUpdate=new Date,console.log("Zeiierman Fear & Greed Index:",this.fearGreedValue)}}},da={class:"fear-greed-gauge-container"},ua={class:"market-fng-gauge__meter-container"},ha={class:"left-side"},ga={class:"sentiment-indicator"},ma={class:"sentiment-text"},fa={class:"sentiment-description"},pa={class:"gauge-wrapper"},va={class:"gauge-svg",viewBox:"0 0 400 240",xmlns:"http://www.w3.org/2000/svg"},ya={class:"needle-group"},wa=["x2","y2"],Sa={x:"200",y:"230","text-anchor":"middle",class:"gauge-value"},ba={class:"components-section"},_a={class:"components-grid"},ka={class:"component-item"},Ca={class:"component-bar"},Ta={class:"component-value"},Da={class:"component-item"},Aa={class:"component-bar"},Ia={class:"component-value"},xa={class:"component-item"},Ma={class:"component-bar"},Na={class:"component-value"},Pa={class:"component-item"},La={class:"component-bar"},$a={class:"component-value"},Ra={class:"component-item"},Ea={class:"component-bar"},Fa={class:"component-value"},Oa={class:"component-item"},Ua={class:"component-bar"},Va={class:"component-value"},Wa={class:"component-item"},Ba={class:"component-bar"},Ha={class:"component-value"};function qa(n,e,a,o,s,i){return u(),h("div",da,[e[13]||(e[13]=t("div",{class:"widget-header"},[t("h3",null,"Fear & Greed Index Gauge"),t("div",{class:"chart-info"},[t("span",{class:"chart-description"},"Based on Zeiierman's Algorithm")])],-1)),t("div",ua,[t("div",ha,[t("div",{class:w(["current-sentiment",i.sentimentClass])},[t("div",ga,[e[0]||(e[0]=t("div",{class:"sentiment-dot"},null,-1)),t("span",ma,l(i.currentSentiment),1)]),t("div",fa,l(i.sentimentDescription),1)],2),t("div",pa,[(u(),h("svg",va,[e[3]||(e[3]=se('<defs data-v-fc51b373><linearGradient id="gaugeGradient" x1="0%" y1="0%" x2="100%" y2="0%" data-v-fc51b373><stop offset="0%" style="stop-color:#e57373;stop-opacity:1;" data-v-fc51b373></stop><stop offset="12.5%" style="stop-color:#ef5350;stop-opacity:1;" data-v-fc51b373></stop><stop offset="25%" style="stop-color:#ffb74d;stop-opacity:1;" data-v-fc51b373></stop><stop offset="35%" style="stop-color:#ffcc80;stop-opacity:1;" data-v-fc51b373></stop><stop offset="45%" style="stop-color:#ffd54f;stop-opacity:1;" data-v-fc51b373></stop><stop offset="50%" style="stop-color:#fff176;stop-opacity:1;" data-v-fc51b373></stop><stop offset="55%" style="stop-color:#fff59d;stop-opacity:1;" data-v-fc51b373></stop><stop offset="65%" style="stop-color:#aed581;stop-opacity:1;" data-v-fc51b373></stop><stop offset="75%" style="stop-color:#81c784;stop-opacity:1;" data-v-fc51b373></stop><stop offset="87.5%" style="stop-color:#66bb6a;stop-opacity:1;" data-v-fc51b373></stop><stop offset="100%" style="stop-color:#4db6ac;stop-opacity:1;" data-v-fc51b373></stop></linearGradient></defs><path d="M 40 200 A 160 160 0 0 1 360 200" fill="none" stroke="url(#gaugeGradient)" stroke-width="20" stroke-linecap="round" data-v-fc51b373></path>',2)),t("g",ya,[t("line",{x1:200,y1:200,x2:i.needleX,y2:i.needleY,stroke:"#333","stroke-width":"4","stroke-linecap":"round",class:"gauge-needle"},null,8,wa),e[1]||(e[1]=t("circle",{cx:"200",cy:"200",r:"8",fill:"#333"},null,-1)),e[2]||(e[2]=t("circle",{cx:"200",cy:"200",r:"4",fill:"#fff"},null,-1))]),t("text",Sa,l(i.fearGreedValue.toFixed(0)),1)])),e[4]||(e[4]=se('<div class="gauge-labels" data-v-fc51b373><div class="label-item extreme-fear" data-v-fc51b373><span class="label-text" data-v-fc51b373>Extreme Fear</span><span class="label-range" data-v-fc51b373>0-25</span></div><div class="label-item fear" data-v-fc51b373><span class="label-text" data-v-fc51b373>Fear</span><span class="label-range" data-v-fc51b373>25-45</span></div><div class="label-item neutral" data-v-fc51b373><span class="label-text" data-v-fc51b373>Neutral</span><span class="label-range" data-v-fc51b373>45-55</span></div><div class="label-item greed" data-v-fc51b373><span class="label-text" data-v-fc51b373>Greed</span><span class="label-range" data-v-fc51b373>55-75</span></div><div class="label-item extreme-greed" data-v-fc51b373><span class="label-text" data-v-fc51b373>Extreme Greed</span><span class="label-range" data-v-fc51b373>75-100</span></div></div>',1))])]),t("div",ba,[e[12]||(e[12]=t("h4",null,"Index Components",-1)),t("div",_a,[t("div",ka,[e[5]||(e[5]=t("span",{class:"component-name"},"S&P 500 vs 125-day MA",-1)),t("div",Ca,[t("div",{class:"component-fill",style:z({width:s.components.sp125+"%"})},null,4),t("span",Ta,l(s.components.sp125),1)])]),t("div",Da,[e[6]||(e[6]=t("span",{class:"component-name"},"52-Week High/Low Strength",-1)),t("div",Aa,[t("div",{class:"component-fill",style:z({width:s.components.hl52+"%"})},null,4),t("span",Ia,l(s.components.hl52),1)])]),t("div",xa,[e[7]||(e[7]=t("span",{class:"component-name"},"Market Breadth (McClellan)",-1)),t("div",Ma,[t("div",{class:"component-fill",style:z({width:s.components.mcsi+"%"})},null,4),t("span",Na,l(s.components.mcsi),1)])]),t("div",Pa,[e[8]||(e[8]=t("span",{class:"component-name"},"Put/Call Ratio",-1)),t("div",La,[t("div",{class:"component-fill",style:z({width:s.components.putCall+"%"})},null,4),t("span",$a,l(s.components.putCall),1)])]),t("div",Ra,[e[9]||(e[9]=t("span",{class:"component-name"},"VIX vs 50-day MA",-1)),t("div",Ea,[t("div",{class:"component-fill",style:z({width:s.components.vix50+"%"})},null,4),t("span",Fa,l(s.components.vix50),1)])]),t("div",Oa,[e[10]||(e[10]=t("span",{class:"component-name"},"Safe Haven Demand",-1)),t("div",Ua,[t("div",{class:"component-fill",style:z({width:s.components.safe+"%"})},null,4),t("span",Va,l(s.components.safe),1)])]),t("div",Wa,[e[11]||(e[11]=t("span",{class:"component-name"},"Junk Bond Demand",-1)),t("div",Ba,[t("div",{class:"component-fill",style:z({width:s.components.yieldSpread+"%"})},null,4),t("span",Ha,l(s.components.yieldSpread),1)])])])])])])}const za=E(ca,[["render",qa],["__scopeId","data-v-fc51b373"]]),ja={name:"MarketOverviewSkeleton"},Ga={class:"market-overview-skeleton"},Qa={class:"skeleton-widget-container"},Xa={class:"skeleton-ticker-area"},Ka={class:"skeleton-widget-container large"},Ya={class:"skeleton-stories-area"},Ja={class:"skeleton-widget-container"},Za={class:"skeleton-heatmap-area"},en={class:"skeleton-heatmap-grid"},tn={class:"skeleton-widget-container"},sn={class:"skeleton-performance-area"};function an(n,e,a,o,s,i){return u(),h("div",Ga,[t("div",Qa,[e[0]||(e[0]=t("div",{class:"skeleton-widget-header"},[t("div",{class:"skeleton-title"})],-1)),t("div",Xa,[(u(),h(F,null,O(6,r=>t("div",{class:"skeleton-ticker-item",key:r})),64))])]),e[6]||(e[6]=se('<div class="skeleton-widget-container" data-v-9478c3a3><div class="skeleton-widget-header" data-v-9478c3a3><div class="skeleton-title" data-v-9478c3a3></div></div><div class="skeleton-gauge-area" data-v-9478c3a3><div class="skeleton-gauge-circle" data-v-9478c3a3></div><div class="skeleton-gauge-info" data-v-9478c3a3><div class="skeleton-gauge-value" data-v-9478c3a3></div><div class="skeleton-gauge-label" data-v-9478c3a3></div></div></div></div>',1)),t("div",Ka,[e[2]||(e[2]=t("div",{class:"skeleton-widget-header"},[t("div",{class:"skeleton-title"})],-1)),t("div",Ya,[(u(),h(F,null,O(8,r=>t("div",{class:"skeleton-story-item",key:r},[...e[1]||(e[1]=[t("div",{class:"skeleton-story-time"},null,-1),t("div",{class:"skeleton-story-title"},null,-1),t("div",{class:"skeleton-story-content"},null,-1)])])),64))])]),e[7]||(e[7]=se('<div class="skeleton-widget-container large" data-v-9478c3a3><div class="skeleton-widget-header" data-v-9478c3a3><div class="skeleton-title" data-v-9478c3a3></div></div><div class="skeleton-insight-grid" data-v-9478c3a3><div class="skeleton-insight-section" data-v-9478c3a3><div class="skeleton-section-header" data-v-9478c3a3><div class="skeleton-section-title" data-v-9478c3a3></div></div><div class="skeleton-chart-area" data-v-9478c3a3><div class="skeleton-chart" data-v-9478c3a3></div></div></div><div class="skeleton-insight-section" data-v-9478c3a3><div class="skeleton-section-header" data-v-9478c3a3><div class="skeleton-section-title" data-v-9478c3a3></div></div><div class="skeleton-chart-area" data-v-9478c3a3><div class="skeleton-chart" data-v-9478c3a3></div></div></div></div></div>',1)),t("div",Ja,[e[3]||(e[3]=t("div",{class:"skeleton-widget-header"},[t("div",{class:"skeleton-title"})],-1)),t("div",Za,[t("div",en,[(u(),h(F,null,O(20,r=>t("div",{class:"skeleton-heatmap-cell",key:r})),64))])])]),t("div",tn,[e[5]||(e[5]=t("div",{class:"skeleton-widget-header"},[t("div",{class:"skeleton-title"})],-1)),t("div",sn,[(u(),h(F,null,O(4,r=>t("div",{class:"skeleton-performance-item",key:r},[...e[4]||(e[4]=[t("div",{class:"skeleton-performance-label"},null,-1),t("div",{class:"skeleton-performance-value"},null,-1)])])),64))])])])}const nn=E(ja,[["render",an],["__scopeId","data-v-9478c3a3"]]),on={name:"MarketDashboard",components:{LazyTradingViewWidget:wt,VixWidget:la,ZeiiermanFearGreedGauge:za,MarketOverviewSkeleton:nn},data(){return{loading:!0,error:null,vixKey:Date.now()}},mounted(){this.scrollToTop(),this.initializePage()},watch:{$route(){this.scrollToTop()}},methods:{async initializePage(){try{await new Promise(n=>setTimeout(n,800)),this.loading=!1}catch(n){this.error=String(n),this.loading=!1}},async refresh(){this.loading=!0,this.error=null,this.vixKey=Date.now(),await this.initializePage()},scrollToTop(){this.$nextTick(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"}),setTimeout(()=>{window.scrollTo(0,0)},100)})},refreshVixWidget(){this.vixKey=Date.now(),console.log("VIX widget refreshed with key:",this.vixKey)}},computed:{tickersConfig(){return{symbols:[{proName:"FOREXCOM:SPXUSD",title:"S&P 500 Index"},{proName:"NASDAQ:NDX",title:"NASDAQ 100 Index"},{proName:"OPOFINANCE:DJIUSD",title:"Dow Jone Index"},{proName:"CAPITALCOM:RTY",title:"US Russel 2000"},{proName:"INDEX:BTCUSD",title:"BTC"},{proName:"TVC:GOLD",title:"GOLD"}],colorTheme:"light",locale:"en",largeChartUrl:"",isTransparent:!0,showSymbolLogo:!0}},topStoriesConfig(){return{displayMode:"regular",feedMode:"market",colorTheme:"light",isTransparent:!0,locale:"en",market:"stock",width:"100%",height:"100%"}},dailyConfig(){return{lineWidth:2,lineType:0,chartType:"candlesticks",showVolume:!0,fontColor:"rgb(106, 109, 120)",gridLineColor:"rgba(46, 46, 46, 0.06)",volumeUpColor:"rgba(34, 171, 148, 0.5)",volumeDownColor:"rgba(247, 82, 95, 0.5)",backgroundColor:"#ffffff",widgetFontColor:"#0F0F0F",upColor:"#22ab94",downColor:"#f7525f",borderUpColor:"#22ab94",borderDownColor:"#f7525f",wickUpColor:"#22ab94",wickDownColor:"#f7525f",colorTheme:"light",isTransparent:!0,locale:"en",chartOnly:!1,scalePosition:"right",scaleMode:"Normal",fontFamily:"-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif",valuesTracking:"1",changeMode:"price-and-percent",symbols:[["VANTAGE:SP500|6M"],["NASDAQ:NDX|6M"],["OPOFINANCE:DJIUSD|6M"],["CAPITALCOM:RTY|6M"],["INDEX:BTCUSD|6M"],["TVC:GOLD|6M"]],dateRanges:["6m|1D"],fontSize:"10",headerFontSize:"medium",autosize:!0,width:"100%",height:"100%",noTimeScale:!1,hideDateRanges:!1,showMA:!0,maLength:"5",maLineColor:"#2962FF",maLineWidth:1,hideMarketStatus:!1,hideSymbolLogo:!1}},weeklyConfig(){return{lineWidth:2,lineType:0,chartType:"candlesticks",showVolume:!0,fontColor:"rgb(106, 109, 120)",gridLineColor:"rgba(46, 46, 46, 0.06)",volumeUpColor:"rgba(34, 171, 148, 0.5)",volumeDownColor:"rgba(247, 82, 95, 0.5)",backgroundColor:"#ffffff",widgetFontColor:"#0F0F0F",upColor:"#22ab94",downColor:"#f7525f",borderUpColor:"#22ab94",borderDownColor:"#f7525f",wickUpColor:"#22ab94",wickDownColor:"#f7525f",colorTheme:"light",isTransparent:!0,locale:"en",chartOnly:!1,scalePosition:"right",scaleMode:"Normal",fontFamily:"-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif",valuesTracking:"1",changeMode:"price-and-percent",symbols:[["VANTAGE:SP500|6M"],["NASDAQ:NDX|6M"],["OPOFINANCE:DJIUSD|6M"],["CAPITALCOM:RTY|6M"],["INDEX:BTCUSD|6M"],["TVC:GOLD|6M"]],dateRanges:["6m|1W"],fontSize:"10",headerFontSize:"medium",autosize:!0,width:"100%",height:"100%",noTimeScale:!1,hideDateRanges:!1,showMA:!0,maLength:"4",maLineColor:"#2962FF",maLineWidth:1,hideMarketStatus:!1,hideSymbolLogo:!1}},heatmapConfig(){return{exchanges:[],dataSource:"SPX500",grouping:"sector",blockSize:"market_cap_basic",blockColor:"change",locale:"en",symbolUrl:"",colorTheme:"light",hasTopBar:!1,isDataSetEnabled:!1,isZoomEnabled:!0,hasSymbolTooltip:!0,width:"100%",height:"100%"}}}},rn={class:"market-dashboard"},ln={key:0,class:"loading-with-skeleton"},cn={key:1,class:"error"},dn={class:"text-danger"},un={key:2},hn={class:"widget-container-ticker"},gn={class:"widget-container"},mn={class:"widget-container vix-container"},fn={class:"widget-header"},pn={class:"widget-container"},vn={class:"insight-grid"},yn={class:"insight-section"},wn={class:"insight-section weekly-section"},Sn={class:"widget-container"};function bn(n,e,a,o,s,i){const r=V("MarketOverviewSkeleton"),c=V("LazyTradingViewWidget"),d=V("ZeiiermanFearGreedGauge"),g=V("VixWidget");return u(),h("div",rn,[e[9]||(e[9]=t("h2",null,"Market Overview",-1)),e[10]||(e[10]=t("p",{class:"text-muted mb-3"},"Global markets overview and macro indicators",-1)),s.loading?(u(),h("div",ln,[R(r)])):s.error?(u(),h("div",cn,[t("p",dn,l(s.error),1),t("button",{onClick:e[0]||(e[0]=(...f)=>i.refresh&&i.refresh(...f)),class:"btn btn-secondary"},"Retry")])):(u(),h("div",un,[t("div",hn,[e[2]||(e[2]=t("div",{class:"widget-header"},[t("h3",null,"Market Index")],-1)),R(c,{"widget-type":"Market Index",config:i.tickersConfig,"script-url":"https://s3.tradingview.com/external-embedding/embed-widget-tickers.js",height:"100px",priority:1},null,8,["config"])]),t("div",gn,[e[3]||(e[3]=t("div",{class:"widget-header"},[t("h3",null,"Top Stories")],-1)),R(c,{"widget-type":"Top Stories",config:i.topStoriesConfig,"script-url":"https://s3.tradingview.com/external-embedding/embed-widget-timeline.js",height:"650px",priority:2},null,8,["config"])]),R(d),t("div",mn,[t("div",fn,[e[4]||(e[4]=t("h3",null,"VIX Index (Volatility Index)",-1)),t("button",{onClick:e[1]||(e[1]=(...f)=>i.refreshVixWidget&&i.refreshVixWidget(...f)),class:"btn btn-sm btn-secondary"}," üîÑ Refresh VIX ")]),(u(),zt(g,{key:`vix-${s.vixKey}`}))]),t("div",pn,[e[7]||(e[7]=t("div",{class:"widget-header"},[t("h3",null,"Market Insight")],-1)),t("div",vn,[t("div",yn,[e[5]||(e[5]=t("div",{class:"section-header"},[t("h4",null,"Market Daily Insight (MA5)")],-1)),R(c,{"widget-type":"Market Daily Insight",config:i.dailyConfig,"script-url":"https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js",height:"600px",priority:2},null,8,["config"])]),t("div",wn,[e[6]||(e[6]=t("div",{class:"section-header"},[t("h4",null,"Market Weekly Insight (MA4)")],-1)),R(c,{"widget-type":"Market Weekly Insight",config:i.weeklyConfig,"script-url":"https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js",height:"600px",priority:3},null,8,["config"])])])]),t("div",Sn,[e[8]||(e[8]=t("div",{class:"widget-header"},[t("h3",null,"Stock Heatmap")],-1)),R(c,{"widget-type":"Stock Heatmap",config:i.heatmapConfig,"script-url":"https://s3.tradingview.com/external-embedding/embed-widget-stock-heatmap.js",height:"500px",priority:3},null,8,["config"])])]))])}const _n=E(on,[["render",bn],["__scopeId","data-v-7202e62a"]]);class kn{constructor(){this.cache=null,this.lastUpdate=null,this.cacheTimeout=5*60*1e3}getConfigUrl(){return"/investment-dashboard/config/stocks.json"}async loadConfig(){try{if(this.cache&&this.lastUpdate&&Date.now()-this.lastUpdate<this.cacheTimeout)return this.cache;const e=this.getConfigUrl(),a=await fetch(`${e}?t=${Date.now()}`);if(!a.ok)throw new Error(`HTTP ${a.status}`);const o=await a.json();if(!o.stocks||!Array.isArray(o.stocks))throw new Error("Invalid config format: missing stocks array");return this.cache=o,this.lastUpdate=Date.now(),console.log(`‚úÖ Loaded ${o.stocks.length} stocks from config/stocks.json`),o}catch(e){return console.error("‚ùå Failed to load stocks config:",e),this.cache?(console.warn("‚ö†Ô∏è Using cached config due to load failure"),this.cache):this.getFallbackConfig()}}async getEnabledSymbols(){return(await this.loadConfig()).stocks.filter(a=>a.enabled).map(a=>a.symbol)}async getSymbolsByPriority(e=1){return(await this.loadConfig()).stocks.filter(o=>o.enabled&&o.priority===e).map(o=>o.symbol)}async getStockExchange(e){const o=(await this.loadConfig()).stocks.find(s=>s.symbol===e);return o?o.exchange:"NASDAQ"}async getStockSector(e){const o=(await this.loadConfig()).stocks.find(s=>s.symbol===e);return o?o.sector:"Unknown"}async getStockIndustry(e){const o=(await this.loadConfig()).stocks.find(s=>s.symbol===e);return o?o.industry:"Unknown"}async getStockInfo(e){return(await this.loadConfig()).stocks.find(o=>o.symbol===e)||null}async getExchanges(){var a;return((a=(await this.loadConfig()).metadata)==null?void 0:a.exchanges)||["NYSE","NASDAQ","AMEX"]}async getSectors(){var a;return((a=(await this.loadConfig()).metadata)==null?void 0:a.sectors)||[]}async getStocksByExchange(){const e=await this.loadConfig(),a={};return e.stocks.filter(o=>o.enabled).forEach(o=>{a[o.exchange]||(a[o.exchange]=[]),a[o.exchange].push(o.symbol)}),a}async getStocksBySector(){const e=await this.loadConfig(),a={};return e.stocks.filter(o=>o.enabled).forEach(o=>{a[o.sector]||(a[o.sector]=[]),a[o.sector].push(o.symbol)}),a}async getStats(){const e=await this.loadConfig(),a=e.stocks.filter(o=>o.enabled);return{total:e.stocks.length,enabled:a.length,disabled:e.stocks.length-a.length,exchanges:[...new Set(a.map(o=>o.exchange))],sectors:[...new Set(a.map(o=>o.sector))],version:e.version,lastUpdated:e.last_updated}}clearCache(){this.cache=null,this.lastUpdate=null,console.log("üóëÔ∏è StocksConfigService cache cleared")}async refresh(){return this.clearCache(),await this.loadConfig()}getFallbackConfig(){return console.warn("‚ö†Ô∏è Using emergency fallback config"),{version:"1.0.0-fallback",stocks:[{symbol:"ASTS",exchange:"NASDAQ",sector:"Technology",industry:"Communication Equipment",enabled:!0,priority:1},{symbol:"RIVN",exchange:"NASDAQ",sector:"Consumer Cyclical",industry:"Auto Manufacturers",enabled:!0,priority:1},{symbol:"PL",exchange:"NYSE",sector:"Industrials",industry:"Aerospace & Defense",enabled:!0,priority:1},{symbol:"CRM",exchange:"NYSE",sector:"Technology",industry:"Software - Application",enabled:!0,priority:1},{symbol:"NVDA",exchange:"NASDAQ",sector:"Technology",industry:"Semiconductors",enabled:!0,priority:1},{symbol:"TSLA",exchange:"NASDAQ",sector:"Consumer Cyclical",industry:"Auto Manufacturers",enabled:!0,priority:1},{symbol:"RR",exchange:"NASDAQ",sector:"Technology",industry:"Software - Application",enabled:!0,priority:2}],metadata:{total_stocks:7,enabled_stocks:7,exchanges:["NYSE","NASDAQ"],sectors:["Technology","Consumer Cyclical","Industrials"]}}}async isValidSymbol(e){return(await this.loadConfig()).stocks.some(o=>o.symbol===e&&o.enabled)}async getSymbolsList(){return await this.getEnabledSymbols()}getConfigSource(){return this.cache?"stocks.json":"fallback"}getCacheInfo(){return{cached:!!this.cache,lastUpdate:this.lastUpdate,cacheAge:this.lastUpdate?Date.now()-this.lastUpdate:0,cacheTimeout:this.cacheTimeout}}}const Cn=new kn;class Tn{constructor(){this.cache=new Map,this.loadingPromises=new Map,this.maxCacheSize=50,this.cacheTimeout=5*60*1e3}generateKey(e,a,o){return`${e}-${a}-${o}`}has(e,a,o){const s=this.generateKey(e,a,o),i=this.cache.get(s);return i?Date.now()-i.timestamp>this.cacheTimeout?(this.cache.delete(s),!1):!0:!1}get(e,a,o){const s=this.generateKey(e,a,o),i=this.cache.get(s);return i&&Date.now()-i.timestamp<=this.cacheTimeout?i.data:null}set(e,a,o,s){const i=this.generateKey(e,a,o);if(this.cache.size>=this.maxCacheSize){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(i,{data:s,timestamp:Date.now()})}isLoading(e,a,o){const s=this.generateKey(e,a,o);return this.loadingPromises.has(s)}setLoading(e,a,o,s){const i=this.generateKey(e,a,o);return this.loadingPromises.set(i,s),s.finally(()=>{this.loadingPromises.delete(i)}),s}getLoadingPromise(e,a,o){const s=this.generateKey(e,a,o);return this.loadingPromises.get(s)}clear(){this.cache.clear(),this.loadingPromises.clear()}clearExpired(){const e=Date.now();for(const[a,o]of this.cache.entries())e-o.timestamp>this.cacheTimeout&&this.cache.delete(a)}getStats(){return{cacheSize:this.cache.size,loadingCount:this.loadingPromises.size,maxCacheSize:this.maxCacheSize}}}const Se=new Tn;setInterval(()=>{Se.clearExpired()},6e4);const Dn={name:"FastTradingViewWidget",props:{widgetType:{type:String,required:!0,validator:n=>["overview","technical"].includes(n)},symbol:{type:String,required:!0},exchange:{type:String,default:"NASDAQ"},priority:{type:Number,default:1}},data(){return{loaded:!1,error:!1,loadStartTime:0,isVisible:!1,observer:null}},computed:{containerId(){return`fast-widget-${this.widgetType}-${this.symbol}-${Date.now()}`},cacheKey(){return`${this.widgetType}-${this.symbol}-${this.exchange}`}},async mounted(){this.setupIntersectionObserver()},beforeUnmount(){this.observer&&this.observer.disconnect()},methods:{setupIntersectionObserver(){const n={1:"300px",2:"150px",3:"50px"};this.observer=new IntersectionObserver(e=>{e.forEach(a=>{a.isIntersecting&&!this.loaded&&!this.error&&(this.isVisible=!0,this.loadWidget(),this.observer.disconnect())})},{rootMargin:n[this.priority]||"150px",threshold:.1}),this.observer.observe(this.$refs.container)},async loadWidget(){this.loadStartTime=performance.now(),this.loaded=!1,this.error=!1;try{const e={1:0,2:300,3:600}[this.priority]||0;if(e>0&&await new Promise(s=>setTimeout(s,e)),Se.has(this.widgetType,this.symbol,this.exchange)){const s=Se.get(this.widgetType,this.symbol,this.exchange);if(s){this.renderCachedWidget(s);return}}if(Se.isLoading(this.widgetType,this.symbol,this.exchange)){await Se.getLoadingPromise(this.widgetType,this.symbol,this.exchange);return}const a=`fast-${this.widgetType}-${this.symbol}-${this.containerId}`,o=yt.addToQueue(()=>this.createWidget(),a,this.priority);Se.setLoading(this.widgetType,this.symbol,this.exchange,o),await o}catch(n){console.error("Failed to load widget:",n),this.error=!0}},async createWidget(){return new Promise((n,e)=>{this.$nextTick(async()=>{const a=this.$refs.container;if(!a){e(new Error("Container not found"));return}const o=this.getWidgetConfig(),s=this.getScriptUrl();if(!mt.isPreloaded(s))try{await mt.preloadScript(s)}catch(d){console.warn("Script preload failed, continuing with normal load:",d)}const i=document.createElement("script");i.type="text/javascript",i.src=s,i.async=!0,i.innerHTML=JSON.stringify(o);const c=setTimeout(()=>{this.error=!0,e(new Error("Widget load timeout"))},{1:3e3,2:5e3,3:8e3}[this.priority]||5e3);i.onload=()=>{clearTimeout(c),this.loaded=!0;const d=performance.now()-this.loadStartTime;console.log(`Widget ${this.cacheKey} loaded in ${d.toFixed(2)}ms (Priority: ${this.priority})`),Se.set(this.widgetType,this.symbol,this.exchange,{config:o,scriptUrl:s}),n()},i.onerror=()=>{clearTimeout(c),this.error=!0,e(new Error("Script load failed"))},a.appendChild(i)})})},getWidgetConfig(){if(this.widgetType==="overview")return{lineWidth:2,lineType:0,chartType:"candlesticks",showVolume:!0,fontColor:"rgb(106, 109, 120)",gridLineColor:"rgba(46, 46, 46, 0.06)",volumeUpColor:"rgba(34, 171, 148, 0.5)",volumeDownColor:"rgba(247, 82, 95, 0.5)",backgroundColor:"#ffffff",widgetFontColor:"#0F0F0F",upColor:"#22ab94",downColor:"#f7525f",borderUpColor:"#22ab94",borderDownColor:"#f7525f",wickUpColor:"#22ab94",wickDownColor:"#f7525f",colorTheme:"light",isTransparent:!0,locale:"en",chartOnly:!1,scalePosition:"right",scaleMode:"Normal",fontFamily:"-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif",valuesTracking:"1",changeMode:"price-and-percent",symbols:[[this.symbol,`${this.exchange}:${this.symbol}|1D`]],dateRanges:["1d|1","1m|30","3m|60","12m|1D","60m|1W","all|1M"],fontSize:"10",headerFontSize:"medium",autosize:!0,width:"100%",height:"100%",noTimeScale:!1,hideDateRanges:!1,showMA:!0,maLength:9,maLineColor:"#2962FF",maLineWidth:1,hideMarketStatus:!1,hideSymbolLogo:!1};if(this.widgetType==="technical")return{interval:"1D",width:"100%",height:"100%",isTransparent:!1,symbol:`${this.exchange}:${this.symbol}`,showIntervalTabs:!0,locale:"en",colorTheme:"light"}},getScriptUrl(){if(this.widgetType==="overview")return"https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js";if(this.widgetType==="technical")return"https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js"},renderCachedWidget(n){this.$nextTick(()=>{const e=this.$refs.container;if(!e)return;const a=document.createElement("script");a.type="text/javascript",a.src=n.scriptUrl,a.async=!0,a.innerHTML=JSON.stringify(n.config),a.onload=()=>{this.loaded=!0;const o=performance.now()-this.loadStartTime;console.log(`Cached widget ${this.cacheKey} loaded in ${o.toFixed(2)}ms`)},e.appendChild(a)})},async retry(){this.setupIntersectionObserver()}}},An=["id"],In={key:0,class:"fast-loading"},xn={key:1,class:"fast-error"};function Mn(n,e,a,o,s,i){return u(),h("div",{class:w(["fast-widget",{"overview-widget":a.widgetType==="overview"}]),id:i.containerId,ref:"container"},[!s.loaded&&!s.error?(u(),h("div",In,[e[1]||(e[1]=t("div",{class:"loading-spinner"},null,-1)),t("span",null,"Loading "+l(a.widgetType)+"...",1)])):k("",!0),s.error?(u(),h("div",xn,[e[2]||(e[2]=t("span",null,"‚ö†Ô∏è Failed to load",-1)),t("button",{onClick:e[0]||(e[0]=(...r)=>i.retry&&i.retry(...r)),class:"retry-btn"},"Retry")])):k("",!0)],10,An)}const Gt=E(Dn,[["render",Mn],["__scopeId","data-v-a0fc77ab"]]),Nn={name:"TechnicalAnalysisWidget",props:{symbol:{type:String,required:!0},exchange:{type:String,default:"NASDAQ"},priority:{type:Number,default:2}},data(){return{loaded:!1,error:!1,loadStartTime:0,isVisible:!1,observer:null,retryCount:0}},computed:{containerId(){return`technical-analysis-${this.symbol}-${Date.now()}`}},async mounted(){this.setupIntersectionObserver()},beforeUnmount(){this.observer&&this.observer.disconnect()},methods:{setupIntersectionObserver(){const n={1:"300px",2:"150px",3:"50px"};this.observer=new IntersectionObserver(e=>{e.forEach(a=>{a.isIntersecting&&!this.loaded&&!this.error&&(this.isVisible=!0,this.loadWidget(),this.observer.disconnect())})},{rootMargin:n[this.priority]||"150px",threshold:.1}),this.observer.observe(this.$refs.container)},async loadWidget(){this.loadStartTime=performance.now(),this.loaded=!1,this.error=!1;try{const e={1:0,2:300,3:600}[this.priority]||0;e>0&&await new Promise(o=>setTimeout(o,e));const a=`technical-analysis-${this.symbol}-${this.containerId}`;await yt.addToQueue(()=>this.createWidget(),a,this.priority)}catch(n){console.error("Failed to load Technical Analysis widget:",n),this.error=!0}},async createWidget(){return new Promise((n,e)=>{this.$nextTick(async()=>{const a=this.$refs.container;if(!a){e(new Error("Container not found"));return}const o=this.getWidgetConfig(),s="https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js",i=document.createElement("script");i.type="text/javascript",i.src=s,i.async=!0,i.innerHTML=JSON.stringify(o);const r={1:8e3,2:12e3,3:15e3},c=this.retryCount||0,d=r[this.priority]+c*3e3,g=setTimeout(()=>{this.error=!0,e(new Error(`Widget load timeout after ${d}ms (retry: ${c})`))},d);i.onload=()=>{clearTimeout(g),this.loaded=!0;const m=performance.now()-this.loadStartTime;console.log(`Technical Analysis widget ${this.symbol} loaded in ${m.toFixed(2)}ms (retry: ${c})`),n()},i.onerror=()=>{clearTimeout(g),this.error=!0,e(new Error("Script load failed"))};const f=a.querySelector(".tradingview-widget-container__widget");f?f.appendChild(i):a.appendChild(i)})})},getWidgetConfig(){return{colorTheme:"light",displayMode:"single",isTransparent:!0,locale:"en",interval:"1D",disableInterval:!1,width:"100%",height:"100%",symbol:`${this.exchange}:${this.symbol}`,showIntervalTabs:!0}},async retry(){this.retryCount=(this.retryCount||0)+1;const n=2;if(this.retryCount>n){console.error(`Technical Analysis widget ${this.symbol} exceeded max retries (${n})`);return}const e=Math.min(1e3*Math.pow(2,this.retryCount-1),5e3);console.log(`Technical Analysis widget ${this.symbol} retrying in ${e}ms (attempt ${this.retryCount}/${n})`),await new Promise(a=>setTimeout(a,e)),this.setupIntersectionObserver()}}},Pn=["id"],Ln={key:0,class:"fast-loading"},$n={key:1,class:"fast-error"},Rn={class:"tradingview-widget-container"};function En(n,e,a,o,s,i){return u(),h("div",{class:"fast-widget overview-widget",id:i.containerId,ref:"container"},[!s.loaded&&!s.error?(u(),h("div",Ln,[...e[1]||(e[1]=[t("div",{class:"loading-spinner"},null,-1),t("span",null,"Loading Technical Analysis...",-1)])])):k("",!0),s.error?(u(),h("div",$n,[e[2]||(e[2]=t("span",null,"‚ö†Ô∏è Failed to load",-1)),t("button",{onClick:e[0]||(e[0]=(...r)=>i.retry&&i.retry(...r)),class:"retry-btn"},"Retry")])):k("",!0),H(t("div",Rn,[...e[3]||(e[3]=[t("div",{class:"tradingview-widget-container__widget"},null,-1)])],512),[[pt,s.loaded]])],8,Pn)}const Fn=E(Nn,[["render",En],["__scopeId","data-v-a3661ec1"]]),On={name:"TechnicalIndicators",props:{symbol:{type:String,required:!0},exchange:{type:String,default:"NASDAQ"}},data(){return{loading:!0,error:null,technicalData:null,cacheInfo:null}},mounted(){this.loadTechnicalData()},watch:{symbol(){this.loadTechnicalData()}},methods:{async loadTechnicalData(){var n;this.loading=!0,this.error=null,this.cacheInfo=null;try{console.log(`üîç Loading technical data for ${this.symbol}...`);const e=Date.now();this.technicalData=await ke.getTechnicalIndicators(this.symbol);const a=Date.now()-e;if(this.technicalData.error)throw new Error(this.technicalData.error);this.technicalData.source?this.technicalData.source.includes("Cache")?this.cacheInfo=`${this.technicalData.source} (${a}ms)`:this.technicalData.source.includes("Precomputed")?this.cacheInfo=`${this.technicalData.source} (${a}ms)`:this.cacheInfo=`Fresh data (${a}ms)`:this.cacheInfo=`Loaded in ${a}ms`,console.log(`‚úÖ Technical data loaded for ${this.symbol}:`,{source:this.technicalData.source,loadTime:`${a}ms`,hasADX:!!((n=this.technicalData.adx14)!=null&&n.value)}),this.technicalData.adx14&&this.technicalData.adx14.value!==null&&this.technicalData.adx14.value!=="N/A"?console.log(`‚úÖ ADX data is valid for ${this.symbol}: ${this.technicalData.adx14.value}`):console.warn(`‚ö†Ô∏è ADX data may be invalid for ${this.symbol}:`,this.technicalData.adx14),typeof window<"u"&&window.dispatchEvent(new CustomEvent("widget-loaded",{detail:{name:`TechnicalIndicators-${this.symbol}`,time:a,priority:2}}))}catch(e){console.error(`‚ùå Failed to load technical data for ${this.symbol}:`,e),this.error=e.message,(e.message.includes("fetch")||e.message.includes("network")||e.message.includes("proxy"))&&(this.error=`Network error loading data for ${this.symbol}. Click to retry.`)}finally{this.loading=!1}},async retryLoad(){await this.loadTechnicalData()},getSignalClass(n){if(!n)return"neutral";const e=["BUY","OVERSOLD","STRONG_TREND"],a=["SELL","OVERBOUGHT"];return e.includes(n)?"bullish":a.includes(n)?"bearish":"neutral"},formatValue(n){return n==null?"N/A":typeof n=="string"?n:typeof n=="number"?n.toFixed(2):"N/A"},formatPriceDiff(n){if(!n||!this.technicalData)return"";const e=this.getCurrentPrice();if(!e)return"";const a=e-parseFloat(n),o=a/parseFloat(n)*100;if(Math.abs(a)<.01)return"¬±0.00";const s=a>0?"+":"";return`${s}${a.toFixed(2)} (${s}${o.toFixed(1)}%)`},getCurrentPrice(){var n,e,a;return this.technicalData?(n=this.technicalData.sma5)!=null&&n.currentPrice?parseFloat(this.technicalData.sma5.currentPrice):(e=this.technicalData.ma5)!=null&&e.currentPrice?parseFloat(this.technicalData.ma5.currentPrice):(a=this.technicalData.sma50)!=null&&a.currentPrice?parseFloat(this.technicalData.sma50.currentPrice):null:null},getPriceDiffClass(n){if(!n)return"neutral";const e=this.getCurrentPrice();if(!e)return"neutral";const a=e-parseFloat(n);return Math.abs(a)<.01?"neutral":a>0?"positive":"negative"}}},Un={class:"technical-indicators"},Vn={class:"indicators-header"},Wn={key:0,class:"cache-info"},Bn={key:0,class:"loading-state"},Hn={key:1,class:"error-state"},qn=["disabled"],zn={key:2,class:"indicators-grid"},jn={class:"indicator-item"},Gn={class:"indicator-value-row"},Qn={class:"indicator-item"},Xn={class:"indicator-value-row"},Kn={class:"indicator-item"},Yn={class:"indicator-value-row"},Jn={class:"indicator-item"},Zn={class:"indicator-value-row"},ei={class:"indicator-item"},ti={class:"indicator-value-row"},si={class:"indicator-item"},ai={class:"indicator-value-row"},ni={class:"indicator-item"},ii={class:"indicator-value-row"},oi={class:"indicator-item"},ri={class:"indicator-value-row"},li={class:"indicator-item"},ci={class:"indicator-value-row"},di={class:"indicator-item"},ui={class:"indicator-item"},hi={class:"indicator-item"};function gi(n,e,a,o,s,i){var r,c,d,g,f,m,p,D,S,T,_,$,I,N,y,B,C,M,v,b,L,J,ee,te,le,ce,de,ge,oe,q,me,fe,pe,ve,ye,X,Ie,xe,Me,Ne,Pe,Le,$e,Re,Ee,Fe,Oe,Ue,Ve,We,Be,He,qe,ze,je,Ge,Qe,Xe,Ke,Z,lt,St,bt,_t,kt,Ct,Tt,Dt,At,It,xt,Mt,Nt,Pt,Lt,$t,Rt,Et,Ft,Ot,Ut,Vt,Wt,Bt;return u(),h("div",Un,[t("div",Vn,[e[1]||(e[1]=t("h4",null,"Technical Indicators",-1)),s.cacheInfo?(u(),h("div",Wn,[t("small",null,l(s.cacheInfo),1)])):k("",!0)]),s.loading?(u(),h("div",Bn,[...e[2]||(e[2]=[t("div",{class:"loading-spinner"},null,-1),t("span",null,"Loading technical data...",-1)])])):s.error?(u(),h("div",Hn,[e[3]||(e[3]=t("span",{class:"error-icon"},"‚ö†Ô∏è",-1)),t("span",null,l(s.error),1),t("button",{onClick:e[0]||(e[0]=(...ss)=>i.retryLoad&&i.retryLoad(...ss)),class:"retry-button",disabled:s.loading},l(s.loading?"Loading...":"Retry"),9,qn)])):(u(),h("div",zn,[t("div",jn,[e[4]||(e[4]=t("span",{class:"indicator-label"},"MA5",-1)),t("div",Gn,[t("span",{class:w(["indicator-value",i.getSignalClass((c=(r=s.technicalData)==null?void 0:r.ma5)==null?void 0:c.signal)])},l(i.formatValue((g=(d=s.technicalData)==null?void 0:d.ma5)==null?void 0:g.value)),3),t("span",{class:w(["price-diff",i.getPriceDiffClass((m=(f=s.technicalData)==null?void 0:f.ma5)==null?void 0:m.value)])},l(i.formatPriceDiff((D=(p=s.technicalData)==null?void 0:p.ma5)==null?void 0:D.value)),3)])]),t("div",Qn,[e[5]||(e[5]=t("span",{class:"indicator-label"},"MA10",-1)),t("div",Xn,[t("span",{class:w(["indicator-value",i.getSignalClass((T=(S=s.technicalData)==null?void 0:S.ma10)==null?void 0:T.signal)])},l(i.formatValue(($=(_=s.technicalData)==null?void 0:_.ma10)==null?void 0:$.value)),3),t("span",{class:w(["price-diff",i.getPriceDiffClass((N=(I=s.technicalData)==null?void 0:I.ma10)==null?void 0:N.value)])},l(i.formatPriceDiff((B=(y=s.technicalData)==null?void 0:y.ma10)==null?void 0:B.value)),3)])]),t("div",Kn,[e[6]||(e[6]=t("span",{class:"indicator-label"},"MA30",-1)),t("div",Yn,[t("span",{class:w(["indicator-value",i.getSignalClass((M=(C=s.technicalData)==null?void 0:C.ma30)==null?void 0:M.signal)])},l(i.formatValue((b=(v=s.technicalData)==null?void 0:v.ma30)==null?void 0:b.value)),3),t("span",{class:w(["price-diff",i.getPriceDiffClass((J=(L=s.technicalData)==null?void 0:L.ma30)==null?void 0:J.value)])},l(i.formatPriceDiff((te=(ee=s.technicalData)==null?void 0:ee.ma30)==null?void 0:te.value)),3)])]),t("div",Jn,[e[7]||(e[7]=t("span",{class:"indicator-label"},"SMA5",-1)),t("div",Zn,[t("span",{class:w(["indicator-value",i.getSignalClass((ce=(le=s.technicalData)==null?void 0:le.sma5)==null?void 0:ce.signal)])},l(i.formatValue((ge=(de=s.technicalData)==null?void 0:de.sma5)==null?void 0:ge.value)),3),t("span",{class:w(["price-diff",i.getPriceDiffClass((q=(oe=s.technicalData)==null?void 0:oe.sma5)==null?void 0:q.value)])},l(i.formatPriceDiff((fe=(me=s.technicalData)==null?void 0:me.sma5)==null?void 0:fe.value)),3)])]),t("div",ei,[e[8]||(e[8]=t("span",{class:"indicator-label"},"SMA10",-1)),t("div",ti,[t("span",{class:w(["indicator-value",i.getSignalClass((ve=(pe=s.technicalData)==null?void 0:pe.sma10)==null?void 0:ve.signal)])},l(i.formatValue((X=(ye=s.technicalData)==null?void 0:ye.sma10)==null?void 0:X.value)),3),t("span",{class:w(["price-diff",i.getPriceDiffClass((xe=(Ie=s.technicalData)==null?void 0:Ie.sma10)==null?void 0:xe.value)])},l(i.formatPriceDiff((Ne=(Me=s.technicalData)==null?void 0:Me.sma10)==null?void 0:Ne.value)),3)])]),t("div",si,[e[9]||(e[9]=t("span",{class:"indicator-label"},"SMA30",-1)),t("div",ai,[t("span",{class:w(["indicator-value",i.getSignalClass((Le=(Pe=s.technicalData)==null?void 0:Pe.sma30)==null?void 0:Le.signal)])},l(i.formatValue((Re=($e=s.technicalData)==null?void 0:$e.sma30)==null?void 0:Re.value)),3),t("span",{class:w(["price-diff",i.getPriceDiffClass((Fe=(Ee=s.technicalData)==null?void 0:Ee.sma30)==null?void 0:Fe.value)])},l(i.formatPriceDiff((Ue=(Oe=s.technicalData)==null?void 0:Oe.sma30)==null?void 0:Ue.value)),3)])]),t("div",ni,[e[10]||(e[10]=t("span",{class:"indicator-label"},"Ichimoku Conversion (9)",-1)),t("div",ii,[t("span",{class:w(["indicator-value",i.getSignalClass((We=(Ve=s.technicalData)==null?void 0:Ve.ichimokuConversionLine)==null?void 0:We.signal)])},l(i.formatValue((He=(Be=s.technicalData)==null?void 0:Be.ichimokuConversionLine)==null?void 0:He.value)),3),t("span",{class:w(["price-diff",i.getPriceDiffClass((ze=(qe=s.technicalData)==null?void 0:qe.ichimokuConversionLine)==null?void 0:ze.value)])},l(i.formatPriceDiff((Ge=(je=s.technicalData)==null?void 0:je.ichimokuConversionLine)==null?void 0:Ge.value)),3)])]),t("div",oi,[e[11]||(e[11]=t("span",{class:"indicator-label"},"Ichimoku Base (26)",-1)),t("div",ri,[t("span",{class:w(["indicator-value",i.getSignalClass((Xe=(Qe=s.technicalData)==null?void 0:Qe.ichimokuBaseLine)==null?void 0:Xe.signal)])},l(i.formatValue((Z=(Ke=s.technicalData)==null?void 0:Ke.ichimokuBaseLine)==null?void 0:Z.value)),3),t("span",{class:w(["price-diff",i.getPriceDiffClass((St=(lt=s.technicalData)==null?void 0:lt.ichimokuBaseLine)==null?void 0:St.value)])},l(i.formatPriceDiff((_t=(bt=s.technicalData)==null?void 0:bt.ichimokuBaseLine)==null?void 0:_t.value)),3)])]),t("div",li,[e[12]||(e[12]=t("span",{class:"indicator-label"},"Ichimoku Lagging (26)",-1)),t("div",ci,[t("span",{class:w(["indicator-value",i.getSignalClass((Ct=(kt=s.technicalData)==null?void 0:kt.ichimokuLaggingSpan)==null?void 0:Ct.signal)])},l(i.formatValue((Dt=(Tt=s.technicalData)==null?void 0:Tt.ichimokuLaggingSpan)==null?void 0:Dt.value)),3),t("span",{class:w(["price-diff",i.getPriceDiffClass((It=(At=s.technicalData)==null?void 0:At.ichimokuLaggingSpan)==null?void 0:It.value)])},l(i.formatPriceDiff((Mt=(xt=s.technicalData)==null?void 0:xt.ichimokuLaggingSpan)==null?void 0:Mt.value)),3)])]),t("div",di,[e[13]||(e[13]=t("span",{class:"indicator-label"},"ADX (14)",-1)),t("span",{class:w(["indicator-value",i.getSignalClass((Pt=(Nt=s.technicalData)==null?void 0:Nt.adx14)==null?void 0:Pt.signal)])},l(i.formatValue(($t=(Lt=s.technicalData)==null?void 0:Lt.adx14)==null?void 0:$t.value)),3)]),t("div",ui,[e[14]||(e[14]=t("span",{class:"indicator-label"},"MACD (12,26)",-1)),t("span",{class:w(["indicator-value",i.getSignalClass((Et=(Rt=s.technicalData)==null?void 0:Rt.macd)==null?void 0:Et.signal)])},l(i.formatValue((Ot=(Ft=s.technicalData)==null?void 0:Ft.macd)==null?void 0:Ot.value)),3)]),t("div",hi,[e[15]||(e[15]=t("span",{class:"indicator-label"},"VWMA (20)",-1)),t("span",{class:w(["indicator-value",i.getSignalClass((Vt=(Ut=s.technicalData)==null?void 0:Ut.vwma20)==null?void 0:Vt.signal)])},l(i.formatValue((Bt=(Wt=s.technicalData)==null?void 0:Wt.vwma20)==null?void 0:Bt.value)),3)])]))])}const Qt=E(On,[["render",gi],["__scopeId","data-v-11a93c2d"]]),mi={name:"StockCard",components:{FastTradingViewWidget:Gt,TechnicalAnalysisWidget:Fn,TechnicalIndicators:Qt},props:{quote:{type:Object,required:!0},dailyData:{type:Object,default:null},metadata:{type:Object,default:null}},computed:{isStale(){return this.quote.stale_level!=="fresh"},domId(){return`sym-${this.sanitizeSymbol(this.quote.symbol)}`}},methods:{getSector(){return!this.metadata||this.metadata.confidence<.7?"Unknown":this.metadata.sector||"Unknown"},getIndustry(){return!this.metadata||this.metadata.confidence<.7?"Unknown Industry":this.metadata.industry||this.metadata.sector||"Unknown Industry"},getIndustryCategory(){const n=this.getIndustry();return{"Industrial IoT Solutions":"tech-iot","Satellite Imaging & Analytics":"tech-satellite","Database Software":"tech-software","Enterprise Software":"tech-software",Semiconductors:"tech-hardware","Aerospace & Defense":"industrial-aerospace","Space Infrastructure":"industrial-space","Satellite Communications":"communications","Electric Vehicles":"automotive","Unknown Industry":"unknown"}[n]||"other"},getExchange(){if(this.metadata&&this.metadata.exchange)return{NYQ:"NYSE",NMS:"NASDAQ",NCM:"NASDAQ",NGM:"NASDAQ",ASE:"AMEX"}[this.metadata.exchange]||this.metadata.exchange;const n=this.quote.symbol;return["ORCL","TSM","RDW","CRM","PL","LEU","SMR","IONQ","HIMS"].includes(n)?"NYSE":(["ASTS","RIVN","ONDS","AVAV","MDB","RKLB","NVDA","AVGO","AMZN","GOOG","META","NFLX","CRWV","PLTR","TSLA"].includes(n),"NASDAQ")},getStaleText(){switch(this.quote.stale_level){case"stale":return"üü° Stale Data";case"very_stale":return"üî¥ Very Stale";default:return""}},goToDetail(){console.log("Navigating to stock detail for:",this.quote.symbol),this.$router.push({name:"stock-detail",params:{symbol:this.quote.symbol}}).catch(n=>{console.error("Navigation error:",n)})},sanitizeSymbol(n){return n.replace(/[^a-zA-Z0-9]/g,"_")}}},fi=["id","data-symbol"],pi={class:"stock-info-header"},vi={class:"symbol-info"},yi={class:"symbol"},wi={class:"symbol-tags"},Si={class:"exchange-tag"},bi={class:"header-actions"},_i=["title"],ki={class:"widgets-container"},Ci={class:"widget-overview"},Ti={class:"widget-overview"},Di={key:0,class:"additional-info"},Ai={class:"brief-section"},Ii={class:"brief-text"},xi={key:1,class:"stale-indicator"};function Mi(n,e,a,o,s,i){const r=V("FastTradingViewWidget"),c=V("TechnicalAnalysisWidget"),d=V("TechnicalIndicators");return u(),h("div",{class:"stock-card-pair",id:i.domId,"data-symbol":a.quote.symbol,tabindex:"-1"},[t("div",pi,[t("div",vi,[t("h3",yi,l(a.quote.symbol),1),t("div",wi,[t("span",Si,l(i.getExchange()),1),t("span",{class:w(["industry-tag",`industry-${i.getIndustryCategory()}`])},l(i.getIndustry()),3)])]),t("div",bi,[t("button",{onClick:e[0]||(e[0]=(...g)=>i.goToDetail&&i.goToDetail(...g)),class:"detail-btn",title:`View detailed analysis for ${a.quote.symbol}`},[...e[1]||(e[1]=[A(" Detail ",-1),t("span",{class:"btn-icon"},"‚Üí",-1)])],8,_i)])]),t("div",ki,[t("div",Ci,[e[2]||(e[2]=t("div",{class:"widget-header"},[t("h4",null,"Symbol Overview")],-1)),R(r,{"widget-type":"overview",symbol:a.quote.symbol,exchange:i.getExchange(),priority:1},null,8,["symbol","exchange"])]),t("div",Ti,[e[3]||(e[3]=t("div",{class:"widget-header"},[t("h4",null,"Technical Analysis")],-1)),R(c,{symbol:a.quote.symbol,exchange:i.getExchange(),priority:2},null,8,["symbol","exchange"])])]),a.dailyData?(u(),h("div",Di,[t("div",Ai,[e[4]||(e[4]=t("h5",null,"Daily Brief",-1)),t("p",Ii,l(a.dailyData.short_brief_zh),1)])])):k("",!0),R(d,{symbol:a.quote.symbol,exchange:i.getExchange()},null,8,["symbol","exchange"]),i.isStale?(u(),h("div",xi,[t("span",{class:w(["stale-badge",`stale-${a.quote.stale_level}`])},l(i.getStaleText()),3)])):k("",!0)],8,fi)}const Ni=E(mi,[["render",Mi],["__scopeId","data-v-80d1339d"]]),Pi={name:"TOCTree",props:{nodes:{type:Array,default:()=>[]},activeSymbol:{type:String,default:""},searchQuery:{type:String,default:""}},emits:["symbol-click"],methods:{onSymbolClick(n){this.$emit("symbol-click",n)},getTotalSymbolCount(n){return n.children.reduce((e,a)=>e+a.children.length,0)}}},Li={class:"toc-tree"},$i={class:"tree-label sector-label"},Ri=["title"],Ei={class:"item-count"},Fi={class:"tree-children"},Oi={class:"tree-label industry-label"},Ui=["title"],Vi={class:"item-count"},Wi={class:"tree-children"},Bi=["aria-current","onClick","onKeydown"],Hi=["title"],qi={class:"exchange-badge"};function zi(n,e,a,o,s,i){return u(),h("div",Li,[(u(!0),h(F,null,O(a.nodes,r=>(u(),h("div",{key:r.id,class:"tree-node sector-node"},[t("div",$i,[t("span",{class:"label-text",title:r.label},l(r.label),9,Ri),t("span",Ei,"("+l(i.getTotalSymbolCount(r))+")",1)]),t("div",Fi,[(u(!0),h(F,null,O(r.children,c=>(u(),h("div",{key:c.id,class:"tree-node industry-node"},[t("div",Oi,[t("span",{class:"label-text",title:c.label},l(c.label),9,Ui),t("span",Vi,"("+l(c.children.length)+")",1)]),t("div",Wi,[(u(!0),h(F,null,O(c.children,d=>(u(),h("button",{key:d.id,class:w(["tree-node symbol-node",{"is-active":d.symbol===a.activeSymbol}]),"aria-current":d.symbol===a.activeSymbol?"location":null,onClick:g=>i.onSymbolClick(d.symbol),onKeydown:[Je(g=>i.onSymbolClick(d.symbol),["enter"]),Je(os(g=>i.onSymbolClick(d.symbol),["prevent"]),["space"])]},[t("span",{class:"symbol-text",title:d.label},l(d.label),9,Hi),t("span",qi,l(d.metadata.exchange),1)],42,Bi))),128))])]))),128))])]))),128))])}const ji=E(Pi,[["render",zi],["__scopeId","data-v-19f77406"]]),Gi={name:"NavigationPanel",components:{TOCTree:ji},props:{tocTree:{type:Array,default:()=>[]},activeSymbol:{type:String,default:""},searchQuery:{type:String,default:""},isVisible:{type:Boolean,default:!0}},emits:["symbol-click","search-change"],data(){return{localSearchQuery:this.searchQuery}},computed:{filteredTocTree(){if(!this.localSearchQuery.trim())return this.tocTree;const n=this.localSearchQuery.toLowerCase().trim();return this.tocTree.map(e=>{const a={...e,children:[]};return e.children.forEach(o=>{const s={...o,children:[]};o.children.forEach(i=>{[e.label,o.label,i.label,i.symbol].some(c=>c.toLowerCase().includes(n))&&s.children.push(i)}),s.children.length>0&&a.children.push(s)}),a.children.length>0?a:null}).filter(Boolean)}},watch:{searchQuery(n){this.localSearchQuery=n}},methods:{onSymbolClick(n){this.$emit("symbol-click",n)},onSearchChange(){this.$emit("search-change",this.localSearchQuery)}}},Qi={class:"panel-header"},Xi={class:"search-container"},Ki={class:"panel-content"};function Yi(n,e,a,o,s,i){const r=V("TOCTree");return u(),h("div",{class:w(["navigation-panel",{"is-visible":a.isVisible}])},[t("div",Qi,[e[3]||(e[3]=t("h3",null,"Quick Navigation",-1)),t("div",Xi,[H(t("input",{"onUpdate:modelValue":e[0]||(e[0]=c=>s.localSearchQuery=c),type:"text",placeholder:"Search stocks, sectors, industries...",class:"search-input","aria-label":"Search stocks",onInput:e[1]||(e[1]=(...c)=>i.onSearchChange&&i.onSearchChange(...c))},null,544),[[he,s.localSearchQuery]]),e[2]||(e[2]=t("span",{class:"search-icon"},"üîç",-1))])]),t("div",Ki,[R(r,{nodes:i.filteredTocTree,"active-symbol":a.activeSymbol,"search-query":s.localSearchQuery,onSymbolClick:i.onSymbolClick},null,8,["nodes","active-symbol","search-query","onSymbolClick"])])],2)}const Ji=E(Gi,[["render",Yi],["__scopeId","data-v-99dc733f"]]);class Zi{constructor(){this.headerOffset=80}async scrollToSymbol(e,a=!0){try{const s=`sym-${this.sanitizeSymbol(e)}`,i=document.getElementById(s);if(!i){console.warn(`NavigationService: Element with ID "${s}" not found for symbol "${e}"`);return}const r=window.matchMedia("(prefers-reduced-motion: reduce)").matches,d=i.offsetTop-this.getHeaderOffset(),g=window.pageYOffset,f=Math.abs(d-g),p=window.innerHeight*2,D=f>p||r,S=a&&!D;console.log(`NavigationService: Scroll distance ${f}px, threshold ${p}px, using ${S?"smooth":"instant"} scroll`),window.scrollTo({top:Math.max(0,d),behavior:S?"smooth":"instant"}),S&&await this.waitForScrollComplete(),i.focus({preventScroll:!0}),console.log(`NavigationService: Scrolled to symbol "${e}" (ID: ${s}) using ${S?"smooth":"instant"} behavior`)}catch(o){console.error("NavigationService: Error scrolling to symbol:",o)}}sanitizeSymbol(e){return e.replace(/[^a-zA-Z0-9]/g,"_")}updateQueryParam(e){try{const a=new URL(window.location);e?a.searchParams.set("focus",e):a.searchParams.delete("focus"),window.history.replaceState(null,"",a.toString()),console.log(`NavigationService: Updated URL query param to focus=${e}`)}catch(a){console.error("NavigationService: Error updating query param:",a)}}getFocusSymbolFromQuery(){try{return new URL(window.location).searchParams.get("focus")}catch(e){return console.error("NavigationService: Error reading query param:",e),null}}getHeaderOffset(){try{const e=document.querySelector("header, .header, .navbar, .app-header");if(e)return e.getBoundingClientRect().height+20}catch(e){console.warn("NavigationService: Could not calculate header height:",e)}return this.headerOffset}waitForScrollComplete(){return new Promise(e=>{let a=window.pageYOffset,o=null;const s=()=>{const i=window.pageYOffset;Math.abs(i-a)<1?(clearTimeout(o),e()):(a=i,o=setTimeout(s,50))};o=setTimeout(s,50),setTimeout(e,2e3)})}isSymbolValid(e){const o=`sym-${this.sanitizeSymbol(e)}`;return document.getElementById(o)!==null}}const tt=new Zi;class eo{constructor(){this.observer=null,this.callback=null,this.observedElements=new Map,this.isActive=!1,this.observerOptions={root:null,rootMargin:"-80px 0px -50% 0px",threshold:[0,.1,.25,.5,.75,1]}}setup(e,a){try{this.cleanup(),this.callback=a,this.observedElements.clear(),this.observer=new IntersectionObserver(this.handleIntersection.bind(this),this.observerOptions),e.forEach(o=>{const s=o.dataset.symbol;s&&(this.observedElements.set(o,s),this.observer.observe(o))}),this.isActive=!0,console.log(`ScrollSpyService: Started observing ${e.length} elements`)}catch(o){console.error("ScrollSpyService: Error setting up observer:",o)}}handleIntersection(e){if(!(!this.isActive||!this.callback))try{const a=[];if(e.forEach(s=>{const i=this.observedElements.get(s.target);i&&s.isIntersecting&&a.push({element:s.target,symbol:i,intersectionRatio:s.intersectionRatio,boundingClientRect:s.boundingClientRect})}),a.length===0)return;const o=this.determineActiveSymbol(a);o&&this.debouncedCallback(o)}catch(a){console.error("ScrollSpyService: Error handling intersection:",a)}}determineActiveSymbol(e){if(e.length===0)return null;if(e.length===1)return e[0].symbol;const o=window.innerHeight/2;let s=e[0],i=this.calculateElementScore(s,o);for(let r=1;r<e.length;r++){const c=e[r],d=this.calculateElementScore(c,o);d>i&&(s=c,i=d)}return s.symbol}calculateElementScore(e,a){const{intersectionRatio:o,boundingClientRect:s}=e,i=s.top+s.height/2,d=1-Math.abs(i-a)/a;return o*.7+d*.3}debouncedCallback(e){this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.callback&&this.isActive&&this.callback(e)},100)}updateActiveSymbol(e){this.callback&&this.isActive&&this.callback(e)}refresh(){if(!(!this.observer||!this.isActive))try{const e=Array.from(this.observedElements.keys()),a=[];e.forEach(s=>{const i=s.getBoundingClientRect(),r=this.observedElements.get(s);if(i.top<window.innerHeight&&i.bottom>0&&r){const c=this.calculateIntersectionRatio(i);c>0&&a.push({element:s,symbol:r,intersectionRatio:c,boundingClientRect:i})}});const o=this.determineActiveSymbol(a);o&&this.updateActiveSymbol(o)}catch(e){console.error("ScrollSpyService: Error refreshing:",e)}}calculateIntersectionRatio(e){const a=window.innerHeight,s=Math.max(e.top,80),i=Math.min(e.bottom,a);return Math.max(0,i-s)/e.height}cleanup(){try{this.observer&&(this.observer.disconnect(),this.observer=null),this.debounceTimer&&(clearTimeout(this.debounceTimer),this.debounceTimer=null),this.observedElements.clear(),this.callback=null,this.isActive=!1,console.log("ScrollSpyService: Cleaned up")}catch(e){console.error("ScrollSpyService: Error during cleanup:",e)}}pause(){this.isActive=!1}resume(){this.isActive=!0,this.refresh()}}const st=new eo,to={name:"StockOverview",components:{StockCard:Ni,LazyTradingViewWidget:wt,NavigationPanel:Ji},data(){return{quotes:[],dailyData:null,metadata:null,loading:!1,error:null,lastUpdate:null,configuredSymbols:[],activeSymbol:"",searchQuery:""}},computed:{tickersConfig(){return{symbols:[{proName:"FOREXCOM:SPXUSD",title:"S&P 500 Index"},{proName:"NASDAQ:NDX",title:"NASDAQ 100 Index"},{proName:"OPOFINANCE:DJIUSD",title:"Dow Jone Index"},{proName:"CAPITALCOM:RTY",title:"US Russel 2000"},{proName:"INDEX:BTCUSD",title:"BTC"},{proName:"TVC:GOLD",title:"GOLD"}],colorTheme:"light",locale:"en",largeChartUrl:"",isTransparent:!0,showSymbolLogo:!0}},groupedStocks(){if(!this.quotes.length||!this.metadata)return{};const n={};this.quotes.forEach(s=>{var d,g;const i=this.metadata.items.find(f=>f.symbol===s.symbol),r=(g=(d=this.dailyData)==null?void 0:d.per_symbol)==null?void 0:g.find(f=>f.symbol===s.symbol);let c="Unknown";i&&i.confidence>=.7&&(c=i.sector||"Unknown"),n[c]||(n[c]=[]),n[c].push({quote:s,dailyData:r,metadata:i})});const e=["Technology","Financial Services","Consumer Cyclical","Communication Services","Healthcare","Industrials","Consumer Defensive","Energy","Basic Materials","Real Estate","Utilities"],a={Technology:["Semiconductors","Software - Infrastructure","Consumer Electronics","Software - Application","Information Technology Services","Semiconductor Equipment & Materials","Communication Equipment","Computer Hardware","Electronic Components","Scientific & Technical Instruments","Solar","Electronics & Computer Distribution"],"Financial Services":["Banks - Diversified","Credit Services","Asset Management","Capital Markets","Insurance - Diversified","Banks - Regional","Financial Data & Stock Exchanges","Insurance - Property & Casualty","Insurance Brokers","Insurance - Life","Insurance - Specialty","Mortgage Finance","Insurance - Reinsurance","Financial Conglomerates","Shell Companies"],"Consumer Cyclical":["Internet Retail","Auto Manufacturers","Restaurants","Home Improvement Retail","Travel Services","Apparel Retail","Auto Parts","Specialty Retail","Lodging","Residential Construction","Auto & Truck Dealerships","Packaging & Containers","Footwear & Accessories","Resorts & Casinos","Gambling","Leisure","Apparel Manufacturing","Furnishings, Fixtures & Appliances","Personal Services","Luxury Goods","Recreational Vehicles","Department Stores","Education & Training Services"],"Communication Services":["Internet Content & Information","Telecom Services","Entertainment","Advertising Agencies","Electronic Gaming & Multimedia","Publishing","Broadcasting"],Healthcare:["Drug Manufacturers - General","Biotechnology","Medical Devices","Diagnostics & Research","Healthcare Plans","Medical Instruments & Supplies","Medical Distribution","Medical Care Facilities","Drug Manufacturers - Specialty & Generic","Health Information Services","Pharmaceutical Retailers"],Industrials:["Aerospace & Defense","Specialty Industrial Machinery","Farm & Heavy Construction Machinery","Railroads","Engineering & Construction","Building Products & Equipment","Specialty Business Services","Waste Management","Industrial Distribution","Conglomerates","Integrated Freight & Logistics","Electrical Equipment & Parts","Rental & Leasing Services","Airlines","Trucking","Consulting Services","Tools & Accessories","Metal Fabrication","Pollution & Treatment Controls","Security & Protection Services","Marine Shipping","Airports & Air Services","Staffing & Employment Services","Business Equipment & Supplies","Infrastructure Operations"],"Consumer Defensive":["Discount Stores","Beverages - Non-Alcoholic","Household & Personal Products","Tobacco","Packaged Foods","Confectioners","Farm Products","Food Distribution","Grocery Stores","Education & Training Services","Beverages - Brewers","Beverages - Wineries & Distilleries"],Energy:["Oil & Gas Integrated","Oil & Gas Midstream","Oil & Gas E&P","Oil & Gas Equipment & Services","Oil & Gas Refining & Marketing","Uranium","Oil & Gas Drilling","Thermal Coal","Utilities - Independent Power Producers"],"Basic Materials":["Gold","Specialty Chemicals","Building Materials","Copper","Steel","Agricultural Inputs","Other Industrial Metals & Mining","Chemicals","Other Precious Metals & Mining","Aluminum","Lumber & Wood Production","Silver","Coking Coal","Paper & Paper Products"],"Real Estate":["REIT - Specialty","REIT - Industrial","REIT - Healthcare Facilities","REIT - Retail","REIT - Residential","Real Estate Services","REIT - Mortgage","REIT - Office","REIT - Diversified","REIT - Hotel & Motel","Real Estate - Development","Real Estate - Diversified"],Utilities:["Utilities - Regulated Electric","Utilities - Independent Power Producers","Utilities - Regulated Gas","Utilities - Diversified","Utilities - Renewable","Utilities - Regulated Water"]},o={};return e.forEach(s=>{if(n[s]&&n[s].length>0){const i=a[s]||[],r={};n[s].forEach(d=>{var f;const g=((f=d.metadata)==null?void 0:f.industry)||"Unknown Industry";r[g]||(r[g]=[]),r[g].push(d)});const c=[];i.forEach(d=>{if(r[d]){const g=r[d].sort((f,m)=>{var S,T;const p=((S=f.metadata)==null?void 0:S.market_cap)||0,D=((T=m.metadata)==null?void 0:T.market_cap)||0;return p===D?f.quote.symbol.localeCompare(m.quote.symbol):D-p});c.push(...g)}}),Object.keys(r).forEach(d=>{if(!i.includes(d)){const g=r[d].sort((f,m)=>{var S,T;const p=((S=f.metadata)==null?void 0:S.market_cap)||0,D=((T=m.metadata)==null?void 0:T.market_cap)||0;return p===D?f.quote.symbol.localeCompare(m.quote.symbol):D-p});c.push(...g)}}),o[s]=c}}),Object.keys(n).forEach(s=>{!e.includes(s)&&n[s].length>0&&(o[s]=n[s].sort((i,r)=>i.quote.symbol.localeCompare(r.quote.symbol)))}),o},tocTree(){if(!this.quotes.length||!this.metadata)return[];const n=[];return Object.entries(this.groupedStocks).forEach(([e,a])=>{const o={id:`sector-${this.sanitizeId(e)}`,type:"sector",label:e,children:[]},s={};a.forEach(i=>{var c;const r=((c=i.metadata)==null?void 0:c.industry)||"Unknown Industry";s[r]||(s[r]=[]),s[r].push(i)}),Object.entries(s).forEach(([i,r])=>{const c={id:`industry-${this.sanitizeId(e)}-${this.sanitizeId(i)}`,type:"industry",label:i,children:[]};r.forEach(d=>{var f,m;const g={id:`symbol-${this.sanitizeId(d.quote.symbol)}`,type:"symbol",label:d.quote.symbol,symbol:d.quote.symbol,metadata:{sector:e,industry:i,exchange:this.mapExchangeCode((f=d.metadata)==null?void 0:f.exchange),marketCap:((m=d.metadata)==null?void 0:m.market_cap)||0}};c.children.push(g)}),o.children.push(c)}),n.push(o)}),n},metadataMap(){var e;if(!((e=this.metadata)!=null&&e.items))return new Map;const n=new Map;return this.metadata.items.forEach(a=>{n.set(a.symbol,a)}),n},dailyDataMap(){var e;if(!((e=this.dailyData)!=null&&e.per_symbol))return new Map;const n=new Map;return this.dailyData.per_symbol.forEach(a=>{n.set(a.symbol,a)}),n}},async mounted(){await this.loadStockData(),this.initializeNavigation()},beforeUnmount(){this.cleanupNavigation()},methods:{async loadStockData(){this.loading=!0,this.error=null;try{console.log("üöÄ Starting simple stock data load...");const n="/investment-dashboard";this.configuredSymbols=await Cn.getEnabledSymbols(),console.log(`‚úÖ Loaded ${this.configuredSymbols.length} symbols from config`);const e=await fetch(`${n}/data/quotes/latest.json?t=`+Date.now());if(!e.ok)throw new Error(`Failed to load quotes: HTTP ${e.status}`);const a=await e.json();a.items&&(this.quotes=a.items.filter(i=>this.configuredSymbols.includes(i.symbol)),this.lastUpdate=a.as_of,console.log(`‚úÖ Loaded ${this.quotes.length} quotes`));const o=await fetch(`${n}/data/daily/2025-12-28.json?t=`+Date.now());o.ok&&(this.dailyData=await o.json(),console.log("‚úÖ Loaded daily data"));const s=await fetch(`${n}/data/symbols_metadata.json?t=`+Date.now());s.ok&&(this.metadata=await s.json(),console.log(`‚úÖ Loaded metadata for ${this.metadata.items.length} symbols`)),console.log("‚úÖ Simple stock data load completed successfully!")}catch(n){this.error=String(n),console.error("‚ùå Simple stock data load failed:",n)}finally{this.loading=!1}},async refresh(){await this.loadStockData()},formatTime(n){if(!n)return"";try{return new Date(n).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return n}},mapExchangeCode(n){return n?{NYQ:"NYSE",NMS:"NASDAQ",NCM:"NASDAQ",NGM:"NASDAQ",ASE:"AMEX"}[n]||n:"Unknown"},sanitizeId(n){return n.replace(/[^a-zA-Z0-9]/g,"_")},async onSymbolClick(n){console.log("Navigation: Symbol clicked:",n),st.pause();try{tt.updateQueryParam(n),await tt.scrollToSymbol(n),this.activeSymbol=n,this.autoExpandForSymbol(n)}finally{setTimeout(()=>{st.resume()},500)}},onSearchChange(n){this.searchQuery=n},onToggleSection(n,e){e?this.expandedSections.add(n):this.expandedSections.delete(n),this.saveExpandedSections()},autoExpandForSymbol(n){for(const e of this.tocTree)for(const a of e.children)if(a.children.find(s=>s.symbol===n)){this.expandedSections.add(e.id),this.expandedSections.add(a.id),this.saveExpandedSections();return}},saveExpandedSections(){try{const n=Array.from(this.expandedSections);localStorage.setItem("stock-overview-expanded-sections",JSON.stringify(n))}catch(n){console.warn("Failed to save expanded sections:",n)}},loadExpandedSections(){try{const n=localStorage.getItem("stock-overview-expanded-sections");if(n){const e=JSON.parse(n);this.expandedSections=new Set(e)}}catch(n){console.warn("Failed to load expanded sections:",n),this.expandedSections=new Set}},initializeNavigation(){this.loadExpandedSections(),this.expandedSections.size===0&&this.expandAllSections();const n=tt.getFocusSymbolFromQuery();n&&this.isSymbolValid(n)&&(console.log("Navigation: Found focus symbol in URL:",n),this.$nextTick(()=>{setTimeout(()=>{this.onSymbolClick(n)},500)})),this.$nextTick(()=>{this.setupScrollSpy()})},setupScrollSpy(){try{const n=document.querySelectorAll("[data-symbol]");if(n.length===0){console.warn("ScrollSpy: No stock card elements found");return}st.setup(Array.from(n),e=>{console.log("ScrollSpy: Active symbol changed to:",e),this.activeSymbol=e,this.autoExpandForSymbol(e)}),console.log(`ScrollSpy: Initialized with ${n.length} elements`)}catch(n){console.error("Failed to setup ScrollSpy:",n)}},cleanupNavigation(){st.cleanup()},isSymbolValid(n){return tt.isSymbolValid(n)},expandAllSections(){this.tocTree.forEach(n=>{this.expandedSections.add(n.id),n.children.forEach(e=>{this.expandedSections.add(e.id)})}),this.saveExpandedSections(),console.log("Navigation: Expanded all sections by default")}}},so={class:"stock-overview"},ao={class:"stock-header"},no={class:"header-right"},io={key:0,class:"update-info"},oo={class:"text-muted"},ro={key:0,class:"loading"},lo={key:1,class:"error"},co={class:"text-danger"},uo={key:2,class:"main-layout"},ho={class:"main-content"},go={class:"widget-container-ticker"},mo={class:"sector-groups"},fo={class:"sector-title"},po={class:"stock-count"},vo={class:"stocks-in-group"},yo={key:3,class:"no-data"};function wo(n,e,a,o,s,i){const r=V("NavigationPanel"),c=V("LazyTradingViewWidget"),d=V("StockCard");return u(),h("div",so,[t("div",ao,[e[1]||(e[1]=t("h2",null,"Stock Overview",-1)),t("div",no,[s.lastUpdate?(u(),h("div",io,[t("span",oo,"Last updated: "+l(i.formatTime(s.lastUpdate)),1)])):k("",!0)])]),e[5]||(e[5]=t("p",{class:"text-muted mb-3"},"Stock universe overview and analysis",-1)),s.loading?(u(),h("div",ro,[...e[2]||(e[2]=[t("div",{class:"spinner"},null,-1),t("p",null,"Loading stock data...",-1)])])):s.error?(u(),h("div",lo,[t("p",co,l(s.error),1),t("button",{onClick:e[0]||(e[0]=(...g)=>i.refresh&&i.refresh(...g)),class:"btn btn-secondary"},"Retry")])):(u(),h("div",uo,[R(r,{"toc-tree":i.tocTree,"active-symbol":s.activeSymbol,"search-query":s.searchQuery,"is-visible":!0,onSymbolClick:i.onSymbolClick,onSearchChange:i.onSearchChange,class:"navigation-sidebar"},null,8,["toc-tree","active-symbol","search-query","onSymbolClick","onSearchChange"]),t("div",ho,[t("div",go,[e[3]||(e[3]=t("div",{class:"widget-header"},[t("h3",null,"Market Index")],-1)),R(c,{"widget-type":"Market Index",config:i.tickersConfig,"script-url":"https://s3.tradingview.com/external-embedding/embed-widget-tickers.js",height:"100px",priority:1},null,8,["config"])]),t("div",mo,[(u(!0),h(F,null,O(i.groupedStocks,(g,f)=>(u(),h("div",{key:f,class:"sector-group"},[t("h4",fo,[A(l(f)+" ",1),t("span",po,"("+l(g.length)+")",1)]),t("div",vo,[(u(!0),h(F,null,O(g,m=>(u(),zt(d,{key:m.quote.symbol,quote:m.quote,"daily-data":m.dailyData,metadata:m.metadata},null,8,["quote","daily-data","metadata"]))),128))])]))),128))])])])),!s.loading&&Object.keys(i.groupedStocks).length===0?(u(),h("div",yo,[...e[4]||(e[4]=[t("p",null,"No stock data available",-1)])])):k("",!0)])}const So=E(to,[["render",wo],["__scopeId","data-v-a81e49a9"]]),bo={name:"PerformanceMonitor",data(){return{showMonitor:!1,expanded:!0,pageLoadTime:0,widgetsLoaded:0,totalWidgets:0,widgetTimes:[],startTime:0}},computed:{totalSize(){if(typeof performance<"u"&&performance.getEntriesByType){const e=performance.getEntriesByType("resource").reduce((a,o)=>a+(o.transferSize||0),0);return e>1024*1024?`${(e/(1024*1024)).toFixed(1)}MB`:e>1024?`${(e/1024).toFixed(1)}KB`:`${e}B`}return"N/A"},memoryUsage(){if(typeof performance<"u"&&performance.memory){const n=performance.memory.usedJSHeapSize;return n>1024*1024?`${(n/(1024*1024)).toFixed(1)}MB`:`${(n/1024).toFixed(1)}KB`}return"N/A"}},mounted(){this.startTime=performance.now(),this.setupPerformanceTracking();const n=new URLSearchParams(window.location.search).has("debug");this.showMonitor=n,document.readyState==="complete"?this.calculatePageLoadTime():window.addEventListener("load",this.calculatePageLoadTime)},beforeUnmount(){window.removeEventListener("load",this.calculatePageLoadTime)},methods:{setupPerformanceTracking(){if(window.addEventListener("widget-loaded",n=>{n.detail&&this.addWidgetTime({name:n.detail.name,time:n.detail.time,priority:n.detail.priority||1})}),typeof PerformanceObserver<"u")try{const n=new PerformanceObserver(e=>{for(const a of e.getEntries())(a.name.includes("tradingview")||a.name.includes("widget"))&&this.addWidgetTime({name:a.name.split("/").pop()||"Unknown Widget",time:Math.round(a.duration),priority:2})});n.observe({entryTypes:["resource","navigation"]}),this.$once("hook:beforeDestroy",()=>{n.disconnect()})}catch(n){console.warn("PerformanceObserver not supported:",n)}},calculatePageLoadTime(){this.pageLoadTime=Math.round(performance.now()-this.startTime)},addWidgetTime(n){var e;if(this.widgetTimes.push({id:Date.now()+Math.random(),...n}),this.widgetsLoaded++,this.totalWidgets===0){const a=((e=this.$route)==null?void 0:e.path)||window.location.pathname;a.includes("market-dashboard")?this.totalWidgets=5:a.includes("stock-dashboard")?this.totalWidgets=10:this.totalWidgets=this.widgetsLoaded+2}},getTimeClass(n){return n<1e3?"time-good":n<3e3?"time-ok":"time-slow"},toggleMonitor(){this.expanded=!this.expanded},clearMetrics(){this.widgetTimes=[],this.widgetsLoaded=0,this.totalWidgets=0,this.startTime=performance.now()},exportMetrics(){const n={pageLoadTime:this.pageLoadTime,widgetsLoaded:this.widgetsLoaded,totalWidgets:this.totalWidgets,totalSize:this.totalSize,memoryUsage:this.memoryUsage,widgetTimes:this.widgetTimes,timestamp:new Date().toISOString(),url:window.location.href},e=new Blob([JSON.stringify(n,null,2)],{type:"application/json"}),a=URL.createObjectURL(e),o=document.createElement("a");o.href=a,o.download=`performance-${Date.now()}.json`,o.click(),URL.revokeObjectURL(a)}}},_o={key:0,class:"performance-monitor"},ko={class:"monitor-header"},Co={key:0,class:"monitor-content"},To={class:"metrics-grid"},Do={class:"metric-card"},Ao={class:"metric-value"},Io={class:"metric-card"},xo={class:"metric-value"},Mo={class:"metric-card"},No={class:"metric-value"},Po={class:"metric-card"},Lo={class:"metric-value"},$o={class:"widgets-list"},Ro={class:"widget-name"},Eo={class:"widget-priority"},Fo={class:"actions"};function Oo(n,e,a,o,s,i){return s.showMonitor?(u(),h("div",_o,[t("div",ko,[e[3]||(e[3]=t("h4",null,"Performance Monitor",-1)),t("button",{onClick:e[0]||(e[0]=(...r)=>i.toggleMonitor&&i.toggleMonitor(...r)),class:"toggle-btn"},l(s.expanded?"‚àí":"+"),1)]),s.expanded?(u(),h("div",Co,[t("div",To,[t("div",Do,[e[4]||(e[4]=t("div",{class:"metric-label"},"Page Load",-1)),t("div",Ao,l(s.pageLoadTime)+"ms",1)]),t("div",Io,[e[5]||(e[5]=t("div",{class:"metric-label"},"Widgets Loaded",-1)),t("div",xo,l(s.widgetsLoaded)+"/"+l(s.totalWidgets),1)]),t("div",Mo,[e[6]||(e[6]=t("div",{class:"metric-label"},"Total Size",-1)),t("div",No,l(i.totalSize),1)]),t("div",Po,[e[7]||(e[7]=t("div",{class:"metric-label"},"Memory Usage",-1)),t("div",Lo,l(i.memoryUsage),1)])]),t("div",$o,[e[8]||(e[8]=t("h5",null,"Widget Load Times",-1)),(u(!0),h(F,null,O(s.widgetTimes,r=>(u(),h("div",{key:r.id,class:"widget-item"},[t("span",Ro,l(r.name),1),t("span",{class:w(["widget-time",i.getTimeClass(r.time)])},l(r.time)+"ms ",3),t("span",Eo,"P"+l(r.priority),1)]))),128))]),t("div",Fo,[t("button",{onClick:e[1]||(e[1]=(...r)=>i.clearMetrics&&i.clearMetrics(...r)),class:"clear-btn"},"Clear"),t("button",{onClick:e[2]||(e[2]=(...r)=>i.exportMetrics&&i.exportMetrics(...r)),class:"export-btn"},"Export")])])):k("",!0)])):k("",!0)}const Xt=E(bo,[["render",Oo],["__scopeId","data-v-58a91d47"]]),Uo={name:"StockDashboard",components:{StockOverview:So,PerformanceMonitor:Xt}},Vo={class:"stock-dashboard"};function Wo(n,e,a,o,s,i){const r=V("PerformanceMonitor"),c=V("StockOverview");return u(),h("div",Vo,[R(r),R(c)])}const Bo=E(Uo,[["render",Wo],["__scopeId","data-v-bd53c7a2"]]),Ho={name:"Settings"},qo={class:"settings"};function zo(n,e,a,o,s,i){return u(),h("div",qo,[...e[0]||(e[0]=[se('<h2>Settings</h2><p class="text-muted mb-3">Configure system preferences and view diagnostics</p><div class="card"><h3>Privacy &amp; Analytics</h3><p class="text-muted">Toggle tracking and scraping preferences</p></div><div class="card"><h3>System Diagnostics</h3><p class="text-muted">View system status and data freshness</p></div><div class="card"><h3>Import/Export</h3><p class="text-muted">Backup and restore your configuration</p></div>',5)])])}const jo=E(Ho,[["render",zo]]),Go={name:"MarketRegimeWidget",props:{symbol:{type:String,required:!0},exchange:{type:String,default:"NASDAQ"},priority:{type:Number,default:3}},data(){return{loaded:!1,error:!1,loadStartTime:0,isVisible:!1,observer:null}},computed:{containerId(){return`market-regime-${this.symbol}-${Date.now()}`}},async mounted(){this.setupIntersectionObserver()},beforeUnmount(){this.observer&&this.observer.disconnect()},methods:{setupIntersectionObserver(){const n={1:"300px",2:"150px",3:"50px"};this.observer=new IntersectionObserver(e=>{e.forEach(a=>{a.isIntersecting&&!this.loaded&&!this.error&&(this.isVisible=!0,this.loadWidget(),this.observer.disconnect())})},{rootMargin:n[this.priority]||"50px",threshold:.1}),this.observer.observe(this.$refs.container)},async loadWidget(){this.loadStartTime=performance.now(),this.loaded=!1,this.error=!1;try{const e={1:0,2:300,3:600}[this.priority]||0;e>0&&await new Promise(a=>setTimeout(a,e)),await this.createWidget()}catch(n){console.error("Failed to load Market Regime widget:",n),this.error=!0}},async createWidget(){return new Promise((n,e)=>{this.$nextTick(async()=>{const a=this.$refs.container;if(!a){e(new Error("Container not found"));return}const o=this.getWidgetConfig(),s="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js",i=document.createElement("script");i.type="text/javascript",i.src=s,i.async=!0,i.innerHTML=JSON.stringify(o);const r=setTimeout(()=>{this.error=!0,e(new Error("Widget load timeout"))},8e3);i.onload=()=>{clearTimeout(r),this.loaded=!0;const d=performance.now()-this.loadStartTime;console.log(`Market Regime widget ${this.symbol} loaded in ${d.toFixed(2)}ms`),n()},i.onerror=()=>{clearTimeout(r),this.error=!0,e(new Error("Script load failed"))};const c=a.querySelector(".tradingview-widget-container__widget");c?c.appendChild(i):a.appendChild(i)})})},getWidgetConfig(){return{allow_symbol_change:!0,calendar:!1,details:!1,hide_side_toolbar:!0,hide_top_toolbar:!1,hide_legend:!1,hide_volume:!1,hotlist:!1,interval:"D",locale:"en",save_image:!0,style:"9",symbol:`${this.exchange}:${this.symbol}`,theme:"light",timezone:"Etc/UTC",backgroundColor:"#ffffff",gridColor:"rgba(46, 46, 46, 0.06)",watchlist:[],withdateranges:!0,range:"6M",compareSymbols:[],studies:["STD;Ichimoku%1Cloud","STD;BBTrend","STD;TEMA","STD;Awesome_Oscillator","STD;Average%1Directional%1Index"],autosize:!0}},async retry(){this.setupIntersectionObserver()}}},Qo=["id"],Xo={key:0,class:"chart-loading"},Ko={key:1,class:"chart-error"},Yo={class:"tradingview-widget-container",style:{height:"100%",width:"100%"}},Jo={class:"tradingview-widget-copyright"},Zo=["href"],er={class:"blue-text"};function tr(n,e,a,o,s,i){return u(),h("div",{class:"advanced-chart-widget",id:i.containerId,ref:"container"},[!s.loaded&&!s.error?(u(),h("div",Xo,[...e[1]||(e[1]=[t("div",{class:"loading-spinner"},null,-1),t("span",null,"Loading Market Regime...",-1)])])):k("",!0),s.error?(u(),h("div",Ko,[e[2]||(e[2]=t("span",null,"‚ö†Ô∏è Failed to load",-1)),t("button",{onClick:e[0]||(e[0]=(...r)=>i.retry&&i.retry(...r)),class:"retry-btn"},"Retry")])):k("",!0),H(t("div",Yo,[e[4]||(e[4]=t("div",{class:"tradingview-widget-container__widget",style:{height:"calc(100% - 32px)",width:"100%"}},null,-1)),t("div",Jo,[t("a",{href:`https://www.tradingview.com/symbols/${a.exchange}-${a.symbol}/`,rel:"noopener nofollow",target:"_blank"},[t("span",er,l(a.symbol)+" stock chart",1)],8,Zo),e[3]||(e[3]=t("span",{class:"trademark"}," by TradingView",-1))])],512),[[pt,s.loaded]])],8,Qo)}const sr=E(Go,[["render",tr],["__scopeId","data-v-ae8a7688"]]),ar={name:"TradingStrategyWidget",props:{symbol:{type:String,required:!0},exchange:{type:String,default:"NASDAQ"},priority:{type:Number,default:4}},data(){return{loaded:!1,error:!1,loadStartTime:0,isVisible:!1,observer:null}},computed:{containerId(){return`trading-strategy-${this.symbol}-${Date.now()}`}},async mounted(){this.setupIntersectionObserver()},beforeUnmount(){this.observer&&this.observer.disconnect()},methods:{setupIntersectionObserver(){const n={1:"300px",2:"150px",3:"50px",4:"25px"};this.observer=new IntersectionObserver(e=>{e.forEach(a=>{a.isIntersecting&&!this.loaded&&!this.error&&(this.isVisible=!0,this.loadWidget(),this.observer.disconnect())})},{rootMargin:n[this.priority]||"25px",threshold:.1}),this.observer.observe(this.$refs.container)},async loadWidget(){this.loadStartTime=performance.now(),this.loaded=!1,this.error=!1;try{const e={1:0,2:300,3:600,4:900}[this.priority]||0;e>0&&await new Promise(a=>setTimeout(a,e)),await this.createWidget()}catch(n){console.error("Failed to load Trading Strategy widget:",n),this.error=!0}},async createWidget(){return new Promise((n,e)=>{this.$nextTick(async()=>{const a=this.$refs.container;if(!a){e(new Error("Container not found"));return}const o=this.getWidgetConfig(),s="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js",i=document.createElement("script");i.type="text/javascript",i.src=s,i.async=!0,i.innerHTML=JSON.stringify(o);const r=setTimeout(()=>{this.error=!0,e(new Error("Widget load timeout"))},8e3);i.onload=()=>{clearTimeout(r),this.loaded=!0;const d=performance.now()-this.loadStartTime;console.log(`Trading Strategy widget ${this.symbol} loaded in ${d.toFixed(2)}ms`),n()},i.onerror=()=>{clearTimeout(r),this.error=!0,e(new Error("Script load failed"))};const c=a.querySelector(".tradingview-widget-container__widget");c?c.appendChild(i):a.appendChild(i)})})},getWidgetConfig(){return{allow_symbol_change:!0,calendar:!1,details:!1,hide_side_toolbar:!0,hide_top_toolbar:!1,hide_legend:!1,hide_volume:!1,hotlist:!1,interval:"D",locale:"en",save_image:!0,style:"9",symbol:`${this.exchange}:${this.symbol}`,theme:"light",timezone:"Etc/UTC",backgroundColor:"#ffffff",gridColor:"rgba(46, 46, 46, 0.06)",watchlist:[],withdateranges:!0,range:"6M",compareSymbols:[],studies:["STD;MACD","STD;Donchian_Channels","STD;TRIX","STD;RSI"],autosize:!0}},async retry(){this.setupIntersectionObserver()}}},nr=["id"],ir={key:0,class:"chart-loading"},or={key:1,class:"chart-error"},rr={class:"tradingview-widget-container",style:{height:"100%",width:"100%"}},lr={class:"tradingview-widget-copyright"},cr=["href"],dr={class:"blue-text"};function ur(n,e,a,o,s,i){return u(),h("div",{class:"advanced-chart-widget",id:i.containerId,ref:"container"},[!s.loaded&&!s.error?(u(),h("div",ir,[...e[1]||(e[1]=[t("div",{class:"loading-spinner"},null,-1),t("span",null,"Loading Trading Strategy...",-1)])])):k("",!0),s.error?(u(),h("div",or,[e[2]||(e[2]=t("span",null,"‚ö†Ô∏è Failed to load",-1)),t("button",{onClick:e[0]||(e[0]=(...r)=>i.retry&&i.retry(...r)),class:"retry-btn"},"Retry")])):k("",!0),H(t("div",rr,[e[4]||(e[4]=t("div",{class:"tradingview-widget-container__widget",style:{height:"calc(100% - 32px)",width:"100%"}},null,-1)),t("div",lr,[t("a",{href:`https://www.tradingview.com/symbols/${a.exchange}-${a.symbol}/`,rel:"noopener nofollow",target:"_blank"},[t("span",dr,l(a.symbol)+" stock chart",1)],8,cr),e[3]||(e[3]=t("span",{class:"trademark"}," by TradingView",-1))])],512),[[pt,s.loaded]])],8,nr)}const hr=E(ar,[["render",ur],["__scopeId","data-v-340bda90"]]);function j(n){const e="/investment-dashboard/",a=String(n).replace(/^\/+/,"");return`${e}${a}`}const rt={ohlcv:n=>j(`data/ohlcv/${n.toUpperCase()}.json`),ohlcvPrecomputed:(n,e="1d",a=90)=>j(`data/ohlcv/${n.toLowerCase()}_${e}_${a}d.json`),ohlcvIndex:(n={})=>{const e=j("data/ohlcv/index.json");return n.v?`${e}?v=${n.v}`:e},technicalIndicators:(n,e)=>j(`data/technical-indicators/${n}_${e}.json`),technicalIndicatorsIndex:(n={})=>{const e=j("data/technical-indicators/latest_index.json");return n.v?`${e}?v=${n.v}`:e},symbolsMetadata:()=>j("data/symbols_metadata.json"),sectorIndustry:()=>j("data/sector_industry.json"),universe:()=>j("config/universe.json"),stocks:()=>j("config/stocks.json"),status:(n={})=>{const e=j("data/status.json");return n.v?`${e}?v=${n.v}`:e},packageJson:()=>j("package.json"),quotesLatest:()=>j("data/quotes/latest.json"),daily:n=>j(`data/daily/${n}.json`)},Kt=Object.freeze(Object.defineProperty({__proto__:null,paths:rt,withBase:j},Symbol.toStringTag,{value:"Module"}));class gr{constructor(){this.cache=new Map,this.cacheTimeout=30*60*1e3}async getOhlcv(e,a="1d",o="3mo"){var i;const s=`${e}_${a}_${o}`;if(this.cache.has(s)){const r=this.cache.get(s);if(Date.now()-r.timestamp<this.cacheTimeout)return console.log(`üìä Using cached OHLCV for ${e}`),r.data}try{const r=await this.fetchLocalOhlcv(e,a,o);if(r)return this.cache.set(s,{data:r,timestamp:Date.now()}),console.log(`üìä Loaded local OHLCV for ${e}: ${((i=r.timestamps)==null?void 0:i.length)||0} points`),r}catch(r){console.warn(`üìä Local OHLCV failed for ${e}:`,r.message)}if(new URLSearchParams(window.location.search).has("debug"))try{console.log(`üìä DEV mode: trying Yahoo Finance fallback for ${e}`);const r=await ie.getOhlcv(e,a,o);if(r&&this.validateOhlcvData(r))return this.cache.set(s,{data:r,timestamp:Date.now()}),console.log(`üìä Yahoo Finance fallback success for ${e}`),r}catch(r){console.warn(`üìä Yahoo Finance fallback failed for ${e}:`,r.message)}return console.warn(`üìä No OHLCV data available for ${e}`),null}async fetchLocalOhlcv(e,a,o){const s=rt.ohlcv(e),i=await fetch(s);if(!i.ok){if(i.status===404)return console.log(`üìä Local OHLCV not found for ${e} (404)`),null;throw new Error(`HTTP ${i.status}: ${i.statusText}`)}const r=await i.json();if(!this.validateOhlcvData(r))throw new Error("Invalid local OHLCV data structure");return{...r,metadata:{...r.metadata,source:"Local JSON",symbol:e,period:a,range:o,loadedAt:new Date().toISOString()}}}validateOhlcvData(e){if(!e||typeof e!="object")return!1;const a=["timestamps","open","high","low","close","volume"];for(const s of a)if(!Array.isArray(e[s]))return console.error(`üìä OHLCV validation failed: missing ${s}`),!1;const o=e.timestamps.length;for(const s of a)if(e[s].length!==o)return console.error(`üìä OHLCV validation failed: ${s} length mismatch`),!1;return o<20?(console.error(`üìä OHLCV validation failed: insufficient data (${o} < 20)`),!1):!0}async isLocalAvailable(e){try{return await this.fetchLocalOhlcv(e,"1d","3mo")!==null}catch{return!1}}clearCache(){this.cache.clear(),console.log("üìä OHLCV cache cleared")}getCacheStats(){const e={};for(const[a,o]of this.cache.entries())e[a]={age:Date.now()-o.timestamp,expired:Date.now()-o.timestamp>this.cacheTimeout};return e}}const mr=new gr;function fr(n,e,a,o,s=14){if(!n||!e||!a||!o)throw new Error("MFI calculation requires high, low, close, and volume arrays");const i=Math.min(n.length,e.length,a.length,o.length);if(i<s+1)throw new Error(`Insufficient data for MFI calculation: need at least ${s+1} data points, got ${i}`);console.log(`üìä Calculating MFI with ${i} data points, period=${s}`);const r=new Array(i);for(let p=0;p<i;p++)n[p]!=null&&e[p]!=null&&a[p]!=null?r[p]=(n[p]+e[p]+a[p])/3:r[p]=null;const c=new Array(i);for(let p=0;p<i;p++)r[p]!=null&&o[p]!=null?c[p]=r[p]*o[p]:c[p]=null;const d=new Array(i),g=new Array(i);d[0]=0,g[0]=0;for(let p=1;p<i;p++)r[p]!=null&&r[p-1]!=null&&c[p]!=null?r[p]>r[p-1]?(d[p]=c[p],g[p]=0):r[p]<r[p-1]?(d[p]=0,g[p]=c[p]):(d[p]=0,g[p]=0):(d[p]=0,g[p]=0);const f=new Array(i).fill(null);for(let p=s;p<i;p++){let D=0,S=0,T=0;for(let _=p-s+1;_<=p;_++)d[_]!=null&&g[_]!=null&&(D+=d[_],S+=g[_],T++);if(T>=Math.floor(s*.7))if(S===0)f[p]=100;else{const _=D/S;f[p]=100-100/(1+_)}}const m=f.filter(p=>p!==null).length;return console.log(`üìä MFI calculation complete: ${m}/${i} valid values`),f}function pr(n){return n==null||isNaN(n)?"NEUTRAL":n>=80?"OVERBOUGHT":n<=20?"OVERSOLD":"NEUTRAL"}function vr(n,e=14){try{const a=fr(n.high,n.low,n.close,n.volume,e);let o=null;for(let g=a.length-1;g>=0;g--)if(a[g]!=null&&!isNaN(a[g])){o=a[g];break}const s=pr(o),i=a.filter(g=>g!=null&&!isNaN(g)),r=i.length>0?i.reduce((g,f)=>g+f,0)/i.length:null,c=i.length>0?Math.max(...i):null,d=i.length>0?Math.min(...i):null;return{values:a,latest:o,signal:s,period:e,statistics:{average:r,maximum:c,minimum:d,validCount:i.length,totalCount:a.length},metadata:{calculatedAt:new Date().toISOString(),dataPoints:n.close.length,algorithm:"Standard MFI"}}}catch(a){return console.error("üìä MFI calculation failed:",a),{values:[],latest:null,signal:"ERROR",period:e,error:a.message,metadata:{calculatedAt:new Date().toISOString(),algorithm:"Standard MFI"}}}}function yr(n,e=20,a=14){if(console.log(`üìä Calculating MFI Volume Profile with ${e} bins, MFI period=${a}`),!n||!n.high||!n.low||!n.close||!n.volume)throw new Error("Invalid OHLCV data for MFI Volume Profile calculation");const o=Math.min(n.high.length,n.low.length,n.close.length,n.volume.length);if(o<a+10)throw new Error(`Insufficient data for MFI Volume Profile: need at least ${a+10} data points, got ${o}`);try{const s=vr(n,a),i=[];for(let b=0;b<o;b++)n.high[b]!=null&&n.low[b]!=null&&i.push(n.high[b],n.low[b]);if(i.length===0)throw new Error("No valid price data found");const r=Math.min(...i),c=Math.max(...i),d=c-r,g=d/e;console.log(`üìä Price range: ${r.toFixed(2)} - ${c.toFixed(2)}, bin size: ${g.toFixed(4)}`);const f=new Array(e).fill(0).map((b,L)=>({priceLevel:r+(L+.5)*g,minPrice:r+L*g,maxPrice:r+(L+1)*g,volume:0,positiveVolume:0,negativeVolume:0,neutralVolume:0,mfiAverage:0,mfiCount:0,candleCount:0}));for(let b=0;b<o;b++){if(n.high[b]==null||n.low[b]==null||n.close[b]==null||n.volume[b]==null||n.volume[b]<=0)continue;const L=n.high[b],J=n.low[b],ee=n.volume[b],te=s.values[b],le=Math.max(0,Math.floor((J-r)/g)),ce=Math.min(e-1,Math.floor((L-r)/g)),de=L-J,ge=ce-le+1;for(let oe=le;oe<=ce;oe++){const q=f[oe],me=q.minPrice,fe=q.maxPrice,pe=Math.max(J,me),ve=Math.min(L,fe),ye=Math.max(0,ve-pe);let X;de>0?X=ee*(ye/de):X=ee/ge,q.volume+=X,q.candleCount++,te!=null&&!isNaN(te)?(te>=60?q.positiveVolume+=X:te<=40?q.negativeVolume+=X:q.neutralVolume+=X,q.mfiAverage=(q.mfiAverage*q.mfiCount+te)/(q.mfiCount+1),q.mfiCount++):q.neutralVolume+=X}}const m=f.reduce((b,L)=>b+L.volume,0),p=Math.max(...f.map(b=>b.volume));let D=0,S=0;for(let b=0;b<f.length;b++)f[b].volume>S&&(S=f[b].volume,D=b);const T=f[D],_=m*.7;let $=T.volume,I=D,N=D;for(;$<_&&(I>0||N<e-1);){const b=N<e-1?f[N+1].volume:0,L=I>0?f[I-1].volume:0;if(b>=L&&N<e-1)N++,$+=f[N].volume;else if(I>0)I--,$+=f[I].volume;else break}const y={buyingPressureLevels:f.filter(b=>b.positiveVolume>b.negativeVolume&&b.volume>m/e).map(b=>({priceLevel:b.priceLevel,volume:b.volume,mfiAverage:b.mfiAverage,buyingRatio:b.positiveVolume/b.volume})).sort((b,L)=>L.volume-b.volume).slice(0,5),sellingPressureLevels:f.filter(b=>b.negativeVolume>b.positiveVolume&&b.volume>m/e).map(b=>({priceLevel:b.priceLevel,volume:b.volume,mfiAverage:b.mfiAverage,sellingRatio:b.negativeVolume/b.volume})).sort((b,L)=>L.volume-b.volume).slice(0,5),totalBuyingVolume:f.reduce((b,L)=>b+L.positiveVolume,0),totalSellingVolume:f.reduce((b,L)=>b+L.negativeVolume,0),totalNeutralVolume:f.reduce((b,L)=>b+L.neutralVolume,0)},B=y.totalBuyingVolume/m,C=y.totalSellingVolume/m;let M="NEUTRAL";B>.4?M="BULLISH":C>.4&&(M="BEARISH");const v={volumeProfile:f,mfi:s,pointOfControl:{priceLevel:T.priceLevel,volume:T.volume,percentage:T.volume/m*100},valueArea:{low:f[I].priceLevel,high:f[N].priceLevel,volume:$,percentage:$/m*100},mfiInsights:y,marketSentiment:M,statistics:{totalVolume:m,maxVolumeInBin:p,priceRange:{min:r,max:c,range:d},bins:e,buyingRatio:B,sellingRatio:C,neutralRatio:y.totalNeutralVolume/m},metadata:{calculatedAt:new Date().toISOString(),dataPoints:o,mfiPeriod:a,algorithm:"MFI Volume Profile v1.0"}};return console.log("üìä MFI Volume Profile calculation complete:",{bins:e,totalVolume:m.toLocaleString(),poc:T.priceLevel.toFixed(2),marketSentiment:M,buyingRatio:(B*100).toFixed(1)+"%"}),v}catch(s){throw console.error("üìä MFI Volume Profile calculation failed:",s),s}}function wr(n,e){if(!n||!e)return{signal:"NEUTRAL",confidence:0,recommendations:[],supportLevels:[],resistanceLevels:[]};const{volumeProfile:a,pointOfControl:o,valueArea:s,mfiInsights:i,marketSentiment:r}=n,c=a.filter(S=>S.priceLevel<e&&S.volume>n.statistics.totalVolume/30).sort((S,T)=>T.volume-S.volume).slice(0,3).map(S=>({price:S.priceLevel,strength:S.volume/n.statistics.maxVolumeInBin,type:S.positiveVolume>S.negativeVolume?"BUYING_SUPPORT":"SELLING_SUPPORT"})),d=a.filter(S=>S.priceLevel>e&&S.volume>n.statistics.totalVolume/30).sort((S,T)=>T.volume-S.volume).slice(0,3).map(S=>({price:S.priceLevel,strength:S.volume/n.statistics.maxVolumeInBin,type:S.negativeVolume>S.positiveVolume?"SELLING_RESISTANCE":"BUYING_RESISTANCE"}));let g="NEUTRAL",f=0;const m=[],p=(e-o.priceLevel)/o.priceLevel,D=e>=s.low&&e<=s.high;return r==="BULLISH"?e<s.low?(g="BUY",f=.7,m.push("Price below value area with bullish sentiment - potential buying opportunity")):D&&(g="HOLD",f=.5,m.push("Price in value area with bullish sentiment - monitor for breakout")):r==="BEARISH"&&(e>s.high?(g="SELL",f=.7,m.push("Price above value area with bearish sentiment - potential selling opportunity")):D&&(g="HOLD",f=.5,m.push("Price in value area with bearish sentiment - monitor for breakdown"))),(i.totalBuyingVolume>i.totalSellingVolume*1.5||i.totalSellingVolume>i.totalBuyingVolume*1.5)&&(f=Math.min(f+.2,1)),{signal:g,confidence:f,recommendations:m,supportLevels:c,resistanceLevels:d,marketContext:{pocDistance:p,inValueArea:D,marketSentiment:r,volumeBalance:i.totalBuyingVolume/i.totalSellingVolume}}}const Sr={name:"MFIVolumeProfilePanel",props:{symbol:{type:String,required:!0},exchange:{type:String,default:"NASDAQ"},priority:{type:Number,default:4},bins:{type:Number,default:50},mfiPeriod:{type:Number,default:14},lookback:{type:Number,default:200}},data(){return{loading:!1,error:null,profileData:null,tradingSignals:null,currentPrice:null,selectedRange:"3mo",binHeight:12,tooltip:{visible:!1,data:null,style:{}}}},computed:{isDev(){return new URLSearchParams(window.location.search).has("debug")},displayBins(){return!this.profileData||!this.profileData.volumeProfile?[]:[...this.profileData.volumeProfile].sort((n,e)=>e.priceLevel-n.priceLevel)},totalChartHeight(){const n=this.displayBins.length;return Math.max(n*this.binHeight,300)}},mounted(){this.loadData()},watch:{symbol(){this.loadData()}},methods:{async loadData(){var n;if(!this.loading){this.loading=!0,this.error=null,this.profileData=null,this.tradingSignals=null;try{console.log(`üìä Loading MFI Volume Profile for ${this.symbol}...`);const e=await mr.getOhlcv(this.symbol,"1d",this.selectedRange);if(!e)throw new Error(`No OHLCV data available for ${this.symbol}`);console.log(`üìä OHLCV data loaded: ${((n=e.timestamps)==null?void 0:n.length)||0} points`),this.profileData=yr(e,this.bins,this.mfiPeriod),this.currentPrice=this.getCurrentPrice(e),this.currentPrice&&(this.tradingSignals=wr(this.profileData,this.currentPrice)),console.log(`üìä MFI Volume Profile loaded successfully for ${this.symbol}`)}catch(e){console.error(`üìä MFI Volume Profile error for ${this.symbol}:`,e),this.error=this.getErrorMessage(e)}finally{this.loading=!1}}},getCurrentPrice(n){for(let e=n.close.length-1;e>=0;e--)if(n.close[e]!=null&&!isNaN(n.close[e]))return n.close[e];return null},getErrorMessage(n){return n.message.includes("CORS")?"Data source blocked by browser security. Try disabling ad blockers or privacy extensions.":n.message.includes("404")||n.message.includes("not found")?`No OHLCV data available for ${this.symbol}. This symbol may not be supported yet.`:n.message.includes("Insufficient")?"Insufficient historical data for MFI Volume Profile calculation.":`Failed to load data: ${n.message}`},onRangeChange(){console.log(`üìä Range changed to ${this.selectedRange} for ${this.symbol}`),this.loadData()},getBarClass(n){const e=["volume-bar"];return n.positiveVolume>n.negativeVolume?e.push("bullish"):n.negativeVolume>n.positiveVolume?e.push("bearish"):e.push("neutral"),this.profileData&&n.priceLevel===this.profileData.pointOfControl.priceLevel&&e.push("poc"),e.join(" ")},getBarStyle(n){return{position:"relative",width:"100%",height:"100%",display:"flex",alignItems:"center"}},getBarFillStyle(n){if(!this.profileData)return{width:"0%"};const e=this.profileData.statistics.maxVolumeInBin,a=e>0?n.volume/e*100:0;let o="#9E9E9E";return n.positiveVolume>n.negativeVolume?o="#4CAF50":n.negativeVolume>n.positiveVolume&&(o="#F44336"),{width:`${Math.max(a,1)}%`,height:"80%",backgroundColor:o,borderRadius:"2px",transition:"all 0.2s ease"}},formatVolume(n){return n>=1e9?(n/1e9).toFixed(1)+"B":n>=1e6?(n/1e6).toFixed(1)+"M":n>=1e3?(n/1e3).toFixed(1)+"K":n.toFixed(0)},showTooltip(n,e){this.tooltip={visible:!0,data:e,style:{position:"fixed",left:n.clientX+10+"px",top:n.clientY-10+"px",zIndex:1e3}}},hideTooltip(){this.tooltip.visible=!1}}},br={class:"mfi-volume-profile-panel"},_r={key:0,class:"loading-state"},kr={key:1,class:"error-state"},Cr={class:"error-message"},Tr={class:"error-actions"},Dr={key:0,class:"dev-info"},Ar={key:2,class:"panel-content"},Ir={class:"metrics-header"},xr={class:"metric-card"},Mr={class:"metric-detail"},Nr={class:"metric-card"},Pr={class:"metric-detail"},Lr={class:"metric-card"},$r={class:"metric-value"},Rr={class:"metric-detail"},Er={class:"volume-profile-chart"},Fr={class:"chart-header"},Or={class:"chart-controls"},Ur={class:"price-scale"},Vr={class:"volume-bars"},Wr=["onMouseover"],Br={key:0,class:"poc-marker"},Hr={key:1,class:"va-marker va-high"},qr={key:2,class:"va-marker va-low"},zr={class:"volume-scale"},jr={key:0,class:"trading-signals"},Gr={class:"signals-header"},Qr={class:"signals-content"},Xr={class:"confidence-bar"},Kr={class:"confidence-label"},Yr={class:"confidence-progress"},Jr={key:0,class:"recommendations"},Zr={key:3,class:"no-data-state"},el={key:0,class:"dev-fallback"},tl={class:"tooltip-content"};function sl(n,e,a,o,s,i){var r;return u(),h("div",br,[s.loading?(u(),h("div",_r,[...e[5]||(e[5]=[t("div",{class:"loading-spinner"},null,-1),t("p",null,"Loading MFI Volume Profile...",-1)])])):s.error?(u(),h("div",kr,[e[7]||(e[7]=t("div",{class:"error-icon"},"‚ö†Ô∏è",-1)),t("p",Cr,l(s.error),1),t("div",Tr,[t("button",{onClick:e[0]||(e[0]=(...c)=>i.loadData&&i.loadData(...c)),class:"retry-btn"},"Retry"),i.isDev?(u(),h("div",Dr,[...e[6]||(e[6]=[t("small",null,"DEV mode: Trying Yahoo Finance fallback",-1)])])):k("",!0)])])):s.profileData?(u(),h("div",Ar,[t("div",Ir,[t("div",xr,[e[8]||(e[8]=t("div",{class:"metric-label"},"MFI Signal",-1)),t("div",{class:w(["metric-value",`signal-${s.profileData.mfi.signal.toLowerCase()}`])},l(s.profileData.mfi.signal),3),t("div",Mr,l(((r=s.profileData.mfi.latest)==null?void 0:r.toFixed(2))||"N/A"),1)]),t("div",Nr,[e[9]||(e[9]=t("div",{class:"metric-label"},"Market Sentiment",-1)),t("div",{class:w(["metric-value",`sentiment-${s.profileData.marketSentiment.toLowerCase()}`])},l(s.profileData.marketSentiment),3),t("div",Pr," Buy: "+l((s.profileData.statistics.buyingRatio*100).toFixed(1))+"% ",1)]),t("div",Lr,[e[10]||(e[10]=t("div",{class:"metric-label"},"Point of Control",-1)),t("div",$r,"$"+l(s.profileData.pointOfControl.priceLevel.toFixed(2)),1),t("div",Rr,l(s.profileData.pointOfControl.percentage.toFixed(1))+"% volume",1)])]),t("div",Er,[t("div",Fr,[t("h4",null,"Volume Profile ("+l(a.bins)+" bins, MFI "+l(a.mfiPeriod)+")",1),t("div",Or,[H(t("select",{"onUpdate:modelValue":e[1]||(e[1]=c=>s.selectedRange=c),onChange:e[2]||(e[2]=(...c)=>i.onRangeChange&&i.onRangeChange(...c)),class:"range-selector"},[...e[11]||(e[11]=[t("option",{value:"3mo"},"3 Months",-1),t("option",{value:"6mo"},"6 Months",-1),t("option",{value:"1y"},"1 Year",-1)])],544),[[gt,s.selectedRange]])])]),t("div",{class:"chart-container",style:z({height:i.totalChartHeight+"px"})},[t("div",Ur,[(u(!0),h(F,null,O(i.displayBins,(c,d)=>(u(),h("div",{key:d,class:"price-label",style:z({height:s.binHeight+"px"})}," $"+l(c.priceLevel.toFixed(2)),5))),128))]),t("div",Vr,[(u(!0),h(F,null,O(i.displayBins,(c,d)=>(u(),h("div",{key:d,class:"volume-bar-row",style:z({height:s.binHeight+"px"})},[t("div",{class:w(["volume-bar",i.getBarClass(c)]),style:z(i.getBarStyle(c)),onMouseover:g=>i.showTooltip(g,c),onMouseleave:e[3]||(e[3]=(...g)=>i.hideTooltip&&i.hideTooltip(...g))},[t("div",{class:"bar-fill",style:z(i.getBarFillStyle(c))},null,4)],46,Wr),c.priceLevel===s.profileData.pointOfControl.priceLevel?(u(),h("div",Br," POC ")):k("",!0),c.priceLevel===s.profileData.valueArea.high?(u(),h("div",Hr," VAH ")):k("",!0),c.priceLevel===s.profileData.valueArea.low?(u(),h("div",qr," VAL ")):k("",!0)],4))),128))]),t("div",zr,[(u(!0),h(F,null,O(i.displayBins,(c,d)=>(u(),h("div",{key:d,class:"volume-label",style:z({height:s.binHeight+"px"})},l(i.formatVolume(c.volume)),5))),128))])],4)]),s.tradingSignals?(u(),h("div",jr,[t("div",Gr,[e[12]||(e[12]=t("h4",null,"Trading Analysis",-1)),t("div",{class:w(["signal-badge",`signal-${s.tradingSignals.signal.toLowerCase()}`])},l(s.tradingSignals.signal),3)]),t("div",Qr,[t("div",Xr,[t("div",Kr,"Confidence: "+l((s.tradingSignals.confidence*100).toFixed(0))+"%",1),t("div",Yr,[t("div",{class:"confidence-fill",style:z({width:s.tradingSignals.confidence*100+"%"})},null,4)])]),s.tradingSignals.recommendations.length>0?(u(),h("div",Jr,[(u(!0),h(F,null,O(s.tradingSignals.recommendations,(c,d)=>(u(),h("div",{class:"recommendation",key:d},l(c),1))),128))])):k("",!0)])])):k("",!0)])):(u(),h("div",Zr,[e[13]||(e[13]=t("div",{class:"no-data-icon"},"üìä",-1)),t("p",null,"No MFI Volume Profile data available for "+l(a.symbol),1),i.isDev?(u(),h("div",el,[t("button",{onClick:e[4]||(e[4]=(...c)=>i.loadData&&i.loadData(...c)),class:"retry-btn"},"Try Yahoo Finance (DEV)")])):k("",!0)])),s.tooltip.visible?(u(),h("div",{key:4,class:"tooltip",style:z(s.tooltip.style)},[t("div",tl,[t("div",null,[e[14]||(e[14]=t("strong",null,"Price Range:",-1)),A(" $"+l(s.tooltip.data.minPrice.toFixed(2))+" - $"+l(s.tooltip.data.maxPrice.toFixed(2)),1)]),t("div",null,[e[15]||(e[15]=t("strong",null,"Volume:",-1)),A(" "+l(i.formatVolume(s.tooltip.data.volume)),1)]),t("div",null,[e[16]||(e[16]=t("strong",null,"Avg MFI:",-1)),A(" "+l(s.tooltip.data.mfiAverage.toFixed(1)),1)]),t("div",null,[e[17]||(e[17]=t("strong",null,"Buying:",-1)),A(" "+l(i.formatVolume(s.tooltip.data.positiveVolume)),1)]),t("div",null,[e[18]||(e[18]=t("strong",null,"Selling:",-1)),A(" "+l(i.formatVolume(s.tooltip.data.negativeVolume)),1)])])],4)):k("",!0)])}const al=E(Sr,[["render",sl],["__scopeId","data-v-e13928cb"]]),nl={name:"TradingViewCompanyProfile",props:{symbol:{type:String,required:!0},exchange:{type:String,default:"NASDAQ"},colorTheme:{type:String,default:"light"},isTransparent:{type:Boolean,default:!0},locale:{type:String,default:"en"}},data(){return{loaded:!1,error:!1,widgetId:`company-profile-${Date.now()}`}},computed:{fullSymbol(){return`${this.exchange}:${this.symbol}`}},mounted(){this.loadCompanyProfile()},watch:{symbol(){this.loadCompanyProfile()},exchange(){this.loadCompanyProfile()}},methods:{async loadCompanyProfile(){this.loaded=!1,this.error=!1;try{await this.$nextTick(),this.createCompanyProfile()}catch(n){console.error("Failed to load company profile:",n),this.error=!0}},createCompanyProfile(){const n=this.$refs.container;if(!n)return;n.innerHTML="";const e=document.createElement("div");e.className="tradingview-widget-container",e.style.height="100%",e.style.width="100%";const a=document.createElement("div");a.className="tradingview-widget-container__widget",e.appendChild(a),n.appendChild(e);const o={symbol:this.fullSymbol,colorTheme:this.colorTheme,isTransparent:this.isTransparent,locale:this.locale,width:"100%",height:"100%"};console.log(`üè¢ Creating Company Profile widget for ${this.fullSymbol}`,o);const s=document.createElement("script");s.type="text/javascript",s.src="https://s3.tradingview.com/external-embedding/embed-widget-symbol-profile.js",s.async=!0,s.innerHTML=JSON.stringify(o),s.onload=()=>{this.loaded=!0,console.log("TradingView Company Profile loaded successfully")},s.onerror=()=>{this.error=!0,console.error("TradingView Company Profile failed to load")},a.appendChild(s),setTimeout(()=>{!this.loaded&&!this.error&&(this.loaded=!0)},8e3)},async retry(){await this.loadCompanyProfile()}}},il={class:"company-profile-container"},ol=["id"],rl={key:0,class:"profile-loading"},ll={key:1,class:"profile-error"};function cl(n,e,a,o,s,i){return u(),h("div",il,[t("div",{class:"company-profile-widget",id:s.widgetId,ref:"container"},[!s.loaded&&!s.error?(u(),h("div",rl,[...e[1]||(e[1]=[t("div",{class:"loading-spinner"},null,-1),t("span",null,"Loading company profile...",-1)])])):k("",!0),s.error?(u(),h("div",ll,[e[2]||(e[2]=t("span",null,"‚ö†Ô∏è Failed to load company profile",-1)),t("button",{onClick:e[0]||(e[0]=(...r)=>i.retry&&i.retry(...r)),class:"retry-btn"},"Retry")])):k("",!0)],8,ol)])}const dl=E(nl,[["render",cl],["__scopeId","data-v-0b7608e8"]]),ul={name:"TradingViewFundamentalData",props:{symbol:{type:String,required:!0},exchange:{type:String,default:"NASDAQ"},colorTheme:{type:String,default:"dark"},displayMode:{type:String,default:"regular"},isTransparent:{type:Boolean,default:!0},locale:{type:String,default:"zh_TW"}},data(){return{loaded:!1,error:!1,widgetId:`fundamental-data-${Date.now()}`}},computed:{fullSymbol(){return`${this.exchange}:${this.symbol}`}},mounted(){this.loadFundamentalData()},watch:{symbol(){this.loadFundamentalData()},exchange(){this.loadFundamentalData()}},methods:{async loadFundamentalData(){this.loaded=!1,this.error=!1;try{await this.$nextTick(),this.createFundamentalData()}catch(n){console.error("Failed to load fundamental data:",n),this.error=!0}},createFundamentalData(){const n=this.$refs.container;if(!n)return;n.innerHTML="";const e=document.createElement("div");e.className="tradingview-widget-container",e.style.height="100%",e.style.width="100%";const a=document.createElement("div");a.className="tradingview-widget-container__widget",e.appendChild(a),n.appendChild(e);const o={symbol:this.fullSymbol,colorTheme:"light",displayMode:"regular",isTransparent:!0,locale:"zh_TW",width:"100%",height:"100%"},s=document.createElement("script");s.type="text/javascript",s.src="https://s3.tradingview.com/external-embedding/embed-widget-financials.js",s.async=!0,s.innerHTML=JSON.stringify(o),s.onload=()=>{this.loaded=!0,console.log("TradingView Fundamental Data loaded successfully")},s.onerror=()=>{this.error=!0,console.error("TradingView Fundamental Data failed to load")},a.appendChild(s),setTimeout(()=>{!this.loaded&&!this.error&&(this.loaded=!0)},8e3)},async retry(){await this.loadFundamentalData()}}},hl={class:"fundamental-data-container"},gl=["id"],ml={key:0,class:"fundamental-loading"},fl={key:1,class:"fundamental-error"};function pl(n,e,a,o,s,i){return u(),h("div",hl,[t("div",{class:"fundamental-data-widget",id:s.widgetId,ref:"container"},[!s.loaded&&!s.error?(u(),h("div",ml,[...e[1]||(e[1]=[t("div",{class:"loading-spinner"},null,-1),t("span",null,"Loading fundamental data...",-1)])])):k("",!0),s.error?(u(),h("div",fl,[e[2]||(e[2]=t("span",null,"‚ö†Ô∏è Failed to load fundamental data",-1)),t("button",{onClick:e[0]||(e[0]=(...r)=>i.retry&&i.retry(...r)),class:"retry-btn"},"Retry")])):k("",!0)],8,gl)])}const vl=E(ul,[["render",pl],["__scopeId","data-v-5cbca18c"]]),yl={name:"StockNews",props:{symbol:{type:String,required:!0},newsCount:{type:Number,default:9}},data(){return{loading:!0,error:null,news:[]}},mounted(){this.loadNews()},watch:{symbol(){this.loadNews()}},methods:{async loadNews(){this.loading=!0,this.error=null,this.news=[];try{console.log(`Loading news for ${this.symbol}...`);const n=await this.fetchYahooNews(this.symbol);n&&n.length>0?(this.news=n.slice(0,this.newsCount),console.log(`Loaded ${this.news.length} news articles for ${this.symbol}`)):this.news=[]}catch(n){console.error(`Failed to load news for ${this.symbol}:`,n),this.error=n.message}finally{this.loading=!1}},async fetchYahooNews(n){const e=["https://api.allorigins.win/raw?url=","https://corsproxy.io/?"];for(const a of e)try{const o=`https://query1.finance.yahoo.com/v1/finance/search?q=${n}&lang=en-US&region=US&quotesCount=1&newsCount=${this.newsCount}&enableFuzzyQuery=false&quotesQueryId=tss_match_phrase_query&multiQuoteQueryId=multi_quote_single_token_query&newsQueryId=news_cie_vespa&enableCb=true&enableNavLinks=true&enableEnhancedTrivialQuery=true`,s=`${a}${encodeURIComponent(o)}`;console.log(`Fetching news from: ${s}`);const i=await fetch(s);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const r=await i.json();if(r&&r.news&&r.news.length>0)return r.news}catch(o){console.warn("Proxy failed for news:",o.message);continue}throw new Error("All news proxies failed")},formatDate(n){if(!n)return"Unknown date";const e=new Date(n*1e3),a=new Date,o=a-e,s=Math.floor(o/(1e3*60*60)),i=Math.floor(s/24);return s<1?`${Math.floor(o/6e4)}m ago`:s<24?`${s}h ago`:i<7?`${i}d ago`:e.toLocaleDateString("en-US",{month:"short",day:"numeric",year:e.getFullYear()!==a.getFullYear()?"numeric":void 0})},truncateText(n,e){return n?n.length<=e?n:n.substring(0,e).trim()+"...":""},openArticle(n){n&&window.open(n,"_blank","noopener,noreferrer")},handleImageError(n){n.target.style.display="none"}}},wl={class:"stock-news"},Sl={key:0,class:"loading-state"},bl={key:1,class:"error-state"},_l={key:2,class:"no-news-state"},kl={key:3,class:"news-grid"},Cl=["onClick"],Tl={class:"news-header"},Dl={class:"news-title"},Al={class:"news-date"},Il={class:"news-content"},xl={class:"news-text"},Ml={class:"news-summary"},Nl={class:"news-meta"},Pl={class:"news-publisher"},Ll={key:0,class:"news-type"},$l={key:0,class:"news-thumbnail"},Rl=["src","alt"];function El(n,e,a,o,s,i){return u(),h("div",wl,[s.loading?(u(),h("div",Sl,[e[1]||(e[1]=t("div",{class:"loading-spinner"},null,-1)),t("span",null,"Loading latest news for "+l(a.symbol)+"...",1)])):s.error?(u(),h("div",bl,[e[2]||(e[2]=t("span",{class:"error-icon"},"‚ö†Ô∏è",-1)),t("span",null,l(s.error),1)])):s.news.length===0?(u(),h("div",_l,[e[3]||(e[3]=t("span",{class:"info-icon"},"‚ÑπÔ∏è",-1)),t("span",null,"No recent news available for "+l(a.symbol),1)])):(u(),h("div",kl,[(u(!0),h(F,null,O(s.news,(r,c)=>{var d;return u(),h("article",{key:c,class:"news-item",onClick:g=>i.openArticle(r.link)},[t("div",Tl,[t("h4",Dl,l(r.title),1),t("span",Al,l(i.formatDate(r.providerPublishTime)),1)]),t("div",Il,[t("div",xl,[t("p",Ml,l(i.truncateText(r.summary,150)),1),t("div",Nl,[t("span",Pl,l(r.publisher),1),r.type?(u(),h("span",Ll,l(r.type),1)):k("",!0)])]),r.thumbnail?(u(),h("div",$l,[t("img",{src:(d=r.thumbnail.resolutions[0])==null?void 0:d.url,alt:r.title,onError:e[0]||(e[0]=(...g)=>i.handleImageError&&i.handleImageError(...g))},null,40,Rl)])):k("",!0)]),e[4]||(e[4]=t("div",{class:"news-footer"},[t("span",{class:"read-more"},"Read more ‚Üí")],-1))],8,Cl)}),128))]))])}const Fl=E(yl,[["render",El],["__scopeId","data-v-6db7a932"]]),Ol={name:"StockDetailSkeleton"},Ul={class:"stock-detail-skeleton"},Vl={class:"skeleton-widget-container"},Wl={class:"skeleton-technical-indicators"},Bl={class:"skeleton-widget-container"},Hl={class:"skeleton-performance-grid"},ql={class:"skeleton-content-layout"},zl={class:"skeleton-news-row"},jl={class:"skeleton-news-content"},Gl={class:"skeleton-fundamental-row"},Ql={class:"skeleton-fundamental-content"},Xl={class:"skeleton-fundamental-grid"},Kl={class:"skeleton-profile-row"},Yl={class:"skeleton-profile-content"},Jl={class:"skeleton-profile-info"};function Zl(n,e,a,o,s,i){return u(),h("div",Ul,[e[10]||(e[10]=se('<div class="skeleton-breadcrumb" data-v-a9db020d><div class="skeleton-breadcrumb-link" data-v-a9db020d></div><div class="skeleton-breadcrumb-separator" data-v-a9db020d>‚Ä∫</div><div class="skeleton-breadcrumb-current" data-v-a9db020d></div></div><div class="skeleton-stock-header" data-v-a9db020d><div class="skeleton-header-info" data-v-a9db020d><div class="skeleton-symbol-info" data-v-a9db020d><div class="skeleton-symbol" data-v-a9db020d></div><div class="skeleton-tags" data-v-a9db020d><div class="skeleton-tag" data-v-a9db020d></div><div class="skeleton-tag" data-v-a9db020d></div></div></div><div class="skeleton-header-actions" data-v-a9db020d><div class="skeleton-back-button" data-v-a9db020d></div></div></div><div class="skeleton-widgets-container" data-v-a9db020d><div class="skeleton-widget-overview" data-v-a9db020d><div class="skeleton-widget-header" data-v-a9db020d><div class="skeleton-title" data-v-a9db020d></div></div><div class="skeleton-overview-content" data-v-a9db020d></div></div><div class="skeleton-widget-technical" data-v-a9db020d><div class="skeleton-widget-header" data-v-a9db020d><div class="skeleton-title" data-v-a9db020d></div></div><div class="skeleton-technical-content" data-v-a9db020d></div></div></div></div><div class="skeleton-insight-widgets" data-v-a9db020d><div class="skeleton-insight-widget" data-v-a9db020d><div class="skeleton-widget-header" data-v-a9db020d><div class="skeleton-title" data-v-a9db020d></div></div><div class="skeleton-insight-content" data-v-a9db020d></div></div><div class="skeleton-insight-widget" data-v-a9db020d><div class="skeleton-widget-header" data-v-a9db020d><div class="skeleton-title" data-v-a9db020d></div></div><div class="skeleton-insight-content" data-v-a9db020d></div></div></div>',3)),t("div",Vl,[e[1]||(e[1]=t("div",{class:"skeleton-widget-header"},[t("div",{class:"skeleton-title"})],-1)),t("div",Wl,[(u(),h(F,null,O(6,r=>t("div",{class:"skeleton-indicator-item",key:r},[...e[0]||(e[0]=[t("div",{class:"skeleton-indicator-name"},null,-1),t("div",{class:"skeleton-indicator-value"},null,-1),t("div",{class:"skeleton-indicator-signal"},null,-1)])])),64))])]),t("div",Bl,[e[3]||(e[3]=t("div",{class:"skeleton-widget-header"},[t("div",{class:"skeleton-title"})],-1)),t("div",Hl,[(u(),h(F,null,O(4,r=>t("div",{class:"skeleton-performance-item",key:r},[...e[2]||(e[2]=[t("div",{class:"skeleton-performance-label"},null,-1),t("div",{class:"skeleton-performance-value"},null,-1)])])),64))])]),t("div",ql,[t("div",zl,[e[5]||(e[5]=t("div",{class:"skeleton-widget-header"},[t("div",{class:"skeleton-title"})],-1)),t("div",jl,[(u(),h(F,null,O(5,r=>t("div",{class:"skeleton-news-item",key:r},[...e[4]||(e[4]=[t("div",{class:"skeleton-news-title"},null,-1),t("div",{class:"skeleton-news-summary"},null,-1),t("div",{class:"skeleton-news-time"},null,-1)])])),64))])]),t("div",Gl,[e[7]||(e[7]=t("div",{class:"skeleton-widget-header"},[t("div",{class:"skeleton-title"})],-1)),t("div",Ql,[t("div",Xl,[(u(),h(F,null,O(8,r=>t("div",{class:"skeleton-fundamental-item",key:r},[...e[6]||(e[6]=[t("div",{class:"skeleton-fundamental-label"},null,-1),t("div",{class:"skeleton-fundamental-value"},null,-1)])])),64))])])]),t("div",Kl,[e[9]||(e[9]=t("div",{class:"skeleton-widget-header"},[t("div",{class:"skeleton-title"})],-1)),t("div",Yl,[t("div",Jl,[(u(),h(F,null,O(6,r=>t("div",{class:"skeleton-profile-item",key:r},[...e[8]||(e[8]=[t("div",{class:"skeleton-profile-label"},null,-1),t("div",{class:"skeleton-profile-value"},null,-1)])])),64))])])])])])}const ec=E(Ol,[["render",Zl],["__scopeId","data-v-a9db020d"]]),Y=x().refine(n=>{try{const e=new Date(n);return!isNaN(e.getTime())&&n.includes("T")}catch{return!1}},{message:"Invalid datetime format"}),Yt=Ce(["fresh","stale","very_stale"]),tc=Ce(["open","closed","pre","post"]).nullable(),sc=Ce(["latest","close","last_known"]),ac=Ce(["llm","fallback"]),nc=Ce(["good","stale","degraded","disabled_scrape"]),ic=ds([ct(.5),ct(.75),ct(.9)]),oc=Ce(["operational","degraded","maintenance","outage"]),rc=Ce(["success","failed","running","pending"]),lc=W({avg_cost_usd:P().positive().finite(),shares:P().positive().finite().optional()}),cc=W({scraping_enabled:K(),degradation_enabled:K(),ga_enabled:K(),clarity_enabled:K()}),dc=W({timestamp:Y,success:K(),error:x().optional(),changes_applied:P().nonnegative(),dry_run:K()}),uc=W({last_import_result:dc.optional()}),Jt=vt(()=>_c),Zt=vt(()=>pc),es=vt(()=>Dc),hc=W({last_daily_snapshot:Jt.optional(),last_quotes_snapshot:Zt.optional(),last_metadata:es.optional()}),gc=W({schema_version:x(),watchlist:Q(x().max(10).regex(/^[A-Z0-9.-]+$/)),holdings:Ae(x(),lc),settings:cc,cache:hc,diagnostics:uc}),mc=W({symbol:x().max(10).regex(/^[A-Z0-9.-]+$/),price_usd:P().nullable(),price_type:sc,market_state:tc,is_delayed:K(),stale_level:Yt,error:x().nullable(),change_percent:P().optional(),volume:P().nonnegative().optional()}),fc=W({total_symbols:P().nonnegative(),successful_updates:P().nonnegative(),failed_updates:P().nonnegative(),average_delay_minutes:P().nonnegative().optional(),next_update:Y.optional()}),pc=W({as_of:Y,provider:x(),market_session:x().optional(),items:Q(mc),metadata:fc.optional()}),vc=W({title:x().min(1),url:x().url(),published_at:Y,source:x().min(1),summary:x().optional()}),yc=W({symbol:x().max(10).regex(/^[A-Z0-9.-]+$/),short_brief_zh:x(),brief_truncated:K(),brief_source:ac,news_top10:Q(vc),news_insufficient:K(),gaps:Q(x())}),wc=W({id:x().min(1),value:P().nullable(),as_of:Y,source_name:x().min(1),quality_flag:nc}),Sc=W({items:Q(wc).length(10,"Must have exactly 10 markets indicators")}),bc=W({total_processing_time_ms:P().nonnegative(),news_sources_attempted:P().nonnegative(),news_sources_successful:P().nonnegative(),total_articles_collected:P().nonnegative(),articles_after_deduplication:P().nonnegative(),llm_brief_generation_success_rate:P().min(0).max(1),macro_indicators_updated:P().nonnegative(),macro_indicators_failed:P().nonnegative()}),_c=W({as_of_date_taipei:x().regex(/^\d{4}-\d{2}-\d{2}$/),generated_at_utc:Y,universe:Q(x()).length(10,"Universe must have exactly 10 symbols"),per_symbol:Q(yc).length(10,"Must have data for exactly 10 symbols"),macro:Sc,generation_metadata:bc.optional()}),kc=W({symbol:x().max(10).regex(/^[A-Z0-9.-]+$/),sector:x().nullable(),industry:x().nullable(),confidence:ic,sources:Q(x()).min(1),last_verified_at:Y,market_cap_category:x().optional(),exchange:x().optional()}),Cc=W({high_confidence_0_90:P().nonnegative(),medium_confidence_0_75:P().nonnegative(),low_confidence_0_50:P().nonnegative()}),Tc=W({last_refresh_duration_ms:P().nonnegative(),symbols_updated:P().nonnegative(),symbols_failed:P().nonnegative(),confidence_improvements:P().nonnegative(),new_sources_added:P().nonnegative()}),Dc=W({ttl_days:P().positive(),as_of:Y,next_refresh:Y.optional(),items:Q(kc).length(10,"Must have metadata for exactly 10 symbols"),industry_grouping:Ae(x(),Q(x())).optional(),confidence_distribution:Cc.optional(),data_sources:Ae(x(),P().nonnegative()).optional(),refresh_metadata:Tc.optional()}),Ac=W({last_run:Y,next_run:Y,status:rc,duration_ms:P().nonnegative(),symbols_updated:P().nonnegative().optional(),symbols_processed:P().nonnegative().optional(),errors:Q(x()),provider:x().optional()}),Ic=W({age_minutes:P().nonnegative().optional(),age_hours:P().nonnegative().optional(),age_days:P().nonnegative().optional(),staleness:Yt}),xc=W({used_minutes:P().nonnegative(),total_minutes:P().nonnegative(),reset_date:x()}),Mc=W({data_files_mb:P().nonnegative(),total_repo_mb:P().nonnegative()}),Nc=W({calls_today:P().nonnegative(),daily_limit:P().nonnegative(),reset_time:Y}),Pc=W({github_actions_quota:xc.optional(),storage_usage:Mc.optional(),api_limits:Ae(x(),Nc).optional()}),Lc=W({enabled:K(),active_fallbacks:Q(x()),cache_hits_last_hour:P().nonnegative()}),$c=W({description:x(),last_updated:Y,system_status:oc,jobs:Ae(x(),Ac),data_freshness:Ae(x(),Ic),system_health:Pc,degradation_status:Lc}),Rc=W({max_length:P().positive(),allowed_chars:x(),case_sensitive:K()});W({description:x(),version:x(),last_updated:x(),symbols:Q(x().max(10).regex(/^[A-Z0-9.-]+$/)).length(10,"Universe must have exactly 10 symbols"),validation:Rc});const Ec=W({id:x().min(1),name:x().min(1),description:x().min(1),scrape_only:K(),data_source:x().min(1),update_frequency:x().min(1),unit:x().min(1)}),Fc=W({default_enabled:K(),timeout_seconds:P().positive(),retry_attempts:P().nonnegative(),user_agent:x().min(1)});W({description:x(),version:x(),last_updated:x(),indicators:Q(Ec).length(10,"Must have exactly 10 markets indicators"),scraping_settings:Fc});function Ze(n,e){try{return{success:!0,data:n.parse(e)}}catch(a){return a instanceof us?{success:!1,error:{message:"Validation failed",details:a.errors}}:{success:!1,error:{message:"Unknown validation error",details:{error:String(a)}}}}}function it(n){return Ze(gc,n)}function Oc(n){return Ze(Zt,n)}function Uc(n){return Ze(Jt,n)}function Vc(n){return Ze(es,n)}function Wc(n){return Ze($c,n)}function Bc(n){const e=["schema_version","watchlist","holdings","settings","cache","diagnostics"];if(typeof n!="object"||n===null)return{success:!1,error:{message:"Import data must be a valid JSON object",code:"INVALID_FORMAT"}};const o=Object.keys(n).filter(s=>!e.includes(s));return o.length>0?{success:!1,error:{message:`Unknown keys found: ${o.join(", ")}`,code:"UNKNOWN_KEYS",details:{unknownKeys:o}}}:it(n)}const U=class U{static loadState(){try{const e=localStorage.getItem(U.STORAGE_KEY);if(!e)return{...U.DEFAULT_STATE};const a=JSON.parse(e),o=U.migrateState(a),s=it(o);return s.success&&s.data?s.data:(console.warn("Invalid state in localStorage, using defaults:",s.error),{...U.DEFAULT_STATE})}catch(e){return console.error("Failed to load state from localStorage:",e),{...U.DEFAULT_STATE}}}static saveState(e){const a=it(e);if(!a.success)return a;try{return localStorage.setItem(U.STORAGE_KEY,JSON.stringify(e)),{success:!0,data:e}}catch(o){return{success:!1,error:{message:"Failed to save state to localStorage",details:{error:String(o)}}}}}static clearState(){localStorage.removeItem(U.STORAGE_KEY)}static exportState(){const e=U.loadState();return JSON.stringify(e,null,2)}static importState(e,a=!1){try{const o=JSON.parse(e),s=Bc(o);if(!s.success)return s;const i=U.migrateState(s.data),r=it(i);if(!r.success)return r;if(!a){const c=U.saveState(r.data);if(!c.success)return c}return{success:!0,data:r.data}}catch(o){return{success:!1,error:{message:"Invalid JSON format",details:{error:String(o)}}}}}static updateWatchlist(e){const o={...U.loadState(),watchlist:e};return U.saveState(o)}static addToWatchlist(e){const a=U.loadState();if(a.watchlist.includes(e.toUpperCase()))return{success:!1,error:{message:"Symbol already in watchlist",code:"DUPLICATE_SYMBOL"}};const o=[...a.watchlist,e.toUpperCase()];return U.updateWatchlist(o)}static removeFromWatchlist(e){const o=U.loadState().watchlist.filter(s=>s!==e.toUpperCase());return U.updateWatchlist(o)}static updateHolding(e,a,o){const s=U.loadState(),i={...s,holdings:{...s.holdings,[e.toUpperCase()]:{avg_cost_usd:a,...o!==void 0&&{shares:o}}}};return U.saveState(i)}static removeHolding(e){const a=U.loadState(),o={...a.holdings};delete o[e.toUpperCase()];const s={...a,holdings:o};return U.saveState(s)}static updateSettings(e){const a=U.loadState(),o={...a,settings:{...a.settings,...e}};return U.saveState(o)}static updateCache(e){const a=U.loadState(),o={...a,cache:{...a.cache,...e}};return U.saveState(o)}static recordImportResult(e){const a=U.loadState(),o={...a,diagnostics:{...a.diagnostics,last_import_result:e}};return U.saveState(o)}static migrateState(e){var o,s,i,r;return e.schema_version||(e.schema_version="1.0.0"),{schema_version:U.CURRENT_SCHEMA_VERSION,watchlist:e.watchlist||[],holdings:e.holdings||{},settings:{scraping_enabled:((o=e.settings)==null?void 0:o.scraping_enabled)??!1,degradation_enabled:((s=e.settings)==null?void 0:s.degradation_enabled)??!0,ga_enabled:((i=e.settings)==null?void 0:i.ga_enabled)??!1,clarity_enabled:((r=e.settings)==null?void 0:r.clarity_enabled)??!1},cache:e.cache||{},diagnostics:e.diagnostics||{}}}static getCurrentSchemaVersion(){return U.CURRENT_SCHEMA_VERSION}static isStorageAvailable(){try{const e="__storage_test__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch{return!1}}};Te(U,"STORAGE_KEY","investment-dashboard-state"),Te(U,"CURRENT_SCHEMA_VERSION","1.0.0"),Te(U,"DEFAULT_STATE",{schema_version:U.CURRENT_SCHEMA_VERSION,watchlist:[],holdings:{},settings:{scraping_enabled:!1,degradation_enabled:!0,ga_enabled:!1,clarity_enabled:!1},cache:{},diagnostics:{}});let ae=U;class Hc{constructor(e="",a=!0){Te(this,"baseUrl");Te(this,"cacheBustingEnabled");this.baseUrl=e,this.cacheBustingEnabled=a}async fetchSystemStatus(){var e;try{const a=await fetch(`${this.baseUrl}/data/status.json`);if(!a.ok)throw new Error(`HTTP ${a.status}`);const o=await a.json(),s=Wc(o);if(!s.success)throw new Error(`Invalid status.json: ${(e=s.error)==null?void 0:e.message}`);return{data:s.data,source:"network",stale_level:"fresh",as_of:s.data.last_updated}}catch(a){return console.warn("Failed to fetch system status:",a),ae.loadState().cache.last_daily_snapshot?{data:null,source:"fallback",stale_level:"very_stale",error:String(a)}:{data:null,source:"fallback",stale_level:"very_stale",error:String(a)}}}async fetchQuotesSnapshot(){var e,a;try{const o=await this.fetchSystemStatus();let s="";this.cacheBustingEnabled&&((e=o.data)!=null&&e.last_updated)&&(s=`?t=${new Date(o.data.last_updated).getTime()}`);const i=await fetch(`${this.baseUrl}/data/quotes/latest.json${s}`);if(!i.ok)throw new Error(`HTTP ${i.status}`);const r=await i.json(),c=Oc(r);if(!c.success)throw new Error(`Invalid quotes snapshot: ${(a=c.error)==null?void 0:a.message}`);const d=ae.loadState();return ae.updateCache({last_quotes_snapshot:c.data}),{data:c.data,source:"network",stale_level:this.calculateStaleness(c.data.as_of),as_of:c.data.as_of}}catch(o){console.warn("Failed to fetch quotes snapshot:",o);const s=ae.loadState();return s.cache.last_quotes_snapshot?{data:s.cache.last_quotes_snapshot,source:"cache",stale_level:this.calculateStaleness(s.cache.last_quotes_snapshot.as_of),as_of:s.cache.last_quotes_snapshot.as_of,error:String(o)}:{data:null,source:"fallback",stale_level:"very_stale",error:String(o)}}}async fetchDailySnapshot(e){var a,o;try{const s=e||this.getTaipeiDateString(),i=await this.fetchSystemStatus();let r="";this.cacheBustingEnabled&&((a=i.data)!=null&&a.last_updated)&&(r=`?t=${new Date(i.data.last_updated).getTime()}`);const c=await fetch(`${this.baseUrl}/data/daily/${s}.json${r}`);if(!c.ok)throw new Error(`HTTP ${c.status}`);const d=await c.json(),g=Uc(d);if(!g.success)throw new Error(`Invalid daily snapshot: ${(o=g.error)==null?void 0:o.message}`);return ae.updateCache({last_daily_snapshot:g.data}),{data:g.data,source:"network",stale_level:this.calculateStaleness(g.data.generated_at_utc),as_of:g.data.generated_at_utc}}catch(s){console.warn("Failed to fetch daily snapshot:",s);const i=ae.loadState();return i.cache.last_daily_snapshot?{data:i.cache.last_daily_snapshot,source:"cache",stale_level:this.calculateStaleness(i.cache.last_daily_snapshot.generated_at_utc),as_of:i.cache.last_daily_snapshot.generated_at_utc,error:String(s)}:{data:null,source:"fallback",stale_level:"very_stale",error:String(s)}}}async fetchMetadataSnapshot(){var e,a;try{const o=await this.fetchSystemStatus();let s="";this.cacheBustingEnabled&&((e=o.data)!=null&&e.last_updated)&&(s=`?t=${new Date(o.data.last_updated).getTime()}`);const i=await fetch(`${this.baseUrl}/data/symbols_metadata.json${s}`);if(!i.ok)throw new Error(`HTTP ${i.status}`);const r=await i.json(),c=Vc(r);if(!c.success)throw new Error(`Invalid metadata snapshot: ${(a=c.error)==null?void 0:a.message}`);return ae.updateCache({last_metadata:c.data}),{data:c.data,source:"network",stale_level:this.calculateStaleness(c.data.as_of),as_of:c.data.as_of}}catch(o){console.warn("Failed to fetch metadata snapshot:",o);const s=ae.loadState();return s.cache.last_metadata?{data:s.cache.last_metadata,source:"cache",stale_level:this.calculateStaleness(s.cache.last_metadata.as_of),as_of:s.cache.last_metadata.as_of,error:String(o)}:{data:null,source:"fallback",stale_level:"very_stale",error:String(o)}}}calculateStaleness(e){try{const a=new Date(e),s=(new Date().getTime()-a.getTime())/(1e3*60);return s<=60?"fresh":s<=24*60?"stale":"very_stale"}catch{return"very_stale"}}getTaipeiDateString(){const e=new Date;return new Date(e.getTime()+8*60*60*1e3).toISOString().split("T")[0]}}const qc=()=>{if(typeof window<"u"){const n=window.location.hostname,e=window.location.pathname;if(n==="romarin-hsieh.github.io"&&e.startsWith("/investment-dashboard"))return"/investment-dashboard"}return""},zc=new Hc(qc());class jc{constructor(){this.cache=new Map,this.cacheExpiry=24*60*60*1e3,this.batchSize=5,this.requestDelay=1e3}async getSymbolMetadata(e){try{if(this.cache.has(e)){const o=this.cache.get(e);if(Date.now()-o.timestamp<this.cacheExpiry)return console.log(`Using cached metadata for ${e}`),o.data}console.log(`Fetching fresh metadata for ${e} from Yahoo Finance API...`);const a=await ie.getStockInfo(e);if(a&&!a.error&&a.sector!=="Unknown"){const o={symbol:e,sector:a.sector||"Unknown",industry:a.industry||"Unknown Industry",exchange:a.exchange||this.getDefaultExchange(e),marketCap:a.marketCap,marketCapFormatted:a.marketCapFormatted,marketCapCategory:a.marketCapCategory||"unknown",currency:a.currency||"USD",country:a.country||"Unknown",website:a.website,employees:a.employees,businessSummary:a.businessSummary,confidence:a.confidence||.95,source:"Yahoo Finance API (Live)",lastUpdated:a.lastUpdated||new Date().toISOString(),isLive:!0};return this.cache.set(e,{data:o,timestamp:Date.now()}),console.log(`Successfully fetched metadata for ${e}:`,{sector:o.sector,industry:o.industry,confidence:o.confidence}),o}else return console.warn(`Yahoo Finance API failed for ${e}, using static fallback data`),this.getStaticFallbackMetadata(e)}catch(a){return console.error(`Error fetching metadata for ${e}:`,a),this.getStaticFallbackMetadata(e)}}getStaticFallbackMetadata(e){const o={ASTS:{sector:"Communication Services",industry:"Satellite Communications",confidence:.75},RIVN:{sector:"Consumer Cyclical",industry:"Electric Vehicles",confidence:.9},PL:{sector:"Technology",industry:"Satellite Imaging & Analytics",confidence:.9},ONDS:{sector:"Technology",industry:"Industrial IoT Solutions",confidence:.75},RDW:{sector:"Industrials",industry:"Space Infrastructure",confidence:.75},AVAV:{sector:"Industrials",industry:"Aerospace & Defense",confidence:.75},MDB:{sector:"Technology",industry:"Database Software",confidence:.9},ORCL:{sector:"Technology",industry:"Enterprise Software",confidence:.9},TSM:{sector:"Technology",industry:"Semiconductors",confidence:.9},RKLB:{sector:"Industrials",industry:"Aerospace & Defense",confidence:.9},CRM:{sector:"Technology",industry:"Enterprise Software",confidence:.9},NVDA:{sector:"Technology",industry:"Semiconductors",confidence:.9},AVGO:{sector:"Technology",industry:"Semiconductors",confidence:.9},AMZN:{sector:"Consumer Cyclical",industry:"Internet Retail",confidence:.9},GOOG:{sector:"Communication Services",industry:"Internet Content & Information",confidence:.9},META:{sector:"Communication Services",industry:"Internet Content & Information",confidence:.9},NFLX:{sector:"Communication Services",industry:"Entertainment",confidence:.9},LEU:{sector:"Energy",industry:"Uranium",confidence:.75},SMR:{sector:"Energy",industry:"Nuclear Energy",confidence:.75},CRWV:{sector:"Technology",industry:"Software - Application",confidence:.75},IONQ:{sector:"Technology",industry:"Quantum Computing",confidence:.75},PLTR:{sector:"Technology",industry:"Software - Infrastructure",confidence:.9},HIMS:{sector:"Healthcare",industry:"Health Information Services",confidence:.75},TSLA:{sector:"Consumer Cyclical",industry:"Auto Manufacturers",confidence:.9}}[e]||{sector:"Unknown",industry:"Unknown Industry",confidence:0},s={symbol:e,sector:o.sector,industry:o.industry,exchange:this.getDefaultExchange(e),marketCap:null,marketCapFormatted:"N/A",marketCapCategory:"unknown",currency:"USD",country:"Unknown",website:null,employees:null,businessSummary:null,confidence:o.confidence,source:"Static Fallback Data",lastUpdated:new Date().toISOString(),isLive:!1};return this.cache.set(e,{data:s,timestamp:Date.now()}),console.log(`Using static fallback for ${e}:`,{sector:s.sector,industry:s.industry,confidence:s.confidence}),s}async getBatchMetadata(e){const a=new Map,o=this.createBatches(e,this.batchSize);console.log(`Fetching metadata for ${e.length} symbols in ${o.length} batches...`);for(let s=0;s<o.length;s++){const i=o[s];console.log(`Processing batch ${s+1}/${o.length} (${i.length} symbols)`);const r=i.map(d=>this.getSymbolMetadata(d).catch(g=>(console.error(`Failed to fetch metadata for ${d}:`,g),this.getDefaultMetadata(d)))),c=await Promise.all(r);i.forEach((d,g)=>{a.set(d,c[g])}),s<o.length-1&&(console.log(`Waiting ${this.requestDelay}ms before next batch...`),await this.delay(this.requestDelay))}return console.log(`Completed fetching metadata for ${a.size} symbols`),a}getDefaultMetadata(e){return{symbol:e,sector:"Unknown",industry:"Unknown Industry",exchange:this.getDefaultExchange(e),marketCap:null,marketCapFormatted:"N/A",marketCapCategory:"unknown",currency:"USD",country:"Unknown",website:null,employees:null,businessSummary:null,confidence:0,source:"Default (API Failed)",lastUpdated:new Date().toISOString(),isLive:!1}}getDefaultExchange(e){const a=["AAPL","MSFT","GOOGL","GOOG","AMZN","TSLA","NVDA","META","NFLX","RKLB","ASTS","RIVN","MDB","ONDS","PL","AVAV","CRM","AVGO","LEU","SMR","CRWV","IONQ","PLTR","HIMS"],o=["TSM","ORCL","RDW"];return a.includes(e)?"NASDAQ":o.includes(e)?"NYSE":"NASDAQ"}getIndustryDisplay(e){return!e||e.confidence<.7?"Unknown Industry":e.industry||e.sector||"Unknown Industry"}getIndustryCategory(e){const a=this.getIndustryDisplay(e);return{"Software - Application":"tech-software","Software - Infrastructure":"tech-software","Database Software":"tech-software","Enterprise Software":"tech-software","Internet Content & Information":"tech-internet",Semiconductors:"tech-hardware","Quantum Computing":"tech-quantum","Aerospace & Defense":"industrial-aerospace","Space Infrastructure":"industrial-space","Industrial IoT Solutions":"tech-iot","Satellite Communications":"communications","Satellite Imaging & Analytics":"tech-satellite","Auto Manufacturers":"automotive","Electric Vehicles":"automotive","Internet Retail":"retail",Entertainment:"entertainment",Uranium:"energy-nuclear","Nuclear Energy":"energy-nuclear","Health Information Services":"healthcare","Unknown Industry":"unknown"}[a]||"other"}generateSectorGrouping(e){const a={};for(const[o,s]of e){const i=s.sector||"Unknown";a[i]||(a[i]=[]),a[i].push(o)}return a}generateConfidenceDistribution(e){const a={high_confidence_0_90:0,medium_confidence_0_75:0,low_confidence_0_50:0,unknown_confidence:0};for(const[o,s]of e){const i=s.confidence||0;i>=.9?a.high_confidence_0_90++:i>=.75?a.medium_confidence_0_75++:i>=.5?a.low_confidence_0_50++:a.unknown_confidence++}return a}createBatches(e,a){const o=[];for(let s=0;s<e.length;s+=a)o.push(e.slice(s,s+a));return o}delay(e){return new Promise(a=>setTimeout(a,e))}clearCache(){this.cache.clear(),console.log("Dynamic metadata cache cleared")}getCacheStats(){const e={totalCached:this.cache.size,cacheEntries:{}};for(const[a,o]of this.cache.entries())e.cacheEntries[a]={age:Date.now()-o.timestamp,expired:Date.now()-o.timestamp>this.cacheExpiry,sector:o.data.sector,industry:o.data.industry,confidence:o.data.confidence};return e}async warmupCache(e){console.log(`Warming up metadata cache for ${e.length} symbols...`);const a=Date.now(),o=await this.getBatchMetadata(e),s=Date.now()-a;return console.log(`Cache warmup completed in ${s}ms for ${o.size} symbols`),{duration:s,symbolsProcessed:o.size,successRate:(o.size/e.length*100).toFixed(1)+"%"}}}const we=new jc;class Gc{constructor(){this.cache=new Map,this.cacheExpiry=24*60*60*1e3,this.lastFetch=null,this.metadata=null,this.useDynamicAPI=!0}setUseDynamicAPI(e){this.useDynamicAPI=e,console.log(`Metadata service mode: ${e?"Dynamic API":"Static File"}`)}async getSymbolMetadata(e){return this.useDynamicAPI?await we.getSymbolMetadata(e):await this.getStaticSymbolMetadata(e)}async getStaticSymbolMetadata(e){if(this.cache.has(e)){const o=this.cache.get(e);if(Date.now()-o.timestamp<this.cacheExpiry)return o.data}if(await this.refreshMetadata(),this.metadata&&this.metadata.items){const o=this.metadata.items.find(s=>s.symbol===e);if(o)return console.log(`‚úÖ Found static metadata for ${e}:`,o),this.cache.set(e,{data:o,timestamp:Date.now()}),o}console.warn(`‚ùå No metadata found for ${e}, using default`);const a={symbol:e,sector:"Unknown",industry:"Unknown Industry",exchange:this.getDefaultExchange(e),confidence:0,source:"Static File (Default)",isLive:!1};return this.cache.set(e,{data:a,timestamp:Date.now()}),a}async getBatchMetadata(e){if(this.useDynamicAPI)return await we.getBatchMetadata(e);{console.log(`üîÑ getBatchMetadata (static mode) for ${e.length} symbols:`,e);const a=new Map;await this.refreshMetadata();for(const o of e){const s=await this.getStaticSymbolMetadata(o);a.set(o,s),["CRM","IONQ"].includes(o)&&console.log(`üéØ getBatchMetadata result for ${o}:`,s)}return console.log(`‚úÖ getBatchMetadata completed, ${a.size} results`),a}}getMetadataUrl(){return rt.symbolsMetadata()}async refreshMetadata(){var e;try{console.log("üîÑ Refreshing metadata from dataFetcher...");let a;try{a=await zc.fetchMetadataSnapshot()}catch(o){console.warn("‚ùå dataFetcher failed, trying direct fetch:",o);const s=this.getMetadataUrl();console.log("üîç MetadataService fetching from:",s);const i=await fetch(s);if(!i.ok)throw new Error(`HTTP ${i.status}: ${i.statusText}`);a={data:await i.json()}}if(a.data){if(this.metadata=a.data,this.lastFetch=Date.now(),console.log(`‚úÖ Metadata refreshed successfully, ${((e=this.metadata.items)==null?void 0:e.length)||0} items loaded`),this.metadata.items){const o=this.metadata.items.find(s=>s.symbol==="CRM");o?console.log("‚úÖ CRM found in refreshed metadata:",o):(console.warn("‚ùå CRM not found in refreshed metadata"),console.log("Available symbols:",this.metadata.items.map(s=>s.symbol).slice(0,10)))}}else console.warn("‚ùå No data returned from fetchMetadataSnapshot")}catch(a){console.warn("‚ùå Failed to refresh metadata:",a)}}getDefaultExchange(e){const a=["AAPL","MSFT","GOOGL","GOOG","AMZN","TSLA","NVDA","META","NFLX","RKLB","ASTS","RIVN","MDB","ONDS","PL","AVAV","CRM","AVGO","LEU","SMR","CRWV","IONQ","PLTR","HIMS"],o=["TSM","ORCL","RDW"];return a.includes(e)?"NASDAQ":o.includes(e)?"NYSE":"NASDAQ"}getIndustryDisplay(e){return this.useDynamicAPI?we.getIndustryDisplay(e):!e||e.confidence<.7?"Unknown Industry":e.industry||e.sector||"Unknown Industry"}getIndustryCategory(e){if(this.useDynamicAPI)return we.getIndustryCategory(e);const a=this.getIndustryDisplay(e);return{"Industrial IoT Solutions":"tech-iot","Satellite Imaging & Analytics":"tech-satellite","Database Software":"tech-software","Enterprise Software":"tech-software",Semiconductors:"tech-hardware","Aerospace & Defense":"industrial-aerospace","Space Infrastructure":"industrial-space","Satellite Communications":"communications","Electric Vehicles":"automotive","Unknown Industry":"unknown"}[a]||"other"}async warmupCache(e){if(this.useDynamicAPI)return await we.warmupCache(e);{console.log(`Warming up static metadata cache for ${e.length} symbols...`);const a=Date.now();await this.refreshMetadata();for(const s of e)await this.getStaticSymbolMetadata(s);const o=Date.now()-a;return console.log(`Static cache warmup completed in ${o}ms`),{duration:o,symbolsProcessed:e.length,mode:"static"}}}clearCache(){this.cache.clear(),this.metadata=null,this.lastFetch=null,this.useDynamicAPI&&we.clearCache()}getCacheStats(){return this.useDynamicAPI?{mode:"dynamic",...we.getCacheStats()}:{mode:"static",totalCached:this.cache.size,lastFetch:this.lastFetch,metadataLoaded:!!this.metadata}}getCurrentMode(){return this.useDynamicAPI?"dynamic":"static"}}const be=new Gc;class Qc{constructor(){this.cache=null,this.loading=!1}async loadMetadata(){var e;if(this.cache)return this.cache;if(this.loading){for(;this.loading;)await new Promise(a=>setTimeout(a,100));return this.cache}this.loading=!0;try{const a=rt.symbolsMetadata();console.log("üîç DirectMetadataLoader fetching from:",a);const o=await fetch(a);if(!o.ok)throw new Error(`HTTP ${o.status}: ${o.statusText}`);const s=await o.json();return this.cache=s,console.log("‚úÖ DirectMetadataLoader loaded successfully:",(e=s.items)==null?void 0:e.length,"items"),this.cache}catch(a){return console.error("‚ùå DirectMetadataLoader failed:",a),null}finally{this.loading=!1}}async getSymbolMetadata(e){const a=await this.loadMetadata();if(!a||!a.items)return{symbol:e,sector:"Unknown",industry:"Unknown Industry",exchange:"NASDAQ",confidence:0,source:"DirectLoader (Failed)"};const o=a.items.find(s=>s.symbol===e);return o?{...o,source:"DirectLoader (Success)"}:{symbol:e,sector:"Unknown",industry:"Unknown Industry",exchange:"NASDAQ",confidence:0,source:"DirectLoader (Not Found)"}}async getBatchMetadata(e){const a=new Map;for(const o of e){const s=await this.getSymbolMetadata(o);a.set(o,s)}return a}}const Xc=new Qc,Kc={name:"StockDetail",components:{FastTradingViewWidget:Gt,LazyTradingViewWidget:wt,MarketRegimeWidget:sr,TradingStrategyWidget:hr,MFIVolumeProfilePanel:al,TradingViewCompanyProfile:dl,TradingViewFundamentalData:vl,TechnicalIndicators:Qt,PerformanceMonitor:Xt,StockNews:Fl,StockDetailSkeleton:ec},data(){return{loading:!0,error:null,metadata:null}},computed:{symbol(){return this.$route.params.symbol||"RKLB"},exchange(){if(this.metadata&&this.metadata.exchange)return{NYQ:"NYSE",NMS:"NASDAQ",NCM:"NASDAQ",NGM:"NASDAQ",ASE:"AMEX",NYSE:"NYSE",NASDAQ:"NASDAQ"}[this.metadata.exchange]||this.metadata.exchange;const n=this.symbol;return["ORCL","TSM","RDW","CRM","PL","LEU","SMR","IONQ","HIMS"].includes(n)?"NYSE":(["ASTS","RIVN","ONDS","AVAV","MDB","RKLB","NVDA","AVGO","AMZN","GOOG","META","NFLX","CRWV","PLTR","TSLA"].includes(n),"NASDAQ")},dailyInsightConfig(){return{lineWidth:2,lineType:0,chartType:"candlesticks",showVolume:!0,fontColor:"rgb(106, 109, 120)",gridLineColor:"rgba(46, 46, 46, 0.06)",volumeUpColor:"rgba(34, 171, 148, 0.5)",volumeDownColor:"rgba(247, 82, 95, 0.5)",backgroundColor:"#ffffff",widgetFontColor:"#0F0F0F",upColor:"#22ab94",downColor:"#f7525f",borderUpColor:"#22ab94",borderDownColor:"#f7525f",wickUpColor:"#22ab94",wickDownColor:"#f7525f",colorTheme:"light",isTransparent:!0,locale:"en",chartOnly:!1,scalePosition:"right",scaleMode:"Normal",fontFamily:"-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif",valuesTracking:"1",changeMode:"price-and-percent",symbols:[[`${this.exchange}:${this.symbol}|6M`]],dateRanges:["6m|1D"],fontSize:"10",headerFontSize:"medium",autosize:!0,width:"100%",height:"100%",noTimeScale:!1,hideDateRanges:!1,showMA:!0,maLength:"5",maLineColor:"#2962FF",maLineWidth:1,hideMarketStatus:!1,hideSymbolLogo:!1}},weeklyInsightConfig(){return{lineWidth:2,lineType:0,chartType:"candlesticks",showVolume:!0,fontColor:"rgb(106, 109, 120)",gridLineColor:"rgba(46, 46, 46, 0.06)",volumeUpColor:"rgba(34, 171, 148, 0.5)",volumeDownColor:"rgba(247, 82, 95, 0.5)",backgroundColor:"#ffffff",widgetFontColor:"#0F0F0F",upColor:"#22ab94",downColor:"#f7525f",borderUpColor:"#22ab94",borderDownColor:"#f7525f",wickUpColor:"#22ab94",wickDownColor:"#f7525f",colorTheme:"light",isTransparent:!0,locale:"en",chartOnly:!1,scalePosition:"right",scaleMode:"Normal",fontFamily:"-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif",valuesTracking:"1",changeMode:"price-and-percent",symbols:[[`${this.exchange}:${this.symbol}|6M`]],dateRanges:["6m|1W"],fontSize:"10",headerFontSize:"medium",autosize:!0,width:"100%",height:"100%",noTimeScale:!1,hideDateRanges:!1,showMA:!0,maLength:"4",maLineColor:"#2962FF",maLineWidth:1,hideMarketStatus:!1,hideSymbolLogo:!1}}},watch:{symbol(){this.scrollToTop(),this.loadMetadata()},$route(){this.scrollToTop()}},mounted(){this.scrollToTop(),be.setUseDynamicAPI(!0),this.loadMetadata(),this.initializePage()},methods:{async initializePage(){try{this.loading=!1}catch(n){this.error=String(n),this.loading=!1}},async refresh(){this.loading=!0,this.error=null,await this.initializePage()},async loadMetadata(){try{this.metadata=await Xc.getSymbolMetadata(this.symbol),console.log(`üìä StockDetail loaded metadata for ${this.symbol}:`,this.metadata)}catch(n){console.warn(`Failed to load metadata for ${this.symbol}:`,n),this.metadata=null}},getSector(){return!this.metadata||this.metadata.confidence<.7?"Unknown":this.metadata.sector||"Unknown"},getIndustry(){return!this.metadata||this.metadata.confidence<.7?"Unknown Industry":this.metadata.industry||this.metadata.sector||"Unknown Industry"},getIndustryCategory(){const n=this.getIndustry();return{"Software - Application":"tech-software","Computer Hardware":"tech-hardware","Communication Equipment":"tech-satellite","Database Software":"tech-software","Enterprise Software":"tech-software",Semiconductors:"tech-hardware","Aerospace & Defense":"industrial-aerospace","Space Infrastructure":"industrial-space","Satellite Communications":"communications","Auto Manufacturers":"automotive","Unknown Industry":"unknown"}[n]||"other"},goBack(){console.log("Navigating back to stock overview"),this.$router.push({name:"stock-overview"}).catch(n=>{console.error("Navigation error:",n)})},scrollToTop(){this.$nextTick(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"}),setTimeout(()=>{window.scrollTo(0,0)},100)})}}},Yc={class:"stock-detail"},Jc={class:"breadcrumb"},Zc={class:"breadcrumb-current"},ed={key:0,class:"loading-with-skeleton"},td={key:1,class:"error"},sd={class:"text-danger"},ad={key:2},nd={class:"stock-header"},id={class:"stock-info-header"},od={class:"symbol-info"},rd={class:"symbol"},ld={class:"symbol-tags"},cd={class:"exchange-tag"},dd={class:"header-actions"},ud={class:"widgets-container"},hd={class:"widget-overview"},gd={class:"widget-technical"},md={class:"symbol-insight-block"},fd={class:"insight-full-widget market-regime"},pd={class:"insight-full-widget trading-strategy"},vd={class:"insight-full-widget mfi-volume-profile"},yd={class:"insight-widgets-container"},wd={class:"insight-widget daily-insight"},Sd={class:"insight-widget weekly-insight"},bd={class:"widget-container"},_d={class:"content-layout"},kd={class:"widget-container"},Cd={class:"widget-container"},Td={class:"widget-container"};function Dd(n,e,a,o,s,i){const r=V("router-link"),c=V("StockDetailSkeleton"),d=V("FastTradingViewWidget"),g=V("MarketRegimeWidget"),f=V("TradingStrategyWidget"),m=V("MFIVolumeProfilePanel"),p=V("LazyTradingViewWidget"),D=V("TechnicalIndicators"),S=V("PerformanceMonitor"),T=V("StockNews"),_=V("TradingViewFundamentalData"),$=V("TradingViewCompanyProfile");return u(),h("div",Yc,[t("nav",Jc,[R(r,{to:"/stock-overview",class:"breadcrumb-link"},{default:Ye(()=>[...e[2]||(e[2]=[A("Stock Overview",-1)])]),_:1}),e[3]||(e[3]=t("span",{class:"breadcrumb-separator"},"‚Ä∫",-1)),t("span",Zc,l(i.symbol)+" Analysis",1)]),s.loading?(u(),h("div",ed,[R(c)])):s.error?(u(),h("div",td,[t("p",sd,l(s.error),1),t("button",{onClick:e[0]||(e[0]=(...I)=>i.refresh&&i.refresh(...I)),class:"btn btn-secondary"},"Retry")])):(u(),h("div",ad,[t("div",nd,[t("div",id,[t("div",od,[t("h3",rd,l(i.symbol),1),t("div",ld,[t("span",cd,l(i.exchange),1),t("span",{class:w(["industry-tag",`industry-${i.getIndustryCategory()}`])},l(i.getIndustry()),3)])]),t("div",dd,[t("button",{onClick:e[1]||(e[1]=(...I)=>i.goBack&&i.goBack(...I)),class:"detail-btn"},[...e[4]||(e[4]=[t("span",{class:"btn-icon"},"‚Üê",-1),A(" Back to Stock Overview ",-1)])])])]),t("div",ud,[t("div",hd,[e[5]||(e[5]=t("div",{class:"widget-header"},[t("h4",null,"Symbol Overview")],-1)),R(d,{"widget-type":"overview",symbol:i.symbol,exchange:i.exchange},null,8,["symbol","exchange"])]),t("div",gd,[e[6]||(e[6]=t("div",{class:"widget-header"},[t("h4",null,"Technical Analysis")],-1)),R(d,{"widget-type":"technical",symbol:i.symbol,exchange:i.exchange,class:"technical-overview-style"},null,8,["symbol","exchange"])])])]),t("div",md,[e[12]||(e[12]=t("div",{class:"insight-header"},[t("h3",null,"Symbol Insight")],-1)),t("div",fd,[e[7]||(e[7]=t("div",{class:"widget-header"},[t("h4",null,"Market Regime")],-1)),R(g,{symbol:i.symbol,exchange:i.exchange,priority:2},null,8,["symbol","exchange"])]),t("div",pd,[e[8]||(e[8]=t("div",{class:"widget-header"},[t("h4",null,"Trading Strategy")],-1)),R(f,{symbol:i.symbol,exchange:i.exchange,priority:3},null,8,["symbol","exchange"])]),t("div",vd,[e[9]||(e[9]=t("div",{class:"widget-header"},[t("h4",null,"MFI Volume Profile")],-1)),R(m,{symbol:i.symbol,exchange:i.exchange,priority:4},null,8,["symbol","exchange"])]),t("div",yd,[t("div",wd,[e[10]||(e[10]=t("div",{class:"widget-header"},[t("h4",null,"Daily Insight (MA5)")],-1)),R(p,{"widget-type":"Daily Insight",config:i.dailyInsightConfig,"script-url":"https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js",height:"550px",priority:5},null,8,["config"])]),t("div",Sd,[e[11]||(e[11]=t("div",{class:"widget-header"},[t("h4",null,"Weekly Insight (MA4)")],-1)),R(p,{"widget-type":"Weekly Insight",config:i.weeklyInsightConfig,"script-url":"https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js",height:"550px",priority:6},null,8,["config"])])])]),t("div",bd,[e[13]||(e[13]=t("div",{class:"widget-header"},[t("h3",null,"Technical Indicators")],-1)),R(D,{symbol:i.symbol,exchange:i.exchange},null,8,["symbol","exchange"])]),R(S),t("div",_d,[t("div",kd,[e[14]||(e[14]=t("div",{class:"widget-header"},[t("h3",null,"Latest News")],-1)),R(T,{symbol:i.symbol},null,8,["symbol"])]),t("div",Cd,[e[15]||(e[15]=t("div",{class:"widget-header"},[t("h3",null,"Fundamental Data")],-1)),R(_,{symbol:i.symbol,exchange:i.exchange},null,8,["symbol","exchange"])]),t("div",Td,[e[16]||(e[16]=t("div",{class:"widget-header"},[t("h3",null,"Company Profile")],-1)),R($,{symbol:i.symbol,exchange:i.exchange,"color-theme":"light","is-transparent":!0},null,8,["symbol","exchange"])])])]))])}const Ad=E(Kc,[["render",Dd],["__scopeId","data-v-2226ee90"]]),Id={name:"TradingViewTopStories",props:{displayMode:{type:String,default:"regular"},feedMode:{type:String,default:"market"},colorTheme:{type:String,default:"light"},isTransparent:{type:Boolean,default:!0},locale:{type:String,default:"en"},market:{type:String,default:"stock"},height:{type:String,default:"600px"}},data(){return{loaded:!1,error:!1,widgetId:`top-stories-${Date.now()}`}},mounted(){this.loadTopStories()},methods:{async loadTopStories(){this.loaded=!1,this.error=!1;try{await this.$nextTick(),this.createTopStories()}catch(n){console.error("Failed to load top stories:",n),this.error=!0}},createTopStories(){const n=this.$refs.container;if(!n)return;n.innerHTML="";const e=document.createElement("div");e.className="tradingview-widget-container",e.style.height="100%",e.style.width="100%";const a=document.createElement("div");a.className="tradingview-widget-container__widget",e.appendChild(a),n.appendChild(e);const o={displayMode:this.displayMode,feedMode:this.feedMode,colorTheme:this.colorTheme,isTransparent:this.isTransparent,locale:this.locale,market:this.market,width:"100%",height:"100%"},s=document.createElement("script");s.type="text/javascript",s.src="https://s3.tradingview.com/external-embedding/embed-widget-timeline.js",s.async=!0,s.innerHTML=JSON.stringify(o),s.onload=()=>{this.loaded=!0,console.log("TradingView Top Stories loaded successfully")},s.onerror=()=>{this.error=!0,console.error("TradingView Top Stories failed to load")},a.appendChild(s),setTimeout(()=>{!this.loaded&&!this.error&&(this.loaded=!0)},8e3)},async retry(){await this.loadTopStories()}}},xd={class:"top-stories-container"},Md=["id"],Nd={key:0,class:"stories-loading"},Pd={key:1,class:"stories-error"};function Ld(n,e,a,o,s,i){return u(),h("div",xd,[e[3]||(e[3]=t("div",{class:"widget-header"},[t("h3",null,"Top Stories")],-1)),t("div",{class:"top-stories-widget",id:s.widgetId,ref:"container"},[!s.loaded&&!s.error?(u(),h("div",Nd,[...e[1]||(e[1]=[t("div",{class:"loading-spinner"},null,-1),t("span",null,"Loading market news...",-1)])])):k("",!0),s.error?(u(),h("div",Pd,[e[2]||(e[2]=t("span",null,"‚ö†Ô∏è Failed to load market news",-1)),t("button",{onClick:e[0]||(e[0]=(...r)=>i.retry&&i.retry(...r)),class:"retry-btn"},"Retry")])):k("",!0)],8,Md)])}const $d=E(Id,[["render",Ld],["__scopeId","data-v-7abef6c6"]]),Rd={name:"TopStoriesSkeleton"},Ed={class:"top-stories-skeleton"},Fd={class:"skeleton-widget-container"},Od={class:"skeleton-stories-area"},Ud={class:"skeleton-story-tags"},Vd={class:"skeleton-config-info"},Wd={class:"skeleton-config-list"};function Bd(n,e,a,o,s,i){return u(),h("div",Ed,[e[5]||(e[5]=t("div",{class:"skeleton-page-header"},[t("div",{class:"skeleton-page-title"}),t("div",{class:"skeleton-page-description"})],-1)),t("div",Fd,[t("div",Od,[(u(),h(F,null,O(10,r=>t("div",{class:"skeleton-story-item",key:r},[e[0]||(e[0]=t("div",{class:"skeleton-story-time"},null,-1)),e[1]||(e[1]=t("div",{class:"skeleton-story-title"},null,-1)),e[2]||(e[2]=t("div",{class:"skeleton-story-content"},null,-1)),t("div",Ud,[(u(),h(F,null,O(3,c=>t("div",{class:"skeleton-story-tag",key:c})),64))])])),64))])]),t("div",Vd,[e[4]||(e[4]=t("div",{class:"skeleton-config-title"},null,-1)),t("div",Wd,[(u(),h(F,null,O(5,r=>t("div",{class:"skeleton-config-item",key:r},[...e[3]||(e[3]=[t("div",{class:"skeleton-config-label"},null,-1),t("div",{class:"skeleton-config-value"},null,-1)])])),64))])])])}const Hd=E(Rd,[["render",Bd],["__scopeId","data-v-4a248288"]]),qd={name:"TopStoriesTest",components:{TradingViewTopStories:$d,TopStoriesSkeleton:Hd},data(){return{loading:!0,error:null}},mounted(){this.initializePage()},methods:{async initializePage(){try{await new Promise(n=>setTimeout(n,800)),this.loading=!1}catch(n){this.error=String(n),this.loading=!1}},async refresh(){this.loading=!0,this.error=null,await this.initializePage()}}},zd={class:"top-stories-test"},jd={key:0,class:"loading-with-skeleton"},Gd={key:1,class:"error"},Qd={class:"text-danger"},Xd={key:2};function Kd(n,e,a,o,s,i){const r=V("TopStoriesSkeleton"),c=V("TradingViewTopStories");return u(),h("div",zd,[e[2]||(e[2]=t("h2",null,"Top Stories Widget Test",-1)),e[3]||(e[3]=t("p",{class:"text-muted mb-3"},"Testing TradingView Top Stories component",-1)),s.loading?(u(),h("div",jd,[R(r)])):s.error?(u(),h("div",Gd,[t("p",Qd,l(s.error),1),t("button",{onClick:e[0]||(e[0]=(...d)=>i.refresh&&i.refresh(...d)),class:"btn btn-secondary"},"Retry")])):(u(),h("div",Xd,[R(c,{"display-mode":"regular","feed-mode":"market","color-theme":"light","is-transparent":!0,locale:"en",market:"stock",height:"650px"}),e[1]||(e[1]=se('<div class="config-info" data-v-e9d9d092><h3 data-v-e9d9d092>Widget Configuration</h3><ul data-v-e9d9d092><li data-v-e9d9d092><strong data-v-e9d9d092>Display Mode:</strong> regular</li><li data-v-e9d9d092><strong data-v-e9d9d092>Feed Mode:</strong> market</li><li data-v-e9d9d092><strong data-v-e9d9d092>Color Theme:</strong> light</li><li data-v-e9d9d092><strong data-v-e9d9d092>Market:</strong> stock</li><li data-v-e9d9d092><strong data-v-e9d9d092>Height:</strong> 650px</li></ul></div>',1))]))])}const Yd=E(qd,[["render",Kd],["__scopeId","data-v-e9d9d092"]]),Jd={name:"StockMarketInsight",props:{colorTheme:{type:String,default:"light"},isTransparent:{type:Boolean,default:!0},locale:{type:String,default:"en"},height:{type:String,default:"1300px"}},data(){return{dailyLoaded:!1,dailyError:!1,weeklyLoaded:!1,weeklyError:!1,dailyWidgetId:`daily-market-${Date.now()}`,weeklyWidgetId:`weekly-market-${Date.now()}`}},mounted(){this.loadWidgets()},methods:{async loadWidgets(){await this.$nextTick(),this.createDailyWidget(),this.createWeeklyWidget()},createDailyWidget(){const n=this.$refs.dailyContainer;if(!n)return;n.innerHTML="";const e=document.createElement("div");e.className="tradingview-widget-container",e.style.height="100%",e.style.width="100%";const a=document.createElement("div");a.className="tradingview-widget-container__widget",e.appendChild(a),n.appendChild(e);const o={lineWidth:2,lineType:0,chartType:"candlesticks",showVolume:!0,fontColor:"#707070",gridLineColor:"rgba(46, 46, 46, 0.06)",volumeUpColor:"rgba(34, 171, 148, 0.5)",volumeDownColor:"rgba(247, 82, 95, 0.5)",backgroundColor:"#ffffff",widgetFontColor:"#0F0F0F",upColor:"#22ab94",downColor:"#f7525f",borderUpColor:"#22ab94",borderDownColor:"#f7525f",wickUpColor:"#22ab94",wickDownColor:"#f7525f",colorTheme:this.colorTheme,isTransparent:this.isTransparent,locale:this.locale,chartOnly:!1,scalePosition:"right",scaleMode:"Normal",fontFamily:"-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif",valuesTracking:"1",changeMode:"price-and-percent",symbols:[["IG:NASDAQ|6M"],["THINKMARKETS:US30|6M"]],dateRanges:["6m|1D"],fontSize:"10",headerFontSize:"medium",autosize:!0,width:"100%",height:"100%",noTimeScale:!1,hideDateRanges:!1,showMA:!0,maLength:"5",maLineColor:"#2962FF",maLineWidth:1,hideMarketStatus:!1,hideSymbolLogo:!1},s=document.createElement("script");s.type="text/javascript",s.src="https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js",s.async=!0,s.innerHTML=JSON.stringify(o),s.onload=()=>{this.dailyLoaded=!0,console.log("Daily Market Widget loaded successfully")},s.onerror=()=>{this.dailyError=!0,console.error("Daily Market Widget failed to load")},a.appendChild(s),setTimeout(()=>{!this.dailyLoaded&&!this.dailyError&&(this.dailyLoaded=!0)},8e3)},createWeeklyWidget(){const n=this.$refs.weeklyContainer;if(!n)return;n.innerHTML="";const e=document.createElement("div");e.className="tradingview-widget-container",e.style.height="100%",e.style.width="100%";const a=document.createElement("div");a.className="tradingview-widget-container__widget",e.appendChild(a),n.appendChild(e);const o={lineWidth:2,lineType:0,chartType:"candlesticks",showVolume:!0,fontColor:"#707070",gridLineColor:"rgba(46, 46, 46, 0.06)",volumeUpColor:"rgba(34, 171, 148, 0.5)",volumeDownColor:"rgba(247, 82, 95, 0.5)",backgroundColor:"#ffffff",widgetFontColor:"#0F0F0F",upColor:"#22ab94",downColor:"#f7525f",borderUpColor:"#22ab94",borderDownColor:"#f7525f",wickUpColor:"#22ab94",wickDownColor:"#f7525f",colorTheme:this.colorTheme,isTransparent:this.isTransparent,locale:this.locale,chartOnly:!1,scalePosition:"right",scaleMode:"Normal",fontFamily:"-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif",valuesTracking:"1",changeMode:"price-and-percent",symbols:[["IG:NASDAQ|6M"],["THINKMARKETS:US30|6M"]],dateRanges:["6m|1W"],fontSize:"10",headerFontSize:"medium",autosize:!0,width:"100%",height:"100%",noTimeScale:!1,hideDateRanges:!1,showMA:!0,maLength:"5",maLineColor:"#2962FF",maLineWidth:1,hideMarketStatus:!1,hideSymbolLogo:!1},s=document.createElement("script");s.type="text/javascript",s.src="https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js",s.async=!0,s.innerHTML=JSON.stringify(o),s.onload=()=>{this.weeklyLoaded=!0,console.log("Weekly Market Widget loaded successfully")},s.onerror=()=>{this.weeklyError=!0,console.error("Weekly Market Widget failed to load")},a.appendChild(s),setTimeout(()=>{!this.weeklyLoaded&&!this.weeklyError&&(this.weeklyLoaded=!0)},8e3)},async retryDaily(){this.dailyLoaded=!1,this.dailyError=!1,await this.$nextTick(),this.createDailyWidget()},async retryWeekly(){this.weeklyLoaded=!1,this.weeklyError=!1,await this.$nextTick(),this.createWeeklyWidget()}}},Zd={class:"stock-market-insight-container"},eu={class:"insight-grid"},tu={class:"insight-section"},su=["id"],au={key:0,class:"widget-loading"},nu={key:1,class:"widget-error"},iu={class:"insight-section"},ou=["id"],ru={key:0,class:"widget-loading"},lu={key:1,class:"widget-error"};function cu(n,e,a,o,s,i){return u(),h("div",Zd,[e[8]||(e[8]=t("div",{class:"widget-header"},[t("h3",null,"Stock Market Insight")],-1)),t("div",eu,[t("div",tu,[e[4]||(e[4]=t("div",{class:"section-header"},[t("h4",null,"Stock Market Daily")],-1)),t("div",{class:"daily-widget",id:s.dailyWidgetId,ref:"dailyContainer"},[!s.dailyLoaded&&!s.dailyError?(u(),h("div",au,[...e[2]||(e[2]=[t("div",{class:"loading-spinner"},null,-1),t("span",null,"Loading daily market data...",-1)])])):k("",!0),s.dailyError?(u(),h("div",nu,[e[3]||(e[3]=t("span",null,"‚ö†Ô∏è Failed to load daily data",-1)),t("button",{onClick:e[0]||(e[0]=(...r)=>i.retryDaily&&i.retryDaily(...r)),class:"retry-btn"},"Retry")])):k("",!0)],8,su)]),t("div",iu,[e[7]||(e[7]=t("div",{class:"section-header"},[t("h4",null,"Stock Market Weekly")],-1)),t("div",{class:"weekly-widget",id:s.weeklyWidgetId,ref:"weeklyContainer"},[!s.weeklyLoaded&&!s.weeklyError?(u(),h("div",ru,[...e[5]||(e[5]=[t("div",{class:"loading-spinner"},null,-1),t("span",null,"Loading weekly market data...",-1)])])):k("",!0),s.weeklyError?(u(),h("div",lu,[e[6]||(e[6]=t("span",null,"‚ö†Ô∏è Failed to load weekly data",-1)),t("button",{onClick:e[1]||(e[1]=(...r)=>i.retryWeekly&&i.retryWeekly(...r)),class:"retry-btn"},"Retry")])):k("",!0)],8,ou)])])])}const du=E(Jd,[["render",cu],["__scopeId","data-v-e5c812bc"]]),uu={name:"StockMarketInsightSkeleton"},hu={class:"stock-market-insight-skeleton"},gu={class:"skeleton-config-info"},mu={class:"skeleton-config-grid"},fu={class:"skeleton-config-section"},pu={class:"skeleton-config-list"},vu={class:"skeleton-config-section"},yu={class:"skeleton-config-list"};function wu(n,e,a,o,s,i){return u(),h("div",hu,[e[5]||(e[5]=se('<div class="skeleton-page-header" data-v-bcaf64ab><div class="skeleton-page-title" data-v-bcaf64ab></div><div class="skeleton-page-description" data-v-bcaf64ab></div></div><div class="skeleton-widget-container large" data-v-bcaf64ab><div class="skeleton-insight-grid" data-v-bcaf64ab><div class="skeleton-insight-section" data-v-bcaf64ab><div class="skeleton-section-header" data-v-bcaf64ab><div class="skeleton-section-title" data-v-bcaf64ab></div></div><div class="skeleton-chart-area" data-v-bcaf64ab><div class="skeleton-chart" data-v-bcaf64ab></div></div></div><div class="skeleton-insight-section" data-v-bcaf64ab><div class="skeleton-section-header" data-v-bcaf64ab><div class="skeleton-section-title" data-v-bcaf64ab></div></div><div class="skeleton-chart-area" data-v-bcaf64ab><div class="skeleton-chart" data-v-bcaf64ab></div></div></div></div></div>',2)),t("div",gu,[e[4]||(e[4]=t("div",{class:"skeleton-config-title"},null,-1)),t("div",mu,[t("div",fu,[e[1]||(e[1]=t("div",{class:"skeleton-config-section-title"},null,-1)),t("div",pu,[(u(),h(F,null,O(5,r=>t("div",{class:"skeleton-config-item",key:r},[...e[0]||(e[0]=[t("div",{class:"skeleton-config-label"},null,-1),t("div",{class:"skeleton-config-value"},null,-1)])])),64))])]),t("div",vu,[e[3]||(e[3]=t("div",{class:"skeleton-config-section-title"},null,-1)),t("div",yu,[(u(),h(F,null,O(5,r=>t("div",{class:"skeleton-config-item",key:r},[...e[2]||(e[2]=[t("div",{class:"skeleton-config-label"},null,-1),t("div",{class:"skeleton-config-value"},null,-1)])])),64))])])])])])}const Su=E(uu,[["render",wu],["__scopeId","data-v-bcaf64ab"]]),bu={name:"StockMarketInsightTest",components:{StockMarketInsight:du,StockMarketInsightSkeleton:Su},data(){return{loading:!0,error:null}},mounted(){this.initializePage()},methods:{async initializePage(){try{await new Promise(n=>setTimeout(n,1e3)),this.loading=!1}catch(n){this.error=String(n),this.loading=!1}},async refresh(){this.loading=!0,this.error=null,await this.initializePage()}}},_u={class:"stock-market-insight-test"},ku={key:0,class:"loading-with-skeleton"},Cu={key:1,class:"error"},Tu={class:"text-danger"},Du={key:2};function Au(n,e,a,o,s,i){const r=V("StockMarketInsightSkeleton"),c=V("StockMarketInsight");return u(),h("div",_u,[e[2]||(e[2]=t("h2",null,"Stock Market Insight Test",-1)),e[3]||(e[3]=t("p",{class:"text-muted mb-3"},"Testing Stock Market Insight component with Daily and Weekly views",-1)),s.loading?(u(),h("div",ku,[R(r)])):s.error?(u(),h("div",Cu,[t("p",Tu,l(s.error),1),t("button",{onClick:e[0]||(e[0]=(...d)=>i.refresh&&i.refresh(...d)),class:"btn btn-secondary"},"Retry")])):(u(),h("div",Du,[R(c,{"color-theme":"light","is-transparent":!0,locale:"en",height:"1300px"}),e[1]||(e[1]=se('<div class="config-info" data-v-d131536f><h3 data-v-d131536f>Widget Configuration</h3><div class="config-grid" data-v-d131536f><div class="config-section" data-v-d131536f><h4 data-v-d131536f>Daily Configuration</h4><ul data-v-d131536f><li data-v-d131536f><strong data-v-d131536f>Symbols:</strong> NASDAQ, US30</li><li data-v-d131536f><strong data-v-d131536f>Date Range:</strong> 6 months, 1 Day intervals</li><li data-v-d131536f><strong data-v-d131536f>Chart Type:</strong> Candlesticks</li><li data-v-d131536f><strong data-v-d131536f>Moving Average:</strong> 5-period</li><li data-v-d131536f><strong data-v-d131536f>Volume:</strong> Enabled</li></ul></div><div class="config-section" data-v-d131536f><h4 data-v-d131536f>Weekly Configuration</h4><ul data-v-d131536f><li data-v-d131536f><strong data-v-d131536f>Symbols:</strong> NASDAQ, US30</li><li data-v-d131536f><strong data-v-d131536f>Date Range:</strong> 6 months, 1 Week intervals</li><li data-v-d131536f><strong data-v-d131536f>Chart Type:</strong> Candlesticks</li><li data-v-d131536f><strong data-v-d131536f>Moving Average:</strong> 5-period</li><li data-v-d131536f><strong data-v-d131536f>Volume:</strong> Enabled</li></ul></div></div></div>',1))]))])}const Iu=E(bu,[["render",Au],["__scopeId","data-v-d131536f"]]),xu={name:"YahooFinanceTest",data(){return{testSymbol:"AAPL",loading:!1,error:null,testData:null,cacheStatus:null,presetSymbols:["AAPL","TSLA","MSFT","GOOGL","ONDS","RDW"]}},methods:{async loadTestData(){if(this.testSymbol){this.loading=!0,this.error=null,this.testData=null;try{console.log(`Testing Yahoo Finance API for ${this.testSymbol}...`),this.testData=await ie.getTechnicalIndicators(this.testSymbol),this.testData.error&&(this.error=this.testData.error)}catch(n){this.error=n.message,console.error("Test failed:",n)}finally{this.loading=!1}}},getSignalClass(n){if(!n)return"neutral";const e=["BUY","OVERSOLD","STRONG_TREND"],a=["SELL","OVERBOUGHT"];return e.includes(n)?"bullish":a.includes(n)?"bearish":"neutral"},formatDate(n){return n?new Date(n).toLocaleString("zh-TW"):"N/A"},async loadCacheStatus(){this.cacheStatus=ie.getCacheStats()},clearCache(){ie.clearCache(),ie.clearDailyCache(),this.cacheStatus=null,alert("ÊâÄÊúâÁ∑©Â≠òÂ∑≤Ê∏ÖÈô§ (API Á∑©Â≠ò + ÊØèÊó•Á∑©Â≠ò)")}},mounted(){this.loadTestData()}},Mu={class:"yahoo-finance-test"},Nu={class:"test-controls"},Pu={class:"symbol-input"},Lu=["disabled"],$u={class:"preset-symbols"},Ru=["onClick","disabled"],Eu={key:0,class:"loading-section"},Fu={key:1,class:"error-section"},Ou={key:2,class:"results-section"},Uu={class:"indicators-grid"},Vu={class:"indicator-section"},Wu={class:"ma-grid"},Bu={class:"indicator-card compact"},Hu={class:"indicator-details"},qu={class:"indicator-card compact"},zu={class:"indicator-details"},ju={class:"indicator-card compact"},Gu={class:"indicator-details"},Qu={class:"indicator-card compact"},Xu={class:"indicator-details"},Ku={class:"additional-info"},Yu={class:"indicator-section"},Ju={class:"ichimoku-grid"},Zu={class:"indicator-card compact"},eh={class:"indicator-details"},th={class:"additional-info"},sh={class:"indicator-card compact"},ah={class:"indicator-details"},nh={class:"additional-info"},ih={class:"indicator-card compact"},oh={class:"indicator-details"},rh={class:"additional-info"},lh={class:"indicator-section"},ch={class:"vwma-grid"},dh={class:"indicator-card"},uh={class:"indicator-details"},hh={class:"additional-info"},gh={class:"indicator-section"},mh={class:"technical-grid"},fh={class:"indicator-card"},ph={class:"indicator-details"},vh={key:0,class:"rsi-bar"},yh={class:"indicator-card"},wh={class:"indicator-details"},Sh={class:"additional-info"},bh={class:"indicator-card"},_h={class:"indicator-details"},kh={class:"additional-info"},Ch={class:"metadata"},Th={key:0},Dh={key:1},Ah={key:2,class:"error-text"},Ih={class:"cache-section"},xh={key:0,class:"cache-info"};function Mh(n,e,a,o,s,i){var r,c,d,g,f,m,p,D,S,T,_,$,I,N,y,B,C,M,v,b,L,J,ee,te,le,ce,de,ge,oe,q,me,fe,pe,ve,ye,X,Ie,xe,Me,Ne,Pe,Le,$e,Re,Ee,Fe,Oe,Ue,Ve,We,Be,He,qe,ze,je,Ge,Qe,Xe,Ke;return u(),h("div",Mu,[e[32]||(e[32]=t("div",{class:"test-header"},[t("h2",null,"Yahoo Finance API Ê∏¨Ë©¶"),t("p",null,"Ê∏¨Ë©¶ Yahoo Finance API ÁöÑÊäÄË°ìÊåáÊ®ôÊï∏ÊìöÁç≤ÂèñÂäüËÉΩ")],-1)),t("div",Nu,[t("div",Pu,[e[5]||(e[5]=t("label",{for:"symbol"},"ËÇ°Á•®‰ª£Ëôü:",-1)),H(t("input",{id:"symbol","onUpdate:modelValue":e[0]||(e[0]=Z=>s.testSymbol=Z),type:"text",placeholder:"‰æãÂ¶Ç: AAPL, TSLA, ONDS",onKeyup:e[1]||(e[1]=Je(Z=>s.testSymbol&&i.loadTestData(),["enter"]))},null,544),[[he,s.testSymbol]]),t("button",{onClick:e[2]||(e[2]=Z=>i.loadTestData()),disabled:!s.testSymbol||s.loading,class:"test-btn"},l(s.loading?"ËºâÂÖ•‰∏≠...":"Ê∏¨Ë©¶"),9,Lu)]),t("div",$u,[e[6]||(e[6]=t("span",null,"Âø´ÈÄüÊ∏¨Ë©¶:",-1)),(u(!0),h(F,null,O(s.presetSymbols,Z=>(u(),h("button",{key:Z,onClick:lt=>{s.testSymbol=Z,i.loadTestData()},disabled:s.loading,class:"preset-btn"},l(Z),9,Ru))),128))])]),s.loading?(u(),h("div",Eu,[e[7]||(e[7]=t("div",{class:"loading-spinner"},null,-1)),t("p",null,"Ê≠£Âú®Âæû Yahoo Finance Áç≤Âèñ "+l(s.testSymbol)+" ÁöÑÊäÄË°ìÊåáÊ®ôÊï∏Êìö...",1)])):k("",!0),s.error?(u(),h("div",Fu,[e[8]||(e[8]=t("h3",null,"‚ùå ÈåØË™§",-1)),t("p",null,l(s.error),1)])):k("",!0),s.testData&&!s.loading?(u(),h("div",Ou,[t("h3",null,"‚úÖ "+l(s.testSymbol)+" ÊäÄË°ìÊåáÊ®ôÁµêÊûú",1),t("div",Uu,[t("div",Vu,[e[13]||(e[13]=t("h3",null,"ÁßªÂãïÂπ≥ÂùáÁ∑ö (Moving Averages)",-1)),t("div",Wu,[t("div",Bu,[e[9]||(e[9]=t("h4",null,"MA5 / SMA5",-1)),t("div",Hu,[t("div",{class:w(["main-value",i.getSignalClass((r=s.testData.ma5)==null?void 0:r.signal)])},l(((c=s.testData.ma5)==null?void 0:c.value)||"N/A"),3),t("div",{class:w(["signal-badge",i.getSignalClass((d=s.testData.ma5)==null?void 0:d.signal)])},l(((g=s.testData.ma5)==null?void 0:g.signal)||"N/A"),3)])]),t("div",qu,[e[10]||(e[10]=t("h4",null,"MA10 / SMA10",-1)),t("div",zu,[t("div",{class:w(["main-value",i.getSignalClass((f=s.testData.ma10)==null?void 0:f.signal)])},l(((m=s.testData.ma10)==null?void 0:m.value)||"N/A"),3),t("div",{class:w(["signal-badge",i.getSignalClass((p=s.testData.ma10)==null?void 0:p.signal)])},l(((D=s.testData.ma10)==null?void 0:D.signal)||"N/A"),3)])]),t("div",ju,[e[11]||(e[11]=t("h4",null,"MA30 / SMA30",-1)),t("div",Gu,[t("div",{class:w(["main-value",i.getSignalClass((S=s.testData.ma30)==null?void 0:S.signal)])},l(((T=s.testData.ma30)==null?void 0:T.value)||"N/A"),3),t("div",{class:w(["signal-badge",i.getSignalClass((_=s.testData.ma30)==null?void 0:_.signal)])},l((($=s.testData.ma30)==null?void 0:$.signal)||"N/A"),3)])]),t("div",Qu,[e[12]||(e[12]=t("h4",null,"SMA50",-1)),t("div",Xu,[t("div",{class:w(["main-value",i.getSignalClass((I=s.testData.sma50)==null?void 0:I.signal)])},l(((N=s.testData.sma50)==null?void 0:N.value)||"N/A"),3),t("div",{class:w(["signal-badge",i.getSignalClass((y=s.testData.sma50)==null?void 0:y.signal)])},l(((B=s.testData.sma50)==null?void 0:B.signal)||"N/A"),3),t("div",Ku,[t("small",null,"Áï∂ÂâçÂÉπÊ†º: $"+l(((C=s.testData.sma50)==null?void 0:C.currentPrice)||"N/A"),1)])])])])]),t("div",Yu,[e[17]||(e[17]=t("h3",null,"‰∏ÄÁõÆÂùáË°°Ë°® (Ichimoku Cloud)",-1)),t("div",Ju,[t("div",Zu,[e[14]||(e[14]=t("h4",null,"ËΩâÊèõÁ∑ö (9)",-1)),t("div",eh,[t("div",{class:w(["main-value",i.getSignalClass((M=s.testData.ichimokuConversionLine)==null?void 0:M.signal)])},l(((v=s.testData.ichimokuConversionLine)==null?void 0:v.value)||"N/A"),3),t("div",{class:w(["signal-badge",i.getSignalClass((b=s.testData.ichimokuConversionLine)==null?void 0:b.signal)])},l(((L=s.testData.ichimokuConversionLine)==null?void 0:L.signal)||"N/A"),3),t("div",th,[t("small",null,"ÊúÄÈ´ò: "+l(((J=s.testData.ichimokuConversionLine)==null?void 0:J.highestHigh)||"N/A"),1),t("small",null,"ÊúÄ‰Ωé: "+l(((ee=s.testData.ichimokuConversionLine)==null?void 0:ee.lowestLow)||"N/A"),1)])])]),t("div",sh,[e[15]||(e[15]=t("h4",null,"Âü∫Ê∫ñÁ∑ö (26)",-1)),t("div",ah,[t("div",{class:w(["main-value",i.getSignalClass((te=s.testData.ichimokuBaseLine)==null?void 0:te.signal)])},l(((le=s.testData.ichimokuBaseLine)==null?void 0:le.value)||"N/A"),3),t("div",{class:w(["signal-badge",i.getSignalClass((ce=s.testData.ichimokuBaseLine)==null?void 0:ce.signal)])},l(((de=s.testData.ichimokuBaseLine)==null?void 0:de.signal)||"N/A"),3),t("div",nh,[t("small",null,"ÊúÄÈ´ò: "+l(((ge=s.testData.ichimokuBaseLine)==null?void 0:ge.highestHigh)||"N/A"),1),t("small",null,"ÊúÄ‰Ωé: "+l(((oe=s.testData.ichimokuBaseLine)==null?void 0:oe.lowestLow)||"N/A"),1)])])]),t("div",ih,[e[16]||(e[16]=t("h4",null,"ÈÅ≤Ë°åÁ∑ö (26)",-1)),t("div",oh,[t("div",{class:w(["main-value",i.getSignalClass((q=s.testData.ichimokuLaggingSpan)==null?void 0:q.signal)])},l(((me=s.testData.ichimokuLaggingSpan)==null?void 0:me.value)||"N/A"),3),t("div",{class:w(["signal-badge",i.getSignalClass((fe=s.testData.ichimokuLaggingSpan)==null?void 0:fe.signal)])},l(((pe=s.testData.ichimokuLaggingSpan)==null?void 0:pe.signal)||"N/A"),3),t("div",rh,[t("small",null,"ÂèÉËÄÉÂÉπ: "+l(((ve=s.testData.ichimokuLaggingSpan)==null?void 0:ve.laggingReference)||"N/A"),1)])])])])]),t("div",lh,[e[19]||(e[19]=t("h3",null,"Êàê‰∫§ÈáèÂä†Ê¨äÁßªÂãïÂπ≥ÂùáÁ∑ö (VWMA)",-1)),t("div",ch,[t("div",dh,[e[18]||(e[18]=t("h4",null,"VWMA (20)",-1)),t("div",uh,[t("div",{class:w(["main-value",i.getSignalClass((ye=s.testData.vwma20)==null?void 0:ye.signal)])},l(((X=s.testData.vwma20)==null?void 0:X.value)||"N/A"),3),t("div",{class:w(["signal-badge",i.getSignalClass((Ie=s.testData.vwma20)==null?void 0:Ie.signal)])},l(((xe=s.testData.vwma20)==null?void 0:xe.signal)||"N/A"),3),t("div",hh,[t("small",null,"Áï∂ÂâçÂÉπÊ†º: $"+l(((Me=s.testData.vwma20)==null?void 0:Me.currentPrice)||"N/A"),1),t("small",null,"Á∏ΩÊàê‰∫§Èáè: "+l(((Ne=s.testData.vwma20)==null?void 0:Ne.totalVolume)||"N/A"),1)])])])])]),t("div",gh,[e[23]||(e[23]=t("h3",null,"ÊäÄË°ìÊåáÊ®ô (Technical Indicators)",-1)),t("div",mh,[t("div",fh,[e[20]||(e[20]=t("h4",null,"Relative Strength Index (14)",-1)),t("div",ph,[t("div",{class:w(["main-value",i.getSignalClass((Pe=s.testData.rsi14)==null?void 0:Pe.signal)])},l(((Le=s.testData.rsi14)==null?void 0:Le.value)||"N/A"),3),t("div",{class:w(["signal-badge",i.getSignalClass(($e=s.testData.rsi14)==null?void 0:$e.signal)])},l(((Re=s.testData.rsi14)==null?void 0:Re.signal)||"N/A"),3),(Ee=s.testData.rsi14)!=null&&Ee.value?(u(),h("div",vh,[t("div",{class:"rsi-fill",style:z({width:s.testData.rsi14.value+"%"})},null,4)])):k("",!0)])]),t("div",yh,[e[21]||(e[21]=t("h4",null,"Average Directional Index (14)",-1)),t("div",wh,[t("div",{class:w(["main-value",i.getSignalClass((Fe=s.testData.adx14)==null?void 0:Fe.signal)])},l(((Oe=s.testData.adx14)==null?void 0:Oe.value)||"N/A"),3),t("div",{class:w(["signal-badge",i.getSignalClass((Ue=s.testData.adx14)==null?void 0:Ue.signal)])},l(((Ve=s.testData.adx14)==null?void 0:Ve.signal)||"N/A"),3),t("div",Sh,[t("small",null,"+DI: "+l(((We=s.testData.adx14)==null?void 0:We.plusDI)||"N/A"),1),t("small",null,"-DI: "+l(((Be=s.testData.adx14)==null?void 0:Be.minusDI)||"N/A"),1)])])]),t("div",bh,[e[22]||(e[22]=t("h4",null,"MACD Level (12, 26)",-1)),t("div",_h,[t("div",{class:w(["main-value",i.getSignalClass((He=s.testData.macd)==null?void 0:He.signal)])},l(((qe=s.testData.macd)==null?void 0:qe.value)||"N/A"),3),t("div",{class:w(["signal-badge",i.getSignalClass((ze=s.testData.macd)==null?void 0:ze.signal)])},l(((je=s.testData.macd)==null?void 0:je.signal)||"N/A"),3),t("div",kh,[t("small",null,"‰ø°ËôüÁ∑ö: "+l(((Ge=s.testData.macd)==null?void 0:Ge.signalLine)||"N/A"),1),t("small",null,"Êü±ÁãÄÂúñ: "+l(((Qe=s.testData.macd)==null?void 0:Qe.histogram)||"N/A"),1),t("small",null,"EMA12: "+l(((Xe=s.testData.macd)==null?void 0:Xe.ema12)||"N/A"),1),t("small",null,"EMA26: "+l(((Ke=s.testData.macd)==null?void 0:Ke.ema26)||"N/A"),1)])])])])])]),t("div",Ch,[t("p",null,[e[24]||(e[24]=t("strong",null,"ÊúÄÂæåÊõ¥Êñ∞:",-1)),A(" "+l(i.formatDate(s.testData.lastUpdated)),1)]),t("p",null,[e[25]||(e[25]=t("strong",null,"Êï∏Êìö‰æÜÊ∫ê:",-1)),A(" "+l(s.testData.source||"Yahoo Finance"),1)]),s.testData.proxy?(u(),h("p",Th,[e[26]||(e[26]=t("strong",null,"‰ª£ÁêÜÊúçÂãô:",-1)),A(" "+l(s.testData.proxy),1)])):k("",!0),s.testData.dataPoints?(u(),h("p",Dh,[e[27]||(e[27]=t("strong",null,"Êï∏ÊìöÈªûÊï∏Èáè:",-1)),A(" "+l(s.testData.dataPoints),1)])):k("",!0),s.testData.error?(u(),h("p",Ah,[e[28]||(e[28]=t("strong",null,"Ê≥®ÊÑè:",-1)),A(" "+l(s.testData.error),1)])):k("",!0)])])):k("",!0),t("div",Ih,[e[31]||(e[31]=t("h3",null,"Á∑©Â≠òÁãÄÊÖã",-1)),t("button",{onClick:e[3]||(e[3]=Z=>i.loadCacheStatus()),class:"cache-btn"},"Ê™¢Êü•Á∑©Â≠ò"),t("button",{onClick:e[4]||(e[4]=Z=>i.clearCache()),class:"cache-btn"},"Ê∏ÖÈô§ÊâÄÊúâÁ∑©Â≠ò"),s.cacheStatus?(u(),h("div",xh,[e[29]||(e[29]=t("h4",null,"API Ë´ãÊ±ÇÁ∑©Â≠ò (5ÂàÜÈêò)",-1)),t("pre",null,l(JSON.stringify(s.cacheStatus.apiCache,null,2)),1),e[30]||(e[30]=t("h4",null,"ÊØèÊó•ÊäÄË°ìÊåáÊ®ôÁ∑©Â≠ò (24Â∞èÊôÇ)",-1)),t("pre",null,l(JSON.stringify(s.cacheStatus.dailyCache,null,2)),1)])):k("",!0)])])}const Nh=E(xu,[["render",Mh],["__scopeId","data-v-09d65e6d"]]),Ph={name:"TechnicalIndicatorsValidation",data(){return{testSymbol:"AAPL",loading:!1,ourData:null,tradingViewWidget:null}},methods:{async loadData(){if(this.testSymbol){this.loading=!0,this.ourData=null;try{ie.setMockMode(!1),this.ourData=await ie.getTechnicalIndicators(this.testSymbol),this.loadTradingViewWidget()}catch(n){console.error("Failed to load data:",n)}finally{this.loading=!1}}},loadTradingViewWidget(){if(this.tradingViewWidget){const n=document.getElementById(`tradingview-widget-${this.testSymbol}`);n&&(n.innerHTML="")}setTimeout(()=>{const n=document.createElement("script");n.type="text/javascript",n.src="https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js",n.async=!0,n.innerHTML=JSON.stringify({interval:"1D",width:"100%",height:"400",isTransparent:!1,symbol:`NASDAQ:${this.testSymbol}`,showIntervalTabs:!0,locale:"en",colorTheme:"light"});const e=document.getElementById(`tradingview-widget-${this.testSymbol}`);e&&e.appendChild(n)},100)},getSignalClass(n){if(!n)return"neutral";const e=["BUY","OVERSOLD"],a=["SELL","OVERBOUGHT"];return e.includes(n)?"bullish":a.includes(n)?"bearish":"neutral"}},mounted(){this.loadData()}},Lh={class:"validation-page"},$h={class:"validation-controls"},Rh={class:"symbol-input"},Eh=["disabled"],Fh={key:0,class:"loading-section"},Oh={key:1,class:"comparison-section"},Uh={class:"comparison-grid"},Vh={class:"our-results"},Wh={class:"indicator-list"},Bh={class:"indicator-item"},Hh={class:"indicator-item"},qh={class:"indicator-item"},zh={class:"debug-info"},jh={class:"tradingview-results"},Gh={class:"tradingview-widget-container"},Qh=["id"],Xh={class:"detailed-comparison"},Kh={class:"comparison-table"};function Yh(n,e,a,o,s,i){var r,c,d,g,f,m,p,D,S,T,_,$,I,N,y,B,C,M,v;return u(),h("div",Lh,[e[26]||(e[26]=t("div",{class:"validation-header"},[t("h2",null,"ÊäÄË°ìÊåáÊ®ôÈ©óË≠â"),t("p",null,"Â∞çÊØîÊàëÂÄëÁöÑË®àÁÆóÁµêÊûúËàá TradingView ÁöÑÊï∏Êìö")],-1)),t("div",$h,[t("div",Rh,[e[3]||(e[3]=t("label",null,"ËÇ°Á•®‰ª£Ëôü:",-1)),H(t("input",{"onUpdate:modelValue":e[0]||(e[0]=b=>s.testSymbol=b),type:"text",placeholder:"‰æãÂ¶Ç: AAPL",onKeyup:e[1]||(e[1]=Je(b=>i.loadData(),["enter"]))},null,544),[[he,s.testSymbol]]),t("button",{onClick:e[2]||(e[2]=b=>i.loadData()),disabled:s.loading},l(s.loading?"ËºâÂÖ•‰∏≠...":"ËºâÂÖ•Êï∏Êìö"),9,Eh)])]),s.loading?(u(),h("div",Fh,[...e[4]||(e[4]=[t("div",{class:"loading-spinner"},null,-1),t("p",null,"Ê≠£Âú®ËºâÂÖ•Êï∏Êìö...",-1)])])):k("",!0),s.ourData&&!s.loading?(u(),h("div",Oh,[t("h3",null,l(s.testSymbol)+" ÊäÄË°ìÊåáÊ®ôÂ∞çÊØî",1),t("div",Uh,[t("div",Vh,[e[13]||(e[13]=t("h4",null,"ÊàëÂÄëÁöÑË®àÁÆóÁµêÊûú",-1)),t("div",Wh,[t("div",Bh,[e[5]||(e[5]=t("strong",null,"SMA(50):",-1)),A(" "+l(((r=s.ourData.sma50)==null?void 0:r.value)||"N/A")+" ",1),t("span",{class:w(["signal",i.getSignalClass((c=s.ourData.sma50)==null?void 0:c.signal)])},l((d=s.ourData.sma50)==null?void 0:d.signal),3)]),t("div",Hh,[e[6]||(e[6]=t("strong",null,"RSI(14):",-1)),A(" "+l(((g=s.ourData.rsi14)==null?void 0:g.value)||"N/A")+" ",1),t("span",{class:w(["signal",i.getSignalClass((f=s.ourData.rsi14)==null?void 0:f.signal)])},l((m=s.ourData.rsi14)==null?void 0:m.signal),3)]),t("div",qh,[e[7]||(e[7]=t("strong",null,"MACD:",-1)),A(" "+l(((p=s.ourData.macd)==null?void 0:p.value)||"N/A")+" ",1),t("span",{class:w(["signal",i.getSignalClass((D=s.ourData.macd)==null?void 0:D.signal)])},l((S=s.ourData.macd)==null?void 0:S.signal),3)])]),t("div",zh,[e[12]||(e[12]=t("h5",null,"Ë™øË©¶‰ø°ÊÅØ",-1)),t("p",null,[e[8]||(e[8]=t("strong",null,"Êï∏ÊìöÈªû:",-1)),A(" "+l(s.ourData.dataPoints),1)]),t("p",null,[e[9]||(e[9]=t("strong",null,"ÂÉπÊ†ºÁØÑÂúç:",-1)),A(" $"+l((T=s.ourData.priceRange)==null?void 0:T.min)+" - $"+l((_=s.ourData.priceRange)==null?void 0:_.max),1)]),t("p",null,[e[10]||(e[10]=t("strong",null,"ÊúÄÊñ∞ÂÉπÊ†º:",-1)),A(" $"+l(($=s.ourData.priceRange)==null?void 0:$.latest),1)]),t("p",null,[e[11]||(e[11]=t("strong",null,"Áï∂ÂâçÂÉπÊ†º:",-1)),A(" $"+l((I=s.ourData.sma50)==null?void 0:I.currentPrice),1)])])]),t("div",jh,[e[14]||(e[14]=t("h4",null,"TradingView ÊäÄË°ìÂàÜÊûê",-1)),t("div",Gh,[t("div",{class:"tradingview-widget",id:`tradingview-widget-${s.testSymbol}`},null,8,Qh)])])]),t("div",Xh,[e[25]||(e[25]=t("h4",null,"Ë©≥Á¥∞Êï∏ÊìöÂ∞çÊØî",-1)),t("div",Kh,[t("table",null,[e[24]||(e[24]=t("thead",null,[t("tr",null,[t("th",null,"ÊåáÊ®ô"),t("th",null,"ÊàëÂÄëÁöÑÁµêÊûú"),t("th",null,"TradingView"),t("th",null,"Â∑ÆÁï∞"),t("th",null,"ÁãÄÊÖã")])],-1)),t("tbody",null,[t("tr",null,[e[15]||(e[15]=t("td",null,"SMA(50)",-1)),t("td",null,"$"+l(((N=s.ourData.sma50)==null?void 0:N.value)||"N/A"),1),e[16]||(e[16]=t("td",null,"Ë´ãÊü•ÁúãÂè≥ÂÅ¥ Widget",-1)),e[17]||(e[17]=t("td",null,"-",-1)),t("td",null,l((y=s.ourData.sma50)==null?void 0:y.signal),1)]),t("tr",null,[e[18]||(e[18]=t("td",null,"RSI(14)",-1)),t("td",null,l(((B=s.ourData.rsi14)==null?void 0:B.value)||"N/A"),1),e[19]||(e[19]=t("td",null,"Ë´ãÊü•ÁúãÂè≥ÂÅ¥ Widget",-1)),e[20]||(e[20]=t("td",null,"-",-1)),t("td",null,l((C=s.ourData.rsi14)==null?void 0:C.signal),1)]),t("tr",null,[e[21]||(e[21]=t("td",null,"MACD",-1)),t("td",null,l(((M=s.ourData.macd)==null?void 0:M.value)||"N/A"),1),e[22]||(e[22]=t("td",null,"Ë´ãÊü•ÁúãÂè≥ÂÅ¥ Widget",-1)),e[23]||(e[23]=t("td",null,"-",-1)),t("td",null,l((v=s.ourData.macd)==null?void 0:v.signal),1)])])])])])])):k("",!0)])}const Jh=E(Ph,[["render",Yh],["__scopeId","data-v-933bb253"]]),Zh={name:"MetadataServiceTest",data(){return{useDynamicAPI:!0,loading:!1,loadingMessage:"",error:null,successMessage:null,testSymbol:"AAPL",testResults:[],comparisonResults:[],cacheStats:null,testSymbols:["AAPL","MSFT","GOOGL","TSLA","NVDA","META","AMZN","NFLX","ASTS","RIVN"]}},async mounted(){await this.updateCacheStats()},methods:{async switchMode(){try{be.setUseDynamicAPI(this.useDynamicAPI),await this.updateCacheStats(),this.successMessage=`Â∑≤ÂàáÊèõÂà∞${this.useDynamicAPI?"ÂãïÊÖã API":"ÈùúÊÖãÊñá‰ª∂"}Ê®°Âºè`,setTimeout(()=>{this.successMessage=null},3e3)}catch(n){this.error=`ÂàáÊèõÊ®°ÂºèÂ§±Êïó: ${n.message}`,setTimeout(()=>{this.error=null},5e3)}},async testSingleSymbol(){if(!this.testSymbol.trim()){this.error="Ë´ãËº∏ÂÖ•ËÇ°Á•®‰ª£Á¢º",setTimeout(()=>{this.error=null},3e3);return}this.loading=!0,this.loadingMessage=`Ê≠£Âú®Áç≤Âèñ ${this.testSymbol} ÁöÑÂÖÉÊï∏Êìö...`,this.error=null;try{const n=Date.now(),e=await be.getSymbolMetadata(this.testSymbol.toUpperCase()),a=Date.now()-n,o={...e,duration:a,timestamp:new Date().toISOString()};this.testResults=[o,...this.testResults.filter(s=>s.symbol!==o.symbol)],this.successMessage=`ÊàêÂäüÁç≤Âèñ ${o.symbol} ÁöÑÂÖÉÊï∏Êìö (${a}ms)`,setTimeout(()=>{this.successMessage=null},3e3),await this.updateCacheStats()}catch(n){this.error=`Áç≤ÂèñÂÖÉÊï∏ÊìöÂ§±Êïó: ${n.message}`,setTimeout(()=>{this.error=null},5e3)}finally{this.loading=!1,this.loadingMessage=""}},async testBatchSymbols(){this.loading=!0,this.loadingMessage=`Ê≠£Âú®ÊâπÈáèÁç≤Âèñ ${this.testSymbols.length} ÂÄãËÇ°Á•®ÁöÑÂÖÉÊï∏Êìö...`,this.error=null;try{const n=Date.now(),e=await be.getBatchMetadata(this.testSymbols),a=Date.now()-n,o=[];for(const[s,i]of e)o.push({...i,duration:a/e.size,timestamp:new Date().toISOString()});this.testResults=o,this.successMessage=`ÊàêÂäüÊâπÈáèÁç≤Âèñ ${o.length} ÂÄãËÇ°Á•®ÁöÑÂÖÉÊï∏Êìö (${a}ms)`,setTimeout(()=>{this.successMessage=null},3e3),await this.updateCacheStats()}catch(n){this.error=`ÊâπÈáèÁç≤ÂèñÂ§±Êïó: ${n.message}`,setTimeout(()=>{this.error=null},5e3)}finally{this.loading=!1,this.loadingMessage=""}},async clearCache(){this.loading=!0,this.loadingMessage="Ê≠£Âú®Ê∏ÖÈô§Á∑©Â≠ò...";try{be.clearCache(),await this.updateCacheStats(),this.successMessage="Á∑©Â≠òÂ∑≤Ê∏ÖÈô§",setTimeout(()=>{this.successMessage=null},3e3)}catch(n){this.error=`Ê∏ÖÈô§Á∑©Â≠òÂ§±Êïó: ${n.message}`,setTimeout(()=>{this.error=null},5e3)}finally{this.loading=!1,this.loadingMessage=""}},async warmupCache(){this.loading=!0,this.loadingMessage="Ê≠£Âú®È†êÁÜ±Á∑©Â≠ò...";try{const n=await be.warmupCache(this.testSymbols);await this.updateCacheStats(),this.successMessage=`Á∑©Â≠òÈ†êÁÜ±ÂÆåÊàê: ${n.symbolsProcessed} ÂÄãËÇ°Á•®, ${n.duration}ms`,setTimeout(()=>{this.successMessage=null},3e3)}catch(n){this.error=`È†êÁÜ±Á∑©Â≠òÂ§±Êïó: ${n.message}`,setTimeout(()=>{this.error=null},5e3)}finally{this.loading=!1,this.loadingMessage=""}},async updateCacheStats(){try{this.cacheStats=be.getCacheStats()}catch(n){console.warn("Failed to get cache stats:",n)}},getResultCardClass(n){return n.confidence>=.9?"high-confidence":n.confidence>=.7?"medium-confidence":n.confidence>=.5?"low-confidence":"no-confidence"},getConfidenceBadgeClass(n){return n>=.9?"high":n>=.7?"medium":n>=.5?"low":"none"},formatTimestamp(n){return n?new Date(n).toLocaleString("zh-TW"):"N/A"}}},eg={class:"metadata-test-container"},tg={class:"control-panel"},sg={class:"mode-selector"},ag={class:"test-controls"},ng=["disabled"],ig=["disabled"],og=["disabled"],rg=["disabled"],lg={class:"symbol-input"},cg={key:0,class:"status-panel"},dg={key:0,class:"loading"},ug={key:1,class:"error"},hg={key:2,class:"success"},gg={key:1,class:"cache-stats"},mg={class:"stats-grid"},fg={class:"stat-item"},pg={class:"stat-item"},vg={key:0,class:"stat-item"},yg={key:2,class:"results-section"},wg={class:"results-grid"},Sg={class:"result-header"},bg={class:"result-content"},_g={class:"metadata-row"},kg={class:"metadata-row"},Cg={class:"metadata-row"},Tg={key:0,class:"metadata-row"},Dg={key:1,class:"metadata-row"},Ag={class:"result-footer"},Ig={class:"source-info"},xg={class:"timestamp"},Mg={key:3,class:"comparison-section"},Ng={class:"comparison-table"};function Pg(n,e,a,o,s,i){return u(),h("div",eg,[e[25]||(e[25]=t("div",{class:"header"},[t("h1",null,"ÂÖÉÊï∏ÊìöÊúçÂãôÊ∏¨Ë©¶"),t("p",null,"Ê∏¨Ë©¶ÂãïÊÖã Yahoo Finance API vs ÈùúÊÖãÊñá‰ª∂ÁöÑ sector/industry Êï∏Êìö")],-1)),t("div",tg,[t("div",sg,[t("label",null,[H(t("input",{type:"radio",value:!0,"onUpdate:modelValue":e[0]||(e[0]=r=>s.useDynamicAPI=r),onChange:e[1]||(e[1]=(...r)=>i.switchMode&&i.switchMode(...r))},null,544),[[Ht,s.useDynamicAPI]]),e[10]||(e[10]=A(" ÂãïÊÖã API (Yahoo Finance) ",-1))]),t("label",null,[H(t("input",{type:"radio",value:!1,"onUpdate:modelValue":e[2]||(e[2]=r=>s.useDynamicAPI=r),onChange:e[3]||(e[3]=(...r)=>i.switchMode&&i.switchMode(...r))},null,544),[[Ht,s.useDynamicAPI]]),e[11]||(e[11]=A(" ÈùúÊÖãÊñá‰ª∂ (symbols_metadata.json) ",-1))])]),t("div",ag,[t("button",{onClick:e[4]||(e[4]=(...r)=>i.testSingleSymbol&&i.testSingleSymbol(...r)),disabled:s.loading}," Ê∏¨Ë©¶ÂñÆÂÄãËÇ°Á•® ",8,ng),t("button",{onClick:e[5]||(e[5]=(...r)=>i.testBatchSymbols&&i.testBatchSymbols(...r)),disabled:s.loading}," ÊâπÈáèÊ∏¨Ë©¶ ",8,ig),t("button",{onClick:e[6]||(e[6]=(...r)=>i.clearCache&&i.clearCache(...r)),disabled:s.loading}," Ê∏ÖÈô§Á∑©Â≠ò ",8,og),t("button",{onClick:e[7]||(e[7]=(...r)=>i.warmupCache&&i.warmupCache(...r)),disabled:s.loading}," È†êÁÜ±Á∑©Â≠ò ",8,rg)]),t("div",lg,[H(t("input",{"onUpdate:modelValue":e[8]||(e[8]=r=>s.testSymbol=r),placeholder:"Ëº∏ÂÖ•ËÇ°Á•®‰ª£Á¢º (‰æãÂ¶Ç: AAPL)",onKeyup:e[9]||(e[9]=Je((...r)=>i.testSingleSymbol&&i.testSingleSymbol(...r),["enter"]))},null,544),[[he,s.testSymbol]])])]),s.loading||s.error||s.successMessage?(u(),h("div",cg,[s.loading?(u(),h("div",dg,[e[12]||(e[12]=t("span",{class:"spinner"},null,-1)),A(" "+l(s.loadingMessage),1)])):k("",!0),s.error?(u(),h("div",ug," ‚ùå "+l(s.error),1)):k("",!0),s.successMessage?(u(),h("div",hg," ‚úÖ "+l(s.successMessage),1)):k("",!0)])):k("",!0),s.cacheStats?(u(),h("div",gg,[e[16]||(e[16]=t("h3",null,"Á∑©Â≠òÁµ±Ë®à",-1)),t("div",mg,[t("div",fg,[e[13]||(e[13]=t("label",null,"Ê®°Âºè:",-1)),t("span",null,l(s.cacheStats.mode==="dynamic"?"ÂãïÊÖã API":"ÈùúÊÖãÊñá‰ª∂"),1)]),t("div",pg,[e[14]||(e[14]=t("label",null,"Á∑©Â≠òÊ¢ùÁõÆ:",-1)),t("span",null,l(s.cacheStats.totalCached||0),1)]),s.cacheStats.mode==="static"?(u(),h("div",vg,[e[15]||(e[15]=t("label",null,"ÂÖÉÊï∏ÊìöÂ∑≤ËºâÂÖ•:",-1)),t("span",null,l(s.cacheStats.metadataLoaded?"ÊòØ":"Âê¶"),1)])):k("",!0)])])):k("",!0),s.testResults.length>0?(u(),h("div",yg,[e[22]||(e[22]=t("h3",null,"Ê∏¨Ë©¶ÁµêÊûú",-1)),t("div",wg,[(u(!0),h(F,null,O(s.testResults,r=>(u(),h("div",{key:r.symbol,class:w(["result-card",i.getResultCardClass(r)])},[t("div",Sg,[t("h4",null,l(r.symbol),1),t("span",{class:w(["confidence-badge",i.getConfidenceBadgeClass(r.confidence)])},l((r.confidence*100).toFixed(0))+"% ",3)]),t("div",bg,[t("div",_g,[e[17]||(e[17]=t("label",null,"Sector:",-1)),t("span",null,l(r.sector),1)]),t("div",kg,[e[18]||(e[18]=t("label",null,"Industry:",-1)),t("span",null,l(r.industry),1)]),t("div",Cg,[e[19]||(e[19]=t("label",null,"Exchange:",-1)),t("span",null,l(r.exchange),1)]),r.marketCapFormatted?(u(),h("div",Tg,[e[20]||(e[20]=t("label",null,"Market Cap:",-1)),t("span",null,l(r.marketCapFormatted),1)])):k("",!0),r.country?(u(),h("div",Dg,[e[21]||(e[21]=t("label",null,"Country:",-1)),t("span",null,l(r.country),1)])):k("",!0)]),t("div",Ag,[t("div",Ig,[t("small",null,l(r.source),1)]),t("div",xg,[t("small",null,l(i.formatTimestamp(r.lastUpdated)),1)])])],2))),128))])])):k("",!0),s.comparisonResults.length>0?(u(),h("div",Mg,[e[24]||(e[24]=t("h3",null,"ÂãïÊÖã vs ÈùúÊÖãÊØîËºÉ",-1)),t("div",Ng,[t("table",null,[e[23]||(e[23]=t("thead",null,[t("tr",null,[t("th",null,"Symbol"),t("th",null,"ÂãïÊÖã API - Sector"),t("th",null,"ÈùúÊÖãÊñá‰ª∂ - Sector"),t("th",null,"ÂãïÊÖã API - Industry"),t("th",null,"ÈùúÊÖãÊñá‰ª∂ - Industry"),t("th",null,"ÂåπÈÖçÂ∫¶")])],-1)),t("tbody",null,[(u(!0),h(F,null,O(s.comparisonResults,r=>(u(),h("tr",{key:r.symbol},[t("td",null,l(r.symbol),1),t("td",null,l(r.dynamic.sector),1),t("td",null,l(r.static.sector),1),t("td",null,l(r.dynamic.industry),1),t("td",null,l(r.static.industry),1),t("td",null,[t("span",{class:w(["match-indicator",r.matchClass])},l(r.matchScore)+"% ",3)])]))),128))])])])])):k("",!0)])}const Lg=E(Zh,[["render",Pg],["__scopeId","data-v-6d662d12"]]),$g={name:"ProxyDiagnosticTest",data(){var n;return{testSymbol:"AAPL",testing:!1,currentTest:"",diagnosticComplete:!1,proxyResults:[],directApiResults:{chart:null,quoteSummary:null},networkInfo:{userAgent:navigator.userAgent,language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,connection:((n=navigator.connection)==null?void 0:n.effectiveType)||"unknown",online:navigator.onLine},corsProxies:[{name:"CORS.SH",url:"https://cors.sh/",description:"Â∞àÊ•≠ÁöÑ CORS ‰ª£ÁêÜÊúçÂãôÔºåÁõ∏Â∞çÁ©©ÂÆö",type:"direct"},{name:"Proxy CORS (isomorphic-git)",url:"https://proxy-cors.isomorphic-git.org/",description:"Áî± isomorphic-git ÂúòÈöäÁ∂≠Ë≠∑",type:"direct"},{name:"ThingProxy",url:"https://thingproxy.freeboard.io/fetch/",description:"Áî± Freeboard.io Êèê‰æõÁöÑ‰ª£ÁêÜÊúçÂãô",type:"direct"},{name:"CORS Proxy (HTMLDriven)",url:"https://cors-proxy.htmldriven.com/?url=",description:"Á∞°ÂñÆÊòìÁî®ÁöÑ‰ª£ÁêÜÊúçÂãô",type:"query"},{name:"AllOrigins",url:"https://api.allorigins.win/raw?url=",description:"ÂÖçË≤ª CORS ‰ª£ÁêÜÊúçÂãô (ÂèØËÉΩÊúâ CORS ÈôêÂà∂)",type:"query"},{name:"CorsProxy.io",url:"https://corsproxy.io/?",description:"ÈñãÊ∫ê CORS ‰ª£ÁêÜ (ÂèØËÉΩÈúÄË¶ÅË™çË≠â)",type:"query"},{name:"CORS Anywhere",url:"https://cors-anywhere.herokuapp.com/",description:"Heroku Ë®óÁÆ°ÁöÑ CORS ‰ª£ÁêÜ (Â∑≤ÈôêÂà∂Ë®™Âïè)",type:"direct"}]}},computed:{workingProxies(){return this.proxyResults.filter(n=>n.status==="SUCCESS")},failedProxies(){return this.proxyResults.filter(n=>n.status==="FAILED")},fastestProxy(){const n=this.workingProxies;return n.length===0?null:n.reduce((e,a)=>a.responseTime<e.responseTime?a:e)}},methods:{async runFullDiagnostic(){this.testing=!0,this.diagnosticComplete=!1,this.proxyResults=[],this.directApiResults={chart:null,quoteSummary:null};try{await this.testAllProxies(),await this.testDirectAPI(),this.diagnosticComplete=!0}catch(n){console.error("Ë®∫Êñ∑ÈÅéÁ®ãÂá∫ÈåØ:",n)}finally{this.testing=!1,this.currentTest=""}},async testAllProxies(){for(let n=0;n<this.corsProxies.length;n++){const e=this.corsProxies[n];this.currentTest=`${e.name} ‰ª£ÁêÜÊúçÂãô`;const a=await this.testSingleProxy(e,n);this.proxyResults.push(a),n<this.corsProxies.length-1&&await this.delay(1e3)}},async testSingleProxy(n,e){var s,i;const a=Date.now(),o={index:e,name:n.name,url:n.url,type:n.type,status:"TESTING",responseTime:0,httpStatus:null,error:null,errorType:null,data:null,dataPoints:0,priceRange:null};try{const r=`https://query1.finance.yahoo.com/v8/finance/chart/${this.testSymbol}?interval=1d&range=1mo`;let c;n.type==="query"?c=`${n.url}${encodeURIComponent(r)}`:c=`${n.url}${r}`,console.log(`Testing ${n.name}:`,c.substring(0,120)+"...");const d=await fetch(c,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"}});if(o.responseTime=Date.now()-a,o.httpStatus=d.status,!d.ok)throw new Error(`HTTP ${d.status}: ${d.statusText}`);const g=await d.json();if(!g.chart||!g.chart.result||g.chart.result.length===0)throw new Error("Invalid data structure - no chart results");const m=(i=(s=g.chart.result[0].indicators)==null?void 0:s.quote)==null?void 0:i[0];if(!m||!m.close)throw new Error("Invalid data structure - no price data");const p=m.close.filter(D=>D!==null);o.status="SUCCESS",o.data=g,o.dataPoints=p.length,o.priceRange={min:Math.min(...p).toFixed(2),max:Math.max(...p).toFixed(2)},console.log(`‚úÖ ${n.name} ÊàêÂäü:`,{responseTime:o.responseTime,dataPoints:o.dataPoints,priceRange:o.priceRange})}catch(r){o.status="FAILED",o.responseTime=Date.now()-a,o.error=r.message,r.message.includes("CORS")||r.message.includes("cors")?o.errorType="CORS_ERROR":r.message.includes("401")?o.errorType="UNAUTHORIZED":r.message.includes("403")?o.errorType="FORBIDDEN":r.message.includes("404")?o.errorType="NOT_FOUND":r.message.includes("429")?o.errorType="RATE_LIMITED":r.message.includes("Failed to fetch")||r.message.includes("fetch")?o.errorType="NETWORK_ERROR":r.message.includes("Invalid data structure")?o.errorType="DATA_FORMAT_ERROR":r.message.includes("timeout")?o.errorType="TIMEOUT_ERROR":o.errorType="UNKNOWN_ERROR",console.log(`‚ùå ${n.name} Â§±Êïó:`,{errorType:o.errorType,error:o.error,responseTime:o.responseTime})}return o},async testDirectAPI(){var n,e,a,o,s,i,r,c,d,g,f;this.currentTest="Yahoo Finance API Áõ¥Êé•Ë®™Âïè";try{const m=`https://query1.finance.yahoo.com/v8/finance/chart/${this.testSymbol}?interval=1d&range=1mo`,p=await fetch(m);if(p.ok){const S=((c=(r=(i=(s=(o=(a=(e=(n=(await p.json()).chart)==null?void 0:n.result)==null?void 0:e[0])==null?void 0:a.indicators)==null?void 0:o.quote)==null?void 0:s[0])==null?void 0:i.close)==null?void 0:r.filter(T=>T!==null))==null?void 0:c.length)||0;this.directApiResults.chart={status:"SUCCESS",dataPoints:S}}else throw new Error(`HTTP ${p.status}`)}catch(m){this.directApiResults.chart={status:"FAILED",error:m.message}}try{const m=`https://query1.finance.yahoo.com/v10/finance/quoteSummary/${this.testSymbol}?modules=summaryProfile`,p=await fetch(m);if(p.ok){const S=(f=(g=(d=(await p.json()).quoteSummary)==null?void 0:d.result)==null?void 0:g[0])==null?void 0:f.summaryProfile;this.directApiResults.quoteSummary={status:"SUCCESS",sector:S==null?void 0:S.sector,industry:S==null?void 0:S.industry}}else throw new Error(`HTTP ${p.status}`)}catch(m){this.directApiResults.quoteSummary={status:"FAILED",error:m.message}}},getStatusClass(n){switch(n){case"SUCCESS":return"success";case"FAILED":return"failed";case"TESTING":return"testing";default:return"unknown"}},delay(n){return new Promise(e=>setTimeout(e,n))}}},Rg={class:"proxy-diagnostic"},Eg={class:"test-controls"},Fg={class:"symbol-input"},Og=["disabled"],Ug={key:0,class:"loading"},Vg={class:"proxy-results"},Wg={class:"proxy-grid"},Bg={class:"proxy-header"},Hg={class:"proxy-details"},qg={key:0,class:"error-details"},zg={key:1,class:"success-details"},jg={class:"direct-api-test"},Gg={class:"api-test-grid"},Qg={class:"api-test-card"},Xg={key:0},Kg={key:1},Yg={class:"api-test-card"},Jg={key:0},Zg={key:1},em={key:2},tm={class:"network-info"},sm={class:"network-details"},am={key:1,class:"recommendations"},nm={class:"recommendation-content"},im={key:0,class:"success-recommendation"},om={key:1,class:"warning-recommendation"},rm={class:"solution-suggestions"},lm={key:0,class:"critical-suggestions"},cm={key:1,class:"optimization-suggestions"};function dm(n,e,a,o,s,i){var r,c,d,g,f,m,p,D,S,T;return u(),h("div",Rg,[e[35]||(e[35]=t("div",{class:"test-header"},[t("h2",null,"üîç Yahoo Finance API Proxy Ë®∫Êñ∑Â∑•ÂÖ∑"),t("p",null,"Ê∏¨Ë©¶ÂêÑÂÄã CORS ‰ª£ÁêÜÊúçÂãôÁöÑÂèØÁî®ÊÄßÂíå Yahoo Finance API ÁöÑÁãÄÊÖã")],-1)),t("div",Eg,[t("div",Fg,[e[2]||(e[2]=t("label",null,"Ê∏¨Ë©¶ËÇ°Á•®:",-1)),H(t("input",{"onUpdate:modelValue":e[0]||(e[0]=_=>s.testSymbol=_),placeholder:"AAPL"},null,512),[[he,s.testSymbol]]),t("button",{onClick:e[1]||(e[1]=(..._)=>i.runFullDiagnostic&&i.runFullDiagnostic(..._)),disabled:s.testing},l(s.testing?"Ê∏¨Ë©¶‰∏≠...":"ÈñãÂßãÂÆåÊï¥Ë®∫Êñ∑"),9,Og)])]),s.testing?(u(),h("div",Ug,[e[3]||(e[3]=t("div",{class:"spinner"},null,-1)),t("p",null,"Ê≠£Âú®Ê∏¨Ë©¶ "+l(s.currentTest)+"...",1)])):k("",!0),t("div",Vg,[e[11]||(e[11]=t("h3",null,"üì° CORS Proxy ÊúçÂãôÁãÄÊÖã",-1)),t("div",Wg,[(u(!0),h(F,null,O(s.proxyResults,(_,$)=>{var I,N;return u(),h("div",{key:$,class:w(["proxy-card",i.getStatusClass(_.status)])},[t("div",Bg,[t("h4",null,"Proxy "+l($+1)+": "+l(_.name),1),t("span",{class:w(["status-badge",i.getStatusClass(_.status)])},l(_.status),3)]),t("div",Hg,[t("p",null,[e[4]||(e[4]=t("strong",null,"URL:",-1)),A(" "+l(_.url),1)]),t("p",null,[e[5]||(e[5]=t("strong",null,"ÈüøÊáâÊôÇÈñì:",-1)),A(" "+l(_.responseTime)+"ms",1)]),t("p",null,[e[6]||(e[6]=t("strong",null,"HTTP ÁãÄÊÖã:",-1)),A(" "+l(_.httpStatus),1)]),_.error?(u(),h("div",qg,[t("p",null,[e[7]||(e[7]=t("strong",null,"ÈåØË™§È°ûÂûã:",-1)),A(" "+l(_.errorType),1)]),t("p",null,[e[8]||(e[8]=t("strong",null,"ÈåØË™§Ë®äÊÅØ:",-1)),A(" "+l(_.error),1)])])):k("",!0),_.data?(u(),h("div",zg,[t("p",null,[e[9]||(e[9]=t("strong",null,"Êï∏ÊìöÈªû:",-1)),A(" "+l(_.dataPoints),1)]),t("p",null,[e[10]||(e[10]=t("strong",null,"ÂÉπÊ†ºÁØÑÂúç:",-1)),A(" $"+l((I=_.priceRange)==null?void 0:I.min)+" - $"+l((N=_.priceRange)==null?void 0:N.max),1)])])):k("",!0)])],2)}),128))])]),t("div",jg,[e[21]||(e[21]=t("h3",null,"üéØ Yahoo Finance API Áõ¥Êé•Ê∏¨Ë©¶",-1)),t("div",Gg,[t("div",Qg,[e[15]||(e[15]=t("h4",null,"Chart API (ÊäÄË°ìÊåáÊ®ôÊï∏Êìö)",-1)),t("div",{class:w(["test-result",i.getStatusClass((r=s.directApiResults.chart)==null?void 0:r.status)])},[t("p",null,[e[12]||(e[12]=t("strong",null,"ÁãÄÊÖã:",-1)),A(" "+l(((c=s.directApiResults.chart)==null?void 0:c.status)||"Êú™Ê∏¨Ë©¶"),1)]),(d=s.directApiResults.chart)!=null&&d.error?(u(),h("p",Xg,[e[13]||(e[13]=t("strong",null,"ÈåØË™§:",-1)),A(" "+l(s.directApiResults.chart.error),1)])):k("",!0),(g=s.directApiResults.chart)!=null&&g.dataPoints?(u(),h("p",Kg,[e[14]||(e[14]=t("strong",null,"Êï∏ÊìöÈªû:",-1)),A(" "+l(s.directApiResults.chart.dataPoints),1)])):k("",!0)],2)]),t("div",Yg,[e[20]||(e[20]=t("h4",null,"Quote Summary API (ËÇ°Á•®Ë≥áË®ä)",-1)),t("div",{class:w(["test-result",i.getStatusClass((f=s.directApiResults.quoteSummary)==null?void 0:f.status)])},[t("p",null,[e[16]||(e[16]=t("strong",null,"ÁãÄÊÖã:",-1)),A(" "+l(((m=s.directApiResults.quoteSummary)==null?void 0:m.status)||"Êú™Ê∏¨Ë©¶"),1)]),(p=s.directApiResults.quoteSummary)!=null&&p.error?(u(),h("p",Jg,[e[17]||(e[17]=t("strong",null,"ÈåØË™§:",-1)),A(" "+l(s.directApiResults.quoteSummary.error),1)])):k("",!0),(D=s.directApiResults.quoteSummary)!=null&&D.sector?(u(),h("p",Zg,[e[18]||(e[18]=t("strong",null,"Sector:",-1)),A(" "+l(s.directApiResults.quoteSummary.sector),1)])):k("",!0),(S=s.directApiResults.quoteSummary)!=null&&S.industry?(u(),h("p",em,[e[19]||(e[19]=t("strong",null,"Industry:",-1)),A(" "+l(s.directApiResults.quoteSummary.industry),1)])):k("",!0)],2)])])]),t("div",tm,[e[27]||(e[27]=t("h3",null,"üåê Á∂≤Ë∑ØÁí∞Â¢ÉË≥áË®ä",-1)),t("div",sm,[t("p",null,[e[22]||(e[22]=t("strong",null,"Áî®Êà∂‰ª£ÁêÜ:",-1)),A(" "+l(s.networkInfo.userAgent),1)]),t("p",null,[e[23]||(e[23]=t("strong",null,"Ë™ûË®Ä:",-1)),A(" "+l(s.networkInfo.language),1)]),t("p",null,[e[24]||(e[24]=t("strong",null,"ÊôÇÂçÄ:",-1)),A(" "+l(s.networkInfo.timezone),1)]),t("p",null,[e[25]||(e[25]=t("strong",null,"ÈÄ£Á∑öÈ°ûÂûã:",-1)),A(" "+l(s.networkInfo.connection),1)]),t("p",null,[e[26]||(e[26]=t("strong",null,"ÊòØÂê¶Âú®Á∑ö:",-1)),A(" "+l(s.networkInfo.online?"ÊòØ":"Âê¶"),1)])])]),s.diagnosticComplete?(u(),h("div",am,[e[34]||(e[34]=t("h3",null,"üí° Ë®∫Êñ∑ÁµêÊûúÂíåÂª∫Ë≠∞",-1)),t("div",nm,[i.workingProxies.length>0?(u(),h("div",im,[t("h4",null,"‚úÖ ÂèØÁî®ÁöÑ‰ª£ÁêÜÊúçÂãô ("+l(i.workingProxies.length)+"/"+l(s.proxyResults.length)+")",1),t("ul",null,[(u(!0),h(F,null,O(i.workingProxies,_=>(u(),h("li",{key:_.index},l(_.name)+" - ÈüøÊáâÊôÇÈñì: "+l(_.responseTime)+"ms ",1))),128))])])):k("",!0),i.failedProxies.length>0?(u(),h("div",om,[t("h4",null,"‚ùå Â§±ÊïóÁöÑ‰ª£ÁêÜÊúçÂãô ("+l(i.failedProxies.length)+"/"+l(s.proxyResults.length)+")",1),t("ul",null,[(u(!0),h(F,null,O(i.failedProxies,_=>(u(),h("li",{key:_.index},l(_.name)+" - "+l(_.errorType)+": "+l(_.error),1))),128))])])):k("",!0),t("div",rm,[e[33]||(e[33]=t("h4",null,"üîß Âª∫Ë≠∞Ëß£Ê±∫ÊñπÊ°à",-1)),i.workingProxies.length===0?(u(),h("div",lm,[...e[28]||(e[28]=[se("<p data-v-f967bfd3><strong data-v-f967bfd3>ÊâÄÊúâ‰ª£ÁêÜÈÉΩÂ§±Êïó‰∫ÜÔºåÂèØËÉΩÁöÑÂéüÂõ†ÂíåËß£Ê±∫ÊñπÊ°à:</strong></p><ul data-v-f967bfd3><li data-v-f967bfd3><strong data-v-f967bfd3>CORS ÊîøÁ≠ñ:</strong> ÁÄèË¶ΩÂô®ÈòªÊ≠¢Ë∑®ÂüüË´ãÊ±ÇÔºåËÄÉÊÖÆ‰ΩøÁî®ÊúçÂãôÁ´Ø‰ª£ÁêÜ</li><li data-v-f967bfd3><strong data-v-f967bfd3>‰ª£ÁêÜÊúçÂãôÈôêÂà∂:</strong> ÂÖçË≤ª‰ª£ÁêÜÊúçÂãôÂèØËÉΩÊúâ‰ΩøÁî®ÈôêÂà∂ÊàñÈúÄË¶ÅË™çË≠â</li><li data-v-f967bfd3><strong data-v-f967bfd3>Yahoo Finance API ËÆäÊõ¥:</strong> API Á´ØÈªûÊàñÊ†ºÂºèÂèØËÉΩÂ∑≤ËÆäÊõ¥</li><li data-v-f967bfd3><strong data-v-f967bfd3>Á∂≤Ë∑ØÈò≤ÁÅ´ÁâÜ:</strong> ÂÖ¨Âè∏ÊàñÂ≠∏Ê†°Á∂≤Ë∑ØÂèØËÉΩÈòªÊ≠¢Êüê‰∫õË´ãÊ±Ç</li></ul>",2)])])):(u(),h("div",cm,[e[32]||(e[32]=t("p",null,[t("strong",null,"ÂÑ™ÂåñÂª∫Ë≠∞:")],-1)),t("ul",null,[t("li",null,"ÂÑ™ÂÖà‰ΩøÁî®ÈüøÊáâÊôÇÈñìÊúÄÂø´ÁöÑ‰ª£ÁêÜ: "+l((T=i.fastestProxy)==null?void 0:T.name),1),e[29]||(e[29]=t("li",null,"ÂØ¶ÊñΩ‰ª£ÁêÜËº™ÊèõÊ©üÂà∂‰ª•ÂàÜÊï£Ë≤†Ëºâ",-1)),e[30]||(e[30]=t("li",null,"Â¢ûÂä†ÈåØË™§ÈáçË©¶ÈÇèËºØ",-1)),e[31]||(e[31]=t("li",null,"ËÄÉÊÖÆÁ∑©Â≠òÊ©üÂà∂Ê∏õÂ∞ë API Ë™øÁî®",-1))])]))])])])):k("",!0)])}const um=E($g,[["render",dm],["__scopeId","data-v-f967bfd3"]]),hm={name:"TechnicalIndicatorsManager",data(){return{loading:!1,testing:!1,showPreferences:!1,dataSourceStatus:null,testResults:[],preferences:{preferPrecomputed:!0,fallbackToRealtime:!0,maxAgeHours:24}}},async mounted(){await this.refreshStatus()},methods:{async refreshStatus(){this.loading=!0;try{this.dataSourceStatus=await ke.getDataSourceStatus()}catch(n){console.error("Failed to refresh status:",n),alert("Âà∑Êñ∞ÁãÄÊÖãÂ§±Êïó: "+n.message)}finally{this.loading=!1}},async clearAllCaches(){if(confirm("Á¢∫ÂÆöË¶ÅÊ∏ÖÈô§ÊâÄÊúâÁ∑©Â≠òÂóéÔºüÈÄôÂ∞áÂ∞éËá¥‰∏ãÊ¨°ËºâÂÖ•ÊôÇÈñìËºÉÈï∑„ÄÇ"))try{alert("ÊâÄÊúâÁ∑©Â≠òÂ∑≤Ê∏ÖÈô§"),await this.refreshStatus()}catch(n){alert("Ê∏ÖÈô§Á∑©Â≠òÂ§±Êïó: "+n.message)}},async testPrecomputed(){this.testing=!0,this.testResults=[];const n=["AAPL","TSLA","MSFT"];try{for(const e of n){const a=Date.now();try{const o=await ke.getTechnicalIndicators(e),s=Date.now()-a;this.testResults.push({symbol:e,success:!0,data:o,source:o.source,loadTime:`${s}ms`})}catch(o){this.testResults.push({symbol:e,success:!1,error:o.message,loadTime:`${Date.now()-a}ms`})}}}finally{this.testing=!1}},updatePreferences(){const n=this.preferences.maxAgeHours*60*60*1e3;ke.setPreferences({preferPrecomputed:this.preferences.preferPrecomputed,fallbackToRealtime:this.preferences.fallbackToRealtime,maxPrecomputedAge:n}),console.log("Preferences updated:",this.preferences)},formatDate(n){return n?new Date(n).toLocaleString("zh-TW"):"N/A"},formatBytes(n){if(n===0)return"0 B";const e=1024,a=["B","KB","MB"],o=Math.floor(Math.log(n)/Math.log(e));return parseFloat((n/Math.pow(e,o)).toFixed(2))+" "+a[o]}}},gm={class:"indicators-manager"},mm={class:"status-section"},fm={class:"status-grid"},pm={class:"status-header"},vm={key:0,class:"status-details"},ym={class:"status-card available"},wm={class:"status-details"},Sm={class:"status-card available"},bm={class:"status-details"},_m={class:"control-section"},km={class:"control-grid"},Cm=["disabled"],Tm=["disabled"],Dm={key:0,class:"preferences-section"},Am={class:"preferences-form"},Im={class:"form-group"},xm={class:"form-group"},Mm={class:"form-group"},Nm={key:1,class:"test-results-section"},Pm={class:"test-results"},Lm={class:"result-header"},$m={class:"symbol"},Rm={class:"source"},Em={class:"load-time"},Fm={key:0,class:"error-message"},Om={key:1,class:"indicators-preview"},Um={key:2,class:"symbols-section"},Vm={class:"symbols-grid"};function Wm(n,e,a,o,s,i){var r,c,d,g,f,m,p,D,S,T,_,$,I,N,y,B,C,M;return u(),h("div",gm,[e[31]||(e[31]=t("div",{class:"manager-header"},[t("h2",null,"ÊäÄË°ìÊåáÊ®ôÁÆ°ÁêÜ‰∏≠ÂøÉ"),t("p",null,"Áõ£ÊéßÂíåÁÆ°ÁêÜÈ†êË®àÁÆóÊäÄË°ìÊåáÊ®ôÁ≥ªÁµ±")],-1)),t("div",mm,[e[23]||(e[23]=t("h3",null,"Êï∏ÊìöÊ∫êÁãÄÊÖã",-1)),t("div",fm,[t("div",{class:w(["status-card",{available:(c=(r=s.dataSourceStatus)==null?void 0:r.precomputed)==null?void 0:c.available}])},[t("div",pm,[e[10]||(e[10]=t("h4",null,"È†êË®àÁÆóÊï∏Êìö",-1)),t("span",{class:w(["status-badge",(g=(d=s.dataSourceStatus)==null?void 0:d.precomputed)!=null&&g.available?"success":"error"])},l((m=(f=s.dataSourceStatus)==null?void 0:f.precomputed)!=null&&m.available?"ÂèØÁî®":"‰∏çÂèØÁî®"),3)]),(D=(p=s.dataSourceStatus)==null?void 0:p.precomputed)!=null&&D.available?(u(),h("div",vm,[t("p",null,[e[11]||(e[11]=t("strong",null,"ËÇ°Á•®Êï∏Èáè:",-1)),A(" "+l(s.dataSourceStatus.precomputed.symbols.length),1)]),t("p",null,[e[12]||(e[12]=t("strong",null,"ÊàêÂäü:",-1)),A(" "+l(s.dataSourceStatus.precomputed.successful),1)]),t("p",null,[e[13]||(e[13]=t("strong",null,"Â§±Êïó:",-1)),A(" "+l(s.dataSourceStatus.precomputed.failed),1)]),t("p",null,[e[14]||(e[14]=t("strong",null,"ÊúÄÂæåÊõ¥Êñ∞:",-1)),A(" "+l(i.formatDate(s.dataSourceStatus.precomputed.lastUpdate)),1)])])):k("",!0)],2),t("div",ym,[e[18]||(e[18]=t("div",{class:"status-header"},[t("h4",null,"ÊØèÊó•Á∑©Â≠ò"),t("span",{class:"status-badge success"},"ÂèØÁî®")],-1)),t("div",wm,[t("p",null,[e[15]||(e[15]=t("strong",null,"ÂÖßÂ≠òÁ∑©Â≠ò:",-1)),A(" "+l(((T=(S=s.dataSourceStatus)==null?void 0:S.cache)==null?void 0:T.memoryCache)||0)+" È†ÖÁõÆ",1)]),t("p",null,[e[16]||(e[16]=t("strong",null,"Êú¨Âú∞Â≠òÂÑ≤:",-1)),A(" "+l((($=(_=s.dataSourceStatus)==null?void 0:_.cache)==null?void 0:$.localStorageCache)||0)+" È†ÖÁõÆ",1)]),t("p",null,[e[17]||(e[17]=t("strong",null,"Á∏ΩÂ§ßÂ∞è:",-1)),A(" "+l(i.formatBytes(((N=(I=s.dataSourceStatus)==null?void 0:I.cache)==null?void 0:N.totalSize)||0)),1)])])]),t("div",Sm,[e[22]||(e[22]=t("div",{class:"status-header"},[t("h4",null,"ÂØ¶ÊôÇË®àÁÆó"),t("span",{class:"status-badge success"},"ÂèØÁî®")],-1)),t("div",bm,[t("p",null,[e[19]||(e[19]=t("strong",null,"‰ª£ÁêÜÊúçÂãô:",-1)),A(" "+l(((B=(y=s.dataSourceStatus)==null?void 0:y.realtime)==null?void 0:B.proxies)||0)+" ÂÄã",1)]),e[20]||(e[20]=t("p",null,[t("strong",null,"ÁãÄÊÖã:"),A(" ÂÇôÁî®ÊñπÊ°à")],-1)),e[21]||(e[21]=t("p",null,[t("strong",null,"È†êÊúüÂª∂ÈÅ≤:"),A(" 2-20Áßí")],-1))])])])]),t("div",_m,[e[24]||(e[24]=t("h3",null,"ÊéßÂà∂Èù¢Êùø",-1)),t("div",km,[t("button",{onClick:e[0]||(e[0]=v=>i.refreshStatus()),class:"control-btn primary",disabled:s.loading},l(s.loading?"ËºâÂÖ•‰∏≠...":"Âà∑Êñ∞ÁãÄÊÖã"),9,Cm),t("button",{onClick:e[1]||(e[1]=v=>i.clearAllCaches()),class:"control-btn warning"}," Ê∏ÖÈô§ÊâÄÊúâÁ∑©Â≠ò "),t("button",{onClick:e[2]||(e[2]=v=>i.testPrecomputed()),class:"control-btn info",disabled:s.testing},l(s.testing?"Ê∏¨Ë©¶‰∏≠...":"Ê∏¨Ë©¶È†êË®àÁÆó"),9,Tm),t("button",{onClick:e[3]||(e[3]=v=>s.showPreferences=!s.showPreferences),class:"control-btn secondary"},l(s.showPreferences?"Èö±ËóèË®≠ÂÆö":"È°ØÁ§∫Ë®≠ÂÆö"),1)])]),s.showPreferences?(u(),h("div",Dm,[e[28]||(e[28]=t("h3",null,"Á≥ªÁµ±ÂÅèÂ•ΩË®≠ÂÆö",-1)),t("div",Am,[t("div",Im,[t("label",null,[H(t("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=v=>s.preferences.preferPrecomputed=v),onChange:e[5]||(e[5]=(...v)=>i.updatePreferences&&i.updatePreferences(...v))},null,544),[[re,s.preferences.preferPrecomputed]]),e[25]||(e[25]=A(" ÂÑ™ÂÖà‰ΩøÁî®È†êË®àÁÆóÊï∏Êìö ",-1))])]),t("div",xm,[t("label",null,[H(t("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=v=>s.preferences.fallbackToRealtime=v),onChange:e[7]||(e[7]=(...v)=>i.updatePreferences&&i.updatePreferences(...v))},null,544),[[re,s.preferences.fallbackToRealtime]]),e[26]||(e[26]=A(" ÂÖÅË®±ÂõûÈÄÄÂà∞ÂØ¶ÊôÇË®àÁÆó ",-1))])]),t("div",Mm,[e[27]||(e[27]=t("label",null,"È†êË®àÁÆóÊï∏ÊìöÊúÄÂ§ßÂπ¥ÈΩ° (Â∞èÊôÇ):",-1)),H(t("input",{type:"number","onUpdate:modelValue":e[8]||(e[8]=v=>s.preferences.maxAgeHours=v),onChange:e[9]||(e[9]=(...v)=>i.updatePreferences&&i.updatePreferences(...v)),min:"1",max:"72"},null,544),[[he,s.preferences.maxAgeHours,void 0,{number:!0}]])])])])):k("",!0),s.testResults.length>0?(u(),h("div",Nm,[e[29]||(e[29]=t("h3",null,"Ê∏¨Ë©¶ÁµêÊûú",-1)),t("div",Pm,[(u(!0),h(F,null,O(s.testResults,(v,b)=>{var L,J,ee;return u(),h("div",{key:b,class:w(["test-result-item",{success:v.success,error:!v.success}])},[t("div",Lm,[t("span",$m,l(v.symbol),1),t("span",Rm,l(v.source),1),t("span",Em,l(v.loadTime),1)]),v.error?(u(),h("div",Fm,l(v.error),1)):(u(),h("div",Om,[t("span",null,"MA5: "+l(((L=v.data.ma5)==null?void 0:L.value)||"N/A"),1),t("span",null,"ADX: "+l(((J=v.data.adx14)==null?void 0:J.value)||"N/A"),1),t("span",null,"MACD: "+l(((ee=v.data.macd)==null?void 0:ee.signal)||"N/A"),1)]))],2)}),128))])])):k("",!0),(M=(C=s.dataSourceStatus)==null?void 0:C.precomputed)!=null&&M.available?(u(),h("div",Um,[e[30]||(e[30]=t("h3",null,"È†êË®àÁÆóËÇ°Á•®ÂàóË°®",-1)),t("div",Vm,[(u(!0),h(F,null,O(s.dataSourceStatus.precomputed.symbols,v=>(u(),h("span",{key:v,class:"symbol-tag"},l(v),1))),128))])])):k("",!0)])}const Bm=E(hm,[["render",Wm],["__scopeId","data-v-f7963fc0"]]),Hm={name:"AutoUpdateMonitor",data(){return{loading:!1,status:{},cacheStats:{},logs:[],config:{technicalIndicators:{enabled:!0,intervalHours:1,marketHoursOnly:!0},metadata:{enabled:!0,intervalHours:24}},configChanged:!1,startTime:null,technicalIndicatorsLastUpdate:null,technicalIndicatorsAge:0,technicalIndicatorsSuccessRate:0,metadataLastUpdate:null,metadataAge:0,metadataSymbolCount:0,warmupInfo:{isWarming:!1,progress:0,lastWarmupTime:null,trackedSymbols:[]}}},computed:{schedulerStatus(){return this.status.isRunning?"ÈÅãË°å‰∏≠":"Â∑≤ÂÅúÊ≠¢"},schedulerStatusClass(){return this.status.isRunning?"status-success":"status-error"},schedulerButtonText(){return this.status.isRunning?"ÂÅúÊ≠¢Ë™øÂ∫¶Âô®":"ÂïüÂãïË™øÂ∫¶Âô®"},schedulerButtonClass(){return this.status.isRunning?"btn btn-danger":"btn btn-success"},technicalIndicatorsStatus(){return this.technicalIndicatorsAge<1?"ÊúÄÊñ∞":this.technicalIndicatorsAge<12?"ËºÉÊñ∞":this.technicalIndicatorsAge<24?"ÈÅéÊôÇ":"ËàäÊï∏Êìö"},technicalIndicatorsStatusClass(){return this.technicalIndicatorsAge<1?"status-success":this.technicalIndicatorsAge<12?"status-warning":"status-error"},metadataStatus(){return this.metadataAge<24?"ÊúÄÊñ∞":this.metadataAge<72?"ËºÉÊñ∞":"ÈÅéÊôÇ"},metadataStatusClass(){return this.metadataAge<24?"status-success":this.metadataAge<72?"status-warning":"status-error"},cacheStatus(){const n=this.cacheStats.totalSize||0;return n>100?"ÈúÄË¶ÅÊ∏ÖÁêÜ":n>50?"Ê≠£Â∏∏":"ËâØÂ•Ω"},warmupStatus(){return this.warmupInfo.isWarming?"È†êÁÜ±‰∏≠":this.warmupInfo.progress===100?"Â∑≤ÂÆåÊàê":this.warmupInfo.lastWarmupTime?"ÂæÖÊ©ü‰∏≠":"Êú™È†êÁÜ±"},warmupStatusClass(){return this.warmupInfo.isWarming?"status-warning":this.warmupInfo.progress===100?"status-success":this.warmupInfo.lastWarmupTime?"status-info":"status-error"}},async mounted(){await this.initializeMonitor(),this.startPeriodicRefresh()},beforeUnmount(){this.refreshInterval&&clearInterval(this.refreshInterval)},methods:{async initializeMonitor(){this.loading=!0;try{await this.refreshStatus(),await this.loadTechnicalIndicatorsStatus(),await this.loadMetadataStatus(),await this.loadWarmupStatus(),this.startTime=new Date,this.addLog("Áõ£ÊéßÈù¢ÊùøÂ∑≤ÂàùÂßãÂåñ","INFO")}catch(n){this.addLog(`ÂàùÂßãÂåñÂ§±Êïó: ${n.message}`,"ERROR")}finally{this.loading=!1}},async refreshStatus(){try{this.status=ne.getStatus(),this.cacheStats=G.getStats()}catch(n){this.addLog(`Âà∑Êñ∞ÁãÄÊÖãÂ§±Êïó: ${n.message}`,"ERROR")}},async loadTechnicalIndicatorsStatus(){try{const n=window.location.hostname==="romarin-hsieh.github.io"?"/investment-dashboard/":"/",e=await fetch(`${n}data/technical-indicators/latest_index.json`);if(e.ok){const a=await e.json();this.technicalIndicatorsLastUpdate=new Date(a.generatedAt),this.technicalIndicatorsAge=(Date.now()-this.technicalIndicatorsLastUpdate)/(1e3*60*60),this.technicalIndicatorsSuccessRate=Math.round(a.successfulSymbols/a.totalSymbols*100)}}catch(n){this.addLog(`ËºâÂÖ•ÊäÄË°ìÊåáÊ®ôÁãÄÊÖãÂ§±Êïó: ${n.message}`,"ERROR")}},async loadMetadataStatus(){try{this.metadataLastUpdate=new Date,this.metadataAge=0,this.metadataSymbolCount=24}catch(n){this.addLog(`ËºâÂÖ•ÂÖÉÊï∏ÊìöÁãÄÊÖãÂ§±Êïó: ${n.message}`,"ERROR")}},async loadWarmupStatus(){try{this.warmupInfo=ft.getWarmupStatus()}catch(n){this.addLog(`ËºâÂÖ•È†êÁÜ±ÁãÄÊÖãÂ§±Êïó: ${n.message}`,"ERROR")}},async triggerWarmup(){this.loading=!0;try{this.addLog("ÊâãÂãïËß∏ÁôºÁ∑©Â≠òÈ†êÁÜ±","INFO"),await ft.triggerManualWarmup(),this.addLog("Á∑©Â≠òÈ†êÁÜ±ÂÆåÊàê","SUCCESS"),await this.loadWarmupStatus()}catch(n){this.addLog(`Á∑©Â≠òÈ†êÁÜ±Â§±Êïó: ${n.message}`,"ERROR")}finally{this.loading=!1}},async toggleScheduler(){this.loading=!0;try{this.status.isRunning?(ne.stop(),this.addLog("Ë™øÂ∫¶Âô®Â∑≤ÂÅúÊ≠¢","INFO")):(ne.start(),this.addLog("Ë™øÂ∫¶Âô®Â∑≤ÂïüÂãï","INFO")),await this.refreshStatus()}catch(n){this.addLog(`ÂàáÊèõË™øÂ∫¶Âô®Â§±Êïó: ${n.message}`,"ERROR")}finally{this.loading=!1}},async triggerUpdate(n){this.loading=!0;try{this.addLog(`ÊâãÂãïËß∏ÁôºÊõ¥Êñ∞: ${n}`,"INFO"),await ne.triggerManualUpdate(n),this.addLog(`ÊâãÂãïÊõ¥Êñ∞ÂÆåÊàê: ${n}`,"SUCCESS"),await this.refreshStatus(),n==="technicalIndicators"?await this.loadTechnicalIndicatorsStatus():n==="metadata"&&await this.loadMetadataStatus()}catch(e){this.addLog(`ÊâãÂãïÊõ¥Êñ∞Â§±Êïó: ${e.message}`,"ERROR")}finally{this.loading=!1}},startPeriodicRefresh(){this.refreshInterval=setInterval(async()=>{await this.refreshStatus(),await this.loadTechnicalIndicatorsStatus(),await this.loadMetadataStatus(),await this.loadWarmupStatus()},3e4)},addLog(n,e="INFO"){const a={timestamp:new Date,level:e,message:n};this.logs.unshift(a),this.logs.length>100&&(this.logs=this.logs.slice(0,100))},clearLogs(){this.logs=[],this.addLog("Êó•Ë™åÂ∑≤Ê∏ÖÈô§","INFO")},onConfigChange(){this.configChanged=!0},async saveConfig(){try{localStorage.setItem("autoUpdateConfig",JSON.stringify(this.config)),this.configChanged=!1,this.addLog("ÈÖçÁΩÆÂ∑≤‰øùÂ≠ò","SUCCESS")}catch(n){this.addLog(`‰øùÂ≠òÈÖçÁΩÆÂ§±Êïó: ${n.message}`,"ERROR")}},formatTime(n){return n?new Date(n).toLocaleString("zh-TW"):"N/A"},formatDataAge(n){return n<1?"< 1 Â∞èÊôÇ":n<24?`${Math.round(n)} Â∞èÊôÇ`:`${Math.round(n/24)} Â§©`},getDataAgeClass(n){return n<1?"text-success":n<12?"text-warning":"text-danger"},getLogLevelClass(n){return{"log-info":n==="INFO","log-success":n==="SUCCESS","log-warning":n==="WARN","log-error":n==="ERROR"}}}},qm={class:"auto-update-monitor"},zm={class:"monitor-header"},jm={class:"header-actions"},Gm=["disabled"],Qm={key:0},Xm={key:1},Km=["disabled"],Ym={class:"monitor-grid"},Jm={class:"status-card"},Zm={class:"card-header"},ef={class:"card-content"},tf={class:"status-item"},sf={class:"status-item"},af={class:"value"},nf={class:"status-item"},of={class:"value"},rf={class:"status-card"},lf={class:"card-header"},cf={class:"card-content"},df={class:"status-item"},uf={class:"value"},hf={class:"status-item"},gf={class:"status-item"},mf={class:"value"},ff={class:"status-item"},pf={class:"value"},vf={class:"card-actions"},yf=["disabled"],wf={class:"status-card"},Sf={class:"card-header"},bf={class:"card-content"},_f={class:"status-item"},kf={class:"value"},Cf={class:"status-item"},Tf={class:"status-item"},Df={class:"value"},Af={class:"status-item"},If={class:"value"},xf={class:"card-actions"},Mf=["disabled"],Nf={class:"status-card"},Pf={class:"card-header"},Lf={class:"card-content"},$f={class:"status-item"},Rf={class:"status-item"},Ef={class:"value"},Ff={class:"status-item"},Of={class:"value"},Uf={class:"status-item"},Vf={class:"value"},Wf={class:"card-actions"},Bf=["disabled"],Hf={class:"status-card"},qf={class:"card-header"},zf={class:"status-indicator status-info"},jf={class:"card-content"},Gf={class:"status-item"},Qf={class:"value"},Xf={class:"status-item"},Kf={class:"value"},Yf={class:"status-item"},Jf={class:"value"},Zf={class:"status-item"},ep={class:"value"},tp={class:"card-actions"},sp=["disabled"],ap={class:"update-logs"},np={class:"logs-header"},ip={class:"logs-content"},op={key:0,class:"no-logs"},rp={key:1,class:"log-entries"},lp={class:"log-time"},cp={class:"log-level"},dp={class:"log-message"},up={class:"config-panel"},hp={class:"config-header"},gp=["disabled"],mp={class:"config-content"},fp={class:"config-section"},pp={class:"config-item"},vp={class:"config-item"},yp={class:"config-item"},wp={class:"config-section"},Sp={class:"config-item"},bp={class:"config-item"};function _p(n,e,a,o,s,i){var r,c,d,g,f;return u(),h("div",qm,[t("div",zm,[e[19]||(e[19]=t("h2",null,"Ëá™ÂãïÊõ¥Êñ∞Áõ£ÊéßÈù¢Êùø",-1)),t("div",jm,[t("button",{onClick:e[0]||(e[0]=(...m)=>i.refreshStatus&&i.refreshStatus(...m)),class:"btn btn-secondary",disabled:s.loading},[s.loading?(u(),h("span",Qm,"üîÑ")):(u(),h("span",Xm,"üîÑ")),e[18]||(e[18]=A(" Âà∑Êñ∞ÁãÄÊÖã ",-1))],8,Gm),t("button",{onClick:e[1]||(e[1]=(...m)=>i.toggleScheduler&&i.toggleScheduler(...m)),class:w(i.schedulerButtonClass),disabled:s.loading},l(i.schedulerButtonText),11,Km)])]),t("div",Ym,[t("div",Jm,[t("div",Zm,[e[20]||(e[20]=t("h3",null,"Ë™øÂ∫¶Âô®ÁãÄÊÖã",-1)),t("div",{class:w(["status-indicator",i.schedulerStatusClass])},l(i.schedulerStatus),3)]),t("div",ef,[t("div",tf,[e[21]||(e[21]=t("span",{class:"label"},"ÈÅãË°åÁãÄÊÖã:",-1)),t("span",{class:w(["value",i.schedulerStatusClass])},l(s.status.isRunning?"ÈÅãË°å‰∏≠":"Â∑≤ÂÅúÊ≠¢"),3)]),t("div",sf,[e[22]||(e[22]=t("span",{class:"label"},"Ê¥ªÂãï‰ªªÂãô:",-1)),t("span",af,l(((r=s.status.activeIntervals)==null?void 0:r.length)||0)+" ÂÄã",1)]),t("div",nf,[e[23]||(e[23]=t("span",{class:"label"},"ÂïüÂãïÊôÇÈñì:",-1)),t("span",of,l(i.formatTime(s.startTime)),1)])])]),t("div",rf,[t("div",lf,[e[24]||(e[24]=t("h3",null,"ÊäÄË°ìÊåáÊ®ô",-1)),t("div",{class:w(["status-indicator",i.technicalIndicatorsStatusClass])},l(i.technicalIndicatorsStatus),3)]),t("div",cf,[t("div",df,[e[25]||(e[25]=t("span",{class:"label"},"ÊúÄÂæåÊõ¥Êñ∞:",-1)),t("span",uf,l(i.formatTime(s.technicalIndicatorsLastUpdate)),1)]),t("div",hf,[e[26]||(e[26]=t("span",{class:"label"},"Êï∏ÊìöÂπ¥ÈΩ°:",-1)),t("span",{class:w(["value",i.getDataAgeClass(s.technicalIndicatorsAge)])},l(i.formatDataAge(s.technicalIndicatorsAge)),3)]),t("div",gf,[e[27]||(e[27]=t("span",{class:"label"},"‰∏ãÊ¨°Êõ¥Êñ∞:",-1)),t("span",mf,l(i.formatTime((c=s.status.nextUpdates)==null?void 0:c.technicalIndicators)),1)]),t("div",ff,[e[28]||(e[28]=t("span",{class:"label"},"ÊàêÂäüÁéá:",-1)),t("span",pf,l(s.technicalIndicatorsSuccessRate)+"%",1)])]),t("div",vf,[t("button",{onClick:e[2]||(e[2]=m=>i.triggerUpdate("technicalIndicators")),class:"btn btn-primary btn-sm",disabled:s.loading}," Ê∏ÖÈô§Á∑©Â≠ò ",8,yf),e[29]||(e[29]=t("div",{class:"update-note"},[t("small",null,"Ë®ª: ÂØ¶ÈöõÈ†êË®àÁÆóÈúÄË¶ÅÂú®ÊúçÂãôÂô®Á´ØÂü∑Ë°å")],-1))])]),t("div",wf,[t("div",Sf,[e[30]||(e[30]=t("h3",null,"ÂÖÉÊï∏Êìö",-1)),t("div",{class:w(["status-indicator",i.metadataStatusClass])},l(i.metadataStatus),3)]),t("div",bf,[t("div",_f,[e[31]||(e[31]=t("span",{class:"label"},"ÊúÄÂæåÊõ¥Êñ∞:",-1)),t("span",kf,l(i.formatTime(s.metadataLastUpdate)),1)]),t("div",Cf,[e[32]||(e[32]=t("span",{class:"label"},"Êï∏ÊìöÂπ¥ÈΩ°:",-1)),t("span",{class:w(["value",i.getDataAgeClass(s.metadataAge)])},l(i.formatDataAge(s.metadataAge)),3)]),t("div",Tf,[e[33]||(e[33]=t("span",{class:"label"},"‰∏ãÊ¨°Êõ¥Êñ∞:",-1)),t("span",Df,l(i.formatTime((d=s.status.nextUpdates)==null?void 0:d.metadata)),1)]),t("div",Af,[e[34]||(e[34]=t("span",{class:"label"},"ËÇ°Á•®Êï∏Èáè:",-1)),t("span",If,l(s.metadataSymbolCount)+" ÊîØ",1)])]),t("div",xf,[t("button",{onClick:e[3]||(e[3]=m=>i.triggerUpdate("metadata")),class:"btn btn-primary btn-sm",disabled:s.loading}," ÊâãÂãïÊõ¥Êñ∞ ",8,Mf)])]),t("div",Nf,[t("div",Pf,[e[35]||(e[35]=t("h3",null,"Á∑©Â≠òÈ†êÁÜ±",-1)),t("div",{class:w(["status-indicator",i.warmupStatusClass])},l(i.warmupStatus),3)]),t("div",Lf,[t("div",$f,[e[36]||(e[36]=t("span",{class:"label"},"È†êÁÜ±ÁãÄÊÖã:",-1)),t("span",{class:w(["value",i.warmupStatusClass])},l(s.warmupInfo.isWarming?"ÈÄ≤Ë°å‰∏≠":"ÂæÖÊ©ü‰∏≠"),3)]),t("div",Rf,[e[37]||(e[37]=t("span",{class:"label"},"ÈÄ≤Â∫¶:",-1)),t("span",Ef,l(Math.round(s.warmupInfo.progress))+"%",1)]),t("div",Ff,[e[38]||(e[38]=t("span",{class:"label"},"ËøΩËπ§ËÇ°Á•®:",-1)),t("span",Of,l(((g=s.warmupInfo.trackedSymbols)==null?void 0:g.length)||0)+" ÊîØ",1)]),t("div",Uf,[e[39]||(e[39]=t("span",{class:"label"},"‰∏äÊ¨°È†êÁÜ±:",-1)),t("span",Vf,l(i.formatTime(s.warmupInfo.lastWarmupTime)),1)])]),t("div",Wf,[t("button",{onClick:e[4]||(e[4]=(...m)=>i.triggerWarmup&&i.triggerWarmup(...m)),class:"btn btn-info btn-sm",disabled:s.loading||s.warmupInfo.isWarming},l(s.warmupInfo.isWarming?"È†êÁÜ±‰∏≠...":"ÊâãÂãïÈ†êÁÜ±"),9,Bf),e[40]||(e[40]=t("div",{class:"update-note"},[t("small",null,"Ë®ª: È†êÁÜ±ÊâÄÊúâËÇ°Á•®ÁöÑÊäÄË°ìÊåáÊ®ôÊï∏Êìö")],-1))])]),t("div",Hf,[t("div",qf,[e[41]||(e[41]=t("h3",null,"Á∑©Â≠òÁãÄÊÖã",-1)),t("div",zf,l(i.cacheStatus),1)]),t("div",jf,[t("div",Gf,[e[42]||(e[42]=t("span",{class:"label"},"ÂÖßÂ≠òÁ∑©Â≠ò:",-1)),t("span",Qf,l(s.cacheStats.memoryCache)+" È†Ö",1)]),t("div",Xf,[e[43]||(e[43]=t("span",{class:"label"},"Êú¨Âú∞Â≠òÂÑ≤:",-1)),t("span",Kf,l(s.cacheStats.localStorage)+" È†Ö",1)]),t("div",Yf,[e[44]||(e[44]=t("span",{class:"label"},"Á∏ΩÂ§ßÂ∞è:",-1)),t("span",Jf,l(s.cacheStats.totalSize)+" È†Ö",1)]),t("div",Zf,[e[45]||(e[45]=t("span",{class:"label"},"‰∏ãÊ¨°Ê∏ÖÁêÜ:",-1)),t("span",ep,l(i.formatTime((f=s.status.nextUpdates)==null?void 0:f.cacheCleanup)),1)])]),t("div",tp,[t("button",{onClick:e[5]||(e[5]=m=>i.triggerUpdate("cache")),class:"btn btn-warning btn-sm",disabled:s.loading}," Ê∏ÖÁêÜÁ∑©Â≠ò ",8,sp)])])]),t("div",ap,[t("div",np,[e[46]||(e[46]=t("h3",null,"Êõ¥Êñ∞Êó•Ë™å",-1)),t("button",{onClick:e[6]||(e[6]=(...m)=>i.clearLogs&&i.clearLogs(...m)),class:"btn btn-sm btn-outline"},"Ê∏ÖÈô§Êó•Ë™å")]),t("div",ip,[s.logs.length===0?(u(),h("div",op," Êö´ÁÑ°Êó•Ë™åË®òÈåÑ ")):(u(),h("div",rp,[(u(!0),h(F,null,O(s.logs,(m,p)=>(u(),h("div",{key:p,class:w(["log-entry",i.getLogLevelClass(m.level)])},[t("span",lp,l(i.formatTime(m.timestamp)),1),t("span",cp,l(m.level),1),t("span",dp,l(m.message),1)],2))),128))]))])]),t("div",up,[t("div",hp,[e[47]||(e[47]=t("h3",null,"ÈÖçÁΩÆË®≠ÂÆö",-1)),t("button",{onClick:e[7]||(e[7]=(...m)=>i.saveConfig&&i.saveConfig(...m)),class:"btn btn-success btn-sm",disabled:!s.configChanged}," ‰øùÂ≠òÈÖçÁΩÆ ",8,gp)]),t("div",mp,[t("div",fp,[e[51]||(e[51]=t("h4",null,"ÊäÄË°ìÊåáÊ®ôÊõ¥Êñ∞",-1)),t("div",pp,[t("label",null,[H(t("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=m=>s.config.technicalIndicators.enabled=m),onChange:e[9]||(e[9]=(...m)=>i.onConfigChange&&i.onConfigChange(...m))},null,544),[[re,s.config.technicalIndicators.enabled]]),e[48]||(e[48]=A(" ÂïüÁî®Ëá™ÂãïÊõ¥Êñ∞ ",-1))])]),t("div",vp,[e[49]||(e[49]=t("label",null,"Êõ¥Êñ∞ÈñìÈöî (Â∞èÊôÇ):",-1)),H(t("input",{type:"number","onUpdate:modelValue":e[10]||(e[10]=m=>s.config.technicalIndicators.intervalHours=m),onChange:e[11]||(e[11]=(...m)=>i.onConfigChange&&i.onConfigChange(...m)),min:"1",max:"24"},null,544),[[he,s.config.technicalIndicators.intervalHours,void 0,{number:!0}]])]),t("div",yp,[t("label",null,[H(t("input",{type:"checkbox","onUpdate:modelValue":e[12]||(e[12]=m=>s.config.technicalIndicators.marketHoursOnly=m),onChange:e[13]||(e[13]=(...m)=>i.onConfigChange&&i.onConfigChange(...m))},null,544),[[re,s.config.technicalIndicators.marketHoursOnly]]),e[50]||(e[50]=A(" ÂÉÖÂú®Â∏ÇÂ†¥ÊôÇÈñìÊõ¥Êñ∞ ",-1))])])]),t("div",wp,[e[54]||(e[54]=t("h4",null,"ÂÖÉÊï∏ÊìöÊõ¥Êñ∞",-1)),t("div",Sp,[t("label",null,[H(t("input",{type:"checkbox","onUpdate:modelValue":e[14]||(e[14]=m=>s.config.metadata.enabled=m),onChange:e[15]||(e[15]=(...m)=>i.onConfigChange&&i.onConfigChange(...m))},null,544),[[re,s.config.metadata.enabled]]),e[52]||(e[52]=A(" ÂïüÁî®Ëá™ÂãïÊõ¥Êñ∞ ",-1))])]),t("div",bp,[e[53]||(e[53]=t("label",null,"Êõ¥Êñ∞ÈñìÈöî (Â∞èÊôÇ):",-1)),H(t("input",{type:"number","onUpdate:modelValue":e[16]||(e[16]=m=>s.config.metadata.intervalHours=m),onChange:e[17]||(e[17]=(...m)=>i.onConfigChange&&i.onConfigChange(...m)),min:"1",max:"168"},null,544),[[he,s.config.metadata.intervalHours,void 0,{number:!0}]])])])])])])}const kp=E(Hm,[["render",_p],["__scopeId","data-v-32573d8b"]]),Cp={name:"SystemManager",data(){return{loading:!1,testing:!1,showAdvanced:!1,systemHealth:{overall:85,dataSource:90,performance:80,updates:85},dataSourceStatus:null,status:{isRunning:!1,activeIntervals:[],nextUpdates:{}},startTime:null,performanceScore:85,cacheHitRate:78,preferences:{preferPrecomputed:!0,fallbackToRealtime:!0,technicalIndicatorsInterval:30,metadataInterval:24,enablePerformanceMonitoring:!0,enableCacheWarmup:!0},systemLogs:[],logIdCounter:0}},computed:{schedulerStatus(){return this.status.isRunning?"ÈÅãË°å‰∏≠":"Â∑≤ÂÅúÊ≠¢"},schedulerStatusClass(){return this.status.isRunning?"success":"error"},schedulerButtonClass(){return this.status.isRunning?"btn btn-warning":"btn btn-success"},schedulerButtonText(){return this.status.isRunning?"ÂÅúÊ≠¢Ë™øÂ∫¶Âô®":"ÂïüÂãïË™øÂ∫¶Âô®"},technicalIndicatorsStatus(){return"Ê≠£Â∏∏"},technicalIndicatorsStatusClass(){return"success"},technicalIndicatorsLastUpdate(){return new Date().toISOString()},technicalIndicatorsAge(){return 30*60*1e3},technicalIndicatorsSuccessRate(){return 95},metadataStatus(){return"Ê≠£Â∏∏"},metadataStatusClass(){return"success"},metadataLastUpdate(){return new Date().toISOString()},metadataAge(){return 2*60*60*1e3}},async mounted(){await this.initializeSystem(),this.startStatusUpdates()},methods:{async initializeSystem(){this.addLog("info","Á≥ªÁµ±ÁÆ°ÁêÜÈù¢ÊùøÂàùÂßãÂåñ‰∏≠...");try{await this.refreshAllStatus(),this.addLog("info","Á≥ªÁµ±ÁÆ°ÁêÜÈù¢ÊùøÂàùÂßãÂåñÂÆåÊàê")}catch(n){this.addLog("error",`Á≥ªÁµ±ÂàùÂßãÂåñÂ§±Êïó: ${n.message}`)}},async refreshAllStatus(){this.loading=!0,this.addLog("info","ÈñãÂßãÂÖ®Èù¢ÁãÄÊÖãÂà∑Êñ∞...");try{await this.refreshDataSources(),this.refreshSchedulerStatus(),this.updatePerformanceMetrics(),this.updateSystemHealth(),this.addLog("info","ÂÖ®Èù¢ÁãÄÊÖãÂà∑Êñ∞ÂÆåÊàê")}catch(n){this.addLog("error",`ÁãÄÊÖãÂà∑Êñ∞Â§±Êïó: ${n.message}`)}finally{this.loading=!1}},async refreshDataSources(){try{this.dataSourceStatus=await ke.getDataSourceStatus(),this.addLog("info","Êï∏ÊìöÊ∫êÁãÄÊÖãÂ∑≤Êõ¥Êñ∞")}catch(n){this.addLog("error",`Êï∏ÊìöÊ∫êÁãÄÊÖãÊõ¥Êñ∞Â§±Êïó: ${n.message}`)}},refreshSchedulerStatus(){this.status=ne.getStatus(),this.startTime=ne.getStartTime(),this.addLog("info","Ë™øÂ∫¶Âô®ÁãÄÊÖãÂ∑≤Êõ¥Êñ∞")},updatePerformanceMetrics(){const n=G.getStats();_e.getAllMetrics(),this.performanceScore=Math.min(100,60+n.totalSize*2),this.cacheHitRate=Math.min(100,50+n.totalSize*3),this.addLog("info","ÊïàËÉΩÊåáÊ®ôÂ∑≤Êõ¥Êñ∞")},updateSystemHealth(){var a,o;const n=(o=(a=this.dataSourceStatus)==null?void 0:a.precomputed)!=null&&o.available?100:70,e=this.status.isRunning?100:50;this.systemHealth={overall:Math.round((n+this.performanceScore+e)/3),dataSource:n,performance:this.performanceScore,updates:e}},async toggleScheduler(){this.loading=!0;try{this.status.isRunning?(ne.stop(),this.addLog("info","Ëá™ÂãïÊõ¥Êñ∞Ë™øÂ∫¶Âô®Â∑≤ÂÅúÊ≠¢")):(ne.start(),this.addLog("info","Ëá™ÂãïÊõ¥Êñ∞Ë™øÂ∫¶Âô®Â∑≤ÂïüÂãï")),this.refreshSchedulerStatus()}catch(n){this.addLog("error",`Ë™øÂ∫¶Âô®Êìç‰ΩúÂ§±Êïó: ${n.message}`)}finally{this.loading=!1}},async triggerUpdate(n){this.loading=!0,this.addLog("info",`Ëß∏Áôº ${n} Êõ¥Êñ∞...`);try{n==="technicalIndicators"?(G.clear(),this.addLog("info","ÊäÄË°ìÊåáÊ®ôÂø´ÂèñÂ∑≤Ê∏ÖÈô§")):n==="metadata"&&(G.clear(),this.addLog("info","ÂÖÉÊï∏ÊìöÂø´ÂèñÂ∑≤Ê∏ÖÈô§")),await this.refreshDataSources()}catch(e){this.addLog("error",`${n} Êõ¥Êñ∞Â§±Êïó: ${e.message}`)}finally{this.loading=!1}},async clearAllCaches(){if(confirm("Á¢∫ÂÆöË¶ÅÊ∏ÖÈô§ÊâÄÊúâÂø´ÂèñÂóéÔºüÈÄôÂ∞áÂΩ±ÈüøÁ≥ªÁµ±ÊïàËÉΩ„ÄÇ")){this.loading=!0,this.addLog("warning","ÈñãÂßãÊ∏ÖÈô§ÊâÄÊúâÂø´Âèñ...");try{G.clear(),localStorage.clear(),sessionStorage.clear(),this.addLog("info","ÊâÄÊúâÂø´ÂèñÂ∑≤Ê∏ÖÈô§"),await this.refreshAllStatus()}catch(n){this.addLog("error",`Ê∏ÖÈô§Âø´ÂèñÂ§±Êïó: ${n.message}`)}finally{this.loading=!1}}},async testSystemHealth(){this.testing=!0,this.addLog("info","ÈñãÂßãÁ≥ªÁµ±ÂÅ•Â∫∑Ê™¢Êü•...");try{await new Promise(e=>setTimeout(e,2e3));const n=Math.floor(Math.random()*20)+80;this.systemHealth.overall=n,this.addLog("info",`Á≥ªÁµ±ÂÅ•Â∫∑Ê™¢Êü•ÂÆåÊàêÔºåÂæóÂàÜ: ${n}%`)}catch(n){this.addLog("error",`Á≥ªÁµ±ÂÅ•Â∫∑Ê™¢Êü•Â§±Êïó: ${n.message}`)}finally{this.testing=!1}},updatePreferences(){ke.setPreferences({preferPrecomputed:this.preferences.preferPrecomputed,fallbackToRealtime:this.preferences.fallbackToRealtime}),this.addLog("info","Á≥ªÁµ±ÂÅèÂ•ΩË®≠ÂÆöÂ∑≤Êõ¥Êñ∞")},startStatusUpdates(){setInterval(()=>{this.loading||(this.refreshSchedulerStatus(),this.updatePerformanceMetrics(),this.updateSystemHealth())},3e4)},getHealthStatus(n){return n>=90?"ÂÑ™ÁßÄ":n>=80?"ËâØÂ•Ω":n>=70?"‰∏ÄËà¨":"ÈúÄË¶ÅÈóúÊ≥®"},getDataAgeClass(n){const e=n/36e5;return e<1?"fresh":e<6?"stale":"very-stale"},formatTime(n){return n?new Date(n).toLocaleString("zh-TW"):"N/A"},formatDataAge(n){if(!n)return"N/A";const e=Math.floor(n/(1e3*60)),a=Math.floor(e/60),o=Math.floor(a/24);return o>0?`${o} Â§©Ââç`:a>0?`${a} Â∞èÊôÇÂâç`:`${e} ÂàÜÈêòÂâç`},addLog(n,e){this.systemLogs.push({id:++this.logIdCounter,timestamp:new Date().toISOString(),level:n,message:e}),this.systemLogs.length>100&&(this.systemLogs=this.systemLogs.slice(-100))},clearLogs(){this.systemLogs=[],this.logIdCounter=0}}},Tp={class:"system-manager"},Dp={class:"overview-section"},Ap={class:"overview-grid"},Ip={class:"card-content"},xp={class:"health-score"},Mp={class:"health-status"},Np={class:"overview-card"},Pp={class:"card-content"},Lp={class:"data-sources"},$p={class:"overview-card"},Rp={class:"card-content"},Ep={class:"update-info"},Fp={class:"overview-card"},Op={class:"card-content"},Up={class:"performance-score"},Vp={class:"performance-info"},Wp={class:"details-section"},Bp={class:"details-grid"},Hp={class:"detail-card"},qp={class:"card-header"},zp=["disabled"],jp={class:"data-source-list"},Gp={class:"source-header"},Qp={key:0,class:"source-details"},Xp={class:"detail-row"},Kp={class:"detail-row"},Yp={class:"detail-row"},Jp={class:"source-item available"},Zp={class:"source-details"},ev={class:"detail-row"},tv={class:"detail-row"},sv={class:"detail-row"},av={class:"detail-card"},nv={class:"card-header"},iv=["disabled"],ov={class:"update-details"},rv={class:"update-item"},lv={class:"update-header"},cv={class:"update-info"},dv={class:"detail-row"},uv={class:"detail-row"},hv={class:"detail-row"},gv={class:"update-actions"},mv=["disabled"],fv={class:"update-item"},pv={class:"update-header"},vv={class:"update-info"},yv={class:"detail-row"},wv={class:"detail-row"},Sv={class:"update-actions"},bv=["disabled"],_v={class:"control-section"},kv={class:"control-grid"},Cv=["disabled"],Tv=["disabled"],Dv={key:0,class:"advanced-section"},Av={class:"settings-grid"},Iv={class:"setting-group"},xv={class:"setting-item"},Mv={class:"setting-item"},Nv={class:"setting-group"},Pv={class:"setting-item"},Lv={class:"setting-item"},$v={class:"setting-group"},Rv={class:"setting-item"},Ev={class:"setting-item"},Fv={class:"logs-section"},Ov={class:"logs-header"},Uv={class:"logs-container"},Vv={class:"log-time"},Wv={class:"log-level"},Bv={class:"log-message"},Hv={key:0,class:"no-logs"};function qv(n,e,a,o,s,i){var r,c,d,g,f,m,p,D,S,T,_,$,I,N,y,B,C,M;return u(),h("div",Tp,[e[66]||(e[66]=t("div",{class:"manager-header"},[t("h2",null,"Control Panel"),t("p",null,"Áõ£ÊéßÂíåÁÆ°ÁêÜÊäïË≥áÂÑÄË°®ÊùøÁöÑÂêÑÈ†ÖÁ≥ªÁµ±ÂäüËÉΩ")],-1)),t("div",Dp,[t("div",Ap,[t("div",{class:w(["overview-card",{healthy:s.systemHealth.overall>=80}])},[e[22]||(e[22]=t("div",{class:"card-icon"},"üéØ",-1)),t("div",Ip,[e[21]||(e[21]=t("h3",null,"Á≥ªÁµ±ÂÅ•Â∫∑Â∫¶",-1)),t("div",xp,l(s.systemHealth.overall)+"%",1),t("div",Mp,l(i.getHealthStatus(s.systemHealth.overall)),1)])],2),t("div",Np,[e[26]||(e[26]=t("div",{class:"card-icon"},"üìä",-1)),t("div",Pp,[e[25]||(e[25]=t("h3",null,"Êï∏ÊìöÊ∫êÁãÄÊÖã",-1)),t("div",Lp,[t("span",{class:w(["source-item",{active:(c=(r=s.dataSourceStatus)==null?void 0:r.precomputed)==null?void 0:c.available}])}," È†êË®àÁÆó "+l((g=(d=s.dataSourceStatus)==null?void 0:d.precomputed)!=null&&g.available?"‚úÖ":"‚ùå"),3),e[23]||(e[23]=t("span",{class:"source-item active"},"Âø´Âèñ ‚úÖ",-1)),e[24]||(e[24]=t("span",{class:"source-item active"},"ÂØ¶ÊôÇ ‚úÖ",-1))])])]),t("div",$p,[e[28]||(e[28]=t("div",{class:"card-icon"},"üîÑ",-1)),t("div",Rp,[e[27]||(e[27]=t("h3",null,"Ëá™ÂãïÊõ¥Êñ∞",-1)),t("div",{class:w(["update-status",i.schedulerStatusClass])},l(s.status.isRunning?"ÈÅãË°å‰∏≠":"Â∑≤ÂÅúÊ≠¢"),3),t("div",Ep," Ê¥ªÂãï‰ªªÂãô: "+l(((f=s.status.activeIntervals)==null?void 0:f.length)||0)+" ÂÄã ",1)])]),t("div",Fp,[e[30]||(e[30]=t("div",{class:"card-icon"},"‚ö°",-1)),t("div",Op,[e[29]||(e[29]=t("h3",null,"ÊïàËÉΩÁãÄÊÖã",-1)),t("div",Up,l(s.performanceScore)+"%",1),t("div",Vp," Âø´ÂèñÂëΩ‰∏≠Áéá: "+l(s.cacheHitRate)+"% ",1)])])])]),t("div",Wp,[t("div",Bp,[t("div",Hp,[t("div",qp,[e[31]||(e[31]=t("h3",null,"üìä Êï∏ÊìöÊ∫êÁÆ°ÁêÜ",-1)),t("button",{onClick:e[0]||(e[0]=(...v)=>i.refreshDataSources&&i.refreshDataSources(...v)),class:"btn btn-sm",disabled:s.loading},l((s.loading,"üîÑ"))+" Âà∑Êñ∞ ",9,zp)]),t("div",jp,[t("div",{class:w(["source-item",{available:(p=(m=s.dataSourceStatus)==null?void 0:m.precomputed)==null?void 0:p.available}])},[t("div",Gp,[e[32]||(e[32]=t("h4",null,"È†êË®àÁÆóÊï∏Êìö",-1)),t("span",{class:w(["status-badge",(S=(D=s.dataSourceStatus)==null?void 0:D.precomputed)!=null&&S.available?"success":"error"])},l((_=(T=s.dataSourceStatus)==null?void 0:T.precomputed)!=null&&_.available?"ÂèØÁî®":"‰∏çÂèØÁî®"),3)]),(I=($=s.dataSourceStatus)==null?void 0:$.precomputed)!=null&&I.available?(u(),h("div",Qp,[t("div",Xp,[e[33]||(e[33]=t("span",null,"ËÇ°Á•®Êï∏Èáè:",-1)),t("span",null,l(((N=s.dataSourceStatus.precomputed.symbols)==null?void 0:N.length)||0),1)]),t("div",Kp,[e[34]||(e[34]=t("span",null,"ÊàêÂäü/Â§±Êïó:",-1)),t("span",null,l(s.dataSourceStatus.precomputed.successful||0)+"/"+l(s.dataSourceStatus.precomputed.failed||0),1)]),t("div",Yp,[e[35]||(e[35]=t("span",null,"ÊúÄÂæåÊõ¥Êñ∞:",-1)),t("span",null,l(i.formatTime(s.dataSourceStatus.precomputed.lastUpdate)),1)])])):k("",!0)],2),t("div",Jp,[e[39]||(e[39]=t("div",{class:"source-header"},[t("h4",null,"Âø´ÂèñÁ≥ªÁµ±"),t("span",{class:"status-badge success"},"Ê≠£Â∏∏")],-1)),t("div",Zp,[t("div",ev,[e[36]||(e[36]=t("span",null,"ÂÖßÂ≠òÂø´Âèñ:",-1)),t("span",null,l(((B=(y=s.dataSourceStatus)==null?void 0:y.cache)==null?void 0:B.memoryCache)||0)+" È†ÖÁõÆ",1)]),t("div",tv,[e[37]||(e[37]=t("span",null,"Êú¨Âú∞Â≠òÂÑ≤:",-1)),t("span",null,l(((M=(C=s.dataSourceStatus)==null?void 0:C.cache)==null?void 0:M.localStorageCache)||0)+" È†ÖÁõÆ",1)]),t("div",sv,[e[38]||(e[38]=t("span",null,"ÂëΩ‰∏≠Áéá:",-1)),t("span",null,l(s.cacheHitRate)+"%",1)])])])])]),t("div",av,[t("div",nv,[e[40]||(e[40]=t("h3",null,"üîÑ Ëá™ÂãïÊõ¥Êñ∞ÁÆ°ÁêÜ",-1)),t("button",{onClick:e[1]||(e[1]=(...v)=>i.toggleScheduler&&i.toggleScheduler(...v)),class:w(i.schedulerButtonClass),disabled:s.loading},l(i.schedulerButtonText),11,iv)]),t("div",ov,[t("div",rv,[t("div",lv,[e[41]||(e[41]=t("h4",null,"ÊäÄË°ìÊåáÊ®ô",-1)),t("div",{class:w(["status-indicator",i.technicalIndicatorsStatusClass])},l(i.technicalIndicatorsStatus),3)]),t("div",cv,[t("div",dv,[e[42]||(e[42]=t("span",null,"ÊúÄÂæåÊõ¥Êñ∞:",-1)),t("span",null,l(i.formatTime(i.technicalIndicatorsLastUpdate)),1)]),t("div",uv,[e[43]||(e[43]=t("span",null,"Êï∏ÊìöÂπ¥ÈΩ°:",-1)),t("span",{class:w(i.getDataAgeClass(i.technicalIndicatorsAge))},l(i.formatDataAge(i.technicalIndicatorsAge)),3)]),t("div",hv,[e[44]||(e[44]=t("span",null,"ÊàêÂäüÁéá:",-1)),t("span",null,l(i.technicalIndicatorsSuccessRate)+"%",1)])]),t("div",gv,[t("button",{onClick:e[2]||(e[2]=v=>i.triggerUpdate("technicalIndicators")),class:"btn btn-sm btn-primary",disabled:s.loading}," Ê∏ÖÈô§Âø´Âèñ ",8,mv)])]),t("div",fv,[t("div",pv,[e[45]||(e[45]=t("h4",null,"ÂÖÉÊï∏Êìö",-1)),t("div",{class:w(["status-indicator",i.metadataStatusClass])},l(i.metadataStatus),3)]),t("div",vv,[t("div",yv,[e[46]||(e[46]=t("span",null,"ÊúÄÂæåÊõ¥Êñ∞:",-1)),t("span",null,l(i.formatTime(i.metadataLastUpdate)),1)]),t("div",wv,[e[47]||(e[47]=t("span",null,"Êï∏ÊìöÂπ¥ÈΩ°:",-1)),t("span",{class:w(i.getDataAgeClass(i.metadataAge))},l(i.formatDataAge(i.metadataAge)),3)])]),t("div",Sv,[t("button",{onClick:e[3]||(e[3]=v=>i.triggerUpdate("metadata")),class:"btn btn-sm btn-primary",disabled:s.loading}," Ê∏ÖÈô§Âø´Âèñ ",8,bv)])])])])])]),t("div",_v,[e[52]||(e[52]=t("div",{class:"control-header"},[t("h3",null,"üéõÔ∏è Á≥ªÁµ±ÊéßÂà∂")],-1)),t("div",kv,[t("button",{onClick:e[4]||(e[4]=(...v)=>i.refreshAllStatus&&i.refreshAllStatus(...v)),class:"control-btn primary",disabled:s.loading},[e[48]||(e[48]=t("span",{class:"btn-icon"},"üîÑ",-1)),A(" "+l(s.loading?"Âà∑Êñ∞‰∏≠...":"ÂÖ®Èù¢Âà∑Êñ∞"),1)],8,Cv),t("button",{onClick:e[5]||(e[5]=(...v)=>i.clearAllCaches&&i.clearAllCaches(...v)),class:"control-btn warning"},[...e[49]||(e[49]=[t("span",{class:"btn-icon"},"üóëÔ∏è",-1),A(" Ê∏ÖÈô§ÊâÄÊúâÂø´Âèñ ",-1)])]),t("button",{onClick:e[6]||(e[6]=(...v)=>i.testSystemHealth&&i.testSystemHealth(...v)),class:"control-btn info",disabled:s.testing},[e[50]||(e[50]=t("span",{class:"btn-icon"},"üîç",-1)),A(" "+l(s.testing?"Ê∏¨Ë©¶‰∏≠...":"Á≥ªÁµ±ÂÅ•Ê™¢"),1)],8,Tv),t("button",{onClick:e[7]||(e[7]=v=>s.showAdvanced=!s.showAdvanced),class:"control-btn secondary"},[e[51]||(e[51]=t("span",{class:"btn-icon"},"‚öôÔ∏è",-1)),A(" "+l(s.showAdvanced?"Èö±ËóèÈÄ≤Èöé":"ÈÄ≤ÈöéË®≠ÂÆö"),1)])])]),s.showAdvanced?(u(),h("div",Dv,[e[64]||(e[64]=t("div",{class:"advanced-header"},[t("h3",null,"‚öôÔ∏è ÈÄ≤ÈöéË®≠ÂÆö")],-1)),t("div",Av,[t("div",Iv,[e[55]||(e[55]=t("h4",null,"Êï∏ÊìöÊ∫êÂÅèÂ•Ω",-1)),t("div",xv,[t("label",null,[H(t("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=v=>s.preferences.preferPrecomputed=v),onChange:e[9]||(e[9]=(...v)=>i.updatePreferences&&i.updatePreferences(...v))},null,544),[[re,s.preferences.preferPrecomputed]]),e[53]||(e[53]=A(" ÂÑ™ÂÖà‰ΩøÁî®È†êË®àÁÆóÊï∏Êìö ",-1))])]),t("div",Mv,[t("label",null,[H(t("input",{type:"checkbox","onUpdate:modelValue":e[10]||(e[10]=v=>s.preferences.fallbackToRealtime=v),onChange:e[11]||(e[11]=(...v)=>i.updatePreferences&&i.updatePreferences(...v))},null,544),[[re,s.preferences.fallbackToRealtime]]),e[54]||(e[54]=A(" ÂÖÅË®±ÂõûÈÄÄÂà∞ÂØ¶ÊôÇË®àÁÆó ",-1))])])]),t("div",Nv,[e[60]||(e[60]=t("h4",null,"Êõ¥Êñ∞È†ªÁéá",-1)),t("div",Pv,[e[57]||(e[57]=t("label",null,"ÊäÄË°ìÊåáÊ®ôÊõ¥Êñ∞ÈñìÈöî (ÂàÜÈêò):",-1)),H(t("select",{"onUpdate:modelValue":e[12]||(e[12]=v=>s.preferences.technicalIndicatorsInterval=v),onChange:e[13]||(e[13]=(...v)=>i.updatePreferences&&i.updatePreferences(...v))},[...e[56]||(e[56]=[t("option",{value:"5"},"5 ÂàÜÈêò",-1),t("option",{value:"15"},"15 ÂàÜÈêò",-1),t("option",{value:"30"},"30 ÂàÜÈêò",-1),t("option",{value:"60"},"1 Â∞èÊôÇ",-1)])],544),[[gt,s.preferences.technicalIndicatorsInterval]])]),t("div",Lv,[e[59]||(e[59]=t("label",null,"ÂÖÉÊï∏ÊìöÊõ¥Êñ∞ÈñìÈöî (Â∞èÊôÇ):",-1)),H(t("select",{"onUpdate:modelValue":e[14]||(e[14]=v=>s.preferences.metadataInterval=v),onChange:e[15]||(e[15]=(...v)=>i.updatePreferences&&i.updatePreferences(...v))},[...e[58]||(e[58]=[t("option",{value:"6"},"6 Â∞èÊôÇ",-1),t("option",{value:"12"},"12 Â∞èÊôÇ",-1),t("option",{value:"24"},"24 Â∞èÊôÇ",-1),t("option",{value:"168"},"1 ÈÄ±",-1)])],544),[[gt,s.preferences.metadataInterval]])])]),t("div",$v,[e[63]||(e[63]=t("h4",null,"ÊïàËÉΩË®≠ÂÆö",-1)),t("div",Rv,[t("label",null,[H(t("input",{type:"checkbox","onUpdate:modelValue":e[16]||(e[16]=v=>s.preferences.enablePerformanceMonitoring=v),onChange:e[17]||(e[17]=(...v)=>i.updatePreferences&&i.updatePreferences(...v))},null,544),[[re,s.preferences.enablePerformanceMonitoring]]),e[61]||(e[61]=A(" ÂïüÁî®ÊïàËÉΩÁõ£Êéß ",-1))])]),t("div",Ev,[t("label",null,[H(t("input",{type:"checkbox","onUpdate:modelValue":e[18]||(e[18]=v=>s.preferences.enableCacheWarmup=v),onChange:e[19]||(e[19]=(...v)=>i.updatePreferences&&i.updatePreferences(...v))},null,544),[[re,s.preferences.enableCacheWarmup]]),e[62]||(e[62]=A(" ÂïüÁî®Âø´ÂèñÈ†êÁÜ± ",-1))])])])])])):k("",!0),t("div",Fv,[t("div",Ov,[e[65]||(e[65]=t("h3",null,"üìã Á≥ªÁµ±Êó•Ë™å",-1)),t("button",{onClick:e[20]||(e[20]=(...v)=>i.clearLogs&&i.clearLogs(...v)),class:"btn btn-sm"},"Ê∏ÖÈô§Êó•Ë™å")]),t("div",Uv,[(u(!0),h(F,null,O(s.systemLogs.slice(-10),v=>(u(),h("div",{key:v.id,class:w(["log-entry",v.level])},[t("span",Vv,l(i.formatTime(v.timestamp)),1),t("span",Wv,l(v.level.toUpperCase()),1),t("span",Bv,l(v.message),1)],2))),128)),s.systemLogs.length===0?(u(),h("div",Hv," Êö´ÁÑ°Á≥ªÁµ±Êó•Ë™å ")):k("",!0)])])])}const zv=E(Cp,[["render",qv],["__scopeId","data-v-729e0df5"]]),jv=[{path:"/",redirect:"/market-overview"},{path:"/market-overview",component:_n,name:"market-overview"},{path:"/stock-overview",component:Bo,name:"stock-overview"},{path:"/stock-overview/symbols/:symbol",component:Ad,name:"stock-detail"},{path:"/market-dashboard",redirect:"/market-overview"},{path:"/stock-dashboard",redirect:"/stock-overview"},{path:"/stock-dashboard/symbols/:symbol",redirect:n=>`/stock-overview/symbols/${n.params.symbol}`},{path:"/settings",component:jo,name:"settings"},{path:"/top-stories-test",component:Yd,name:"top-stories-test"},{path:"/stock-market-insight-test",component:Iu,name:"stock-market-insight-test"},{path:"/yahoo-finance-test",component:Nh,name:"yahoo-finance-test"},{path:"/proxy-diagnostic",component:um,name:"proxy-diagnostic"},{path:"/technical-validation",component:Jh,name:"technical-validation"},{path:"/metadata-test",component:Lg,name:"metadata-test"},{path:"/technical-manager",component:Bm,name:"technical-manager"},{path:"/auto-update-monitor",component:kp,name:"auto-update-monitor"},{path:"/system-manager",component:zv,name:"system-manager"},{path:"/:pathMatch(.*)*",redirect:"/market-overview"}],Gv=rs({history:ls(),routes:jv}),ts=cs(Ts);ts.use(Gv);ts.mount("#app");setTimeout(()=>{console.log("üöÄ Initializing auto-update scheduler..."),ne.start()},1e4);setTimeout(()=>{console.log("üî• Initializing cache warmup service..."),ft.start()},5e3);export{rt as p};
//# sourceMappingURL=index-DM0hlcx1.js.map
