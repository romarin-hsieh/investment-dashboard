var Qt=Object.defineProperty;var Yt=(i,e,a)=>e in i?Qt(i,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[e]=a;var he=(i,e,a)=>Yt(i,typeof e!="symbol"?e+"":e,a);import{c as d,a as t,b as Y,d as L,w as Je,r as Xt,e as F,o as c,f as w,g as b,t as l,n as Z,h as p,F as U,i as $,j as Jt,k as W,v as de,l as ht,m as Ft,p as ee,q as Vt,s as Zt,u as es,x as ts}from"./vendor-KXwpbHL3.js";import{s as k,e as ue,u as ss,l as nt,o as E,n as I,b as G,a as gt,r as fe,c as q,Z as as}from"./utils-C6BRd-cb.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function a(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(s){if(s.ep)return;s.ep=!0;const n=a(s);fetch(s.href,n)}})();const O=(i,e)=>{const a=i.__vccOpts||i;for(const[o,s]of e)a[o]=s;return a},ns={name:"Layout"},is={class:"layout"},os={class:"header"},rs={class:"nav"},ls={class:"container"},cs={class:"nav-list"},ds={class:"main-content"},us={class:"container"};function hs(i,e,a,o,s,n){const r=F("router-link");return c(),d("div",is,[t("header",os,[t("nav",rs,[t("div",ls,[e[3]||(e[3]=t("div",{class:"nav-brand"},[t("h1",null,"Investment Dashboard")],-1)),t("ul",cs,[t("li",null,[L(r,{to:"/market-overview",class:"nav-link"},{default:Je(()=>[...e[0]||(e[0]=[w("Market Overview",-1)])]),_:1})]),t("li",null,[L(r,{to:"/stock-overview",class:"nav-link"},{default:Je(()=>[...e[1]||(e[1]=[w("Stock Overview",-1)])]),_:1})]),t("li",null,[L(r,{to:"/system-manager",class:"nav-link"},{default:Je(()=>[...e[2]||(e[2]=[w("Control Panel",-1)])]),_:1})])])])])]),t("main",ds,[t("div",us,[Xt(i.$slots,"default",{},void 0)])]),e[4]||(e[4]=Y('<footer class="footer" data-v-4a6f8141><div class="container" data-v-4a6f8141><div class="footer-content" data-v-4a6f8141><span class="copyright" data-v-4a6f8141>¬© 2025 Investment Dashboard POC</span><span class="separator" data-v-4a6f8141>‚Ä¢</span><span class="attribution" data-v-4a6f8141> Market data powered by <a href="https://www.tradingview.com/" target="_blank" rel="noopener noreferrer" class="tradingview-link" data-v-4a6f8141> TradingView </a></span></div></div></footer>',1))])}const gs=O(ns,[["render",hs],["__scopeId","data-v-4a6f8141"]]),ms={name:"App",components:{Layout:gs}},fs={id:"app"};function ps(i,e,a,o,s,n){const r=F("router-view"),u=F("Layout");return c(),d("div",fs,[L(u,null,{default:Je(()=>[L(r)]),_:1})])}const vs=O(ms,[["render",ps]]);class ys{constructor(){this.preloadedScripts=new Set,this.scriptPromises=new Map}preloadScript(e){if(this.preloadedScripts.has(e))return Promise.resolve();if(this.scriptPromises.has(e))return this.scriptPromises.get(e);const a=new Promise((o,s)=>{const n=document.createElement("link");n.rel="preload",n.as="script",n.href=e,n.crossOrigin="anonymous",n.onload=()=>{this.preloadedScripts.add(e),o()},n.onerror=()=>{s(new Error(`Failed to preload script: ${e}`))},document.head.appendChild(n)});return this.scriptPromises.set(e,a),a}async preloadAllScripts(){const e=["https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js","https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js"];try{await Promise.all(e.map(a=>this.preloadScript(a))),console.log("All TradingView scripts preloaded successfully")}catch(a){console.warn("Some TradingView scripts failed to preload:",a)}}isPreloaded(e){return this.preloadedScripts.has(e)}}const ct=new ys;typeof window<"u"&&window.addEventListener("load",()=>{setTimeout(()=>{ct.preloadAllScripts()},1e3)});let ws=class{constructor(){this.metrics=new Map,this.startTimes=new Map}start(e){this.startTimes.set(e,performance.now()),console.log(`‚è±Ô∏è Started timing: ${e}`)}end(e){const a=this.startTimes.get(e);if(!a)return console.warn(`No start time found for: ${e}`),null;const o=performance.now()-a;return this.metrics.set(e,o),this.startTimes.delete(e),console.log(`‚úÖ Completed: ${e} - ${o.toFixed(2)}ms`),o}getMetric(e){return this.metrics.get(e)}getAllMetrics(){return Object.fromEntries(this.metrics)}clear(){this.metrics.clear(),this.startTimes.clear()}async measureAsync(e,a){this.start(e);try{const o=await a();return this.end(e),o}catch(o){throw this.end(e),console.error(`‚ùå Error in ${e}:`,o),o}}generateReport(){const e=this.getAllMetrics(),a={timestamp:new Date().toISOString(),metrics:e,summary:{totalOperations:Object.keys(e).length,totalTime:Object.values(e).reduce((o,s)=>o+s,0),averageTime:Object.values(e).reduce((o,s)=>o+s,0)/Object.keys(e).length||0,slowestOperation:this.getSlowestOperation(),fastestOperation:this.getFastestOperation()}};return console.log("üìä Performance Report:",a),a}getSlowestOperation(){let e={name:null,time:0};for(const[a,o]of this.metrics)o>e.time&&(e={name:a,time:o});return e}getFastestOperation(){let e={name:null,time:1/0};for(const[a,o]of this.metrics)o<e.time&&(e={name:a,time:o});return e.time===1/0?{name:null,time:0}:e}checkPerformanceWarnings(){const e=[],a=this.getAllMetrics();Object.entries(a).forEach(([s,n])=>{n>5e3&&e.push({type:"SLOW_OPERATION",operation:s,time:n,message:`Operation "${s}" took ${n.toFixed(2)}ms (>5s)`})});const o=Object.values(a).reduce((s,n)=>s+n,0);return o>1e4&&e.push({type:"SLOW_TOTAL_LOAD",time:o,message:`Total load time ${o.toFixed(2)}ms (>10s)`}),e.length>0&&console.warn("‚ö†Ô∏è Performance Warnings:",e),e}};const Q=new ws,it={STOCK_OVERVIEW_LOAD:"stock_overview_total_load",QUOTES_FETCH:"quotes_fetch",DAILY_DATA_FETCH:"daily_data_fetch",METADATA_FETCH:"metadata_fetch",SYMBOLS_CONFIG_LOAD:"symbols_config_load",SKELETON_DISPLAY:"skeleton_display_time",FIRST_CONTENT_PAINT:"first_content_paint",MARKET_DASHBOARD_LOAD:"market_dashboard_load",STOCK_DETAIL_LOAD:"stock_detail_load"};class Ss{constructor(){this.memoryCache=new Map,this.localStoragePrefix="investment_dashboard_cache_",this.defaultTTL=24*60*60*1e3}set(e,a,o=this.defaultTTL){const s={data:a,timestamp:Date.now(),ttl:o};this.memoryCache.set(e,s);try{localStorage.setItem(this.localStoragePrefix+e,JSON.stringify(s))}catch(n){console.warn("Failed to save to localStorage:",n)}}get(e){if(this.memoryCache.has(e)){const a=this.memoryCache.get(e);if(this.isValid(a))return a.data;this.memoryCache.delete(e)}try{const a=localStorage.getItem(this.localStoragePrefix+e);if(a){const o=JSON.parse(a);if(this.isValid(o))return this.memoryCache.set(e,o),o.data;localStorage.removeItem(this.localStoragePrefix+e)}}catch(a){console.warn("Failed to read from localStorage:",a)}return null}isValid(e){return!e||!e.timestamp?!1:Date.now()-e.timestamp<e.ttl}has(e){return this.get(e)!==null}delete(e){this.memoryCache.delete(e);try{localStorage.removeItem(this.localStoragePrefix+e)}catch(a){console.warn("Failed to remove from localStorage:",a)}}clear(){this.memoryCache.clear();try{Object.keys(localStorage).forEach(a=>{a.startsWith(this.localStoragePrefix)&&localStorage.removeItem(a)})}catch(e){console.warn("Failed to clear localStorage:",e)}}getStats(){const e=this.memoryCache.size;let a=0;try{a=Object.keys(localStorage).filter(s=>s.startsWith(this.localStoragePrefix)).length}catch(o){console.warn("Failed to get localStorage stats:",o)}return{memoryCache:e,localStorage:a,totalSize:e+a}}async preload(e,a,o=this.defaultTTL){if(this.has(e))return this.get(e);try{const s=await a();return this.set(e,s,o),s}catch(s){throw console.error(`Failed to preload data for key ${e}:`,s),s}}async batchPreload(e){const a=new Map,o=e.map(async({key:s,loader:n,ttl:r})=>{try{const u=await this.preload(s,n,r);a.set(s,u)}catch(u){console.error(`Failed to preload ${s}:`,u),a.set(s,null)}});return await Promise.all(o),a}}const H=new Ss,le={QUOTES_SNAPSHOT:"quotes_snapshot",DAILY_SNAPSHOT:"daily_snapshot",METADATA_BATCH:"metadata_batch",SYMBOLS_CONFIG:"symbols_config",STOCK_OVERVIEW_DATA:"stock_overview_data"},bs={QUOTES:24*60*60*1e3,DAILY_DATA:24*60*60*1e3,METADATA:24*60*60*1e3,CONFIG:60*60*1e3,TECHNICAL_INDICATORS:24*60*60*1e3};class _s{constructor(){this.updateIntervals=new Map,this.isRunning=!1,this.config={technicalIndicators:{enabled:!0,interval:24*60*60*1e3,marketHoursOnly:!0,updateTimeWindow:{start:16.5,end:17},retryAttempts:3,retryDelay:5*60*1e3},metadata:{enabled:!0,interval:24*60*60*1e3,marketHoursOnly:!0,updateTimeWindow:{start:16.5,end:17},retryAttempts:2,retryDelay:30*60*1e3},cacheCleanup:{enabled:!0,interval:6*60*60*1e3,maxAge:7*24*60*60*1e3}},this.marketHours={preMarket:{start:4,end:9.5},regular:{start:9.5,end:16},afterMarket:{start:16,end:20}}}start(){if(this.isRunning){console.log("‚ö†Ô∏è Auto update scheduler is already running");return}console.log("üöÄ Starting auto update scheduler..."),this.isRunning=!0,this.performInitialUpdate(),this.scheduleUpdates(),console.log("‚úÖ Auto update scheduler started successfully")}stop(){if(!this.isRunning){console.log("‚ö†Ô∏è Auto update scheduler is not running");return}console.log("üõë Stopping auto update scheduler...");for(const[e,a]of this.updateIntervals)clearInterval(a),console.log(`   Cleared interval: ${e}`);this.updateIntervals.clear(),this.isRunning=!1,console.log("‚úÖ Auto update scheduler stopped")}async performInitialUpdate(){console.log("üîÑ Performing initial update check...");try{this.config.technicalIndicators.enabled&&await this.checkAndUpdateTechnicalIndicators(),this.config.metadata.enabled&&await this.checkAndUpdateMetadata(),this.config.cacheCleanup.enabled&&await this.performCacheCleanup()}catch(e){console.error("‚ùå Initial update failed:",e)}}scheduleUpdates(){if(this.config.technicalIndicators.enabled){const e=setInterval(()=>this.checkAndUpdateTechnicalIndicators(),this.config.technicalIndicators.interval);this.updateIntervals.set("technicalIndicators",e),console.log(`üìä Scheduled technical indicators update every ${this.config.technicalIndicators.interval/6e4} minutes`)}if(this.config.metadata.enabled){const e=setInterval(()=>this.checkAndUpdateMetadata(),this.config.metadata.interval);this.updateIntervals.set("metadata",e),console.log(`üìã Scheduled metadata update every ${this.config.metadata.interval/36e5} hours`)}if(this.config.cacheCleanup.enabled){const e=setInterval(()=>this.performCacheCleanup(),this.config.cacheCleanup.interval);this.updateIntervals.set("cacheCleanup",e),console.log(`üßπ Scheduled cache cleanup every ${this.config.cacheCleanup.interval/36e5} hours`)}}async checkAndUpdateTechnicalIndicators(){const e="auto_update_technical_indicators";Q.start(e);try{if(console.log("üîç Checking technical indicators update..."),this.config.technicalIndicators.marketHoursOnly&&!this.isUpdateTimeWindow()){console.log("‚è∞ Outside update time window, skipping technical indicators update");return}if(!await this.checkTechnicalIndicatorsAge()){console.log("‚úÖ Technical indicators are up to date");return}console.log("üîÑ Updating technical indicators..."),await this.updateTechnicalIndicatorsData(),this.clearTechnicalIndicatorsCache(),console.log("‚úÖ Technical indicators updated successfully")}catch(a){console.error("‚ùå Technical indicators update failed:",a),await this.retryUpdate("technicalIndicators",a)}finally{Q.end(e)}}async checkAndUpdateMetadata(){const e="auto_update_metadata";Q.start(e);try{if(console.log("üîç Checking metadata update..."),!await this.checkMetadataAge()){console.log("‚úÖ Metadata is up to date");return}console.log("üîÑ Updating metadata..."),await this.updateMetadataData(),this.clearMetadataCache(),console.log("‚úÖ Metadata updated successfully")}catch(a){console.error("‚ùå Metadata update failed:",a),await this.retryUpdate("metadata",a)}finally{Q.end(e)}}async checkTechnicalIndicatorsAge(){try{const e=await fetch("/data/technical-indicators/latest_index.json");if(!e.ok)return console.log("üìä No precomputed data found, update needed"),!0;const a=await e.json(),o=new Date(a.generatedAt),n=(new Date-o)/(1e3*60*60);return console.log(`üìä Technical indicators age: ${n.toFixed(1)} hours`),n>24}catch(e){return console.error("Error checking technical indicators age:",e),!0}}async checkMetadataAge(){try{const e=H.get(le.METADATA_BATCH);if(!e)return!0;const o=(Date.now()-e.timestamp)/(1e3*60*60);return console.log(`üìã Metadata cache age: ${o.toFixed(1)} hours`),o>24}catch(e){return console.error("Error checking metadata age:",e),!0}}async updateTechnicalIndicatorsData(){console.log("üîÑ Technical indicators update requested"),console.log("‚ö†Ô∏è Note: Actual precomputation requires server-side execution");try{this.clearTechnicalIndicatorsCache(),console.log("‚úÖ Technical indicators cache cleared, data will be refreshed on next load")}catch(e){throw console.error("Failed to update technical indicators:",e),e}}async updateMetadataData(){H.delete(le.METADATA_BATCH),console.log("üóëÔ∏è Cleared metadata cache to force refresh")}clearTechnicalIndicatorsCache(){try{const e=[];for(let a=0;a<localStorage.length;a++){const o=localStorage.key(a);o&&(o.includes("technical_indicators_")||o.includes("precomputed_")||o.includes("TECHNICAL_INDICATORS")||o.includes("hybrid_technical_"))&&e.push(o)}e.forEach(a=>{localStorage.removeItem(a),console.log(`üóëÔ∏è Cleared cache key: ${a}`)}),typeof H<"u"&&H.clear&&console.log("üóëÔ∏è Cleared performance cache items"),console.log(`‚úÖ Cleared ${e.length} technical indicators cache entries`)}catch(e){console.error("Error clearing technical indicators cache:",e)}}clearMetadataCache(){H.delete(le.METADATA_BATCH),H.delete(le.STOCK_OVERVIEW_DATA),console.log("üóëÔ∏è Cleared metadata and stock overview cache")}async performCacheCleanup(){console.log("üßπ Performing cache cleanup...");try{const e=H.getStats();console.log("üìä Cache stats before cleanup:",e);const a=H.getStats();console.log("üìä Cache stats after cleanup:",a),console.log("‚úÖ Cache cleanup completed")}catch(e){console.error("‚ùå Cache cleanup failed:",e)}}async retryUpdate(e,a){const o=this.config[e];!o||!o.retryAttempts||(console.log(`üîÑ Retrying ${e} update in ${o.retryDelay/6e4} minutes...`),setTimeout(async()=>{try{e==="technicalIndicators"?await this.checkAndUpdateTechnicalIndicators():e==="metadata"&&await this.checkAndUpdateMetadata()}catch(s){console.error(`‚ùå Retry failed for ${e}:`,s)}},o.retryDelay))}isUpdateTimeWindow(){const e=new Date,a=this.convertToEST(e),o=a.getHours()+a.getMinutes()/60,s=this.config.technicalIndicators.updateTimeWindow,n=o>=s.start&&o<=s.end;return n&&console.log(`üìÖ In update time window: ${a.toLocaleTimeString("en-US",{timeZone:"America/New_York"})} EST`),n}isMarketHours(){const e=new Date,a=this.convertToEST(e),o=a.getHours()+a.getMinutes()/60;return o>=this.marketHours.preMarket.start&&o<=this.marketHours.preMarket.end||o>=this.marketHours.regular.start&&o<=this.marketHours.regular.end||o>=this.marketHours.afterMarket.start&&o<=this.marketHours.afterMarket.end}convertToEST(e){const o=new Intl.DateTimeFormat("en-US",{timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).formatToParts(e),s=parseInt(o.find(y=>y.type==="year").value),n=parseInt(o.find(y=>y.type==="month").value)-1,r=parseInt(o.find(y=>y.type==="day").value),u=parseInt(o.find(y=>y.type==="hour").value),h=parseInt(o.find(y=>y.type==="minute").value),g=parseInt(o.find(y=>y.type==="second").value);return new Date(s,n,r,u,h,g)}getStatus(){return{isRunning:this.isRunning,activeIntervals:Array.from(this.updateIntervals.keys()),config:this.config,nextUpdates:this.getNextUpdateTimes()}}getNextUpdateTimes(){const e=Date.now();return{technicalIndicators:new Date(e+this.config.technicalIndicators.interval),metadata:new Date(e+this.config.metadata.interval),cacheCleanup:new Date(e+this.config.cacheCleanup.interval)}}async triggerManualUpdate(e="all"){console.log(`üîÑ Manual update triggered: ${e}`);try{(e==="all"||e==="technicalIndicators")&&await this.checkAndUpdateTechnicalIndicators(),(e==="all"||e==="metadata")&&await this.checkAndUpdateMetadata(),(e==="all"||e==="cache")&&await this.performCacheCleanup(),console.log("‚úÖ Manual update completed")}catch(a){throw console.error("‚ùå Manual update failed:",a),a}}}const J=new _s;typeof window<"u"&&window.location.hostname!=="localhost"&&setTimeout(()=>{J.start()},3e4);class ks{constructor(){this.baseUrl="/data/technical-indicators/",this.cache=new Map,this.cacheTimeout=60*60*1e3}getTodayString(){return new Date().toISOString().split("T")[0]}async getTechnicalIndicators(e){const a=`precomputed_${e}`;if(this.cache.has(a)){const o=this.cache.get(a);if(Date.now()-o.timestamp<this.cacheTimeout)return console.log(`Using precomputed cache for ${e}`),o.data}try{const o=this.getTodayString(),s=`${this.baseUrl}${o}_${e}.json`;console.log(`Fetching precomputed data for ${e} from ${s}`);let n=await fetch(s);if(!n.ok){console.log(`Today's data not found for ${e}, trying latest...`);const h=await fetch(`${this.baseUrl}latest_index.json`);if(h.ok){const g=await h.json();if(g.symbols.includes(e)){const y=`${this.baseUrl}${g.date}_${e}.json`;n=await fetch(y)}}}if(!n.ok)throw new Error(`Precomputed data not found for ${e}`);const r=await n.json(),u={...r.indicators,source:"Precomputed",lastUpdated:r.computedAt,dataAge:this.calculateDataAge(r.computedAt),precomputedDate:r.date};return this.cache.set(a,{data:u,timestamp:Date.now()}),console.log(`‚úÖ Loaded precomputed data for ${e} (age: ${u.dataAge})`),u}catch(o){throw console.error(`Failed to load precomputed data for ${e}:`,o),o}}calculateDataAge(e){const a=new Date,o=new Date(e),s=a-o,n=Math.floor(s/(1e3*60*60)),r=Math.floor(s%(1e3*60*60)/(1e3*60));return n>0?`${n}h ${r}m ago`:`${r}m ago`}async getAvailableData(){try{const e=await fetch(`${this.baseUrl}latest_index.json`);if(!e.ok)throw new Error("Index not found");return await e.json()}catch(e){return console.error("Failed to load precomputed index:",e),null}}async isPrecomputedDataAvailable(e){try{const a=await this.getAvailableData();return a&&a.symbols.includes(e)}catch{return!1}}clearCache(){this.cache.clear()}getCacheStats(){const e={size:this.cache.size,items:[]};for(const[a,o]of this.cache.entries())e.items.push({key:a,age:Date.now()-o.timestamp,expired:Date.now()-o.timestamp>this.cacheTimeout});return e}}const ot=new ks;class Cs{constructor(){this.cachePrefix="technical_indicators_",this.cacheTimeout=24*60*60*1e3,this.memoryCache=new Map}getCacheKey(e){const a=new Date().toISOString().split("T")[0];return`${this.cachePrefix}${e}_${a}`}async getTechnicalIndicators(e){const a=this.getCacheKey(e);if(this.memoryCache.has(a)){const o=this.memoryCache.get(a);if(Date.now()-o.timestamp<this.cacheTimeout)return console.log(`Using memory cache for ${e}`),{...o.data,source:"Daily Cache (Memory)"};this.memoryCache.delete(a)}try{const o=localStorage.getItem(a);if(o){const s=JSON.parse(o);if(Date.now()-s.timestamp<this.cacheTimeout)return console.log(`Using localStorage cache for ${e}`),this.memoryCache.set(a,s),{...s.data,source:"Daily Cache (LocalStorage)"};localStorage.removeItem(a)}}catch(o){console.warn(`Failed to read cache for ${e}:`,o)}return null}async setTechnicalIndicators(e,a){const o=this.getCacheKey(e),s={data:a,timestamp:Date.now(),symbol:e,date:new Date().toISOString().split("T")[0]};try{localStorage.setItem(o,JSON.stringify(s)),this.memoryCache.set(o,s),console.log(`Cached technical indicators for ${e}`),this.cleanupOldCache()}catch(n){console.warn(`Failed to cache technical indicators for ${e}:`,n)}}cleanupOldCache(){try{const e=[];for(let a=0;a<localStorage.length;a++){const o=localStorage.key(a);if(o&&o.startsWith(this.cachePrefix))try{const s=JSON.parse(localStorage.getItem(o));Date.now()-s.timestamp>this.cacheTimeout&&e.push(o)}catch{e.push(o)}}e.forEach(a=>{localStorage.removeItem(a),console.log(`Removed expired cache: ${a}`)});for(const[a,o]of this.memoryCache.entries())Date.now()-o.timestamp>this.cacheTimeout&&this.memoryCache.delete(a)}catch(e){console.warn("Failed to cleanup old cache:",e)}}clearSymbolCache(e){const a=this.getCacheKey(e);localStorage.removeItem(a),this.memoryCache.delete(a),console.log(`Cleared cache for ${e}`)}clearAllCache(){try{const e=[];for(let a=0;a<localStorage.length;a++){const o=localStorage.key(a);o&&o.startsWith(this.cachePrefix)&&e.push(o)}e.forEach(a=>localStorage.removeItem(a)),this.memoryCache.clear(),console.log(`Cleared all technical indicators cache (${e.length} items)`)}catch(e){console.warn("Failed to clear all cache:",e)}}getCacheStats(){const e={memoryCache:this.memoryCache.size,localStorageCache:0,totalSize:0};try{for(let a=0;a<localStorage.length;a++){const o=localStorage.key(a);if(o&&o.startsWith(this.cachePrefix)){e.localStorageCache++;const s=localStorage.getItem(o);s&&(e.totalSize+=s.length)}}}catch(a){console.warn("Failed to get cache stats:",a)}return e}}const ie=new Cs,st=1e-12;function Ts(i){return Math.max(0,Math.min(100,i))}function Ds(i,e){const a=new Array(i.length);for(let o=0;o<i.length;o++)if(o<e-1)a[o]=NaN;else{let s=-1/0;for(let n=o-e+1;n<=o;n++)isNaN(i[n])||(s=Math.max(s,i[n]));a[o]=s===-1/0?NaN:s}return a}function As(i,e){const a=new Array(i.length);for(let o=0;o<i.length;o++)if(o<e-1)a[o]=NaN;else{let s=1/0;for(let n=o-e+1;n<=o;n++)isNaN(i[n])||(s=Math.min(s,i[n]));a[o]=s===1/0?NaN:s}return a}function Is(i,e,a="strict",o=null){if(e<=0)throw new Error("Period must be positive");const s=i.length,n=new Array(s).fill(NaN);o===null&&(o=e);for(let r=0;r<s;r++){if(r<e-1)continue;const u=i.slice(r-e+1,r+1);if(a==="strict")u.some(h=>isNaN(h))?n[r]=NaN:n[r]=u.reduce((h,g)=>h+g,0)/u.length;else if(a==="skipna"){const h=u.filter(g=>!isNaN(g));h.length<o?n[r]=NaN:n[r]=h.reduce((g,y)=>g+y,0)/h.length}}return n}function et(i,e,a=null,o="sma_seed",s="strict_recover"){if(e<=0)throw new Error("Period must be positive");const n=i.length,r=new Array(n).fill(NaN);if(a===null&&(a=2/(e+1)),a<=0||a>1)throw new Error("Alpha must be in (0, 1]");if(o==="first_value"){let u=-1;for(let h=0;h<n;h++)if(!isNaN(i[h])){u=h;break}if(u===-1)return r;r[u]=i[u];for(let h=u+1;h<n;h++)isNaN(i[h])?s==="hold_last"?r[h]=r[h-1]:r[h]=NaN:isNaN(r[h-1])?s==="strict_recover"?r[h]=NaN:r[h]=NaN:r[h]=a*i[h]+(1-a)*r[h-1]}else if(o==="sma_seed"){for(let u=0;u<n;u++)if(!(u<e-1))if(u===e-1){const h=i.slice(0,e);h.some(g=>isNaN(g))?r[u]=NaN:r[u]=h.reduce((g,y)=>g+y,0)/h.length}else if(isNaN(i[u]))s==="hold_last"?r[u]=r[u-1]:s==="strict_break"?r[u]=NaN:s==="strict_recover"&&(r[u]=NaN);else if(isNaN(r[u-1]))if(s==="strict_recover"){const h=i.slice(u-e+1,u+1);h.some(g=>isNaN(g))?r[u]=NaN:r[u]=h.reduce((g,y)=>g+y,0)/h.length}else r[u]=NaN;else r[u]=a*i[u]+(1-a)*r[u-1]}return r}function me(i,e){if(e<=0)throw new Error("Period must be positive");const a=new Array(i.length);for(let n=0;n<e-1;n++)a[n]=NaN;if(i.length<e)return a;let o=0,s=0;for(let n=0;n<e;n++)isNaN(i[n])||(o+=i[n],s++);a[e-1]=s===e?o/e:NaN;for(let n=e;n<i.length;n++)isNaN(a[n-1])||isNaN(i[n])?a[n]=NaN:a[n]=(a[n-1]*(e-1)+i[n])/e;return a}function rt(i,e=5,a=null,o="sma_seed",s="strict_recover"){return et(i,e,a,o,s)}function lt(i,e=5,a="strict",o=null){return Is(i,e,a,o)}function Wt(i,e,a=26){const o=Ds(i,a),s=As(e,a),n=new Array(i.length);for(let r=0;r<i.length;r++)isNaN(o[r])||isNaN(s[r])?n[r]=NaN:n[r]=(o[r]+s[r])/2;return n}function Ms(i,e,a=9){return Wt(i,e,a)}function Ns(i,e=26){if(e<0)throw new Error("Shift must be non-negative");const a=new Array(i.length);for(let o=0;o<i.length;o++)o+e<i.length?a[o]=i[o]:a[o]=NaN;return a}function xs(i,e,a=20){const o=new Array(i.length);for(let s=0;s<i.length;s++)if(s<a-1)o[s]=NaN;else{let n=0,r=0;for(let u=s-a+1;u<=s;u++)!isNaN(i[u])&&!isNaN(e[u])&&(n+=i[u]*e[u],r+=e[u]);o[s]=r<=st?NaN:n/r}return o}function Ls(i,e=14){if(i.length<e+1)return new Array(i.length).fill(NaN);const a=new Array(i.length),o=new Array(i.length),s=new Array(i.length);a[0]=NaN,o[0]=NaN,s[0]=NaN;for(let h=1;h<i.length;h++)isNaN(i[h])||isNaN(i[h-1])?(a[h]=NaN,o[h]=NaN,s[h]=NaN):(a[h]=i[h]-i[h-1],o[h]=Math.max(a[h],0),s[h]=Math.max(-a[h],0));const n=me(o.slice(1),e),r=me(s.slice(1),e),u=new Array(i.length);u[0]=NaN;for(let h=1;h<i.length;h++){const g=n[h-1],y=r[h-1];if(isNaN(g)||isNaN(y))u[h]=NaN;else if(y<=st)u[h]=100;else{const C=100-100/(1+g/y);u[h]=Ts(C)}}return u}function Ps(i,e,a,o=14){const s=Math.min(i.length,e.length,a.length);if(s<o*2)return{adx:new Array(s).fill(NaN),plusDI:new Array(s).fill(NaN),minusDI:new Array(s).fill(NaN)};const n=new Array(s),r=new Array(s),u=new Array(s),h=new Array(s),g=new Array(s);n[0]=NaN,r[0]=NaN,u[0]=NaN,h[0]=NaN,g[0]=NaN;for(let v=1;v<s;v++){n[v]=i[v]-i[v-1],r[v]=e[v-1]-e[v],n[v]>r[v]&&n[v]>0?u[v]=n[v]:u[v]=0,r[v]>n[v]&&r[v]>0?h[v]=r[v]:h[v]=0;const x=i[v]-e[v],V=Math.abs(i[v]-a[v-1]),S=Math.abs(e[v]-a[v-1]);g[v]=Math.max(x,V,S)}const y=me(g.slice(1),o),f=me(u.slice(1),o),C=me(h.slice(1),o),D=new Array(s),T=new Array(s),A=new Array(s);D[0]=NaN,T[0]=NaN,A[0]=NaN;for(let v=1;v<s;v++){const x=y[v-1],V=f[v-1],S=C[v-1];if(isNaN(x)||x<=st)D[v]=NaN,T[v]=NaN,A[v]=NaN;else{D[v]=100*V/x,T[v]=100*S/x;const M=D[v]+T[v];M<=st?A[v]=NaN:A[v]=100*Math.abs(D[v]-T[v])/M}}const _=me(A.slice(1),o),N=new Array(s);N[0]=NaN;for(let v=1;v<s;v++)N[v]=_[v-1];return{adx:N,plusDI:D,minusDI:T}}function Rs(i,e=12,a=26,o=9){a<=e&&console.warn("Slow period should be greater than fast period");const s=et(i,e),n=et(i,a),r=new Array(i.length);for(let g=0;g<i.length;g++)isNaN(s[g])||isNaN(n[g])?r[g]=NaN:r[g]=s[g]-n[g];const u=et(r,o),h=new Array(i.length);for(let g=0;g<i.length;g++)isNaN(r[g])||isNaN(u[g])?h[g]=NaN:h[g]=r[g]-u[g];return{macd:r,signal:u,histogram:h}}function Es(i){const{open:e,high:a,low:o,close:s,volume:n}=i,r=s.length;if(a.length!==r||o.length!==r||e.length!==r||n.length!==r)throw new Error("All OHLCV arrays must have the same length");const u={MA_5:rt(s,5),MA_10:rt(s,10),MA_30:rt(s,30),SMA_5:lt(s,5),SMA_10:lt(s,10),SMA_30:lt(s,30),ICHIMOKU_BASELINE_26:Wt(a,o,26),ICHIMOKU_CONVERSIONLINE_9:Ms(a,o,9),ICHIMOKU_LAGGINGSPAN_26:Ns(s,26),VWMA_20:xs(s,n,20),RSI_14:Ls(s,14),...(()=>{const h=Rs(s,12,26,9);return{MACD_12_26_9:h.macd,MACD_SIGNAL_9:h.signal,MACD_HIST:h.histogram}})(),...(()=>{const h=Ps(a,o,s,14);return{ADX_14:h.adx,ADX_14_PLUS_DI:h.plusDI,ADX_14_MINUS_DI:h.minusDI}})()};for(const[h,g]of Object.entries(u))g.length!==r&&console.error(`Length mismatch for ${h}: expected ${r}, got ${g.length}`);return u}class Os{constructor(){this.corsProxies=["https://api.allorigins.win/raw?url=","https://corsproxy.io/?","https://cors.sh/","https://proxy-cors.isomorphic-git.org/","https://thingproxy.freeboard.io/fetch/","https://cors-proxy.htmldriven.com/?url=","https://cors-anywhere.herokuapp.com/"],this.baseUrl="https://query1.finance.yahoo.com/v8/finance/chart/",this.cache=new Map,this.cacheTimeout=5*60*1e3,this.currentProxyIndex=0}async getTechnicalIndicators(e){const a=await ie.getTechnicalIndicators(e);if(a)return a;const o=await this.fetchTechnicalIndicatorsFromAPI(e);return o&&!o.error&&await ie.setTechnicalIndicators(e,o),o}async fetchTechnicalIndicatorsFromAPI(e){var o,s;const a=`technical_${e}`;if(this.cache.has(a)){const n=this.cache.get(a);if(Date.now()-n.timestamp<this.cacheTimeout)return console.log(`Using cached data for ${e}`),n.data}for(let n=0;n<this.corsProxies.length;n++)try{const r=(this.currentProxyIndex+n)%this.corsProxies.length,u=this.corsProxies[r];console.log(`Fetching data for ${e} using proxy ${r+1}...`);const h=`${this.baseUrl}${e}?interval=1d&range=3mo&indicators=quote&includePrePost=false`,g=`${u}${encodeURIComponent(h)}`;console.log(`Request URL: ${g}`);const y=await fetch(g,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(console.log(`Response status: ${y.status}`),!y.ok)throw new Error(`HTTP error! status: ${y.status}`);const f=await y.json();if(console.log("Raw data structure:",f),!f.chart||!f.chart.result||f.chart.result.length===0)throw new Error("No chart data available");const C=f.chart.result[0];if(!C.indicators||!C.indicators.quote||!C.indicators.quote[0])throw new Error("Invalid data structure - missing indicators");const D=C.indicators.quote[0],T={open:D.open||[],high:D.high||[],low:D.low||[],close:D.close||[],volume:D.volume||[]},A=T.close.length,_={open:new Array(A),high:new Array(A),low:new Array(A),close:new Array(A),volume:new Array(A)};for(let S=0;S<A;S++)_.open[S]=T.open[S]!==null?T.open[S]:NaN,_.high[S]=T.high[S]!==null?T.high[S]:NaN,_.low[S]=T.low[S]!==null?T.low[S]:NaN,_.close[S]=T.close[S]!==null?T.close[S]:NaN,_.volume[S]=T.volume[S]!==null?T.volume[S]:NaN;if(console.log(`Found ${A} data points for ${e}`),A<50)throw new Error(`Insufficient data points (${A}) for technical analysis`);const N=Es(_),v=S=>{for(let M=S.length-1;M>=0;M--)if(!isNaN(S[M]))return S[M];return null},x=(S,M=null)=>{const R=v(S),m=v(_.close);let B="NEUTRAL";return M&&R!==null&&m!==null&&(M.type==="price_comparison"?m>R*M.buy?B="BUY":m<R*M.sell&&(B="SELL"):M.type==="rsi"?R>M.overbought?B="OVERBOUGHT":R<M.oversold&&(B="OVERSOLD"):M.type==="adx"&&(R>M.strong?B="STRONG_TREND":R<M.weak&&(B="WEAK_TREND"))),{value:R!==null?R.toFixed(2):null,signal:B,currentPrice:m!==null?m.toFixed(2):null}},V={ma5:x(N.MA_5,{type:"price_comparison",buy:1.02,sell:.98}),sma5:x(N.SMA_5,{type:"price_comparison",buy:1.02,sell:.98}),ma10:x(N.MA_10,{type:"price_comparison",buy:1.02,sell:.98}),sma10:x(N.SMA_10,{type:"price_comparison",buy:1.02,sell:.98}),ma30:x(N.MA_30,{type:"price_comparison",buy:1.02,sell:.98}),sma30:x(N.SMA_30,{type:"price_comparison",buy:1.02,sell:.98}),sma50:{value:null,signal:"N/A"},ichimokuBaseLine:x(N.ICHIMOKU_BASELINE_26,{type:"price_comparison",buy:1.01,sell:.99}),ichimokuConversionLine:x(N.ICHIMOKU_CONVERSIONLINE_9,{type:"price_comparison",buy:1.01,sell:.99}),ichimokuLaggingSpan:x(N.ICHIMOKU_LAGGINGSPAN_26),vwma20:x(N.VWMA_20,{type:"price_comparison",buy:1.02,sell:.98}),rsi14:x(N.RSI_14,{type:"rsi",overbought:70,oversold:30}),adx14:(()=>{const S=v(N.ADX_14),M=v(N.ADX_14_PLUS_DI),R=v(N.ADX_14_MINUS_DI);let m="NEUTRAL";return S!==null&&(S>25?m="STRONG_TREND":S<20&&(m="WEAK_TREND")),{value:S!==null?S.toFixed(2):null,signal:m,plusDI:M!==null?M.toFixed(2):null,minusDI:R!==null?R.toFixed(2):null}})(),macd:(()=>{const S=v(N.MACD_12_26_9),M=v(N.MACD_SIGNAL_9),R=v(N.MACD_HIST);let m="NEUTRAL";return S!==null&&M!==null&&R!==null&&(S>M&&R>0?m="BUY":S<M&&R<0&&(m="SELL")),{value:S!==null?S.toFixed(2):null,signal:m,signalLine:M!==null?M.toFixed(2):null,histogram:R!==null?R.toFixed(2):null}})(),lastUpdated:new Date().toISOString(),dataPoints:A,proxy:`Proxy ${r+1}`,source:"Yahoo Finance API (Fresh) - Core v1.0.0",fullSeries:N,priceRange:{min:Math.min(..._.close.filter(S=>!isNaN(S))).toFixed(2),max:Math.max(..._.close.filter(S=>!isNaN(S))).toFixed(2),latest:((o=v(_.close))==null?void 0:o.toFixed(2))||"N/A",first:((s=_.close.find(S=>!isNaN(S)))==null?void 0:s.toFixed(2))||"N/A"}};return console.log(`Price data for ${e}:`,{dataPoints:A,priceRange:V.priceRange,samplePrices:_.close.slice(-10).filter(S=>!isNaN(S))}),console.log(`Calculated indicators for ${e}:`,V),this.cache.set(a,{data:V,timestamp:Date.now()}),this.currentProxyIndex=r,V}catch(r){if(console.warn(`Proxy ${n+1} failed for ${e}:`,r.message),n===this.corsProxies.length-1)return console.error(`All proxies failed for ${e}:`,r),{ma5:{value:null,signal:"N/A"},sma5:{value:null,signal:"N/A"},ma10:{value:null,signal:"N/A"},sma10:{value:null,signal:"N/A"},ma30:{value:null,signal:"N/A"},sma30:{value:null,signal:"N/A"},sma50:{value:null,signal:"N/A"},ichimokuBaseLine:{value:null,signal:"N/A"},ichimokuConversionLine:{value:null,signal:"N/A"},ichimokuLaggingSpan:{value:null,signal:"N/A"},vwma20:{value:null,signal:"N/A"},rsi14:{value:null,signal:"N/A"},adx14:{value:null,signal:"N/A"},macd:{value:null,signal:"N/A"},lastUpdated:new Date().toISOString(),error:`All proxies failed: ${r.message}`,source:"Error"}}}clearCache(){this.cache.clear()}async getStockInfo(e){const a=`info_${e}`,o=24*60*60*1e3;if(this.cache.has(a)){const s=this.cache.get(a);if(Date.now()-s.timestamp<o)return console.log(`Using cached stock info for ${e}`),s.data}for(let s=0;s<this.corsProxies.length;s++)try{const n=(this.currentProxyIndex+s)%this.corsProxies.length,r=this.corsProxies[n];console.log(`Fetching stock info for ${e} using proxy ${n+1}...`);const u=`https://query1.finance.yahoo.com/v10/finance/quoteSummary/${e}?modules=summaryProfile,price,defaultKeyStatistics`,h=`${r}${encodeURIComponent(u)}`,g=await fetch(h,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!g.ok)throw new Error(`HTTP error! status: ${g.status}`);const y=await g.json();if(!y.quoteSummary||!y.quoteSummary.result||y.quoteSummary.result.length===0)throw new Error("No quoteSummary data available");const f=y.quoteSummary.result[0],C=f.summaryProfile||{},D=f.price||{},T=f.defaultKeyStatistics||{},A={symbol:e,sector:C.sector||"Unknown",industry:C.industry||"Unknown Industry",exchange:D.exchangeName||D.exchange||this.getDefaultExchange(e),marketCap:D.marketCap?D.marketCap.raw:null,marketCapFormatted:D.marketCap?D.marketCap.fmt:"N/A",currency:D.currency||"USD",country:C.country||"Unknown",website:C.website||null,employees:C.fullTimeEmployees||null,businessSummary:C.longBusinessSummary||null,marketCapCategory:this.getMarketCapCategory(D.marketCap?D.marketCap.raw:null),lastUpdated:new Date().toISOString(),source:"Yahoo Finance API (Live)",proxy:`Proxy ${n+1}`,confidence:.95};return console.log(`Stock info for ${e}:`,A),this.cache.set(a,{data:A,timestamp:Date.now()}),this.currentProxyIndex=n,A}catch(n){if(console.warn(`Proxy ${s+1} failed for stock info ${e}:`,n.message),s===this.corsProxies.length-1){console.error(`All proxies failed for stock info ${e}:`,n);const r={symbol:e,sector:"Unknown",industry:"Unknown Industry",exchange:this.getDefaultExchange(e),marketCap:null,marketCapFormatted:"N/A",currency:"USD",country:"Unknown",website:null,employees:null,businessSummary:null,marketCapCategory:"unknown",lastUpdated:new Date().toISOString(),source:"Default (API Failed)",error:`All proxies failed: ${n.message}`,confidence:0};return this.cache.set(a,{data:r,timestamp:Date.now()}),r}}}getDefaultExchange(e){const a=["AAPL","MSFT","GOOGL","GOOG","AMZN","TSLA","NVDA","META","NFLX","RKLB","ASTS","RIVN","MDB","ONDS","PL","AVAV","CRM","AVGO","LEU","SMR","CRWV","IONQ","PLTR","HIMS"],o=["TSM","ORCL","RDW"];return a.includes(e)?"NASDAQ":o.includes(e)?"NYSE":"NASDAQ"}getMarketCapCategory(e){return!e||e<=0?"unknown":e>=2e11?"mega_cap":e>=1e10?"large_cap":e>=2e9?"mid_cap":e>=3e8?"small_cap":"micro_cap"}clearDailyCache(){ie.clearAllCache()}getCacheStats(){const e={};for(const[a,o]of this.cache.entries())e[a]={age:Date.now()-o.timestamp,expired:Date.now()-o.timestamp>this.cacheTimeout};return{apiCache:e,dailyCache:ie.getCacheStats()}}}const te=new Os;class Us{constructor(){this.preferPrecomputed=!0,this.maxPrecomputedAge=24*60*60*1e3,this.fallbackToRealtime=!0}async getTechnicalIndicators(e){console.log(`üîç Getting technical indicators for ${e}`);try{if(this.preferPrecomputed){const o=await this.tryPrecomputedData(e);if(o)return o}const a=await ie.getTechnicalIndicators(e);if(a)return console.log(`üì¶ Using daily cache for ${e}`),a;if(this.fallbackToRealtime){console.log(`‚ö° Falling back to real-time calculation for ${e}`);const o=await te.fetchTechnicalIndicatorsFromAPI(e);if(o&&!o.error)return await ie.setTechnicalIndicators(e,o),o}throw new Error("All data sources failed")}catch(a){return console.error(`‚ùå Failed to get technical indicators for ${e}:`,a),this.createErrorResponse(e,a.message)}}async tryPrecomputedData(e){try{console.log(`üîÑ Trying precomputed data for ${e}`);const a=await ot.getTechnicalIndicators(e),o=new Date(a.lastUpdated);return Date.now()-o.getTime()<=this.maxPrecomputedAge?(console.log(`‚úÖ Using precomputed data for ${e} (${a.dataAge})`),{...a,source:`Precomputed (${a.dataAge})`,loadTime:"<50ms"}):(console.log(`‚è∞ Precomputed data too old for ${e} (${a.dataAge})`),null)}catch(a){return console.log(`‚ùå Precomputed data not available for ${e}: ${a.message}`),null}}createErrorResponse(e,a){return{ma5:{value:null,signal:"N/A"},sma5:{value:null,signal:"N/A"},ma10:{value:null,signal:"N/A"},sma10:{value:null,signal:"N/A"},ma30:{value:null,signal:"N/A"},sma30:{value:null,signal:"N/A"},sma50:{value:null,signal:"N/A"},ichimokuBaseLine:{value:null,signal:"N/A"},ichimokuConversionLine:{value:null,signal:"N/A"},ichimokuLaggingSpan:{value:null,signal:"N/A"},vwma20:{value:null,signal:"N/A"},rsi14:{value:null,signal:"N/A"},adx14:{value:null,signal:"N/A"},macd:{value:null,signal:"N/A"},lastUpdated:new Date().toISOString(),error:a,source:"Error",symbol:e}}async refreshTechnicalIndicators(e){console.log(`üîÑ Force refreshing data for ${e}`),ie.clearSymbolCache(e),ot.clearCache();const a=this.fallbackToRealtime,o=this.preferPrecomputed;this.fallbackToRealtime=!0,this.preferPrecomputed=!1;try{return await this.getTechnicalIndicators(e)}finally{this.fallbackToRealtime=a,this.preferPrecomputed=o}}async getBatchTechnicalIndicators(e,a=3){const o=new Map,s=[];for(let n=0;n<e.length;n+=a)s.push(e.slice(n,n+a));console.log(`üì¶ Processing ${e.length} symbols in ${s.length} batches`);for(const n of s){const r=n.map(async h=>{try{const g=await this.getTechnicalIndicators(h);return{symbol:h,success:!0,data:g}}catch(g){return{symbol:h,success:!1,error:g.message}}});(await Promise.all(r)).forEach(h=>{o.set(h.symbol,h)}),s.indexOf(n)<s.length-1&&await new Promise(h=>setTimeout(h,100))}return o}async getDataSourceStatus(){const e={precomputed:{available:!1,symbols:[],lastUpdate:null},cache:ie.getCacheStats(),realtime:{available:!0,proxies:te.corsProxies.length}};try{const a=await ot.getAvailableData();a&&(e.precomputed={available:!0,symbols:a.symbols,lastUpdate:a.generatedAt,successful:a.successful,failed:a.failed})}catch(a){console.warn("Failed to get precomputed status:",a)}return e}setPreferences(e){e.preferPrecomputed!==void 0&&(this.preferPrecomputed=e.preferPrecomputed),e.fallbackToRealtime!==void 0&&(this.fallbackToRealtime=e.fallbackToRealtime),e.maxPrecomputedAge!==void 0&&(this.maxPrecomputedAge=e.maxPrecomputedAge),console.log("Updated preferences:",{preferPrecomputed:this.preferPrecomputed,fallbackToRealtime:this.fallbackToRealtime,maxPrecomputedAge:this.maxPrecomputedAge})}}const ce=new Us;class $s{constructor(){this.isWarming=!1,this.warmupProgress=0,this.warmupResults=new Map,this.warmupStartTime=null,this.warmupEndTime=null,this.config={maxConcurrent:2,batchDelay:2e3,retryAttempts:2,retryDelay:5e3,enableAutoWarmup:!0,warmupOnVersionChange:!0,warmupOnFirstLoad:!0,warmupInterval:6*60*60*1e3},this.trackedSymbols=["ASTS","RIVN","PL","ONDS","RDW","AVAV","MDB","ORCL","TSM","RKLB","CRM","NVDA","AVGO","AMZN","GOOG","META","NFLX","LEU","SMR","CRWV","IONQ","PLTR","HIMS","TSLA"]}async start(){console.log("üî• Starting Cache Warmup Service...");try{const e=await this.shouldPerformWarmup();e.needed?(console.log(`üî• Warmup needed: ${e.reason}`),await this.performWarmup()):console.log("‚úÖ Cache warmup not needed"),this.config.enableAutoWarmup&&this.schedulePeriodicWarmup()}catch(e){console.error("‚ùå Failed to start cache warmup service:",e)}}async shouldPerformWarmup(){try{const e=await this.getCurrentVersion(),a=this.getLastWarmupVersion();if(this.config.warmupOnVersionChange&&e!==a)return{needed:!0,reason:`Version changed from ${a} to ${e}`};const o=this.getLastWarmupTime();if(this.config.warmupOnFirstLoad&&!o)return{needed:!0,reason:"First load - no previous warmup found"};if(o){const n=Date.now()-o;if(n>this.config.warmupInterval)return{needed:!0,reason:`Time interval exceeded (${Math.round(n/36e5)}h ago)`}}const s=await this.getCacheStats();return s.coverage<.8?{needed:!0,reason:`Low cache coverage (${Math.round(s.coverage*100)}%)`}:{needed:!1,reason:"Cache is fresh and complete"}}catch(e){return console.error("Error checking warmup need:",e),{needed:!0,reason:"Error checking - performing warmup as fallback"}}}async performWarmup(){if(this.isWarming)return console.log("‚ö†Ô∏è Warmup already in progress"),this.warmupResults;console.log(`üî• Starting cache warmup for ${this.trackedSymbols.length} symbols...`),this.isWarming=!0,this.warmupProgress=0,this.warmupResults.clear(),this.warmupStartTime=Date.now();const e="cache_warmup_total";Q.start(e);try{const a=this.createBatches(this.trackedSymbols,this.config.maxConcurrent);for(let n=0;n<a.length;n++){const r=a[n];console.log(`üî• Processing batch ${n+1}/${a.length}: ${r.join(", ")}`);const u=r.map(g=>this.warmupSymbol(g));(await Promise.all(u)).forEach((g,y)=>{this.warmupResults.set(r[y],g)}),this.warmupProgress=(n+1)/a.length*100,console.log(`üìä Warmup progress: ${Math.round(this.warmupProgress)}%`),n<a.length-1&&(console.log(`‚è≥ Waiting ${this.config.batchDelay}ms before next batch...`),await this.sleep(this.config.batchDelay))}this.warmupEndTime=Date.now();const o=this.warmupEndTime-this.warmupStartTime,s=this.getWarmupStats();return console.log(`üéâ Cache warmup completed in ${Math.round(o/1e3)}s`),console.log(`üìä Results: ${s.successful}/${s.total} successful (${s.successRate}%)`),this.saveWarmupRecord(s),this.warmupResults}catch(a){throw console.error("‚ùå Cache warmup failed:",a),a}finally{this.isWarming=!1,Q.end(e)}}async warmupSymbol(e,a=1){const o=Date.now();try{console.log(`üî• Warming up ${e} (attempt ${a}/${this.config.retryAttempts+1})`);const s=await ce.getTechnicalIndicators(e),n=Date.now()-o;if(s&&!s.error)return console.log(`‚úÖ ${e} warmed up successfully in ${n}ms (${s.source})`),{success:!0,duration:n,source:s.source,timestamp:new Date().toISOString()};throw new Error((s==null?void 0:s.error)||"Unknown error")}catch(s){return console.error(`‚ùå Failed to warm up ${e} (attempt ${a}): ${s.message}`),a<=this.config.retryAttempts?(console.log(`üîÑ Retrying ${e} in ${this.config.retryDelay}ms...`),await this.sleep(this.config.retryDelay),this.warmupSymbol(e,a+1)):{success:!1,error:s.message,duration:Date.now()-o,timestamp:new Date().toISOString()}}}createBatches(e,a){const o=[];for(let s=0;s<e.length;s+=a)o.push(e.slice(s,s+a));return o}async getCurrentVersion(){try{const e=await fetch("/package.json");if(e.ok)return(await e.json()).version||"1.0.0"}catch{return Date.now().toString()}return"1.0.0"}getLastWarmupVersion(){return localStorage.getItem("cache_warmup_version")||null}getLastWarmupTime(){const e=localStorage.getItem("cache_warmup_time");return e?parseInt(e):null}async getCacheStats(){let e=0;for(const a of this.trackedSymbols)try{H.get(`technical_indicators_${a}`)&&e++}catch{}return{total:this.trackedSymbols.length,cached:e,coverage:e/this.trackedSymbols.length}}getWarmupStats(){const e=Array.from(this.warmupResults.values()),a=e.filter(s=>s.success).length,o=e.filter(s=>!s.success).length;return{total:e.length,successful:a,failed:o,successRate:Math.round(a/e.length*100),duration:this.warmupEndTime-this.warmupStartTime,averageDuration:e.reduce((s,n)=>s+n.duration,0)/e.length}}saveWarmupRecord(e){const a=this.getCurrentVersion();localStorage.setItem("cache_warmup_version",a),localStorage.setItem("cache_warmup_time",Date.now().toString()),localStorage.setItem("cache_warmup_stats",JSON.stringify(e)),console.log("üíæ Warmup record saved")}schedulePeriodicWarmup(){console.log(`‚è∞ Scheduled periodic warmup every ${this.config.warmupInterval/36e5} hours`),setInterval(async()=>{console.log("‚è∞ Periodic warmup triggered");try{await this.performWarmup()}catch(e){console.error("‚ùå Periodic warmup failed:",e)}},this.config.warmupInterval)}async triggerManualWarmup(){return console.log("üî• Manual warmup triggered"),this.performWarmup()}getWarmupStatus(){return{isWarming:this.isWarming,progress:this.warmupProgress,results:Object.fromEntries(this.warmupResults),lastWarmupTime:this.getLastWarmupTime(),lastWarmupVersion:this.getLastWarmupVersion(),trackedSymbols:this.trackedSymbols,config:this.config}}sleep(e){return new Promise(a=>setTimeout(a,e))}updateConfig(e){this.config={...this.config,...e},console.log("üîß Cache warmup config updated:",this.config)}addTrackedSymbol(e){this.trackedSymbols.includes(e)||(this.trackedSymbols.push(e),console.log(`‚ûï Added ${e} to tracked symbols`))}removeTrackedSymbol(e){const a=this.trackedSymbols.indexOf(e);a>-1&&(this.trackedSymbols.splice(a,1),console.log(`‚ûñ Removed ${e} from tracked symbols`))}}const dt=new $s,Fs={name:"LazyTradingViewWidget",props:{widgetType:{type:String,required:!0},config:{type:Object,required:!0},scriptUrl:{type:String,required:!0},height:{type:String,default:"400px"},priority:{type:Number,default:1}},data(){return{isVisible:!1,loaded:!1,error:!1,observer:null,loadStartTime:0}},computed:{containerId(){return`lazy-widget-${this.widgetType}-${Date.now()}`}},mounted(){this.setupIntersectionObserver()},beforeUnmount(){this.observer&&this.observer.disconnect()},methods:{setupIntersectionObserver(){const i={1:"200px",2:"100px",3:"50px"};this.observer=new IntersectionObserver(e=>{e.forEach(a=>{a.isIntersecting&&!this.loaded&&!this.error&&(this.isVisible=!0,this.loadWidget(),this.observer.disconnect())})},{rootMargin:i[this.priority]||"100px",threshold:.1}),this.observer.observe(this.$refs.container)},async loadWidget(){this.loadStartTime=performance.now();try{const e={1:0,2:500,3:1e3}[this.priority]||0;e>0&&await new Promise(a=>setTimeout(a,e)),await this.createWidget()}catch(i){console.error("Failed to load widget:",i),this.error=!0}},async createWidget(){return new Promise((i,e)=>{this.$nextTick(()=>{const a=this.$refs.container;if(!a){e(new Error("Container not found"));return}const o=a.querySelector(".widget-placeholder, .widget-loading");o&&(o.style.display="none");const s=document.createElement("div");s.className="tradingview-widget-container",s.style.height="100%",s.style.width="100%";const n=document.createElement("div");n.className="tradingview-widget-container__widget",s.appendChild(n);const r=document.createElement("script");r.type="text/javascript",r.src=this.scriptUrl,r.async=!0,r.innerHTML=JSON.stringify(this.config);const h=setTimeout(()=>{this.error=!0,e(new Error("Widget load timeout"))},{1:5e3,2:8e3,3:1e4}[this.priority]||8e3);r.onload=()=>{clearTimeout(h),this.loaded=!0;const g=performance.now()-this.loadStartTime;console.log(`${this.widgetType} widget loaded in ${g.toFixed(2)}ms (Priority: ${this.priority})`),i()},r.onerror=()=>{clearTimeout(h),this.error=!0,e(new Error("Script load failed"))},n.appendChild(r),a.appendChild(s)})})},async retry(){this.error=!1,this.loaded=!1,await this.loadWidget()}}},Vs=["id"],Ws={key:0,class:"widget-placeholder"},Bs={class:"placeholder-content"},Hs={class:"placeholder-text"},qs={key:1,class:"widget-loading"},Gs={key:2,class:"widget-error"};function js(i,e,a,o,s,n){return c(),d("div",{class:"lazy-widget",id:n.containerId,ref:"container",style:Z({height:a.height})},[!s.isVisible&&!s.loaded?(c(),d("div",Ws,[t("div",Bs,[e[1]||(e[1]=t("div",{class:"placeholder-icon"},"üìä",-1)),t("div",Hs,l(a.widgetType)+" Widget",1),e[2]||(e[2]=t("div",{class:"placeholder-subtext"},"Scroll to load",-1))])])):b("",!0),s.isVisible&&!s.loaded&&!s.error?(c(),d("div",qs,[e[3]||(e[3]=t("div",{class:"loading-spinner"},null,-1)),t("span",null,"Loading "+l(a.widgetType)+"...",1)])):b("",!0),s.error?(c(),d("div",Gs,[e[4]||(e[4]=t("span",null,"‚ö†Ô∏è Failed to load",-1)),t("button",{onClick:e[0]||(e[0]=(...r)=>n.retry&&n.retry(...r)),class:"retry-btn"},"Retry")])):b("",!0)],12,Vs)}const mt=O(Fs,[["render",js],["__scopeId","data-v-78a846e0"]]),zs={name:"ZeiiermanFearGreedGauge",data(){return{components:{sp125:65,hl52:52,mcsi:60,putCall:45,vix50:55,safe:62,yieldSpread:67},lastUpdate:new Date}},computed:{fearGreedValue(){const i=Object.values(this.components);return i.reduce((a,o)=>a+o,0)/i.length},needleAngle(){return(this.fearGreedValue-50)*1.8},needleX(){const i=this.needleAngle*(Math.PI/180);return 200+140*Math.sin(i)},needleY(){const i=this.needleAngle*(Math.PI/180);return 200-140*Math.cos(i)},currentSentiment(){return this.fearGreedValue<=25?"Extreme Fear":this.fearGreedValue<=45?"Fear":this.fearGreedValue<=55?"Neutral":this.fearGreedValue<=75?"Greed":"Extreme Greed"},sentimentClass(){return this.fearGreedValue<=25?"extreme-fear":this.fearGreedValue<=45?"fear":this.fearGreedValue<=55?"neutral":this.fearGreedValue<=75?"greed":"extreme-greed"},sentimentDescription(){return this.fearGreedValue<=25?"Market showing extreme pessimism and panic selling conditions":this.fearGreedValue<=45?"Elevated market anxiety with defensive investor positioning":this.fearGreedValue<=55?"Balanced market sentiment with mixed investor signals":this.fearGreedValue<=75?"Optimistic market conditions with increased risk appetite":"Excessive market euphoria indicating potential overvaluation"}},mounted(){console.log("Zeiierman Fear & Greed Index loaded with fixed value:",this.fearGreedValue)},methods:{updateComponents(){this.lastUpdate=new Date,console.log("Zeiierman Fear & Greed Index:",this.fearGreedValue)}}},Ks={class:"fear-greed-gauge-container"},Qs={class:"market-fng-gauge__meter-container"},Ys={class:"left-side"},Xs={class:"sentiment-indicator"},Js={class:"sentiment-text"},Zs={class:"sentiment-description"},ea={class:"gauge-wrapper"},ta={class:"gauge-svg",viewBox:"0 0 400 240",xmlns:"http://www.w3.org/2000/svg"},sa={class:"needle-group"},aa=["x2","y2"],na={x:"200",y:"230","text-anchor":"middle",class:"gauge-value"},ia={class:"components-section"},oa={class:"components-grid"},ra={class:"component-item"},la={class:"component-bar"},ca={class:"component-value"},da={class:"component-item"},ua={class:"component-bar"},ha={class:"component-value"},ga={class:"component-item"},ma={class:"component-bar"},fa={class:"component-value"},pa={class:"component-item"},va={class:"component-bar"},ya={class:"component-value"},wa={class:"component-item"},Sa={class:"component-bar"},ba={class:"component-value"},_a={class:"component-item"},ka={class:"component-bar"},Ca={class:"component-value"},Ta={class:"component-item"},Da={class:"component-bar"},Aa={class:"component-value"};function Ia(i,e,a,o,s,n){return c(),d("div",Ks,[e[13]||(e[13]=t("div",{class:"widget-header"},[t("h3",null,"Fear & Greed Index Gauge"),t("div",{class:"chart-info"},[t("span",{class:"chart-description"},"Based on Zeiierman's Algorithm")])],-1)),t("div",Qs,[t("div",Ys,[t("div",{class:p(["current-sentiment",n.sentimentClass])},[t("div",Xs,[e[0]||(e[0]=t("div",{class:"sentiment-dot"},null,-1)),t("span",Js,l(n.currentSentiment),1)]),t("div",Zs,l(n.sentimentDescription),1)],2),t("div",ea,[(c(),d("svg",ta,[e[3]||(e[3]=Y('<defs data-v-fc51b373><linearGradient id="gaugeGradient" x1="0%" y1="0%" x2="100%" y2="0%" data-v-fc51b373><stop offset="0%" style="stop-color:#e57373;stop-opacity:1;" data-v-fc51b373></stop><stop offset="12.5%" style="stop-color:#ef5350;stop-opacity:1;" data-v-fc51b373></stop><stop offset="25%" style="stop-color:#ffb74d;stop-opacity:1;" data-v-fc51b373></stop><stop offset="35%" style="stop-color:#ffcc80;stop-opacity:1;" data-v-fc51b373></stop><stop offset="45%" style="stop-color:#ffd54f;stop-opacity:1;" data-v-fc51b373></stop><stop offset="50%" style="stop-color:#fff176;stop-opacity:1;" data-v-fc51b373></stop><stop offset="55%" style="stop-color:#fff59d;stop-opacity:1;" data-v-fc51b373></stop><stop offset="65%" style="stop-color:#aed581;stop-opacity:1;" data-v-fc51b373></stop><stop offset="75%" style="stop-color:#81c784;stop-opacity:1;" data-v-fc51b373></stop><stop offset="87.5%" style="stop-color:#66bb6a;stop-opacity:1;" data-v-fc51b373></stop><stop offset="100%" style="stop-color:#4db6ac;stop-opacity:1;" data-v-fc51b373></stop></linearGradient></defs><path d="M 40 200 A 160 160 0 0 1 360 200" fill="none" stroke="url(#gaugeGradient)" stroke-width="20" stroke-linecap="round" data-v-fc51b373></path>',2)),t("g",sa,[t("line",{x1:200,y1:200,x2:n.needleX,y2:n.needleY,stroke:"#333","stroke-width":"4","stroke-linecap":"round",class:"gauge-needle"},null,8,aa),e[1]||(e[1]=t("circle",{cx:"200",cy:"200",r:"8",fill:"#333"},null,-1)),e[2]||(e[2]=t("circle",{cx:"200",cy:"200",r:"4",fill:"#fff"},null,-1))]),t("text",na,l(n.fearGreedValue.toFixed(0)),1)])),e[4]||(e[4]=Y('<div class="gauge-labels" data-v-fc51b373><div class="label-item extreme-fear" data-v-fc51b373><span class="label-text" data-v-fc51b373>Extreme Fear</span><span class="label-range" data-v-fc51b373>0-25</span></div><div class="label-item fear" data-v-fc51b373><span class="label-text" data-v-fc51b373>Fear</span><span class="label-range" data-v-fc51b373>25-45</span></div><div class="label-item neutral" data-v-fc51b373><span class="label-text" data-v-fc51b373>Neutral</span><span class="label-range" data-v-fc51b373>45-55</span></div><div class="label-item greed" data-v-fc51b373><span class="label-text" data-v-fc51b373>Greed</span><span class="label-range" data-v-fc51b373>55-75</span></div><div class="label-item extreme-greed" data-v-fc51b373><span class="label-text" data-v-fc51b373>Extreme Greed</span><span class="label-range" data-v-fc51b373>75-100</span></div></div>',1))])]),t("div",ia,[e[12]||(e[12]=t("h4",null,"Index Components",-1)),t("div",oa,[t("div",ra,[e[5]||(e[5]=t("span",{class:"component-name"},"S&P 500 vs 125-day MA",-1)),t("div",la,[t("div",{class:"component-fill",style:Z({width:s.components.sp125+"%"})},null,4),t("span",ca,l(s.components.sp125),1)])]),t("div",da,[e[6]||(e[6]=t("span",{class:"component-name"},"52-Week High/Low Strength",-1)),t("div",ua,[t("div",{class:"component-fill",style:Z({width:s.components.hl52+"%"})},null,4),t("span",ha,l(s.components.hl52),1)])]),t("div",ga,[e[7]||(e[7]=t("span",{class:"component-name"},"Market Breadth (McClellan)",-1)),t("div",ma,[t("div",{class:"component-fill",style:Z({width:s.components.mcsi+"%"})},null,4),t("span",fa,l(s.components.mcsi),1)])]),t("div",pa,[e[8]||(e[8]=t("span",{class:"component-name"},"Put/Call Ratio",-1)),t("div",va,[t("div",{class:"component-fill",style:Z({width:s.components.putCall+"%"})},null,4),t("span",ya,l(s.components.putCall),1)])]),t("div",wa,[e[9]||(e[9]=t("span",{class:"component-name"},"VIX vs 50-day MA",-1)),t("div",Sa,[t("div",{class:"component-fill",style:Z({width:s.components.vix50+"%"})},null,4),t("span",ba,l(s.components.vix50),1)])]),t("div",_a,[e[10]||(e[10]=t("span",{class:"component-name"},"Safe Haven Demand",-1)),t("div",ka,[t("div",{class:"component-fill",style:Z({width:s.components.safe+"%"})},null,4),t("span",Ca,l(s.components.safe),1)])]),t("div",Ta,[e[11]||(e[11]=t("span",{class:"component-name"},"Junk Bond Demand",-1)),t("div",Da,[t("div",{class:"component-fill",style:Z({width:s.components.yieldSpread+"%"})},null,4),t("span",Aa,l(s.components.yieldSpread),1)])])])])])])}const Ma=O(zs,[["render",Ia],["__scopeId","data-v-fc51b373"]]),Na={name:"PerformanceMonitor",data(){return{showMonitor:!1,expanded:!0,pageLoadTime:0,widgetsLoaded:0,totalWidgets:0,widgetTimes:[],startTime:0}},computed:{totalSize(){if(typeof performance<"u"&&performance.getEntriesByType){const e=performance.getEntriesByType("resource").reduce((a,o)=>a+(o.transferSize||0),0);return e>1024*1024?`${(e/(1024*1024)).toFixed(1)}MB`:e>1024?`${(e/1024).toFixed(1)}KB`:`${e}B`}return"N/A"},memoryUsage(){if(typeof performance<"u"&&performance.memory){const i=performance.memory.usedJSHeapSize;return i>1024*1024?`${(i/(1024*1024)).toFixed(1)}MB`:`${(i/1024).toFixed(1)}KB`}return"N/A"}},mounted(){this.startTime=performance.now(),this.setupPerformanceTracking();const i=new URLSearchParams(window.location.search).has("debug");this.showMonitor=i,document.readyState==="complete"?this.calculatePageLoadTime():window.addEventListener("load",this.calculatePageLoadTime)},beforeUnmount(){window.removeEventListener("load",this.calculatePageLoadTime)},methods:{setupPerformanceTracking(){const i=console.log;console.log=(...e)=>{const a=e.join(" "),o=a.match(/Widget (.+) loaded in ([\d.]+)ms \(Priority: (\d+)\)/);o&&this.addWidgetTime({name:o[1],time:parseFloat(o[2]),priority:parseInt(o[3])});const s=a.match(/(.+) widget loaded in ([\d.]+)ms \(Priority: (\d+)\)/);s&&this.addWidgetTime({name:s[1],time:parseFloat(s[2]),priority:parseInt(s[3])}),i.apply(console,e)}},calculatePageLoadTime(){this.pageLoadTime=Math.round(performance.now()-this.startTime)},addWidgetTime(i){var e;if(this.widgetTimes.push({id:Date.now()+Math.random(),...i}),this.widgetsLoaded++,this.totalWidgets===0){const a=((e=this.$route)==null?void 0:e.path)||window.location.pathname;a.includes("market-dashboard")?this.totalWidgets=5:a.includes("stock-dashboard")?this.totalWidgets=10:this.totalWidgets=this.widgetsLoaded+2}},getTimeClass(i){return i<1e3?"time-good":i<3e3?"time-ok":"time-slow"},toggleMonitor(){this.expanded=!this.expanded},clearMetrics(){this.widgetTimes=[],this.widgetsLoaded=0,this.totalWidgets=0,this.startTime=performance.now()},exportMetrics(){const i={pageLoadTime:this.pageLoadTime,widgetsLoaded:this.widgetsLoaded,totalWidgets:this.totalWidgets,totalSize:this.totalSize,memoryUsage:this.memoryUsage,widgetTimes:this.widgetTimes,timestamp:new Date().toISOString(),url:window.location.href},e=new Blob([JSON.stringify(i,null,2)],{type:"application/json"}),a=URL.createObjectURL(e),o=document.createElement("a");o.href=a,o.download=`performance-${Date.now()}.json`,o.click(),URL.revokeObjectURL(a)}}},xa={key:0,class:"performance-monitor"},La={class:"monitor-header"},Pa={key:0,class:"monitor-content"},Ra={class:"metrics-grid"},Ea={class:"metric-card"},Oa={class:"metric-value"},Ua={class:"metric-card"},$a={class:"metric-value"},Fa={class:"metric-card"},Va={class:"metric-value"},Wa={class:"metric-card"},Ba={class:"metric-value"},Ha={class:"widgets-list"},qa={class:"widget-name"},Ga={class:"widget-priority"},ja={class:"actions"};function za(i,e,a,o,s,n){return s.showMonitor?(c(),d("div",xa,[t("div",La,[e[3]||(e[3]=t("h4",null,"Performance Monitor",-1)),t("button",{onClick:e[0]||(e[0]=(...r)=>n.toggleMonitor&&n.toggleMonitor(...r)),class:"toggle-btn"},l(s.expanded?"‚àí":"+"),1)]),s.expanded?(c(),d("div",Pa,[t("div",Ra,[t("div",Ea,[e[4]||(e[4]=t("div",{class:"metric-label"},"Page Load",-1)),t("div",Oa,l(s.pageLoadTime)+"ms",1)]),t("div",Ua,[e[5]||(e[5]=t("div",{class:"metric-label"},"Widgets Loaded",-1)),t("div",$a,l(s.widgetsLoaded)+"/"+l(s.totalWidgets),1)]),t("div",Fa,[e[6]||(e[6]=t("div",{class:"metric-label"},"Total Size",-1)),t("div",Va,l(n.totalSize),1)]),t("div",Wa,[e[7]||(e[7]=t("div",{class:"metric-label"},"Memory Usage",-1)),t("div",Ba,l(n.memoryUsage),1)])]),t("div",Ha,[e[8]||(e[8]=t("h5",null,"Widget Load Times",-1)),(c(!0),d(U,null,$(s.widgetTimes,r=>(c(),d("div",{key:r.id,class:"widget-item"},[t("span",qa,l(r.name),1),t("span",{class:p(["widget-time",n.getTimeClass(r.time)])},l(r.time)+"ms ",3),t("span",Ga,"P"+l(r.priority),1)]))),128))]),t("div",ja,[t("button",{onClick:e[1]||(e[1]=(...r)=>n.clearMetrics&&n.clearMetrics(...r)),class:"clear-btn"},"Clear"),t("button",{onClick:e[2]||(e[2]=(...r)=>n.exportMetrics&&n.exportMetrics(...r)),class:"export-btn"},"Export")])])):b("",!0)])):b("",!0)}const ft=O(Na,[["render",za],["__scopeId","data-v-77c7f570"]]),Ka={name:"MarketOverviewSkeleton"},Qa={class:"market-overview-skeleton"},Ya={class:"skeleton-widget-container"},Xa={class:"skeleton-ticker-area"},Ja={class:"skeleton-widget-container large"},Za={class:"skeleton-stories-area"},en={class:"skeleton-widget-container"},tn={class:"skeleton-heatmap-area"},sn={class:"skeleton-heatmap-grid"},an={class:"skeleton-widget-container"},nn={class:"skeleton-performance-area"};function on(i,e,a,o,s,n){return c(),d("div",Qa,[t("div",Ya,[e[0]||(e[0]=t("div",{class:"skeleton-widget-header"},[t("div",{class:"skeleton-title"})],-1)),t("div",Xa,[(c(),d(U,null,$(6,r=>t("div",{class:"skeleton-ticker-item",key:r})),64))])]),e[6]||(e[6]=Y('<div class="skeleton-widget-container" data-v-9478c3a3><div class="skeleton-widget-header" data-v-9478c3a3><div class="skeleton-title" data-v-9478c3a3></div></div><div class="skeleton-gauge-area" data-v-9478c3a3><div class="skeleton-gauge-circle" data-v-9478c3a3></div><div class="skeleton-gauge-info" data-v-9478c3a3><div class="skeleton-gauge-value" data-v-9478c3a3></div><div class="skeleton-gauge-label" data-v-9478c3a3></div></div></div></div>',1)),t("div",Ja,[e[2]||(e[2]=t("div",{class:"skeleton-widget-header"},[t("div",{class:"skeleton-title"})],-1)),t("div",Za,[(c(),d(U,null,$(8,r=>t("div",{class:"skeleton-story-item",key:r},[...e[1]||(e[1]=[t("div",{class:"skeleton-story-time"},null,-1),t("div",{class:"skeleton-story-title"},null,-1),t("div",{class:"skeleton-story-content"},null,-1)])])),64))])]),e[7]||(e[7]=Y('<div class="skeleton-widget-container large" data-v-9478c3a3><div class="skeleton-widget-header" data-v-9478c3a3><div class="skeleton-title" data-v-9478c3a3></div></div><div class="skeleton-insight-grid" data-v-9478c3a3><div class="skeleton-insight-section" data-v-9478c3a3><div class="skeleton-section-header" data-v-9478c3a3><div class="skeleton-section-title" data-v-9478c3a3></div></div><div class="skeleton-chart-area" data-v-9478c3a3><div class="skeleton-chart" data-v-9478c3a3></div></div></div><div class="skeleton-insight-section" data-v-9478c3a3><div class="skeleton-section-header" data-v-9478c3a3><div class="skeleton-section-title" data-v-9478c3a3></div></div><div class="skeleton-chart-area" data-v-9478c3a3><div class="skeleton-chart" data-v-9478c3a3></div></div></div></div></div>',1)),t("div",en,[e[3]||(e[3]=t("div",{class:"skeleton-widget-header"},[t("div",{class:"skeleton-title"})],-1)),t("div",tn,[t("div",sn,[(c(),d(U,null,$(20,r=>t("div",{class:"skeleton-heatmap-cell",key:r})),64))])])]),t("div",an,[e[5]||(e[5]=t("div",{class:"skeleton-widget-header"},[t("div",{class:"skeleton-title"})],-1)),t("div",nn,[(c(),d(U,null,$(4,r=>t("div",{class:"skeleton-performance-item",key:r},[...e[4]||(e[4]=[t("div",{class:"skeleton-performance-label"},null,-1),t("div",{class:"skeleton-performance-value"},null,-1)])])),64))])])])}const rn=O(Ka,[["render",on],["__scopeId","data-v-9478c3a3"]]),ln={name:"MarketDashboard",components:{LazyTradingViewWidget:mt,ZeiiermanFearGreedGauge:Ma,PerformanceMonitor:ft,MarketOverviewSkeleton:rn},data(){return{loading:!0,error:null}},mounted(){this.scrollToTop(),this.initializePage()},watch:{$route(){this.scrollToTop()}},methods:{async initializePage(){try{await new Promise(i=>setTimeout(i,800)),this.loading=!1}catch(i){this.error=String(i),this.loading=!1}},async refresh(){this.loading=!0,this.error=null,await this.initializePage()},scrollToTop(){this.$nextTick(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"}),setTimeout(()=>{window.scrollTo(0,0)},100)})}},computed:{tickersConfig(){return{symbols:[{proName:"FOREXCOM:SPXUSD",title:"S&P 500 Index"},{proName:"NASDAQ:NDX",title:"NASDAQ 100 Index"},{proName:"OPOFINANCE:DJIUSD",title:"Dow Jone Index"},{proName:"CAPITALCOM:RTY",title:"US Russel 2000"},{proName:"INDEX:BTCUSD",title:"BTC"},{proName:"TVC:GOLD",title:"GOLD"}],colorTheme:"light",locale:"en",largeChartUrl:"",isTransparent:!0,showSymbolLogo:!0}},topStoriesConfig(){return{displayMode:"regular",feedMode:"market",colorTheme:"light",isTransparent:!0,locale:"en",market:"stock",width:"100%",height:"100%"}},dailyConfig(){return{lineWidth:2,lineType:0,chartType:"candlesticks",showVolume:!0,fontColor:"rgb(106, 109, 120)",gridLineColor:"rgba(46, 46, 46, 0.06)",volumeUpColor:"rgba(34, 171, 148, 0.5)",volumeDownColor:"rgba(247, 82, 95, 0.5)",backgroundColor:"#ffffff",widgetFontColor:"#0F0F0F",upColor:"#22ab94",downColor:"#f7525f",borderUpColor:"#22ab94",borderDownColor:"#f7525f",wickUpColor:"#22ab94",wickDownColor:"#f7525f",colorTheme:"light",isTransparent:!0,locale:"en",chartOnly:!1,scalePosition:"right",scaleMode:"Normal",fontFamily:"-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif",valuesTracking:"1",changeMode:"price-and-percent",symbols:[["VANTAGE:SP500|6M"],["NASDAQ:NDX|6M"],["OPOFINANCE:DJIUSD|6M"],["CAPITALCOM:RTY|6M"],["INDEX:BTCUSD|6M"],["TVC:GOLD|6M"]],dateRanges:["6m|1D"],fontSize:"10",headerFontSize:"medium",autosize:!0,width:"100%",height:"100%",noTimeScale:!1,hideDateRanges:!1,showMA:!0,maLength:"5",maLineColor:"#2962FF",maLineWidth:1,hideMarketStatus:!1,hideSymbolLogo:!1}},weeklyConfig(){return{lineWidth:2,lineType:0,chartType:"candlesticks",showVolume:!0,fontColor:"rgb(106, 109, 120)",gridLineColor:"rgba(46, 46, 46, 0.06)",volumeUpColor:"rgba(34, 171, 148, 0.5)",volumeDownColor:"rgba(247, 82, 95, 0.5)",backgroundColor:"#ffffff",widgetFontColor:"#0F0F0F",upColor:"#22ab94",downColor:"#f7525f",borderUpColor:"#22ab94",borderDownColor:"#f7525f",wickUpColor:"#22ab94",wickDownColor:"#f7525f",colorTheme:"light",isTransparent:!0,locale:"en",chartOnly:!1,scalePosition:"right",scaleMode:"Normal",fontFamily:"-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif",valuesTracking:"1",changeMode:"price-and-percent",symbols:[["VANTAGE:SP500|6M"],["NASDAQ:NDX|6M"],["OPOFINANCE:DJIUSD|6M"],["CAPITALCOM:RTY|6M"],["INDEX:BTCUSD|6M"],["TVC:GOLD|6M"]],dateRanges:["6m|1W"],fontSize:"10",headerFontSize:"medium",autosize:!0,width:"100%",height:"100%",noTimeScale:!1,hideDateRanges:!1,showMA:!0,maLength:"4",maLineColor:"#2962FF",maLineWidth:1,hideMarketStatus:!1,hideSymbolLogo:!1}},heatmapConfig(){return{exchanges:[],dataSource:"SPX500",grouping:"sector",blockSize:"market_cap_basic",blockColor:"change",locale:"en",symbolUrl:"",colorTheme:"light",hasTopBar:!1,isDataSetEnabled:!1,isZoomEnabled:!0,hasSymbolTooltip:!0,width:"100%",height:"100%"}}}},cn={class:"market-dashboard"},dn={key:0,class:"loading-with-skeleton"},un={key:1,class:"error"},hn={class:"text-danger"},gn={key:2},mn={class:"widget-container-ticker"},fn={class:"widget-container"},pn={class:"widget-container"},vn={class:"insight-grid"},yn={class:"insight-section"},wn={class:"insight-section weekly-section"},Sn={class:"widget-container"};function bn(i,e,a,o,s,n){const r=F("MarketOverviewSkeleton"),u=F("LazyTradingViewWidget"),h=F("ZeiiermanFearGreedGauge"),g=F("PerformanceMonitor");return c(),d("div",cn,[e[7]||(e[7]=t("h2",null,"Market Overview",-1)),e[8]||(e[8]=t("p",{class:"text-muted mb-3"},"Global markets overview and macro indicators",-1)),s.loading?(c(),d("div",dn,[L(r)])):s.error?(c(),d("div",un,[t("p",hn,l(s.error),1),t("button",{onClick:e[0]||(e[0]=(...y)=>n.refresh&&n.refresh(...y)),class:"btn btn-secondary"},"Retry")])):(c(),d("div",gn,[t("div",mn,[e[1]||(e[1]=t("div",{class:"widget-header"},[t("h3",null,"Market Index")],-1)),L(u,{"widget-type":"Market Index",config:n.tickersConfig,"script-url":"https://s3.tradingview.com/external-embedding/embed-widget-tickers.js",height:"100px",priority:1},null,8,["config"])]),L(h),t("div",fn,[e[2]||(e[2]=t("div",{class:"widget-header"},[t("h3",null,"Top Stories")],-1)),L(u,{"widget-type":"Top Stories",config:n.topStoriesConfig,"script-url":"https://s3.tradingview.com/external-embedding/embed-widget-timeline.js",height:"650px",priority:2},null,8,["config"])]),t("div",pn,[e[5]||(e[5]=t("div",{class:"widget-header"},[t("h3",null,"Market Insight")],-1)),t("div",vn,[t("div",yn,[e[3]||(e[3]=t("div",{class:"section-header"},[t("h4",null,"Market Daily Insight (MA5)")],-1)),L(u,{"widget-type":"Market Daily Insight",config:n.dailyConfig,"script-url":"https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js",height:"600px",priority:2},null,8,["config"])]),t("div",wn,[e[4]||(e[4]=t("div",{class:"section-header"},[t("h4",null,"Market Weekly Insight (MA4)")],-1)),L(u,{"widget-type":"Market Weekly Insight",config:n.weeklyConfig,"script-url":"https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js",height:"600px",priority:3},null,8,["config"])])])]),t("div",Sn,[e[6]||(e[6]=t("div",{class:"widget-header"},[t("h3",null,"Stock Heatmap")],-1)),L(u,{"widget-type":"Stock Heatmap",config:n.heatmapConfig,"script-url":"https://s3.tradingview.com/external-embedding/embed-widget-stock-heatmap.js",height:"500px",priority:3},null,8,["config"])]),L(g)]))])}const _n=O(ln,[["render",bn],["__scopeId","data-v-dcf5ac23"]]),j=k().refine(i=>{try{const e=new Date(i);return!isNaN(e.getTime())&&i.includes("T")}catch{return!1}},{message:"Invalid datetime format"}),Bt=ue(["fresh","stale","very_stale"]),kn=ue(["open","closed","pre","post"]).nullable(),Cn=ue(["latest","close","last_known"]),Tn=ue(["llm","fallback"]),Dn=ue(["good","stale","degraded","disabled_scrape"]),An=ss([nt(.5),nt(.75),nt(.9)]),In=ue(["operational","degraded","maintenance","outage"]),Mn=ue(["success","failed","running","pending"]),Nn=E({avg_cost_usd:I().positive().finite(),shares:I().positive().finite().optional()}),xn=E({scraping_enabled:G(),degradation_enabled:G(),ga_enabled:G(),clarity_enabled:G()}),Ln=E({timestamp:j,success:G(),error:k().optional(),changes_applied:I().nonnegative(),dry_run:G()}),Pn=E({last_import_result:Ln.optional()}),Ht=gt(()=>qn),qt=gt(()=>$n),Gt=gt(()=>Kn),Rn=E({last_daily_snapshot:Ht.optional(),last_quotes_snapshot:qt.optional(),last_metadata:Gt.optional()}),En=E({schema_version:k(),watchlist:q(k().max(10).regex(/^[A-Z0-9.-]+$/)),holdings:fe(k(),Nn),settings:xn,cache:Rn,diagnostics:Pn}),On=E({symbol:k().max(10).regex(/^[A-Z0-9.-]+$/),price_usd:I().nullable(),price_type:Cn,market_state:kn,is_delayed:G(),stale_level:Bt,error:k().nullable(),change_percent:I().optional(),volume:I().nonnegative().optional()}),Un=E({total_symbols:I().nonnegative(),successful_updates:I().nonnegative(),failed_updates:I().nonnegative(),average_delay_minutes:I().nonnegative().optional(),next_update:j.optional()}),$n=E({as_of:j,provider:k(),market_session:k().optional(),items:q(On),metadata:Un.optional()}),Fn=E({title:k().min(1),url:k().url(),published_at:j,source:k().min(1),summary:k().optional()}),Vn=E({symbol:k().max(10).regex(/^[A-Z0-9.-]+$/),short_brief_zh:k(),brief_truncated:G(),brief_source:Tn,news_top10:q(Fn),news_insufficient:G(),gaps:q(k())}),Wn=E({id:k().min(1),value:I().nullable(),as_of:j,source_name:k().min(1),quality_flag:Dn}),Bn=E({items:q(Wn).length(10,"Must have exactly 10 markets indicators")}),Hn=E({total_processing_time_ms:I().nonnegative(),news_sources_attempted:I().nonnegative(),news_sources_successful:I().nonnegative(),total_articles_collected:I().nonnegative(),articles_after_deduplication:I().nonnegative(),llm_brief_generation_success_rate:I().min(0).max(1),macro_indicators_updated:I().nonnegative(),macro_indicators_failed:I().nonnegative()}),qn=E({as_of_date_taipei:k().regex(/^\d{4}-\d{2}-\d{2}$/),generated_at_utc:j,universe:q(k()).length(10,"Universe must have exactly 10 symbols"),per_symbol:q(Vn).length(10,"Must have data for exactly 10 symbols"),macro:Bn,generation_metadata:Hn.optional()}),Gn=E({symbol:k().max(10).regex(/^[A-Z0-9.-]+$/),sector:k().nullable(),industry:k().nullable(),confidence:An,sources:q(k()).min(1),last_verified_at:j,market_cap_category:k().optional(),exchange:k().optional()}),jn=E({high_confidence_0_90:I().nonnegative(),medium_confidence_0_75:I().nonnegative(),low_confidence_0_50:I().nonnegative()}),zn=E({last_refresh_duration_ms:I().nonnegative(),symbols_updated:I().nonnegative(),symbols_failed:I().nonnegative(),confidence_improvements:I().nonnegative(),new_sources_added:I().nonnegative()}),Kn=E({ttl_days:I().positive(),as_of:j,next_refresh:j.optional(),items:q(Gn).length(10,"Must have metadata for exactly 10 symbols"),industry_grouping:fe(k(),q(k())).optional(),confidence_distribution:jn.optional(),data_sources:fe(k(),I().nonnegative()).optional(),refresh_metadata:zn.optional()}),Qn=E({last_run:j,next_run:j,status:Mn,duration_ms:I().nonnegative(),symbols_updated:I().nonnegative().optional(),symbols_processed:I().nonnegative().optional(),errors:q(k()),provider:k().optional()}),Yn=E({age_minutes:I().nonnegative().optional(),age_hours:I().nonnegative().optional(),age_days:I().nonnegative().optional(),staleness:Bt}),Xn=E({used_minutes:I().nonnegative(),total_minutes:I().nonnegative(),reset_date:k()}),Jn=E({data_files_mb:I().nonnegative(),total_repo_mb:I().nonnegative()}),Zn=E({calls_today:I().nonnegative(),daily_limit:I().nonnegative(),reset_time:j}),ei=E({github_actions_quota:Xn.optional(),storage_usage:Jn.optional(),api_limits:fe(k(),Zn).optional()}),ti=E({enabled:G(),active_fallbacks:q(k()),cache_hits_last_hour:I().nonnegative()}),si=E({description:k(),last_updated:j,system_status:In,jobs:fe(k(),Qn),data_freshness:fe(k(),Yn),system_health:ei,degradation_status:ti}),ai=E({max_length:I().positive(),allowed_chars:k(),case_sensitive:G()});E({description:k(),version:k(),last_updated:k(),symbols:q(k().max(10).regex(/^[A-Z0-9.-]+$/)).length(10,"Universe must have exactly 10 symbols"),validation:ai});const ni=E({id:k().min(1),name:k().min(1),description:k().min(1),scrape_only:G(),data_source:k().min(1),update_frequency:k().min(1),unit:k().min(1)}),ii=E({default_enabled:G(),timeout_seconds:I().positive(),retry_attempts:I().nonnegative(),user_agent:k().min(1)});E({description:k(),version:k(),last_updated:k(),indicators:q(ni).length(10,"Must have exactly 10 markets indicators"),scraping_settings:ii});function Ze(i,e){try{return{success:!0,data:i.parse(e)}}catch(a){return a instanceof as?{success:!1,error:{message:"Validation failed",details:a.errors}}:{success:!1,error:{message:"Unknown validation error",details:{error:String(a)}}}}}function tt(i){return Ze(En,i)}function oi(i){return Ze(qt,i)}function ri(i){return Ze(Ht,i)}function li(i){return Ze(Gt,i)}function ci(i){return Ze(si,i)}function di(i){const e=["schema_version","watchlist","holdings","settings","cache","diagnostics"];if(typeof i!="object"||i===null)return{success:!1,error:{message:"Import data must be a valid JSON object",code:"INVALID_FORMAT"}};const o=Object.keys(i).filter(s=>!e.includes(s));return o.length>0?{success:!1,error:{message:`Unknown keys found: ${o.join(", ")}`,code:"UNKNOWN_KEYS",details:{unknownKeys:o}}}:tt(i)}const P=class P{static loadState(){try{const e=localStorage.getItem(P.STORAGE_KEY);if(!e)return{...P.DEFAULT_STATE};const a=JSON.parse(e),o=P.migrateState(a),s=tt(o);return s.success&&s.data?s.data:(console.warn("Invalid state in localStorage, using defaults:",s.error),{...P.DEFAULT_STATE})}catch(e){return console.error("Failed to load state from localStorage:",e),{...P.DEFAULT_STATE}}}static saveState(e){const a=tt(e);if(!a.success)return a;try{return localStorage.setItem(P.STORAGE_KEY,JSON.stringify(e)),{success:!0,data:e}}catch(o){return{success:!1,error:{message:"Failed to save state to localStorage",details:{error:String(o)}}}}}static clearState(){localStorage.removeItem(P.STORAGE_KEY)}static exportState(){const e=P.loadState();return JSON.stringify(e,null,2)}static importState(e,a=!1){try{const o=JSON.parse(e),s=di(o);if(!s.success)return s;const n=P.migrateState(s.data),r=tt(n);if(!r.success)return r;if(!a){const u=P.saveState(r.data);if(!u.success)return u}return{success:!0,data:r.data}}catch(o){return{success:!1,error:{message:"Invalid JSON format",details:{error:String(o)}}}}}static updateWatchlist(e){const o={...P.loadState(),watchlist:e};return P.saveState(o)}static addToWatchlist(e){const a=P.loadState();if(a.watchlist.includes(e.toUpperCase()))return{success:!1,error:{message:"Symbol already in watchlist",code:"DUPLICATE_SYMBOL"}};const o=[...a.watchlist,e.toUpperCase()];return P.updateWatchlist(o)}static removeFromWatchlist(e){const o=P.loadState().watchlist.filter(s=>s!==e.toUpperCase());return P.updateWatchlist(o)}static updateHolding(e,a,o){const s=P.loadState(),n={...s,holdings:{...s.holdings,[e.toUpperCase()]:{avg_cost_usd:a,...o!==void 0&&{shares:o}}}};return P.saveState(n)}static removeHolding(e){const a=P.loadState(),o={...a.holdings};delete o[e.toUpperCase()];const s={...a,holdings:o};return P.saveState(s)}static updateSettings(e){const a=P.loadState(),o={...a,settings:{...a.settings,...e}};return P.saveState(o)}static updateCache(e){const a=P.loadState(),o={...a,cache:{...a.cache,...e}};return P.saveState(o)}static recordImportResult(e){const a=P.loadState(),o={...a,diagnostics:{...a.diagnostics,last_import_result:e}};return P.saveState(o)}static migrateState(e){var o,s,n,r;return e.schema_version||(e.schema_version="1.0.0"),{schema_version:P.CURRENT_SCHEMA_VERSION,watchlist:e.watchlist||[],holdings:e.holdings||{},settings:{scraping_enabled:((o=e.settings)==null?void 0:o.scraping_enabled)??!1,degradation_enabled:((s=e.settings)==null?void 0:s.degradation_enabled)??!0,ga_enabled:((n=e.settings)==null?void 0:n.ga_enabled)??!1,clarity_enabled:((r=e.settings)==null?void 0:r.clarity_enabled)??!1},cache:e.cache||{},diagnostics:e.diagnostics||{}}}static getCurrentSchemaVersion(){return P.CURRENT_SCHEMA_VERSION}static isStorageAvailable(){try{const e="__storage_test__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch{return!1}}};he(P,"STORAGE_KEY","investment-dashboard-state"),he(P,"CURRENT_SCHEMA_VERSION","1.0.0"),he(P,"DEFAULT_STATE",{schema_version:P.CURRENT_SCHEMA_VERSION,watchlist:[],holdings:{},settings:{scraping_enabled:!1,degradation_enabled:!0,ga_enabled:!1,clarity_enabled:!1},cache:{},diagnostics:{}});let X=P;class ui{constructor(e="",a=!0){he(this,"baseUrl");he(this,"cacheBustingEnabled");this.baseUrl=e,this.cacheBustingEnabled=a}async fetchSystemStatus(){var e;try{const a=await fetch(`${this.baseUrl}/data/status.json`);if(!a.ok)throw new Error(`HTTP ${a.status}`);const o=await a.json(),s=ci(o);if(!s.success)throw new Error(`Invalid status.json: ${(e=s.error)==null?void 0:e.message}`);return{data:s.data,source:"network",stale_level:"fresh",as_of:s.data.last_updated}}catch(a){return console.warn("Failed to fetch system status:",a),X.loadState().cache.last_daily_snapshot?{data:null,source:"fallback",stale_level:"very_stale",error:String(a)}:{data:null,source:"fallback",stale_level:"very_stale",error:String(a)}}}async fetchQuotesSnapshot(){var e,a;try{const o=await this.fetchSystemStatus();let s="";this.cacheBustingEnabled&&((e=o.data)!=null&&e.last_updated)&&(s=`?t=${new Date(o.data.last_updated).getTime()}`);const n=await fetch(`${this.baseUrl}/data/quotes/latest.json${s}`);if(!n.ok)throw new Error(`HTTP ${n.status}`);const r=await n.json(),u=oi(r);if(!u.success)throw new Error(`Invalid quotes snapshot: ${(a=u.error)==null?void 0:a.message}`);const h=X.loadState();return X.updateCache({last_quotes_snapshot:u.data}),{data:u.data,source:"network",stale_level:this.calculateStaleness(u.data.as_of),as_of:u.data.as_of}}catch(o){console.warn("Failed to fetch quotes snapshot:",o);const s=X.loadState();return s.cache.last_quotes_snapshot?{data:s.cache.last_quotes_snapshot,source:"cache",stale_level:this.calculateStaleness(s.cache.last_quotes_snapshot.as_of),as_of:s.cache.last_quotes_snapshot.as_of,error:String(o)}:{data:null,source:"fallback",stale_level:"very_stale",error:String(o)}}}async fetchDailySnapshot(e){var a,o;try{const s=e||this.getTaipeiDateString(),n=await this.fetchSystemStatus();let r="";this.cacheBustingEnabled&&((a=n.data)!=null&&a.last_updated)&&(r=`?t=${new Date(n.data.last_updated).getTime()}`);const u=await fetch(`${this.baseUrl}/data/daily/${s}.json${r}`);if(!u.ok)throw new Error(`HTTP ${u.status}`);const h=await u.json(),g=ri(h);if(!g.success)throw new Error(`Invalid daily snapshot: ${(o=g.error)==null?void 0:o.message}`);return X.updateCache({last_daily_snapshot:g.data}),{data:g.data,source:"network",stale_level:this.calculateStaleness(g.data.generated_at_utc),as_of:g.data.generated_at_utc}}catch(s){console.warn("Failed to fetch daily snapshot:",s);const n=X.loadState();return n.cache.last_daily_snapshot?{data:n.cache.last_daily_snapshot,source:"cache",stale_level:this.calculateStaleness(n.cache.last_daily_snapshot.generated_at_utc),as_of:n.cache.last_daily_snapshot.generated_at_utc,error:String(s)}:{data:null,source:"fallback",stale_level:"very_stale",error:String(s)}}}async fetchMetadataSnapshot(){var e,a;try{const o=await this.fetchSystemStatus();let s="";this.cacheBustingEnabled&&((e=o.data)!=null&&e.last_updated)&&(s=`?t=${new Date(o.data.last_updated).getTime()}`);const n=await fetch(`${this.baseUrl}/data/symbols_metadata.json${s}`);if(!n.ok)throw new Error(`HTTP ${n.status}`);const r=await n.json(),u=li(r);if(!u.success)throw new Error(`Invalid metadata snapshot: ${(a=u.error)==null?void 0:a.message}`);return X.updateCache({last_metadata:u.data}),{data:u.data,source:"network",stale_level:this.calculateStaleness(u.data.as_of),as_of:u.data.as_of}}catch(o){console.warn("Failed to fetch metadata snapshot:",o);const s=X.loadState();return s.cache.last_metadata?{data:s.cache.last_metadata,source:"cache",stale_level:this.calculateStaleness(s.cache.last_metadata.as_of),as_of:s.cache.last_metadata.as_of,error:String(o)}:{data:null,source:"fallback",stale_level:"very_stale",error:String(o)}}}calculateStaleness(e){try{const a=new Date(e),s=(new Date().getTime()-a.getTime())/(1e3*60);return s<=60?"fresh":s<=24*60?"stale":"very_stale"}catch{return"very_stale"}}getTaipeiDateString(){const e=new Date;return new Date(e.getTime()+8*60*60*1e3).toISOString().split("T")[0]}}const hi=()=>{if(typeof window<"u"){const i=window.location.hostname,e=window.location.pathname;if(i==="romarin-hsieh.github.io"&&e.startsWith("/investment-dashboard"))return"/investment-dashboard"}return""},ut=new ui(hi());class gi{constructor(){this.cache=new Map,this.lastUpdate=null;const e="10";this.updateInterval=e*60*1e3,console.log(`Symbols cache interval set to ${e} minutes (1 hour default)`)}async getSymbolsList(){try{const e=this.getEnvironmentSymbols();if(e.length>0)return console.log("Using symbols from environment variables"),e;if(this.isCacheValid())return console.log("Using cached symbols list"),this.cache.get("symbols")||[];const a=await this.fetchFromUniverse();if(a.length>0)return this.updateCache("symbols",a),console.log("Using symbols from universe.json"),a;const o=await this.fetchFromGoogleSheets();if(o.length>0)return this.updateCache("symbols",o),console.log("Using symbols from Google Sheets"),o;const s=this.getStaticSymbols();return console.log("Using static fallback symbols"),s}catch(e){return console.warn("Error fetching symbols config:",e),this.getStaticSymbols()}}async fetchFromUniverse(){try{console.log("Fetching symbols from universe.json...");const e=await fetch("/config/universe.json");if(!e.ok)throw new Error(`HTTP ${e.status}`);const a=await e.json();if(a.symbols&&Array.isArray(a.symbols)){const o=a.symbols.filter(s=>s&&typeof s=="string").map(s=>s.trim().toUpperCase());return console.log(`‚úÖ Loaded ${o.length} symbols from universe.json:`,o),o}throw new Error("Invalid universe.json format")}catch(e){return console.warn("Failed to fetch from universe.json:",e),[]}}getEnvironmentSymbols(){const e="ASTS,RIVN,PL,ONDS,RDW,AVAV,MDB,ORCL,TSM,RKLB,CRM,NVDA,AVGO,AMZN,GOOG,META,NFLX,LEU,SMR,CRWV,IONQ,PLTR,HIMS,TSLA";try{return e.startsWith("[")?JSON.parse(e):e.split(",").map(a=>a.trim()).filter(Boolean)}catch(a){return console.warn("Invalid VITE_STOCK_SYMBOLS format:",a),[]}}async fetchFromGoogleSheets(){return[]}parseGoogleSheetsData(e){try{if(Array.isArray(e)&&e.length>0&&typeof e[0]=="string")return e.filter(a=>a&&typeof a=="string").map(a=>a.trim().toUpperCase());if(Array.isArray(e)&&e.length>0&&typeof e[0]=="object")return e.map(a=>a.Symbol||a.symbol||a.SYMBOL).filter(a=>a&&typeof a=="string").map(a=>a.trim().toUpperCase());if(e.values&&Array.isArray(e.values)){const a=e.values,o=a[0],n=o&&o[0]&&(o[0].toLowerCase().includes("symbol")||o[0].toLowerCase().includes("stock")||o[0].toLowerCase().includes("ticker"))?1:0;return a.slice(n).map(r=>r[0]).filter(r=>r&&typeof r=="string").map(r=>r.trim().toUpperCase())}return console.warn("Unrecognized Google Sheets data format:",e),[]}catch(a){return console.warn("Failed to parse Google Sheets data:",a),[]}}getStaticSymbols(){return["ASTS","RIVN","PL","ONDS","RDW","AVAV","MDB","ORCL","TSM","RKLB","CRM","NVDA","AVGO","AMZN","GOOG","META","NFLX","LEU","SMR","CRWV","IONQ","PLTR","HIMS","TSLA"]}updateCache(e,a){this.cache.set(e,a),this.lastUpdate=Date.now()}isCacheValid(){return this.lastUpdate?Date.now()-this.lastUpdate<this.updateInterval:!1}async refresh(){return this.cache.clear(),this.lastUpdate=null,await this.getSymbolsList()}getConfigSource(){return this.getEnvironmentSymbols().length>0?"environment":this.isCacheValid()?"cache":"static"}getCacheInfo(){return{cacheIntervalMinutes:"10",sheetsTimeoutMs:"3000",lastUpdate:this.lastUpdate,cacheValid:this.isCacheValid(),nextUpdateIn:this.lastUpdate?Math.max(0,this.updateInterval-(Date.now()-this.lastUpdate)):0}}}const ge=new gi;class mi{constructor(){this.cache=new Map,this.loadingPromises=new Map,this.maxCacheSize=50,this.cacheTimeout=5*60*1e3}generateKey(e,a,o){return`${e}-${a}-${o}`}has(e,a,o){const s=this.generateKey(e,a,o),n=this.cache.get(s);return n?Date.now()-n.timestamp>this.cacheTimeout?(this.cache.delete(s),!1):!0:!1}get(e,a,o){const s=this.generateKey(e,a,o),n=this.cache.get(s);return n&&Date.now()-n.timestamp<=this.cacheTimeout?n.data:null}set(e,a,o,s){const n=this.generateKey(e,a,o);if(this.cache.size>=this.maxCacheSize){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(n,{data:s,timestamp:Date.now()})}isLoading(e,a,o){const s=this.generateKey(e,a,o);return this.loadingPromises.has(s)}setLoading(e,a,o,s){const n=this.generateKey(e,a,o);return this.loadingPromises.set(n,s),s.finally(()=>{this.loadingPromises.delete(n)}),s}getLoadingPromise(e,a,o){const s=this.generateKey(e,a,o);return this.loadingPromises.get(s)}clear(){this.cache.clear(),this.loadingPromises.clear()}clearExpired(){const e=Date.now();for(const[a,o]of this.cache.entries())e-o.timestamp>this.cacheTimeout&&this.cache.delete(a)}getStats(){return{cacheSize:this.cache.size,loadingCount:this.loadingPromises.size,maxCacheSize:this.maxCacheSize}}}const re=new mi;setInterval(()=>{re.clearExpired()},6e4);class fi{constructor(){this.maxConcurrent=6,this.currentLoading=0,this.queue=[],this.loadDelay=100}async addToQueue(e){return new Promise((a,o)=>{this.queue.push({loadFunction:e,resolve:a,reject:o,timestamp:Date.now()}),this.processQueue()})}async processQueue(){if(this.currentLoading>=this.maxConcurrent||this.queue.length===0)return;const e=this.queue.shift();this.currentLoading++;try{this.currentLoading>1&&await this.delay(this.loadDelay);const a=await e.loadFunction();e.resolve(a)}catch(a){e.reject(a)}finally{this.currentLoading--,setTimeout(()=>{this.processQueue()},25)}}delay(e){return new Promise(a=>setTimeout(a,e))}getStatus(){return{currentLoading:this.currentLoading,queueLength:this.queue.length,maxConcurrent:this.maxConcurrent}}clearQueue(){this.queue.forEach(e=>{e.reject(new Error("Queue cleared"))}),this.queue=[]}setMaxConcurrent(e){this.maxConcurrent=Math.max(1,Math.min(10,e))}}const pi=new fi,vi={name:"FastTradingViewWidget",props:{widgetType:{type:String,required:!0,validator:i=>["overview","technical"].includes(i)},symbol:{type:String,required:!0},exchange:{type:String,default:"NASDAQ"},priority:{type:Number,default:1}},data(){return{loaded:!1,error:!1,loadStartTime:0,isVisible:!1,observer:null}},computed:{containerId(){return`fast-widget-${this.widgetType}-${this.symbol}-${Date.now()}`},cacheKey(){return`${this.widgetType}-${this.symbol}-${this.exchange}`}},async mounted(){this.setupIntersectionObserver()},beforeUnmount(){this.observer&&this.observer.disconnect()},methods:{setupIntersectionObserver(){const i={1:"300px",2:"150px",3:"50px"};this.observer=new IntersectionObserver(e=>{e.forEach(a=>{a.isIntersecting&&!this.loaded&&!this.error&&(this.isVisible=!0,this.loadWidget(),this.observer.disconnect())})},{rootMargin:i[this.priority]||"150px",threshold:.1}),this.observer.observe(this.$refs.container)},async loadWidget(){this.loadStartTime=performance.now(),this.loaded=!1,this.error=!1;try{const e={1:0,2:300,3:600}[this.priority]||0;if(e>0&&await new Promise(o=>setTimeout(o,e)),re.has(this.widgetType,this.symbol,this.exchange)){const o=re.get(this.widgetType,this.symbol,this.exchange);if(o){this.renderCachedWidget(o);return}}if(re.isLoading(this.widgetType,this.symbol,this.exchange)){await re.getLoadingPromise(this.widgetType,this.symbol,this.exchange);return}const a=pi.addToQueue(()=>this.createWidget());re.setLoading(this.widgetType,this.symbol,this.exchange,a),await a}catch(i){console.error("Failed to load widget:",i),this.error=!0}},async createWidget(){return new Promise((i,e)=>{this.$nextTick(async()=>{const a=this.$refs.container;if(!a){e(new Error("Container not found"));return}const o=this.getWidgetConfig(),s=this.getScriptUrl();if(!ct.isPreloaded(s))try{await ct.preloadScript(s)}catch(h){console.warn("Script preload failed, continuing with normal load:",h)}const n=document.createElement("script");n.type="text/javascript",n.src=s,n.async=!0,n.innerHTML=JSON.stringify(o);const u=setTimeout(()=>{this.error=!0,e(new Error("Widget load timeout"))},{1:3e3,2:5e3,3:8e3}[this.priority]||5e3);n.onload=()=>{clearTimeout(u),this.loaded=!0;const h=performance.now()-this.loadStartTime;console.log(`Widget ${this.cacheKey} loaded in ${h.toFixed(2)}ms (Priority: ${this.priority})`),re.set(this.widgetType,this.symbol,this.exchange,{config:o,scriptUrl:s}),i()},n.onerror=()=>{clearTimeout(u),this.error=!0,e(new Error("Script load failed"))},a.appendChild(n)})})},getWidgetConfig(){if(this.widgetType==="overview")return{lineWidth:2,lineType:0,chartType:"candlesticks",showVolume:!0,fontColor:"rgb(106, 109, 120)",gridLineColor:"rgba(46, 46, 46, 0.06)",volumeUpColor:"rgba(34, 171, 148, 0.5)",volumeDownColor:"rgba(247, 82, 95, 0.5)",backgroundColor:"#ffffff",widgetFontColor:"#0F0F0F",upColor:"#22ab94",downColor:"#f7525f",borderUpColor:"#22ab94",borderDownColor:"#f7525f",wickUpColor:"#22ab94",wickDownColor:"#f7525f",colorTheme:"light",isTransparent:!0,locale:"en",chartOnly:!1,scalePosition:"right",scaleMode:"Normal",fontFamily:"-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif",valuesTracking:"1",changeMode:"price-and-percent",symbols:[[this.symbol,`${this.exchange}:${this.symbol}|1D`]],dateRanges:["1d|1","1m|30","3m|60","12m|1D","60m|1W","all|1M"],fontSize:"10",headerFontSize:"medium",autosize:!0,width:"100%",height:"100%",noTimeScale:!1,hideDateRanges:!1,showMA:!0,maLength:9,maLineColor:"#2962FF",maLineWidth:1,hideMarketStatus:!1,hideSymbolLogo:!1};if(this.widgetType==="technical")return{interval:"1D",width:"100%",height:"100%",isTransparent:!1,symbol:`${this.exchange}:${this.symbol}`,showIntervalTabs:!0,locale:"en",colorTheme:"light"}},getScriptUrl(){if(this.widgetType==="overview")return"https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js";if(this.widgetType==="technical")return"https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js"},renderCachedWidget(i){this.$nextTick(()=>{const e=this.$refs.container;if(!e)return;const a=document.createElement("script");a.type="text/javascript",a.src=i.scriptUrl,a.async=!0,a.innerHTML=JSON.stringify(i.config),a.onload=()=>{this.loaded=!0;const o=performance.now()-this.loadStartTime;console.log(`Cached widget ${this.cacheKey} loaded in ${o.toFixed(2)}ms`)},e.appendChild(a)})},async retry(){this.setupIntersectionObserver()}}},yi=["id"],wi={key:0,class:"fast-loading"},Si={key:1,class:"fast-error"};function bi(i,e,a,o,s,n){return c(),d("div",{class:"fast-widget",id:n.containerId,ref:"container"},[!s.loaded&&!s.error?(c(),d("div",wi,[e[1]||(e[1]=t("div",{class:"loading-spinner"},null,-1)),t("span",null,"Loading "+l(a.widgetType)+"...",1)])):b("",!0),s.error?(c(),d("div",Si,[e[2]||(e[2]=t("span",null,"‚ö†Ô∏è Failed to load",-1)),t("button",{onClick:e[0]||(e[0]=(...r)=>n.retry&&n.retry(...r)),class:"retry-btn"},"Retry")])):b("",!0)],8,yi)}const jt=O(vi,[["render",bi],["__scopeId","data-v-ffc50c73"]]),_i={name:"TechnicalIndicators",props:{symbol:{type:String,required:!0},exchange:{type:String,default:"NASDAQ"}},data(){return{loading:!0,error:null,technicalData:null,cacheInfo:null}},mounted(){this.loadTechnicalData()},watch:{symbol(){this.loadTechnicalData()}},methods:{async loadTechnicalData(){this.loading=!0,this.error=null,this.cacheInfo=null;try{console.log(`Loading technical data for ${this.symbol}...`);const i=Date.now();this.technicalData=await ce.getTechnicalIndicators(this.symbol);const e=Date.now()-i;if(this.technicalData.error)throw new Error(this.technicalData.error);this.technicalData.source==="Daily Cache"?this.cacheInfo=`Cached data (${e}ms)`:this.cacheInfo=`Fresh data (${e}ms)`,console.log(`Technical data loaded for ${this.symbol}:`,this.technicalData)}catch(i){console.error(`Failed to load technical data for ${this.symbol}:`,i),this.error=i.message}finally{this.loading=!1}},getSignalClass(i){if(!i)return"neutral";const e=["BUY","OVERSOLD","STRONG_TREND"],a=["SELL","OVERBOUGHT"];return e.includes(i)?"bullish":a.includes(i)?"bearish":"neutral"},formatValue(i){return i==null?"N/A":typeof i=="string"?i:typeof i=="number"?i.toFixed(2):"N/A"},formatPriceDiff(i){if(!i||!this.technicalData)return"";const e=this.getCurrentPrice();if(!e)return"";const a=e-parseFloat(i),o=a/parseFloat(i)*100;if(Math.abs(a)<.01)return"¬±0.00";const s=a>0?"+":"";return`${s}${a.toFixed(2)} (${s}${o.toFixed(1)}%)`},getCurrentPrice(){var i,e,a;return this.technicalData?(i=this.technicalData.sma5)!=null&&i.currentPrice?parseFloat(this.technicalData.sma5.currentPrice):(e=this.technicalData.ma5)!=null&&e.currentPrice?parseFloat(this.technicalData.ma5.currentPrice):(a=this.technicalData.sma50)!=null&&a.currentPrice?parseFloat(this.technicalData.sma50.currentPrice):null:null},getPriceDiffClass(i){if(!i)return"neutral";const e=this.getCurrentPrice();if(!e)return"neutral";const a=e-parseFloat(i);return Math.abs(a)<.01?"neutral":a>0?"positive":"negative"}}},ki={class:"technical-indicators"},Ci={class:"indicators-header"},Ti={key:0,class:"cache-info"},Di={key:0,class:"loading-state"},Ai={key:1,class:"error-state"},Ii={key:2,class:"indicators-grid"},Mi={class:"indicator-item"},Ni={class:"indicator-value-row"},xi={class:"indicator-item"},Li={class:"indicator-value-row"},Pi={class:"indicator-item"},Ri={class:"indicator-value-row"},Ei={class:"indicator-item"},Oi={class:"indicator-value-row"},Ui={class:"indicator-item"},$i={class:"indicator-value-row"},Fi={class:"indicator-item"},Vi={class:"indicator-value-row"},Wi={class:"indicator-item"},Bi={class:"indicator-value-row"},Hi={class:"indicator-item"},qi={class:"indicator-value-row"},Gi={class:"indicator-item"},ji={class:"indicator-value-row"},zi={class:"indicator-item"},Ki={class:"indicator-item"},Qi={class:"indicator-item"};function Yi(i,e,a,o,s,n){var r,u,h,g,y,f,C,D,T,A,_,N,v,x,V,S,M,R,m,B,se,ae,ne,pe,ve,ye,we,Se,be,_e,ke,Ce,Te,De,Ae,Ie,Me,Ne,xe,Le,Pe,Re,Ee,Oe,Ue,$e,Fe,Ve,We,Be,He,qe,Ge,je,ze,Ke,Qe,Ye,Xe,z,at,pt,vt,yt,wt,St,bt,_t,kt,Ct,Tt,Dt,At,It,Mt,Nt,xt,Lt,Pt,Rt,Et,Ot,Ut,$t;return c(),d("div",ki,[t("div",Ci,[e[0]||(e[0]=t("h4",null,"Technical Indicators",-1)),s.cacheInfo?(c(),d("div",Ti,[t("small",null,l(s.cacheInfo),1)])):b("",!0)]),s.loading?(c(),d("div",Di,[...e[1]||(e[1]=[t("div",{class:"loading-spinner"},null,-1),t("span",null,"Loading technical data...",-1)])])):s.error?(c(),d("div",Ai,[e[2]||(e[2]=t("span",{class:"error-icon"},"‚ö†Ô∏è",-1)),t("span",null,l(s.error),1)])):(c(),d("div",Ii,[t("div",Mi,[e[3]||(e[3]=t("span",{class:"indicator-label"},"MA5",-1)),t("div",Ni,[t("span",{class:p(["indicator-value",n.getSignalClass((u=(r=s.technicalData)==null?void 0:r.ma5)==null?void 0:u.signal)])},l(n.formatValue((g=(h=s.technicalData)==null?void 0:h.ma5)==null?void 0:g.value)),3),t("span",{class:p(["price-diff",n.getPriceDiffClass((f=(y=s.technicalData)==null?void 0:y.ma5)==null?void 0:f.value)])},l(n.formatPriceDiff((D=(C=s.technicalData)==null?void 0:C.ma5)==null?void 0:D.value)),3)])]),t("div",xi,[e[4]||(e[4]=t("span",{class:"indicator-label"},"MA10",-1)),t("div",Li,[t("span",{class:p(["indicator-value",n.getSignalClass((A=(T=s.technicalData)==null?void 0:T.ma10)==null?void 0:A.signal)])},l(n.formatValue((N=(_=s.technicalData)==null?void 0:_.ma10)==null?void 0:N.value)),3),t("span",{class:p(["price-diff",n.getPriceDiffClass((x=(v=s.technicalData)==null?void 0:v.ma10)==null?void 0:x.value)])},l(n.formatPriceDiff((S=(V=s.technicalData)==null?void 0:V.ma10)==null?void 0:S.value)),3)])]),t("div",Pi,[e[5]||(e[5]=t("span",{class:"indicator-label"},"MA30",-1)),t("div",Ri,[t("span",{class:p(["indicator-value",n.getSignalClass((R=(M=s.technicalData)==null?void 0:M.ma30)==null?void 0:R.signal)])},l(n.formatValue((B=(m=s.technicalData)==null?void 0:m.ma30)==null?void 0:B.value)),3),t("span",{class:p(["price-diff",n.getPriceDiffClass((ae=(se=s.technicalData)==null?void 0:se.ma30)==null?void 0:ae.value)])},l(n.formatPriceDiff((pe=(ne=s.technicalData)==null?void 0:ne.ma30)==null?void 0:pe.value)),3)])]),t("div",Ei,[e[6]||(e[6]=t("span",{class:"indicator-label"},"SMA5",-1)),t("div",Oi,[t("span",{class:p(["indicator-value",n.getSignalClass((ye=(ve=s.technicalData)==null?void 0:ve.sma5)==null?void 0:ye.signal)])},l(n.formatValue((Se=(we=s.technicalData)==null?void 0:we.sma5)==null?void 0:Se.value)),3),t("span",{class:p(["price-diff",n.getPriceDiffClass((_e=(be=s.technicalData)==null?void 0:be.sma5)==null?void 0:_e.value)])},l(n.formatPriceDiff((Ce=(ke=s.technicalData)==null?void 0:ke.sma5)==null?void 0:Ce.value)),3)])]),t("div",Ui,[e[7]||(e[7]=t("span",{class:"indicator-label"},"SMA10",-1)),t("div",$i,[t("span",{class:p(["indicator-value",n.getSignalClass((De=(Te=s.technicalData)==null?void 0:Te.sma10)==null?void 0:De.signal)])},l(n.formatValue((Ie=(Ae=s.technicalData)==null?void 0:Ae.sma10)==null?void 0:Ie.value)),3),t("span",{class:p(["price-diff",n.getPriceDiffClass((Ne=(Me=s.technicalData)==null?void 0:Me.sma10)==null?void 0:Ne.value)])},l(n.formatPriceDiff((Le=(xe=s.technicalData)==null?void 0:xe.sma10)==null?void 0:Le.value)),3)])]),t("div",Fi,[e[8]||(e[8]=t("span",{class:"indicator-label"},"SMA30",-1)),t("div",Vi,[t("span",{class:p(["indicator-value",n.getSignalClass((Re=(Pe=s.technicalData)==null?void 0:Pe.sma30)==null?void 0:Re.signal)])},l(n.formatValue((Oe=(Ee=s.technicalData)==null?void 0:Ee.sma30)==null?void 0:Oe.value)),3),t("span",{class:p(["price-diff",n.getPriceDiffClass(($e=(Ue=s.technicalData)==null?void 0:Ue.sma30)==null?void 0:$e.value)])},l(n.formatPriceDiff((Ve=(Fe=s.technicalData)==null?void 0:Fe.sma30)==null?void 0:Ve.value)),3)])]),t("div",Wi,[e[9]||(e[9]=t("span",{class:"indicator-label"},"Ichimoku Conversion (9)",-1)),t("div",Bi,[t("span",{class:p(["indicator-value",n.getSignalClass((Be=(We=s.technicalData)==null?void 0:We.ichimokuConversionLine)==null?void 0:Be.signal)])},l(n.formatValue((qe=(He=s.technicalData)==null?void 0:He.ichimokuConversionLine)==null?void 0:qe.value)),3),t("span",{class:p(["price-diff",n.getPriceDiffClass((je=(Ge=s.technicalData)==null?void 0:Ge.ichimokuConversionLine)==null?void 0:je.value)])},l(n.formatPriceDiff((Ke=(ze=s.technicalData)==null?void 0:ze.ichimokuConversionLine)==null?void 0:Ke.value)),3)])]),t("div",Hi,[e[10]||(e[10]=t("span",{class:"indicator-label"},"Ichimoku Base (26)",-1)),t("div",qi,[t("span",{class:p(["indicator-value",n.getSignalClass((Ye=(Qe=s.technicalData)==null?void 0:Qe.ichimokuBaseLine)==null?void 0:Ye.signal)])},l(n.formatValue((z=(Xe=s.technicalData)==null?void 0:Xe.ichimokuBaseLine)==null?void 0:z.value)),3),t("span",{class:p(["price-diff",n.getPriceDiffClass((pt=(at=s.technicalData)==null?void 0:at.ichimokuBaseLine)==null?void 0:pt.value)])},l(n.formatPriceDiff((yt=(vt=s.technicalData)==null?void 0:vt.ichimokuBaseLine)==null?void 0:yt.value)),3)])]),t("div",Gi,[e[11]||(e[11]=t("span",{class:"indicator-label"},"Ichimoku Lagging (26)",-1)),t("div",ji,[t("span",{class:p(["indicator-value",n.getSignalClass((St=(wt=s.technicalData)==null?void 0:wt.ichimokuLaggingSpan)==null?void 0:St.signal)])},l(n.formatValue((_t=(bt=s.technicalData)==null?void 0:bt.ichimokuLaggingSpan)==null?void 0:_t.value)),3),t("span",{class:p(["price-diff",n.getPriceDiffClass((Ct=(kt=s.technicalData)==null?void 0:kt.ichimokuLaggingSpan)==null?void 0:Ct.value)])},l(n.formatPriceDiff((Dt=(Tt=s.technicalData)==null?void 0:Tt.ichimokuLaggingSpan)==null?void 0:Dt.value)),3)])]),t("div",zi,[e[12]||(e[12]=t("span",{class:"indicator-label"},"ADX (14)",-1)),t("span",{class:p(["indicator-value",n.getSignalClass((It=(At=s.technicalData)==null?void 0:At.adx14)==null?void 0:It.signal)])},l(n.formatValue((Nt=(Mt=s.technicalData)==null?void 0:Mt.adx14)==null?void 0:Nt.value)),3)]),t("div",Ki,[e[13]||(e[13]=t("span",{class:"indicator-label"},"MACD (12,26)",-1)),t("span",{class:p(["indicator-value",n.getSignalClass((Lt=(xt=s.technicalData)==null?void 0:xt.macd)==null?void 0:Lt.signal)])},l(n.formatValue((Rt=(Pt=s.technicalData)==null?void 0:Pt.macd)==null?void 0:Rt.value)),3)]),t("div",Qi,[e[14]||(e[14]=t("span",{class:"indicator-label"},"VWMA (20)",-1)),t("span",{class:p(["indicator-value",n.getSignalClass((Ot=(Et=s.technicalData)==null?void 0:Et.vwma20)==null?void 0:Ot.signal)])},l(n.formatValue(($t=(Ut=s.technicalData)==null?void 0:Ut.vwma20)==null?void 0:$t.value)),3)])]))])}const zt=O(_i,[["render",Yi],["__scopeId","data-v-5681ce55"]]),Xi={name:"StockCard",components:{FastTradingViewWidget:jt,TechnicalIndicators:zt},props:{quote:{type:Object,required:!0},dailyData:{type:Object,default:null},metadata:{type:Object,default:null}},computed:{isStale(){return this.quote.stale_level!=="fresh"}},methods:{getSector(){return!this.metadata||this.metadata.confidence<.7?"Unknown":this.metadata.sector||"Unknown"},getIndustry(){return!this.metadata||this.metadata.confidence<.7?"Unknown Industry":this.metadata.industry||this.metadata.sector||"Unknown Industry"},getIndustryCategory(){const i=this.getIndustry();return{"Industrial IoT Solutions":"tech-iot","Satellite Imaging & Analytics":"tech-satellite","Database Software":"tech-software","Enterprise Software":"tech-software",Semiconductors:"tech-hardware","Aerospace & Defense":"industrial-aerospace","Space Infrastructure":"industrial-space","Satellite Communications":"communications","Electric Vehicles":"automotive","Unknown Industry":"unknown"}[i]||"other"},getExchange(){if(this.metadata&&this.metadata.exchange)return this.metadata.exchange;const i=this.quote.symbol;return["ORCL","TSM","RDW"].includes(i)?"NYSE":(["ASTS","RIVN","PL","ONDS","AVAV","MDB","RKLB","CRM","NVDA","AVGO","AMZN","GOOG","META","NFLX","LEU","SMR","CRWV","IONQ","PLTR","HIMS","TSLA"].includes(i),"NASDAQ")},getStaleText(){switch(this.quote.stale_level){case"stale":return"üü° Stale Data";case"very_stale":return"üî¥ Very Stale";default:return""}},goToDetail(){console.log("Navigating to stock detail for:",this.quote.symbol),this.$router.push({name:"stock-detail",params:{symbol:this.quote.symbol}}).catch(i=>{console.error("Navigation error:",i)})}}},Ji={class:"stock-card-pair"},Zi={class:"stock-info-header"},eo={class:"symbol-info"},to={class:"symbol"},so={class:"symbol-tags"},ao={class:"exchange-tag"},no={class:"header-actions"},io=["title"],oo={class:"widgets-container"},ro={class:"widget-overview"},lo={class:"widget-technical"},co={key:0,class:"additional-info"},uo={class:"brief-section"},ho={class:"brief-text"},go={key:1,class:"stale-indicator"};function mo(i,e,a,o,s,n){const r=F("FastTradingViewWidget"),u=F("TechnicalIndicators");return c(),d("div",Ji,[t("div",Zi,[t("div",eo,[t("h3",to,l(a.quote.symbol),1),t("div",so,[t("span",ao,l(n.getExchange()),1),t("span",{class:p(["industry-tag",`industry-${n.getIndustryCategory()}`])},l(n.getIndustry()),3)])]),t("div",no,[t("button",{onClick:e[0]||(e[0]=(...h)=>n.goToDetail&&n.goToDetail(...h)),class:"detail-btn",title:`View detailed analysis for ${a.quote.symbol}`},[...e[1]||(e[1]=[w(" Detail ",-1),t("span",{class:"btn-icon"},"‚Üí",-1)])],8,io)])]),t("div",oo,[t("div",ro,[e[2]||(e[2]=t("div",{class:"widget-header"},[t("h4",null,"Symbol Overview")],-1)),L(r,{"widget-type":"overview",symbol:a.quote.symbol,exchange:n.getExchange(),priority:1},null,8,["symbol","exchange"])]),t("div",lo,[e[3]||(e[3]=t("div",{class:"widget-header"},[t("h4",null,"Technical Analysis")],-1)),L(r,{"widget-type":"technical",symbol:a.quote.symbol,exchange:n.getExchange(),priority:2},null,8,["symbol","exchange"])])]),a.dailyData?(c(),d("div",co,[t("div",uo,[e[4]||(e[4]=t("h5",null,"Daily Brief",-1)),t("p",ho,l(a.dailyData.short_brief_zh),1)])])):b("",!0),L(u,{symbol:a.quote.symbol,exchange:n.getExchange()},null,8,["symbol","exchange"]),n.isStale?(c(),d("div",go,[t("span",{class:p(["stale-badge",`stale-${a.quote.stale_level}`])},l(n.getStaleText()),3)])):b("",!0)])}const fo=O(Xi,[["render",mo],["__scopeId","data-v-77358356"]]),po={name:"SkeletonLoader",data(){return{skeletonSectors:[{name:"Technology",stockCount:8},{name:"Communication Services",stockCount:4},{name:"Consumer Cyclical",stockCount:3},{name:"Industrials",stockCount:4},{name:"Healthcare",stockCount:2},{name:"Energy",stockCount:3}]}}},vo={class:"skeleton-loader"},yo={class:"skeleton-widget-container"},wo={class:"skeleton-ticker-area"},So={class:"skeleton-sector-groups"},bo={class:"skeleton-stocks-grid"};function _o(i,e,a,o,s,n){return c(),d("div",vo,[t("div",yo,[e[0]||(e[0]=t("div",{class:"skeleton-widget-header"},[t("div",{class:"skeleton-title"}),t("div",{class:"skeleton-subtitle"})],-1)),t("div",wo,[(c(),d(U,null,$(6,r=>t("div",{class:"skeleton-ticker-item",key:r})),64))])]),t("div",So,[(c(!0),d(U,null,$(s.skeletonSectors,r=>(c(),d("div",{key:r.name,class:"skeleton-sector-group"},[e[2]||(e[2]=t("div",{class:"skeleton-sector-header"},[t("div",{class:"skeleton-sector-title"}),t("div",{class:"skeleton-stock-count"})],-1)),t("div",bo,[(c(!0),d(U,null,$(r.stockCount,u=>(c(),d("div",{key:u,class:"skeleton-stock-card"},[...e[1]||(e[1]=[Y('<div class="skeleton-stock-header" data-v-5925e605><div class="skeleton-stock-symbol" data-v-5925e605></div><div class="skeleton-stock-price" data-v-5925e605></div></div><div class="skeleton-stock-content" data-v-5925e605><div class="skeleton-stock-info" data-v-5925e605><div class="skeleton-info-line" data-v-5925e605></div><div class="skeleton-info-line short" data-v-5925e605></div></div><div class="skeleton-stock-chart" data-v-5925e605></div></div><div class="skeleton-stock-footer" data-v-5925e605><div class="skeleton-tag" data-v-5925e605></div><div class="skeleton-tag" data-v-5925e605></div></div>',3)])]))),128))])]))),128))])])}const ko=O(po,[["render",_o],["__scopeId","data-v-5925e605"]]);class Co{constructor(){this.cache=new Map,this.cacheExpiry=24*60*60*1e3,this.batchSize=5,this.requestDelay=1e3}async getSymbolMetadata(e){try{if(this.cache.has(e)){const o=this.cache.get(e);if(Date.now()-o.timestamp<this.cacheExpiry)return console.log(`Using cached metadata for ${e}`),o.data}console.log(`Fetching fresh metadata for ${e} from Yahoo Finance API...`);const a=await te.getStockInfo(e);if(a&&!a.error&&a.sector!=="Unknown"){const o={symbol:e,sector:a.sector||"Unknown",industry:a.industry||"Unknown Industry",exchange:a.exchange||this.getDefaultExchange(e),marketCap:a.marketCap,marketCapFormatted:a.marketCapFormatted,marketCapCategory:a.marketCapCategory||"unknown",currency:a.currency||"USD",country:a.country||"Unknown",website:a.website,employees:a.employees,businessSummary:a.businessSummary,confidence:a.confidence||.95,source:"Yahoo Finance API (Live)",lastUpdated:a.lastUpdated||new Date().toISOString(),isLive:!0};return this.cache.set(e,{data:o,timestamp:Date.now()}),console.log(`Successfully fetched metadata for ${e}:`,{sector:o.sector,industry:o.industry,confidence:o.confidence}),o}else return console.warn(`Yahoo Finance API failed for ${e}, using static fallback data`),this.getStaticFallbackMetadata(e)}catch(a){return console.error(`Error fetching metadata for ${e}:`,a),this.getStaticFallbackMetadata(e)}}getStaticFallbackMetadata(e){const o={ASTS:{sector:"Communication Services",industry:"Satellite Communications",confidence:.75},RIVN:{sector:"Consumer Cyclical",industry:"Electric Vehicles",confidence:.9},PL:{sector:"Technology",industry:"Satellite Imaging & Analytics",confidence:.9},ONDS:{sector:"Technology",industry:"Industrial IoT Solutions",confidence:.75},RDW:{sector:"Industrials",industry:"Space Infrastructure",confidence:.75},AVAV:{sector:"Industrials",industry:"Aerospace & Defense",confidence:.75},MDB:{sector:"Technology",industry:"Database Software",confidence:.9},ORCL:{sector:"Technology",industry:"Enterprise Software",confidence:.9},TSM:{sector:"Technology",industry:"Semiconductors",confidence:.9},RKLB:{sector:"Industrials",industry:"Aerospace & Defense",confidence:.9},CRM:{sector:"Technology",industry:"Enterprise Software",confidence:.9},NVDA:{sector:"Technology",industry:"Semiconductors",confidence:.9},AVGO:{sector:"Technology",industry:"Semiconductors",confidence:.9},AMZN:{sector:"Consumer Cyclical",industry:"Internet Retail",confidence:.9},GOOG:{sector:"Communication Services",industry:"Internet Content & Information",confidence:.9},META:{sector:"Communication Services",industry:"Internet Content & Information",confidence:.9},NFLX:{sector:"Communication Services",industry:"Entertainment",confidence:.9},LEU:{sector:"Energy",industry:"Uranium",confidence:.75},SMR:{sector:"Energy",industry:"Nuclear Energy",confidence:.75},CRWV:{sector:"Technology",industry:"Software - Application",confidence:.75},IONQ:{sector:"Technology",industry:"Quantum Computing",confidence:.75},PLTR:{sector:"Technology",industry:"Software - Infrastructure",confidence:.9},HIMS:{sector:"Healthcare",industry:"Health Information Services",confidence:.75},TSLA:{sector:"Consumer Cyclical",industry:"Auto Manufacturers",confidence:.9}}[e]||{sector:"Unknown",industry:"Unknown Industry",confidence:0},s={symbol:e,sector:o.sector,industry:o.industry,exchange:this.getDefaultExchange(e),marketCap:null,marketCapFormatted:"N/A",marketCapCategory:"unknown",currency:"USD",country:"Unknown",website:null,employees:null,businessSummary:null,confidence:o.confidence,source:"Static Fallback Data",lastUpdated:new Date().toISOString(),isLive:!1};return this.cache.set(e,{data:s,timestamp:Date.now()}),console.log(`Using static fallback for ${e}:`,{sector:s.sector,industry:s.industry,confidence:s.confidence}),s}async getBatchMetadata(e){const a=new Map,o=this.createBatches(e,this.batchSize);console.log(`Fetching metadata for ${e.length} symbols in ${o.length} batches...`);for(let s=0;s<o.length;s++){const n=o[s];console.log(`Processing batch ${s+1}/${o.length} (${n.length} symbols)`);const r=n.map(h=>this.getSymbolMetadata(h).catch(g=>(console.error(`Failed to fetch metadata for ${h}:`,g),this.getDefaultMetadata(h)))),u=await Promise.all(r);n.forEach((h,g)=>{a.set(h,u[g])}),s<o.length-1&&(console.log(`Waiting ${this.requestDelay}ms before next batch...`),await this.delay(this.requestDelay))}return console.log(`Completed fetching metadata for ${a.size} symbols`),a}getDefaultMetadata(e){return{symbol:e,sector:"Unknown",industry:"Unknown Industry",exchange:this.getDefaultExchange(e),marketCap:null,marketCapFormatted:"N/A",marketCapCategory:"unknown",currency:"USD",country:"Unknown",website:null,employees:null,businessSummary:null,confidence:0,source:"Default (API Failed)",lastUpdated:new Date().toISOString(),isLive:!1}}getDefaultExchange(e){const a=["AAPL","MSFT","GOOGL","GOOG","AMZN","TSLA","NVDA","META","NFLX","RKLB","ASTS","RIVN","MDB","ONDS","PL","AVAV","CRM","AVGO","LEU","SMR","CRWV","IONQ","PLTR","HIMS"],o=["TSM","ORCL","RDW"];return a.includes(e)?"NASDAQ":o.includes(e)?"NYSE":"NASDAQ"}getIndustryDisplay(e){return!e||e.confidence<.7?"Unknown Industry":e.industry||e.sector||"Unknown Industry"}getIndustryCategory(e){const a=this.getIndustryDisplay(e);return{"Software - Application":"tech-software","Software - Infrastructure":"tech-software","Database Software":"tech-software","Enterprise Software":"tech-software","Internet Content & Information":"tech-internet",Semiconductors:"tech-hardware","Quantum Computing":"tech-quantum","Aerospace & Defense":"industrial-aerospace","Space Infrastructure":"industrial-space","Industrial IoT Solutions":"tech-iot","Satellite Communications":"communications","Satellite Imaging & Analytics":"tech-satellite","Auto Manufacturers":"automotive","Electric Vehicles":"automotive","Internet Retail":"retail",Entertainment:"entertainment",Uranium:"energy-nuclear","Nuclear Energy":"energy-nuclear","Health Information Services":"healthcare","Unknown Industry":"unknown"}[a]||"other"}generateSectorGrouping(e){const a={};for(const[o,s]of e){const n=s.sector||"Unknown";a[n]||(a[n]=[]),a[n].push(o)}return a}generateConfidenceDistribution(e){const a={high_confidence_0_90:0,medium_confidence_0_75:0,low_confidence_0_50:0,unknown_confidence:0};for(const[o,s]of e){const n=s.confidence||0;n>=.9?a.high_confidence_0_90++:n>=.75?a.medium_confidence_0_75++:n>=.5?a.low_confidence_0_50++:a.unknown_confidence++}return a}createBatches(e,a){const o=[];for(let s=0;s<e.length;s+=a)o.push(e.slice(s,s+a));return o}delay(e){return new Promise(a=>setTimeout(a,e))}clearCache(){this.cache.clear(),console.log("Dynamic metadata cache cleared")}getCacheStats(){const e={totalCached:this.cache.size,cacheEntries:{}};for(const[a,o]of this.cache.entries())e.cacheEntries[a]={age:Date.now()-o.timestamp,expired:Date.now()-o.timestamp>this.cacheExpiry,sector:o.data.sector,industry:o.data.industry,confidence:o.data.confidence};return e}async warmupCache(e){console.log(`Warming up metadata cache for ${e.length} symbols...`);const a=Date.now(),o=await this.getBatchMetadata(e),s=Date.now()-a;return console.log(`Cache warmup completed in ${s}ms for ${o.size} symbols`),{duration:s,symbolsProcessed:o.size,successRate:(o.size/e.length*100).toFixed(1)+"%"}}}const oe=new Co;class To{constructor(){this.cache=new Map,this.cacheExpiry=24*60*60*1e3,this.lastFetch=null,this.metadata=null,this.useDynamicAPI=!0}setUseDynamicAPI(e){this.useDynamicAPI=e,console.log(`Metadata service mode: ${e?"Dynamic API":"Static File"}`)}async getSymbolMetadata(e){return this.useDynamicAPI?await oe.getSymbolMetadata(e):await this.getStaticSymbolMetadata(e)}async getStaticSymbolMetadata(e){if(this.cache.has(e)){const o=this.cache.get(e);if(Date.now()-o.timestamp<this.cacheExpiry)return o.data}if(await this.refreshMetadata(),this.metadata&&this.metadata.items){const o=this.metadata.items.find(s=>s.symbol===e);if(o)return this.cache.set(e,{data:o,timestamp:Date.now()}),o}const a={symbol:e,sector:"Unknown",industry:"Unknown Industry",exchange:this.getDefaultExchange(e),confidence:0,source:"Static File (Default)",isLive:!1};return this.cache.set(e,{data:a,timestamp:Date.now()}),a}async getBatchMetadata(e){if(this.useDynamicAPI)return await oe.getBatchMetadata(e);{const a=new Map;for(const o of e){const s=await this.getStaticSymbolMetadata(o);a.set(o,s)}return a}}async refreshMetadata(){try{const e=await ut.fetchMetadataSnapshot();e.data&&(this.metadata=e.data,this.lastFetch=Date.now())}catch(e){console.warn("Failed to refresh metadata:",e)}}getDefaultExchange(e){const a=["AAPL","MSFT","GOOGL","GOOG","AMZN","TSLA","NVDA","META","NFLX","RKLB","ASTS","RIVN","MDB","ONDS","PL","AVAV","CRM","AVGO","LEU","SMR","CRWV","IONQ","PLTR","HIMS"],o=["TSM","ORCL","RDW"];return a.includes(e)?"NASDAQ":o.includes(e)?"NYSE":"NASDAQ"}getIndustryDisplay(e){return this.useDynamicAPI?oe.getIndustryDisplay(e):!e||e.confidence<.7?"Unknown Industry":e.industry||e.sector||"Unknown Industry"}getIndustryCategory(e){if(this.useDynamicAPI)return oe.getIndustryCategory(e);const a=this.getIndustryDisplay(e);return{"Industrial IoT Solutions":"tech-iot","Satellite Imaging & Analytics":"tech-satellite","Database Software":"tech-software","Enterprise Software":"tech-software",Semiconductors:"tech-hardware","Aerospace & Defense":"industrial-aerospace","Space Infrastructure":"industrial-space","Satellite Communications":"communications","Electric Vehicles":"automotive","Unknown Industry":"unknown"}[a]||"other"}async warmupCache(e){if(this.useDynamicAPI)return await oe.warmupCache(e);{console.log(`Warming up static metadata cache for ${e.length} symbols...`);const a=Date.now();await this.refreshMetadata();for(const s of e)await this.getStaticSymbolMetadata(s);const o=Date.now()-a;return console.log(`Static cache warmup completed in ${o}ms`),{duration:o,symbolsProcessed:e.length,mode:"static"}}}clearCache(){this.cache.clear(),this.metadata=null,this.lastFetch=null,this.useDynamicAPI&&oe.clearCache()}getCacheStats(){return this.useDynamicAPI?{mode:"dynamic",...oe.getCacheStats()}:{mode:"static",totalCached:this.cache.size,lastFetch:this.lastFetch,metadataLoaded:!!this.metadata}}getCurrentMode(){return this.useDynamicAPI?"dynamic":"static"}}const K=new To,Do={name:"StockOverview",components:{StockCard:fo,LazyTradingViewWidget:mt,SkeletonLoader:ko},data(){return{quotes:[],dailyData:null,metadata:null,loading:!1,error:null,lastUpdate:null,staleLevel:"fresh",configuredSymbols:[],configSource:"static",cacheInfo:{},loadingStages:{config:!1,quotes:!1,dailyData:!1,metadata:!1}}},computed:{tickersConfig(){return{symbols:[{proName:"FOREXCOM:SPXUSD",title:"S&P 500 Index"},{proName:"NASDAQ:NDX",title:"NASDAQ 100 Index"},{proName:"OPOFINANCE:DJIUSD",title:"Dow Jone Index"},{proName:"CAPITALCOM:RTY",title:"US Russel 2000"},{proName:"INDEX:BTCUSD",title:"BTC"},{proName:"TVC:GOLD",title:"GOLD"}],colorTheme:"light",locale:"en",largeChartUrl:"",isTransparent:!0,showSymbolLogo:!0}},groupedStocks(){if(!this.quotes.length||!this.metadata)return{};const i={};this.quotes.forEach(a=>{var r;const o=this.metadata.items.find(u=>u.symbol===a.symbol),s=(r=this.dailyData)==null?void 0:r.per_symbol.find(u=>u.symbol===a.symbol);let n="Unknown";o&&o.confidence>=.7&&(n=o.sector||"Unknown"),i[n]||(i[n]=[]),i[n].push({quote:a,dailyData:s,metadata:o})});const e={};return Object.keys(i).sort().forEach(a=>{e[a]=i[a].sort((o,s)=>{const n=this.getStockExchange(o.quote.symbol,o.metadata),r=this.getStockExchange(s.quote.symbol,s.metadata);if(n!==r)return n.localeCompare(r);const u=this.getStockIndustry(o.metadata),h=this.getStockIndustry(s.metadata);return u!==h?u.localeCompare(h):o.quote.symbol.toUpperCase().localeCompare(s.quote.symbol.toUpperCase())})}),e}},async mounted(){this.scrollToTop(),Q.start(it.STOCK_OVERVIEW_LOAD),await this.loadSymbolsConfig(),await this.loadStockData(),Q.end(it.STOCK_OVERVIEW_LOAD),Q.generateReport(),Q.checkPerformanceWarnings()},watch:{$route(){this.scrollToTop()}},methods:{async loadSymbolsConfig(){this.loadingStages.config=!0;try{await Q.measureAsync(it.SYMBOLS_CONFIG_LOAD,async()=>{this.configuredSymbols=await ge.getSymbolsList(),this.configSource=ge.getConfigSource(),this.cacheInfo=ge.getCacheInfo()}),console.log(`‚úÖ Loaded ${this.configuredSymbols.length} symbols from ${this.configSource}:`,this.configuredSymbols),console.log("üìä Cache info:",this.cacheInfo);const e=["ASTS","RIVN","PL","ONDS","RDW","AVAV","MDB","ORCL","TSM","RKLB","CRM","NVDA","AVGO","AMZN","GOOG","META","NFLX","LEU","SMR","CRWV","IONQ","PLTR","HIMS","TSLA"].filter(a=>!this.configuredSymbols.includes(a));e.length>0&&console.warn("‚ö†Ô∏è Missing symbols:",e)}catch(i){console.warn("‚ùå Failed to load symbols config:",i),this.configuredSymbols=ge.getStaticSymbols(),this.configSource="static",this.cacheInfo=ge.getCacheInfo(),console.log(`üîÑ Fallback to static symbols (${this.configuredSymbols.length}):`,this.configuredSymbols)}finally{this.loadingStages.config=!1}},getStockExchange(i,e){return e&&e.exchange?e.exchange:["ORCL","TSM","RDW"].includes(i)?"NYSE":(["ASTS","RIVN","PL","ONDS","AVAV","MDB","RKLB","CRM","NVDA","AVGO","AMZN","GOOG","META","NFLX","LEU","SMR","CRWV","IONQ","PLTR","HIMS","TSLA"].includes(i),"NASDAQ")},getStockIndustry(i){return!i||i.confidence<.7?"Unknown Industry":i.industry||i.sector||"Unknown Industry"},async loadStockData(){this.loading=!0,this.error=null;try{const i=H.get(le.STOCK_OVERVIEW_DATA);if(i){console.log("üì¶ Using cached stock overview data"),this.quotes=i.quotes,this.dailyData=i.dailyData,this.metadata=i.metadata,this.lastUpdate=i.lastUpdate,this.staleLevel=i.staleLevel,this.loading=!1;return}K.setUseDynamicAPI(!1),this.loadingStages.quotes=!0,this.loadingStages.dailyData=!0;const[e,a]=await Promise.all([ut.fetchQuotesSnapshot(),ut.fetchDailySnapshot()]);if(e.data&&e.data.items){const s=e.data.items;this.quotes=s.filter(n=>this.configuredSymbols.includes(n.symbol)),console.log(`üìà Total quotes available: ${s.length}`),console.log(`üéØ Filtered quotes for configured symbols: ${this.quotes.length}`),console.log("üìã Quote symbols:",this.quotes.map(n=>n.symbol).sort()),this.lastUpdate=e.as_of,this.staleLevel=e.stale_level}if(this.loadingStages.quotes=!1,a.data&&(this.dailyData=a.data),this.loadingStages.dailyData=!1,this.quotes.length>0){this.loadingStages.metadata=!0;const s=this.quotes.map(r=>r.symbol);console.log(`üîÑ Loading metadata for ${s.length} symbols using static data...`);const n=await K.getBatchMetadata(s);this.metadata={items:Array.from(n.values()),as_of:new Date().toISOString(),source:"Static Data (Performance Optimized)"},console.log(`‚úÖ Successfully loaded metadata for ${this.metadata.items.length} symbols`),this.loadingStages.metadata=!1}const o={quotes:this.quotes,dailyData:this.dailyData,metadata:this.metadata,lastUpdate:this.lastUpdate,staleLevel:this.staleLevel};if(H.set(le.STOCK_OVERVIEW_DATA,o,bs.QUOTES),console.log("üíæ Cached stock overview data for future use"),!this.quotes.length&&!this.dailyData&&!this.metadata)throw new Error("No stock data available")}catch(i){this.error=String(i),console.error("Failed to load stock data:",i),Object.keys(this.loadingStages).forEach(e=>{this.loadingStages[e]=!1})}finally{this.loading=!1}},async refresh(){H.delete(le.STOCK_OVERVIEW_DATA),console.log("üóëÔ∏è Cleared stock overview cache"),await ge.refresh(),await this.loadSymbolsConfig(),await this.loadStockData()},scrollToTop(){this.$nextTick(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"}),setTimeout(()=>{window.scrollTo(0,0)},100)})},formatTime(i){if(!i)return"";try{return new Date(i).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return i}}}},Ao={class:"stock-overview"},Io={class:"stock-header"},Mo={class:"header-right"},No={key:0,class:"update-info"},xo={class:"text-muted"},Lo={key:0,class:"loading-with-skeleton"},Po={key:1,class:"error"},Ro={class:"text-danger"},Eo={key:2},Oo={class:"widget-container-ticker"},Uo={class:"sector-groups"},$o={class:"sector-title"},Fo={class:"stock-count"},Vo={class:"stocks-in-group"},Wo={key:3,class:"no-data"};function Bo(i,e,a,o,s,n){const r=F("SkeletonLoader"),u=F("LazyTradingViewWidget"),h=F("StockCard");return c(),d("div",Ao,[t("div",Io,[e[1]||(e[1]=t("h2",null,"Stock Overview",-1)),t("div",Mo,[s.lastUpdate?(c(),d("div",No,[t("span",xo,"Last updated: "+l(n.formatTime(s.lastUpdate)),1)])):b("",!0)])]),e[4]||(e[4]=t("p",{class:"text-muted mb-3"},"Stock universe overview and analysis",-1)),s.loading?(c(),d("div",Lo,[L(r)])):s.error?(c(),d("div",Po,[t("p",Ro,l(s.error),1),t("button",{onClick:e[0]||(e[0]=(...g)=>n.refresh&&n.refresh(...g)),class:"btn btn-secondary"},"Retry")])):(c(),d("div",Eo,[t("div",Oo,[e[2]||(e[2]=t("div",{class:"widget-header"},[t("h3",null,"Market Index")],-1)),L(u,{"widget-type":"Market Index",config:n.tickersConfig,"script-url":"https://s3.tradingview.com/external-embedding/embed-widget-tickers.js",height:"100px",priority:1},null,8,["config"])]),t("div",Uo,[(c(!0),d(U,null,$(n.groupedStocks,(g,y)=>(c(),d("div",{key:y,class:"sector-group"},[t("h4",$o,[w(l(y)+" ",1),t("span",Fo,"("+l(g.length)+")",1)]),t("div",Vo,[(c(!0),d(U,null,$(g,f=>(c(),Jt(h,{key:f.quote.symbol,quote:f.quote,"daily-data":f.dailyData,metadata:f.metadata},null,8,["quote","daily-data","metadata"]))),128))])]))),128))])])),!s.loading&&Object.keys(n.groupedStocks).length===0?(c(),d("div",Wo,[...e[3]||(e[3]=[t("p",null,"No stock data available",-1)])])):b("",!0)])}const Ho=O(Do,[["render",Bo],["__scopeId","data-v-e4358f74"]]),qo={name:"StockDashboard",components:{StockOverview:Ho,PerformanceMonitor:ft}},Go={class:"stock-dashboard"};function jo(i,e,a,o,s,n){const r=F("PerformanceMonitor"),u=F("StockOverview");return c(),d("div",Go,[L(r),L(u)])}const zo=O(qo,[["render",jo],["__scopeId","data-v-bd53c7a2"]]),Ko={name:"Settings"},Qo={class:"settings"};function Yo(i,e,a,o,s,n){return c(),d("div",Qo,[...e[0]||(e[0]=[Y('<h2>Settings</h2><p class="text-muted mb-3">Configure system preferences and view diagnostics</p><div class="card"><h3>Privacy &amp; Analytics</h3><p class="text-muted">Toggle tracking and scraping preferences</p></div><div class="card"><h3>System Diagnostics</h3><p class="text-muted">View system status and data freshness</p></div><div class="card"><h3>Import/Export</h3><p class="text-muted">Backup and restore your configuration</p></div>',5)])])}const Xo=O(Ko,[["render",Yo]]),Jo={name:"TradingViewCompanyProfile",props:{symbol:{type:String,required:!0},exchange:{type:String,default:"NASDAQ"},colorTheme:{type:String,default:"dark"},isTransparent:{type:Boolean,default:!0},locale:{type:String,default:"en"}},data(){return{loaded:!1,error:!1,widgetId:`company-profile-${Date.now()}`}},computed:{fullSymbol(){return`${this.exchange}:${this.symbol}`}},mounted(){this.loadCompanyProfile()},watch:{symbol(){this.loadCompanyProfile()},exchange(){this.loadCompanyProfile()}},methods:{async loadCompanyProfile(){this.loaded=!1,this.error=!1;try{await this.$nextTick(),this.createCompanyProfile()}catch(i){console.error("Failed to load company profile:",i),this.error=!0}},createCompanyProfile(){const i=this.$refs.container;if(!i)return;i.innerHTML="";const e=document.createElement("div");e.className="tradingview-widget-container",e.style.height="100%",e.style.width="100%";const a=document.createElement("div");a.className="tradingview-widget-container__widget",e.appendChild(a),i.appendChild(e);const o={symbol:"NYSE:RDW",colorTheme:"light",isTransparent:!0,locale:"en",width:"100%",height:"100%"},s=document.createElement("script");s.type="text/javascript",s.src="https://s3.tradingview.com/external-embedding/embed-widget-symbol-profile.js",s.async=!0,s.innerHTML=JSON.stringify(o),s.onload=()=>{this.loaded=!0,console.log("TradingView Company Profile loaded successfully")},s.onerror=()=>{this.error=!0,console.error("TradingView Company Profile failed to load")},a.appendChild(s),setTimeout(()=>{!this.loaded&&!this.error&&(this.loaded=!0)},8e3)},async retry(){await this.loadCompanyProfile()}}},Zo={class:"company-profile-container"},er=["id"],tr={key:0,class:"profile-loading"},sr={key:1,class:"profile-error"};function ar(i,e,a,o,s,n){return c(),d("div",Zo,[t("div",{class:"company-profile-widget",id:s.widgetId,ref:"container"},[!s.loaded&&!s.error?(c(),d("div",tr,[...e[1]||(e[1]=[t("div",{class:"loading-spinner"},null,-1),t("span",null,"Loading company profile...",-1)])])):b("",!0),s.error?(c(),d("div",sr,[e[2]||(e[2]=t("span",null,"‚ö†Ô∏è Failed to load company profile",-1)),t("button",{onClick:e[0]||(e[0]=(...r)=>n.retry&&n.retry(...r)),class:"retry-btn"},"Retry")])):b("",!0)],8,er)])}const nr=O(Jo,[["render",ar],["__scopeId","data-v-968f867a"]]),ir={name:"TradingViewFundamentalData",props:{symbol:{type:String,required:!0},exchange:{type:String,default:"NASDAQ"},colorTheme:{type:String,default:"dark"},displayMode:{type:String,default:"regular"},isTransparent:{type:Boolean,default:!0},locale:{type:String,default:"zh_TW"}},data(){return{loaded:!1,error:!1,widgetId:`fundamental-data-${Date.now()}`}},computed:{fullSymbol(){return`${this.exchange}:${this.symbol}`}},mounted(){this.loadFundamentalData()},watch:{symbol(){this.loadFundamentalData()},exchange(){this.loadFundamentalData()}},methods:{async loadFundamentalData(){this.loaded=!1,this.error=!1;try{await this.$nextTick(),this.createFundamentalData()}catch(i){console.error("Failed to load fundamental data:",i),this.error=!0}},createFundamentalData(){const i=this.$refs.container;if(!i)return;i.innerHTML="";const e=document.createElement("div");e.className="tradingview-widget-container",e.style.height="100%",e.style.width="100%";const a=document.createElement("div");a.className="tradingview-widget-container__widget",e.appendChild(a),i.appendChild(e);const o={symbol:this.fullSymbol,colorTheme:"light",displayMode:"regular",isTransparent:!0,locale:"zh_TW",width:"100%",height:"100%"},s=document.createElement("script");s.type="text/javascript",s.src="https://s3.tradingview.com/external-embedding/embed-widget-financials.js",s.async=!0,s.innerHTML=JSON.stringify(o),s.onload=()=>{this.loaded=!0,console.log("TradingView Fundamental Data loaded successfully")},s.onerror=()=>{this.error=!0,console.error("TradingView Fundamental Data failed to load")},a.appendChild(s),setTimeout(()=>{!this.loaded&&!this.error&&(this.loaded=!0)},8e3)},async retry(){await this.loadFundamentalData()}}},or={class:"fundamental-data-container"},rr=["id"],lr={key:0,class:"fundamental-loading"},cr={key:1,class:"fundamental-error"};function dr(i,e,a,o,s,n){return c(),d("div",or,[t("div",{class:"fundamental-data-widget",id:s.widgetId,ref:"container"},[!s.loaded&&!s.error?(c(),d("div",lr,[...e[1]||(e[1]=[t("div",{class:"loading-spinner"},null,-1),t("span",null,"Loading fundamental data...",-1)])])):b("",!0),s.error?(c(),d("div",cr,[e[2]||(e[2]=t("span",null,"‚ö†Ô∏è Failed to load fundamental data",-1)),t("button",{onClick:e[0]||(e[0]=(...r)=>n.retry&&n.retry(...r)),class:"retry-btn"},"Retry")])):b("",!0)],8,rr)])}const ur=O(ir,[["render",dr],["__scopeId","data-v-4792127e"]]),hr={name:"StockNews",props:{symbol:{type:String,required:!0},newsCount:{type:Number,default:9}},data(){return{loading:!0,error:null,news:[]}},mounted(){this.loadNews()},watch:{symbol(){this.loadNews()}},methods:{async loadNews(){this.loading=!0,this.error=null,this.news=[];try{console.log(`Loading news for ${this.symbol}...`);const i=await this.fetchYahooNews(this.symbol);i&&i.length>0?(this.news=i.slice(0,this.newsCount),console.log(`Loaded ${this.news.length} news articles for ${this.symbol}`)):this.news=[]}catch(i){console.error(`Failed to load news for ${this.symbol}:`,i),this.error=i.message}finally{this.loading=!1}},async fetchYahooNews(i){const e=["https://api.allorigins.win/raw?url=","https://corsproxy.io/?"];for(const a of e)try{const o=`https://query1.finance.yahoo.com/v1/finance/search?q=${i}&lang=en-US&region=US&quotesCount=1&newsCount=${this.newsCount}&enableFuzzyQuery=false&quotesQueryId=tss_match_phrase_query&multiQuoteQueryId=multi_quote_single_token_query&newsQueryId=news_cie_vespa&enableCb=true&enableNavLinks=true&enableEnhancedTrivialQuery=true`,s=`${a}${encodeURIComponent(o)}`;console.log(`Fetching news from: ${s}`);const n=await fetch(s);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const r=await n.json();if(r&&r.news&&r.news.length>0)return r.news}catch(o){console.warn("Proxy failed for news:",o.message);continue}throw new Error("All news proxies failed")},formatDate(i){if(!i)return"Unknown date";const e=new Date(i*1e3),a=new Date,o=a-e,s=Math.floor(o/(1e3*60*60)),n=Math.floor(s/24);return s<1?`${Math.floor(o/6e4)}m ago`:s<24?`${s}h ago`:n<7?`${n}d ago`:e.toLocaleDateString("en-US",{month:"short",day:"numeric",year:e.getFullYear()!==a.getFullYear()?"numeric":void 0})},truncateText(i,e){return i?i.length<=e?i:i.substring(0,e).trim()+"...":""},openArticle(i){i&&window.open(i,"_blank","noopener,noreferrer")},handleImageError(i){i.target.style.display="none"}}},gr={class:"stock-news"},mr={key:0,class:"loading-state"},fr={key:1,class:"error-state"},pr={key:2,class:"no-news-state"},vr={key:3,class:"news-grid"},yr=["onClick"],wr={class:"news-header"},Sr={class:"news-title"},br={class:"news-date"},_r={class:"news-content"},kr={class:"news-text"},Cr={class:"news-summary"},Tr={class:"news-meta"},Dr={class:"news-publisher"},Ar={key:0,class:"news-type"},Ir={key:0,class:"news-thumbnail"},Mr=["src","alt"];function Nr(i,e,a,o,s,n){return c(),d("div",gr,[s.loading?(c(),d("div",mr,[e[1]||(e[1]=t("div",{class:"loading-spinner"},null,-1)),t("span",null,"Loading latest news for "+l(a.symbol)+"...",1)])):s.error?(c(),d("div",fr,[e[2]||(e[2]=t("span",{class:"error-icon"},"‚ö†Ô∏è",-1)),t("span",null,l(s.error),1)])):s.news.length===0?(c(),d("div",pr,[e[3]||(e[3]=t("span",{class:"info-icon"},"‚ÑπÔ∏è",-1)),t("span",null,"No recent news available for "+l(a.symbol),1)])):(c(),d("div",vr,[(c(!0),d(U,null,$(s.news,(r,u)=>{var h;return c(),d("article",{key:u,class:"news-item",onClick:g=>n.openArticle(r.link)},[t("div",wr,[t("h4",Sr,l(r.title),1),t("span",br,l(n.formatDate(r.providerPublishTime)),1)]),t("div",_r,[t("div",kr,[t("p",Cr,l(n.truncateText(r.summary,150)),1),t("div",Tr,[t("span",Dr,l(r.publisher),1),r.type?(c(),d("span",Ar,l(r.type),1)):b("",!0)])]),r.thumbnail?(c(),d("div",Ir,[t("img",{src:(h=r.thumbnail.resolutions[0])==null?void 0:h.url,alt:r.title,onError:e[0]||(e[0]=(...g)=>n.handleImageError&&n.handleImageError(...g))},null,40,Mr)])):b("",!0)]),e[4]||(e[4]=t("div",{class:"news-footer"},[t("span",{class:"read-more"},"Read more ‚Üí")],-1))],8,yr)}),128))]))])}const xr=O(hr,[["render",Nr],["__scopeId","data-v-6db7a932"]]),Lr={name:"StockDetailSkeleton"},Pr={class:"stock-detail-skeleton"},Rr={class:"skeleton-widget-container"},Er={class:"skeleton-technical-indicators"},Or={class:"skeleton-widget-container"},Ur={class:"skeleton-performance-grid"},$r={class:"skeleton-content-layout"},Fr={class:"skeleton-news-row"},Vr={class:"skeleton-news-content"},Wr={class:"skeleton-fundamental-row"},Br={class:"skeleton-fundamental-content"},Hr={class:"skeleton-fundamental-grid"},qr={class:"skeleton-profile-row"},Gr={class:"skeleton-profile-content"},jr={class:"skeleton-profile-info"};function zr(i,e,a,o,s,n){return c(),d("div",Pr,[e[10]||(e[10]=Y('<div class="skeleton-breadcrumb" data-v-a9db020d><div class="skeleton-breadcrumb-link" data-v-a9db020d></div><div class="skeleton-breadcrumb-separator" data-v-a9db020d>‚Ä∫</div><div class="skeleton-breadcrumb-current" data-v-a9db020d></div></div><div class="skeleton-stock-header" data-v-a9db020d><div class="skeleton-header-info" data-v-a9db020d><div class="skeleton-symbol-info" data-v-a9db020d><div class="skeleton-symbol" data-v-a9db020d></div><div class="skeleton-tags" data-v-a9db020d><div class="skeleton-tag" data-v-a9db020d></div><div class="skeleton-tag" data-v-a9db020d></div></div></div><div class="skeleton-header-actions" data-v-a9db020d><div class="skeleton-back-button" data-v-a9db020d></div></div></div><div class="skeleton-widgets-container" data-v-a9db020d><div class="skeleton-widget-overview" data-v-a9db020d><div class="skeleton-widget-header" data-v-a9db020d><div class="skeleton-title" data-v-a9db020d></div></div><div class="skeleton-overview-content" data-v-a9db020d></div></div><div class="skeleton-widget-technical" data-v-a9db020d><div class="skeleton-widget-header" data-v-a9db020d><div class="skeleton-title" data-v-a9db020d></div></div><div class="skeleton-technical-content" data-v-a9db020d></div></div></div></div><div class="skeleton-insight-widgets" data-v-a9db020d><div class="skeleton-insight-widget" data-v-a9db020d><div class="skeleton-widget-header" data-v-a9db020d><div class="skeleton-title" data-v-a9db020d></div></div><div class="skeleton-insight-content" data-v-a9db020d></div></div><div class="skeleton-insight-widget" data-v-a9db020d><div class="skeleton-widget-header" data-v-a9db020d><div class="skeleton-title" data-v-a9db020d></div></div><div class="skeleton-insight-content" data-v-a9db020d></div></div></div>',3)),t("div",Rr,[e[1]||(e[1]=t("div",{class:"skeleton-widget-header"},[t("div",{class:"skeleton-title"})],-1)),t("div",Er,[(c(),d(U,null,$(6,r=>t("div",{class:"skeleton-indicator-item",key:r},[...e[0]||(e[0]=[t("div",{class:"skeleton-indicator-name"},null,-1),t("div",{class:"skeleton-indicator-value"},null,-1),t("div",{class:"skeleton-indicator-signal"},null,-1)])])),64))])]),t("div",Or,[e[3]||(e[3]=t("div",{class:"skeleton-widget-header"},[t("div",{class:"skeleton-title"})],-1)),t("div",Ur,[(c(),d(U,null,$(4,r=>t("div",{class:"skeleton-performance-item",key:r},[...e[2]||(e[2]=[t("div",{class:"skeleton-performance-label"},null,-1),t("div",{class:"skeleton-performance-value"},null,-1)])])),64))])]),t("div",$r,[t("div",Fr,[e[5]||(e[5]=t("div",{class:"skeleton-widget-header"},[t("div",{class:"skeleton-title"})],-1)),t("div",Vr,[(c(),d(U,null,$(5,r=>t("div",{class:"skeleton-news-item",key:r},[...e[4]||(e[4]=[t("div",{class:"skeleton-news-title"},null,-1),t("div",{class:"skeleton-news-summary"},null,-1),t("div",{class:"skeleton-news-time"},null,-1)])])),64))])]),t("div",Wr,[e[7]||(e[7]=t("div",{class:"skeleton-widget-header"},[t("div",{class:"skeleton-title"})],-1)),t("div",Br,[t("div",Hr,[(c(),d(U,null,$(8,r=>t("div",{class:"skeleton-fundamental-item",key:r},[...e[6]||(e[6]=[t("div",{class:"skeleton-fundamental-label"},null,-1),t("div",{class:"skeleton-fundamental-value"},null,-1)])])),64))])])]),t("div",qr,[e[9]||(e[9]=t("div",{class:"skeleton-widget-header"},[t("div",{class:"skeleton-title"})],-1)),t("div",Gr,[t("div",jr,[(c(),d(U,null,$(6,r=>t("div",{class:"skeleton-profile-item",key:r},[...e[8]||(e[8]=[t("div",{class:"skeleton-profile-label"},null,-1),t("div",{class:"skeleton-profile-value"},null,-1)])])),64))])])])])])}const Kr=O(Lr,[["render",zr],["__scopeId","data-v-a9db020d"]]),Qr={name:"StockDetail",components:{FastTradingViewWidget:jt,LazyTradingViewWidget:mt,TradingViewCompanyProfile:nr,TradingViewFundamentalData:ur,TechnicalIndicators:zt,PerformanceMonitor:ft,StockNews:xr,StockDetailSkeleton:Kr},data(){return{loading:!0,error:null,metadata:null}},computed:{symbol(){return this.$route.params.symbol||"RKLB"},exchange(){const i=this.symbol;return["ASTS","RIVN","PL","ONDS","RDW","AVAV","MDB","RKLB","CRM","NVDA","AVGO","AMZN","GOOG","META","NFLX","LEU","SMR","CRWV","IONQ","PLTR","HIMS","TSLA"].includes(i)?"NASDAQ":["ORCL","TSM"].includes(i)?"NYSE":"NASDAQ"},dailyInsightConfig(){return{lineWidth:2,lineType:0,chartType:"candlesticks",showVolume:!0,fontColor:"rgb(106, 109, 120)",gridLineColor:"rgba(46, 46, 46, 0.06)",volumeUpColor:"rgba(34, 171, 148, 0.5)",volumeDownColor:"rgba(247, 82, 95, 0.5)",backgroundColor:"#ffffff",widgetFontColor:"#0F0F0F",upColor:"#22ab94",downColor:"#f7525f",borderUpColor:"#22ab94",borderDownColor:"#f7525f",wickUpColor:"#22ab94",wickDownColor:"#f7525f",colorTheme:"light",isTransparent:!0,locale:"en",chartOnly:!1,scalePosition:"right",scaleMode:"Normal",fontFamily:"-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif",valuesTracking:"1",changeMode:"price-and-percent",symbols:[[`${this.exchange}:${this.symbol}|6M`]],dateRanges:["6m|1D"],fontSize:"10",headerFontSize:"medium",autosize:!0,width:"100%",height:"100%",noTimeScale:!1,hideDateRanges:!1,showMA:!0,maLength:"5",maLineColor:"#2962FF",maLineWidth:1,hideMarketStatus:!1,hideSymbolLogo:!1}},weeklyInsightConfig(){return{lineWidth:2,lineType:0,chartType:"candlesticks",showVolume:!0,fontColor:"rgb(106, 109, 120)",gridLineColor:"rgba(46, 46, 46, 0.06)",volumeUpColor:"rgba(34, 171, 148, 0.5)",volumeDownColor:"rgba(247, 82, 95, 0.5)",backgroundColor:"#ffffff",widgetFontColor:"#0F0F0F",upColor:"#22ab94",downColor:"#f7525f",borderUpColor:"#22ab94",borderDownColor:"#f7525f",wickUpColor:"#22ab94",wickDownColor:"#f7525f",colorTheme:"light",isTransparent:!0,locale:"en",chartOnly:!1,scalePosition:"right",scaleMode:"Normal",fontFamily:"-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif",valuesTracking:"1",changeMode:"price-and-percent",symbols:[[`${this.exchange}:${this.symbol}|6M`]],dateRanges:["6m|1W"],fontSize:"10",headerFontSize:"medium",autosize:!0,width:"100%",height:"100%",noTimeScale:!1,hideDateRanges:!1,showMA:!0,maLength:"4",maLineColor:"#2962FF",maLineWidth:1,hideMarketStatus:!1,hideSymbolLogo:!1}}},watch:{symbol(){this.scrollToTop(),this.loadMetadata()},$route(){this.scrollToTop()}},mounted(){this.scrollToTop(),K.setUseDynamicAPI(!0),this.loadMetadata(),this.initializePage()},methods:{async initializePage(){try{await new Promise(i=>setTimeout(i,1e3)),this.loading=!1}catch(i){this.error=String(i),this.loading=!1}},async refresh(){this.loading=!0,this.error=null,await this.initializePage()},async loadMetadata(){try{this.metadata=await K.getSymbolMetadata(this.symbol)}catch(i){console.warn(`Failed to load metadata for ${this.symbol}:`,i),this.metadata=null}},getSector(){return!this.metadata||this.metadata.confidence<.7?"Unknown":this.metadata.sector||"Unknown"},getIndustry(){return K.getIndustryDisplay(this.metadata)},getIndustryCategory(){return K.getIndustryCategory(this.metadata)},goBack(){console.log("Navigating back to stock overview"),this.$router.push({name:"stock-overview"}).catch(i=>{console.error("Navigation error:",i)})},scrollToTop(){this.$nextTick(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"}),setTimeout(()=>{window.scrollTo(0,0)},100)})}}},Yr={class:"stock-detail"},Xr={class:"breadcrumb"},Jr={class:"breadcrumb-current"},Zr={key:0,class:"loading-with-skeleton"},el={key:1,class:"error"},tl={class:"text-danger"},sl={key:2},al={class:"stock-header"},nl={class:"stock-info-header"},il={class:"symbol-info"},ol={class:"symbol"},rl={class:"symbol-tags"},ll={class:"exchange-tag"},cl={class:"header-actions"},dl={class:"widgets-container"},ul={class:"widget-overview"},hl={class:"widget-technical"},gl={class:"insight-widgets-container"},ml={class:"insight-widget daily-insight"},fl={class:"insight-widget weekly-insight"},pl={class:"content-layout"},vl={class:"stock-news-row"},yl={class:"widget-container"},wl={class:"fundamental-data-row"},Sl={class:"widget-container"},bl={class:"company-profile-row"},_l={class:"widget-container"};function kl(i,e,a,o,s,n){const r=F("router-link"),u=F("StockDetailSkeleton"),h=F("FastTradingViewWidget"),g=F("LazyTradingViewWidget"),y=F("TechnicalIndicators"),f=F("PerformanceMonitor"),C=F("StockNews"),D=F("TradingViewFundamentalData"),T=F("TradingViewCompanyProfile");return c(),d("div",Yr,[t("nav",Xr,[L(r,{to:"/stock-overview",class:"breadcrumb-link"},{default:Je(()=>[...e[2]||(e[2]=[w("Stock Overview",-1)])]),_:1}),e[3]||(e[3]=t("span",{class:"breadcrumb-separator"},"‚Ä∫",-1)),t("span",Jr,l(n.symbol)+" Analysis",1)]),s.loading?(c(),d("div",Zr,[L(u)])):s.error?(c(),d("div",el,[t("p",tl,l(s.error),1),t("button",{onClick:e[0]||(e[0]=(...A)=>n.refresh&&n.refresh(...A)),class:"btn btn-secondary"},"Retry")])):(c(),d("div",sl,[t("div",al,[t("div",nl,[t("div",il,[t("h3",ol,l(n.symbol),1),t("div",rl,[t("span",ll,l(n.exchange),1),t("span",{class:p(["industry-tag",`industry-${n.getIndustryCategory()}`])},l(n.getIndustry()),3)])]),t("div",cl,[t("button",{onClick:e[1]||(e[1]=(...A)=>n.goBack&&n.goBack(...A)),class:"detail-btn"},[...e[4]||(e[4]=[t("span",{class:"btn-icon"},"‚Üê",-1),w(" Back to Stock Overview ",-1)])])])]),t("div",dl,[t("div",ul,[e[5]||(e[5]=t("div",{class:"widget-header"},[t("h4",null,"Symbol Overview")],-1)),L(h,{"widget-type":"overview",symbol:n.symbol,exchange:n.exchange},null,8,["symbol","exchange"])]),t("div",hl,[e[6]||(e[6]=t("div",{class:"widget-header"},[t("h4",null,"Technical Analysis")],-1)),L(h,{"widget-type":"technical",symbol:n.symbol,exchange:n.exchange},null,8,["symbol","exchange"])])])]),t("div",gl,[t("div",ml,[e[7]||(e[7]=t("div",{class:"widget-header"},[t("h4",null,"Daily Insight (MA5)")],-1)),L(g,{"widget-type":"Daily Insight",config:n.dailyInsightConfig,"script-url":"https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js",height:"550px",priority:2},null,8,["config"])]),t("div",fl,[e[8]||(e[8]=t("div",{class:"widget-header"},[t("h4",null,"Weekly Insight (MA4)")],-1)),L(g,{"widget-type":"Weekly Insight",config:n.weeklyInsightConfig,"script-url":"https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js",height:"550px",priority:3},null,8,["config"])])]),L(y,{symbol:n.symbol,exchange:n.exchange},null,8,["symbol","exchange"]),L(f),t("div",pl,[t("div",vl,[t("div",yl,[e[9]||(e[9]=t("h3",{class:"widget-title"},"Latest News",-1)),L(C,{symbol:n.symbol},null,8,["symbol"])])]),t("div",wl,[t("div",Sl,[e[10]||(e[10]=t("h3",{class:"widget-title"},"Fundamental Data",-1)),L(D,{symbol:n.symbol,exchange:n.exchange},null,8,["symbol","exchange"])])]),t("div",bl,[t("div",_l,[e[11]||(e[11]=t("h3",{class:"widget-title"},"Company Profile",-1)),L(T,{symbol:n.symbol,exchange:n.exchange},null,8,["symbol","exchange"])])])])]))])}const Cl=O(Qr,[["render",kl],["__scopeId","data-v-11d7c986"]]),Tl={name:"TradingViewTopStories",props:{displayMode:{type:String,default:"regular"},feedMode:{type:String,default:"market"},colorTheme:{type:String,default:"light"},isTransparent:{type:Boolean,default:!0},locale:{type:String,default:"en"},market:{type:String,default:"stock"},height:{type:String,default:"600px"}},data(){return{loaded:!1,error:!1,widgetId:`top-stories-${Date.now()}`}},mounted(){this.loadTopStories()},methods:{async loadTopStories(){this.loaded=!1,this.error=!1;try{await this.$nextTick(),this.createTopStories()}catch(i){console.error("Failed to load top stories:",i),this.error=!0}},createTopStories(){const i=this.$refs.container;if(!i)return;i.innerHTML="";const e=document.createElement("div");e.className="tradingview-widget-container",e.style.height="100%",e.style.width="100%";const a=document.createElement("div");a.className="tradingview-widget-container__widget",e.appendChild(a),i.appendChild(e);const o={displayMode:this.displayMode,feedMode:this.feedMode,colorTheme:this.colorTheme,isTransparent:this.isTransparent,locale:this.locale,market:this.market,width:"100%",height:"100%"},s=document.createElement("script");s.type="text/javascript",s.src="https://s3.tradingview.com/external-embedding/embed-widget-timeline.js",s.async=!0,s.innerHTML=JSON.stringify(o),s.onload=()=>{this.loaded=!0,console.log("TradingView Top Stories loaded successfully")},s.onerror=()=>{this.error=!0,console.error("TradingView Top Stories failed to load")},a.appendChild(s),setTimeout(()=>{!this.loaded&&!this.error&&(this.loaded=!0)},8e3)},async retry(){await this.loadTopStories()}}},Dl={class:"top-stories-container"},Al=["id"],Il={key:0,class:"stories-loading"},Ml={key:1,class:"stories-error"};function Nl(i,e,a,o,s,n){return c(),d("div",Dl,[e[3]||(e[3]=t("div",{class:"widget-header"},[t("h3",null,"Top Stories")],-1)),t("div",{class:"top-stories-widget",id:s.widgetId,ref:"container"},[!s.loaded&&!s.error?(c(),d("div",Il,[...e[1]||(e[1]=[t("div",{class:"loading-spinner"},null,-1),t("span",null,"Loading market news...",-1)])])):b("",!0),s.error?(c(),d("div",Ml,[e[2]||(e[2]=t("span",null,"‚ö†Ô∏è Failed to load market news",-1)),t("button",{onClick:e[0]||(e[0]=(...r)=>n.retry&&n.retry(...r)),class:"retry-btn"},"Retry")])):b("",!0)],8,Al)])}const xl=O(Tl,[["render",Nl],["__scopeId","data-v-7abef6c6"]]),Ll={name:"TopStoriesSkeleton"},Pl={class:"top-stories-skeleton"},Rl={class:"skeleton-widget-container"},El={class:"skeleton-stories-area"},Ol={class:"skeleton-story-tags"},Ul={class:"skeleton-config-info"},$l={class:"skeleton-config-list"};function Fl(i,e,a,o,s,n){return c(),d("div",Pl,[e[5]||(e[5]=t("div",{class:"skeleton-page-header"},[t("div",{class:"skeleton-page-title"}),t("div",{class:"skeleton-page-description"})],-1)),t("div",Rl,[t("div",El,[(c(),d(U,null,$(10,r=>t("div",{class:"skeleton-story-item",key:r},[e[0]||(e[0]=t("div",{class:"skeleton-story-time"},null,-1)),e[1]||(e[1]=t("div",{class:"skeleton-story-title"},null,-1)),e[2]||(e[2]=t("div",{class:"skeleton-story-content"},null,-1)),t("div",Ol,[(c(),d(U,null,$(3,u=>t("div",{class:"skeleton-story-tag",key:u})),64))])])),64))])]),t("div",Ul,[e[4]||(e[4]=t("div",{class:"skeleton-config-title"},null,-1)),t("div",$l,[(c(),d(U,null,$(5,r=>t("div",{class:"skeleton-config-item",key:r},[...e[3]||(e[3]=[t("div",{class:"skeleton-config-label"},null,-1),t("div",{class:"skeleton-config-value"},null,-1)])])),64))])])])}const Vl=O(Ll,[["render",Fl],["__scopeId","data-v-4a248288"]]),Wl={name:"TopStoriesTest",components:{TradingViewTopStories:xl,TopStoriesSkeleton:Vl},data(){return{loading:!0,error:null}},mounted(){this.initializePage()},methods:{async initializePage(){try{await new Promise(i=>setTimeout(i,800)),this.loading=!1}catch(i){this.error=String(i),this.loading=!1}},async refresh(){this.loading=!0,this.error=null,await this.initializePage()}}},Bl={class:"top-stories-test"},Hl={key:0,class:"loading-with-skeleton"},ql={key:1,class:"error"},Gl={class:"text-danger"},jl={key:2};function zl(i,e,a,o,s,n){const r=F("TopStoriesSkeleton"),u=F("TradingViewTopStories");return c(),d("div",Bl,[e[2]||(e[2]=t("h2",null,"Top Stories Widget Test",-1)),e[3]||(e[3]=t("p",{class:"text-muted mb-3"},"Testing TradingView Top Stories component",-1)),s.loading?(c(),d("div",Hl,[L(r)])):s.error?(c(),d("div",ql,[t("p",Gl,l(s.error),1),t("button",{onClick:e[0]||(e[0]=(...h)=>n.refresh&&n.refresh(...h)),class:"btn btn-secondary"},"Retry")])):(c(),d("div",jl,[L(u,{"display-mode":"regular","feed-mode":"market","color-theme":"light","is-transparent":!0,locale:"en",market:"stock",height:"650px"}),e[1]||(e[1]=Y('<div class="config-info" data-v-e9d9d092><h3 data-v-e9d9d092>Widget Configuration</h3><ul data-v-e9d9d092><li data-v-e9d9d092><strong data-v-e9d9d092>Display Mode:</strong> regular</li><li data-v-e9d9d092><strong data-v-e9d9d092>Feed Mode:</strong> market</li><li data-v-e9d9d092><strong data-v-e9d9d092>Color Theme:</strong> light</li><li data-v-e9d9d092><strong data-v-e9d9d092>Market:</strong> stock</li><li data-v-e9d9d092><strong data-v-e9d9d092>Height:</strong> 650px</li></ul></div>',1))]))])}const Kl=O(Wl,[["render",zl],["__scopeId","data-v-e9d9d092"]]),Ql={name:"StockMarketInsight",props:{colorTheme:{type:String,default:"light"},isTransparent:{type:Boolean,default:!0},locale:{type:String,default:"en"},height:{type:String,default:"1300px"}},data(){return{dailyLoaded:!1,dailyError:!1,weeklyLoaded:!1,weeklyError:!1,dailyWidgetId:`daily-market-${Date.now()}`,weeklyWidgetId:`weekly-market-${Date.now()}`}},mounted(){this.loadWidgets()},methods:{async loadWidgets(){await this.$nextTick(),this.createDailyWidget(),this.createWeeklyWidget()},createDailyWidget(){const i=this.$refs.dailyContainer;if(!i)return;i.innerHTML="";const e=document.createElement("div");e.className="tradingview-widget-container",e.style.height="100%",e.style.width="100%";const a=document.createElement("div");a.className="tradingview-widget-container__widget",e.appendChild(a),i.appendChild(e);const o={lineWidth:2,lineType:0,chartType:"candlesticks",showVolume:!0,fontColor:"#707070",gridLineColor:"rgba(46, 46, 46, 0.06)",volumeUpColor:"rgba(34, 171, 148, 0.5)",volumeDownColor:"rgba(247, 82, 95, 0.5)",backgroundColor:"#ffffff",widgetFontColor:"#0F0F0F",upColor:"#22ab94",downColor:"#f7525f",borderUpColor:"#22ab94",borderDownColor:"#f7525f",wickUpColor:"#22ab94",wickDownColor:"#f7525f",colorTheme:this.colorTheme,isTransparent:this.isTransparent,locale:this.locale,chartOnly:!1,scalePosition:"right",scaleMode:"Normal",fontFamily:"-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif",valuesTracking:"1",changeMode:"price-and-percent",symbols:[["IG:NASDAQ|6M"],["THINKMARKETS:US30|6M"]],dateRanges:["6m|1D"],fontSize:"10",headerFontSize:"medium",autosize:!0,width:"100%",height:"100%",noTimeScale:!1,hideDateRanges:!1,showMA:!0,maLength:"5",maLineColor:"#2962FF",maLineWidth:1,hideMarketStatus:!1,hideSymbolLogo:!1},s=document.createElement("script");s.type="text/javascript",s.src="https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js",s.async=!0,s.innerHTML=JSON.stringify(o),s.onload=()=>{this.dailyLoaded=!0,console.log("Daily Market Widget loaded successfully")},s.onerror=()=>{this.dailyError=!0,console.error("Daily Market Widget failed to load")},a.appendChild(s),setTimeout(()=>{!this.dailyLoaded&&!this.dailyError&&(this.dailyLoaded=!0)},8e3)},createWeeklyWidget(){const i=this.$refs.weeklyContainer;if(!i)return;i.innerHTML="";const e=document.createElement("div");e.className="tradingview-widget-container",e.style.height="100%",e.style.width="100%";const a=document.createElement("div");a.className="tradingview-widget-container__widget",e.appendChild(a),i.appendChild(e);const o={lineWidth:2,lineType:0,chartType:"candlesticks",showVolume:!0,fontColor:"#707070",gridLineColor:"rgba(46, 46, 46, 0.06)",volumeUpColor:"rgba(34, 171, 148, 0.5)",volumeDownColor:"rgba(247, 82, 95, 0.5)",backgroundColor:"#ffffff",widgetFontColor:"#0F0F0F",upColor:"#22ab94",downColor:"#f7525f",borderUpColor:"#22ab94",borderDownColor:"#f7525f",wickUpColor:"#22ab94",wickDownColor:"#f7525f",colorTheme:this.colorTheme,isTransparent:this.isTransparent,locale:this.locale,chartOnly:!1,scalePosition:"right",scaleMode:"Normal",fontFamily:"-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif",valuesTracking:"1",changeMode:"price-and-percent",symbols:[["IG:NASDAQ|6M"],["THINKMARKETS:US30|6M"]],dateRanges:["6m|1W"],fontSize:"10",headerFontSize:"medium",autosize:!0,width:"100%",height:"100%",noTimeScale:!1,hideDateRanges:!1,showMA:!0,maLength:"5",maLineColor:"#2962FF",maLineWidth:1,hideMarketStatus:!1,hideSymbolLogo:!1},s=document.createElement("script");s.type="text/javascript",s.src="https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js",s.async=!0,s.innerHTML=JSON.stringify(o),s.onload=()=>{this.weeklyLoaded=!0,console.log("Weekly Market Widget loaded successfully")},s.onerror=()=>{this.weeklyError=!0,console.error("Weekly Market Widget failed to load")},a.appendChild(s),setTimeout(()=>{!this.weeklyLoaded&&!this.weeklyError&&(this.weeklyLoaded=!0)},8e3)},async retryDaily(){this.dailyLoaded=!1,this.dailyError=!1,await this.$nextTick(),this.createDailyWidget()},async retryWeekly(){this.weeklyLoaded=!1,this.weeklyError=!1,await this.$nextTick(),this.createWeeklyWidget()}}},Yl={class:"stock-market-insight-container"},Xl={class:"insight-grid"},Jl={class:"insight-section"},Zl=["id"],ec={key:0,class:"widget-loading"},tc={key:1,class:"widget-error"},sc={class:"insight-section"},ac=["id"],nc={key:0,class:"widget-loading"},ic={key:1,class:"widget-error"};function oc(i,e,a,o,s,n){return c(),d("div",Yl,[e[8]||(e[8]=t("div",{class:"widget-header"},[t("h3",null,"Stock Market Insight")],-1)),t("div",Xl,[t("div",Jl,[e[4]||(e[4]=t("div",{class:"section-header"},[t("h4",null,"Stock Market Daily")],-1)),t("div",{class:"daily-widget",id:s.dailyWidgetId,ref:"dailyContainer"},[!s.dailyLoaded&&!s.dailyError?(c(),d("div",ec,[...e[2]||(e[2]=[t("div",{class:"loading-spinner"},null,-1),t("span",null,"Loading daily market data...",-1)])])):b("",!0),s.dailyError?(c(),d("div",tc,[e[3]||(e[3]=t("span",null,"‚ö†Ô∏è Failed to load daily data",-1)),t("button",{onClick:e[0]||(e[0]=(...r)=>n.retryDaily&&n.retryDaily(...r)),class:"retry-btn"},"Retry")])):b("",!0)],8,Zl)]),t("div",sc,[e[7]||(e[7]=t("div",{class:"section-header"},[t("h4",null,"Stock Market Weekly")],-1)),t("div",{class:"weekly-widget",id:s.weeklyWidgetId,ref:"weeklyContainer"},[!s.weeklyLoaded&&!s.weeklyError?(c(),d("div",nc,[...e[5]||(e[5]=[t("div",{class:"loading-spinner"},null,-1),t("span",null,"Loading weekly market data...",-1)])])):b("",!0),s.weeklyError?(c(),d("div",ic,[e[6]||(e[6]=t("span",null,"‚ö†Ô∏è Failed to load weekly data",-1)),t("button",{onClick:e[1]||(e[1]=(...r)=>n.retryWeekly&&n.retryWeekly(...r)),class:"retry-btn"},"Retry")])):b("",!0)],8,ac)])])])}const rc=O(Ql,[["render",oc],["__scopeId","data-v-e5c812bc"]]),lc={name:"StockMarketInsightSkeleton"},cc={class:"stock-market-insight-skeleton"},dc={class:"skeleton-config-info"},uc={class:"skeleton-config-grid"},hc={class:"skeleton-config-section"},gc={class:"skeleton-config-list"},mc={class:"skeleton-config-section"},fc={class:"skeleton-config-list"};function pc(i,e,a,o,s,n){return c(),d("div",cc,[e[5]||(e[5]=Y('<div class="skeleton-page-header" data-v-bcaf64ab><div class="skeleton-page-title" data-v-bcaf64ab></div><div class="skeleton-page-description" data-v-bcaf64ab></div></div><div class="skeleton-widget-container large" data-v-bcaf64ab><div class="skeleton-insight-grid" data-v-bcaf64ab><div class="skeleton-insight-section" data-v-bcaf64ab><div class="skeleton-section-header" data-v-bcaf64ab><div class="skeleton-section-title" data-v-bcaf64ab></div></div><div class="skeleton-chart-area" data-v-bcaf64ab><div class="skeleton-chart" data-v-bcaf64ab></div></div></div><div class="skeleton-insight-section" data-v-bcaf64ab><div class="skeleton-section-header" data-v-bcaf64ab><div class="skeleton-section-title" data-v-bcaf64ab></div></div><div class="skeleton-chart-area" data-v-bcaf64ab><div class="skeleton-chart" data-v-bcaf64ab></div></div></div></div></div>',2)),t("div",dc,[e[4]||(e[4]=t("div",{class:"skeleton-config-title"},null,-1)),t("div",uc,[t("div",hc,[e[1]||(e[1]=t("div",{class:"skeleton-config-section-title"},null,-1)),t("div",gc,[(c(),d(U,null,$(5,r=>t("div",{class:"skeleton-config-item",key:r},[...e[0]||(e[0]=[t("div",{class:"skeleton-config-label"},null,-1),t("div",{class:"skeleton-config-value"},null,-1)])])),64))])]),t("div",mc,[e[3]||(e[3]=t("div",{class:"skeleton-config-section-title"},null,-1)),t("div",fc,[(c(),d(U,null,$(5,r=>t("div",{class:"skeleton-config-item",key:r},[...e[2]||(e[2]=[t("div",{class:"skeleton-config-label"},null,-1),t("div",{class:"skeleton-config-value"},null,-1)])])),64))])])])])])}const vc=O(lc,[["render",pc],["__scopeId","data-v-bcaf64ab"]]),yc={name:"StockMarketInsightTest",components:{StockMarketInsight:rc,StockMarketInsightSkeleton:vc},data(){return{loading:!0,error:null}},mounted(){this.initializePage()},methods:{async initializePage(){try{await new Promise(i=>setTimeout(i,1e3)),this.loading=!1}catch(i){this.error=String(i),this.loading=!1}},async refresh(){this.loading=!0,this.error=null,await this.initializePage()}}},wc={class:"stock-market-insight-test"},Sc={key:0,class:"loading-with-skeleton"},bc={key:1,class:"error"},_c={class:"text-danger"},kc={key:2};function Cc(i,e,a,o,s,n){const r=F("StockMarketInsightSkeleton"),u=F("StockMarketInsight");return c(),d("div",wc,[e[2]||(e[2]=t("h2",null,"Stock Market Insight Test",-1)),e[3]||(e[3]=t("p",{class:"text-muted mb-3"},"Testing Stock Market Insight component with Daily and Weekly views",-1)),s.loading?(c(),d("div",Sc,[L(r)])):s.error?(c(),d("div",bc,[t("p",_c,l(s.error),1),t("button",{onClick:e[0]||(e[0]=(...h)=>n.refresh&&n.refresh(...h)),class:"btn btn-secondary"},"Retry")])):(c(),d("div",kc,[L(u,{"color-theme":"light","is-transparent":!0,locale:"en",height:"1300px"}),e[1]||(e[1]=Y('<div class="config-info" data-v-d131536f><h3 data-v-d131536f>Widget Configuration</h3><div class="config-grid" data-v-d131536f><div class="config-section" data-v-d131536f><h4 data-v-d131536f>Daily Configuration</h4><ul data-v-d131536f><li data-v-d131536f><strong data-v-d131536f>Symbols:</strong> NASDAQ, US30</li><li data-v-d131536f><strong data-v-d131536f>Date Range:</strong> 6 months, 1 Day intervals</li><li data-v-d131536f><strong data-v-d131536f>Chart Type:</strong> Candlesticks</li><li data-v-d131536f><strong data-v-d131536f>Moving Average:</strong> 5-period</li><li data-v-d131536f><strong data-v-d131536f>Volume:</strong> Enabled</li></ul></div><div class="config-section" data-v-d131536f><h4 data-v-d131536f>Weekly Configuration</h4><ul data-v-d131536f><li data-v-d131536f><strong data-v-d131536f>Symbols:</strong> NASDAQ, US30</li><li data-v-d131536f><strong data-v-d131536f>Date Range:</strong> 6 months, 1 Week intervals</li><li data-v-d131536f><strong data-v-d131536f>Chart Type:</strong> Candlesticks</li><li data-v-d131536f><strong data-v-d131536f>Moving Average:</strong> 5-period</li><li data-v-d131536f><strong data-v-d131536f>Volume:</strong> Enabled</li></ul></div></div></div>',1))]))])}const Tc=O(yc,[["render",Cc],["__scopeId","data-v-d131536f"]]),Dc={name:"YahooFinanceTest",data(){return{testSymbol:"AAPL",loading:!1,error:null,testData:null,cacheStatus:null,presetSymbols:["AAPL","TSLA","MSFT","GOOGL","ONDS","RDW"]}},methods:{async loadTestData(){if(this.testSymbol){this.loading=!0,this.error=null,this.testData=null;try{console.log(`Testing Yahoo Finance API for ${this.testSymbol}...`),this.testData=await te.getTechnicalIndicators(this.testSymbol),this.testData.error&&(this.error=this.testData.error)}catch(i){this.error=i.message,console.error("Test failed:",i)}finally{this.loading=!1}}},getSignalClass(i){if(!i)return"neutral";const e=["BUY","OVERSOLD","STRONG_TREND"],a=["SELL","OVERBOUGHT"];return e.includes(i)?"bullish":a.includes(i)?"bearish":"neutral"},formatDate(i){return i?new Date(i).toLocaleString("zh-TW"):"N/A"},async loadCacheStatus(){this.cacheStatus=te.getCacheStats()},clearCache(){te.clearCache(),te.clearDailyCache(),this.cacheStatus=null,alert("ÊâÄÊúâÁ∑©Â≠òÂ∑≤Ê∏ÖÈô§ (API Á∑©Â≠ò + ÊØèÊó•Á∑©Â≠ò)")}},mounted(){this.loadTestData()}},Ac={class:"yahoo-finance-test"},Ic={class:"test-controls"},Mc={class:"symbol-input"},Nc=["disabled"],xc={class:"preset-symbols"},Lc=["onClick","disabled"],Pc={key:0,class:"loading-section"},Rc={key:1,class:"error-section"},Ec={key:2,class:"results-section"},Oc={class:"indicators-grid"},Uc={class:"indicator-section"},$c={class:"ma-grid"},Fc={class:"indicator-card compact"},Vc={class:"indicator-details"},Wc={class:"indicator-card compact"},Bc={class:"indicator-details"},Hc={class:"indicator-card compact"},qc={class:"indicator-details"},Gc={class:"indicator-card compact"},jc={class:"indicator-details"},zc={class:"additional-info"},Kc={class:"indicator-section"},Qc={class:"ichimoku-grid"},Yc={class:"indicator-card compact"},Xc={class:"indicator-details"},Jc={class:"additional-info"},Zc={class:"indicator-card compact"},ed={class:"indicator-details"},td={class:"additional-info"},sd={class:"indicator-card compact"},ad={class:"indicator-details"},nd={class:"additional-info"},id={class:"indicator-section"},od={class:"vwma-grid"},rd={class:"indicator-card"},ld={class:"indicator-details"},cd={class:"additional-info"},dd={class:"indicator-section"},ud={class:"technical-grid"},hd={class:"indicator-card"},gd={class:"indicator-details"},md={key:0,class:"rsi-bar"},fd={class:"indicator-card"},pd={class:"indicator-details"},vd={class:"additional-info"},yd={class:"indicator-card"},wd={class:"indicator-details"},Sd={class:"additional-info"},bd={class:"metadata"},_d={key:0},kd={key:1},Cd={key:2,class:"error-text"},Td={class:"cache-section"},Dd={key:0,class:"cache-info"};function Ad(i,e,a,o,s,n){var r,u,h,g,y,f,C,D,T,A,_,N,v,x,V,S,M,R,m,B,se,ae,ne,pe,ve,ye,we,Se,be,_e,ke,Ce,Te,De,Ae,Ie,Me,Ne,xe,Le,Pe,Re,Ee,Oe,Ue,$e,Fe,Ve,We,Be,He,qe,Ge,je,ze,Ke,Qe,Ye,Xe;return c(),d("div",Ac,[e[32]||(e[32]=t("div",{class:"test-header"},[t("h2",null,"Yahoo Finance API Ê∏¨Ë©¶"),t("p",null,"Ê∏¨Ë©¶ Yahoo Finance API ÁöÑÊäÄË°ìÊåáÊ®ôÊï∏ÊìöÁç≤ÂèñÂäüËÉΩ")],-1)),t("div",Ic,[t("div",Mc,[e[5]||(e[5]=t("label",{for:"symbol"},"ËÇ°Á•®‰ª£Ëôü:",-1)),W(t("input",{id:"symbol","onUpdate:modelValue":e[0]||(e[0]=z=>s.testSymbol=z),type:"text",placeholder:"‰æãÂ¶Ç: AAPL, TSLA, ONDS",onKeyup:e[1]||(e[1]=ht(z=>s.testSymbol&&n.loadTestData(),["enter"]))},null,544),[[de,s.testSymbol]]),t("button",{onClick:e[2]||(e[2]=z=>n.loadTestData()),disabled:!s.testSymbol||s.loading,class:"test-btn"},l(s.loading?"ËºâÂÖ•‰∏≠...":"Ê∏¨Ë©¶"),9,Nc)]),t("div",xc,[e[6]||(e[6]=t("span",null,"Âø´ÈÄüÊ∏¨Ë©¶:",-1)),(c(!0),d(U,null,$(s.presetSymbols,z=>(c(),d("button",{key:z,onClick:at=>{s.testSymbol=z,n.loadTestData()},disabled:s.loading,class:"preset-btn"},l(z),9,Lc))),128))])]),s.loading?(c(),d("div",Pc,[e[7]||(e[7]=t("div",{class:"loading-spinner"},null,-1)),t("p",null,"Ê≠£Âú®Âæû Yahoo Finance Áç≤Âèñ "+l(s.testSymbol)+" ÁöÑÊäÄË°ìÊåáÊ®ôÊï∏Êìö...",1)])):b("",!0),s.error?(c(),d("div",Rc,[e[8]||(e[8]=t("h3",null,"‚ùå ÈåØË™§",-1)),t("p",null,l(s.error),1)])):b("",!0),s.testData&&!s.loading?(c(),d("div",Ec,[t("h3",null,"‚úÖ "+l(s.testSymbol)+" ÊäÄË°ìÊåáÊ®ôÁµêÊûú",1),t("div",Oc,[t("div",Uc,[e[13]||(e[13]=t("h3",null,"ÁßªÂãïÂπ≥ÂùáÁ∑ö (Moving Averages)",-1)),t("div",$c,[t("div",Fc,[e[9]||(e[9]=t("h4",null,"MA5 / SMA5",-1)),t("div",Vc,[t("div",{class:p(["main-value",n.getSignalClass((r=s.testData.ma5)==null?void 0:r.signal)])},l(((u=s.testData.ma5)==null?void 0:u.value)||"N/A"),3),t("div",{class:p(["signal-badge",n.getSignalClass((h=s.testData.ma5)==null?void 0:h.signal)])},l(((g=s.testData.ma5)==null?void 0:g.signal)||"N/A"),3)])]),t("div",Wc,[e[10]||(e[10]=t("h4",null,"MA10 / SMA10",-1)),t("div",Bc,[t("div",{class:p(["main-value",n.getSignalClass((y=s.testData.ma10)==null?void 0:y.signal)])},l(((f=s.testData.ma10)==null?void 0:f.value)||"N/A"),3),t("div",{class:p(["signal-badge",n.getSignalClass((C=s.testData.ma10)==null?void 0:C.signal)])},l(((D=s.testData.ma10)==null?void 0:D.signal)||"N/A"),3)])]),t("div",Hc,[e[11]||(e[11]=t("h4",null,"MA30 / SMA30",-1)),t("div",qc,[t("div",{class:p(["main-value",n.getSignalClass((T=s.testData.ma30)==null?void 0:T.signal)])},l(((A=s.testData.ma30)==null?void 0:A.value)||"N/A"),3),t("div",{class:p(["signal-badge",n.getSignalClass((_=s.testData.ma30)==null?void 0:_.signal)])},l(((N=s.testData.ma30)==null?void 0:N.signal)||"N/A"),3)])]),t("div",Gc,[e[12]||(e[12]=t("h4",null,"SMA50",-1)),t("div",jc,[t("div",{class:p(["main-value",n.getSignalClass((v=s.testData.sma50)==null?void 0:v.signal)])},l(((x=s.testData.sma50)==null?void 0:x.value)||"N/A"),3),t("div",{class:p(["signal-badge",n.getSignalClass((V=s.testData.sma50)==null?void 0:V.signal)])},l(((S=s.testData.sma50)==null?void 0:S.signal)||"N/A"),3),t("div",zc,[t("small",null,"Áï∂ÂâçÂÉπÊ†º: $"+l(((M=s.testData.sma50)==null?void 0:M.currentPrice)||"N/A"),1)])])])])]),t("div",Kc,[e[17]||(e[17]=t("h3",null,"‰∏ÄÁõÆÂùáË°°Ë°® (Ichimoku Cloud)",-1)),t("div",Qc,[t("div",Yc,[e[14]||(e[14]=t("h4",null,"ËΩâÊèõÁ∑ö (9)",-1)),t("div",Xc,[t("div",{class:p(["main-value",n.getSignalClass((R=s.testData.ichimokuConversionLine)==null?void 0:R.signal)])},l(((m=s.testData.ichimokuConversionLine)==null?void 0:m.value)||"N/A"),3),t("div",{class:p(["signal-badge",n.getSignalClass((B=s.testData.ichimokuConversionLine)==null?void 0:B.signal)])},l(((se=s.testData.ichimokuConversionLine)==null?void 0:se.signal)||"N/A"),3),t("div",Jc,[t("small",null,"ÊúÄÈ´ò: "+l(((ae=s.testData.ichimokuConversionLine)==null?void 0:ae.highestHigh)||"N/A"),1),t("small",null,"ÊúÄ‰Ωé: "+l(((ne=s.testData.ichimokuConversionLine)==null?void 0:ne.lowestLow)||"N/A"),1)])])]),t("div",Zc,[e[15]||(e[15]=t("h4",null,"Âü∫Ê∫ñÁ∑ö (26)",-1)),t("div",ed,[t("div",{class:p(["main-value",n.getSignalClass((pe=s.testData.ichimokuBaseLine)==null?void 0:pe.signal)])},l(((ve=s.testData.ichimokuBaseLine)==null?void 0:ve.value)||"N/A"),3),t("div",{class:p(["signal-badge",n.getSignalClass((ye=s.testData.ichimokuBaseLine)==null?void 0:ye.signal)])},l(((we=s.testData.ichimokuBaseLine)==null?void 0:we.signal)||"N/A"),3),t("div",td,[t("small",null,"ÊúÄÈ´ò: "+l(((Se=s.testData.ichimokuBaseLine)==null?void 0:Se.highestHigh)||"N/A"),1),t("small",null,"ÊúÄ‰Ωé: "+l(((be=s.testData.ichimokuBaseLine)==null?void 0:be.lowestLow)||"N/A"),1)])])]),t("div",sd,[e[16]||(e[16]=t("h4",null,"ÈÅ≤Ë°åÁ∑ö (26)",-1)),t("div",ad,[t("div",{class:p(["main-value",n.getSignalClass((_e=s.testData.ichimokuLaggingSpan)==null?void 0:_e.signal)])},l(((ke=s.testData.ichimokuLaggingSpan)==null?void 0:ke.value)||"N/A"),3),t("div",{class:p(["signal-badge",n.getSignalClass((Ce=s.testData.ichimokuLaggingSpan)==null?void 0:Ce.signal)])},l(((Te=s.testData.ichimokuLaggingSpan)==null?void 0:Te.signal)||"N/A"),3),t("div",nd,[t("small",null,"ÂèÉËÄÉÂÉπ: "+l(((De=s.testData.ichimokuLaggingSpan)==null?void 0:De.laggingReference)||"N/A"),1)])])])])]),t("div",id,[e[19]||(e[19]=t("h3",null,"Êàê‰∫§ÈáèÂä†Ê¨äÁßªÂãïÂπ≥ÂùáÁ∑ö (VWMA)",-1)),t("div",od,[t("div",rd,[e[18]||(e[18]=t("h4",null,"VWMA (20)",-1)),t("div",ld,[t("div",{class:p(["main-value",n.getSignalClass((Ae=s.testData.vwma20)==null?void 0:Ae.signal)])},l(((Ie=s.testData.vwma20)==null?void 0:Ie.value)||"N/A"),3),t("div",{class:p(["signal-badge",n.getSignalClass((Me=s.testData.vwma20)==null?void 0:Me.signal)])},l(((Ne=s.testData.vwma20)==null?void 0:Ne.signal)||"N/A"),3),t("div",cd,[t("small",null,"Áï∂ÂâçÂÉπÊ†º: $"+l(((xe=s.testData.vwma20)==null?void 0:xe.currentPrice)||"N/A"),1),t("small",null,"Á∏ΩÊàê‰∫§Èáè: "+l(((Le=s.testData.vwma20)==null?void 0:Le.totalVolume)||"N/A"),1)])])])])]),t("div",dd,[e[23]||(e[23]=t("h3",null,"ÊäÄË°ìÊåáÊ®ô (Technical Indicators)",-1)),t("div",ud,[t("div",hd,[e[20]||(e[20]=t("h4",null,"Relative Strength Index (14)",-1)),t("div",gd,[t("div",{class:p(["main-value",n.getSignalClass((Pe=s.testData.rsi14)==null?void 0:Pe.signal)])},l(((Re=s.testData.rsi14)==null?void 0:Re.value)||"N/A"),3),t("div",{class:p(["signal-badge",n.getSignalClass((Ee=s.testData.rsi14)==null?void 0:Ee.signal)])},l(((Oe=s.testData.rsi14)==null?void 0:Oe.signal)||"N/A"),3),(Ue=s.testData.rsi14)!=null&&Ue.value?(c(),d("div",md,[t("div",{class:"rsi-fill",style:Z({width:s.testData.rsi14.value+"%"})},null,4)])):b("",!0)])]),t("div",fd,[e[21]||(e[21]=t("h4",null,"Average Directional Index (14)",-1)),t("div",pd,[t("div",{class:p(["main-value",n.getSignalClass(($e=s.testData.adx14)==null?void 0:$e.signal)])},l(((Fe=s.testData.adx14)==null?void 0:Fe.value)||"N/A"),3),t("div",{class:p(["signal-badge",n.getSignalClass((Ve=s.testData.adx14)==null?void 0:Ve.signal)])},l(((We=s.testData.adx14)==null?void 0:We.signal)||"N/A"),3),t("div",vd,[t("small",null,"+DI: "+l(((Be=s.testData.adx14)==null?void 0:Be.plusDI)||"N/A"),1),t("small",null,"-DI: "+l(((He=s.testData.adx14)==null?void 0:He.minusDI)||"N/A"),1)])])]),t("div",yd,[e[22]||(e[22]=t("h4",null,"MACD Level (12, 26)",-1)),t("div",wd,[t("div",{class:p(["main-value",n.getSignalClass((qe=s.testData.macd)==null?void 0:qe.signal)])},l(((Ge=s.testData.macd)==null?void 0:Ge.value)||"N/A"),3),t("div",{class:p(["signal-badge",n.getSignalClass((je=s.testData.macd)==null?void 0:je.signal)])},l(((ze=s.testData.macd)==null?void 0:ze.signal)||"N/A"),3),t("div",Sd,[t("small",null,"‰ø°ËôüÁ∑ö: "+l(((Ke=s.testData.macd)==null?void 0:Ke.signalLine)||"N/A"),1),t("small",null,"Êü±ÁãÄÂúñ: "+l(((Qe=s.testData.macd)==null?void 0:Qe.histogram)||"N/A"),1),t("small",null,"EMA12: "+l(((Ye=s.testData.macd)==null?void 0:Ye.ema12)||"N/A"),1),t("small",null,"EMA26: "+l(((Xe=s.testData.macd)==null?void 0:Xe.ema26)||"N/A"),1)])])])])])]),t("div",bd,[t("p",null,[e[24]||(e[24]=t("strong",null,"ÊúÄÂæåÊõ¥Êñ∞:",-1)),w(" "+l(n.formatDate(s.testData.lastUpdated)),1)]),t("p",null,[e[25]||(e[25]=t("strong",null,"Êï∏Êìö‰æÜÊ∫ê:",-1)),w(" "+l(s.testData.source||"Yahoo Finance"),1)]),s.testData.proxy?(c(),d("p",_d,[e[26]||(e[26]=t("strong",null,"‰ª£ÁêÜÊúçÂãô:",-1)),w(" "+l(s.testData.proxy),1)])):b("",!0),s.testData.dataPoints?(c(),d("p",kd,[e[27]||(e[27]=t("strong",null,"Êï∏ÊìöÈªûÊï∏Èáè:",-1)),w(" "+l(s.testData.dataPoints),1)])):b("",!0),s.testData.error?(c(),d("p",Cd,[e[28]||(e[28]=t("strong",null,"Ê≥®ÊÑè:",-1)),w(" "+l(s.testData.error),1)])):b("",!0)])])):b("",!0),t("div",Td,[e[31]||(e[31]=t("h3",null,"Á∑©Â≠òÁãÄÊÖã",-1)),t("button",{onClick:e[3]||(e[3]=z=>n.loadCacheStatus()),class:"cache-btn"},"Ê™¢Êü•Á∑©Â≠ò"),t("button",{onClick:e[4]||(e[4]=z=>n.clearCache()),class:"cache-btn"},"Ê∏ÖÈô§ÊâÄÊúâÁ∑©Â≠ò"),s.cacheStatus?(c(),d("div",Dd,[e[29]||(e[29]=t("h4",null,"API Ë´ãÊ±ÇÁ∑©Â≠ò (5ÂàÜÈêò)",-1)),t("pre",null,l(JSON.stringify(s.cacheStatus.apiCache,null,2)),1),e[30]||(e[30]=t("h4",null,"ÊØèÊó•ÊäÄË°ìÊåáÊ®ôÁ∑©Â≠ò (24Â∞èÊôÇ)",-1)),t("pre",null,l(JSON.stringify(s.cacheStatus.dailyCache,null,2)),1)])):b("",!0)])])}const Id=O(Dc,[["render",Ad],["__scopeId","data-v-526bcef5"]]),Md={name:"TechnicalIndicatorsValidation",data(){return{testSymbol:"AAPL",loading:!1,ourData:null,tradingViewWidget:null}},methods:{async loadData(){if(this.testSymbol){this.loading=!0,this.ourData=null;try{te.setMockMode(!1),this.ourData=await te.getTechnicalIndicators(this.testSymbol),this.loadTradingViewWidget()}catch(i){console.error("Failed to load data:",i)}finally{this.loading=!1}}},loadTradingViewWidget(){if(this.tradingViewWidget){const i=document.getElementById(`tradingview-widget-${this.testSymbol}`);i&&(i.innerHTML="")}setTimeout(()=>{const i=document.createElement("script");i.type="text/javascript",i.src="https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js",i.async=!0,i.innerHTML=JSON.stringify({interval:"1D",width:"100%",height:"400",isTransparent:!1,symbol:`NASDAQ:${this.testSymbol}`,showIntervalTabs:!0,locale:"en",colorTheme:"light"});const e=document.getElementById(`tradingview-widget-${this.testSymbol}`);e&&e.appendChild(i)},100)},getSignalClass(i){if(!i)return"neutral";const e=["BUY","OVERSOLD"],a=["SELL","OVERBOUGHT"];return e.includes(i)?"bullish":a.includes(i)?"bearish":"neutral"}},mounted(){this.loadData()}},Nd={class:"validation-page"},xd={class:"validation-controls"},Ld={class:"symbol-input"},Pd=["disabled"],Rd={key:0,class:"loading-section"},Ed={key:1,class:"comparison-section"},Od={class:"comparison-grid"},Ud={class:"our-results"},$d={class:"indicator-list"},Fd={class:"indicator-item"},Vd={class:"indicator-item"},Wd={class:"indicator-item"},Bd={class:"debug-info"},Hd={class:"tradingview-results"},qd={class:"tradingview-widget-container"},Gd=["id"],jd={class:"detailed-comparison"},zd={class:"comparison-table"};function Kd(i,e,a,o,s,n){var r,u,h,g,y,f,C,D,T,A,_,N,v,x,V,S,M,R,m;return c(),d("div",Nd,[e[26]||(e[26]=t("div",{class:"validation-header"},[t("h2",null,"ÊäÄË°ìÊåáÊ®ôÈ©óË≠â"),t("p",null,"Â∞çÊØîÊàëÂÄëÁöÑË®àÁÆóÁµêÊûúËàá TradingView ÁöÑÊï∏Êìö")],-1)),t("div",xd,[t("div",Ld,[e[3]||(e[3]=t("label",null,"ËÇ°Á•®‰ª£Ëôü:",-1)),W(t("input",{"onUpdate:modelValue":e[0]||(e[0]=B=>s.testSymbol=B),type:"text",placeholder:"‰æãÂ¶Ç: AAPL",onKeyup:e[1]||(e[1]=ht(B=>n.loadData(),["enter"]))},null,544),[[de,s.testSymbol]]),t("button",{onClick:e[2]||(e[2]=B=>n.loadData()),disabled:s.loading},l(s.loading?"ËºâÂÖ•‰∏≠...":"ËºâÂÖ•Êï∏Êìö"),9,Pd)])]),s.loading?(c(),d("div",Rd,[...e[4]||(e[4]=[t("div",{class:"loading-spinner"},null,-1),t("p",null,"Ê≠£Âú®ËºâÂÖ•Êï∏Êìö...",-1)])])):b("",!0),s.ourData&&!s.loading?(c(),d("div",Ed,[t("h3",null,l(s.testSymbol)+" ÊäÄË°ìÊåáÊ®ôÂ∞çÊØî",1),t("div",Od,[t("div",Ud,[e[13]||(e[13]=t("h4",null,"ÊàëÂÄëÁöÑË®àÁÆóÁµêÊûú",-1)),t("div",$d,[t("div",Fd,[e[5]||(e[5]=t("strong",null,"SMA(50):",-1)),w(" "+l(((r=s.ourData.sma50)==null?void 0:r.value)||"N/A")+" ",1),t("span",{class:p(["signal",n.getSignalClass((u=s.ourData.sma50)==null?void 0:u.signal)])},l((h=s.ourData.sma50)==null?void 0:h.signal),3)]),t("div",Vd,[e[6]||(e[6]=t("strong",null,"RSI(14):",-1)),w(" "+l(((g=s.ourData.rsi14)==null?void 0:g.value)||"N/A")+" ",1),t("span",{class:p(["signal",n.getSignalClass((y=s.ourData.rsi14)==null?void 0:y.signal)])},l((f=s.ourData.rsi14)==null?void 0:f.signal),3)]),t("div",Wd,[e[7]||(e[7]=t("strong",null,"MACD:",-1)),w(" "+l(((C=s.ourData.macd)==null?void 0:C.value)||"N/A")+" ",1),t("span",{class:p(["signal",n.getSignalClass((D=s.ourData.macd)==null?void 0:D.signal)])},l((T=s.ourData.macd)==null?void 0:T.signal),3)])]),t("div",Bd,[e[12]||(e[12]=t("h5",null,"Ë™øË©¶‰ø°ÊÅØ",-1)),t("p",null,[e[8]||(e[8]=t("strong",null,"Êï∏ÊìöÈªû:",-1)),w(" "+l(s.ourData.dataPoints),1)]),t("p",null,[e[9]||(e[9]=t("strong",null,"ÂÉπÊ†ºÁØÑÂúç:",-1)),w(" $"+l((A=s.ourData.priceRange)==null?void 0:A.min)+" - $"+l((_=s.ourData.priceRange)==null?void 0:_.max),1)]),t("p",null,[e[10]||(e[10]=t("strong",null,"ÊúÄÊñ∞ÂÉπÊ†º:",-1)),w(" $"+l((N=s.ourData.priceRange)==null?void 0:N.latest),1)]),t("p",null,[e[11]||(e[11]=t("strong",null,"Áï∂ÂâçÂÉπÊ†º:",-1)),w(" $"+l((v=s.ourData.sma50)==null?void 0:v.currentPrice),1)])])]),t("div",Hd,[e[14]||(e[14]=t("h4",null,"TradingView ÊäÄË°ìÂàÜÊûê",-1)),t("div",qd,[t("div",{class:"tradingview-widget",id:`tradingview-widget-${s.testSymbol}`},null,8,Gd)])])]),t("div",jd,[e[25]||(e[25]=t("h4",null,"Ë©≥Á¥∞Êï∏ÊìöÂ∞çÊØî",-1)),t("div",zd,[t("table",null,[e[24]||(e[24]=t("thead",null,[t("tr",null,[t("th",null,"ÊåáÊ®ô"),t("th",null,"ÊàëÂÄëÁöÑÁµêÊûú"),t("th",null,"TradingView"),t("th",null,"Â∑ÆÁï∞"),t("th",null,"ÁãÄÊÖã")])],-1)),t("tbody",null,[t("tr",null,[e[15]||(e[15]=t("td",null,"SMA(50)",-1)),t("td",null,"$"+l(((x=s.ourData.sma50)==null?void 0:x.value)||"N/A"),1),e[16]||(e[16]=t("td",null,"Ë´ãÊü•ÁúãÂè≥ÂÅ¥ Widget",-1)),e[17]||(e[17]=t("td",null,"-",-1)),t("td",null,l((V=s.ourData.sma50)==null?void 0:V.signal),1)]),t("tr",null,[e[18]||(e[18]=t("td",null,"RSI(14)",-1)),t("td",null,l(((S=s.ourData.rsi14)==null?void 0:S.value)||"N/A"),1),e[19]||(e[19]=t("td",null,"Ë´ãÊü•ÁúãÂè≥ÂÅ¥ Widget",-1)),e[20]||(e[20]=t("td",null,"-",-1)),t("td",null,l((M=s.ourData.rsi14)==null?void 0:M.signal),1)]),t("tr",null,[e[21]||(e[21]=t("td",null,"MACD",-1)),t("td",null,l(((R=s.ourData.macd)==null?void 0:R.value)||"N/A"),1),e[22]||(e[22]=t("td",null,"Ë´ãÊü•ÁúãÂè≥ÂÅ¥ Widget",-1)),e[23]||(e[23]=t("td",null,"-",-1)),t("td",null,l((m=s.ourData.macd)==null?void 0:m.signal),1)])])])])])])):b("",!0)])}const Qd=O(Md,[["render",Kd],["__scopeId","data-v-933bb253"]]),Yd={name:"MetadataServiceTest",data(){return{useDynamicAPI:!0,loading:!1,loadingMessage:"",error:null,successMessage:null,testSymbol:"AAPL",testResults:[],comparisonResults:[],cacheStats:null,testSymbols:["AAPL","MSFT","GOOGL","TSLA","NVDA","META","AMZN","NFLX","ASTS","RIVN"]}},async mounted(){await this.updateCacheStats()},methods:{async switchMode(){try{K.setUseDynamicAPI(this.useDynamicAPI),await this.updateCacheStats(),this.successMessage=`Â∑≤ÂàáÊèõÂà∞${this.useDynamicAPI?"ÂãïÊÖã API":"ÈùúÊÖãÊñá‰ª∂"}Ê®°Âºè`,setTimeout(()=>{this.successMessage=null},3e3)}catch(i){this.error=`ÂàáÊèõÊ®°ÂºèÂ§±Êïó: ${i.message}`,setTimeout(()=>{this.error=null},5e3)}},async testSingleSymbol(){if(!this.testSymbol.trim()){this.error="Ë´ãËº∏ÂÖ•ËÇ°Á•®‰ª£Á¢º",setTimeout(()=>{this.error=null},3e3);return}this.loading=!0,this.loadingMessage=`Ê≠£Âú®Áç≤Âèñ ${this.testSymbol} ÁöÑÂÖÉÊï∏Êìö...`,this.error=null;try{const i=Date.now(),e=await K.getSymbolMetadata(this.testSymbol.toUpperCase()),a=Date.now()-i,o={...e,duration:a,timestamp:new Date().toISOString()};this.testResults=[o,...this.testResults.filter(s=>s.symbol!==o.symbol)],this.successMessage=`ÊàêÂäüÁç≤Âèñ ${o.symbol} ÁöÑÂÖÉÊï∏Êìö (${a}ms)`,setTimeout(()=>{this.successMessage=null},3e3),await this.updateCacheStats()}catch(i){this.error=`Áç≤ÂèñÂÖÉÊï∏ÊìöÂ§±Êïó: ${i.message}`,setTimeout(()=>{this.error=null},5e3)}finally{this.loading=!1,this.loadingMessage=""}},async testBatchSymbols(){this.loading=!0,this.loadingMessage=`Ê≠£Âú®ÊâπÈáèÁç≤Âèñ ${this.testSymbols.length} ÂÄãËÇ°Á•®ÁöÑÂÖÉÊï∏Êìö...`,this.error=null;try{const i=Date.now(),e=await K.getBatchMetadata(this.testSymbols),a=Date.now()-i,o=[];for(const[s,n]of e)o.push({...n,duration:a/e.size,timestamp:new Date().toISOString()});this.testResults=o,this.successMessage=`ÊàêÂäüÊâπÈáèÁç≤Âèñ ${o.length} ÂÄãËÇ°Á•®ÁöÑÂÖÉÊï∏Êìö (${a}ms)`,setTimeout(()=>{this.successMessage=null},3e3),await this.updateCacheStats()}catch(i){this.error=`ÊâπÈáèÁç≤ÂèñÂ§±Êïó: ${i.message}`,setTimeout(()=>{this.error=null},5e3)}finally{this.loading=!1,this.loadingMessage=""}},async clearCache(){this.loading=!0,this.loadingMessage="Ê≠£Âú®Ê∏ÖÈô§Á∑©Â≠ò...";try{K.clearCache(),await this.updateCacheStats(),this.successMessage="Á∑©Â≠òÂ∑≤Ê∏ÖÈô§",setTimeout(()=>{this.successMessage=null},3e3)}catch(i){this.error=`Ê∏ÖÈô§Á∑©Â≠òÂ§±Êïó: ${i.message}`,setTimeout(()=>{this.error=null},5e3)}finally{this.loading=!1,this.loadingMessage=""}},async warmupCache(){this.loading=!0,this.loadingMessage="Ê≠£Âú®È†êÁÜ±Á∑©Â≠ò...";try{const i=await K.warmupCache(this.testSymbols);await this.updateCacheStats(),this.successMessage=`Á∑©Â≠òÈ†êÁÜ±ÂÆåÊàê: ${i.symbolsProcessed} ÂÄãËÇ°Á•®, ${i.duration}ms`,setTimeout(()=>{this.successMessage=null},3e3)}catch(i){this.error=`È†êÁÜ±Á∑©Â≠òÂ§±Êïó: ${i.message}`,setTimeout(()=>{this.error=null},5e3)}finally{this.loading=!1,this.loadingMessage=""}},async updateCacheStats(){try{this.cacheStats=K.getCacheStats()}catch(i){console.warn("Failed to get cache stats:",i)}},getResultCardClass(i){return i.confidence>=.9?"high-confidence":i.confidence>=.7?"medium-confidence":i.confidence>=.5?"low-confidence":"no-confidence"},getConfidenceBadgeClass(i){return i>=.9?"high":i>=.7?"medium":i>=.5?"low":"none"},formatTimestamp(i){return i?new Date(i).toLocaleString("zh-TW"):"N/A"}}},Xd={class:"metadata-test-container"},Jd={class:"control-panel"},Zd={class:"mode-selector"},eu={class:"test-controls"},tu=["disabled"],su=["disabled"],au=["disabled"],nu=["disabled"],iu={class:"symbol-input"},ou={key:0,class:"status-panel"},ru={key:0,class:"loading"},lu={key:1,class:"error"},cu={key:2,class:"success"},du={key:1,class:"cache-stats"},uu={class:"stats-grid"},hu={class:"stat-item"},gu={class:"stat-item"},mu={key:0,class:"stat-item"},fu={key:2,class:"results-section"},pu={class:"results-grid"},vu={class:"result-header"},yu={class:"result-content"},wu={class:"metadata-row"},Su={class:"metadata-row"},bu={class:"metadata-row"},_u={key:0,class:"metadata-row"},ku={key:1,class:"metadata-row"},Cu={class:"result-footer"},Tu={class:"source-info"},Du={class:"timestamp"},Au={key:3,class:"comparison-section"},Iu={class:"comparison-table"};function Mu(i,e,a,o,s,n){return c(),d("div",Xd,[e[25]||(e[25]=t("div",{class:"header"},[t("h1",null,"ÂÖÉÊï∏ÊìöÊúçÂãôÊ∏¨Ë©¶"),t("p",null,"Ê∏¨Ë©¶ÂãïÊÖã Yahoo Finance API vs ÈùúÊÖãÊñá‰ª∂ÁöÑ sector/industry Êï∏Êìö")],-1)),t("div",Jd,[t("div",Zd,[t("label",null,[W(t("input",{type:"radio",value:!0,"onUpdate:modelValue":e[0]||(e[0]=r=>s.useDynamicAPI=r),onChange:e[1]||(e[1]=(...r)=>n.switchMode&&n.switchMode(...r))},null,544),[[Ft,s.useDynamicAPI]]),e[10]||(e[10]=w(" ÂãïÊÖã API (Yahoo Finance) ",-1))]),t("label",null,[W(t("input",{type:"radio",value:!1,"onUpdate:modelValue":e[2]||(e[2]=r=>s.useDynamicAPI=r),onChange:e[3]||(e[3]=(...r)=>n.switchMode&&n.switchMode(...r))},null,544),[[Ft,s.useDynamicAPI]]),e[11]||(e[11]=w(" ÈùúÊÖãÊñá‰ª∂ (symbols_metadata.json) ",-1))])]),t("div",eu,[t("button",{onClick:e[4]||(e[4]=(...r)=>n.testSingleSymbol&&n.testSingleSymbol(...r)),disabled:s.loading}," Ê∏¨Ë©¶ÂñÆÂÄãËÇ°Á•® ",8,tu),t("button",{onClick:e[5]||(e[5]=(...r)=>n.testBatchSymbols&&n.testBatchSymbols(...r)),disabled:s.loading}," ÊâπÈáèÊ∏¨Ë©¶ ",8,su),t("button",{onClick:e[6]||(e[6]=(...r)=>n.clearCache&&n.clearCache(...r)),disabled:s.loading}," Ê∏ÖÈô§Á∑©Â≠ò ",8,au),t("button",{onClick:e[7]||(e[7]=(...r)=>n.warmupCache&&n.warmupCache(...r)),disabled:s.loading}," È†êÁÜ±Á∑©Â≠ò ",8,nu)]),t("div",iu,[W(t("input",{"onUpdate:modelValue":e[8]||(e[8]=r=>s.testSymbol=r),placeholder:"Ëº∏ÂÖ•ËÇ°Á•®‰ª£Á¢º (‰æãÂ¶Ç: AAPL)",onKeyup:e[9]||(e[9]=ht((...r)=>n.testSingleSymbol&&n.testSingleSymbol(...r),["enter"]))},null,544),[[de,s.testSymbol]])])]),s.loading||s.error||s.successMessage?(c(),d("div",ou,[s.loading?(c(),d("div",ru,[e[12]||(e[12]=t("span",{class:"spinner"},null,-1)),w(" "+l(s.loadingMessage),1)])):b("",!0),s.error?(c(),d("div",lu," ‚ùå "+l(s.error),1)):b("",!0),s.successMessage?(c(),d("div",cu," ‚úÖ "+l(s.successMessage),1)):b("",!0)])):b("",!0),s.cacheStats?(c(),d("div",du,[e[16]||(e[16]=t("h3",null,"Á∑©Â≠òÁµ±Ë®à",-1)),t("div",uu,[t("div",hu,[e[13]||(e[13]=t("label",null,"Ê®°Âºè:",-1)),t("span",null,l(s.cacheStats.mode==="dynamic"?"ÂãïÊÖã API":"ÈùúÊÖãÊñá‰ª∂"),1)]),t("div",gu,[e[14]||(e[14]=t("label",null,"Á∑©Â≠òÊ¢ùÁõÆ:",-1)),t("span",null,l(s.cacheStats.totalCached||0),1)]),s.cacheStats.mode==="static"?(c(),d("div",mu,[e[15]||(e[15]=t("label",null,"ÂÖÉÊï∏ÊìöÂ∑≤ËºâÂÖ•:",-1)),t("span",null,l(s.cacheStats.metadataLoaded?"ÊòØ":"Âê¶"),1)])):b("",!0)])])):b("",!0),s.testResults.length>0?(c(),d("div",fu,[e[22]||(e[22]=t("h3",null,"Ê∏¨Ë©¶ÁµêÊûú",-1)),t("div",pu,[(c(!0),d(U,null,$(s.testResults,r=>(c(),d("div",{key:r.symbol,class:p(["result-card",n.getResultCardClass(r)])},[t("div",vu,[t("h4",null,l(r.symbol),1),t("span",{class:p(["confidence-badge",n.getConfidenceBadgeClass(r.confidence)])},l((r.confidence*100).toFixed(0))+"% ",3)]),t("div",yu,[t("div",wu,[e[17]||(e[17]=t("label",null,"Sector:",-1)),t("span",null,l(r.sector),1)]),t("div",Su,[e[18]||(e[18]=t("label",null,"Industry:",-1)),t("span",null,l(r.industry),1)]),t("div",bu,[e[19]||(e[19]=t("label",null,"Exchange:",-1)),t("span",null,l(r.exchange),1)]),r.marketCapFormatted?(c(),d("div",_u,[e[20]||(e[20]=t("label",null,"Market Cap:",-1)),t("span",null,l(r.marketCapFormatted),1)])):b("",!0),r.country?(c(),d("div",ku,[e[21]||(e[21]=t("label",null,"Country:",-1)),t("span",null,l(r.country),1)])):b("",!0)]),t("div",Cu,[t("div",Tu,[t("small",null,l(r.source),1)]),t("div",Du,[t("small",null,l(n.formatTimestamp(r.lastUpdated)),1)])])],2))),128))])])):b("",!0),s.comparisonResults.length>0?(c(),d("div",Au,[e[24]||(e[24]=t("h3",null,"ÂãïÊÖã vs ÈùúÊÖãÊØîËºÉ",-1)),t("div",Iu,[t("table",null,[e[23]||(e[23]=t("thead",null,[t("tr",null,[t("th",null,"Symbol"),t("th",null,"ÂãïÊÖã API - Sector"),t("th",null,"ÈùúÊÖãÊñá‰ª∂ - Sector"),t("th",null,"ÂãïÊÖã API - Industry"),t("th",null,"ÈùúÊÖãÊñá‰ª∂ - Industry"),t("th",null,"ÂåπÈÖçÂ∫¶")])],-1)),t("tbody",null,[(c(!0),d(U,null,$(s.comparisonResults,r=>(c(),d("tr",{key:r.symbol},[t("td",null,l(r.symbol),1),t("td",null,l(r.dynamic.sector),1),t("td",null,l(r.static.sector),1),t("td",null,l(r.dynamic.industry),1),t("td",null,l(r.static.industry),1),t("td",null,[t("span",{class:p(["match-indicator",r.matchClass])},l(r.matchScore)+"% ",3)])]))),128))])])])])):b("",!0)])}const Nu=O(Yd,[["render",Mu],["__scopeId","data-v-540290ab"]]),xu={name:"ProxyDiagnosticTest",data(){var i;return{testSymbol:"AAPL",testing:!1,currentTest:"",diagnosticComplete:!1,proxyResults:[],directApiResults:{chart:null,quoteSummary:null},networkInfo:{userAgent:navigator.userAgent,language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,connection:((i=navigator.connection)==null?void 0:i.effectiveType)||"unknown",online:navigator.onLine},corsProxies:[{name:"CORS.SH",url:"https://cors.sh/",description:"Â∞àÊ•≠ÁöÑ CORS ‰ª£ÁêÜÊúçÂãôÔºåÁõ∏Â∞çÁ©©ÂÆö",type:"direct"},{name:"Proxy CORS (isomorphic-git)",url:"https://proxy-cors.isomorphic-git.org/",description:"Áî± isomorphic-git ÂúòÈöäÁ∂≠Ë≠∑",type:"direct"},{name:"ThingProxy",url:"https://thingproxy.freeboard.io/fetch/",description:"Áî± Freeboard.io Êèê‰æõÁöÑ‰ª£ÁêÜÊúçÂãô",type:"direct"},{name:"CORS Proxy (HTMLDriven)",url:"https://cors-proxy.htmldriven.com/?url=",description:"Á∞°ÂñÆÊòìÁî®ÁöÑ‰ª£ÁêÜÊúçÂãô",type:"query"},{name:"AllOrigins",url:"https://api.allorigins.win/raw?url=",description:"ÂÖçË≤ª CORS ‰ª£ÁêÜÊúçÂãô (ÂèØËÉΩÊúâ CORS ÈôêÂà∂)",type:"query"},{name:"CorsProxy.io",url:"https://corsproxy.io/?",description:"ÈñãÊ∫ê CORS ‰ª£ÁêÜ (ÂèØËÉΩÈúÄË¶ÅË™çË≠â)",type:"query"},{name:"CORS Anywhere",url:"https://cors-anywhere.herokuapp.com/",description:"Heroku Ë®óÁÆ°ÁöÑ CORS ‰ª£ÁêÜ (Â∑≤ÈôêÂà∂Ë®™Âïè)",type:"direct"}]}},computed:{workingProxies(){return this.proxyResults.filter(i=>i.status==="SUCCESS")},failedProxies(){return this.proxyResults.filter(i=>i.status==="FAILED")},fastestProxy(){const i=this.workingProxies;return i.length===0?null:i.reduce((e,a)=>a.responseTime<e.responseTime?a:e)}},methods:{async runFullDiagnostic(){this.testing=!0,this.diagnosticComplete=!1,this.proxyResults=[],this.directApiResults={chart:null,quoteSummary:null};try{await this.testAllProxies(),await this.testDirectAPI(),this.diagnosticComplete=!0}catch(i){console.error("Ë®∫Êñ∑ÈÅéÁ®ãÂá∫ÈåØ:",i)}finally{this.testing=!1,this.currentTest=""}},async testAllProxies(){for(let i=0;i<this.corsProxies.length;i++){const e=this.corsProxies[i];this.currentTest=`${e.name} ‰ª£ÁêÜÊúçÂãô`;const a=await this.testSingleProxy(e,i);this.proxyResults.push(a),i<this.corsProxies.length-1&&await this.delay(1e3)}},async testSingleProxy(i,e){var s,n;const a=Date.now(),o={index:e,name:i.name,url:i.url,type:i.type,status:"TESTING",responseTime:0,httpStatus:null,error:null,errorType:null,data:null,dataPoints:0,priceRange:null};try{const r=`https://query1.finance.yahoo.com/v8/finance/chart/${this.testSymbol}?interval=1d&range=1mo`;let u;i.type==="query"?u=`${i.url}${encodeURIComponent(r)}`:u=`${i.url}${r}`,console.log(`Testing ${i.name}:`,u.substring(0,120)+"...");const h=await fetch(u,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"}});if(o.responseTime=Date.now()-a,o.httpStatus=h.status,!h.ok)throw new Error(`HTTP ${h.status}: ${h.statusText}`);const g=await h.json();if(!g.chart||!g.chart.result||g.chart.result.length===0)throw new Error("Invalid data structure - no chart results");const f=(n=(s=g.chart.result[0].indicators)==null?void 0:s.quote)==null?void 0:n[0];if(!f||!f.close)throw new Error("Invalid data structure - no price data");const C=f.close.filter(D=>D!==null);o.status="SUCCESS",o.data=g,o.dataPoints=C.length,o.priceRange={min:Math.min(...C).toFixed(2),max:Math.max(...C).toFixed(2)},console.log(`‚úÖ ${i.name} ÊàêÂäü:`,{responseTime:o.responseTime,dataPoints:o.dataPoints,priceRange:o.priceRange})}catch(r){o.status="FAILED",o.responseTime=Date.now()-a,o.error=r.message,r.message.includes("CORS")||r.message.includes("cors")?o.errorType="CORS_ERROR":r.message.includes("401")?o.errorType="UNAUTHORIZED":r.message.includes("403")?o.errorType="FORBIDDEN":r.message.includes("404")?o.errorType="NOT_FOUND":r.message.includes("429")?o.errorType="RATE_LIMITED":r.message.includes("Failed to fetch")||r.message.includes("fetch")?o.errorType="NETWORK_ERROR":r.message.includes("Invalid data structure")?o.errorType="DATA_FORMAT_ERROR":r.message.includes("timeout")?o.errorType="TIMEOUT_ERROR":o.errorType="UNKNOWN_ERROR",console.log(`‚ùå ${i.name} Â§±Êïó:`,{errorType:o.errorType,error:o.error,responseTime:o.responseTime})}return o},async testDirectAPI(){var i,e,a,o,s,n,r,u,h,g,y;this.currentTest="Yahoo Finance API Áõ¥Êé•Ë®™Âïè";try{const f=`https://query1.finance.yahoo.com/v8/finance/chart/${this.testSymbol}?interval=1d&range=1mo`,C=await fetch(f);if(C.ok){const T=((u=(r=(n=(s=(o=(a=(e=(i=(await C.json()).chart)==null?void 0:i.result)==null?void 0:e[0])==null?void 0:a.indicators)==null?void 0:o.quote)==null?void 0:s[0])==null?void 0:n.close)==null?void 0:r.filter(A=>A!==null))==null?void 0:u.length)||0;this.directApiResults.chart={status:"SUCCESS",dataPoints:T}}else throw new Error(`HTTP ${C.status}`)}catch(f){this.directApiResults.chart={status:"FAILED",error:f.message}}try{const f=`https://query1.finance.yahoo.com/v10/finance/quoteSummary/${this.testSymbol}?modules=summaryProfile`,C=await fetch(f);if(C.ok){const T=(y=(g=(h=(await C.json()).quoteSummary)==null?void 0:h.result)==null?void 0:g[0])==null?void 0:y.summaryProfile;this.directApiResults.quoteSummary={status:"SUCCESS",sector:T==null?void 0:T.sector,industry:T==null?void 0:T.industry}}else throw new Error(`HTTP ${C.status}`)}catch(f){this.directApiResults.quoteSummary={status:"FAILED",error:f.message}}},getStatusClass(i){switch(i){case"SUCCESS":return"success";case"FAILED":return"failed";case"TESTING":return"testing";default:return"unknown"}},delay(i){return new Promise(e=>setTimeout(e,i))}}},Lu={class:"proxy-diagnostic"},Pu={class:"test-controls"},Ru={class:"symbol-input"},Eu=["disabled"],Ou={key:0,class:"loading"},Uu={class:"proxy-results"},$u={class:"proxy-grid"},Fu={class:"proxy-header"},Vu={class:"proxy-details"},Wu={key:0,class:"error-details"},Bu={key:1,class:"success-details"},Hu={class:"direct-api-test"},qu={class:"api-test-grid"},Gu={class:"api-test-card"},ju={key:0},zu={key:1},Ku={class:"api-test-card"},Qu={key:0},Yu={key:1},Xu={key:2},Ju={class:"network-info"},Zu={class:"network-details"},eh={key:1,class:"recommendations"},th={class:"recommendation-content"},sh={key:0,class:"success-recommendation"},ah={key:1,class:"warning-recommendation"},nh={class:"solution-suggestions"},ih={key:0,class:"critical-suggestions"},oh={key:1,class:"optimization-suggestions"};function rh(i,e,a,o,s,n){var r,u,h,g,y,f,C,D,T,A;return c(),d("div",Lu,[e[35]||(e[35]=t("div",{class:"test-header"},[t("h2",null,"üîç Yahoo Finance API Proxy Ë®∫Êñ∑Â∑•ÂÖ∑"),t("p",null,"Ê∏¨Ë©¶ÂêÑÂÄã CORS ‰ª£ÁêÜÊúçÂãôÁöÑÂèØÁî®ÊÄßÂíå Yahoo Finance API ÁöÑÁãÄÊÖã")],-1)),t("div",Pu,[t("div",Ru,[e[2]||(e[2]=t("label",null,"Ê∏¨Ë©¶ËÇ°Á•®:",-1)),W(t("input",{"onUpdate:modelValue":e[0]||(e[0]=_=>s.testSymbol=_),placeholder:"AAPL"},null,512),[[de,s.testSymbol]]),t("button",{onClick:e[1]||(e[1]=(..._)=>n.runFullDiagnostic&&n.runFullDiagnostic(..._)),disabled:s.testing},l(s.testing?"Ê∏¨Ë©¶‰∏≠...":"ÈñãÂßãÂÆåÊï¥Ë®∫Êñ∑"),9,Eu)])]),s.testing?(c(),d("div",Ou,[e[3]||(e[3]=t("div",{class:"spinner"},null,-1)),t("p",null,"Ê≠£Âú®Ê∏¨Ë©¶ "+l(s.currentTest)+"...",1)])):b("",!0),t("div",Uu,[e[11]||(e[11]=t("h3",null,"üì° CORS Proxy ÊúçÂãôÁãÄÊÖã",-1)),t("div",$u,[(c(!0),d(U,null,$(s.proxyResults,(_,N)=>{var v,x;return c(),d("div",{key:N,class:p(["proxy-card",n.getStatusClass(_.status)])},[t("div",Fu,[t("h4",null,"Proxy "+l(N+1)+": "+l(_.name),1),t("span",{class:p(["status-badge",n.getStatusClass(_.status)])},l(_.status),3)]),t("div",Vu,[t("p",null,[e[4]||(e[4]=t("strong",null,"URL:",-1)),w(" "+l(_.url),1)]),t("p",null,[e[5]||(e[5]=t("strong",null,"ÈüøÊáâÊôÇÈñì:",-1)),w(" "+l(_.responseTime)+"ms",1)]),t("p",null,[e[6]||(e[6]=t("strong",null,"HTTP ÁãÄÊÖã:",-1)),w(" "+l(_.httpStatus),1)]),_.error?(c(),d("div",Wu,[t("p",null,[e[7]||(e[7]=t("strong",null,"ÈåØË™§È°ûÂûã:",-1)),w(" "+l(_.errorType),1)]),t("p",null,[e[8]||(e[8]=t("strong",null,"ÈåØË™§Ë®äÊÅØ:",-1)),w(" "+l(_.error),1)])])):b("",!0),_.data?(c(),d("div",Bu,[t("p",null,[e[9]||(e[9]=t("strong",null,"Êï∏ÊìöÈªû:",-1)),w(" "+l(_.dataPoints),1)]),t("p",null,[e[10]||(e[10]=t("strong",null,"ÂÉπÊ†ºÁØÑÂúç:",-1)),w(" $"+l((v=_.priceRange)==null?void 0:v.min)+" - $"+l((x=_.priceRange)==null?void 0:x.max),1)])])):b("",!0)])],2)}),128))])]),t("div",Hu,[e[21]||(e[21]=t("h3",null,"üéØ Yahoo Finance API Áõ¥Êé•Ê∏¨Ë©¶",-1)),t("div",qu,[t("div",Gu,[e[15]||(e[15]=t("h4",null,"Chart API (ÊäÄË°ìÊåáÊ®ôÊï∏Êìö)",-1)),t("div",{class:p(["test-result",n.getStatusClass((r=s.directApiResults.chart)==null?void 0:r.status)])},[t("p",null,[e[12]||(e[12]=t("strong",null,"ÁãÄÊÖã:",-1)),w(" "+l(((u=s.directApiResults.chart)==null?void 0:u.status)||"Êú™Ê∏¨Ë©¶"),1)]),(h=s.directApiResults.chart)!=null&&h.error?(c(),d("p",ju,[e[13]||(e[13]=t("strong",null,"ÈåØË™§:",-1)),w(" "+l(s.directApiResults.chart.error),1)])):b("",!0),(g=s.directApiResults.chart)!=null&&g.dataPoints?(c(),d("p",zu,[e[14]||(e[14]=t("strong",null,"Êï∏ÊìöÈªû:",-1)),w(" "+l(s.directApiResults.chart.dataPoints),1)])):b("",!0)],2)]),t("div",Ku,[e[20]||(e[20]=t("h4",null,"Quote Summary API (ËÇ°Á•®Ë≥áË®ä)",-1)),t("div",{class:p(["test-result",n.getStatusClass((y=s.directApiResults.quoteSummary)==null?void 0:y.status)])},[t("p",null,[e[16]||(e[16]=t("strong",null,"ÁãÄÊÖã:",-1)),w(" "+l(((f=s.directApiResults.quoteSummary)==null?void 0:f.status)||"Êú™Ê∏¨Ë©¶"),1)]),(C=s.directApiResults.quoteSummary)!=null&&C.error?(c(),d("p",Qu,[e[17]||(e[17]=t("strong",null,"ÈåØË™§:",-1)),w(" "+l(s.directApiResults.quoteSummary.error),1)])):b("",!0),(D=s.directApiResults.quoteSummary)!=null&&D.sector?(c(),d("p",Yu,[e[18]||(e[18]=t("strong",null,"Sector:",-1)),w(" "+l(s.directApiResults.quoteSummary.sector),1)])):b("",!0),(T=s.directApiResults.quoteSummary)!=null&&T.industry?(c(),d("p",Xu,[e[19]||(e[19]=t("strong",null,"Industry:",-1)),w(" "+l(s.directApiResults.quoteSummary.industry),1)])):b("",!0)],2)])])]),t("div",Ju,[e[27]||(e[27]=t("h3",null,"üåê Á∂≤Ë∑ØÁí∞Â¢ÉË≥áË®ä",-1)),t("div",Zu,[t("p",null,[e[22]||(e[22]=t("strong",null,"Áî®Êà∂‰ª£ÁêÜ:",-1)),w(" "+l(s.networkInfo.userAgent),1)]),t("p",null,[e[23]||(e[23]=t("strong",null,"Ë™ûË®Ä:",-1)),w(" "+l(s.networkInfo.language),1)]),t("p",null,[e[24]||(e[24]=t("strong",null,"ÊôÇÂçÄ:",-1)),w(" "+l(s.networkInfo.timezone),1)]),t("p",null,[e[25]||(e[25]=t("strong",null,"ÈÄ£Á∑öÈ°ûÂûã:",-1)),w(" "+l(s.networkInfo.connection),1)]),t("p",null,[e[26]||(e[26]=t("strong",null,"ÊòØÂê¶Âú®Á∑ö:",-1)),w(" "+l(s.networkInfo.online?"ÊòØ":"Âê¶"),1)])])]),s.diagnosticComplete?(c(),d("div",eh,[e[34]||(e[34]=t("h3",null,"üí° Ë®∫Êñ∑ÁµêÊûúÂíåÂª∫Ë≠∞",-1)),t("div",th,[n.workingProxies.length>0?(c(),d("div",sh,[t("h4",null,"‚úÖ ÂèØÁî®ÁöÑ‰ª£ÁêÜÊúçÂãô ("+l(n.workingProxies.length)+"/"+l(s.proxyResults.length)+")",1),t("ul",null,[(c(!0),d(U,null,$(n.workingProxies,_=>(c(),d("li",{key:_.index},l(_.name)+" - ÈüøÊáâÊôÇÈñì: "+l(_.responseTime)+"ms ",1))),128))])])):b("",!0),n.failedProxies.length>0?(c(),d("div",ah,[t("h4",null,"‚ùå Â§±ÊïóÁöÑ‰ª£ÁêÜÊúçÂãô ("+l(n.failedProxies.length)+"/"+l(s.proxyResults.length)+")",1),t("ul",null,[(c(!0),d(U,null,$(n.failedProxies,_=>(c(),d("li",{key:_.index},l(_.name)+" - "+l(_.errorType)+": "+l(_.error),1))),128))])])):b("",!0),t("div",nh,[e[33]||(e[33]=t("h4",null,"üîß Âª∫Ë≠∞Ëß£Ê±∫ÊñπÊ°à",-1)),n.workingProxies.length===0?(c(),d("div",ih,[...e[28]||(e[28]=[Y("<p data-v-8854fc4b><strong data-v-8854fc4b>ÊâÄÊúâ‰ª£ÁêÜÈÉΩÂ§±Êïó‰∫ÜÔºåÂèØËÉΩÁöÑÂéüÂõ†ÂíåËß£Ê±∫ÊñπÊ°à:</strong></p><ul data-v-8854fc4b><li data-v-8854fc4b><strong data-v-8854fc4b>CORS ÊîøÁ≠ñ:</strong> ÁÄèË¶ΩÂô®ÈòªÊ≠¢Ë∑®ÂüüË´ãÊ±ÇÔºåËÄÉÊÖÆ‰ΩøÁî®ÊúçÂãôÁ´Ø‰ª£ÁêÜ</li><li data-v-8854fc4b><strong data-v-8854fc4b>‰ª£ÁêÜÊúçÂãôÈôêÂà∂:</strong> ÂÖçË≤ª‰ª£ÁêÜÊúçÂãôÂèØËÉΩÊúâ‰ΩøÁî®ÈôêÂà∂ÊàñÈúÄË¶ÅË™çË≠â</li><li data-v-8854fc4b><strong data-v-8854fc4b>Yahoo Finance API ËÆäÊõ¥:</strong> API Á´ØÈªûÊàñÊ†ºÂºèÂèØËÉΩÂ∑≤ËÆäÊõ¥</li><li data-v-8854fc4b><strong data-v-8854fc4b>Á∂≤Ë∑ØÈò≤ÁÅ´ÁâÜ:</strong> ÂÖ¨Âè∏ÊàñÂ≠∏Ê†°Á∂≤Ë∑ØÂèØËÉΩÈòªÊ≠¢Êüê‰∫õË´ãÊ±Ç</li></ul>",2)])])):(c(),d("div",oh,[e[32]||(e[32]=t("p",null,[t("strong",null,"ÂÑ™ÂåñÂª∫Ë≠∞:")],-1)),t("ul",null,[t("li",null,"ÂÑ™ÂÖà‰ΩøÁî®ÈüøÊáâÊôÇÈñìÊúÄÂø´ÁöÑ‰ª£ÁêÜ: "+l((A=n.fastestProxy)==null?void 0:A.name),1),e[29]||(e[29]=t("li",null,"ÂØ¶ÊñΩ‰ª£ÁêÜËº™ÊèõÊ©üÂà∂‰ª•ÂàÜÊï£Ë≤†Ëºâ",-1)),e[30]||(e[30]=t("li",null,"Â¢ûÂä†ÈåØË™§ÈáçË©¶ÈÇèËºØ",-1)),e[31]||(e[31]=t("li",null,"ËÄÉÊÖÆÁ∑©Â≠òÊ©üÂà∂Ê∏õÂ∞ë API Ë™øÁî®",-1))])]))])])])):b("",!0)])}const lh=O(xu,[["render",rh],["__scopeId","data-v-8854fc4b"]]),ch={name:"TechnicalIndicatorsManager",data(){return{loading:!1,testing:!1,showPreferences:!1,dataSourceStatus:null,testResults:[],preferences:{preferPrecomputed:!0,fallbackToRealtime:!0,maxAgeHours:24}}},async mounted(){await this.refreshStatus()},methods:{async refreshStatus(){this.loading=!0;try{this.dataSourceStatus=await ce.getDataSourceStatus()}catch(i){console.error("Failed to refresh status:",i),alert("Âà∑Êñ∞ÁãÄÊÖãÂ§±Êïó: "+i.message)}finally{this.loading=!1}},async clearAllCaches(){if(confirm("Á¢∫ÂÆöË¶ÅÊ∏ÖÈô§ÊâÄÊúâÁ∑©Â≠òÂóéÔºüÈÄôÂ∞áÂ∞éËá¥‰∏ãÊ¨°ËºâÂÖ•ÊôÇÈñìËºÉÈï∑„ÄÇ"))try{alert("ÊâÄÊúâÁ∑©Â≠òÂ∑≤Ê∏ÖÈô§"),await this.refreshStatus()}catch(i){alert("Ê∏ÖÈô§Á∑©Â≠òÂ§±Êïó: "+i.message)}},async testPrecomputed(){this.testing=!0,this.testResults=[];const i=["AAPL","TSLA","MSFT"];try{for(const e of i){const a=Date.now();try{const o=await ce.getTechnicalIndicators(e),s=Date.now()-a;this.testResults.push({symbol:e,success:!0,data:o,source:o.source,loadTime:`${s}ms`})}catch(o){this.testResults.push({symbol:e,success:!1,error:o.message,loadTime:`${Date.now()-a}ms`})}}}finally{this.testing=!1}},updatePreferences(){const i=this.preferences.maxAgeHours*60*60*1e3;ce.setPreferences({preferPrecomputed:this.preferences.preferPrecomputed,fallbackToRealtime:this.preferences.fallbackToRealtime,maxPrecomputedAge:i}),console.log("Preferences updated:",this.preferences)},formatDate(i){return i?new Date(i).toLocaleString("zh-TW"):"N/A"},formatBytes(i){if(i===0)return"0 B";const e=1024,a=["B","KB","MB"],o=Math.floor(Math.log(i)/Math.log(e));return parseFloat((i/Math.pow(e,o)).toFixed(2))+" "+a[o]}}},dh={class:"indicators-manager"},uh={class:"status-section"},hh={class:"status-grid"},gh={class:"status-header"},mh={key:0,class:"status-details"},fh={class:"status-card available"},ph={class:"status-details"},vh={class:"status-card available"},yh={class:"status-details"},wh={class:"control-section"},Sh={class:"control-grid"},bh=["disabled"],_h=["disabled"],kh={key:0,class:"preferences-section"},Ch={class:"preferences-form"},Th={class:"form-group"},Dh={class:"form-group"},Ah={class:"form-group"},Ih={key:1,class:"test-results-section"},Mh={class:"test-results"},Nh={class:"result-header"},xh={class:"symbol"},Lh={class:"source"},Ph={class:"load-time"},Rh={key:0,class:"error-message"},Eh={key:1,class:"indicators-preview"},Oh={key:2,class:"symbols-section"},Uh={class:"symbols-grid"};function $h(i,e,a,o,s,n){var r,u,h,g,y,f,C,D,T,A,_,N,v,x,V,S,M,R;return c(),d("div",dh,[e[31]||(e[31]=t("div",{class:"manager-header"},[t("h2",null,"ÊäÄË°ìÊåáÊ®ôÁÆ°ÁêÜ‰∏≠ÂøÉ"),t("p",null,"Áõ£ÊéßÂíåÁÆ°ÁêÜÈ†êË®àÁÆóÊäÄË°ìÊåáÊ®ôÁ≥ªÁµ±")],-1)),t("div",uh,[e[23]||(e[23]=t("h3",null,"Êï∏ÊìöÊ∫êÁãÄÊÖã",-1)),t("div",hh,[t("div",{class:p(["status-card",{available:(u=(r=s.dataSourceStatus)==null?void 0:r.precomputed)==null?void 0:u.available}])},[t("div",gh,[e[10]||(e[10]=t("h4",null,"È†êË®àÁÆóÊï∏Êìö",-1)),t("span",{class:p(["status-badge",(g=(h=s.dataSourceStatus)==null?void 0:h.precomputed)!=null&&g.available?"success":"error"])},l((f=(y=s.dataSourceStatus)==null?void 0:y.precomputed)!=null&&f.available?"ÂèØÁî®":"‰∏çÂèØÁî®"),3)]),(D=(C=s.dataSourceStatus)==null?void 0:C.precomputed)!=null&&D.available?(c(),d("div",mh,[t("p",null,[e[11]||(e[11]=t("strong",null,"ËÇ°Á•®Êï∏Èáè:",-1)),w(" "+l(s.dataSourceStatus.precomputed.symbols.length),1)]),t("p",null,[e[12]||(e[12]=t("strong",null,"ÊàêÂäü:",-1)),w(" "+l(s.dataSourceStatus.precomputed.successful),1)]),t("p",null,[e[13]||(e[13]=t("strong",null,"Â§±Êïó:",-1)),w(" "+l(s.dataSourceStatus.precomputed.failed),1)]),t("p",null,[e[14]||(e[14]=t("strong",null,"ÊúÄÂæåÊõ¥Êñ∞:",-1)),w(" "+l(n.formatDate(s.dataSourceStatus.precomputed.lastUpdate)),1)])])):b("",!0)],2),t("div",fh,[e[18]||(e[18]=t("div",{class:"status-header"},[t("h4",null,"ÊØèÊó•Á∑©Â≠ò"),t("span",{class:"status-badge success"},"ÂèØÁî®")],-1)),t("div",ph,[t("p",null,[e[15]||(e[15]=t("strong",null,"ÂÖßÂ≠òÁ∑©Â≠ò:",-1)),w(" "+l(((A=(T=s.dataSourceStatus)==null?void 0:T.cache)==null?void 0:A.memoryCache)||0)+" È†ÖÁõÆ",1)]),t("p",null,[e[16]||(e[16]=t("strong",null,"Êú¨Âú∞Â≠òÂÑ≤:",-1)),w(" "+l(((N=(_=s.dataSourceStatus)==null?void 0:_.cache)==null?void 0:N.localStorageCache)||0)+" È†ÖÁõÆ",1)]),t("p",null,[e[17]||(e[17]=t("strong",null,"Á∏ΩÂ§ßÂ∞è:",-1)),w(" "+l(n.formatBytes(((x=(v=s.dataSourceStatus)==null?void 0:v.cache)==null?void 0:x.totalSize)||0)),1)])])]),t("div",vh,[e[22]||(e[22]=t("div",{class:"status-header"},[t("h4",null,"ÂØ¶ÊôÇË®àÁÆó"),t("span",{class:"status-badge success"},"ÂèØÁî®")],-1)),t("div",yh,[t("p",null,[e[19]||(e[19]=t("strong",null,"‰ª£ÁêÜÊúçÂãô:",-1)),w(" "+l(((S=(V=s.dataSourceStatus)==null?void 0:V.realtime)==null?void 0:S.proxies)||0)+" ÂÄã",1)]),e[20]||(e[20]=t("p",null,[t("strong",null,"ÁãÄÊÖã:"),w(" ÂÇôÁî®ÊñπÊ°à")],-1)),e[21]||(e[21]=t("p",null,[t("strong",null,"È†êÊúüÂª∂ÈÅ≤:"),w(" 2-20Áßí")],-1))])])])]),t("div",wh,[e[24]||(e[24]=t("h3",null,"ÊéßÂà∂Èù¢Êùø",-1)),t("div",Sh,[t("button",{onClick:e[0]||(e[0]=m=>n.refreshStatus()),class:"control-btn primary",disabled:s.loading},l(s.loading?"ËºâÂÖ•‰∏≠...":"Âà∑Êñ∞ÁãÄÊÖã"),9,bh),t("button",{onClick:e[1]||(e[1]=m=>n.clearAllCaches()),class:"control-btn warning"}," Ê∏ÖÈô§ÊâÄÊúâÁ∑©Â≠ò "),t("button",{onClick:e[2]||(e[2]=m=>n.testPrecomputed()),class:"control-btn info",disabled:s.testing},l(s.testing?"Ê∏¨Ë©¶‰∏≠...":"Ê∏¨Ë©¶È†êË®àÁÆó"),9,_h),t("button",{onClick:e[3]||(e[3]=m=>s.showPreferences=!s.showPreferences),class:"control-btn secondary"},l(s.showPreferences?"Èö±ËóèË®≠ÂÆö":"È°ØÁ§∫Ë®≠ÂÆö"),1)])]),s.showPreferences?(c(),d("div",kh,[e[28]||(e[28]=t("h3",null,"Á≥ªÁµ±ÂÅèÂ•ΩË®≠ÂÆö",-1)),t("div",Ch,[t("div",Th,[t("label",null,[W(t("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=m=>s.preferences.preferPrecomputed=m),onChange:e[5]||(e[5]=(...m)=>n.updatePreferences&&n.updatePreferences(...m))},null,544),[[ee,s.preferences.preferPrecomputed]]),e[25]||(e[25]=w(" ÂÑ™ÂÖà‰ΩøÁî®È†êË®àÁÆóÊï∏Êìö ",-1))])]),t("div",Dh,[t("label",null,[W(t("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=m=>s.preferences.fallbackToRealtime=m),onChange:e[7]||(e[7]=(...m)=>n.updatePreferences&&n.updatePreferences(...m))},null,544),[[ee,s.preferences.fallbackToRealtime]]),e[26]||(e[26]=w(" ÂÖÅË®±ÂõûÈÄÄÂà∞ÂØ¶ÊôÇË®àÁÆó ",-1))])]),t("div",Ah,[e[27]||(e[27]=t("label",null,"È†êË®àÁÆóÊï∏ÊìöÊúÄÂ§ßÂπ¥ÈΩ° (Â∞èÊôÇ):",-1)),W(t("input",{type:"number","onUpdate:modelValue":e[8]||(e[8]=m=>s.preferences.maxAgeHours=m),onChange:e[9]||(e[9]=(...m)=>n.updatePreferences&&n.updatePreferences(...m)),min:"1",max:"72"},null,544),[[de,s.preferences.maxAgeHours,void 0,{number:!0}]])])])])):b("",!0),s.testResults.length>0?(c(),d("div",Ih,[e[29]||(e[29]=t("h3",null,"Ê∏¨Ë©¶ÁµêÊûú",-1)),t("div",Mh,[(c(!0),d(U,null,$(s.testResults,(m,B)=>{var se,ae,ne;return c(),d("div",{key:B,class:p(["test-result-item",{success:m.success,error:!m.success}])},[t("div",Nh,[t("span",xh,l(m.symbol),1),t("span",Lh,l(m.source),1),t("span",Ph,l(m.loadTime),1)]),m.error?(c(),d("div",Rh,l(m.error),1)):(c(),d("div",Eh,[t("span",null,"MA5: "+l(((se=m.data.ma5)==null?void 0:se.value)||"N/A"),1),t("span",null,"ADX: "+l(((ae=m.data.adx14)==null?void 0:ae.value)||"N/A"),1),t("span",null,"MACD: "+l(((ne=m.data.macd)==null?void 0:ne.signal)||"N/A"),1)]))],2)}),128))])])):b("",!0),(R=(M=s.dataSourceStatus)==null?void 0:M.precomputed)!=null&&R.available?(c(),d("div",Oh,[e[30]||(e[30]=t("h3",null,"È†êË®àÁÆóËÇ°Á•®ÂàóË°®",-1)),t("div",Uh,[(c(!0),d(U,null,$(s.dataSourceStatus.precomputed.symbols,m=>(c(),d("span",{key:m,class:"symbol-tag"},l(m),1))),128))])])):b("",!0)])}const Fh=O(ch,[["render",$h],["__scopeId","data-v-ffe3b84a"]]),Vh={name:"AutoUpdateMonitor",data(){return{loading:!1,status:{},cacheStats:{},logs:[],config:{technicalIndicators:{enabled:!0,intervalHours:1,marketHoursOnly:!0},metadata:{enabled:!0,intervalHours:24}},configChanged:!1,startTime:null,technicalIndicatorsLastUpdate:null,technicalIndicatorsAge:0,technicalIndicatorsSuccessRate:0,metadataLastUpdate:null,metadataAge:0,metadataSymbolCount:0,warmupInfo:{isWarming:!1,progress:0,lastWarmupTime:null,trackedSymbols:[]}}},computed:{schedulerStatus(){return this.status.isRunning?"ÈÅãË°å‰∏≠":"Â∑≤ÂÅúÊ≠¢"},schedulerStatusClass(){return this.status.isRunning?"status-success":"status-error"},schedulerButtonText(){return this.status.isRunning?"ÂÅúÊ≠¢Ë™øÂ∫¶Âô®":"ÂïüÂãïË™øÂ∫¶Âô®"},schedulerButtonClass(){return this.status.isRunning?"btn btn-danger":"btn btn-success"},technicalIndicatorsStatus(){return this.technicalIndicatorsAge<1?"ÊúÄÊñ∞":this.technicalIndicatorsAge<12?"ËºÉÊñ∞":this.technicalIndicatorsAge<24?"ÈÅéÊôÇ":"ËàäÊï∏Êìö"},technicalIndicatorsStatusClass(){return this.technicalIndicatorsAge<1?"status-success":this.technicalIndicatorsAge<12?"status-warning":"status-error"},metadataStatus(){return this.metadataAge<24?"ÊúÄÊñ∞":this.metadataAge<72?"ËºÉÊñ∞":"ÈÅéÊôÇ"},metadataStatusClass(){return this.metadataAge<24?"status-success":this.metadataAge<72?"status-warning":"status-error"},cacheStatus(){const i=this.cacheStats.totalSize||0;return i>100?"ÈúÄË¶ÅÊ∏ÖÁêÜ":i>50?"Ê≠£Â∏∏":"ËâØÂ•Ω"},warmupStatus(){return this.warmupInfo.isWarming?"È†êÁÜ±‰∏≠":this.warmupInfo.progress===100?"Â∑≤ÂÆåÊàê":this.warmupInfo.lastWarmupTime?"ÂæÖÊ©ü‰∏≠":"Êú™È†êÁÜ±"},warmupStatusClass(){return this.warmupInfo.isWarming?"status-warning":this.warmupInfo.progress===100?"status-success":this.warmupInfo.lastWarmupTime?"status-info":"status-error"}},async mounted(){await this.initializeMonitor(),this.startPeriodicRefresh()},beforeUnmount(){this.refreshInterval&&clearInterval(this.refreshInterval)},methods:{async initializeMonitor(){this.loading=!0;try{await this.refreshStatus(),await this.loadTechnicalIndicatorsStatus(),await this.loadMetadataStatus(),await this.loadWarmupStatus(),this.startTime=new Date,this.addLog("Áõ£ÊéßÈù¢ÊùøÂ∑≤ÂàùÂßãÂåñ","INFO")}catch(i){this.addLog(`ÂàùÂßãÂåñÂ§±Êïó: ${i.message}`,"ERROR")}finally{this.loading=!1}},async refreshStatus(){try{this.status=J.getStatus(),this.cacheStats=H.getStats()}catch(i){this.addLog(`Âà∑Êñ∞ÁãÄÊÖãÂ§±Êïó: ${i.message}`,"ERROR")}},async loadTechnicalIndicatorsStatus(){try{const i=await fetch("/data/technical-indicators/latest_index.json");if(i.ok){const e=await i.json();this.technicalIndicatorsLastUpdate=new Date(e.generatedAt),this.technicalIndicatorsAge=(Date.now()-this.technicalIndicatorsLastUpdate)/(1e3*60*60),this.technicalIndicatorsSuccessRate=Math.round(e.successfulSymbols/e.totalSymbols*100)}}catch(i){this.addLog(`ËºâÂÖ•ÊäÄË°ìÊåáÊ®ôÁãÄÊÖãÂ§±Êïó: ${i.message}`,"ERROR")}},async loadMetadataStatus(){try{this.metadataLastUpdate=new Date,this.metadataAge=0,this.metadataSymbolCount=24}catch(i){this.addLog(`ËºâÂÖ•ÂÖÉÊï∏ÊìöÁãÄÊÖãÂ§±Êïó: ${i.message}`,"ERROR")}},async loadWarmupStatus(){try{this.warmupInfo=dt.getWarmupStatus()}catch(i){this.addLog(`ËºâÂÖ•È†êÁÜ±ÁãÄÊÖãÂ§±Êïó: ${i.message}`,"ERROR")}},async triggerWarmup(){this.loading=!0;try{this.addLog("ÊâãÂãïËß∏ÁôºÁ∑©Â≠òÈ†êÁÜ±","INFO"),await dt.triggerManualWarmup(),this.addLog("Á∑©Â≠òÈ†êÁÜ±ÂÆåÊàê","SUCCESS"),await this.loadWarmupStatus()}catch(i){this.addLog(`Á∑©Â≠òÈ†êÁÜ±Â§±Êïó: ${i.message}`,"ERROR")}finally{this.loading=!1}},async toggleScheduler(){this.loading=!0;try{this.status.isRunning?(J.stop(),this.addLog("Ë™øÂ∫¶Âô®Â∑≤ÂÅúÊ≠¢","INFO")):(J.start(),this.addLog("Ë™øÂ∫¶Âô®Â∑≤ÂïüÂãï","INFO")),await this.refreshStatus()}catch(i){this.addLog(`ÂàáÊèõË™øÂ∫¶Âô®Â§±Êïó: ${i.message}`,"ERROR")}finally{this.loading=!1}},async triggerUpdate(i){this.loading=!0;try{this.addLog(`ÊâãÂãïËß∏ÁôºÊõ¥Êñ∞: ${i}`,"INFO"),await J.triggerManualUpdate(i),this.addLog(`ÊâãÂãïÊõ¥Êñ∞ÂÆåÊàê: ${i}`,"SUCCESS"),await this.refreshStatus(),i==="technicalIndicators"?await this.loadTechnicalIndicatorsStatus():i==="metadata"&&await this.loadMetadataStatus()}catch(e){this.addLog(`ÊâãÂãïÊõ¥Êñ∞Â§±Êïó: ${e.message}`,"ERROR")}finally{this.loading=!1}},startPeriodicRefresh(){this.refreshInterval=setInterval(async()=>{await this.refreshStatus(),await this.loadTechnicalIndicatorsStatus(),await this.loadMetadataStatus(),await this.loadWarmupStatus()},3e4)},addLog(i,e="INFO"){const a={timestamp:new Date,level:e,message:i};this.logs.unshift(a),this.logs.length>100&&(this.logs=this.logs.slice(0,100))},clearLogs(){this.logs=[],this.addLog("Êó•Ë™åÂ∑≤Ê∏ÖÈô§","INFO")},onConfigChange(){this.configChanged=!0},async saveConfig(){try{localStorage.setItem("autoUpdateConfig",JSON.stringify(this.config)),this.configChanged=!1,this.addLog("ÈÖçÁΩÆÂ∑≤‰øùÂ≠ò","SUCCESS")}catch(i){this.addLog(`‰øùÂ≠òÈÖçÁΩÆÂ§±Êïó: ${i.message}`,"ERROR")}},formatTime(i){return i?new Date(i).toLocaleString("zh-TW"):"N/A"},formatDataAge(i){return i<1?"< 1 Â∞èÊôÇ":i<24?`${Math.round(i)} Â∞èÊôÇ`:`${Math.round(i/24)} Â§©`},getDataAgeClass(i){return i<1?"text-success":i<12?"text-warning":"text-danger"},getLogLevelClass(i){return{"log-info":i==="INFO","log-success":i==="SUCCESS","log-warning":i==="WARN","log-error":i==="ERROR"}}}},Wh={class:"auto-update-monitor"},Bh={class:"monitor-header"},Hh={class:"header-actions"},qh=["disabled"],Gh={key:0},jh={key:1},zh=["disabled"],Kh={class:"monitor-grid"},Qh={class:"status-card"},Yh={class:"card-header"},Xh={class:"card-content"},Jh={class:"status-item"},Zh={class:"status-item"},eg={class:"value"},tg={class:"status-item"},sg={class:"value"},ag={class:"status-card"},ng={class:"card-header"},ig={class:"card-content"},og={class:"status-item"},rg={class:"value"},lg={class:"status-item"},cg={class:"status-item"},dg={class:"value"},ug={class:"status-item"},hg={class:"value"},gg={class:"card-actions"},mg=["disabled"],fg={class:"status-card"},pg={class:"card-header"},vg={class:"card-content"},yg={class:"status-item"},wg={class:"value"},Sg={class:"status-item"},bg={class:"status-item"},_g={class:"value"},kg={class:"status-item"},Cg={class:"value"},Tg={class:"card-actions"},Dg=["disabled"],Ag={class:"status-card"},Ig={class:"card-header"},Mg={class:"card-content"},Ng={class:"status-item"},xg={class:"status-item"},Lg={class:"value"},Pg={class:"status-item"},Rg={class:"value"},Eg={class:"status-item"},Og={class:"value"},Ug={class:"card-actions"},$g=["disabled"],Fg={class:"status-card"},Vg={class:"card-header"},Wg={class:"status-indicator status-info"},Bg={class:"card-content"},Hg={class:"status-item"},qg={class:"value"},Gg={class:"status-item"},jg={class:"value"},zg={class:"status-item"},Kg={class:"value"},Qg={class:"status-item"},Yg={class:"value"},Xg={class:"card-actions"},Jg=["disabled"],Zg={class:"update-logs"},em={class:"logs-header"},tm={class:"logs-content"},sm={key:0,class:"no-logs"},am={key:1,class:"log-entries"},nm={class:"log-time"},im={class:"log-level"},om={class:"log-message"},rm={class:"config-panel"},lm={class:"config-header"},cm=["disabled"],dm={class:"config-content"},um={class:"config-section"},hm={class:"config-item"},gm={class:"config-item"},mm={class:"config-item"},fm={class:"config-section"},pm={class:"config-item"},vm={class:"config-item"};function ym(i,e,a,o,s,n){var r,u,h,g,y;return c(),d("div",Wh,[t("div",Bh,[e[19]||(e[19]=t("h2",null,"Ëá™ÂãïÊõ¥Êñ∞Áõ£ÊéßÈù¢Êùø",-1)),t("div",Hh,[t("button",{onClick:e[0]||(e[0]=(...f)=>n.refreshStatus&&n.refreshStatus(...f)),class:"btn btn-secondary",disabled:s.loading},[s.loading?(c(),d("span",Gh,"üîÑ")):(c(),d("span",jh,"üîÑ")),e[18]||(e[18]=w(" Âà∑Êñ∞ÁãÄÊÖã ",-1))],8,qh),t("button",{onClick:e[1]||(e[1]=(...f)=>n.toggleScheduler&&n.toggleScheduler(...f)),class:p(n.schedulerButtonClass),disabled:s.loading},l(n.schedulerButtonText),11,zh)])]),t("div",Kh,[t("div",Qh,[t("div",Yh,[e[20]||(e[20]=t("h3",null,"Ë™øÂ∫¶Âô®ÁãÄÊÖã",-1)),t("div",{class:p(["status-indicator",n.schedulerStatusClass])},l(n.schedulerStatus),3)]),t("div",Xh,[t("div",Jh,[e[21]||(e[21]=t("span",{class:"label"},"ÈÅãË°åÁãÄÊÖã:",-1)),t("span",{class:p(["value",n.schedulerStatusClass])},l(s.status.isRunning?"ÈÅãË°å‰∏≠":"Â∑≤ÂÅúÊ≠¢"),3)]),t("div",Zh,[e[22]||(e[22]=t("span",{class:"label"},"Ê¥ªÂãï‰ªªÂãô:",-1)),t("span",eg,l(((r=s.status.activeIntervals)==null?void 0:r.length)||0)+" ÂÄã",1)]),t("div",tg,[e[23]||(e[23]=t("span",{class:"label"},"ÂïüÂãïÊôÇÈñì:",-1)),t("span",sg,l(n.formatTime(s.startTime)),1)])])]),t("div",ag,[t("div",ng,[e[24]||(e[24]=t("h3",null,"ÊäÄË°ìÊåáÊ®ô",-1)),t("div",{class:p(["status-indicator",n.technicalIndicatorsStatusClass])},l(n.technicalIndicatorsStatus),3)]),t("div",ig,[t("div",og,[e[25]||(e[25]=t("span",{class:"label"},"ÊúÄÂæåÊõ¥Êñ∞:",-1)),t("span",rg,l(n.formatTime(s.technicalIndicatorsLastUpdate)),1)]),t("div",lg,[e[26]||(e[26]=t("span",{class:"label"},"Êï∏ÊìöÂπ¥ÈΩ°:",-1)),t("span",{class:p(["value",n.getDataAgeClass(s.technicalIndicatorsAge)])},l(n.formatDataAge(s.technicalIndicatorsAge)),3)]),t("div",cg,[e[27]||(e[27]=t("span",{class:"label"},"‰∏ãÊ¨°Êõ¥Êñ∞:",-1)),t("span",dg,l(n.formatTime((u=s.status.nextUpdates)==null?void 0:u.technicalIndicators)),1)]),t("div",ug,[e[28]||(e[28]=t("span",{class:"label"},"ÊàêÂäüÁéá:",-1)),t("span",hg,l(s.technicalIndicatorsSuccessRate)+"%",1)])]),t("div",gg,[t("button",{onClick:e[2]||(e[2]=f=>n.triggerUpdate("technicalIndicators")),class:"btn btn-primary btn-sm",disabled:s.loading}," Ê∏ÖÈô§Á∑©Â≠ò ",8,mg),e[29]||(e[29]=t("div",{class:"update-note"},[t("small",null,"Ë®ª: ÂØ¶ÈöõÈ†êË®àÁÆóÈúÄË¶ÅÂú®ÊúçÂãôÂô®Á´ØÂü∑Ë°å")],-1))])]),t("div",fg,[t("div",pg,[e[30]||(e[30]=t("h3",null,"ÂÖÉÊï∏Êìö",-1)),t("div",{class:p(["status-indicator",n.metadataStatusClass])},l(n.metadataStatus),3)]),t("div",vg,[t("div",yg,[e[31]||(e[31]=t("span",{class:"label"},"ÊúÄÂæåÊõ¥Êñ∞:",-1)),t("span",wg,l(n.formatTime(s.metadataLastUpdate)),1)]),t("div",Sg,[e[32]||(e[32]=t("span",{class:"label"},"Êï∏ÊìöÂπ¥ÈΩ°:",-1)),t("span",{class:p(["value",n.getDataAgeClass(s.metadataAge)])},l(n.formatDataAge(s.metadataAge)),3)]),t("div",bg,[e[33]||(e[33]=t("span",{class:"label"},"‰∏ãÊ¨°Êõ¥Êñ∞:",-1)),t("span",_g,l(n.formatTime((h=s.status.nextUpdates)==null?void 0:h.metadata)),1)]),t("div",kg,[e[34]||(e[34]=t("span",{class:"label"},"ËÇ°Á•®Êï∏Èáè:",-1)),t("span",Cg,l(s.metadataSymbolCount)+" ÊîØ",1)])]),t("div",Tg,[t("button",{onClick:e[3]||(e[3]=f=>n.triggerUpdate("metadata")),class:"btn btn-primary btn-sm",disabled:s.loading}," ÊâãÂãïÊõ¥Êñ∞ ",8,Dg)])]),t("div",Ag,[t("div",Ig,[e[35]||(e[35]=t("h3",null,"Á∑©Â≠òÈ†êÁÜ±",-1)),t("div",{class:p(["status-indicator",n.warmupStatusClass])},l(n.warmupStatus),3)]),t("div",Mg,[t("div",Ng,[e[36]||(e[36]=t("span",{class:"label"},"È†êÁÜ±ÁãÄÊÖã:",-1)),t("span",{class:p(["value",n.warmupStatusClass])},l(s.warmupInfo.isWarming?"ÈÄ≤Ë°å‰∏≠":"ÂæÖÊ©ü‰∏≠"),3)]),t("div",xg,[e[37]||(e[37]=t("span",{class:"label"},"ÈÄ≤Â∫¶:",-1)),t("span",Lg,l(Math.round(s.warmupInfo.progress))+"%",1)]),t("div",Pg,[e[38]||(e[38]=t("span",{class:"label"},"ËøΩËπ§ËÇ°Á•®:",-1)),t("span",Rg,l(((g=s.warmupInfo.trackedSymbols)==null?void 0:g.length)||0)+" ÊîØ",1)]),t("div",Eg,[e[39]||(e[39]=t("span",{class:"label"},"‰∏äÊ¨°È†êÁÜ±:",-1)),t("span",Og,l(n.formatTime(s.warmupInfo.lastWarmupTime)),1)])]),t("div",Ug,[t("button",{onClick:e[4]||(e[4]=(...f)=>n.triggerWarmup&&n.triggerWarmup(...f)),class:"btn btn-info btn-sm",disabled:s.loading||s.warmupInfo.isWarming},l(s.warmupInfo.isWarming?"È†êÁÜ±‰∏≠...":"ÊâãÂãïÈ†êÁÜ±"),9,$g),e[40]||(e[40]=t("div",{class:"update-note"},[t("small",null,"Ë®ª: È†êÁÜ±ÊâÄÊúâËÇ°Á•®ÁöÑÊäÄË°ìÊåáÊ®ôÊï∏Êìö")],-1))])]),t("div",Fg,[t("div",Vg,[e[41]||(e[41]=t("h3",null,"Á∑©Â≠òÁãÄÊÖã",-1)),t("div",Wg,l(n.cacheStatus),1)]),t("div",Bg,[t("div",Hg,[e[42]||(e[42]=t("span",{class:"label"},"ÂÖßÂ≠òÁ∑©Â≠ò:",-1)),t("span",qg,l(s.cacheStats.memoryCache)+" È†Ö",1)]),t("div",Gg,[e[43]||(e[43]=t("span",{class:"label"},"Êú¨Âú∞Â≠òÂÑ≤:",-1)),t("span",jg,l(s.cacheStats.localStorage)+" È†Ö",1)]),t("div",zg,[e[44]||(e[44]=t("span",{class:"label"},"Á∏ΩÂ§ßÂ∞è:",-1)),t("span",Kg,l(s.cacheStats.totalSize)+" È†Ö",1)]),t("div",Qg,[e[45]||(e[45]=t("span",{class:"label"},"‰∏ãÊ¨°Ê∏ÖÁêÜ:",-1)),t("span",Yg,l(n.formatTime((y=s.status.nextUpdates)==null?void 0:y.cacheCleanup)),1)])]),t("div",Xg,[t("button",{onClick:e[5]||(e[5]=f=>n.triggerUpdate("cache")),class:"btn btn-warning btn-sm",disabled:s.loading}," Ê∏ÖÁêÜÁ∑©Â≠ò ",8,Jg)])])]),t("div",Zg,[t("div",em,[e[46]||(e[46]=t("h3",null,"Êõ¥Êñ∞Êó•Ë™å",-1)),t("button",{onClick:e[6]||(e[6]=(...f)=>n.clearLogs&&n.clearLogs(...f)),class:"btn btn-sm btn-outline"},"Ê∏ÖÈô§Êó•Ë™å")]),t("div",tm,[s.logs.length===0?(c(),d("div",sm," Êö´ÁÑ°Êó•Ë™åË®òÈåÑ ")):(c(),d("div",am,[(c(!0),d(U,null,$(s.logs,(f,C)=>(c(),d("div",{key:C,class:p(["log-entry",n.getLogLevelClass(f.level)])},[t("span",nm,l(n.formatTime(f.timestamp)),1),t("span",im,l(f.level),1),t("span",om,l(f.message),1)],2))),128))]))])]),t("div",rm,[t("div",lm,[e[47]||(e[47]=t("h3",null,"ÈÖçÁΩÆË®≠ÂÆö",-1)),t("button",{onClick:e[7]||(e[7]=(...f)=>n.saveConfig&&n.saveConfig(...f)),class:"btn btn-success btn-sm",disabled:!s.configChanged}," ‰øùÂ≠òÈÖçÁΩÆ ",8,cm)]),t("div",dm,[t("div",um,[e[51]||(e[51]=t("h4",null,"ÊäÄË°ìÊåáÊ®ôÊõ¥Êñ∞",-1)),t("div",hm,[t("label",null,[W(t("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=f=>s.config.technicalIndicators.enabled=f),onChange:e[9]||(e[9]=(...f)=>n.onConfigChange&&n.onConfigChange(...f))},null,544),[[ee,s.config.technicalIndicators.enabled]]),e[48]||(e[48]=w(" ÂïüÁî®Ëá™ÂãïÊõ¥Êñ∞ ",-1))])]),t("div",gm,[e[49]||(e[49]=t("label",null,"Êõ¥Êñ∞ÈñìÈöî (Â∞èÊôÇ):",-1)),W(t("input",{type:"number","onUpdate:modelValue":e[10]||(e[10]=f=>s.config.technicalIndicators.intervalHours=f),onChange:e[11]||(e[11]=(...f)=>n.onConfigChange&&n.onConfigChange(...f)),min:"1",max:"24"},null,544),[[de,s.config.technicalIndicators.intervalHours,void 0,{number:!0}]])]),t("div",mm,[t("label",null,[W(t("input",{type:"checkbox","onUpdate:modelValue":e[12]||(e[12]=f=>s.config.technicalIndicators.marketHoursOnly=f),onChange:e[13]||(e[13]=(...f)=>n.onConfigChange&&n.onConfigChange(...f))},null,544),[[ee,s.config.technicalIndicators.marketHoursOnly]]),e[50]||(e[50]=w(" ÂÉÖÂú®Â∏ÇÂ†¥ÊôÇÈñìÊõ¥Êñ∞ ",-1))])])]),t("div",fm,[e[54]||(e[54]=t("h4",null,"ÂÖÉÊï∏ÊìöÊõ¥Êñ∞",-1)),t("div",pm,[t("label",null,[W(t("input",{type:"checkbox","onUpdate:modelValue":e[14]||(e[14]=f=>s.config.metadata.enabled=f),onChange:e[15]||(e[15]=(...f)=>n.onConfigChange&&n.onConfigChange(...f))},null,544),[[ee,s.config.metadata.enabled]]),e[52]||(e[52]=w(" ÂïüÁî®Ëá™ÂãïÊõ¥Êñ∞ ",-1))])]),t("div",vm,[e[53]||(e[53]=t("label",null,"Êõ¥Êñ∞ÈñìÈöî (Â∞èÊôÇ):",-1)),W(t("input",{type:"number","onUpdate:modelValue":e[16]||(e[16]=f=>s.config.metadata.intervalHours=f),onChange:e[17]||(e[17]=(...f)=>n.onConfigChange&&n.onConfigChange(...f)),min:"1",max:"168"},null,544),[[de,s.config.metadata.intervalHours,void 0,{number:!0}]])])])])])])}const wm=O(Vh,[["render",ym],["__scopeId","data-v-df2fe82b"]]),Sm={name:"SystemManager",data(){return{loading:!1,testing:!1,showAdvanced:!1,systemHealth:{overall:85,dataSource:90,performance:80,updates:85},dataSourceStatus:null,status:{isRunning:!1,activeIntervals:[],nextUpdates:{}},startTime:null,performanceScore:85,cacheHitRate:78,preferences:{preferPrecomputed:!0,fallbackToRealtime:!0,technicalIndicatorsInterval:30,metadataInterval:24,enablePerformanceMonitoring:!0,enableCacheWarmup:!0},systemLogs:[],logIdCounter:0}},computed:{schedulerStatus(){return this.status.isRunning?"ÈÅãË°å‰∏≠":"Â∑≤ÂÅúÊ≠¢"},schedulerStatusClass(){return this.status.isRunning?"success":"error"},schedulerButtonClass(){return this.status.isRunning?"btn btn-warning":"btn btn-success"},schedulerButtonText(){return this.status.isRunning?"ÂÅúÊ≠¢Ë™øÂ∫¶Âô®":"ÂïüÂãïË™øÂ∫¶Âô®"},technicalIndicatorsStatus(){return"Ê≠£Â∏∏"},technicalIndicatorsStatusClass(){return"success"},technicalIndicatorsLastUpdate(){return new Date().toISOString()},technicalIndicatorsAge(){return 30*60*1e3},technicalIndicatorsSuccessRate(){return 95},metadataStatus(){return"Ê≠£Â∏∏"},metadataStatusClass(){return"success"},metadataLastUpdate(){return new Date().toISOString()},metadataAge(){return 2*60*60*1e3}},async mounted(){await this.initializeSystem(),this.startStatusUpdates()},methods:{async initializeSystem(){this.addLog("info","Á≥ªÁµ±ÁÆ°ÁêÜÈù¢ÊùøÂàùÂßãÂåñ‰∏≠...");try{await this.refreshAllStatus(),this.addLog("info","Á≥ªÁµ±ÁÆ°ÁêÜÈù¢ÊùøÂàùÂßãÂåñÂÆåÊàê")}catch(i){this.addLog("error",`Á≥ªÁµ±ÂàùÂßãÂåñÂ§±Êïó: ${i.message}`)}},async refreshAllStatus(){this.loading=!0,this.addLog("info","ÈñãÂßãÂÖ®Èù¢ÁãÄÊÖãÂà∑Êñ∞...");try{await this.refreshDataSources(),this.refreshSchedulerStatus(),this.updatePerformanceMetrics(),this.updateSystemHealth(),this.addLog("info","ÂÖ®Èù¢ÁãÄÊÖãÂà∑Êñ∞ÂÆåÊàê")}catch(i){this.addLog("error",`ÁãÄÊÖãÂà∑Êñ∞Â§±Êïó: ${i.message}`)}finally{this.loading=!1}},async refreshDataSources(){try{this.dataSourceStatus=await ce.getDataSourceStatus(),this.addLog("info","Êï∏ÊìöÊ∫êÁãÄÊÖãÂ∑≤Êõ¥Êñ∞")}catch(i){this.addLog("error",`Êï∏ÊìöÊ∫êÁãÄÊÖãÊõ¥Êñ∞Â§±Êïó: ${i.message}`)}},refreshSchedulerStatus(){this.status=J.getStatus(),this.startTime=J.getStartTime(),this.addLog("info","Ë™øÂ∫¶Âô®ÁãÄÊÖãÂ∑≤Êõ¥Êñ∞")},updatePerformanceMetrics(){const i=H.getStats();Q.getAllMetrics(),this.performanceScore=Math.min(100,60+i.totalSize*2),this.cacheHitRate=Math.min(100,50+i.totalSize*3),this.addLog("info","ÊïàËÉΩÊåáÊ®ôÂ∑≤Êõ¥Êñ∞")},updateSystemHealth(){var a,o;const i=(o=(a=this.dataSourceStatus)==null?void 0:a.precomputed)!=null&&o.available?100:70,e=this.status.isRunning?100:50;this.systemHealth={overall:Math.round((i+this.performanceScore+e)/3),dataSource:i,performance:this.performanceScore,updates:e}},async toggleScheduler(){this.loading=!0;try{this.status.isRunning?(J.stop(),this.addLog("info","Ëá™ÂãïÊõ¥Êñ∞Ë™øÂ∫¶Âô®Â∑≤ÂÅúÊ≠¢")):(J.start(),this.addLog("info","Ëá™ÂãïÊõ¥Êñ∞Ë™øÂ∫¶Âô®Â∑≤ÂïüÂãï")),this.refreshSchedulerStatus()}catch(i){this.addLog("error",`Ë™øÂ∫¶Âô®Êìç‰ΩúÂ§±Êïó: ${i.message}`)}finally{this.loading=!1}},async triggerUpdate(i){this.loading=!0,this.addLog("info",`Ëß∏Áôº ${i} Êõ¥Êñ∞...`);try{i==="technicalIndicators"?(H.clear(),this.addLog("info","ÊäÄË°ìÊåáÊ®ôÂø´ÂèñÂ∑≤Ê∏ÖÈô§")):i==="metadata"&&(H.clear(),this.addLog("info","ÂÖÉÊï∏ÊìöÂø´ÂèñÂ∑≤Ê∏ÖÈô§")),await this.refreshDataSources()}catch(e){this.addLog("error",`${i} Êõ¥Êñ∞Â§±Êïó: ${e.message}`)}finally{this.loading=!1}},async clearAllCaches(){if(confirm("Á¢∫ÂÆöË¶ÅÊ∏ÖÈô§ÊâÄÊúâÂø´ÂèñÂóéÔºüÈÄôÂ∞áÂΩ±ÈüøÁ≥ªÁµ±ÊïàËÉΩ„ÄÇ")){this.loading=!0,this.addLog("warning","ÈñãÂßãÊ∏ÖÈô§ÊâÄÊúâÂø´Âèñ...");try{H.clear(),localStorage.clear(),sessionStorage.clear(),this.addLog("info","ÊâÄÊúâÂø´ÂèñÂ∑≤Ê∏ÖÈô§"),await this.refreshAllStatus()}catch(i){this.addLog("error",`Ê∏ÖÈô§Âø´ÂèñÂ§±Êïó: ${i.message}`)}finally{this.loading=!1}}},async testSystemHealth(){this.testing=!0,this.addLog("info","ÈñãÂßãÁ≥ªÁµ±ÂÅ•Â∫∑Ê™¢Êü•...");try{await new Promise(e=>setTimeout(e,2e3));const i=Math.floor(Math.random()*20)+80;this.systemHealth.overall=i,this.addLog("info",`Á≥ªÁµ±ÂÅ•Â∫∑Ê™¢Êü•ÂÆåÊàêÔºåÂæóÂàÜ: ${i}%`)}catch(i){this.addLog("error",`Á≥ªÁµ±ÂÅ•Â∫∑Ê™¢Êü•Â§±Êïó: ${i.message}`)}finally{this.testing=!1}},updatePreferences(){ce.setPreferences({preferPrecomputed:this.preferences.preferPrecomputed,fallbackToRealtime:this.preferences.fallbackToRealtime}),this.addLog("info","Á≥ªÁµ±ÂÅèÂ•ΩË®≠ÂÆöÂ∑≤Êõ¥Êñ∞")},startStatusUpdates(){setInterval(()=>{this.loading||(this.refreshSchedulerStatus(),this.updatePerformanceMetrics(),this.updateSystemHealth())},3e4)},getHealthStatus(i){return i>=90?"ÂÑ™ÁßÄ":i>=80?"ËâØÂ•Ω":i>=70?"‰∏ÄËà¨":"ÈúÄË¶ÅÈóúÊ≥®"},getDataAgeClass(i){const e=i/36e5;return e<1?"fresh":e<6?"stale":"very-stale"},formatTime(i){return i?new Date(i).toLocaleString("zh-TW"):"N/A"},formatDataAge(i){if(!i)return"N/A";const e=Math.floor(i/(1e3*60)),a=Math.floor(e/60),o=Math.floor(a/24);return o>0?`${o} Â§©Ââç`:a>0?`${a} Â∞èÊôÇÂâç`:`${e} ÂàÜÈêòÂâç`},addLog(i,e){this.systemLogs.push({id:++this.logIdCounter,timestamp:new Date().toISOString(),level:i,message:e}),this.systemLogs.length>100&&(this.systemLogs=this.systemLogs.slice(-100))},clearLogs(){this.systemLogs=[],this.logIdCounter=0}}},bm={class:"system-manager"},_m={class:"overview-section"},km={class:"overview-grid"},Cm={class:"card-content"},Tm={class:"health-score"},Dm={class:"health-status"},Am={class:"overview-card"},Im={class:"card-content"},Mm={class:"data-sources"},Nm={class:"overview-card"},xm={class:"card-content"},Lm={class:"update-info"},Pm={class:"overview-card"},Rm={class:"card-content"},Em={class:"performance-score"},Om={class:"performance-info"},Um={class:"details-section"},$m={class:"details-grid"},Fm={class:"detail-card"},Vm={class:"card-header"},Wm=["disabled"],Bm={class:"data-source-list"},Hm={class:"source-header"},qm={key:0,class:"source-details"},Gm={class:"detail-row"},jm={class:"detail-row"},zm={class:"detail-row"},Km={class:"source-item available"},Qm={class:"source-details"},Ym={class:"detail-row"},Xm={class:"detail-row"},Jm={class:"detail-row"},Zm={class:"detail-card"},ef={class:"card-header"},tf=["disabled"],sf={class:"update-details"},af={class:"update-item"},nf={class:"update-header"},of={class:"update-info"},rf={class:"detail-row"},lf={class:"detail-row"},cf={class:"detail-row"},df={class:"update-actions"},uf=["disabled"],hf={class:"update-item"},gf={class:"update-header"},mf={class:"update-info"},ff={class:"detail-row"},pf={class:"detail-row"},vf={class:"update-actions"},yf=["disabled"],wf={class:"control-section"},Sf={class:"control-grid"},bf=["disabled"],_f=["disabled"],kf={key:0,class:"advanced-section"},Cf={class:"settings-grid"},Tf={class:"setting-group"},Df={class:"setting-item"},Af={class:"setting-item"},If={class:"setting-group"},Mf={class:"setting-item"},Nf={class:"setting-item"},xf={class:"setting-group"},Lf={class:"setting-item"},Pf={class:"setting-item"},Rf={class:"logs-section"},Ef={class:"logs-header"},Of={class:"logs-container"},Uf={class:"log-time"},$f={class:"log-level"},Ff={class:"log-message"},Vf={key:0,class:"no-logs"};function Wf(i,e,a,o,s,n){var r,u,h,g,y,f,C,D,T,A,_,N,v,x,V,S,M,R;return c(),d("div",bm,[e[66]||(e[66]=t("div",{class:"manager-header"},[t("h2",null,"Control Panel"),t("p",null,"Áõ£ÊéßÂíåÁÆ°ÁêÜÊäïË≥áÂÑÄË°®ÊùøÁöÑÂêÑÈ†ÖÁ≥ªÁµ±ÂäüËÉΩ")],-1)),t("div",_m,[t("div",km,[t("div",{class:p(["overview-card",{healthy:s.systemHealth.overall>=80}])},[e[22]||(e[22]=t("div",{class:"card-icon"},"üéØ",-1)),t("div",Cm,[e[21]||(e[21]=t("h3",null,"Á≥ªÁµ±ÂÅ•Â∫∑Â∫¶",-1)),t("div",Tm,l(s.systemHealth.overall)+"%",1),t("div",Dm,l(n.getHealthStatus(s.systemHealth.overall)),1)])],2),t("div",Am,[e[26]||(e[26]=t("div",{class:"card-icon"},"üìä",-1)),t("div",Im,[e[25]||(e[25]=t("h3",null,"Êï∏ÊìöÊ∫êÁãÄÊÖã",-1)),t("div",Mm,[t("span",{class:p(["source-item",{active:(u=(r=s.dataSourceStatus)==null?void 0:r.precomputed)==null?void 0:u.available}])}," È†êË®àÁÆó "+l((g=(h=s.dataSourceStatus)==null?void 0:h.precomputed)!=null&&g.available?"‚úÖ":"‚ùå"),3),e[23]||(e[23]=t("span",{class:"source-item active"},"Âø´Âèñ ‚úÖ",-1)),e[24]||(e[24]=t("span",{class:"source-item active"},"ÂØ¶ÊôÇ ‚úÖ",-1))])])]),t("div",Nm,[e[28]||(e[28]=t("div",{class:"card-icon"},"üîÑ",-1)),t("div",xm,[e[27]||(e[27]=t("h3",null,"Ëá™ÂãïÊõ¥Êñ∞",-1)),t("div",{class:p(["update-status",n.schedulerStatusClass])},l(s.status.isRunning?"ÈÅãË°å‰∏≠":"Â∑≤ÂÅúÊ≠¢"),3),t("div",Lm," Ê¥ªÂãï‰ªªÂãô: "+l(((y=s.status.activeIntervals)==null?void 0:y.length)||0)+" ÂÄã ",1)])]),t("div",Pm,[e[30]||(e[30]=t("div",{class:"card-icon"},"‚ö°",-1)),t("div",Rm,[e[29]||(e[29]=t("h3",null,"ÊïàËÉΩÁãÄÊÖã",-1)),t("div",Em,l(s.performanceScore)+"%",1),t("div",Om," Âø´ÂèñÂëΩ‰∏≠Áéá: "+l(s.cacheHitRate)+"% ",1)])])])]),t("div",Um,[t("div",$m,[t("div",Fm,[t("div",Vm,[e[31]||(e[31]=t("h3",null,"üìä Êï∏ÊìöÊ∫êÁÆ°ÁêÜ",-1)),t("button",{onClick:e[0]||(e[0]=(...m)=>n.refreshDataSources&&n.refreshDataSources(...m)),class:"btn btn-sm",disabled:s.loading},l((s.loading,"üîÑ"))+" Âà∑Êñ∞ ",9,Wm)]),t("div",Bm,[t("div",{class:p(["source-item",{available:(C=(f=s.dataSourceStatus)==null?void 0:f.precomputed)==null?void 0:C.available}])},[t("div",Hm,[e[32]||(e[32]=t("h4",null,"È†êË®àÁÆóÊï∏Êìö",-1)),t("span",{class:p(["status-badge",(T=(D=s.dataSourceStatus)==null?void 0:D.precomputed)!=null&&T.available?"success":"error"])},l((_=(A=s.dataSourceStatus)==null?void 0:A.precomputed)!=null&&_.available?"ÂèØÁî®":"‰∏çÂèØÁî®"),3)]),(v=(N=s.dataSourceStatus)==null?void 0:N.precomputed)!=null&&v.available?(c(),d("div",qm,[t("div",Gm,[e[33]||(e[33]=t("span",null,"ËÇ°Á•®Êï∏Èáè:",-1)),t("span",null,l(((x=s.dataSourceStatus.precomputed.symbols)==null?void 0:x.length)||0),1)]),t("div",jm,[e[34]||(e[34]=t("span",null,"ÊàêÂäü/Â§±Êïó:",-1)),t("span",null,l(s.dataSourceStatus.precomputed.successful||0)+"/"+l(s.dataSourceStatus.precomputed.failed||0),1)]),t("div",zm,[e[35]||(e[35]=t("span",null,"ÊúÄÂæåÊõ¥Êñ∞:",-1)),t("span",null,l(n.formatTime(s.dataSourceStatus.precomputed.lastUpdate)),1)])])):b("",!0)],2),t("div",Km,[e[39]||(e[39]=t("div",{class:"source-header"},[t("h4",null,"Âø´ÂèñÁ≥ªÁµ±"),t("span",{class:"status-badge success"},"Ê≠£Â∏∏")],-1)),t("div",Qm,[t("div",Ym,[e[36]||(e[36]=t("span",null,"ÂÖßÂ≠òÂø´Âèñ:",-1)),t("span",null,l(((S=(V=s.dataSourceStatus)==null?void 0:V.cache)==null?void 0:S.memoryCache)||0)+" È†ÖÁõÆ",1)]),t("div",Xm,[e[37]||(e[37]=t("span",null,"Êú¨Âú∞Â≠òÂÑ≤:",-1)),t("span",null,l(((R=(M=s.dataSourceStatus)==null?void 0:M.cache)==null?void 0:R.localStorageCache)||0)+" È†ÖÁõÆ",1)]),t("div",Jm,[e[38]||(e[38]=t("span",null,"ÂëΩ‰∏≠Áéá:",-1)),t("span",null,l(s.cacheHitRate)+"%",1)])])])])]),t("div",Zm,[t("div",ef,[e[40]||(e[40]=t("h3",null,"üîÑ Ëá™ÂãïÊõ¥Êñ∞ÁÆ°ÁêÜ",-1)),t("button",{onClick:e[1]||(e[1]=(...m)=>n.toggleScheduler&&n.toggleScheduler(...m)),class:p(n.schedulerButtonClass),disabled:s.loading},l(n.schedulerButtonText),11,tf)]),t("div",sf,[t("div",af,[t("div",nf,[e[41]||(e[41]=t("h4",null,"ÊäÄË°ìÊåáÊ®ô",-1)),t("div",{class:p(["status-indicator",n.technicalIndicatorsStatusClass])},l(n.technicalIndicatorsStatus),3)]),t("div",of,[t("div",rf,[e[42]||(e[42]=t("span",null,"ÊúÄÂæåÊõ¥Êñ∞:",-1)),t("span",null,l(n.formatTime(n.technicalIndicatorsLastUpdate)),1)]),t("div",lf,[e[43]||(e[43]=t("span",null,"Êï∏ÊìöÂπ¥ÈΩ°:",-1)),t("span",{class:p(n.getDataAgeClass(n.technicalIndicatorsAge))},l(n.formatDataAge(n.technicalIndicatorsAge)),3)]),t("div",cf,[e[44]||(e[44]=t("span",null,"ÊàêÂäüÁéá:",-1)),t("span",null,l(n.technicalIndicatorsSuccessRate)+"%",1)])]),t("div",df,[t("button",{onClick:e[2]||(e[2]=m=>n.triggerUpdate("technicalIndicators")),class:"btn btn-sm btn-primary",disabled:s.loading}," Ê∏ÖÈô§Âø´Âèñ ",8,uf)])]),t("div",hf,[t("div",gf,[e[45]||(e[45]=t("h4",null,"ÂÖÉÊï∏Êìö",-1)),t("div",{class:p(["status-indicator",n.metadataStatusClass])},l(n.metadataStatus),3)]),t("div",mf,[t("div",ff,[e[46]||(e[46]=t("span",null,"ÊúÄÂæåÊõ¥Êñ∞:",-1)),t("span",null,l(n.formatTime(n.metadataLastUpdate)),1)]),t("div",pf,[e[47]||(e[47]=t("span",null,"Êï∏ÊìöÂπ¥ÈΩ°:",-1)),t("span",{class:p(n.getDataAgeClass(n.metadataAge))},l(n.formatDataAge(n.metadataAge)),3)])]),t("div",vf,[t("button",{onClick:e[3]||(e[3]=m=>n.triggerUpdate("metadata")),class:"btn btn-sm btn-primary",disabled:s.loading}," Ê∏ÖÈô§Âø´Âèñ ",8,yf)])])])])])]),t("div",wf,[e[52]||(e[52]=t("div",{class:"control-header"},[t("h3",null,"üéõÔ∏è Á≥ªÁµ±ÊéßÂà∂")],-1)),t("div",Sf,[t("button",{onClick:e[4]||(e[4]=(...m)=>n.refreshAllStatus&&n.refreshAllStatus(...m)),class:"control-btn primary",disabled:s.loading},[e[48]||(e[48]=t("span",{class:"btn-icon"},"üîÑ",-1)),w(" "+l(s.loading?"Âà∑Êñ∞‰∏≠...":"ÂÖ®Èù¢Âà∑Êñ∞"),1)],8,bf),t("button",{onClick:e[5]||(e[5]=(...m)=>n.clearAllCaches&&n.clearAllCaches(...m)),class:"control-btn warning"},[...e[49]||(e[49]=[t("span",{class:"btn-icon"},"üóëÔ∏è",-1),w(" Ê∏ÖÈô§ÊâÄÊúâÂø´Âèñ ",-1)])]),t("button",{onClick:e[6]||(e[6]=(...m)=>n.testSystemHealth&&n.testSystemHealth(...m)),class:"control-btn info",disabled:s.testing},[e[50]||(e[50]=t("span",{class:"btn-icon"},"üîç",-1)),w(" "+l(s.testing?"Ê∏¨Ë©¶‰∏≠...":"Á≥ªÁµ±ÂÅ•Ê™¢"),1)],8,_f),t("button",{onClick:e[7]||(e[7]=m=>s.showAdvanced=!s.showAdvanced),class:"control-btn secondary"},[e[51]||(e[51]=t("span",{class:"btn-icon"},"‚öôÔ∏è",-1)),w(" "+l(s.showAdvanced?"Èö±ËóèÈÄ≤Èöé":"ÈÄ≤ÈöéË®≠ÂÆö"),1)])])]),s.showAdvanced?(c(),d("div",kf,[e[64]||(e[64]=t("div",{class:"advanced-header"},[t("h3",null,"‚öôÔ∏è ÈÄ≤ÈöéË®≠ÂÆö")],-1)),t("div",Cf,[t("div",Tf,[e[55]||(e[55]=t("h4",null,"Êï∏ÊìöÊ∫êÂÅèÂ•Ω",-1)),t("div",Df,[t("label",null,[W(t("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=m=>s.preferences.preferPrecomputed=m),onChange:e[9]||(e[9]=(...m)=>n.updatePreferences&&n.updatePreferences(...m))},null,544),[[ee,s.preferences.preferPrecomputed]]),e[53]||(e[53]=w(" ÂÑ™ÂÖà‰ΩøÁî®È†êË®àÁÆóÊï∏Êìö ",-1))])]),t("div",Af,[t("label",null,[W(t("input",{type:"checkbox","onUpdate:modelValue":e[10]||(e[10]=m=>s.preferences.fallbackToRealtime=m),onChange:e[11]||(e[11]=(...m)=>n.updatePreferences&&n.updatePreferences(...m))},null,544),[[ee,s.preferences.fallbackToRealtime]]),e[54]||(e[54]=w(" ÂÖÅË®±ÂõûÈÄÄÂà∞ÂØ¶ÊôÇË®àÁÆó ",-1))])])]),t("div",If,[e[60]||(e[60]=t("h4",null,"Êõ¥Êñ∞È†ªÁéá",-1)),t("div",Mf,[e[57]||(e[57]=t("label",null,"ÊäÄË°ìÊåáÊ®ôÊõ¥Êñ∞ÈñìÈöî (ÂàÜÈêò):",-1)),W(t("select",{"onUpdate:modelValue":e[12]||(e[12]=m=>s.preferences.technicalIndicatorsInterval=m),onChange:e[13]||(e[13]=(...m)=>n.updatePreferences&&n.updatePreferences(...m))},[...e[56]||(e[56]=[t("option",{value:"5"},"5 ÂàÜÈêò",-1),t("option",{value:"15"},"15 ÂàÜÈêò",-1),t("option",{value:"30"},"30 ÂàÜÈêò",-1),t("option",{value:"60"},"1 Â∞èÊôÇ",-1)])],544),[[Vt,s.preferences.technicalIndicatorsInterval]])]),t("div",Nf,[e[59]||(e[59]=t("label",null,"ÂÖÉÊï∏ÊìöÊõ¥Êñ∞ÈñìÈöî (Â∞èÊôÇ):",-1)),W(t("select",{"onUpdate:modelValue":e[14]||(e[14]=m=>s.preferences.metadataInterval=m),onChange:e[15]||(e[15]=(...m)=>n.updatePreferences&&n.updatePreferences(...m))},[...e[58]||(e[58]=[t("option",{value:"6"},"6 Â∞èÊôÇ",-1),t("option",{value:"12"},"12 Â∞èÊôÇ",-1),t("option",{value:"24"},"24 Â∞èÊôÇ",-1),t("option",{value:"168"},"1 ÈÄ±",-1)])],544),[[Vt,s.preferences.metadataInterval]])])]),t("div",xf,[e[63]||(e[63]=t("h4",null,"ÊïàËÉΩË®≠ÂÆö",-1)),t("div",Lf,[t("label",null,[W(t("input",{type:"checkbox","onUpdate:modelValue":e[16]||(e[16]=m=>s.preferences.enablePerformanceMonitoring=m),onChange:e[17]||(e[17]=(...m)=>n.updatePreferences&&n.updatePreferences(...m))},null,544),[[ee,s.preferences.enablePerformanceMonitoring]]),e[61]||(e[61]=w(" ÂïüÁî®ÊïàËÉΩÁõ£Êéß ",-1))])]),t("div",Pf,[t("label",null,[W(t("input",{type:"checkbox","onUpdate:modelValue":e[18]||(e[18]=m=>s.preferences.enableCacheWarmup=m),onChange:e[19]||(e[19]=(...m)=>n.updatePreferences&&n.updatePreferences(...m))},null,544),[[ee,s.preferences.enableCacheWarmup]]),e[62]||(e[62]=w(" ÂïüÁî®Âø´ÂèñÈ†êÁÜ± ",-1))])])])])])):b("",!0),t("div",Rf,[t("div",Ef,[e[65]||(e[65]=t("h3",null,"üìã Á≥ªÁµ±Êó•Ë™å",-1)),t("button",{onClick:e[20]||(e[20]=(...m)=>n.clearLogs&&n.clearLogs(...m)),class:"btn btn-sm"},"Ê∏ÖÈô§Êó•Ë™å")]),t("div",Of,[(c(!0),d(U,null,$(s.systemLogs.slice(-10),m=>(c(),d("div",{key:m.id,class:p(["log-entry",m.level])},[t("span",Uf,l(n.formatTime(m.timestamp)),1),t("span",$f,l(m.level.toUpperCase()),1),t("span",Ff,l(m.message),1)],2))),128)),s.systemLogs.length===0?(c(),d("div",Vf," Êö´ÁÑ°Á≥ªÁµ±Êó•Ë™å ")):b("",!0)])])])}const Bf=O(Sm,[["render",Wf],["__scopeId","data-v-729e0df5"]]),Hf=[{path:"/",redirect:"/market-overview"},{path:"/market-overview",component:_n,name:"market-overview"},{path:"/stock-overview",component:zo,name:"stock-overview"},{path:"/stock-overview/symbols/:symbol",component:Cl,name:"stock-detail"},{path:"/market-dashboard",redirect:"/market-overview"},{path:"/stock-dashboard",redirect:"/stock-overview"},{path:"/stock-dashboard/symbols/:symbol",redirect:i=>`/stock-overview/symbols/${i.params.symbol}`},{path:"/settings",component:Xo,name:"settings"},{path:"/top-stories-test",component:Kl,name:"top-stories-test"},{path:"/stock-market-insight-test",component:Tc,name:"stock-market-insight-test"},{path:"/yahoo-finance-test",component:Id,name:"yahoo-finance-test"},{path:"/proxy-diagnostic",component:lh,name:"proxy-diagnostic"},{path:"/technical-validation",component:Qd,name:"technical-validation"},{path:"/metadata-test",component:Nu,name:"metadata-test"},{path:"/technical-manager",component:Fh,name:"technical-manager"},{path:"/auto-update-monitor",component:wm,name:"auto-update-monitor"},{path:"/system-manager",component:Bf,name:"system-manager"},{path:"/:pathMatch(.*)*",redirect:"/market-overview"}],qf=Zt({history:es(),routes:Hf}),Kt=ts(vs);Kt.use(qf);Kt.mount("#app");setTimeout(()=>{console.log("üöÄ Initializing auto-update scheduler..."),J.start()},1e4);setTimeout(()=>{console.log("üî• Initializing cache warmup service..."),dt.start()},5e3);
//# sourceMappingURL=index-CclIx4h-.js.map
