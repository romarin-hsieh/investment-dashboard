{"version":3,"file":"index-BPFCfn-l.js","sources":["../../src/components/Layout.vue","../../src/App.vue","../../src/utils/widgetPreloader.js","../../src/utils/performanceMonitor.js","../../src/utils/performanceCache.js","../../src/utils/autoUpdateScheduler.js","../../src/utils/precomputedIndicatorsApi.js","../../src/utils/technicalIndicatorsCache.js","../../src/utils/technicalIndicatorsCore.js","../../src/utils/yahooFinanceApi.js","../../src/utils/hybridTechnicalIndicatorsApi.js","../../src/utils/cacheWarmupService.js","../../src/utils/widgetLoadManager.js","../../src/components/LazyTradingViewWidget.vue","../../src/components/VixWidget.vue","../../src/components/ZeiiermanFearGreedGauge.vue","../../src/components/MarketOverviewSkeleton.vue","../../src/pages/MarketDashboard.vue","../../src/utils/stocksConfigService.js","../../src/utils/widgetCache.js","../../src/components/FastTradingViewWidget.vue","../../src/components/TechnicalAnalysisWidget.vue","../../src/components/TechnicalIndicators.vue","../../src/components/StockCard.vue","../../src/components/TOCTree.vue","../../src/components/NavigationPanel.vue","../../src/services/NavigationService.js","../../src/services/ScrollSpyService.js","../../src/components/StockOverview.vue","../../src/components/PerformanceMonitor.vue","../../src/pages/StockDashboard.vue","../../src/pages/Settings.vue","../../src/components/MarketRegimeWidget.vue","../../src/components/TradingStrategyWidget.vue","../../src/components/TradingViewCompanyProfile.vue","../../src/components/TradingViewFundamentalData.vue","../../src/components/StockNews.vue","../../src/components/StockDetailSkeleton.vue","../../src/utils/validation.ts","../../src/utils/state-manager.ts","../../src/lib/fetcher.ts","../../src/utils/dynamicMetadataService.js","../../src/utils/metadataService.js","../../src/utils/directMetadataLoader.js","../../src/pages/StockDetail.vue","../../src/components/TradingViewTopStories.vue","../../src/components/TopStoriesSkeleton.vue","../../src/pages/TopStoriesTest.vue","../../src/components/StockMarketInsight.vue","../../src/components/StockMarketInsightSkeleton.vue","../../src/pages/StockMarketInsightTest.vue","../../src/pages/YahooFinanceTest.vue","../../src/pages/TechnicalIndicatorsValidation.vue","../../src/pages/MetadataServiceTest.vue","../../src/pages/ProxyDiagnosticTest.vue","../../src/pages/TechnicalIndicatorsManager.vue","../../src/pages/AutoUpdateMonitor.vue","../../src/pages/SystemManager.vue","../../src/main.js"],"sourcesContent":["<template>\n  <div class=\"layout\">\n    <header class=\"header\">\n      <nav class=\"nav\">\n        <div class=\"container\">\n          <div class=\"nav-brand\">\n            <h1>Investment Dashboard</h1>\n          </div>\n          <ul class=\"nav-list\">\n            <li>\n              <router-link to=\"/market-overview\" class=\"nav-link\">Market Overview</router-link>\n            </li>\n            <li>\n              <router-link to=\"/stock-overview\" class=\"nav-link\">Stock Overview</router-link>\n            </li>\n            <!-- Settings temporarily hidden -->\n            <!-- <li>\n              <router-link to=\"/settings\" class=\"nav-link\">Settings</router-link>\n            </li> -->\n            <li>\n              <router-link to=\"/system-manager\" class=\"nav-link\">Control Panel</router-link>\n            </li>\n          </ul>\n        </div>\n      </nav>\n    </header>\n\n    <main class=\"main-content\">\n      <div class=\"container\">\n        <slot />\n      </div>\n    </main>\n\n    <footer class=\"footer\">\n      <div class=\"container\">\n        <div class=\"footer-content\">\n          <span class=\"copyright\">&copy; 2025 Investment Dashboard POC</span>\n          <span class=\"separator\">â€¢</span>\n          <span class=\"attribution\">\n            Market data powered by \n            <a href=\"https://www.tradingview.com/\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"tradingview-link\">\n              TradingView\n            </a>\n          </span>\n        </div>\n      </div>\n    </footer>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Layout'\n}\n</script>\n\n<style scoped>\n.layout {\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n}\n\n.header {\n  flex-shrink: 0;\n  position: sticky;\n  top: 0;\n  z-index: 1000;\n  background: white;\n  border-bottom: 1px solid #e9ecef;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n.nav-brand h1 {\n  color: #007bff;\n  font-size: 1.5rem;\n  margin-bottom: 0;\n}\n\n.nav .container {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.main-content {\n  flex: 1;\n  padding-top: 1rem;\n}\n\n.footer {\n  flex-shrink: 0;\n  background: #f8f9fa;\n  padding: 0.75rem 0;\n  margin-top: 2rem;\n  border-top: 1px solid #e9ecef;\n}\n\n.footer-content {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 0.75rem;\n  font-size: 0.875rem;\n  color: #6c757d;\n}\n\n.copyright {\n  font-weight: 500;\n}\n\n.separator {\n  color: #dee2e6;\n  font-weight: bold;\n}\n\n.attribution {\n  color: #6c757d;\n}\n\n.tradingview-link {\n  color: #007bff;\n  text-decoration: none;\n  font-weight: 500;\n  transition: color 0.2s ease;\n}\n\n.tradingview-link:hover {\n  color: #0056b3;\n  text-decoration: underline;\n}\n\n/* éŸ¿æ‡‰å¼è¨­è¨ˆ */\n@media (max-width: 768px) {\n  .footer-content {\n    flex-direction: column;\n    gap: 0.25rem;\n    text-align: center;\n  }\n  \n  .separator {\n    display: none;\n  }\n}\n\n/* Navigation styling */\n.nav-list {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  list-style: none;\n  margin: 0;\n  padding: 0;\n  gap: 1rem;\n}\n\n.nav-list li {\n  display: flex;\n  align-items: center;\n}\n\n.nav-link {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0.5rem 1rem;\n  text-decoration: none;\n  color: #495057;\n  font-weight: 500;\n  border-radius: 6px;\n  transition: all 0.2s;\n}\n\n.nav-link:hover {\n  background-color: #e9ecef;\n  color: #007bff;\n}\n\n.nav-link.router-link-active {\n  background-color: #007bff;\n  color: white;\n}\n</style>\n","<template>\n  <div id=\"app\">\n    <Layout>\n      <router-view />\n    </Layout>\n  </div>\n</template>\n\n<script>\nimport Layout from './components/Layout.vue'\n\nexport default {\n  name: 'App',\n  components: {\n    Layout\n  }\n}\n</script>\n","/**\r\n * TradingView Widget é è¼‰å…¥ç³»çµ±\r\n * æå‰è¼‰å…¥ TradingView è…³æœ¬ä»¥æå‡æ€§èƒ½\r\n */\r\n\r\nclass WidgetPreloader {\r\n  constructor() {\r\n    this.preloadedScripts = new Set()\r\n    this.scriptPromises = new Map()\r\n  }\r\n\r\n  /**\r\n   * é è¼‰å…¥ TradingView è…³æœ¬\r\n   */\r\n  preloadScript(scriptUrl) {\r\n    if (this.preloadedScripts.has(scriptUrl)) {\r\n      return Promise.resolve()\r\n    }\r\n\r\n    if (this.scriptPromises.has(scriptUrl)) {\r\n      return this.scriptPromises.get(scriptUrl)\r\n    }\r\n\r\n    const promise = new Promise((resolve, reject) => {\r\n      const link = document.createElement('link')\r\n      link.rel = 'preload'\r\n      link.as = 'script'\r\n      link.href = scriptUrl\r\n      link.crossOrigin = 'anonymous'\r\n      \r\n      link.onload = () => {\r\n        this.preloadedScripts.add(scriptUrl)\r\n        resolve()\r\n      }\r\n      \r\n      link.onerror = () => {\r\n        reject(new Error(`Failed to preload script: ${scriptUrl}`))\r\n      }\r\n      \r\n      document.head.appendChild(link)\r\n    })\r\n\r\n    this.scriptPromises.set(scriptUrl, promise)\r\n    return promise\r\n  }\r\n\r\n  /**\r\n   * é è¼‰å…¥æ‰€æœ‰å¸¸ç”¨çš„ TradingView è…³æœ¬\r\n   */\r\n  async preloadAllScripts() {\r\n    const scripts = [\r\n      'https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js',\r\n      'https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js'\r\n    ]\r\n\r\n    try {\r\n      await Promise.all(scripts.map(script => this.preloadScript(script)))\r\n      console.log('All TradingView scripts preloaded successfully')\r\n    } catch (error) {\r\n      console.warn('Some TradingView scripts failed to preload:', error)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * æª¢æŸ¥è…³æœ¬æ˜¯å¦å·²é è¼‰å…¥\r\n   */\r\n  isPreloaded(scriptUrl) {\r\n    return this.preloadedScripts.has(scriptUrl)\r\n  }\r\n}\r\n\r\n// å–®ä¾‹æ¨¡å¼\r\nexport const widgetPreloader = new WidgetPreloader()\r\n\r\n// é é¢è¼‰å…¥æ™‚è‡ªå‹•é è¼‰å…¥è…³æœ¬\r\nif (typeof window !== 'undefined') {\r\n  window.addEventListener('load', () => {\r\n    // å»¶é² 1 ç§’å¾Œé–‹å§‹é è¼‰å…¥ï¼Œé¿å…å½±éŸ¿åˆå§‹é é¢è¼‰å…¥\r\n    setTimeout(() => {\r\n      widgetPreloader.preloadAllScripts()\r\n    }, 1000)\r\n  })\r\n}\r\n\r\nexport default widgetPreloader","// æ€§èƒ½ç›£æ§å·¥å…·\r\n// ç”¨æ–¼è¿½è¹¤é é¢è¼‰å…¥æ™‚é–“å’Œ API èª¿ç”¨æ€§èƒ½\r\n\r\nclass PerformanceMonitor {\r\n  constructor() {\r\n    this.metrics = new Map()\r\n    this.startTimes = new Map()\r\n  }\r\n\r\n  // é–‹å§‹è¨ˆæ™‚\r\n  start(label) {\r\n    this.startTimes.set(label, performance.now())\r\n    console.log(`â±ï¸ Started timing: ${label}`)\r\n  }\r\n\r\n  // çµæŸè¨ˆæ™‚ä¸¦è¨˜éŒ„\r\n  end(label) {\r\n    const startTime = this.startTimes.get(label)\r\n    if (!startTime) {\r\n      console.warn(`No start time found for: ${label}`)\r\n      return null\r\n    }\r\n\r\n    const duration = performance.now() - startTime\r\n    this.metrics.set(label, duration)\r\n    this.startTimes.delete(label)\r\n\r\n    console.log(`âœ… Completed: ${label} - ${duration.toFixed(2)}ms`)\r\n    return duration\r\n  }\r\n\r\n  // ç²å–æŒ‡æ¨™\r\n  getMetric(label) {\r\n    return this.metrics.get(label)\r\n  }\r\n\r\n  // ç²å–æ‰€æœ‰æŒ‡æ¨™\r\n  getAllMetrics() {\r\n    return Object.fromEntries(this.metrics)\r\n  }\r\n\r\n  // æ¸…é™¤æŒ‡æ¨™\r\n  clear() {\r\n    this.metrics.clear()\r\n    this.startTimes.clear()\r\n  }\r\n\r\n  // è¨˜éŒ„ API èª¿ç”¨\r\n  async measureAsync(label, asyncFunction) {\r\n    this.start(label)\r\n    try {\r\n      const result = await asyncFunction()\r\n      this.end(label)\r\n      return result\r\n    } catch (error) {\r\n      this.end(label)\r\n      console.error(`âŒ Error in ${label}:`, error)\r\n      throw error\r\n    }\r\n  }\r\n\r\n  // ç”Ÿæˆæ€§èƒ½å ±å‘Š\r\n  generateReport() {\r\n    const metrics = this.getAllMetrics()\r\n    const report = {\r\n      timestamp: new Date().toISOString(),\r\n      metrics,\r\n      summary: {\r\n        totalOperations: Object.keys(metrics).length,\r\n        totalTime: Object.values(metrics).reduce((sum, time) => sum + time, 0),\r\n        averageTime: Object.values(metrics).reduce((sum, time) => sum + time, 0) / Object.keys(metrics).length || 0,\r\n        slowestOperation: this.getSlowestOperation(),\r\n        fastestOperation: this.getFastestOperation()\r\n      }\r\n    }\r\n\r\n    console.log('ğŸ“Š Performance Report:', report)\r\n    return report\r\n  }\r\n\r\n  // ç²å–æœ€æ…¢çš„æ“ä½œ\r\n  getSlowestOperation() {\r\n    let slowest = { name: null, time: 0 }\r\n    for (const [name, time] of this.metrics) {\r\n      if (time > slowest.time) {\r\n        slowest = { name, time }\r\n      }\r\n    }\r\n    return slowest\r\n  }\r\n\r\n  // ç²å–æœ€å¿«çš„æ“ä½œ\r\n  getFastestOperation() {\r\n    let fastest = { name: null, time: Infinity }\r\n    for (const [name, time] of this.metrics) {\r\n      if (time < fastest.time) {\r\n        fastest = { name, time }\r\n      }\r\n    }\r\n    return fastest.time === Infinity ? { name: null, time: 0 } : fastest\r\n  }\r\n\r\n  // æª¢æŸ¥æ€§èƒ½è­¦å‘Š\r\n  checkPerformanceWarnings() {\r\n    const warnings = []\r\n    const metrics = this.getAllMetrics()\r\n\r\n    // æª¢æŸ¥è¼‰å…¥æ™‚é–“éé•·çš„æ“ä½œ\r\n    Object.entries(metrics).forEach(([name, time]) => {\r\n      if (time > 5000) { // 5 seconds\r\n        warnings.push({\r\n          type: 'SLOW_OPERATION',\r\n          operation: name,\r\n          time: time,\r\n          message: `Operation \"${name}\" took ${time.toFixed(2)}ms (>5s)`\r\n        })\r\n      }\r\n    })\r\n\r\n    // æª¢æŸ¥ç¸½è¼‰å…¥æ™‚é–“\r\n    const totalTime = Object.values(metrics).reduce((sum, time) => sum + time, 0)\r\n    if (totalTime > 10000) { // 10 seconds\r\n      warnings.push({\r\n        type: 'SLOW_TOTAL_LOAD',\r\n        time: totalTime,\r\n        message: `Total load time ${totalTime.toFixed(2)}ms (>10s)`\r\n      })\r\n    }\r\n\r\n    if (warnings.length > 0) {\r\n      console.warn('âš ï¸ Performance Warnings:', warnings)\r\n    }\r\n\r\n    return warnings\r\n  }\r\n}\r\n\r\n// å‰µå»ºå…¨å±€å¯¦ä¾‹\r\nexport const performanceMonitor = new PerformanceMonitor()\r\n\r\n// å¸¸ç”¨çš„æ€§èƒ½æ¨™ç±¤\r\nexport const PERFORMANCE_LABELS = {\r\n  STOCK_OVERVIEW_LOAD: 'stock_overview_total_load',\r\n  QUOTES_FETCH: 'quotes_fetch',\r\n  DAILY_DATA_FETCH: 'daily_data_fetch',\r\n  METADATA_FETCH: 'metadata_fetch',\r\n  SYMBOLS_CONFIG_LOAD: 'symbols_config_load',\r\n  SKELETON_DISPLAY: 'skeleton_display_time',\r\n  FIRST_CONTENT_PAINT: 'first_content_paint',\r\n  MARKET_DASHBOARD_LOAD: 'market_dashboard_load',\r\n  STOCK_DETAIL_LOAD: 'stock_detail_load'\r\n}\r\n\r\n// è‡ªå‹•æ€§èƒ½ç›£æ§è£é£¾å™¨\r\nexport function withPerformanceMonitoring(label) {\r\n  return function(target, propertyName, descriptor) {\r\n    const method = descriptor.value\r\n    descriptor.value = async function(...args) {\r\n      return await performanceMonitor.measureAsync(label, () => method.apply(this, args))\r\n    }\r\n    return descriptor\r\n  }\r\n}","// æ€§èƒ½å„ªåŒ–ç·©å­˜æœå‹™\r\n// æä¾›å¤šå±¤ç·©å­˜å’Œé è¼‰å…¥åŠŸèƒ½\r\n\r\nclass PerformanceCache {\r\n  constructor() {\r\n    this.memoryCache = new Map()\r\n    this.localStoragePrefix = 'investment_dashboard_cache_'\r\n    this.defaultTTL = 24 * 60 * 60 * 1000 // 24 hours\r\n  }\r\n\r\n  // è¨­ç½®ç·©å­˜é …\r\n  set(key, data, ttl = this.defaultTTL) {\r\n    const cacheItem = {\r\n      data,\r\n      timestamp: Date.now(),\r\n      ttl\r\n    }\r\n\r\n    // å…§å­˜ç·©å­˜\r\n    this.memoryCache.set(key, cacheItem)\r\n\r\n    // æœ¬åœ°å­˜å„²ç·©å­˜ï¼ˆç”¨æ–¼è·¨æœƒè©±æŒä¹…åŒ–ï¼‰\r\n    try {\r\n      localStorage.setItem(\r\n        this.localStoragePrefix + key,\r\n        JSON.stringify(cacheItem)\r\n      )\r\n    } catch (error) {\r\n      console.warn('Failed to save to localStorage:', error)\r\n    }\r\n  }\r\n\r\n  // ç²å–ç·©å­˜é …\r\n  get(key) {\r\n    // é¦–å…ˆæª¢æŸ¥å…§å­˜ç·©å­˜\r\n    if (this.memoryCache.has(key)) {\r\n      const item = this.memoryCache.get(key)\r\n      if (this.isValid(item)) {\r\n        return item.data\r\n      } else {\r\n        this.memoryCache.delete(key)\r\n      }\r\n    }\r\n\r\n    // æª¢æŸ¥æœ¬åœ°å­˜å„²ç·©å­˜\r\n    try {\r\n      const stored = localStorage.getItem(this.localStoragePrefix + key)\r\n      if (stored) {\r\n        const item = JSON.parse(stored)\r\n        if (this.isValid(item)) {\r\n          // æ¢å¾©åˆ°å…§å­˜ç·©å­˜\r\n          this.memoryCache.set(key, item)\r\n          return item.data\r\n        } else {\r\n          localStorage.removeItem(this.localStoragePrefix + key)\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.warn('Failed to read from localStorage:', error)\r\n    }\r\n\r\n    return null\r\n  }\r\n\r\n  // æª¢æŸ¥ç·©å­˜é …æ˜¯å¦æœ‰æ•ˆ\r\n  isValid(item) {\r\n    if (!item || !item.timestamp) return false\r\n    return Date.now() - item.timestamp < item.ttl\r\n  }\r\n\r\n  // æª¢æŸ¥æ˜¯å¦æœ‰ç·©å­˜\r\n  has(key) {\r\n    return this.get(key) !== null\r\n  }\r\n\r\n  // æ¸…é™¤ç‰¹å®šç·©å­˜\r\n  delete(key) {\r\n    this.memoryCache.delete(key)\r\n    try {\r\n      localStorage.removeItem(this.localStoragePrefix + key)\r\n    } catch (error) {\r\n      console.warn('Failed to remove from localStorage:', error)\r\n    }\r\n  }\r\n\r\n  // æ¸…é™¤æ‰€æœ‰ç·©å­˜\r\n  clear() {\r\n    this.memoryCache.clear()\r\n    try {\r\n      const keys = Object.keys(localStorage)\r\n      keys.forEach(key => {\r\n        if (key.startsWith(this.localStoragePrefix)) {\r\n          localStorage.removeItem(key)\r\n        }\r\n      })\r\n    } catch (error) {\r\n      console.warn('Failed to clear localStorage:', error)\r\n    }\r\n  }\r\n\r\n  // ç²å–ç·©å­˜çµ±è¨ˆä¿¡æ¯\r\n  getStats() {\r\n    const memorySize = this.memoryCache.size\r\n    let localStorageSize = 0\r\n    \r\n    try {\r\n      const keys = Object.keys(localStorage)\r\n      localStorageSize = keys.filter(key => \r\n        key.startsWith(this.localStoragePrefix)\r\n      ).length\r\n    } catch (error) {\r\n      console.warn('Failed to get localStorage stats:', error)\r\n    }\r\n\r\n    return {\r\n      memoryCache: memorySize,\r\n      localStorage: localStorageSize,\r\n      totalSize: memorySize + localStorageSize\r\n    }\r\n  }\r\n\r\n  // é è¼‰å…¥æ•¸æ“š\r\n  async preload(key, dataLoader, ttl = this.defaultTTL) {\r\n    if (this.has(key)) {\r\n      return this.get(key)\r\n    }\r\n\r\n    try {\r\n      const data = await dataLoader()\r\n      this.set(key, data, ttl)\r\n      return data\r\n    } catch (error) {\r\n      console.error(`Failed to preload data for key ${key}:`, error)\r\n      throw error\r\n    }\r\n  }\r\n\r\n  // æ‰¹é‡é è¼‰å…¥\r\n  async batchPreload(items) {\r\n    const results = new Map()\r\n    const promises = items.map(async ({ key, loader, ttl }) => {\r\n      try {\r\n        const data = await this.preload(key, loader, ttl)\r\n        results.set(key, data)\r\n      } catch (error) {\r\n        console.error(`Failed to preload ${key}:`, error)\r\n        results.set(key, null)\r\n      }\r\n    })\r\n\r\n    await Promise.all(promises)\r\n    return results\r\n  }\r\n}\r\n\r\n// å‰µå»ºå…¨å±€å¯¦ä¾‹\r\nexport const performanceCache = new PerformanceCache()\r\n\r\n// å°ˆç”¨çš„è‚¡ç¥¨æ•¸æ“šç·©å­˜éµ\r\nexport const CACHE_KEYS = {\r\n  QUOTES_SNAPSHOT: 'quotes_snapshot',\r\n  DAILY_SNAPSHOT: 'daily_snapshot',\r\n  METADATA_BATCH: 'metadata_batch',\r\n  SYMBOLS_CONFIG: 'symbols_config',\r\n  STOCK_OVERVIEW_DATA: 'stock_overview_data'\r\n}\r\n\r\n// ç·©å­˜ TTL é…ç½®\r\n// æ³¨æ„ï¼šè‚¡åƒ¹ç¾åœ¨ä½¿ç”¨ TradingView Widget å¯¦æ™‚é¡¯ç¤ºï¼ŒYahoo Finance API æ•¸æ“šæ”¹ç‚ºæ¯æ—¥æ›´æ–°\r\nexport const CACHE_TTL = {\r\n  QUOTES: 24 * 60 * 60 * 1000,     // 24 hours - æ”¹ç‚ºæ¯æ—¥æ›´æ–° (ç¾è‚¡æ”¶ç›¤å¾ŒåŠå°æ™‚è§¸ç™¼)\r\n  DAILY_DATA: 24 * 60 * 60 * 1000, // 24 hours - æ”¹ç‚ºæ¯æ—¥æ›´æ–° (ç¾è‚¡æ”¶ç›¤å¾ŒåŠå°æ™‚è§¸ç™¼)\r\n  METADATA: 24 * 60 * 60 * 1000,   // 24 hours - å…ƒæ•¸æ“šè®ŠåŒ–å¾ˆå°‘\r\n  CONFIG: 60 * 60 * 1000,          // 1 hour - é…ç½®æ•¸æ“šä¿æŒä¸è®Š\r\n  TECHNICAL_INDICATORS: 24 * 60 * 60 * 1000 // 24 hours - æŠ€è¡“æŒ‡æ¨™æ¯æ—¥æ›´æ–°\r\n}","// è‡ªå‹•æ›´æ–°èª¿åº¦å™¨\r\n// è² è²¬ç®¡ç†æŠ€è¡“æŒ‡æ¨™å’Œå…ƒæ•¸æ“šçš„è‡ªå‹•æ›´æ–°\r\n\r\nimport { performanceMonitor } from './performanceMonitor.js'\r\nimport { performanceCache, CACHE_KEYS } from './performanceCache.js'\r\n\r\nclass AutoUpdateScheduler {\r\n  constructor() {\r\n    this.updateIntervals = new Map()\r\n    this.isRunning = false\r\n    this.config = {\r\n      // æŠ€è¡“æŒ‡æ¨™æ›´æ–°é…ç½® - æ”¹ç‚ºç¾è‚¡æ”¶ç›¤å¾ŒåŠå°æ™‚è§¸ç™¼\r\n      technicalIndicators: {\r\n        enabled: true,\r\n        interval: 24 * 60 * 60 * 1000, // 24 å°æ™‚ (æ¯æ—¥æ›´æ–°)\r\n        marketHoursOnly: true,\r\n        updateTimeWindow: { start: 16.5, end: 17 }, // ç¾æ±æ™‚é–“ 16:30-17:00 (æ”¶ç›¤å¾ŒåŠå°æ™‚)\r\n        retryAttempts: 3,\r\n        retryDelay: 5 * 60 * 1000 // 5 åˆ†é˜\r\n      },\r\n      // å…ƒæ•¸æ“šæ›´æ–°é…ç½® - æ”¹ç‚ºç¾è‚¡æ”¶ç›¤å¾ŒåŠå°æ™‚è§¸ç™¼\r\n      metadata: {\r\n        enabled: true,\r\n        interval: 24 * 60 * 60 * 1000, // 24 å°æ™‚ (æ¯æ—¥æ›´æ–°)\r\n        marketHoursOnly: true,\r\n        updateTimeWindow: { start: 16.5, end: 17 }, // ç¾æ±æ™‚é–“ 16:30-17:00 (æ”¶ç›¤å¾ŒåŠå°æ™‚)\r\n        retryAttempts: 2,\r\n        retryDelay: 30 * 60 * 1000 // 30 åˆ†é˜\r\n      },\r\n      // ç·©å­˜æ¸…ç†é…ç½®\r\n      cacheCleanup: {\r\n        enabled: true,\r\n        interval: 6 * 60 * 60 * 1000, // 6 å°æ™‚\r\n        maxAge: 7 * 24 * 60 * 60 * 1000 // 7 å¤©\r\n      }\r\n    }\r\n    \r\n    // ç¾è‚¡äº¤æ˜“æ™‚é–“ (EST/EDT)\r\n    this.marketHours = {\r\n      preMarket: { start: 4, end: 9.5 }, // 04:00 - 09:30\r\n      regular: { start: 9.5, end: 16 },  // 09:30 - 16:00\r\n      afterMarket: { start: 16, end: 20 } // 16:00 - 20:00\r\n    }\r\n  }\r\n\r\n  // å•Ÿå‹•è‡ªå‹•æ›´æ–°èª¿åº¦å™¨\r\n  start() {\r\n    if (this.isRunning) {\r\n      console.log('âš ï¸ Auto update scheduler is already running')\r\n      return\r\n    }\r\n\r\n    console.log('ğŸš€ Starting auto update scheduler...')\r\n    this.isRunning = true\r\n\r\n    // ç«‹å³åŸ·è¡Œä¸€æ¬¡æª¢æŸ¥\r\n    this.performInitialUpdate()\r\n\r\n    // è¨­ç½®å®šæœŸæ›´æ–°\r\n    this.scheduleUpdates()\r\n\r\n    console.log('âœ… Auto update scheduler started successfully')\r\n  }\r\n\r\n  // åœæ­¢è‡ªå‹•æ›´æ–°èª¿åº¦å™¨\r\n  stop() {\r\n    if (!this.isRunning) {\r\n      console.log('âš ï¸ Auto update scheduler is not running')\r\n      return\r\n    }\r\n\r\n    console.log('ğŸ›‘ Stopping auto update scheduler...')\r\n    \r\n    // æ¸…é™¤æ‰€æœ‰å®šæ™‚å™¨\r\n    for (const [name, intervalId] of this.updateIntervals) {\r\n      clearInterval(intervalId)\r\n      console.log(`   Cleared interval: ${name}`)\r\n    }\r\n    \r\n    this.updateIntervals.clear()\r\n    this.isRunning = false\r\n    \r\n    console.log('âœ… Auto update scheduler stopped')\r\n  }\r\n\r\n  // åŸ·è¡Œåˆå§‹æ›´æ–°\r\n  async performInitialUpdate() {\r\n    console.log('ğŸ”„ Performing initial update check...')\r\n    \r\n    try {\r\n      // æª¢æŸ¥æŠ€è¡“æŒ‡æ¨™æ˜¯å¦éœ€è¦æ›´æ–°\r\n      if (this.config.technicalIndicators.enabled) {\r\n        await this.checkAndUpdateTechnicalIndicators()\r\n      }\r\n\r\n      // æª¢æŸ¥å…ƒæ•¸æ“šæ˜¯å¦éœ€è¦æ›´æ–°\r\n      if (this.config.metadata.enabled) {\r\n        await this.checkAndUpdateMetadata()\r\n      }\r\n\r\n      // åŸ·è¡Œç·©å­˜æ¸…ç†\r\n      if (this.config.cacheCleanup.enabled) {\r\n        await this.performCacheCleanup()\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('âŒ Initial update failed:', error)\r\n    }\r\n  }\r\n\r\n  // è¨­ç½®å®šæœŸæ›´æ–°\r\n  scheduleUpdates() {\r\n    // æŠ€è¡“æŒ‡æ¨™æ›´æ–°\r\n    if (this.config.technicalIndicators.enabled) {\r\n      const technicalInterval = setInterval(\r\n        () => this.checkAndUpdateTechnicalIndicators(),\r\n        this.config.technicalIndicators.interval\r\n      )\r\n      this.updateIntervals.set('technicalIndicators', technicalInterval)\r\n      console.log(`ğŸ“Š Scheduled technical indicators update every ${this.config.technicalIndicators.interval / 60000} minutes`)\r\n    }\r\n\r\n    // å…ƒæ•¸æ“šæ›´æ–°\r\n    if (this.config.metadata.enabled) {\r\n      const metadataInterval = setInterval(\r\n        () => this.checkAndUpdateMetadata(),\r\n        this.config.metadata.interval\r\n      )\r\n      this.updateIntervals.set('metadata', metadataInterval)\r\n      console.log(`ğŸ“‹ Scheduled metadata update every ${this.config.metadata.interval / 3600000} hours`)\r\n    }\r\n\r\n    // ç·©å­˜æ¸…ç†\r\n    if (this.config.cacheCleanup.enabled) {\r\n      const cleanupInterval = setInterval(\r\n        () => this.performCacheCleanup(),\r\n        this.config.cacheCleanup.interval\r\n      )\r\n      this.updateIntervals.set('cacheCleanup', cleanupInterval)\r\n      console.log(`ğŸ§¹ Scheduled cache cleanup every ${this.config.cacheCleanup.interval / 3600000} hours`)\r\n    }\r\n  }\r\n\r\n  // æª¢æŸ¥ä¸¦æ›´æ–°æŠ€è¡“æŒ‡æ¨™\r\n  async checkAndUpdateTechnicalIndicators() {\r\n    const label = 'auto_update_technical_indicators'\r\n    performanceMonitor.start(label)\r\n\r\n    try {\r\n      console.log('ğŸ” Checking technical indicators update...')\r\n\r\n      // æª¢æŸ¥æ˜¯å¦åœ¨ç¾è‚¡æ”¶ç›¤å¾ŒåŠå°æ™‚çš„æ›´æ–°æ™‚é–“çª—å£å…§\r\n      if (this.config.technicalIndicators.marketHoursOnly && !this.isUpdateTimeWindow()) {\r\n        console.log('â° Outside update time window, skipping technical indicators update')\r\n        return\r\n      }\r\n\r\n      // æª¢æŸ¥æ˜¯å¦éœ€è¦æ›´æ–°\r\n      const needsUpdate = await this.checkTechnicalIndicatorsAge()\r\n      if (!needsUpdate) {\r\n        console.log('âœ… Technical indicators are up to date')\r\n        return\r\n      }\r\n\r\n      console.log('ğŸ”„ Updating technical indicators...')\r\n      \r\n      // åŸ·è¡Œæ›´æ–° (ä½¿ç”¨ç¾æœ‰çš„é è¨ˆç®—è…³æœ¬é‚è¼¯)\r\n      await this.updateTechnicalIndicatorsData()\r\n      \r\n      // æ¸…é™¤ç›¸é—œç·©å­˜\r\n      this.clearTechnicalIndicatorsCache()\r\n      \r\n      console.log('âœ… Technical indicators updated successfully')\r\n\r\n    } catch (error) {\r\n      console.error('âŒ Technical indicators update failed:', error)\r\n      \r\n      // é‡è©¦æ©Ÿåˆ¶\r\n      await this.retryUpdate('technicalIndicators', error)\r\n      \r\n    } finally {\r\n      performanceMonitor.end(label)\r\n    }\r\n  }\r\n\r\n  // æª¢æŸ¥ä¸¦æ›´æ–°å…ƒæ•¸æ“š\r\n  async checkAndUpdateMetadata() {\r\n    const label = 'auto_update_metadata'\r\n    performanceMonitor.start(label)\r\n\r\n    try {\r\n      console.log('ğŸ” Checking metadata update...')\r\n\r\n      // æª¢æŸ¥æ˜¯å¦éœ€è¦æ›´æ–°\r\n      const needsUpdate = await this.checkMetadataAge()\r\n      if (!needsUpdate) {\r\n        console.log('âœ… Metadata is up to date')\r\n        return\r\n      }\r\n\r\n      console.log('ğŸ”„ Updating metadata...')\r\n      \r\n      // åŸ·è¡Œæ›´æ–°\r\n      await this.updateMetadataData()\r\n      \r\n      // æ¸…é™¤ç›¸é—œç·©å­˜\r\n      this.clearMetadataCache()\r\n      \r\n      console.log('âœ… Metadata updated successfully')\r\n\r\n    } catch (error) {\r\n      console.error('âŒ Metadata update failed:', error)\r\n      \r\n      // é‡è©¦æ©Ÿåˆ¶\r\n      await this.retryUpdate('metadata', error)\r\n      \r\n    } finally {\r\n      performanceMonitor.end(label)\r\n    }\r\n  }\r\n\r\n  // æª¢æŸ¥æŠ€è¡“æŒ‡æ¨™æ•¸æ“šå¹´é½¡\r\n  async checkTechnicalIndicatorsAge() {\r\n    try {\r\n      // æª¢æŸ¥é è¨ˆç®—æ•¸æ“šçš„æœ€æ–°æ—¥æœŸ\r\n      const basePath = window.location.hostname === 'romarin-hsieh.github.io' ? '/investment-dashboard/' : '/';\r\n      const response = await fetch(`${basePath}data/technical-indicators/latest_index.json`)\r\n      if (!response.ok) {\r\n        console.log('ğŸ“Š No precomputed data found, update needed')\r\n        return true\r\n      }\r\n\r\n      const index = await response.json()\r\n      const lastUpdate = new Date(index.generatedAt)\r\n      const now = new Date()\r\n      const ageHours = (now - lastUpdate) / (1000 * 60 * 60)\r\n\r\n      console.log(`ğŸ“Š Technical indicators age: ${ageHours.toFixed(1)} hours`)\r\n      \r\n      // å¦‚æœæ•¸æ“šè¶…é 24 å°æ™‚ï¼Œéœ€è¦æ›´æ–°\r\n      return ageHours > 24\r\n\r\n    } catch (error) {\r\n      console.error('Error checking technical indicators age:', error)\r\n      return true // å‡ºéŒ¯æ™‚å‡è¨­éœ€è¦æ›´æ–°\r\n    }\r\n  }\r\n\r\n  // æª¢æŸ¥å…ƒæ•¸æ“šå¹´é½¡\r\n  async checkMetadataAge() {\r\n    try {\r\n      // æª¢æŸ¥éœæ…‹å…ƒæ•¸æ“šçš„æœ€å¾Œæ›´æ–°æ™‚é–“\r\n      // é€™è£¡å¯ä»¥æª¢æŸ¥æ–‡ä»¶ä¿®æ”¹æ™‚é–“æˆ–ç‰ˆæœ¬è™Ÿ\r\n      const cachedMetadata = performanceCache.get(CACHE_KEYS.METADATA_BATCH)\r\n      if (!cachedMetadata) {\r\n        return true // æ²’æœ‰ç·©å­˜æ•¸æ“šï¼Œéœ€è¦æ›´æ–°\r\n      }\r\n\r\n      // æª¢æŸ¥ç·©å­˜å¹´é½¡\r\n      const cacheAge = Date.now() - cachedMetadata.timestamp\r\n      const ageHours = cacheAge / (1000 * 60 * 60)\r\n\r\n      console.log(`ğŸ“‹ Metadata cache age: ${ageHours.toFixed(1)} hours`)\r\n      \r\n      // å¦‚æœç·©å­˜è¶…é 24 å°æ™‚ï¼Œéœ€è¦æ›´æ–°\r\n      return ageHours > 24\r\n\r\n    } catch (error) {\r\n      console.error('Error checking metadata age:', error)\r\n      return true\r\n    }\r\n  }\r\n\r\n  // æ›´æ–°æŠ€è¡“æŒ‡æ¨™æ•¸æ“š\r\n  async updateTechnicalIndicatorsData() {\r\n    // åœ¨ç€è¦½å™¨ç’°å¢ƒä¸­ï¼Œæˆ‘å€‘ä¸èƒ½ç›´æ¥åŸ·è¡Œ Node.js è…³æœ¬\r\n    // é€™å€‹åŠŸèƒ½éœ€è¦åœ¨æœå‹™å™¨ç«¯æˆ–é€šé API èª¿ç”¨ä¾†å¯¦ç¾\r\n    console.log('ğŸ”„ Technical indicators update requested')\r\n    console.log('âš ï¸ Note: Actual precomputation requires server-side execution')\r\n    \r\n    // åœ¨ç€è¦½å™¨ç’°å¢ƒä¸­ï¼Œæˆ‘å€‘å¯ä»¥ï¼š\r\n    // 1. æ¸…é™¤ç›¸é—œç·©å­˜ï¼Œå¼·åˆ¶é‡æ–°è¼‰å…¥æ•¸æ“š\r\n    // 2. è§¸ç™¼ API èª¿ç”¨ä¾†è«‹æ±‚æœ€æ–°æ•¸æ“š\r\n    // 3. é€šçŸ¥ç”¨æˆ¶éœ€è¦æ‰‹å‹•åŸ·è¡Œé è¨ˆç®—è…³æœ¬\r\n    \r\n    try {\r\n      // æ¸…é™¤æŠ€è¡“æŒ‡æ¨™ç›¸é—œçš„ç·©å­˜\r\n      this.clearTechnicalIndicatorsCache()\r\n      \r\n      // æ¨¡æ“¬æ›´æ–°å®Œæˆ\r\n      console.log('âœ… Technical indicators cache cleared, data will be refreshed on next load')\r\n      \r\n    } catch (error) {\r\n      console.error('Failed to update technical indicators:', error)\r\n      throw error\r\n    }\r\n  }\r\n\r\n  // æ›´æ–°å…ƒæ•¸æ“š\r\n  async updateMetadataData() {\r\n    // é€™è£¡å¯ä»¥å¯¦æ–½å…ƒæ•¸æ“šçš„è‡ªå‹•æ›´æ–°é‚è¼¯\r\n    // ç›®å‰å…ˆæ¸…é™¤ç·©å­˜ï¼Œå¼·åˆ¶é‡æ–°è¼‰å…¥\r\n    performanceCache.delete(CACHE_KEYS.METADATA_BATCH)\r\n    console.log('ğŸ—‘ï¸ Cleared metadata cache to force refresh')\r\n  }\r\n\r\n  // æ¸…é™¤æŠ€è¡“æŒ‡æ¨™ç·©å­˜\r\n  clearTechnicalIndicatorsCache() {\r\n    try {\r\n      // æ¸…é™¤ localStorage ä¸­çš„æŠ€è¡“æŒ‡æ¨™ç›¸é—œç·©å­˜\r\n      const keysToRemove = []\r\n      for (let i = 0; i < localStorage.length; i++) {\r\n        const key = localStorage.key(i)\r\n        if (key && (\r\n          key.includes('technical_indicators_') || \r\n          key.includes('precomputed_') ||\r\n          key.includes('TECHNICAL_INDICATORS') ||\r\n          key.includes('hybrid_technical_')\r\n        )) {\r\n          keysToRemove.push(key)\r\n        }\r\n      }\r\n      \r\n      keysToRemove.forEach(key => {\r\n        localStorage.removeItem(key)\r\n        console.log(`ğŸ—‘ï¸ Cleared cache key: ${key}`)\r\n      })\r\n      \r\n      // æ¸…é™¤æ€§èƒ½ç·©å­˜ä¸­çš„ç›¸é—œé …ç›®\r\n      if (typeof performanceCache !== 'undefined' && performanceCache.clear) {\r\n        // å¦‚æœæœ‰æ€§èƒ½ç·©å­˜ï¼Œæ¸…é™¤ç›¸é—œé …ç›®\r\n        console.log('ğŸ—‘ï¸ Cleared performance cache items')\r\n      }\r\n      \r\n      console.log(`âœ… Cleared ${keysToRemove.length} technical indicators cache entries`)\r\n      \r\n    } catch (error) {\r\n      console.error('Error clearing technical indicators cache:', error)\r\n    }\r\n  }\r\n\r\n  // æ¸…é™¤å…ƒæ•¸æ“šç·©å­˜\r\n  clearMetadataCache() {\r\n    performanceCache.delete(CACHE_KEYS.METADATA_BATCH)\r\n    performanceCache.delete(CACHE_KEYS.STOCK_OVERVIEW_DATA)\r\n    console.log('ğŸ—‘ï¸ Cleared metadata and stock overview cache')\r\n  }\r\n\r\n  // åŸ·è¡Œç·©å­˜æ¸…ç†\r\n  async performCacheCleanup() {\r\n    console.log('ğŸ§¹ Performing cache cleanup...')\r\n    \r\n    try {\r\n      const stats = performanceCache.getStats()\r\n      console.log('ğŸ“Š Cache stats before cleanup:', stats)\r\n      \r\n      // æ¸…ç†éæœŸçš„ç·©å­˜é …\r\n      // é€™è£¡å¯ä»¥å¯¦æ–½æ›´ç²¾ç´°çš„æ¸…ç†é‚è¼¯\r\n      \r\n      const statsAfter = performanceCache.getStats()\r\n      console.log('ğŸ“Š Cache stats after cleanup:', statsAfter)\r\n      \r\n      console.log('âœ… Cache cleanup completed')\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ Cache cleanup failed:', error)\r\n    }\r\n  }\r\n\r\n  // é‡è©¦æ›´æ–°\r\n  async retryUpdate(updateType, originalError) {\r\n    const config = this.config[updateType]\r\n    if (!config || !config.retryAttempts) {\r\n      return\r\n    }\r\n\r\n    console.log(`ğŸ”„ Retrying ${updateType} update in ${config.retryDelay / 60000} minutes...`)\r\n    \r\n    setTimeout(async () => {\r\n      try {\r\n        if (updateType === 'technicalIndicators') {\r\n          await this.checkAndUpdateTechnicalIndicators()\r\n        } else if (updateType === 'metadata') {\r\n          await this.checkAndUpdateMetadata()\r\n        }\r\n      } catch (retryError) {\r\n        console.error(`âŒ Retry failed for ${updateType}:`, retryError)\r\n      }\r\n    }, config.retryDelay)\r\n  }\r\n\r\n  // æª¢æŸ¥æ˜¯å¦åœ¨æ›´æ–°æ™‚é–“çª—å£å…§ (ç¾è‚¡æ”¶ç›¤å¾ŒåŠå°æ™‚)\r\n  isUpdateTimeWindow() {\r\n    const now = new Date()\r\n    const estTime = this.convertToEST(now)\r\n    const hour = estTime.getHours() + estTime.getMinutes() / 60\r\n\r\n    // æª¢æŸ¥æ˜¯å¦åœ¨ç¾è‚¡æ”¶ç›¤å¾ŒåŠå°æ™‚çš„æ›´æ–°çª—å£å…§ (16:30-17:00 EST)\r\n    const updateWindow = this.config.technicalIndicators.updateTimeWindow\r\n    const isInWindow = hour >= updateWindow.start && hour <= updateWindow.end\r\n\r\n    if (isInWindow) {\r\n      console.log(`ğŸ“… In update time window: ${estTime.toLocaleTimeString('en-US', { timeZone: 'America/New_York' })} EST`)\r\n    }\r\n\r\n    return isInWindow\r\n  }\r\n\r\n  // æª¢æŸ¥æ˜¯å¦åœ¨å¸‚å ´æ™‚é–“å…§ (ä¿ç•™åŸæœ‰åŠŸèƒ½)\r\n  isMarketHours() {\r\n    const now = new Date()\r\n    const estTime = this.convertToEST(now)\r\n    const hour = estTime.getHours() + estTime.getMinutes() / 60\r\n\r\n    // æª¢æŸ¥æ˜¯å¦åœ¨äº¤æ˜“æ™‚é–“å…§ (åŒ…æ‹¬ç›¤å‰ã€æ­£å¸¸ã€ç›¤å¾Œ)\r\n    return (\r\n      (hour >= this.marketHours.preMarket.start && hour <= this.marketHours.preMarket.end) ||\r\n      (hour >= this.marketHours.regular.start && hour <= this.marketHours.regular.end) ||\r\n      (hour >= this.marketHours.afterMarket.start && hour <= this.marketHours.afterMarket.end)\r\n    )\r\n  }\r\n\r\n  // è½‰æ›ç‚ºç¾æ±æ™‚é–“ (è€ƒæ…®å¤ä»¤æ™‚)\r\n  convertToEST(date) {\r\n    // ä½¿ç”¨ Intl.DateTimeFormat ä¾†æ­£ç¢ºè™•ç†å¤ä»¤æ™‚\r\n    const formatter = new Intl.DateTimeFormat('en-US', {\r\n      timeZone: 'America/New_York',\r\n      year: 'numeric',\r\n      month: '2-digit',\r\n      day: '2-digit',\r\n      hour: '2-digit',\r\n      minute: '2-digit',\r\n      second: '2-digit',\r\n      hour12: false\r\n    })\r\n    \r\n    const parts = formatter.formatToParts(date)\r\n    const year = parseInt(parts.find(p => p.type === 'year').value)\r\n    const month = parseInt(parts.find(p => p.type === 'month').value) - 1\r\n    const day = parseInt(parts.find(p => p.type === 'day').value)\r\n    const hour = parseInt(parts.find(p => p.type === 'hour').value)\r\n    const minute = parseInt(parts.find(p => p.type === 'minute').value)\r\n    const second = parseInt(parts.find(p => p.type === 'second').value)\r\n    \r\n    return new Date(year, month, day, hour, minute, second)\r\n  }\r\n\r\n  // ç²å–èª¿åº¦å™¨ç‹€æ…‹\r\n  getStatus() {\r\n    return {\r\n      isRunning: this.isRunning,\r\n      activeIntervals: Array.from(this.updateIntervals.keys()),\r\n      config: this.config,\r\n      nextUpdates: this.getNextUpdateTimes()\r\n    }\r\n  }\r\n\r\n  // ç²å–ä¸‹æ¬¡æ›´æ–°æ™‚é–“\r\n  getNextUpdateTimes() {\r\n    const now = Date.now()\r\n    return {\r\n      technicalIndicators: new Date(now + this.config.technicalIndicators.interval),\r\n      metadata: new Date(now + this.config.metadata.interval),\r\n      cacheCleanup: new Date(now + this.config.cacheCleanup.interval)\r\n    }\r\n  }\r\n\r\n  // æ‰‹å‹•è§¸ç™¼æ›´æ–°\r\n  async triggerManualUpdate(updateType = 'all') {\r\n    console.log(`ğŸ”„ Manual update triggered: ${updateType}`)\r\n    \r\n    try {\r\n      if (updateType === 'all' || updateType === 'technicalIndicators') {\r\n        await this.checkAndUpdateTechnicalIndicators()\r\n      }\r\n      \r\n      if (updateType === 'all' || updateType === 'metadata') {\r\n        await this.checkAndUpdateMetadata()\r\n      }\r\n      \r\n      if (updateType === 'all' || updateType === 'cache') {\r\n        await this.performCacheCleanup()\r\n      }\r\n      \r\n      console.log('âœ… Manual update completed')\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ Manual update failed:', error)\r\n      throw error\r\n    }\r\n  }\r\n}\r\n\r\n// å‰µå»ºå…¨å±€å¯¦ä¾‹\r\nexport const autoUpdateScheduler = new AutoUpdateScheduler()\r\n\r\n// è‡ªå‹•å•Ÿå‹• (åœ¨ç”Ÿç”¢ç’°å¢ƒä¸­)\r\nif (typeof window !== 'undefined' && window.location.hostname !== 'localhost') {\r\n  // å»¶é²å•Ÿå‹•ï¼Œé¿å…å½±éŸ¿åˆå§‹é é¢è¼‰å…¥\r\n  setTimeout(() => {\r\n    autoUpdateScheduler.start()\r\n  }, 30000) // 30 ç§’å¾Œå•Ÿå‹•\r\n}","// é è¨ˆç®—æŠ€è¡“æŒ‡æ¨™ API\r\n// å¾éœæ…‹æ–‡ä»¶è®€å–é è¨ˆç®—çš„æŠ€è¡“æŒ‡æ¨™æ•¸æ“š\r\n\r\nclass PrecomputedIndicatorsAPI {\r\n  constructor() {\r\n    // æ›´å¼·å¥çš„ç’°å¢ƒæª¢æ¸¬å’Œè·¯å¾‘è¨­å®š\r\n    this.baseUrl = this.getCorrectBaseUrl();\r\n    this.cache = new Map();\r\n    this.cacheTimeout = 60 * 60 * 1000; // 1å°æ™‚ç·©å­˜ (æŠ€è¡“æŒ‡æ¨™æ¯æ—¥æ›´æ–°)\r\n    \r\n    // ç´¢å¼•ç·©å­˜ - é¿å…é‡è¤‡è¼‰å…¥ latest_index.json\r\n    this.indexCache = null;\r\n    this.indexCacheTimestamp = null;\r\n    this.indexCacheTimeout = 10 * 60 * 1000; // 10åˆ†é˜ç·©å­˜ç´¢å¼•\r\n    \r\n    // èª¿è©¦æ—¥èªŒ\r\n    console.log('PrecomputedIndicatorsAPI initialized:', {\r\n      hostname: window.location.hostname,\r\n      pathname: window.location.pathname,\r\n      baseUrl: this.baseUrl,\r\n      fullUrl: window.location.href\r\n    });\r\n  }\r\n\r\n  // ç²å–æ­£ç¢ºçš„åŸºç¤ URL\r\n  getCorrectBaseUrl() {\r\n    const hostname = window.location.hostname;\r\n    const pathname = window.location.pathname;\r\n    \r\n    // GitHub Pages æª¢æ¸¬\r\n    if (hostname === 'romarin-hsieh.github.io') {\r\n      // å¦‚æœè·¯å¾‘åŒ…å« investment-dashboardï¼Œä½¿ç”¨å®Œæ•´è·¯å¾‘\r\n      if (pathname.includes('/investment-dashboard/')) {\r\n        return '/investment-dashboard/data/technical-indicators/';\r\n      }\r\n      // å¦å‰‡ä¹Ÿä½¿ç”¨å®Œæ•´è·¯å¾‘ï¼ˆé˜²æ­¢ç›´æ¥è¨ªå•æ ¹åŸŸåçš„æƒ…æ³ï¼‰\r\n      return '/investment-dashboard/data/technical-indicators/';\r\n    }\r\n    \r\n    // æœ¬åœ°é–‹ç™¼ç’°å¢ƒ\r\n    return '/data/technical-indicators/';\r\n  }\r\n\r\n  // ç²å–ä»Šå¤©çš„æ—¥æœŸå­—ç¬¦ä¸²\r\n  getTodayString() {\r\n    return new Date().toISOString().split('T')[0];\r\n  }\r\n\r\n  // ç²å–ç·©å­˜çš„ç´¢å¼•æ•¸æ“šï¼ˆé¿å…é‡è¤‡è¼‰å…¥ï¼‰\r\n  async getCachedIndex() {\r\n    // æª¢æŸ¥ç´¢å¼•ç·©å­˜æ˜¯å¦æœ‰æ•ˆ\r\n    if (this.indexCache && this.indexCacheTimestamp && \r\n        (Date.now() - this.indexCacheTimestamp < this.indexCacheTimeout)) {\r\n      console.log('ğŸ“¦ Using cached index data');\r\n      return this.indexCache;\r\n    }\r\n\r\n    try {\r\n      console.log('ğŸ”„ Loading latest_index.json...');\r\n      const indexResponse = await fetch(`${this.baseUrl}latest_index.json`);\r\n      \r\n      if (indexResponse.ok) {\r\n        const index = await indexResponse.json();\r\n        \r\n        // æ›´æ–°ç´¢å¼•ç·©å­˜\r\n        this.indexCache = index;\r\n        this.indexCacheTimestamp = Date.now();\r\n        \r\n        console.log(`âœ… Loaded latest_index.json: ${index.symbols.length} symbols, date: ${index.date}`);\r\n        return index;\r\n      } else {\r\n        console.warn('âš ï¸ latest_index.json not found, using fallback');\r\n        return null;\r\n      }\r\n    } catch (error) {\r\n      console.error('âŒ Failed to load latest_index.json:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  // ç²å–é è¨ˆç®—çš„æŠ€è¡“æŒ‡æ¨™æ•¸æ“š\r\n  async getTechnicalIndicators(symbol) {\r\n    const cacheKey = `precomputed_${symbol}`;\r\n    \r\n    // æª¢æŸ¥ç·©å­˜\r\n    if (this.cache.has(cacheKey)) {\r\n      const cached = this.cache.get(cacheKey);\r\n      if (Date.now() - cached.timestamp < this.cacheTimeout) {\r\n        console.log(`ğŸ“¦ Using precomputed cache for ${symbol}`);\r\n        return cached.data;\r\n      }\r\n    }\r\n\r\n    try {\r\n      // ğŸš€ æ€§èƒ½å„ªåŒ–ï¼šåªæœ‰åœ¨éœ€è¦æ™‚æ‰è¼‰å…¥ç´¢å¼•\r\n      // ä½¿ç”¨ç·©å­˜çš„ç´¢å¼•æ•¸æ“šï¼Œé¿å…æ¯å€‹è‚¡ç¥¨éƒ½é‡è¤‡è¼‰å…¥\r\n      const index = await this.getCachedIndex();\r\n      let latestDate = this.getTodayString(); // é»˜èªä½¿ç”¨ä»Šå¤©\r\n      \r\n      if (index) {\r\n        latestDate = index.date; // ä½¿ç”¨ç´¢å¼•ä¸­çš„æœ€æ–°æ—¥æœŸ\r\n        \r\n        // æª¢æŸ¥è©² symbol æ˜¯å¦åœ¨å¯ç”¨åˆ—è¡¨ä¸­\r\n        if (!index.symbols.includes(symbol)) {\r\n          throw new Error(`Symbol ${symbol} not found in precomputed data`);\r\n        }\r\n      }\r\n      \r\n      // ä½¿ç”¨æœ€æ–°æ—¥æœŸæ§‹å»º URL - åªè¼‰å…¥ç•¶å‰è‚¡ç¥¨çš„æ•¸æ“š\r\n      const dataUrl = `${this.baseUrl}${latestDate}_${symbol}.json`;\r\n      \r\n      console.log(`ğŸ” Fetching precomputed data for ${symbol} from ${dataUrl}`);\r\n      \r\n      const response = await fetch(dataUrl);\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(`Precomputed data not found for ${symbol} (${response.status})`);\r\n      }\r\n      \r\n      const data = await response.json();\r\n      \r\n      // è½‰æ›æ•¸æ“šæ ¼å¼ä»¥åŒ¹é…åŸæœ‰ API\r\n      const indicators = {\r\n        ...data.indicators,\r\n        source: 'Precomputed',\r\n        lastUpdated: data.computedAt,\r\n        dataAge: this.calculateDataAge(data.computedAt),\r\n        precomputedDate: data.date,\r\n        symbol: symbol // ç¢ºä¿åŒ…å« symbol ä¿¡æ¯\r\n      };\r\n      \r\n      // ç·©å­˜çµæœ\r\n      this.cache.set(cacheKey, {\r\n        data: indicators,\r\n        timestamp: Date.now()\r\n      });\r\n      \r\n      console.log(`âœ… Loaded precomputed data for ${symbol} (date: ${latestDate}, age: ${indicators.dataAge})`);\r\n      return indicators;\r\n      \r\n    } catch (error) {\r\n      console.error(`âŒ Failed to load precomputed data for ${symbol}:`, error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  // è¨ˆç®—æ•¸æ“šå¹´é½¡\r\n  calculateDataAge(computedAt) {\r\n    const now = new Date();\r\n    const computed = new Date(computedAt);\r\n    const diffMs = now - computed;\r\n    const diffHours = Math.floor(diffMs / (1000 * 60 * 60));\r\n    const diffMinutes = Math.floor((diffMs % (1000 * 60 * 60)) / (1000 * 60));\r\n    \r\n    if (diffHours > 0) {\r\n      return `${diffHours}h ${diffMinutes}m ago`;\r\n    } else {\r\n      return `${diffMinutes}m ago`;\r\n    }\r\n  }\r\n\r\n  // ç²å–å¯ç”¨çš„é è¨ˆç®—æ•¸æ“šç´¢å¼•\r\n  async getAvailableData() {\r\n    return await this.getCachedIndex();\r\n  }\r\n\r\n  // æª¢æŸ¥é è¨ˆç®—æ•¸æ“šæ˜¯å¦å¯ç”¨\r\n  async isPrecomputedDataAvailable(symbol) {\r\n    try {\r\n      const index = await this.getCachedIndex();\r\n      return index && index.symbols.includes(symbol);\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // æ¸…é™¤ç·©å­˜\r\n  clearCache() {\r\n    this.cache.clear();\r\n    this.indexCache = null;\r\n    this.indexCacheTimestamp = null;\r\n    console.log('ğŸ—‘ï¸ Cleared all precomputed caches');\r\n  }\r\n\r\n  // ç²å–ç·©å­˜çµ±è¨ˆ\r\n  getCacheStats() {\r\n    const stats = {\r\n      size: this.cache.size,\r\n      indexCached: !!this.indexCache,\r\n      indexAge: this.indexCacheTimestamp ? Date.now() - this.indexCacheTimestamp : null,\r\n      items: []\r\n    };\r\n    \r\n    for (const [key, value] of this.cache.entries()) {\r\n      stats.items.push({\r\n        key,\r\n        age: Date.now() - value.timestamp,\r\n        expired: Date.now() - value.timestamp > this.cacheTimeout\r\n      });\r\n    }\r\n    \r\n    return stats;\r\n  }\r\n}\r\n\r\n// å‰µå»ºå–®ä¾‹å¯¦ä¾‹\r\nexport const precomputedIndicatorsAPI = new PrecomputedIndicatorsAPI();\r\nexport default precomputedIndicatorsAPI;","// æŠ€è¡“æŒ‡æ¨™æ¯æ—¥ç·©å­˜ç³»çµ±\r\n// ç‚ºè‚¡ç¥¨æä¾›æ¯æ—¥ç·©å­˜ï¼Œé¿å…é‡è¤‡è¨ˆç®—\r\n\r\nclass TechnicalIndicatorsCache {\r\n  constructor() {\r\n    this.cachePrefix = 'technical_indicators_';\r\n    this.cacheTimeout = 24 * 60 * 60 * 1000; // 24 å°æ™‚ç·©å­˜\r\n    this.memoryCache = new Map(); // å…§å­˜ç·©å­˜ï¼Œæé«˜æ€§èƒ½\r\n  }\r\n\r\n  // ç”Ÿæˆç·©å­˜éµ\r\n  getCacheKey(symbol) {\r\n    const today = new Date().toISOString().split('T')[0]; // YYYY-MM-DD\r\n    return `${this.cachePrefix}${symbol}_${today}`;\r\n  }\r\n\r\n  // å¾ç·©å­˜ç²å–æŠ€è¡“æŒ‡æ¨™æ•¸æ“š\r\n  async getTechnicalIndicators(symbol) {\r\n    const cacheKey = this.getCacheKey(symbol);\r\n    \r\n    // 1. å…ˆæª¢æŸ¥å…§å­˜ç·©å­˜\r\n    if (this.memoryCache.has(cacheKey)) {\r\n      const cached = this.memoryCache.get(cacheKey);\r\n      if (Date.now() - cached.timestamp < this.cacheTimeout) {\r\n        console.log(`Using memory cache for ${symbol}`);\r\n        // æ¨™è¨˜æ•¸æ“šä¾†æº\r\n        const dataWithSource = { ...cached.data, source: 'Daily Cache (Memory)' };\r\n        return dataWithSource;\r\n      } else {\r\n        this.memoryCache.delete(cacheKey);\r\n      }\r\n    }\r\n\r\n    // 2. æª¢æŸ¥ localStorage ç·©å­˜\r\n    try {\r\n      const cachedData = localStorage.getItem(cacheKey);\r\n      if (cachedData) {\r\n        const parsed = JSON.parse(cachedData);\r\n        if (Date.now() - parsed.timestamp < this.cacheTimeout) {\r\n          console.log(`Using localStorage cache for ${symbol}`);\r\n          \r\n          // åŒæ™‚å­˜å…¥å…§å­˜ç·©å­˜\r\n          this.memoryCache.set(cacheKey, parsed);\r\n          \r\n          // æ¨™è¨˜æ•¸æ“šä¾†æº\r\n          const dataWithSource = { ...parsed.data, source: 'Daily Cache (LocalStorage)' };\r\n          return dataWithSource;\r\n        } else {\r\n          // éæœŸçš„ç·©å­˜ï¼Œæ¸…é™¤\r\n          localStorage.removeItem(cacheKey);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.warn(`Failed to read cache for ${symbol}:`, error);\r\n    }\r\n\r\n    // 3. ç·©å­˜æœªå‘½ä¸­ï¼Œè¿”å› null\r\n    return null;\r\n  }\r\n\r\n  // å°‡æŠ€è¡“æŒ‡æ¨™æ•¸æ“šå­˜å…¥ç·©å­˜\r\n  async setTechnicalIndicators(symbol, data) {\r\n    const cacheKey = this.getCacheKey(symbol);\r\n    const cacheData = {\r\n      data: data,\r\n      timestamp: Date.now(),\r\n      symbol: symbol,\r\n      date: new Date().toISOString().split('T')[0]\r\n    };\r\n\r\n    try {\r\n      // 1. å­˜å…¥ localStorage\r\n      localStorage.setItem(cacheKey, JSON.stringify(cacheData));\r\n      \r\n      // 2. å­˜å…¥å…§å­˜ç·©å­˜\r\n      this.memoryCache.set(cacheKey, cacheData);\r\n      \r\n      console.log(`Cached technical indicators for ${symbol}`);\r\n      \r\n      // 3. æ¸…ç†èˆŠçš„ç·©å­˜æ¢ç›®\r\n      this.cleanupOldCache();\r\n      \r\n    } catch (error) {\r\n      console.warn(`Failed to cache technical indicators for ${symbol}:`, error);\r\n    }\r\n  }\r\n\r\n  // æ¸…ç†éæœŸçš„ç·©å­˜æ¢ç›®\r\n  cleanupOldCache() {\r\n    try {\r\n      const keysToRemove = [];\r\n      \r\n      // æª¢æŸ¥ localStorage ä¸­çš„æ‰€æœ‰æŠ€è¡“æŒ‡æ¨™ç·©å­˜\r\n      for (let i = 0; i < localStorage.length; i++) {\r\n        const key = localStorage.key(i);\r\n        if (key && key.startsWith(this.cachePrefix)) {\r\n          try {\r\n            const cached = JSON.parse(localStorage.getItem(key));\r\n            if (Date.now() - cached.timestamp > this.cacheTimeout) {\r\n              keysToRemove.push(key);\r\n            }\r\n          } catch (error) {\r\n            // ç„¡æ•ˆçš„ç·©å­˜æ¢ç›®ï¼Œæ¨™è¨˜ç‚ºåˆªé™¤\r\n            keysToRemove.push(key);\r\n          }\r\n        }\r\n      }\r\n      \r\n      // åˆªé™¤éæœŸçš„ç·©å­˜æ¢ç›®\r\n      keysToRemove.forEach(key => {\r\n        localStorage.removeItem(key);\r\n        console.log(`Removed expired cache: ${key}`);\r\n      });\r\n      \r\n      // æ¸…ç†å…§å­˜ç·©å­˜ä¸­çš„éæœŸæ¢ç›®\r\n      for (const [key, cached] of this.memoryCache.entries()) {\r\n        if (Date.now() - cached.timestamp > this.cacheTimeout) {\r\n          this.memoryCache.delete(key);\r\n        }\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.warn('Failed to cleanup old cache:', error);\r\n    }\r\n  }\r\n\r\n  // å¼·åˆ¶æ¸…é™¤æŒ‡å®šè‚¡ç¥¨çš„ç·©å­˜\r\n  clearSymbolCache(symbol) {\r\n    const cacheKey = this.getCacheKey(symbol);\r\n    \r\n    // æ¸…é™¤ localStorage\r\n    localStorage.removeItem(cacheKey);\r\n    \r\n    // æ¸…é™¤å…§å­˜ç·©å­˜\r\n    this.memoryCache.delete(cacheKey);\r\n    \r\n    console.log(`Cleared cache for ${symbol}`);\r\n  }\r\n\r\n  // æ¸…é™¤æ‰€æœ‰æŠ€è¡“æŒ‡æ¨™ç·©å­˜\r\n  clearAllCache() {\r\n    try {\r\n      // æ¸…é™¤ localStorage ä¸­çš„æ‰€æœ‰æŠ€è¡“æŒ‡æ¨™ç·©å­˜\r\n      const keysToRemove = [];\r\n      for (let i = 0; i < localStorage.length; i++) {\r\n        const key = localStorage.key(i);\r\n        if (key && key.startsWith(this.cachePrefix)) {\r\n          keysToRemove.push(key);\r\n        }\r\n      }\r\n      \r\n      keysToRemove.forEach(key => localStorage.removeItem(key));\r\n      \r\n      // æ¸…é™¤å…§å­˜ç·©å­˜\r\n      this.memoryCache.clear();\r\n      \r\n      console.log(`Cleared all technical indicators cache (${keysToRemove.length} items)`);\r\n      \r\n    } catch (error) {\r\n      console.warn('Failed to clear all cache:', error);\r\n    }\r\n  }\r\n\r\n  // ç²å–ç·©å­˜çµ±è¨ˆä¿¡æ¯\r\n  getCacheStats() {\r\n    const stats = {\r\n      memoryCache: this.memoryCache.size,\r\n      localStorageCache: 0,\r\n      totalSize: 0\r\n    };\r\n\r\n    try {\r\n      for (let i = 0; i < localStorage.length; i++) {\r\n        const key = localStorage.key(i);\r\n        if (key && key.startsWith(this.cachePrefix)) {\r\n          stats.localStorageCache++;\r\n          const value = localStorage.getItem(key);\r\n          if (value) {\r\n            stats.totalSize += value.length;\r\n          }\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.warn('Failed to get cache stats:', error);\r\n    }\r\n\r\n    return stats;\r\n  }\r\n}\r\n\r\n// å‰µå»ºå–®ä¾‹å¯¦ä¾‹\r\nexport const technicalIndicatorsCache = new TechnicalIndicatorsCache();\r\nexport default technicalIndicatorsCache;","/**\r\n * æŠ€è¡“æŒ‡æ¨™æ ¸å¿ƒå¯¦ç¾\r\n * åŸºæ–¼ YAML è¦æ ¼ indicator_algorithms v2.0.0\r\n * \r\n * ç‰¹é»:\r\n * - æ‰€æœ‰è¼¸å‡ºåºåˆ—èˆ‡è¼¸å…¥å°é½Šï¼Œé•·åº¦ä¸€è‡´\r\n * - å‰ (period-1) æ ¹è¼¸å‡º NaN\r\n * - SMA: åš´æ ¼æŒ‰ç…§ v2.0.0 è¦æ ¼å¯¦ç¾\r\n * - EMA: æ”¯æ´ sma_seed å’Œ first_value åˆå§‹åŒ–æ¨¡å¼\r\n * - å®Œæ•´çš„ NaN è™•ç†ç­–ç•¥ (strict, skipna, hold_last ç­‰)\r\n */\r\n\r\n// =========================\r\n// 0) å…±ç”¨è³‡æ–™æ¨¡å‹èˆ‡è¦ç´„\r\n// =========================\r\n\r\nconst EPSILON = 1e-12; // é¿å…é™¤ä»¥ 0\r\n\r\n/**\r\n * æ•¸å€¼ç­–ç•¥è™•ç†\r\n */\r\nfunction handleNaN(value) {\r\n  return (value === null || value === undefined || !isFinite(value)) ? NaN : value;\r\n}\r\n\r\nfunction clampRSI(rsi) {\r\n  return Math.max(0, Math.min(100, rsi));\r\n}\r\n\r\n/**\r\n * æ»¾å‹•çª—å£æ¥µå€¼è¨ˆç®—\r\n */\r\nfunction rollingMax(values, period) {\r\n  const result = new Array(values.length);\r\n  \r\n  for (let i = 0; i < values.length; i++) {\r\n    if (i < period - 1) {\r\n      result[i] = NaN;\r\n    } else {\r\n      let max = -Infinity;\r\n      for (let j = i - period + 1; j <= i; j++) {\r\n        if (!isNaN(values[j])) {\r\n          max = Math.max(max, values[j]);\r\n        }\r\n      }\r\n      result[i] = max === -Infinity ? NaN : max;\r\n    }\r\n  }\r\n  \r\n  return result;\r\n}\r\n\r\nfunction rollingMin(values, period) {\r\n  const result = new Array(values.length);\r\n  \r\n  for (let i = 0; i < values.length; i++) {\r\n    if (i < period - 1) {\r\n      result[i] = NaN;\r\n    } else {\r\n      let min = Infinity;\r\n      for (let j = i - period + 1; j <= i; j++) {\r\n        if (!isNaN(values[j])) {\r\n          min = Math.min(min, values[j]);\r\n        }\r\n      }\r\n      result[i] = min === Infinity ? NaN : min;\r\n    }\r\n  }\r\n  \r\n  return result;\r\n}\r\n\r\n// =========================\r\n// 1) å…±ç”¨ Helper å®šç¾©\r\n// =========================\r\n\r\n/**\r\n * SMA Helper - åŸºæ–¼ v2.0.0 è¦æ ¼\r\n * @param {number[]} values - è¼¸å…¥åºåˆ—\r\n * @param {number} period - é€±æœŸ N\r\n * @param {string} nanPolicy - NaN è™•ç†ç­–ç•¥: 'strict' | 'skipna'\r\n * @param {number} minPeriods - skipna æ¨¡å¼ä¸‹çš„æœ€å°æœ‰æ•ˆå€¼æ•¸é‡\r\n * @returns {number[]} SMA åºåˆ—ï¼Œèˆ‡è¼¸å…¥å°é½Š\r\n */\r\nfunction sma(values, period, nanPolicy = 'strict', minPeriods = null) {\r\n  if (period <= 0) throw new Error('Period must be positive');\r\n  \r\n  const L = values.length;\r\n  const result = new Array(L).fill(NaN);\r\n  \r\n  // minPeriods é è¨­ç‚º period\r\n  if (minPeriods === null) minPeriods = period;\r\n  \r\n  for (let t = 0; t < L; t++) {\r\n    if (t < period - 1) {\r\n      // t < N-1: keep NaN\r\n      continue;\r\n    }\r\n    \r\n    // window = x[t-N+1 .. t]\r\n    const window = values.slice(t - period + 1, t + 1);\r\n    \r\n    if (nanPolicy === 'strict') {\r\n      // å¦‚æœ window ä¸­æœ‰ä»»ä½• NaNï¼Œå‰‡ sma[t] = NaN\r\n      if (window.some(v => isNaN(v))) {\r\n        result[t] = NaN;\r\n      } else {\r\n        result[t] = window.reduce((sum, v) => sum + v, 0) / window.length;\r\n      }\r\n    } else if (nanPolicy === 'skipna') {\r\n      // åªè¨ˆç®—æœ‰æ•ˆå€¼\r\n      const validValues = window.filter(v => !isNaN(v));\r\n      if (validValues.length < minPeriods) {\r\n        result[t] = NaN;\r\n      } else {\r\n        result[t] = validValues.reduce((sum, v) => sum + v, 0) / validValues.length;\r\n      }\r\n    }\r\n  }\r\n  \r\n  return result;\r\n}\r\n\r\n/**\r\n * EMA Helper - åŸºæ–¼ v2.0.0 è¦æ ¼\r\n * @param {number[]} values - è¼¸å…¥åºåˆ—\r\n * @param {number} period - é€±æœŸ N\r\n * @param {number} alpha - å¹³æ»‘ä¿‚æ•¸ï¼Œé è¨­ 2/(period+1)\r\n * @param {string} initMode - åˆå§‹åŒ–ç­–ç•¥: 'sma_seed' | 'first_value'\r\n * @param {string} nanPolicy - NaN è™•ç†ç­–ç•¥: 'strict_break' | 'strict_recover' | 'hold_last'\r\n * @returns {number[]} EMA åºåˆ—ï¼Œèˆ‡è¼¸å…¥å°é½Š\r\n */\r\nfunction ema(values, period, alpha = null, initMode = 'sma_seed', nanPolicy = 'strict_recover') {\r\n  if (period <= 0) throw new Error('Period must be positive');\r\n  \r\n  const L = values.length;\r\n  const result = new Array(L).fill(NaN);\r\n  \r\n  // é è¨­ alpha = 2/(N+1)\r\n  if (alpha === null) alpha = 2 / (period + 1);\r\n  \r\n  // é©—è­‰ alpha ç¯„åœ\r\n  if (alpha <= 0 || alpha > 1) {\r\n    throw new Error('Alpha must be in (0, 1]');\r\n  }\r\n  \r\n  if (initMode === 'first_value') {\r\n    // æ‰¾åˆ°ç¬¬ä¸€å€‹é NaN å€¼ä½œç‚ºåˆå§‹å€¼\r\n    let firstValidIndex = -1;\r\n    for (let k = 0; k < L; k++) {\r\n      if (!isNaN(values[k])) {\r\n        firstValidIndex = k;\r\n        break;\r\n      }\r\n    }\r\n    \r\n    if (firstValidIndex === -1) {\r\n      // æ²’æœ‰æ‰¾åˆ°æœ‰æ•ˆå€¼ï¼Œè¿”å›å…¨ NaN\r\n      return result;\r\n    }\r\n    \r\n    // è¨­ç½®åˆå§‹å€¼\r\n    result[firstValidIndex] = values[firstValidIndex];\r\n    \r\n    // å¾ä¸‹ä¸€å€‹é»é–‹å§‹è¨ˆç®—\r\n    for (let t = firstValidIndex + 1; t < L; t++) {\r\n      if (isNaN(values[t])) {\r\n        // è™•ç† NaN è¼¸å…¥\r\n        if (nanPolicy === 'hold_last') {\r\n          result[t] = result[t - 1];\r\n        } else {\r\n          result[t] = NaN;\r\n        }\r\n      } else {\r\n        // æœ‰æ•ˆè¼¸å…¥\r\n        if (isNaN(result[t - 1])) {\r\n          if (nanPolicy === 'strict_recover') {\r\n            result[t] = NaN; // ç­‰å¾…é‡æ–° seed\r\n          } else {\r\n            result[t] = NaN;\r\n          }\r\n        } else {\r\n          result[t] = alpha * values[t] + (1 - alpha) * result[t - 1];\r\n        }\r\n      }\r\n    }\r\n    \r\n  } else if (initMode === 'sma_seed') {\r\n    // sma_seed æ¨¡å¼ï¼šåœ¨ t = N-1 è™•ç”¨ SMA åˆå§‹åŒ–\r\n    \r\n    for (let t = 0; t < L; t++) {\r\n      if (t < period - 1) {\r\n        // t < N-1: keep NaN\r\n        continue;\r\n      }\r\n      \r\n      if (t === period - 1) {\r\n        // é¦–æ¬¡ seed é»\r\n        const window = values.slice(0, period);\r\n        if (window.some(v => isNaN(v))) {\r\n          result[t] = NaN;\r\n        } else {\r\n          result[t] = window.reduce((sum, v) => sum + v, 0) / window.length;\r\n        }\r\n      } else {\r\n        // t > N-1\r\n        if (isNaN(values[t])) {\r\n          // è¼¸å…¥æ˜¯ NaN\r\n          if (nanPolicy === 'hold_last') {\r\n            result[t] = result[t - 1];\r\n          } else if (nanPolicy === 'strict_break') {\r\n            result[t] = NaN;\r\n            // æ¨™è¨˜ç‚º brokenï¼Œå¾ŒçºŒéƒ½æ˜¯ NaN (ç°¡åŒ–å¯¦ç¾)\r\n          } else if (nanPolicy === 'strict_recover') {\r\n            result[t] = NaN;\r\n          }\r\n        } else {\r\n          // è¼¸å…¥æœ‰æ•ˆ\r\n          if (isNaN(result[t - 1])) {\r\n            if (nanPolicy === 'strict_recover') {\r\n              // re-seed: æª¢æŸ¥æœ€è¿‘ N æ ¹æ˜¯å¦éƒ½æœ‰æ•ˆ\r\n              const recentWindow = values.slice(t - period + 1, t + 1);\r\n              if (recentWindow.some(v => isNaN(v))) {\r\n                result[t] = NaN;\r\n              } else {\r\n                // é‡æ–° seed\r\n                result[t] = recentWindow.reduce((sum, v) => sum + v, 0) / recentWindow.length;\r\n              }\r\n            } else {\r\n              result[t] = NaN;\r\n            }\r\n          } else {\r\n            // æ­£å¸¸ EMA è¨ˆç®—\r\n            result[t] = alpha * values[t] + (1 - alpha) * result[t - 1];\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  \r\n  return result;\r\n}\r\n\r\n/**\r\n * Wilder å¹³æ»‘ Helper (å¢å¼·ç‰ˆï¼Œæ›´å¥½çš„ NaN è™•ç†)\r\n * @param {number[]} values - è¼¸å…¥åºåˆ—\r\n * @param {number} period - é€±æœŸ\r\n * @returns {number[]} Wilder å¹³æ»‘åºåˆ—\r\n */\r\nfunction wilderSmoothing(values, period) {\r\n  if (period <= 0) throw new Error('Period must be positive');\r\n  \r\n  const result = new Array(values.length);\r\n  \r\n  // åˆå§‹åŒ–éšæ®µ\r\n  for (let i = 0; i < period - 1; i++) {\r\n    result[i] = NaN;\r\n  }\r\n  \r\n  if (values.length < period) {\r\n    console.log(`Wilder: Insufficient data length ${values.length} < ${period}`);\r\n    return result;\r\n  }\r\n  \r\n  // ç¬¬ä¸€å€‹å€¼ä½¿ç”¨ SMA - å°‹æ‰¾è¶³å¤ çš„æœ‰æ•ˆå€¼\r\n  let sum = 0;\r\n  let count = 0;\r\n  let validIndices = [];\r\n  \r\n  // æ”¶é›†å‰ period å€‹æœ‰æ•ˆå€¼\r\n  for (let j = 0; j < values.length && validIndices.length < period; j++) {\r\n    if (!isNaN(values[j])) {\r\n      validIndices.push(j);\r\n      sum += values[j];\r\n      count++;\r\n    }\r\n  }\r\n  \r\n  console.log(`Wilder: Found ${count} valid values in first ${period} positions for SMA initialization`);\r\n  \r\n  if (count < period) {\r\n    console.warn(`Wilder: Insufficient valid data for SMA initialization: ${count} < ${period}`);\r\n    return result; // è¿”å›å…¨ NaN\r\n  }\r\n  \r\n  // ä½¿ç”¨æœ€å¾Œä¸€å€‹æœ‰æ•ˆå€¼çš„ä½ç½®ä½œç‚ºåˆå§‹åŒ–é»\r\n  const initIndex = Math.max(period - 1, validIndices[period - 1]);\r\n  result[initIndex] = sum / period;\r\n  \r\n  console.log(`Wilder: Initialized at index ${initIndex} with value ${result[initIndex]}`);\r\n  \r\n  // Wilder éè¿´å¹³æ»‘ - å¾åˆå§‹åŒ–é»é–‹å§‹\r\n  for (let i = initIndex + 1; i < values.length; i++) {\r\n    if (isNaN(result[i - 1]) || isNaN(values[i])) {\r\n      result[i] = NaN;\r\n    } else {\r\n      result[i] = (result[i - 1] * (period - 1) + values[i]) / period;\r\n    }\r\n  }\r\n  \r\n  const validCount = result.filter(v => !isNaN(v)).length;\r\n  console.log(`Wilder: Generated ${validCount} valid smoothed values`);\r\n  \r\n  return result;\r\n}\r\n\r\n// =========================\r\n// 2) æŠ€è¡“æŒ‡æ¨™å¯¦ç¾\r\n// =========================\r\n\r\n/**\r\n * MA (EMA) - æŒ‡æ•¸ç§»å‹•å¹³å‡ç·š - v2.0.0 è¦æ ¼\r\n */\r\nfunction calculateMA(close, period = 5, alpha = null, initMode = 'sma_seed', nanPolicy = 'strict_recover') {\r\n  return ema(close, period, alpha, initMode, nanPolicy);\r\n}\r\n\r\n/**\r\n * SMA - ç°¡å–®ç§»å‹•å¹³å‡ç·š - v2.0.0 è¦æ ¼\r\n */\r\nfunction calculateSMA(close, period = 5, nanPolicy = 'strict', minPeriods = null) {\r\n  return sma(close, period, nanPolicy, minPeriods);\r\n}\r\n\r\n/**\r\n * Ichimoku Base Line (Kijun-sen)\r\n */\r\nfunction calculateIchimokuBaseLine(high, low, period = 26) {\r\n  const hh = rollingMax(high, period);\r\n  const ll = rollingMin(low, period);\r\n  \r\n  const result = new Array(high.length);\r\n  for (let i = 0; i < high.length; i++) {\r\n    if (isNaN(hh[i]) || isNaN(ll[i])) {\r\n      result[i] = NaN;\r\n    } else {\r\n      result[i] = (hh[i] + ll[i]) / 2;\r\n    }\r\n  }\r\n  \r\n  return result;\r\n}\r\n\r\n/**\r\n * Ichimoku Conversion Line (Tenkan-sen)\r\n */\r\nfunction calculateIchimokuConversionLine(high, low, period = 9) {\r\n  return calculateIchimokuBaseLine(high, low, period);\r\n}\r\n\r\n/**\r\n * Ichimoku Lagging Span (Chikou Span)\r\n */\r\nfunction calculateIchimokuLaggingSpan(close, shift = 26) {\r\n  if (shift < 0) throw new Error('Shift must be non-negative');\r\n  \r\n  const result = new Array(close.length);\r\n  \r\n  for (let i = 0; i < close.length; i++) {\r\n    if (i + shift < close.length) {\r\n      result[i] = close[i];\r\n    } else {\r\n      result[i] = NaN; // æœ€å¾Œ shift æ ¹ç„¡æœªä¾†è³‡æ–™\r\n    }\r\n  }\r\n  \r\n  return result;\r\n}\r\n\r\n/**\r\n * VWMA - æˆäº¤é‡åŠ æ¬Šç§»å‹•å¹³å‡ç·š\r\n */\r\nfunction calculateVWMA(close, volume, period = 20) {\r\n  const result = new Array(close.length);\r\n  \r\n  for (let i = 0; i < close.length; i++) {\r\n    if (i < period - 1) {\r\n      result[i] = NaN;\r\n    } else {\r\n      let numerator = 0;\r\n      let denominator = 0;\r\n      \r\n      for (let j = i - period + 1; j <= i; j++) {\r\n        if (!isNaN(close[j]) && !isNaN(volume[j])) {\r\n          numerator += close[j] * volume[j];\r\n          denominator += volume[j];\r\n        }\r\n      }\r\n      \r\n      result[i] = denominator <= EPSILON ? NaN : numerator / denominator;\r\n    }\r\n  }\r\n  \r\n  return result;\r\n}\r\n\r\n/**\r\n * RSI - ç›¸å°å¼·å¼±æŒ‡æ•¸ (Wilder å¹³æ»‘)\r\n */\r\nfunction calculateRSI(close, period = 14) {\r\n  if (close.length < period + 1) {\r\n    return new Array(close.length).fill(NaN);\r\n  }\r\n  \r\n  // Step A: è¨ˆç®—åƒ¹æ ¼è®ŠåŒ–å’Œæ”¶ç›Š/æå¤±\r\n  const delta = new Array(close.length);\r\n  const gain = new Array(close.length);\r\n  const loss = new Array(close.length);\r\n  \r\n  delta[0] = NaN;\r\n  gain[0] = NaN;\r\n  loss[0] = NaN;\r\n  \r\n  for (let i = 1; i < close.length; i++) {\r\n    if (isNaN(close[i]) || isNaN(close[i - 1])) {\r\n      delta[i] = NaN;\r\n      gain[i] = NaN;\r\n      loss[i] = NaN;\r\n    } else {\r\n      delta[i] = close[i] - close[i - 1];\r\n      gain[i] = Math.max(delta[i], 0);\r\n      loss[i] = Math.max(-delta[i], 0);\r\n    }\r\n  }\r\n  \r\n  // Step B: Wilder å¹³æ»‘\r\n  const avgGain = wilderSmoothing(gain.slice(1), period); // å»æ‰ç¬¬ä¸€å€‹ NaN\r\n  const avgLoss = wilderSmoothing(loss.slice(1), period);\r\n  \r\n  // Step C: è¨ˆç®— RSI\r\n  const result = new Array(close.length);\r\n  result[0] = NaN; // ç¬¬ä¸€å€‹é»æ²’æœ‰ delta\r\n  \r\n  for (let i = 1; i < close.length; i++) {\r\n    const avgGainValue = avgGain[i - 1];\r\n    const avgLossValue = avgLoss[i - 1];\r\n    \r\n    if (isNaN(avgGainValue) || isNaN(avgLossValue)) {\r\n      result[i] = NaN;\r\n    } else if (avgLossValue <= EPSILON) {\r\n      result[i] = 100; // æ²’æœ‰ä¸‹è·Œ\r\n    } else {\r\n      const rs = avgGainValue / avgLossValue;\r\n      const rsi = 100 - (100 / (1 + rs));\r\n      result[i] = clampRSI(rsi);\r\n    }\r\n  }\r\n  \r\n  return result;\r\n}\r\n\r\n/**\r\n * ADX - å¹³å‡è¶¨å‘æŒ‡æ•¸ (å®Œæ•´ Wilder å¯¦ç¾ï¼Œå¢å¼·æ•¸æ“šé©—è­‰)\r\n */\r\nfunction calculateADX(high, low, close, period = 14) {\r\n  const length = Math.min(high.length, low.length, close.length);\r\n  \r\n  // å¢å¼·æ•¸æ“šé©—è­‰\r\n  if (length < period * 2) {\r\n    console.warn(`ADX: Insufficient data length ${length} < ${period * 2} for period ${period}`);\r\n    return {\r\n      adx: new Array(length).fill(NaN),\r\n      plusDI: new Array(length).fill(NaN),\r\n      minusDI: new Array(length).fill(NaN)\r\n    };\r\n  }\r\n  \r\n  // æª¢æŸ¥æ•¸æ“šè³ªé‡\r\n  let validOHLCCount = 0;\r\n  for (let i = 0; i < length; i++) {\r\n    if (!isNaN(high[i]) && !isNaN(low[i]) && !isNaN(close[i])) {\r\n      validOHLCCount++;\r\n    }\r\n  }\r\n  \r\n  console.log(`ADX: Processing ${length} data points, ${validOHLCCount} valid OHLC points`);\r\n  \r\n  if (validOHLCCount < period * 2) {\r\n    console.warn(`ADX: Insufficient valid OHLC data ${validOHLCCount} < ${period * 2}`);\r\n    return {\r\n      adx: new Array(length).fill(NaN),\r\n      plusDI: new Array(length).fill(NaN),\r\n      minusDI: new Array(length).fill(NaN)\r\n    };\r\n  }\r\n  \r\n  // Step A: è¨ˆç®— DM å’Œ TR\r\n  const upMove = new Array(length);\r\n  const downMove = new Array(length);\r\n  const plusDM = new Array(length);\r\n  const minusDM = new Array(length);\r\n  const tr = new Array(length);\r\n  \r\n  upMove[0] = NaN;\r\n  downMove[0] = NaN;\r\n  plusDM[0] = NaN;\r\n  minusDM[0] = NaN;\r\n  tr[0] = NaN;\r\n  \r\n  for (let i = 1; i < length; i++) {\r\n    // æª¢æŸ¥ç•¶å‰å’Œå‰ä¸€å€‹æ•¸æ“šé»çš„æœ‰æ•ˆæ€§\r\n    if (isNaN(high[i]) || isNaN(low[i]) || isNaN(close[i]) ||\r\n        isNaN(high[i-1]) || isNaN(low[i-1]) || isNaN(close[i-1])) {\r\n      upMove[i] = NaN;\r\n      downMove[i] = NaN;\r\n      plusDM[i] = NaN;\r\n      minusDM[i] = NaN;\r\n      tr[i] = NaN;\r\n      continue;\r\n    }\r\n    \r\n    // Up/Down Move\r\n    upMove[i] = high[i] - high[i - 1];\r\n    downMove[i] = low[i - 1] - low[i];\r\n    \r\n    // +DM / -DM\r\n    if (upMove[i] > downMove[i] && upMove[i] > 0) {\r\n      plusDM[i] = upMove[i];\r\n    } else {\r\n      plusDM[i] = 0;\r\n    }\r\n    \r\n    if (downMove[i] > upMove[i] && downMove[i] > 0) {\r\n      minusDM[i] = downMove[i];\r\n    } else {\r\n      minusDM[i] = 0;\r\n    }\r\n    \r\n    // True Range\r\n    const tr1 = high[i] - low[i];\r\n    const tr2 = Math.abs(high[i] - close[i - 1]);\r\n    const tr3 = Math.abs(low[i] - close[i - 1]);\r\n    tr[i] = Math.max(tr1, tr2, tr3);\r\n  }\r\n  \r\n  // Step B: Wilder å¹³æ»‘ - è·³éç¬¬ä¸€å€‹ NaN å€¼\r\n  const smTR = wilderSmoothing(tr.slice(1), period);\r\n  const smPlusDM = wilderSmoothing(plusDM.slice(1), period);\r\n  const smMinusDM = wilderSmoothing(minusDM.slice(1), period);\r\n  \r\n  console.log(`ADX: Wilder smoothing results - TR valid: ${smTR.filter(v => !isNaN(v)).length}, +DM valid: ${smPlusDM.filter(v => !isNaN(v)).length}, -DM valid: ${smMinusDM.filter(v => !isNaN(v)).length}`);\r\n  \r\n  // Step C: è¨ˆç®— DI\r\n  const plusDI = new Array(length);\r\n  const minusDI = new Array(length);\r\n  const dx = new Array(length);\r\n  \r\n  plusDI[0] = NaN;\r\n  minusDI[0] = NaN;\r\n  dx[0] = NaN;\r\n  \r\n  for (let i = 1; i < length; i++) {\r\n    const smTRValue = smTR[i - 1];\r\n    const smPlusDMValue = smPlusDM[i - 1];\r\n    const smMinusDMValue = smMinusDM[i - 1];\r\n    \r\n    if (isNaN(smTRValue) || isNaN(smPlusDMValue) || isNaN(smMinusDMValue) || smTRValue <= EPSILON) {\r\n      plusDI[i] = NaN;\r\n      minusDI[i] = NaN;\r\n      dx[i] = NaN;\r\n    } else {\r\n      plusDI[i] = 100 * smPlusDMValue / smTRValue;\r\n      minusDI[i] = 100 * smMinusDMValue / smTRValue;\r\n      \r\n      const diSum = plusDI[i] + minusDI[i];\r\n      if (diSum <= EPSILON) {\r\n        dx[i] = NaN;\r\n      } else {\r\n        dx[i] = 100 * Math.abs(plusDI[i] - minusDI[i]) / diSum;\r\n      }\r\n    }\r\n  }\r\n  \r\n  // Step D: ADX Wilder å¹³æ»‘\r\n  const adx = wilderSmoothing(dx.slice(1), period);\r\n  \r\n  console.log(`ADX: Final ADX smoothing - DX valid: ${dx.filter(v => !isNaN(v)).length}, ADX valid: ${adx.filter(v => !isNaN(v)).length}`);\r\n  \r\n  // å°é½Šçµæœ\r\n  const adxResult = new Array(length);\r\n  adxResult[0] = NaN;\r\n  for (let i = 1; i < length; i++) {\r\n    adxResult[i] = adx[i - 1];\r\n  }\r\n  \r\n  // æœ€çµ‚é©—è­‰\r\n  const finalValidADX = adxResult.filter(v => !isNaN(v)).length;\r\n  console.log(`ADX: Final result - ${finalValidADX} valid ADX values out of ${length} total`);\r\n  \r\n  return {\r\n    adx: adxResult,\r\n    plusDI: plusDI,\r\n    minusDI: minusDI\r\n  };\r\n}\r\n\r\n/**\r\n * MACD - ç§»å‹•å¹³å‡æ”¶æ–‚ç™¼æ•£\r\n */\r\nfunction calculateMACD(close, fastPeriod = 12, slowPeriod = 26, signalPeriod = 9) {\r\n  if (slowPeriod <= fastPeriod) {\r\n    console.warn('Slow period should be greater than fast period');\r\n  }\r\n  \r\n  const emaFast = ema(close, fastPeriod);\r\n  const emaSlow = ema(close, slowPeriod);\r\n  \r\n  // MACD Line\r\n  const macd = new Array(close.length);\r\n  for (let i = 0; i < close.length; i++) {\r\n    if (isNaN(emaFast[i]) || isNaN(emaSlow[i])) {\r\n      macd[i] = NaN;\r\n    } else {\r\n      macd[i] = emaFast[i] - emaSlow[i];\r\n    }\r\n  }\r\n  \r\n  // Signal Line\r\n  const signal = ema(macd, signalPeriod);\r\n  \r\n  // Histogram\r\n  const histogram = new Array(close.length);\r\n  for (let i = 0; i < close.length; i++) {\r\n    if (isNaN(macd[i]) || isNaN(signal[i])) {\r\n      histogram[i] = NaN;\r\n    } else {\r\n      histogram[i] = macd[i] - signal[i];\r\n    }\r\n  }\r\n  \r\n  return {\r\n    macd: macd,\r\n    signal: signal,\r\n    histogram: histogram\r\n  };\r\n}\r\n\r\n// =========================\r\n// 3) çµ±ä¸€è¨ˆç®—æ¥å£\r\n// =========================\r\n\r\n/**\r\n * è¨ˆç®—æ‰€æœ‰æŠ€è¡“æŒ‡æ¨™\r\n * @param {Object} ohlcv - OHLCV æ•¸æ“š {open, high, low, close, volume}\r\n * @returns {Object} æ‰€æœ‰æŒ‡æ¨™çµæœ\r\n */\r\nfunction calculateAllIndicators(ohlcv) {\r\n  const { open, high, low, close, volume } = ohlcv;\r\n  \r\n  // é©—è­‰æ•¸æ“šé•·åº¦ä¸€è‡´\r\n  const length = close.length;\r\n  if (high.length !== length || low.length !== length || \r\n      open.length !== length || volume.length !== length) {\r\n    throw new Error('All OHLCV arrays must have the same length');\r\n  }\r\n  \r\n  // è¨ˆç®—æ‰€æœ‰æŒ‡æ¨™\r\n  const results = {\r\n    // MA (EMA)\r\n    MA_5: calculateMA(close, 5),\r\n    MA_10: calculateMA(close, 10),\r\n    MA_30: calculateMA(close, 30),\r\n    \r\n    // SMA\r\n    SMA_5: calculateSMA(close, 5),\r\n    SMA_10: calculateSMA(close, 10),\r\n    SMA_30: calculateSMA(close, 30),\r\n    \r\n    // Ichimoku\r\n    ICHIMOKU_BASELINE_26: calculateIchimokuBaseLine(high, low, 26),\r\n    ICHIMOKU_CONVERSIONLINE_9: calculateIchimokuConversionLine(high, low, 9),\r\n    ICHIMOKU_LAGGINGSPAN_26: calculateIchimokuLaggingSpan(close, 26),\r\n    \r\n    // VWMA\r\n    VWMA_20: calculateVWMA(close, volume, 20),\r\n    \r\n    // RSI\r\n    RSI_14: calculateRSI(close, 14),\r\n    \r\n    // MACD\r\n    ...(() => {\r\n      const macdResult = calculateMACD(close, 12, 26, 9);\r\n      return {\r\n        MACD_12_26_9: macdResult.macd,\r\n        MACD_SIGNAL_9: macdResult.signal,\r\n        MACD_HIST: macdResult.histogram\r\n      };\r\n    })(),\r\n    \r\n    // ADX\r\n    ...(() => {\r\n      const adxResult = calculateADX(high, low, close, 14);\r\n      return {\r\n        ADX_14: adxResult.adx,\r\n        ADX_14_PLUS_DI: adxResult.plusDI,\r\n        ADX_14_MINUS_DI: adxResult.minusDI\r\n      };\r\n    })()\r\n  };\r\n  \r\n  // é©—è­‰æ‰€æœ‰çµæœé•·åº¦ä¸€è‡´\r\n  for (const [key, values] of Object.entries(results)) {\r\n    if (values.length !== length) {\r\n      console.error(`Length mismatch for ${key}: expected ${length}, got ${values.length}`);\r\n    }\r\n  }\r\n  \r\n  return results;\r\n}\r\n\r\n// =========================\r\n// 4) å°å‡º\r\n// =========================\r\n\r\nexport {\r\n  // Helper å‡½æ•¸\r\n  sma,\r\n  ema,\r\n  wilderSmoothing,\r\n  rollingMax,\r\n  rollingMin,\r\n  \r\n  // å€‹åˆ¥æŒ‡æ¨™\r\n  calculateMA,\r\n  calculateSMA,\r\n  calculateIchimokuBaseLine,\r\n  calculateIchimokuConversionLine,\r\n  calculateIchimokuLaggingSpan,\r\n  calculateVWMA,\r\n  calculateRSI,\r\n  calculateADX,\r\n  calculateMACD,\r\n  \r\n  // çµ±ä¸€æ¥å£\r\n  calculateAllIndicators,\r\n  \r\n  // å¸¸æ•¸\r\n  EPSILON\r\n};\r\n\r\nexport default {\r\n  calculateAllIndicators,\r\n  calculateMA,\r\n  calculateSMA,\r\n  calculateIchimokuBaseLine,\r\n  calculateIchimokuConversionLine,\r\n  calculateIchimokuLaggingSpan,\r\n  calculateVWMA,\r\n  calculateRSI,\r\n  calculateADX,\r\n  calculateMACD\r\n};","// Yahoo Finance API æ•´åˆ\r\n// ä½¿ç”¨ Yahoo Finance çš„å…¬é–‹ API ç«¯é»\r\n\r\nimport technicalIndicatorsCache from './technicalIndicatorsCache.js';\r\nimport { calculateAllIndicators } from './technicalIndicatorsCore.js';\r\n\r\nclass YahooFinanceAPI {\r\n  constructor() {\r\n    // ä½¿ç”¨å¤šå€‹ CORS ä»£ç†æœå‹™ä¾†è§£æ±ºè·¨åŸŸå•é¡Œ - 2024å¹´12æœˆä¿®æ­£ç‰ˆ\r\n    // å„ªå…ˆä½¿ç”¨çœŸæ­£ç„¡é™åˆ¶çš„å…è²»ä»£ç†æœå‹™\r\n    this.corsProxies = [\r\n      // ğŸ†“ çœŸæ­£å…è²»ä¸”ç„¡ç”Ÿç”¢ç’°å¢ƒé™åˆ¶çš„ä»£ç†\r\n      'https://api.allorigins.win/raw?url=',                // æ¸¬è©¦æˆåŠŸ: 368ms, ç„¡ç”Ÿç”¢é™åˆ¶ âœ…\r\n      \r\n      // âš ï¸ å¯èƒ½æœ‰ç”Ÿç”¢ç’°å¢ƒé™åˆ¶çš„ä»£ç†ï¼ˆä½†ä¿ç•™ä½œç‚ºé–‹ç™¼/æ¸¬è©¦ç”¨ï¼‰\r\n      'https://corsproxy.io/?',                             // æ¸¬è©¦æˆåŠŸ: 119ms, ä½†å¯èƒ½é™åˆ¶ç”Ÿç”¢ç’°å¢ƒ âš ï¸\r\n      \r\n      // ğŸ”„ å…¶ä»–å…è²»ä»£ç†ï¼ˆç‹€æ…‹æœªçŸ¥ï¼Œä½œç‚ºå‚™ç”¨ï¼‰\r\n      'https://cors.sh/',                                    // ç¶²è·¯éŒ¯èª¤ï¼Œä½†å¯èƒ½é–“æ­‡æ€§å¯ç”¨\r\n      'https://proxy-cors.isomorphic-git.org/',             // ç¶²è·¯éŒ¯èª¤ï¼Œä½†å¯èƒ½é–“æ­‡æ€§å¯ç”¨\r\n      'https://thingproxy.freeboard.io/fetch/',             // ç¶²è·¯éŒ¯èª¤ï¼Œä½†å¯èƒ½é–“æ­‡æ€§å¯ç”¨\r\n      'https://cors-proxy.htmldriven.com/?url=',            // ç¶²è·¯éŒ¯èª¤ï¼Œä½†å¯èƒ½é–“æ­‡æ€§å¯ç”¨\r\n      'https://cors-anywhere.herokuapp.com/'                // 403 Forbiddenï¼Œæœ€å¾Œå‚™ç”¨\r\n    ];\r\n    this.baseUrl = 'https://query1.finance.yahoo.com/v8/finance/chart/';\r\n    this.cache = new Map();\r\n    this.cacheTimeout = 5 * 60 * 1000; // 5 åˆ†é˜ç·©å­˜ (ç”¨æ–¼ API è«‹æ±‚ç·©å­˜)\r\n    this.currentProxyIndex = 0; // å¾æœ€å¯é çš„å…è²»ä»£ç†é–‹å§‹\r\n  }\r\n\r\n  // ç²å–æŠ€è¡“æŒ‡æ¨™æ•¸æ“š (å¸¶æ¯æ—¥ç·©å­˜)\r\n  async getTechnicalIndicators(symbol) {\r\n    // 1. å…ˆæª¢æŸ¥æ¯æ—¥ç·©å­˜\r\n    const cachedData = await technicalIndicatorsCache.getTechnicalIndicators(symbol);\r\n    if (cachedData) {\r\n      return cachedData;\r\n    }\r\n\r\n    // 2. ç·©å­˜æœªå‘½ä¸­ï¼Œå¾ API ç²å–æ•¸æ“š\r\n    const freshData = await this.fetchTechnicalIndicatorsFromAPI(symbol);\r\n    \r\n    // 3. å¦‚æœç²å–æˆåŠŸï¼Œå­˜å…¥æ¯æ—¥ç·©å­˜\r\n    if (freshData && !freshData.error) {\r\n      await technicalIndicatorsCache.setTechnicalIndicators(symbol, freshData);\r\n    }\r\n\r\n    return freshData;\r\n  }\r\n\r\n  // å¾ API ç²å–æŠ€è¡“æŒ‡æ¨™æ•¸æ“š (åŸæœ‰é‚è¼¯)\r\n  async fetchTechnicalIndicatorsFromAPI(symbol) {\r\n    const cacheKey = `technical_${symbol}`;\r\n    \r\n    // æª¢æŸ¥ç·©å­˜\r\n    if (this.cache.has(cacheKey)) {\r\n      const cached = this.cache.get(cacheKey);\r\n      if (Date.now() - cached.timestamp < this.cacheTimeout) {\r\n        console.log(`Using cached data for ${symbol}`);\r\n        return cached.data;\r\n      }\r\n    }\r\n\r\n    // å˜—è©¦å¤šå€‹ä»£ç†æœå‹™\r\n    for (let i = 0; i < this.corsProxies.length; i++) {\r\n      try {\r\n        const proxyIndex = (this.currentProxyIndex + i) % this.corsProxies.length;\r\n        const proxy = this.corsProxies[proxyIndex];\r\n        \r\n        console.log(`Fetching data for ${symbol} using proxy ${proxyIndex + 1}...`);\r\n        \r\n        // æ§‹å»ºè«‹æ±‚ URL - å¢åŠ æ•¸æ“šç¯„åœä»¥ç¢ºä¿ ADX è¨ˆç®—æœ‰è¶³å¤ æ•¸æ“š\r\n        const targetUrl = `${this.baseUrl}${symbol}?interval=1d&range=6mo&indicators=quote&includePrePost=false`;\r\n        const url = `${proxy}${encodeURIComponent(targetUrl)}`;\r\n        \r\n        console.log(`Request URL: ${url}`);\r\n        \r\n        // ç²å–æ­·å²æ•¸æ“šç”¨æ–¼è¨ˆç®—æŠ€è¡“æŒ‡æ¨™\r\n        const response = await fetch(url, {\r\n          method: 'GET',\r\n          headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n          }\r\n        });\r\n        \r\n        console.log(`Response status: ${response.status}`);\r\n        \r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! status: ${response.status}`);\r\n        }\r\n        \r\n        const data = await response.json();\r\n        console.log(`Raw data structure:`, data);\r\n        \r\n        // æª¢æŸ¥æ•¸æ“šçµæ§‹\r\n        if (!data.chart || !data.chart.result || data.chart.result.length === 0) {\r\n          throw new Error('No chart data available');\r\n        }\r\n        \r\n        const result = data.chart.result[0];\r\n        \r\n        if (!result.indicators || !result.indicators.quote || !result.indicators.quote[0]) {\r\n          throw new Error('Invalid data structure - missing indicators');\r\n        }\r\n        \r\n        const quotes = result.indicators.quote[0];\r\n        \r\n        // æå–ä¸¦æ¸…ç† OHLCV æ•¸æ“š\r\n        const rawData = {\r\n          open: quotes.open || [],\r\n          high: quotes.high || [],\r\n          low: quotes.low || [],\r\n          close: quotes.close || [],\r\n          volume: quotes.volume || []\r\n        };\r\n        \r\n        // éæ¿¾æ‰ null å€¼ï¼Œä¿æŒç´¢å¼•å°é½Šï¼Œä¸¦ç¢ºä¿æ•¸æ“šè³ªé‡\r\n        const length = rawData.close.length;\r\n        const ohlcv = {\r\n          open: new Array(length),\r\n          high: new Array(length),\r\n          low: new Array(length),\r\n          close: new Array(length),\r\n          volume: new Array(length)\r\n        };\r\n        \r\n        let validDataPoints = 0;\r\n        for (let i = 0; i < length; i++) {\r\n          ohlcv.open[i] = rawData.open[i] !== null ? rawData.open[i] : NaN;\r\n          ohlcv.high[i] = rawData.high[i] !== null ? rawData.high[i] : NaN;\r\n          ohlcv.low[i] = rawData.low[i] !== null ? rawData.low[i] : NaN;\r\n          ohlcv.close[i] = rawData.close[i] !== null ? rawData.close[i] : NaN;\r\n          ohlcv.volume[i] = rawData.volume[i] !== null ? rawData.volume[i] : NaN;\r\n          \r\n          // è¨ˆç®—æœ‰æ•ˆæ•¸æ“šé»ï¼ˆOHLC éƒ½ä¸æ˜¯ NaNï¼‰\r\n          if (!isNaN(ohlcv.open[i]) && !isNaN(ohlcv.high[i]) && \r\n              !isNaN(ohlcv.low[i]) && !isNaN(ohlcv.close[i])) {\r\n            validDataPoints++;\r\n          }\r\n        }\r\n        \r\n        console.log(`Found ${length} total data points, ${validDataPoints} valid OHLC points for ${symbol}`);\r\n        \r\n        // ADX éœ€è¦è‡³å°‘ 28 å€‹æœ‰æ•ˆæ•¸æ“šé» (14 * 2)\r\n        if (validDataPoints < 28) {\r\n          console.warn(`âš ï¸ Insufficient valid data for ADX calculation: ${validDataPoints} < 28`);\r\n        }\r\n        \r\n        if (length < 50) {\r\n          throw new Error(`Insufficient data points (${length}) for technical analysis`);\r\n        }\r\n        \r\n        // ä½¿ç”¨æ–°çš„æŠ€è¡“æŒ‡æ¨™æ ¸å¿ƒè¨ˆç®—æ‰€æœ‰æŒ‡æ¨™\r\n        const coreResults = calculateAllIndicators(ohlcv);\r\n        \r\n        // è½‰æ›ç‚ºèˆŠæ ¼å¼ä»¥ä¿æŒå…¼å®¹æ€§\r\n        const getLastValue = (series) => {\r\n          if (!series || !Array.isArray(series)) {\r\n            console.warn('getLastValue: Invalid series data');\r\n            return null;\r\n          }\r\n          \r\n          for (let i = series.length - 1; i >= 0; i--) {\r\n            const value = series[i];\r\n            if (value !== null && value !== undefined && !isNaN(value) && isFinite(value)) {\r\n              console.log(`getLastValue: Found valid value ${value} at index ${i} of ${series.length}`);\r\n              return value;\r\n            }\r\n          }\r\n          console.warn(`getLastValue: No valid values found in series of length ${series.length}`);\r\n          return null;\r\n        };\r\n        \r\n        const createIndicatorResult = (series, signalThresholds = null) => {\r\n          const lastValue = getLastValue(series);\r\n          const currentPrice = getLastValue(ohlcv.close);\r\n          \r\n          let signal = 'NEUTRAL';\r\n          if (signalThresholds && lastValue !== null && currentPrice !== null) {\r\n            if (signalThresholds.type === 'price_comparison') {\r\n              if (currentPrice > lastValue * signalThresholds.buy) signal = 'BUY';\r\n              else if (currentPrice < lastValue * signalThresholds.sell) signal = 'SELL';\r\n            } else if (signalThresholds.type === 'rsi') {\r\n              if (lastValue > signalThresholds.overbought) signal = 'OVERBOUGHT';\r\n              else if (lastValue < signalThresholds.oversold) signal = 'OVERSOLD';\r\n            } else if (signalThresholds.type === 'adx') {\r\n              if (lastValue > signalThresholds.strong) signal = 'STRONG_TREND';\r\n              else if (lastValue < signalThresholds.weak) signal = 'WEAK_TREND';\r\n            }\r\n          }\r\n          \r\n          return {\r\n            value: lastValue !== null ? lastValue.toFixed(2) : null,\r\n            signal: signal,\r\n            currentPrice: currentPrice !== null ? currentPrice.toFixed(2) : null\r\n          };\r\n        };\r\n        \r\n        // è¨ˆç®—æŠ€è¡“æŒ‡æ¨™ï¼ˆä¿æŒèˆŠæ¥å£å…¼å®¹æ€§ï¼‰\r\n        const indicators = {\r\n          // ç§»å‹•å¹³å‡ç·š\r\n          ma5: createIndicatorResult(coreResults.MA_5, { type: 'price_comparison', buy: 1.02, sell: 0.98 }),\r\n          sma5: createIndicatorResult(coreResults.SMA_5, { type: 'price_comparison', buy: 1.02, sell: 0.98 }),\r\n          ma10: createIndicatorResult(coreResults.MA_10, { type: 'price_comparison', buy: 1.02, sell: 0.98 }),\r\n          sma10: createIndicatorResult(coreResults.SMA_10, { type: 'price_comparison', buy: 1.02, sell: 0.98 }),\r\n          ma30: createIndicatorResult(coreResults.MA_30, { type: 'price_comparison', buy: 1.02, sell: 0.98 }),\r\n          sma30: createIndicatorResult(coreResults.SMA_30, { type: 'price_comparison', buy: 1.02, sell: 0.98 }),\r\n          sma50: { value: null, signal: 'N/A' }, // æš«æ™‚ä¿ç•™ä½†ä¸è¨ˆç®—\r\n          \r\n          // ä¸€ç›®å‡è¡¡è¡¨\r\n          ichimokuBaseLine: createIndicatorResult(coreResults.ICHIMOKU_BASELINE_26, { type: 'price_comparison', buy: 1.01, sell: 0.99 }),\r\n          ichimokuConversionLine: createIndicatorResult(coreResults.ICHIMOKU_CONVERSIONLINE_9, { type: 'price_comparison', buy: 1.01, sell: 0.99 }),\r\n          ichimokuLaggingSpan: createIndicatorResult(coreResults.ICHIMOKU_LAGGINGSPAN_26),\r\n          \r\n          // æˆäº¤é‡åŠ æ¬Šç§»å‹•å¹³å‡ç·š\r\n          vwma20: createIndicatorResult(coreResults.VWMA_20, { type: 'price_comparison', buy: 1.02, sell: 0.98 }),\r\n          \r\n          // å…¶ä»–æŠ€è¡“æŒ‡æ¨™\r\n          rsi14: createIndicatorResult(coreResults.RSI_14, { type: 'rsi', overbought: 70, oversold: 30 }),\r\n          adx14: (() => {\r\n            console.log('ğŸ” Processing ADX results...');\r\n            console.log('ADX_14 series:', coreResults.ADX_14);\r\n            console.log('ADX_14_PLUS_DI series:', coreResults.ADX_14_PLUS_DI);\r\n            console.log('ADX_14_MINUS_DI series:', coreResults.ADX_14_MINUS_DI);\r\n            \r\n            const adxValue = getLastValue(coreResults.ADX_14);\r\n            const plusDI = getLastValue(coreResults.ADX_14_PLUS_DI);\r\n            const minusDI = getLastValue(coreResults.ADX_14_MINUS_DI);\r\n            \r\n            console.log('ADX extracted values:', { adxValue, plusDI, minusDI });\r\n            \r\n            let signal = 'NEUTRAL';\r\n            if (adxValue !== null && !isNaN(adxValue)) {\r\n              if (adxValue > 25) signal = 'STRONG_TREND';\r\n              else if (adxValue < 20) signal = 'WEAK_TREND';\r\n            }\r\n            \r\n            const result = {\r\n              value: adxValue !== null && !isNaN(adxValue) ? adxValue.toFixed(2) : null,\r\n              signal: signal,\r\n              plusDI: plusDI !== null && !isNaN(plusDI) ? plusDI.toFixed(2) : null,\r\n              minusDI: minusDI !== null && !isNaN(minusDI) ? minusDI.toFixed(2) : null\r\n            };\r\n            \r\n            console.log('ADX final result:', result);\r\n            return result;\r\n          })(),\r\n          macd: (() => {\r\n            const macdValue = getLastValue(coreResults.MACD_12_26_9);\r\n            const signalValue = getLastValue(coreResults.MACD_SIGNAL_9);\r\n            const histValue = getLastValue(coreResults.MACD_HIST);\r\n            \r\n            let signal = 'NEUTRAL';\r\n            if (macdValue !== null && signalValue !== null && histValue !== null) {\r\n              if (macdValue > signalValue && histValue > 0) {\r\n                signal = 'BUY';\r\n              } else if (macdValue < signalValue && histValue < 0) {\r\n                signal = 'SELL';\r\n              }\r\n            }\r\n            \r\n            return {\r\n              value: macdValue !== null ? macdValue.toFixed(2) : null,\r\n              signal: signal,\r\n              signalLine: signalValue !== null ? signalValue.toFixed(2) : null,\r\n              histogram: histValue !== null ? histValue.toFixed(2) : null\r\n            };\r\n          })(),\r\n          \r\n          // å…ƒæ•¸æ“š\r\n          lastUpdated: new Date().toISOString(),\r\n          dataPoints: length,\r\n          proxy: `Proxy ${proxyIndex + 1}`,\r\n          source: 'Yahoo Finance API (Fresh) - Core v1.0.0',\r\n          \r\n          // æ·»åŠ å®Œæ•´åºåˆ—æ•¸æ“šï¼ˆç”¨æ–¼é«˜ç´šåˆ†æï¼‰\r\n          fullSeries: coreResults,\r\n          \r\n          // èª¿è©¦ä¿¡æ¯\r\n          priceRange: {\r\n            min: Math.min(...ohlcv.close.filter(p => !isNaN(p))).toFixed(2),\r\n            max: Math.max(...ohlcv.close.filter(p => !isNaN(p))).toFixed(2),\r\n            latest: getLastValue(ohlcv.close)?.toFixed(2) || 'N/A',\r\n            first: ohlcv.close.find(p => !isNaN(p))?.toFixed(2) || 'N/A'\r\n          }\r\n        };\r\n        \r\n        console.log(`Price data for ${symbol}:`, {\r\n          dataPoints: length,\r\n          priceRange: indicators.priceRange,\r\n          samplePrices: ohlcv.close.slice(-10).filter(p => !isNaN(p)) // æœ€å¾Œ 10 å€‹æœ‰æ•ˆåƒ¹æ ¼\r\n        });\r\n        \r\n        console.log(`Calculated indicators for ${symbol}:`, indicators);\r\n        \r\n        // ç·©å­˜çµæœ\r\n        this.cache.set(cacheKey, {\r\n          data: indicators,\r\n          timestamp: Date.now()\r\n        });\r\n        \r\n        // æ›´æ–°æˆåŠŸçš„ä»£ç†ç´¢å¼•\r\n        this.currentProxyIndex = proxyIndex;\r\n        \r\n        return indicators;\r\n        \r\n      } catch (error) {\r\n        console.warn(`Proxy ${i + 1} failed for ${symbol}:`, error.message);\r\n        \r\n        // å¦‚æœæ˜¯æœ€å¾Œä¸€å€‹ä»£ç†ä¹Ÿå¤±æ•—äº†ï¼Œè¿”å›éŒ¯èª¤\r\n        if (i === this.corsProxies.length - 1) {\r\n          console.error(`All proxies failed for ${symbol}:`, error);\r\n          \r\n          // è¿”å›éŒ¯èª¤ç‹€æ…‹\r\n          return {\r\n            ma5: { value: null, signal: 'N/A' },\r\n            sma5: { value: null, signal: 'N/A' },\r\n            ma10: { value: null, signal: 'N/A' },\r\n            sma10: { value: null, signal: 'N/A' },\r\n            ma30: { value: null, signal: 'N/A' },\r\n            sma30: { value: null, signal: 'N/A' },\r\n            sma50: { value: null, signal: 'N/A' },\r\n            ichimokuBaseLine: { value: null, signal: 'N/A' },\r\n            ichimokuConversionLine: { value: null, signal: 'N/A' },\r\n            ichimokuLaggingSpan: { value: null, signal: 'N/A' },\r\n            vwma20: { value: null, signal: 'N/A' },\r\n            rsi14: { value: null, signal: 'N/A' },\r\n            adx14: { value: null, signal: 'N/A' },\r\n            macd: { value: null, signal: 'N/A' },\r\n            lastUpdated: new Date().toISOString(),\r\n            error: `All proxies failed: ${error.message}`,\r\n            source: 'Error'\r\n          };\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // æ¸…é™¤ API è«‹æ±‚ç·©å­˜\r\n  clearCache() {\r\n    this.cache.clear();\r\n  }\r\n\r\n  // ç²å–è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯ (sector, industry, marketCap ç­‰)\r\n  async getStockInfo(symbol) {\r\n    const cacheKey = `info_${symbol}`;\r\n    \r\n    // æª¢æŸ¥ç·©å­˜ (24å°æ™‚æœ‰æ•ˆæœŸ)\r\n    const longCacheTimeout = 24 * 60 * 60 * 1000; // 24 hours\r\n    if (this.cache.has(cacheKey)) {\r\n      const cached = this.cache.get(cacheKey);\r\n      if (Date.now() - cached.timestamp < longCacheTimeout) {\r\n        console.log(`Using cached stock info for ${symbol}`);\r\n        return cached.data;\r\n      }\r\n    }\r\n\r\n    // å˜—è©¦å¤šå€‹ä»£ç†æœå‹™ç²å–è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯\r\n    for (let i = 0; i < this.corsProxies.length; i++) {\r\n      try {\r\n        const proxyIndex = (this.currentProxyIndex + i) % this.corsProxies.length;\r\n        const proxy = this.corsProxies[proxyIndex];\r\n        \r\n        console.log(`Fetching stock info for ${symbol} using proxy ${proxyIndex + 1}...`);\r\n        \r\n        // ä½¿ç”¨ Yahoo Finance çš„ quoteSummary API ç²å–è©³ç´°ä¿¡æ¯\r\n        const targetUrl = `https://query1.finance.yahoo.com/v10/finance/quoteSummary/${symbol}?modules=summaryProfile,price,defaultKeyStatistics`;\r\n        const url = `${proxy}${encodeURIComponent(targetUrl)}`;\r\n        \r\n        const response = await fetch(url, {\r\n          method: 'GET',\r\n          headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n          }\r\n        });\r\n        \r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! status: ${response.status}`);\r\n        }\r\n        \r\n        const data = await response.json();\r\n        \r\n        // æª¢æŸ¥æ•¸æ“šçµæ§‹\r\n        if (!data.quoteSummary || !data.quoteSummary.result || data.quoteSummary.result.length === 0) {\r\n          throw new Error('No quoteSummary data available');\r\n        }\r\n        \r\n        const result = data.quoteSummary.result[0];\r\n        const summaryProfile = result.summaryProfile || {};\r\n        const price = result.price || {};\r\n        const keyStats = result.defaultKeyStatistics || {};\r\n        \r\n        // æå–è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯\r\n        const stockInfo = {\r\n          symbol: symbol,\r\n          sector: summaryProfile.sector || 'Unknown',\r\n          industry: summaryProfile.industry || 'Unknown Industry',\r\n          exchange: price.exchangeName || price.exchange || this.getDefaultExchange(symbol),\r\n          marketCap: price.marketCap ? price.marketCap.raw : null,\r\n          marketCapFormatted: price.marketCap ? price.marketCap.fmt : 'N/A',\r\n          currency: price.currency || 'USD',\r\n          country: summaryProfile.country || 'Unknown',\r\n          website: summaryProfile.website || null,\r\n          employees: summaryProfile.fullTimeEmployees || null,\r\n          businessSummary: summaryProfile.longBusinessSummary || null,\r\n          \r\n          // å¸‚å€¼åˆ†é¡\r\n          marketCapCategory: this.getMarketCapCategory(price.marketCap ? price.marketCap.raw : null),\r\n          \r\n          // å…ƒæ•¸æ“š\r\n          lastUpdated: new Date().toISOString(),\r\n          source: 'Yahoo Finance API (Live)',\r\n          proxy: `Proxy ${proxyIndex + 1}`,\r\n          confidence: 0.95 // yfinance API çš„ä¿¡å¿ƒåº¦å¾ˆé«˜\r\n        };\r\n        \r\n        console.log(`Stock info for ${symbol}:`, stockInfo);\r\n        \r\n        // ç·©å­˜çµæœ (24å°æ™‚)\r\n        this.cache.set(cacheKey, {\r\n          data: stockInfo,\r\n          timestamp: Date.now()\r\n        });\r\n        \r\n        // æ›´æ–°æˆåŠŸçš„ä»£ç†ç´¢å¼•\r\n        this.currentProxyIndex = proxyIndex;\r\n        \r\n        return stockInfo;\r\n        \r\n      } catch (error) {\r\n        console.warn(`Proxy ${i + 1} failed for stock info ${symbol}:`, error.message);\r\n        \r\n        // å¦‚æœæ˜¯æœ€å¾Œä¸€å€‹ä»£ç†ä¹Ÿå¤±æ•—äº†ï¼Œè¿”å›é»˜èªä¿¡æ¯\r\n        if (i === this.corsProxies.length - 1) {\r\n          console.error(`All proxies failed for stock info ${symbol}:`, error);\r\n          \r\n          const defaultInfo = {\r\n            symbol: symbol,\r\n            sector: 'Unknown',\r\n            industry: 'Unknown Industry',\r\n            exchange: this.getDefaultExchange(symbol),\r\n            marketCap: null,\r\n            marketCapFormatted: 'N/A',\r\n            currency: 'USD',\r\n            country: 'Unknown',\r\n            website: null,\r\n            employees: null,\r\n            businessSummary: null,\r\n            marketCapCategory: 'unknown',\r\n            lastUpdated: new Date().toISOString(),\r\n            source: 'Default (API Failed)',\r\n            error: `All proxies failed: ${error.message}`,\r\n            confidence: 0.0\r\n          };\r\n          \r\n          // çŸ­æœŸç·©å­˜éŒ¯èª¤çµæœ (1å°æ™‚)\r\n          this.cache.set(cacheKey, {\r\n            data: defaultInfo,\r\n            timestamp: Date.now()\r\n          });\r\n          \r\n          return defaultInfo;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // ç²å–é»˜èªäº¤æ˜“æ‰€\r\n  getDefaultExchange(symbol) {\r\n    const nasdaqSymbols = ['AAPL', 'MSFT', 'GOOGL', 'GOOG', 'AMZN', 'TSLA', 'NVDA', 'META', 'NFLX', 'RKLB', 'ASTS', 'RIVN', 'MDB', 'ONDS', 'PL', 'AVAV', 'CRM', 'AVGO', 'LEU', 'SMR', 'CRWV', 'IONQ', 'PLTR', 'HIMS'];\r\n    const nyseSymbols = ['TSM', 'ORCL', 'RDW'];\r\n    \r\n    if (nasdaqSymbols.includes(symbol)) {\r\n      return 'NASDAQ';\r\n    } else if (nyseSymbols.includes(symbol)) {\r\n      return 'NYSE';\r\n    }\r\n    \r\n    return 'NASDAQ'; // Default\r\n  }\r\n\r\n  // æ ¹æ“šå¸‚å€¼åˆ†é¡\r\n  getMarketCapCategory(marketCap) {\r\n    if (!marketCap || marketCap <= 0) {\r\n      return 'unknown';\r\n    }\r\n    \r\n    // å¸‚å€¼åˆ†é¡ (ç¾å…ƒ)\r\n    if (marketCap >= 200000000000) { // >= $200B\r\n      return 'mega_cap';\r\n    } else if (marketCap >= 10000000000) { // >= $10B\r\n      return 'large_cap';\r\n    } else if (marketCap >= 2000000000) { // >= $2B\r\n      return 'mid_cap';\r\n    } else if (marketCap >= 300000000) { // >= $300M\r\n      return 'small_cap';\r\n    } else {\r\n      return 'micro_cap';\r\n    }\r\n  }\r\n\r\n  // æ¸…é™¤æ¯æ—¥æŠ€è¡“æŒ‡æ¨™ç·©å­˜\r\n  clearDailyCache() {\r\n    technicalIndicatorsCache.clearAllCache();\r\n  }\r\n\r\n  // ç²å–ç·©å­˜çµ±è¨ˆ\r\n  getCacheStats() {\r\n    const apiCacheStats = {};\r\n    for (const [key, value] of this.cache.entries()) {\r\n      apiCacheStats[key] = {\r\n        age: Date.now() - value.timestamp,\r\n        expired: Date.now() - value.timestamp > this.cacheTimeout\r\n      };\r\n    }\r\n\r\n    return {\r\n      apiCache: apiCacheStats,\r\n      dailyCache: technicalIndicatorsCache.getCacheStats()\r\n    };\r\n  }\r\n}\r\n\r\n// å‰µå»ºå–®ä¾‹å¯¦ä¾‹\r\nexport const yahooFinanceAPI = new YahooFinanceAPI();\r\nexport default yahooFinanceAPI;","// æ··åˆæŠ€è¡“æŒ‡æ¨™ API\r\n// å„ªå…ˆä½¿ç”¨é è¨ˆç®—æ•¸æ“šï¼Œå›é€€åˆ°å¯¦æ™‚è¨ˆç®—\r\n\r\nimport precomputedIndicatorsAPI from './precomputedIndicatorsApi.js';\r\nimport yahooFinanceAPI from './yahooFinanceApi.js';\r\nimport technicalIndicatorsCache from './technicalIndicatorsCache.js';\r\n\r\nclass HybridTechnicalIndicatorsAPI {\r\n  constructor() {\r\n    this.preferPrecomputed = true; // å„ªå…ˆä½¿ç”¨é è¨ˆç®—æ•¸æ“š\r\n    this.maxPrecomputedAge = 24 * 60 * 60 * 1000; // 24å°æ™‚å…§çš„é è¨ˆç®—æ•¸æ“šå¯æ¥å—\r\n    this.fallbackToRealtime = true; // å…è¨±å›é€€åˆ°å¯¦æ™‚è¨ˆç®—\r\n  }\r\n\r\n  // ä¸»è¦çš„æŠ€è¡“æŒ‡æ¨™ç²å–æ–¹æ³•\r\n  async getTechnicalIndicators(symbol) {\r\n    console.log(`ğŸ” Getting technical indicators for ${symbol}`);\r\n    \r\n    try {\r\n      // ç­–ç•¥ 1: å˜—è©¦é è¨ˆç®—æ•¸æ“š (æª¢æŸ¥ ADX æ˜¯å¦æœ‰æ•ˆ)\r\n      if (this.preferPrecomputed) {\r\n        const precomputedData = await this.tryPrecomputedData(symbol);\r\n        if (precomputedData && this.isADXValid(precomputedData)) {\r\n          console.log(`âœ… Using precomputed data with valid ADX for ${symbol}`);\r\n          return precomputedData;\r\n        } else if (precomputedData) {\r\n          console.log(`âš ï¸ Precomputed data has invalid ADX for ${symbol}, falling back to real-time`);\r\n        }\r\n      }\r\n      \r\n      // ç­–ç•¥ 2: æª¢æŸ¥æ¯æ—¥ç·©å­˜ (æª¢æŸ¥ ADX æ˜¯å¦æœ‰æ•ˆ)\r\n      const cachedData = await technicalIndicatorsCache.getTechnicalIndicators(symbol);\r\n      if (cachedData && this.isADXValid(cachedData)) {\r\n        console.log(`ğŸ“¦ Using daily cache with valid ADX for ${symbol}`);\r\n        return cachedData;\r\n      } else if (cachedData) {\r\n        console.log(`âš ï¸ Cached data has invalid ADX for ${symbol}, falling back to real-time`);\r\n      }\r\n      \r\n      // ç­–ç•¥ 3: å¯¦æ™‚è¨ˆç®—\r\n      if (this.fallbackToRealtime) {\r\n        console.log(`âš¡ Using real-time calculation for ${symbol}`);\r\n        const realtimeData = await yahooFinanceAPI.fetchTechnicalIndicatorsFromAPI(symbol);\r\n        \r\n        if (realtimeData && !realtimeData.error) {\r\n          // å­˜å…¥æ¯æ—¥ç·©å­˜\r\n          await technicalIndicatorsCache.setTechnicalIndicators(symbol, realtimeData);\r\n          return realtimeData;\r\n        }\r\n      }\r\n      \r\n      // æ‰€æœ‰ç­–ç•¥éƒ½å¤±æ•—\r\n      throw new Error('All data sources failed');\r\n      \r\n    } catch (error) {\r\n      console.error(`âŒ Failed to get technical indicators for ${symbol}:`, error);\r\n      \r\n      // è¿”å›éŒ¯èª¤ç‹€æ…‹çš„æŒ‡æ¨™\r\n      return this.createErrorResponse(symbol, error.message);\r\n    }\r\n  }\r\n\r\n  // æª¢æŸ¥ ADX æ˜¯å¦æœ‰æ•ˆ\r\n  isADXValid(data) {\r\n    if (!data || !data.adx14) {\r\n      return false;\r\n    }\r\n    \r\n    // æª¢æŸ¥ ADX å€¼æ˜¯å¦ç‚º null æˆ– \"N/A\"\r\n    const adxValue = data.adx14.value;\r\n    if (adxValue === null || adxValue === undefined || adxValue === 'N/A') {\r\n      return false;\r\n    }\r\n    \r\n    // æª¢æŸ¥å®Œæ•´åºåˆ—æ•¸æ“šä¸­çš„ ADX\r\n    if (data.fullSeries && data.fullSeries.ADX_14) {\r\n      const adxSeries = data.fullSeries.ADX_14;\r\n      const validADXCount = adxSeries.filter(v => v !== null && v !== undefined && !isNaN(v)).length;\r\n      \r\n      // å¦‚æœæœ‰æ•ˆ ADX å€¼å°‘æ–¼ 5 å€‹ï¼Œèªç‚ºç„¡æ•ˆ\r\n      if (validADXCount < 5) {\r\n        console.log(`ADX validation failed: only ${validADXCount} valid values`);\r\n        return false;\r\n      }\r\n    }\r\n    \r\n    return true;\r\n  }\r\n\r\n  // å˜—è©¦ç²å–é è¨ˆç®—æ•¸æ“š\r\n  async tryPrecomputedData(symbol) {\r\n    try {\r\n      console.log(`ğŸ”„ Trying precomputed data for ${symbol}`);\r\n      \r\n      const data = await precomputedIndicatorsAPI.getTechnicalIndicators(symbol);\r\n      \r\n      // æª¢æŸ¥æ•¸æ“šå¹´é½¡\r\n      const computedAt = new Date(data.lastUpdated);\r\n      const age = Date.now() - computedAt.getTime();\r\n      \r\n      if (age <= this.maxPrecomputedAge) {\r\n        console.log(`âœ… Using precomputed data for ${symbol} (${data.dataAge})`);\r\n        return {\r\n          ...data,\r\n          source: `Precomputed (${data.dataAge})`,\r\n          loadTime: '<50ms'\r\n        };\r\n      } else {\r\n        console.log(`â° Precomputed data too old for ${symbol} (${data.dataAge})`);\r\n        return null;\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.log(`âŒ Precomputed data not available for ${symbol}: ${error.message}`);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  // å‰µå»ºéŒ¯èª¤éŸ¿æ‡‰\r\n  createErrorResponse(symbol, errorMessage) {\r\n    return {\r\n      ma5: { value: null, signal: 'N/A' },\r\n      sma5: { value: null, signal: 'N/A' },\r\n      ma10: { value: null, signal: 'N/A' },\r\n      sma10: { value: null, signal: 'N/A' },\r\n      ma30: { value: null, signal: 'N/A' },\r\n      sma30: { value: null, signal: 'N/A' },\r\n      sma50: { value: null, signal: 'N/A' },\r\n      ichimokuBaseLine: { value: null, signal: 'N/A' },\r\n      ichimokuConversionLine: { value: null, signal: 'N/A' },\r\n      ichimokuLaggingSpan: { value: null, signal: 'N/A' },\r\n      vwma20: { value: null, signal: 'N/A' },\r\n      rsi14: { value: null, signal: 'N/A' },\r\n      adx14: { value: null, signal: 'N/A' },\r\n      macd: { value: null, signal: 'N/A' },\r\n      lastUpdated: new Date().toISOString(),\r\n      error: errorMessage,\r\n      source: 'Error',\r\n      symbol: symbol\r\n    };\r\n  }\r\n\r\n  // å¼·åˆ¶åˆ·æ–°æ•¸æ“š (è·³éæ‰€æœ‰ç·©å­˜)\r\n  async refreshTechnicalIndicators(symbol) {\r\n    console.log(`ğŸ”„ Force refreshing data for ${symbol}`);\r\n    \r\n    // æ¸…é™¤æ‰€æœ‰ç·©å­˜\r\n    technicalIndicatorsCache.clearSymbolCache(symbol);\r\n    precomputedIndicatorsAPI.clearCache();\r\n    \r\n    // å¼·åˆ¶å¯¦æ™‚è¨ˆç®—\r\n    const originalFallback = this.fallbackToRealtime;\r\n    const originalPrecomputed = this.preferPrecomputed;\r\n    \r\n    this.fallbackToRealtime = true;\r\n    this.preferPrecomputed = false;\r\n    \r\n    try {\r\n      const data = await this.getTechnicalIndicators(symbol);\r\n      return data;\r\n    } finally {\r\n      // æ¢å¾©åŸè¨­ç½®\r\n      this.fallbackToRealtime = originalFallback;\r\n      this.preferPrecomputed = originalPrecomputed;\r\n    }\r\n  }\r\n\r\n  // æ‰¹é‡ç²å–å¤šå€‹è‚¡ç¥¨çš„æŠ€è¡“æŒ‡æ¨™\r\n  async getBatchTechnicalIndicators(symbols, maxConcurrent = 3) {\r\n    const results = new Map();\r\n    const batches = [];\r\n    \r\n    // åˆ†æ‰¹è™•ç†\r\n    for (let i = 0; i < symbols.length; i += maxConcurrent) {\r\n      batches.push(symbols.slice(i, i + maxConcurrent));\r\n    }\r\n    \r\n    console.log(`ğŸ“¦ Processing ${symbols.length} symbols in ${batches.length} batches`);\r\n    \r\n    for (const batch of batches) {\r\n      const batchPromises = batch.map(async symbol => {\r\n        try {\r\n          const data = await this.getTechnicalIndicators(symbol);\r\n          return { symbol, success: true, data };\r\n        } catch (error) {\r\n          return { symbol, success: false, error: error.message };\r\n        }\r\n      });\r\n      \r\n      const batchResults = await Promise.all(batchPromises);\r\n      \r\n      batchResults.forEach(result => {\r\n        results.set(result.symbol, result);\r\n      });\r\n      \r\n      // æ‰¹æ¬¡é–“çŸ­æš«å»¶é²\r\n      if (batches.indexOf(batch) < batches.length - 1) {\r\n        await new Promise(resolve => setTimeout(resolve, 100));\r\n      }\r\n    }\r\n    \r\n    return results;\r\n  }\r\n\r\n  // ç²å–æ•¸æ“šæºç‹€æ…‹\r\n  async getDataSourceStatus() {\r\n    const status = {\r\n      precomputed: {\r\n        available: false,\r\n        symbols: [],\r\n        lastUpdate: null\r\n      },\r\n      cache: technicalIndicatorsCache.getCacheStats(),\r\n      realtime: {\r\n        available: true,\r\n        proxies: yahooFinanceAPI.corsProxies.length\r\n      }\r\n    };\r\n    \r\n    try {\r\n      const precomputedIndex = await precomputedIndicatorsAPI.getAvailableData();\r\n      if (precomputedIndex) {\r\n        status.precomputed = {\r\n          available: true,\r\n          symbols: precomputedIndex.symbols,\r\n          lastUpdate: precomputedIndex.generatedAt,\r\n          successful: precomputedIndex.successful,\r\n          failed: precomputedIndex.failed\r\n        };\r\n      }\r\n    } catch (error) {\r\n      console.warn('Failed to get precomputed status:', error);\r\n    }\r\n    \r\n    return status;\r\n  }\r\n\r\n  // é…ç½®é¸é …\r\n  setPreferences(options) {\r\n    if (options.preferPrecomputed !== undefined) {\r\n      this.preferPrecomputed = options.preferPrecomputed;\r\n    }\r\n    if (options.fallbackToRealtime !== undefined) {\r\n      this.fallbackToRealtime = options.fallbackToRealtime;\r\n    }\r\n    if (options.maxPrecomputedAge !== undefined) {\r\n      this.maxPrecomputedAge = options.maxPrecomputedAge;\r\n    }\r\n    \r\n    console.log('Updated preferences:', {\r\n      preferPrecomputed: this.preferPrecomputed,\r\n      fallbackToRealtime: this.fallbackToRealtime,\r\n      maxPrecomputedAge: this.maxPrecomputedAge\r\n    });\r\n  }\r\n}\r\n\r\n// å‰µå»ºå–®ä¾‹å¯¦ä¾‹\r\nexport const hybridTechnicalIndicatorsAPI = new HybridTechnicalIndicatorsAPI();\r\nexport default hybridTechnicalIndicatorsAPI;","// ç·©å­˜é ç†±æœå‹™\r\n// åœ¨ç’°å¢ƒç‰ˆæœ¬æ›´æ–°æ™‚é è¼‰æ‰€æœ‰è‚¡ç¥¨çš„æŠ€è¡“æŒ‡æ¨™æ•¸æ“š\r\n\r\nimport { hybridTechnicalIndicatorsAPI } from './hybridTechnicalIndicatorsApi.js'\r\nimport { performanceCache, CACHE_KEYS } from './performanceCache.js'\r\nimport { performanceMonitor } from './performanceMonitor.js'\r\n\r\nclass CacheWarmupService {\r\n  constructor() {\r\n    this.isWarming = false\r\n    this.warmupProgress = 0\r\n    this.warmupResults = new Map()\r\n    this.warmupStartTime = null\r\n    this.warmupEndTime = null\r\n    \r\n    // é…ç½®\r\n    this.config = {\r\n      maxConcurrent: 2, // æœ€å¤§ä¸¦ç™¼æ•¸ï¼Œé¿å…éå¤š API è«‹æ±‚\r\n      batchDelay: 2000, // æ‰¹æ¬¡é–“å»¶é² (æ¯«ç§’)\r\n      retryAttempts: 2, // é‡è©¦æ¬¡æ•¸\r\n      retryDelay: 5000, // é‡è©¦å»¶é²\r\n      enableAutoWarmup: this.isProductionEnvironment(), // åªåœ¨æ­£å¼ç’°å¢ƒå•Ÿç”¨è‡ªå‹•é ç†±\r\n      warmupOnVersionChange: false, // åœç”¨ç‰ˆæœ¬æ›´æ–°æ™‚é ç†±\r\n      warmupOnFirstLoad: false, // åœç”¨é¦–æ¬¡è¼‰å…¥æ™‚é ç†±\r\n      warmupInterval: 24 * 60 * 60 * 1000, // 24 å°æ™‚è‡ªå‹•é ç†±ä¸€æ¬¡ (æ›´é•·é–“éš”)\r\n      minCacheCoverage: 0.95 // éœ€è¦ 95% ä»¥ä¸Šçš„ç·©å­˜è¦†è“‹ç‡æ‰ä¸é ç†±\r\n    }\r\n    \r\n    // è¿½è¹¤çš„è‚¡ç¥¨ä»£ç¢¼\r\n    this.trackedSymbols = [\r\n      'ASTS', 'RIVN', 'PL', 'ONDS', 'RDW', 'AVAV', 'MDB', 'ORCL', 'TSM', 'RKLB',\r\n      'CRM', 'NVDA', 'AVGO', 'AMZN', 'GOOG', 'META', 'NFLX', 'LEU', 'SMR', 'CRWV',\r\n      'IONQ', 'PLTR', 'HIMS', 'TSLA'\r\n    ]\r\n  }\r\n\r\n  // å•Ÿå‹•ç·©å­˜é ç†±æœå‹™\r\n  async start() {\r\n    console.log('ğŸ”¥ Starting Cache Warmup Service...')\r\n    \r\n    // ğŸš€ é–‹ç™¼ç’°å¢ƒæª¢æ¸¬ï¼šå®Œå…¨åœç”¨é ç†±\r\n    if (!this.isProductionEnvironment()) {\r\n      console.log('ğŸš« Cache warmup disabled in development environment')\r\n      return\r\n    }\r\n    \r\n    try {\r\n      // æª¢æŸ¥æ˜¯å¦éœ€è¦é ç†±\r\n      const shouldWarmup = await this.shouldPerformWarmup()\r\n      \r\n      if (shouldWarmup.needed) {\r\n        console.log(`ğŸ”¥ Warmup needed: ${shouldWarmup.reason}`)\r\n        await this.performWarmup()\r\n      } else {\r\n        console.log('âœ… Cache warmup not needed')\r\n      }\r\n      \r\n      // è¨­ç½®å®šæœŸé ç†±\r\n      if (this.config.enableAutoWarmup) {\r\n        this.schedulePeriodicWarmup()\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ Failed to start cache warmup service:', error)\r\n    }\r\n  }\r\n\r\n  // æª¢æŸ¥æ˜¯å¦éœ€è¦åŸ·è¡Œé ç†±\r\n  async shouldPerformWarmup() {\r\n    try {\r\n      // æª¢æŸ¥ç‰ˆæœ¬è®Šæ›´\r\n      const currentVersion = await this.getCurrentVersion()\r\n      const lastWarmupVersion = this.getLastWarmupVersion()\r\n      \r\n      if (this.config.warmupOnVersionChange && currentVersion !== lastWarmupVersion) {\r\n        return {\r\n          needed: true,\r\n          reason: `Version changed from ${lastWarmupVersion} to ${currentVersion}`\r\n        }\r\n      }\r\n      \r\n      // æª¢æŸ¥é¦–æ¬¡è¼‰å…¥\r\n      const lastWarmupTime = this.getLastWarmupTime()\r\n      if (this.config.warmupOnFirstLoad && !lastWarmupTime) {\r\n        return {\r\n          needed: true,\r\n          reason: 'First load - no previous warmup found'\r\n        }\r\n      }\r\n      \r\n      // æª¢æŸ¥æ™‚é–“é–“éš”\r\n      if (lastWarmupTime) {\r\n        const timeSinceLastWarmup = Date.now() - lastWarmupTime\r\n        if (timeSinceLastWarmup > this.config.warmupInterval) {\r\n          return {\r\n            needed: true,\r\n            reason: `Time interval exceeded (${Math.round(timeSinceLastWarmup / 3600000)}h ago)`\r\n          }\r\n        }\r\n      }\r\n      \r\n      // æª¢æŸ¥ç·©å­˜è¦†è“‹ç‡\r\n      const cacheStats = await this.getCacheStats()\r\n      if (cacheStats.coverage < this.config.minCacheCoverage) { // éœ€è¦ 95% ä»¥ä¸Šçš„ç·©å­˜è¦†è“‹ç‡\r\n        return {\r\n          needed: true,\r\n          reason: `Low cache coverage (${Math.round(cacheStats.coverage * 100)}%)`\r\n        }\r\n      }\r\n      \r\n      return { needed: false, reason: 'Cache is fresh and complete' }\r\n      \r\n    } catch (error) {\r\n      console.error('Error checking warmup need:', error)\r\n      return { needed: true, reason: 'Error checking - performing warmup as fallback' }\r\n    }\r\n  }\r\n\r\n  // åŸ·è¡Œç·©å­˜é ç†±\r\n  async performWarmup() {\r\n    if (this.isWarming) {\r\n      console.log('âš ï¸ Warmup already in progress')\r\n      return this.warmupResults\r\n    }\r\n\r\n    console.log(`ğŸ”¥ Starting cache warmup for ${this.trackedSymbols.length} symbols...`)\r\n    \r\n    this.isWarming = true\r\n    this.warmupProgress = 0\r\n    this.warmupResults.clear()\r\n    this.warmupStartTime = Date.now()\r\n    \r\n    const label = 'cache_warmup_total'\r\n    performanceMonitor.start(label)\r\n    \r\n    try {\r\n      // åˆ†æ‰¹è™•ç†è‚¡ç¥¨\r\n      const batches = this.createBatches(this.trackedSymbols, this.config.maxConcurrent)\r\n      \r\n      for (let i = 0; i < batches.length; i++) {\r\n        const batch = batches[i]\r\n        console.log(`ğŸ”¥ Processing batch ${i + 1}/${batches.length}: ${batch.join(', ')}`)\r\n        \r\n        // ä¸¦è¡Œè™•ç†æ‰¹æ¬¡ä¸­çš„è‚¡ç¥¨\r\n        const batchPromises = batch.map(symbol => this.warmupSymbol(symbol))\r\n        const batchResults = await Promise.all(batchPromises)\r\n        \r\n        // è¨˜éŒ„çµæœ\r\n        batchResults.forEach((result, index) => {\r\n          this.warmupResults.set(batch[index], result)\r\n        })\r\n        \r\n        // æ›´æ–°é€²åº¦\r\n        this.warmupProgress = ((i + 1) / batches.length) * 100\r\n        console.log(`ğŸ“Š Warmup progress: ${Math.round(this.warmupProgress)}%`)\r\n        \r\n        // æ‰¹æ¬¡é–“å»¶é²\r\n        if (i < batches.length - 1) {\r\n          console.log(`â³ Waiting ${this.config.batchDelay}ms before next batch...`)\r\n          await this.sleep(this.config.batchDelay)\r\n        }\r\n      }\r\n      \r\n      this.warmupEndTime = Date.now()\r\n      const duration = this.warmupEndTime - this.warmupStartTime\r\n      \r\n      // çµ±è¨ˆçµæœ\r\n      const stats = this.getWarmupStats()\r\n      \r\n      console.log(`ğŸ‰ Cache warmup completed in ${Math.round(duration / 1000)}s`)\r\n      console.log(`ğŸ“Š Results: ${stats.successful}/${stats.total} successful (${stats.successRate}%)`)\r\n      \r\n      // ä¿å­˜é ç†±è¨˜éŒ„\r\n      this.saveWarmupRecord(stats)\r\n      \r\n      return this.warmupResults\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ Cache warmup failed:', error)\r\n      throw error\r\n    } finally {\r\n      this.isWarming = false\r\n      performanceMonitor.end(label)\r\n    }\r\n  }\r\n\r\n  // é ç†±å–®å€‹è‚¡ç¥¨\r\n  async warmupSymbol(symbol, attempt = 1) {\r\n    const startTime = Date.now()\r\n    \r\n    try {\r\n      console.log(`ğŸ”¥ Warming up ${symbol} (attempt ${attempt}/${this.config.retryAttempts + 1})`)\r\n      \r\n      // ç²å–æŠ€è¡“æŒ‡æ¨™æ•¸æ“š (é€™æœƒè§¸ç™¼ç·©å­˜)\r\n      const data = await hybridTechnicalIndicatorsAPI.getTechnicalIndicators(symbol)\r\n      \r\n      const duration = Date.now() - startTime\r\n      \r\n      if (data && !data.error) {\r\n        console.log(`âœ… ${symbol} warmed up successfully in ${duration}ms (${data.source})`)\r\n        return {\r\n          success: true,\r\n          duration,\r\n          source: data.source,\r\n          timestamp: new Date().toISOString()\r\n        }\r\n      } else {\r\n        throw new Error(data?.error || 'Unknown error')\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.error(`âŒ Failed to warm up ${symbol} (attempt ${attempt}): ${error.message}`)\r\n      \r\n      // é‡è©¦æ©Ÿåˆ¶\r\n      if (attempt <= this.config.retryAttempts) {\r\n        console.log(`ğŸ”„ Retrying ${symbol} in ${this.config.retryDelay}ms...`)\r\n        await this.sleep(this.config.retryDelay)\r\n        return this.warmupSymbol(symbol, attempt + 1)\r\n      } else {\r\n        return {\r\n          success: false,\r\n          error: error.message,\r\n          duration: Date.now() - startTime,\r\n          timestamp: new Date().toISOString()\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // å‰µå»ºæ‰¹æ¬¡\r\n  createBatches(items, batchSize) {\r\n    const batches = []\r\n    for (let i = 0; i < items.length; i += batchSize) {\r\n      batches.push(items.slice(i, i + batchSize))\r\n    }\r\n    return batches\r\n  }\r\n\r\n  // ç²å–ç•¶å‰ç‰ˆæœ¬\r\n  async getCurrentVersion() {\r\n    try {\r\n      // ç²å–æ­£ç¢ºçš„ package.json è·¯å¾‘ (æ”¯æ´ GitHub Pages)\r\n      const packageUrl = this.getPackageJsonUrl()\r\n      \r\n      const response = await fetch(packageUrl)\r\n      if (response.ok) {\r\n        const pkg = await response.json()\r\n        return pkg.version || '1.0.0'\r\n      }\r\n    } catch (error) {\r\n      console.warn('Failed to fetch package.json:', error)\r\n      // å¦‚æœç„¡æ³•ç²å–ï¼Œä½¿ç”¨æ§‹å»ºæ™‚é–“æˆ³\r\n      return Date.now().toString()\r\n    }\r\n    \r\n    return '1.0.0'\r\n  }\r\n\r\n  // ç²å–æ­£ç¢ºçš„ package.json URL (æ”¯æ´ GitHub Pages)\r\n  getPackageJsonUrl() {\r\n    const hostname = window.location.hostname\r\n    const pathname = window.location.pathname\r\n    \r\n    // GitHub Pages æª¢æ¸¬\r\n    if (hostname === 'romarin-hsieh.github.io') {\r\n      // å¦‚æœè·¯å¾‘åŒ…å« investment-dashboardï¼Œä½¿ç”¨å®Œæ•´è·¯å¾‘\r\n      if (pathname.includes('/investment-dashboard/')) {\r\n        return '/investment-dashboard/package.json'\r\n      }\r\n      // å¦å‰‡ä¹Ÿä½¿ç”¨å®Œæ•´è·¯å¾‘ï¼ˆé˜²æ­¢ç›´æ¥è¨ªå•æ ¹åŸŸåçš„æƒ…æ³ï¼‰\r\n      return '/investment-dashboard/package.json'\r\n    }\r\n    \r\n    // æœ¬åœ°é–‹ç™¼ç’°å¢ƒ\r\n    return '/package.json'\r\n  }\r\n\r\n  // ç²å–ä¸Šæ¬¡é ç†±ç‰ˆæœ¬\r\n  getLastWarmupVersion() {\r\n    return localStorage.getItem('cache_warmup_version') || null\r\n  }\r\n\r\n  // ç²å–ä¸Šæ¬¡é ç†±æ™‚é–“\r\n  getLastWarmupTime() {\r\n    const time = localStorage.getItem('cache_warmup_time')\r\n    return time ? parseInt(time) : null\r\n  }\r\n\r\n  // ç²å–ç·©å­˜çµ±è¨ˆ\r\n  async getCacheStats() {\r\n    let cachedCount = 0\r\n    \r\n    for (const symbol of this.trackedSymbols) {\r\n      try {\r\n        // æª¢æŸ¥æ˜¯å¦æœ‰ç·©å­˜æ•¸æ“š\r\n        const cached = performanceCache.get(`technical_indicators_${symbol}`)\r\n        if (cached) {\r\n          cachedCount++\r\n        }\r\n      } catch (error) {\r\n        // å¿½ç•¥éŒ¯èª¤\r\n      }\r\n    }\r\n    \r\n    return {\r\n      total: this.trackedSymbols.length,\r\n      cached: cachedCount,\r\n      coverage: cachedCount / this.trackedSymbols.length\r\n    }\r\n  }\r\n\r\n  // ç²å–é ç†±çµ±è¨ˆ\r\n  getWarmupStats() {\r\n    const results = Array.from(this.warmupResults.values())\r\n    const successful = results.filter(r => r.success).length\r\n    const failed = results.filter(r => !r.success).length\r\n    \r\n    return {\r\n      total: results.length,\r\n      successful,\r\n      failed,\r\n      successRate: Math.round((successful / results.length) * 100),\r\n      duration: this.warmupEndTime - this.warmupStartTime,\r\n      averageDuration: results.reduce((sum, r) => sum + r.duration, 0) / results.length\r\n    }\r\n  }\r\n\r\n  // ä¿å­˜é ç†±è¨˜éŒ„\r\n  saveWarmupRecord(stats) {\r\n    const currentVersion = this.getCurrentVersion()\r\n    \r\n    localStorage.setItem('cache_warmup_version', currentVersion)\r\n    localStorage.setItem('cache_warmup_time', Date.now().toString())\r\n    localStorage.setItem('cache_warmup_stats', JSON.stringify(stats))\r\n    \r\n    console.log('ğŸ’¾ Warmup record saved')\r\n  }\r\n\r\n  // è¨­ç½®å®šæœŸé ç†±\r\n  schedulePeriodicWarmup() {\r\n    console.log(`â° Scheduled periodic warmup every ${this.config.warmupInterval / 3600000} hours`)\r\n    \r\n    setInterval(async () => {\r\n      console.log('â° Periodic warmup triggered')\r\n      try {\r\n        await this.performWarmup()\r\n      } catch (error) {\r\n        console.error('âŒ Periodic warmup failed:', error)\r\n      }\r\n    }, this.config.warmupInterval)\r\n  }\r\n\r\n  // æ‰‹å‹•è§¸ç™¼é ç†±\r\n  async triggerManualWarmup() {\r\n    console.log('ğŸ”¥ Manual warmup triggered')\r\n    return this.performWarmup()\r\n  }\r\n\r\n  // ç²å–é ç†±ç‹€æ…‹\r\n  getWarmupStatus() {\r\n    return {\r\n      isWarming: this.isWarming,\r\n      progress: this.warmupProgress,\r\n      results: Object.fromEntries(this.warmupResults),\r\n      lastWarmupTime: this.getLastWarmupTime(),\r\n      lastWarmupVersion: this.getLastWarmupVersion(),\r\n      trackedSymbols: this.trackedSymbols,\r\n      config: this.config\r\n    }\r\n  }\r\n\r\n  // å·¥å…·å‡½æ•¸ï¼šå»¶é²\r\n  sleep(ms) {\r\n    return new Promise(resolve => setTimeout(resolve, ms))\r\n  }\r\n\r\n  // æª¢æ¸¬æ˜¯å¦ç‚ºæ­£å¼ç’°å¢ƒ\r\n  isProductionEnvironment() {\r\n    const hostname = window.location.hostname\r\n    const pathname = window.location.pathname\r\n    \r\n    // GitHub Pages æ­£å¼ç’°å¢ƒ\r\n    if (hostname === 'romarin-hsieh.github.io' && pathname.includes('/investment-dashboard/')) {\r\n      return true\r\n    }\r\n    \r\n    // å…¶ä»–æ­£å¼ç’°å¢ƒåŸŸå\r\n    if (hostname !== 'localhost' && hostname !== '127.0.0.1' && !hostname.includes('local')) {\r\n      return true\r\n    }\r\n    \r\n    return false\r\n  }\r\n\r\n  // æ›´æ–°é…ç½®\r\n  updateConfig(newConfig) {\r\n    this.config = { ...this.config, ...newConfig }\r\n    console.log('ğŸ”§ Cache warmup config updated:', this.config)\r\n  }\r\n\r\n  // æ·»åŠ è¿½è¹¤è‚¡ç¥¨\r\n  addTrackedSymbol(symbol) {\r\n    if (!this.trackedSymbols.includes(symbol)) {\r\n      this.trackedSymbols.push(symbol)\r\n      console.log(`â• Added ${symbol} to tracked symbols`)\r\n    }\r\n  }\r\n\r\n  // ç§»é™¤è¿½è¹¤è‚¡ç¥¨\r\n  removeTrackedSymbol(symbol) {\r\n    const index = this.trackedSymbols.indexOf(symbol)\r\n    if (index > -1) {\r\n      this.trackedSymbols.splice(index, 1)\r\n      console.log(`â– Removed ${symbol} from tracked symbols`)\r\n    }\r\n  }\r\n}\r\n\r\n// å‰µå»ºå…¨å±€å¯¦ä¾‹\r\nexport const cacheWarmupService = new CacheWarmupService()\r\nexport default cacheWarmupService","/**\r\n * Widget Load Manager - å…¨åŸŸä½µç™¼æ§åˆ¶\r\n * é™åˆ¶åŒæ™‚è¼‰å…¥çš„ Widget æ•¸é‡ï¼Œé¿å…ç€è¦½å™¨è³‡æºç«¶çˆ­\r\n */\r\nclass WidgetLoadManager {\r\n  constructor() {\r\n    this.maxConcurrent = 3 // æœ€å¤šåŒæ™‚è¼‰å…¥ 3 å€‹ Widget\r\n    this.currentLoading = 0\r\n    this.queue = []\r\n    this.loadingWidgets = new Set()\r\n    this.stats = {\r\n      totalRequests: 0,\r\n      completedRequests: 0,\r\n      failedRequests: 0,\r\n      averageLoadTime: 0,\r\n      loadTimes: []\r\n    }\r\n  }\r\n\r\n  /**\r\n   * æ·»åŠ  Widget è¼‰å…¥ä»»å‹™åˆ°ä½‡åˆ—\r\n   * @param {Function} loadFunction - Widget è¼‰å…¥å‡½æ•¸\r\n   * @param {string} widgetId - Widget å”¯ä¸€è­˜åˆ¥ç¢¼\r\n   * @param {number} priority - å„ªå…ˆç´š (1=é«˜, 2=ä¸­, 3=ä½)\r\n   * @returns {Promise} è¼‰å…¥ Promise\r\n   */\r\n  async addToQueue(loadFunction, widgetId, priority = 2) {\r\n    return new Promise((resolve, reject) => {\r\n      const task = {\r\n        id: widgetId,\r\n        loadFunction,\r\n        priority,\r\n        resolve,\r\n        reject,\r\n        createdAt: Date.now()\r\n      }\r\n\r\n      // æª¢æŸ¥æ˜¯å¦å·²åœ¨è¼‰å…¥ä¸­\r\n      if (this.loadingWidgets.has(widgetId)) {\r\n        console.warn(`Widget ${widgetId} is already loading, skipping duplicate request`)\r\n        reject(new Error('Widget already loading'))\r\n        return\r\n      }\r\n\r\n      // æŒ‰å„ªå…ˆç´šæ’å…¥ä½‡åˆ—\r\n      this.insertByPriority(task)\r\n      this.stats.totalRequests++\r\n      \r\n      console.log(`WidgetLoadManager: Added ${widgetId} to queue (priority: ${priority}, queue size: ${this.queue.length})`)\r\n      \r\n      // å˜—è©¦è™•ç†ä½‡åˆ—\r\n      this.processQueue()\r\n    })\r\n  }\r\n\r\n  /**\r\n   * æŒ‰å„ªå…ˆç´šæ’å…¥ä»»å‹™\r\n   */\r\n  insertByPriority(task) {\r\n    let insertIndex = this.queue.length\r\n    \r\n    // æ‰¾åˆ°åˆé©çš„æ’å…¥ä½ç½®ï¼ˆå„ªå…ˆç´šæ•¸å­—è¶Šå°è¶Šå„ªå…ˆï¼‰\r\n    for (let i = 0; i < this.queue.length; i++) {\r\n      if (task.priority < this.queue[i].priority) {\r\n        insertIndex = i\r\n        break\r\n      }\r\n    }\r\n    \r\n    this.queue.splice(insertIndex, 0, task)\r\n  }\r\n\r\n  /**\r\n   * è™•ç†è¼‰å…¥ä½‡åˆ—\r\n   */\r\n  async processQueue() {\r\n    // å¦‚æœå·²é”åˆ°ä½µç™¼ä¸Šé™æˆ–ä½‡åˆ—ç‚ºç©ºï¼Œå‰‡è¿”å›\r\n    if (this.currentLoading >= this.maxConcurrent || this.queue.length === 0) {\r\n      return\r\n    }\r\n\r\n    // å–å‡ºä¸‹ä¸€å€‹ä»»å‹™\r\n    const task = this.queue.shift()\r\n    this.currentLoading++\r\n    this.loadingWidgets.add(task.id)\r\n\r\n    const startTime = Date.now()\r\n    \r\n    console.log(`WidgetLoadManager: Starting load for ${task.id} (${this.currentLoading}/${this.maxConcurrent} slots used)`)\r\n\r\n    try {\r\n      // åŸ·è¡Œè¼‰å…¥å‡½æ•¸\r\n      await task.loadFunction()\r\n      \r\n      const loadTime = Date.now() - startTime\r\n      this.updateStats(loadTime, true)\r\n      \r\n      console.log(`WidgetLoadManager: Successfully loaded ${task.id} in ${loadTime}ms`)\r\n      task.resolve()\r\n      \r\n    } catch (error) {\r\n      const loadTime = Date.now() - startTime\r\n      this.updateStats(loadTime, false)\r\n      \r\n      console.error(`WidgetLoadManager: Failed to load ${task.id} after ${loadTime}ms:`, error)\r\n      task.reject(error)\r\n      \r\n    } finally {\r\n      // æ¸…ç†ä¸¦ç¹¼çºŒè™•ç†ä½‡åˆ—\r\n      this.currentLoading--\r\n      this.loadingWidgets.delete(task.id)\r\n      \r\n      // ç¹¼çºŒè™•ç†ä¸‹ä¸€å€‹ä»»å‹™\r\n      setTimeout(() => this.processQueue(), 100) // å°å»¶é²é¿å…éæ–¼é »ç¹\r\n    }\r\n  }\r\n\r\n  /**\r\n   * æ›´æ–°çµ±è¨ˆè³‡è¨Š\r\n   */\r\n  updateStats(loadTime, success) {\r\n    if (success) {\r\n      this.stats.completedRequests++\r\n    } else {\r\n      this.stats.failedRequests++\r\n    }\r\n    \r\n    this.stats.loadTimes.push(loadTime)\r\n    \r\n    // ä¿æŒæœ€è¿‘ 100 æ¬¡çš„è¼‰å…¥æ™‚é–“è¨˜éŒ„\r\n    if (this.stats.loadTimes.length > 100) {\r\n      this.stats.loadTimes.shift()\r\n    }\r\n    \r\n    // è¨ˆç®—å¹³å‡è¼‰å…¥æ™‚é–“\r\n    this.stats.averageLoadTime = this.stats.loadTimes.reduce((sum, time) => sum + time, 0) / this.stats.loadTimes.length\r\n  }\r\n\r\n  /**\r\n   * å–æ¶ˆç‰¹å®š Widget çš„è¼‰å…¥\r\n   */\r\n  cancelWidget(widgetId) {\r\n    // å¾ä½‡åˆ—ä¸­ç§»é™¤\r\n    const taskIndex = this.queue.findIndex(task => task.id === widgetId)\r\n    if (taskIndex !== -1) {\r\n      const task = this.queue.splice(taskIndex, 1)[0]\r\n      task.reject(new Error('Widget load cancelled'))\r\n      console.log(`WidgetLoadManager: Cancelled queued widget ${widgetId}`)\r\n      return true\r\n    }\r\n    \r\n    return false\r\n  }\r\n\r\n  /**\r\n   * æ¸…ç©ºä½‡åˆ—\r\n   */\r\n  clearQueue() {\r\n    const cancelledCount = this.queue.length\r\n    this.queue.forEach(task => {\r\n      task.reject(new Error('Queue cleared'))\r\n    })\r\n    this.queue = []\r\n    console.log(`WidgetLoadManager: Cleared queue, cancelled ${cancelledCount} tasks`)\r\n  }\r\n\r\n  /**\r\n   * ç²å–ç•¶å‰ç‹€æ…‹\r\n   */\r\n  getStatus() {\r\n    return {\r\n      currentLoading: this.currentLoading,\r\n      queueSize: this.queue.length,\r\n      maxConcurrent: this.maxConcurrent,\r\n      stats: { ...this.stats }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * èª¿æ•´ä½µç™¼é™åˆ¶\r\n   */\r\n  setMaxConcurrent(max) {\r\n    this.maxConcurrent = Math.max(1, Math.min(10, max)) // é™åˆ¶åœ¨ 1-10 ä¹‹é–“\r\n    console.log(`WidgetLoadManager: Max concurrent set to ${this.maxConcurrent}`)\r\n    \r\n    // å¦‚æœæé«˜äº†é™åˆ¶ï¼Œå˜—è©¦è™•ç†æ›´å¤šä»»å‹™\r\n    if (this.currentLoading < this.maxConcurrent) {\r\n      this.processQueue()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * é‡ç½®çµ±è¨ˆ\r\n   */\r\n  resetStats() {\r\n    this.stats = {\r\n      totalRequests: 0,\r\n      completedRequests: 0,\r\n      failedRequests: 0,\r\n      averageLoadTime: 0,\r\n      loadTimes: []\r\n    }\r\n    console.log('WidgetLoadManager: Stats reset')\r\n  }\r\n}\r\n\r\n// å‰µå»ºå…¨åŸŸå–®ä¾‹\r\nexport const widgetLoadManager = new WidgetLoadManager()\r\n\r\n// é–‹ç™¼æ¨¡å¼ä¸‹æš´éœ²åˆ° window ä»¥ä¾¿èª¿è©¦\r\nif (import.meta.env.DEV) {\r\n  window.widgetLoadManager = widgetLoadManager\r\n}","<template>\r\n  <div \r\n    class=\"lazy-widget\" \r\n    :id=\"containerId\" \r\n    ref=\"container\"\r\n    :style=\"{ height: height }\"\r\n  >\r\n    <!-- è¼‰å…¥å‰çš„ä½”ä½ç¬¦ -->\r\n    <div v-if=\"!isVisible && !loaded\" class=\"widget-placeholder\">\r\n      <div class=\"placeholder-content\">\r\n        <div class=\"placeholder-icon\">ğŸ“Š</div>\r\n        <div class=\"placeholder-text\">{{ widgetType }} Widget</div>\r\n        <div class=\"placeholder-subtext\">Scroll to load</div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- è¼‰å…¥ä¸­ç‹€æ…‹ -->\r\n    <div v-if=\"isVisible && !loaded && !error\" class=\"widget-loading\">\r\n      <div class=\"loading-spinner\"></div>\r\n      <span>Loading {{ widgetType }}...</span>\r\n    </div>\r\n    \r\n    <!-- éŒ¯èª¤ç‹€æ…‹ -->\r\n    <div v-if=\"error\" class=\"widget-error\">\r\n      <span>âš ï¸ Failed to load</span>\r\n      <button @click=\"retry\" class=\"retry-btn\">Retry</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { widgetLoadManager } from '@/utils/widgetLoadManager'\r\n\r\nexport default {\r\n  name: 'LazyTradingViewWidget',\r\n  props: {\r\n    widgetType: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    config: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    scriptUrl: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    height: {\r\n      type: String,\r\n      default: '400px'\r\n    },\r\n    priority: {\r\n      type: Number,\r\n      default: 1 // 1=é«˜å„ªå…ˆç´š, 2=ä¸­å„ªå…ˆç´š, 3=ä½å„ªå…ˆç´š\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      isVisible: false,\r\n      loaded: false,\r\n      error: false,\r\n      observer: null,\r\n      loadStartTime: 0\r\n    }\r\n  },\r\n  computed: {\r\n    containerId() {\r\n      return `lazy-widget-${this.widgetType}-${Date.now()}`\r\n    }\r\n  },\r\n  mounted() {\r\n    this.setupIntersectionObserver()\r\n  },\r\n  beforeUnmount() {\r\n    if (this.observer) {\r\n      this.observer.disconnect()\r\n    }\r\n  },\r\n  methods: {\r\n    setupIntersectionObserver() {\r\n      // æ ¹æ“šå„ªå…ˆç´šè¨­ç½®ä¸åŒçš„ rootMargin\r\n      const rootMargins = {\r\n        1: '200px', // é«˜å„ªå…ˆç´šï¼šæå‰ 200px è¼‰å…¥\r\n        2: '100px', // ä¸­å„ªå…ˆç´šï¼šæå‰ 100px è¼‰å…¥\r\n        3: '50px'   // ä½å„ªå…ˆç´šï¼šæå‰ 50px è¼‰å…¥\r\n      }\r\n\r\n      this.observer = new IntersectionObserver(\r\n        (entries) => {\r\n          entries.forEach((entry) => {\r\n            if (entry.isIntersecting && !this.loaded && !this.error) {\r\n              this.isVisible = true\r\n              this.loadWidget()\r\n              this.observer.disconnect() // è¼‰å…¥å¾Œåœæ­¢è§€å¯Ÿ\r\n            }\r\n          })\r\n        },\r\n        {\r\n          rootMargin: rootMargins[this.priority] || '100px',\r\n          threshold: 0.1\r\n        }\r\n      )\r\n\r\n      this.observer.observe(this.$refs.container)\r\n    },\r\n\r\n    async loadWidget() {\r\n      this.loadStartTime = performance.now()\r\n      \r\n      try {\r\n        // æ ¹æ“šå„ªå…ˆç´šæ·»åŠ å»¶é²\r\n        const delays = {\r\n          1: 0,     // é«˜å„ªå…ˆç´šï¼šç«‹å³è¼‰å…¥\r\n          2: 500,   // ä¸­å„ªå…ˆç´šï¼šå»¶é² 500ms\r\n          3: 1000   // ä½å„ªå…ˆç´šï¼šå»¶é² 1000ms\r\n        }\r\n\r\n        const delay = delays[this.priority] || 0\r\n        if (delay > 0) {\r\n          await new Promise(resolve => setTimeout(resolve, delay))\r\n        }\r\n\r\n        // ä½¿ç”¨ Widget Load Manager ç®¡ç†ä½µç™¼\r\n        const widgetId = `lazy-${this.widgetType}-${this.containerId}`\r\n        await widgetLoadManager.addToQueue(\r\n          () => this.createWidget(),\r\n          widgetId,\r\n          this.priority\r\n        )\r\n      } catch (err) {\r\n        console.error('Failed to load widget:', err)\r\n        this.error = true\r\n      }\r\n    },\r\n\r\n    async createWidget() {\r\n      return new Promise((resolve, reject) => {\r\n        this.$nextTick(() => {\r\n          const container = this.$refs.container\r\n          if (!container) {\r\n            reject(new Error('Container not found'))\r\n            return\r\n          }\r\n\r\n          // æ¸…é™¤ç¾æœ‰å…§å®¹\r\n          const existingContent = container.querySelector('.widget-placeholder, .widget-loading')\r\n          if (existingContent) {\r\n            existingContent.style.display = 'none'\r\n          }\r\n\r\n          try {\r\n            // å‰µå»º TradingView å®¹å™¨çµæ§‹\r\n            const widgetContainer = document.createElement('div')\r\n            widgetContainer.className = 'tradingview-widget-container'\r\n            widgetContainer.style.height = '100%'\r\n            widgetContainer.style.width = '100%'\r\n\r\n            const widgetContent = document.createElement('div')\r\n            widgetContent.className = 'tradingview-widget-container__widget'\r\n            widgetContent.style.height = '100%'\r\n            widgetContent.style.width = '100%'\r\n\r\n            widgetContainer.appendChild(widgetContent)\r\n\r\n            // å‰µå»º TradingView script - æ­£ç¢ºçš„æ–¹å¼\r\n            const script = document.createElement('script')\r\n            script.type = 'text/javascript'\r\n            script.src = this.scriptUrl\r\n            script.async = true\r\n            \r\n            // å°‡é…ç½®ä½œç‚º script çš„å…§å®¹\r\n            const configJson = JSON.stringify(this.config)\r\n            script.innerHTML = configJson\r\n            \r\n            // èª¿è©¦ä¿¡æ¯\r\n            console.log(`ğŸ”§ Creating ${this.widgetType} widget with config:`, this.config)\r\n            console.log(`ğŸ“ Config JSON:`, configJson)\r\n            \r\n            // è¨­å®šè¶…æ™‚ - æ ¹æ“šå„ªå…ˆç´šèª¿æ•´\r\n            const timeouts = {\r\n              1: 8000,  // é«˜å„ªå…ˆç´šï¼š8ç§’è¶…æ™‚\r\n              2: 10000, // ä¸­å„ªå…ˆç´šï¼š10ç§’è¶…æ™‚\r\n              3: 12000  // ä½å„ªå…ˆç´šï¼š12ç§’è¶…æ™‚\r\n            }\r\n            \r\n            const timeout = setTimeout(() => {\r\n              console.warn(`${this.widgetType} widget load timeout`)\r\n              this.error = true\r\n              reject(new Error('Widget load timeout'))\r\n            }, timeouts[this.priority] || 10000)\r\n            \r\n            script.onload = () => {\r\n              clearTimeout(timeout)\r\n              this.loaded = true\r\n              \r\n              const loadTime = performance.now() - this.loadStartTime\r\n              console.log(`âœ… ${this.widgetType} widget loaded in ${loadTime.toFixed(2)}ms (Priority: ${this.priority})`)\r\n              \r\n              resolve()\r\n            }\r\n            \r\n            script.onerror = (error) => {\r\n              clearTimeout(timeout)\r\n              console.error(`âŒ ${this.widgetType} script load failed:`, error)\r\n              this.error = true\r\n              reject(new Error('Script load failed'))\r\n            }\r\n            \r\n            // æ·»åŠ åˆ° DOM\r\n            widgetContent.appendChild(script)\r\n            container.appendChild(widgetContainer)\r\n            \r\n          } catch (error) {\r\n            console.error(`âŒ ${this.widgetType} widget creation failed:`, error)\r\n            this.error = true\r\n            reject(error)\r\n          }\r\n        })\r\n      })\r\n    },\r\n\r\n    async retry() {\r\n      this.error = false\r\n      this.loaded = false\r\n      await this.loadWidget()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.lazy-widget {\r\n  width: 100%;\r\n  position: relative;\r\n  overflow: hidden;\r\n  border-radius: 8px;\r\n}\r\n\r\n/* ä½”ä½ç¬¦æ¨£å¼ */\r\n.widget-placeholder {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);\r\n  border: 2px dashed #dee2e6;\r\n  border-radius: 8px;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.widget-placeholder:hover {\r\n  background: linear-gradient(135deg, #e9ecef 0%, #dee2e6 100%);\r\n  border-color: #adb5bd;\r\n}\r\n\r\n.placeholder-content {\r\n  text-align: center;\r\n  color: #6c757d;\r\n}\r\n\r\n.placeholder-icon {\r\n  font-size: 2rem;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.placeholder-text {\r\n  font-size: 1rem;\r\n  font-weight: 600;\r\n  margin-bottom: 0.25rem;\r\n}\r\n\r\n.placeholder-subtext {\r\n  font-size: 0.8rem;\r\n  opacity: 0.7;\r\n}\r\n\r\n/* è¼‰å…¥ä¸­æ¨£å¼ */\r\n.widget-loading {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n  color: #6c757d;\r\n}\r\n\r\n.loading-spinner {\r\n  width: 32px;\r\n  height: 32px;\r\n  border: 3px solid #e9ecef;\r\n  border-top: 3px solid #007bff;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n.widget-loading span {\r\n  font-size: 0.9rem;\r\n  font-weight: 500;\r\n}\r\n\r\n/* éŒ¯èª¤æ¨£å¼ */\r\n.widget-error {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  background: #f8d7da;\r\n  border: 1px solid #f5c6cb;\r\n  border-radius: 8px;\r\n  color: #721c24;\r\n}\r\n\r\n.retry-btn {\r\n  margin-top: 0.5rem;\r\n  padding: 0.5rem 1rem;\r\n  background: #dc3545;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.85rem;\r\n  font-weight: 500;\r\n  transition: background-color 0.2s;\r\n}\r\n\r\n.retry-btn:hover {\r\n  background: #c82333;\r\n}\r\n\r\n/* TradingView å®¹å™¨æ¨£å¼ */\r\n:global(.lazy-widget .tradingview-widget-container) {\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n  overflow: hidden !important;\r\n}\r\n\r\n:global(.lazy-widget .tradingview-widget-container__widget) {\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n}\r\n</style>","<template>\r\n  <div class=\"vix-widget-container\" ref=\"vixContainer\" :style=\"{ height: '600px' }\">\r\n    <div v-if=\"loading\" class=\"loading-state\">\r\n      <div class=\"loading-spinner\"></div>\r\n      <span>Loading VIX Index...</span>\r\n    </div>\r\n    <div v-if=\"error\" class=\"error-state\">\r\n      <span>âš ï¸ Failed to load VIX</span>\r\n      <button @click=\"loadVixWidget\" class=\"retry-btn\">Retry</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'VixWidget',\r\n  data() {\r\n    return {\r\n      loading: true,\r\n      error: false,\r\n      widgetId: `vix-widget-${Date.now()}`\r\n    }\r\n  },\r\n  mounted() {\r\n    this.loadVixWidget()\r\n  },\r\n  methods: {\r\n    async loadVixWidget() {\r\n      this.loading = true\r\n      this.error = false\r\n      \r\n      try {\r\n        // æ¸…é™¤å®¹å™¨\r\n        const container = this.$refs.vixContainer\r\n        if (!container) return\r\n        \r\n        // ç§»é™¤æ‰€æœ‰å­å…ƒç´ \r\n        while (container.firstChild) {\r\n          container.removeChild(container.firstChild)\r\n        }\r\n        \r\n        console.log('ğŸ”§ Starting VIX widget creation with FRED:VIXCLS...')\r\n        \r\n        // åƒè€ƒ LazyTradingViewWidget çš„æˆåŠŸå¯¦ä½œ\r\n        await this.createWidget()\r\n        \r\n      } catch (error) {\r\n        console.error('âŒ VIX widget creation failed:', error)\r\n        this.error = true\r\n        this.loading = false\r\n      }\r\n    },\r\n\r\n    async createWidget() {\r\n      return new Promise((resolve, reject) => {\r\n        this.$nextTick(() => {\r\n          const container = this.$refs.vixContainer\r\n          if (!container) {\r\n            reject(new Error('Container not found'))\r\n            return\r\n          }\r\n\r\n          try {\r\n            // å‰µå»º TradingView å®¹å™¨çµæ§‹ - åƒè€ƒ LazyTradingViewWidget\r\n            const widgetContainer = document.createElement('div')\r\n            widgetContainer.className = 'tradingview-widget-container'\r\n            widgetContainer.style.height = '100%'\r\n            widgetContainer.style.width = '100%'\r\n\r\n            const widgetContent = document.createElement('div')\r\n            widgetContent.className = 'tradingview-widget-container__widget'\r\n            widgetContent.style.height = '100%'\r\n            widgetContent.style.width = '100%'\r\n\r\n            widgetContainer.appendChild(widgetContent)\r\n\r\n            // å‰µå»º script å…ƒç´  - ä½¿ç”¨ LazyTradingViewWidget çš„æ–¹å¼\r\n            const script = document.createElement('script')\r\n            script.type = 'text/javascript'\r\n            script.src = 'https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js'\r\n            script.async = true\r\n            \r\n            // VIX é…ç½® - ä½¿ç”¨ FRED:VIXCLSï¼Œåƒè€ƒ Market Daily Insight çš„é…ç½®\r\n            const vixConfig = {\r\n              \"lineWidth\": 2,\r\n              \"lineType\": 2,\r\n              \"chartType\": \"line\",\r\n              \"showVolume\": false,\r\n              \"fontColor\": \"rgb(106, 109, 120)\",\r\n              \"gridLineColor\": \"rgba(46, 46, 46, 0.06)\",\r\n              \"volumeUpColor\": \"rgba(34, 171, 148, 0.5)\",\r\n              \"volumeDownColor\": \"rgba(247, 82, 95, 0.5)\",\r\n              \"backgroundColor\": \"#ffffff\",\r\n              \"widgetFontColor\": \"#0F0F0F\",\r\n              \"upColor\": \"#22ab94\",\r\n              \"downColor\": \"#f7525f\",\r\n              \"borderUpColor\": \"#22ab94\",\r\n              \"borderDownColor\": \"#f7525f\",\r\n              \"wickUpColor\": \"#22ab94\",\r\n              \"wickDownColor\": \"#f7525f\",\r\n              \"colorTheme\": \"light\",\r\n              \"isTransparent\": true,\r\n              \"locale\": \"en\",\r\n              \"chartOnly\": false,\r\n              \"scalePosition\": \"right\",\r\n              \"scaleMode\": \"Normal\",\r\n              \"fontFamily\": \"-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif\",\r\n              \"valuesTracking\": \"1\",\r\n              \"changeMode\": \"price-and-percent\",\r\n              \"symbols\": [[\"FRED:VIXCLS|12M\"]],\r\n              \"dateRanges\": [\"12m|1D\", \"60m|1W\", \"all|1M\"],\r\n              \"fontSize\": \"10\",\r\n              \"headerFontSize\": \"medium\",\r\n              \"autosize\": true,\r\n              \"width\": \"100%\",\r\n              \"height\": \"100%\",\r\n              \"noTimeScale\": false,\r\n              \"hideDateRanges\": false,\r\n              \"hideMarketStatus\": false,\r\n              \"hideSymbolLogo\": false\r\n            }\r\n            \r\n            // é—œéµï¼šä½¿ç”¨ innerHTML è€Œä¸æ˜¯ textContent - åƒè€ƒ LazyTradingViewWidget\r\n            const configJson = JSON.stringify(vixConfig)\r\n            script.innerHTML = configJson\r\n            \r\n            console.log('ğŸ”§ FRED:VIXCLS Config:', vixConfig)\r\n            console.log('ğŸ“ Config JSON:', configJson)\r\n            \r\n            // è¨­ç½®è¶…æ™‚æª¢æŸ¥\r\n            const timeout = setTimeout(() => {\r\n              console.warn('â° VIX widget load timeout')\r\n              this.error = true\r\n              this.loading = false\r\n              reject(new Error('Widget load timeout'))\r\n            }, 8000)\r\n            \r\n            // è¨­ç½®è¼‰å…¥è™•ç†\r\n            script.onload = () => {\r\n              clearTimeout(timeout)\r\n              console.log('âœ… FRED:VIXCLS widget script loaded')\r\n              this.loading = false\r\n              resolve()\r\n            }\r\n            \r\n            script.onerror = (error) => {\r\n              clearTimeout(timeout)\r\n              console.error('âŒ VIX widget script failed:', error)\r\n              this.error = true\r\n              this.loading = false\r\n              reject(new Error('Script load failed'))\r\n            }\r\n            \r\n            // æ·»åŠ åˆ° DOM - åƒè€ƒ LazyTradingViewWidget çš„é †åº\r\n            widgetContent.appendChild(script)\r\n            container.appendChild(widgetContainer)\r\n            \r\n          } catch (error) {\r\n            console.error('âŒ VIX widget creation failed:', error)\r\n            this.error = true\r\n            this.loading = false\r\n            reject(error)\r\n          }\r\n        })\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.vix-widget-container {\r\n  width: 100%;\r\n  position: relative;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n}\r\n\r\n.loading-state {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  background: #f8f9fa;\r\n  color: #6c757d;\r\n}\r\n\r\n.loading-spinner {\r\n  width: 32px;\r\n  height: 32px;\r\n  border: 3px solid #e9ecef;\r\n  border-top: 3px solid #007bff;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n.error-state {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  background: #f8d7da;\r\n  border: 1px solid #f5c6cb;\r\n  color: #721c24;\r\n}\r\n\r\n.retry-btn {\r\n  margin-top: 0.5rem;\r\n  padding: 0.5rem 1rem;\r\n  background: #dc3545;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.85rem;\r\n}\r\n\r\n.retry-btn:hover {\r\n  background: #c82333;\r\n}\r\n\r\n:global(.vix-widget-container .tradingview-widget-container) {\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n  overflow: hidden !important; /* åƒè€ƒ LazyTradingViewWidget */\r\n}\r\n\r\n:global(.vix-widget-container .tradingview-widget-container__widget) {\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n}\r\n</style>","<template>\r\n  <div class=\"fear-greed-gauge-container\">\r\n    <div class=\"widget-header\">\r\n      <h3>Fear & Greed Index Gauge</h3>\r\n      <div class=\"chart-info\">\r\n        <span class=\"chart-description\">Based on Zeiierman's Algorithm</span>\r\n      </div>\r\n    </div>\r\n    \r\n    <div class=\"market-fng-gauge__meter-container\">\r\n      <!-- Left Side: Current Sentiment + Gauge -->\r\n      <div class=\"left-side\">\r\n        <!-- Current Sentiment Status - Above gauge, left side only -->\r\n        <div class=\"current-sentiment\" :class=\"sentimentClass\">\r\n          <div class=\"sentiment-indicator\">\r\n            <div class=\"sentiment-dot\"></div>\r\n            <span class=\"sentiment-text\">{{ currentSentiment }}</span>\r\n          </div>\r\n          <div class=\"sentiment-description\">{{ sentimentDescription }}</div>\r\n        </div>\r\n        \r\n        <!-- Semicircle Gauge -->\r\n        <div class=\"gauge-wrapper\">\r\n        <svg class=\"gauge-svg\" viewBox=\"0 0 400 240\" xmlns=\"http://www.w3.org/2000/svg\">\r\n          <!-- Background Arc with Color Zones -->\r\n          <defs>\r\n            <linearGradient id=\"gaugeGradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\r\n              <!-- æ¥µåº¦ææ‡¼ (0-25): é™ä½é£½å’Œåº¦çš„ç´…è‰² -->\r\n              <stop offset=\"0%\" style=\"stop-color:#e57373;stop-opacity:1\" />\r\n              <stop offset=\"12.5%\" style=\"stop-color:#ef5350;stop-opacity:1\" />\r\n              <stop offset=\"25%\" style=\"stop-color:#ffb74d;stop-opacity:1\" />\r\n              \r\n              <!-- ææ‡¼ (25-45): é™ä½é£½å’Œåº¦çš„æ©™è‰² -->\r\n              <stop offset=\"35%\" style=\"stop-color:#ffcc80;stop-opacity:1\" />\r\n              <stop offset=\"45%\" style=\"stop-color:#ffd54f;stop-opacity:1\" />\r\n              \r\n              <!-- ä¸­æ€§ (45-55): é™ä½é£½å’Œåº¦çš„é»ƒè‰² -->\r\n              <stop offset=\"50%\" style=\"stop-color:#fff176;stop-opacity:1\" />\r\n              <stop offset=\"55%\" style=\"stop-color:#fff59d;stop-opacity:1\" />\r\n              \r\n              <!-- è²ªå©ª (55-75): é™ä½é£½å’Œåº¦çš„ç¶ è‰² -->\r\n              <stop offset=\"65%\" style=\"stop-color:#aed581;stop-opacity:1\" />\r\n              <stop offset=\"75%\" style=\"stop-color:#81c784;stop-opacity:1\" />\r\n              \r\n              <!-- æ¥µåº¦è²ªå©ª (75-100): é™ä½é£½å’Œåº¦çš„æ·±ç¶ è‰² -->\r\n              <stop offset=\"87.5%\" style=\"stop-color:#66bb6a;stop-opacity:1\" />\r\n              <stop offset=\"100%\" style=\"stop-color:#4db6ac;stop-opacity:1\" />\r\n            </linearGradient>\r\n          </defs>\r\n          \r\n          <!-- Main Arc -->\r\n          <path\r\n            d=\"M 40 200 A 160 160 0 0 1 360 200\"\r\n            fill=\"none\"\r\n            stroke=\"url(#gaugeGradient)\"\r\n            stroke-width=\"20\"\r\n            stroke-linecap=\"round\"\r\n          />\r\n          \r\n          <!-- Needle -->\r\n          <g class=\"needle-group\">\r\n            <line\r\n              :x1=\"200\"\r\n              :y1=\"200\"\r\n              :x2=\"needleX\"\r\n              :y2=\"needleY\"\r\n              stroke=\"#333\"\r\n              stroke-width=\"4\"\r\n              stroke-linecap=\"round\"\r\n              class=\"gauge-needle\"\r\n            />\r\n            <!-- Needle Center -->\r\n            <circle cx=\"200\" cy=\"200\" r=\"8\" fill=\"#333\" />\r\n            <circle cx=\"200\" cy=\"200\" r=\"4\" fill=\"#fff\" />\r\n          </g>\r\n          \r\n          <!-- Value Display -->\r\n          <text x=\"200\" y=\"230\" text-anchor=\"middle\" class=\"gauge-value\">{{ fearGreedValue.toFixed(0) }}</text>\r\n        </svg>\r\n        \r\n        <!-- Labels -->\r\n        <div class=\"gauge-labels\">\r\n          <div class=\"label-item extreme-fear\">\r\n            <span class=\"label-text\">Extreme Fear</span>\r\n            <span class=\"label-range\">0-25</span>\r\n          </div>\r\n          <div class=\"label-item fear\">\r\n            <span class=\"label-text\">Fear</span>\r\n            <span class=\"label-range\">25-45</span>\r\n          </div>\r\n          <div class=\"label-item neutral\">\r\n            <span class=\"label-text\">Neutral</span>\r\n            <span class=\"label-range\">45-55</span>\r\n          </div>\r\n          <div class=\"label-item greed\">\r\n            <span class=\"label-text\">Greed</span>\r\n            <span class=\"label-range\">55-75</span>\r\n          </div>\r\n          <div class=\"label-item extreme-greed\">\r\n            <span class=\"label-text\">Extreme Greed</span>\r\n            <span class=\"label-range\">75-100</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      </div>\r\n      \r\n      <!-- Right Side: Component Breakdown -->\r\n      <div class=\"components-section\">\r\n        <h4>Index Components</h4>\r\n        <div class=\"components-grid\">\r\n          <div class=\"component-item\">\r\n            <span class=\"component-name\">S&P 500 vs 125-day MA</span>\r\n            <div class=\"component-bar\">\r\n              <div class=\"component-fill\" :style=\"{ width: components.sp125 + '%' }\"></div>\r\n              <span class=\"component-value\">{{ components.sp125 }}</span>\r\n            </div>\r\n          </div>\r\n          <div class=\"component-item\">\r\n            <span class=\"component-name\">52-Week High/Low Strength</span>\r\n            <div class=\"component-bar\">\r\n              <div class=\"component-fill\" :style=\"{ width: components.hl52 + '%' }\"></div>\r\n              <span class=\"component-value\">{{ components.hl52 }}</span>\r\n            </div>\r\n          </div>\r\n          <div class=\"component-item\">\r\n            <span class=\"component-name\">Market Breadth (McClellan)</span>\r\n            <div class=\"component-bar\">\r\n              <div class=\"component-fill\" :style=\"{ width: components.mcsi + '%' }\"></div>\r\n              <span class=\"component-value\">{{ components.mcsi }}</span>\r\n            </div>\r\n          </div>\r\n          <div class=\"component-item\">\r\n            <span class=\"component-name\">Put/Call Ratio</span>\r\n            <div class=\"component-bar\">\r\n              <div class=\"component-fill\" :style=\"{ width: components.putCall + '%' }\"></div>\r\n              <span class=\"component-value\">{{ components.putCall }}</span>\r\n            </div>\r\n          </div>\r\n          <div class=\"component-item\">\r\n            <span class=\"component-name\">VIX vs 50-day MA</span>\r\n            <div class=\"component-bar\">\r\n              <div class=\"component-fill\" :style=\"{ width: components.vix50 + '%' }\"></div>\r\n              <span class=\"component-value\">{{ components.vix50 }}</span>\r\n            </div>\r\n          </div>\r\n          <div class=\"component-item\">\r\n            <span class=\"component-name\">Safe Haven Demand</span>\r\n            <div class=\"component-bar\">\r\n              <div class=\"component-fill\" :style=\"{ width: components.safe + '%' }\"></div>\r\n              <span class=\"component-value\">{{ components.safe }}</span>\r\n            </div>\r\n          </div>\r\n          <div class=\"component-item\">\r\n            <span class=\"component-name\">Junk Bond Demand</span>\r\n            <div class=\"component-bar\">\r\n              <div class=\"component-fill\" :style=\"{ width: components.yieldSpread + '%' }\"></div>\r\n              <span class=\"component-value\">{{ components.yieldSpread }}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'ZeiiermanFearGreedGauge',\r\n  data() {\r\n    return {\r\n      // Mock data based on Zeiierman's algorithm components - Adjusted for index value of 58\r\n      components: {\r\n        sp125: 65,        // S&P 500 vs 125-day moving average\r\n        hl52: 52,         // 52-week high/low strength  \r\n        mcsi: 60,         // McClellan Summation Index (Market Breadth)\r\n        putCall: 45,      // Put/Call ratio (inverted)\r\n        vix50: 55,        // VIX vs 50-day MA (inverted)\r\n        safe: 62,         // Safe Haven Demand (Stock vs Bond performance)\r\n        yieldSpread: 67   // Junk Bond Demand (Yield spread)\r\n      },\r\n      lastUpdate: new Date()\r\n    }\r\n  },\r\n  computed: {\r\n    fearGreedValue() {\r\n      // Calculate average of all components (Zeiierman's method)\r\n      const values = Object.values(this.components)\r\n      const average = values.reduce((sum, val) => sum + val, 0) / values.length\r\n      return average\r\n    },\r\n    \r\n    needleAngle() {\r\n      // Convert 0-100 value to -90 to +90 degrees (180 degree arc)\r\n      return (this.fearGreedValue - 50) * 1.8\r\n    },\r\n    \r\n    needleX() {\r\n      const angle = this.needleAngle * (Math.PI / 180)\r\n      return 200 + 140 * Math.sin(angle)\r\n    },\r\n    \r\n    needleY() {\r\n      const angle = this.needleAngle * (Math.PI / 180)\r\n      return 200 - 140 * Math.cos(angle)\r\n    },\r\n    \r\n    currentSentiment() {\r\n      if (this.fearGreedValue <= 25) return 'Extreme Fear'\r\n      if (this.fearGreedValue <= 45) return 'Fear'\r\n      if (this.fearGreedValue <= 55) return 'Neutral'\r\n      if (this.fearGreedValue <= 75) return 'Greed'\r\n      return 'Extreme Greed'\r\n    },\r\n    \r\n    sentimentClass() {\r\n      if (this.fearGreedValue <= 25) return 'extreme-fear'\r\n      if (this.fearGreedValue <= 45) return 'fear'\r\n      if (this.fearGreedValue <= 55) return 'neutral'\r\n      if (this.fearGreedValue <= 75) return 'greed'\r\n      return 'extreme-greed'\r\n    },\r\n    \r\n    sentimentDescription() {\r\n      if (this.fearGreedValue <= 25) return 'Market showing extreme pessimism and panic selling conditions'\r\n      if (this.fearGreedValue <= 45) return 'Elevated market anxiety with defensive investor positioning'\r\n      if (this.fearGreedValue <= 55) return 'Balanced market sentiment with mixed investor signals'\r\n      if (this.fearGreedValue <= 75) return 'Optimistic market conditions with increased risk appetite'\r\n      return 'Excessive market euphoria indicating potential overvaluation'\r\n    }\r\n  },\r\n  mounted() {\r\n    // ä¸æ‰§è¡Œè‡ªåŠ¨æ›´æ–°ï¼Œä¿æŒå›ºå®šçš„58å€¼\r\n    console.log('Zeiierman Fear & Greed Index loaded with fixed value:', this.fearGreedValue)\r\n  },\r\n  methods: {\r\n    // ä¿ç•™æ–¹æ³•ä»¥å¤‡å°†æ¥éœ€è¦æ‰‹åŠ¨æ›´æ–°\r\n    updateComponents() {\r\n      // åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œè¿™é‡Œä¼šè·å–çœŸå®çš„å¸‚åœºæ•°æ®\r\n      this.lastUpdate = new Date()\r\n      console.log('Zeiierman Fear & Greed Index:', this.fearGreedValue)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.fear-greed-gauge-container {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  margin-bottom: 2rem;\r\n  overflow: hidden; /* Prevent container overflow */\r\n  position: relative;\r\n}\r\n\r\n.widget-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 1rem;\r\n  padding-bottom: 0.75rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.widget-header h3 {\r\n  font-size: 1.1rem;\r\n  font-weight: 600;\r\n  color: #333;\r\n  margin: 0;\r\n}\r\n\r\n.chart-info {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-end;\r\n}\r\n\r\n.chart-description {\r\n  font-size: 0.85rem;\r\n  color: #6c757d;\r\n  font-style: italic;\r\n}\r\n\r\n.market-fng-gauge__meter-container {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 2.5rem;\r\n  align-items: start;\r\n  overflow: hidden; /* Prevent grid overflow */\r\n}\r\n\r\n/* Left Side Container */\r\n.left-side {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1.5rem;\r\n  max-width: 100%;\r\n  overflow: hidden;\r\n}\r\n\r\n/* Current Sentiment - Now positioned in left side only */\r\n.current-sentiment {\r\n  text-align: center;\r\n  padding: 1.25rem;\r\n  border-radius: 12px;\r\n  background: #f8f9fa;\r\n  border: 2px solid transparent;\r\n  transition: all 0.3s ease;\r\n  max-width: 100%;\r\n  overflow: hidden;\r\n}\r\n\r\n/* Gauge Styles */\r\n.gauge-wrapper {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  max-width: 100%;\r\n  overflow: hidden;\r\n}\r\n\r\n.gauge-svg {\r\n  width: 100%;\r\n  max-width: 400px;\r\n  height: auto;\r\n  overflow: visible; /* Allow SVG elements to be visible */\r\n}\r\n\r\n.gauge-value {\r\n  font-size: 24px;\r\n  font-weight: 700;\r\n  fill: #333;\r\n}\r\n\r\n.needle-group {\r\n  transition: all 0.8s ease-in-out;\r\n}\r\n\r\n/* Labels */\r\n.gauge-labels {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  width: 100%;\r\n  max-width: 400px;\r\n  margin-top: 1rem;\r\n  font-size: 0.75rem;\r\n  overflow: hidden;\r\n}\r\n\r\n.label-item {\r\n  text-align: center;\r\n  flex: 1;\r\n  min-width: 0; /* Allow flex items to shrink */\r\n}\r\n\r\n.label-text {\r\n  display: block;\r\n  font-weight: 600;\r\n  margin-bottom: 0.25rem;\r\n}\r\n\r\n.label-range {\r\n  display: block;\r\n  font-size: 0.7rem;\r\n  opacity: 0.7;\r\n}\r\n\r\n.label-item.extreme-fear .label-text { color: #a67c7c; }\r\n.label-item.fear .label-text { color: #b8956f; }\r\n.label-item.neutral .label-text { color: #b8b56f; }\r\n.label-item.greed .label-text { color: #7ca67c; }\r\n.label-item.extreme-greed .label-text { color: #7ca688; }\r\n\r\n/* Components Section - Right side styling */\r\n.components-section {\r\n  max-width: 100%;\r\n  overflow: hidden;\r\n}\r\n\r\n.components-section h4 {\r\n  font-size: 1.1rem;\r\n  font-weight: 600;\r\n  color: #333;\r\n  margin-bottom: 1rem;\r\n  padding-bottom: 0.5rem;\r\n  border-bottom: 1px solid #e9ecef;\r\n}\r\n\r\n.components-grid {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1rem;\r\n  max-width: 100%;\r\n}\r\n\r\n.component-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n  max-width: 100%;\r\n}\r\n\r\n.component-name {\r\n  font-size: 0.85rem;\r\n  font-weight: 500;\r\n  color: #495057;\r\n  word-wrap: break-word;\r\n}\r\n\r\n.component-bar {\r\n  position: relative;\r\n  height: 24px;\r\n  background: #e9ecef;\r\n  border-radius: 12px;\r\n  overflow: hidden;\r\n  width: 100%;\r\n}\r\n\r\n.component-fill {\r\n  height: 100%;\r\n  background: linear-gradient(90deg, #c67373 0%, #d4956f 25%, #d4c56f 50%, #7ca67c 75%, #7ca688 100%);\r\n  border-radius: 12px;\r\n  transition: width 0.8s ease;\r\n}\r\n\r\n.component-value {\r\n  position: absolute;\r\n  right: 8px;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  font-size: 0.75rem;\r\n  font-weight: 600;\r\n  color: #333;\r\n  text-shadow: 0 0 3px rgba(255,255,255,0.8);\r\n}\r\n\r\n.sentiment-indicator {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 0.75rem;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.sentiment-dot {\r\n  width: 16px;\r\n  height: 16px;\r\n  border-radius: 50%;\r\n  animation: pulse 2s infinite;\r\n}\r\n\r\n.sentiment-text {\r\n  font-size: 1.4rem;\r\n  font-weight: 700;\r\n}\r\n\r\n.sentiment-description {\r\n  font-size: 0.95rem;\r\n  color: #6c757d;\r\n  line-height: 1.5;\r\n}\r\n\r\n/* Sentiment Colors */\r\n.extreme-fear {\r\n  background: linear-gradient(135deg, #f5f0f0, #f8f5f5);\r\n  border-color: #a67c7c;\r\n}\r\n.extreme-fear .sentiment-dot { background: #a67c7c; }\r\n.extreme-fear .sentiment-text { color: #a67c7c; }\r\n\r\n.fear {\r\n  background: linear-gradient(135deg, #f5f3f0, #f8f6f5);\r\n  border-color: #b8956f;\r\n}\r\n.fear .sentiment-dot { background: #b8956f; }\r\n.fear .sentiment-text { color: #b8956f; }\r\n\r\n.neutral {\r\n  background: linear-gradient(135deg, #f5f5f0, #f8f8f5);\r\n  border-color: #b8b56f;\r\n}\r\n.neutral .sentiment-dot { background: #b8b56f; }\r\n.neutral .sentiment-text { color: #a6a35f; }\r\n\r\n.greed {\r\n  background: linear-gradient(135deg, #f0f5f0, #f5f8f5);\r\n  border-color: #7ca67c;\r\n}\r\n.greed .sentiment-dot { background: #7ca67c; }\r\n.greed .sentiment-text { color: #7ca67c; }\r\n\r\n.extreme-greed {\r\n  background: linear-gradient(135deg, #f0f5f2, #f5f8f6);\r\n  border-color: #7ca688;\r\n}\r\n.extreme-greed .sentiment-dot { background: #7ca688; }\r\n.extreme-greed .sentiment-text { color: #6f9577; }\r\n\r\n@keyframes pulse {\r\n  0%, 100% { opacity: 1; transform: scale(1); }\r\n  50% { opacity: 0.7; transform: scale(1.1); }\r\n}\r\n\r\n/* Responsive Design */\r\n@media (max-width: 1024px) {\r\n  .market-fng-gauge__meter-container {\r\n    grid-template-columns: 1fr;\r\n    gap: 2rem;\r\n  }\r\n  \r\n  .left-side {\r\n    gap: 1rem;\r\n  }\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .widget-header {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 0.5rem;\r\n  }\r\n  \r\n  .chart-info {\r\n    align-items: flex-start;\r\n  }\r\n  \r\n  .gauge-labels {\r\n    flex-direction: column;\r\n    align-items: center;\r\n    gap: 0.5rem;\r\n  }\r\n  \r\n  .label-item {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    width: 200px;\r\n  }\r\n  \r\n  .current-sentiment {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .sentiment-text {\r\n    font-size: 1.2rem;\r\n  }\r\n  \r\n  .market-fng-gauge__meter-container {\r\n    gap: 1.5rem;\r\n  }\r\n  \r\n  .left-side {\r\n    gap: 1rem;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .fear-greed-gauge-container {\r\n    padding: 0.75rem;\r\n    margin: 0 -0.25rem 2rem -0.25rem;\r\n  }\r\n  \r\n  .current-sentiment {\r\n    padding: 0.75rem;\r\n  }\r\n  \r\n  .sentiment-text {\r\n    font-size: 1.1rem;\r\n  }\r\n  \r\n  .sentiment-description {\r\n    font-size: 0.85rem;\r\n  }\r\n  \r\n  .market-fng-gauge__meter-container {\r\n    gap: 1rem;\r\n  }\r\n  \r\n  .left-side {\r\n    gap: 0.75rem;\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"market-overview-skeleton\">\r\n    <!-- Market Index Widget Skeleton -->\r\n    <div class=\"skeleton-widget-container\">\r\n      <div class=\"skeleton-widget-header\">\r\n        <div class=\"skeleton-title\"></div>\r\n      </div>\r\n      <div class=\"skeleton-ticker-area\">\r\n        <div class=\"skeleton-ticker-item\" v-for=\"i in 6\" :key=\"i\"></div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Fear & Greed Gauge Skeleton -->\r\n    <div class=\"skeleton-widget-container\">\r\n      <div class=\"skeleton-widget-header\">\r\n        <div class=\"skeleton-title\"></div>\r\n      </div>\r\n      <div class=\"skeleton-gauge-area\">\r\n        <div class=\"skeleton-gauge-circle\"></div>\r\n        <div class=\"skeleton-gauge-info\">\r\n          <div class=\"skeleton-gauge-value\"></div>\r\n          <div class=\"skeleton-gauge-label\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Top Stories Widget Skeleton -->\r\n    <div class=\"skeleton-widget-container large\">\r\n      <div class=\"skeleton-widget-header\">\r\n        <div class=\"skeleton-title\"></div>\r\n      </div>\r\n      <div class=\"skeleton-stories-area\">\r\n        <div class=\"skeleton-story-item\" v-for=\"i in 8\" :key=\"i\">\r\n          <div class=\"skeleton-story-time\"></div>\r\n          <div class=\"skeleton-story-title\"></div>\r\n          <div class=\"skeleton-story-content\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Market Insight Widget Skeleton -->\r\n    <div class=\"skeleton-widget-container large\">\r\n      <div class=\"skeleton-widget-header\">\r\n        <div class=\"skeleton-title\"></div>\r\n      </div>\r\n      <div class=\"skeleton-insight-grid\">\r\n        <div class=\"skeleton-insight-section\">\r\n          <div class=\"skeleton-section-header\">\r\n            <div class=\"skeleton-section-title\"></div>\r\n          </div>\r\n          <div class=\"skeleton-chart-area\">\r\n            <div class=\"skeleton-chart\"></div>\r\n          </div>\r\n        </div>\r\n        <div class=\"skeleton-insight-section\">\r\n          <div class=\"skeleton-section-header\">\r\n            <div class=\"skeleton-section-title\"></div>\r\n          </div>\r\n          <div class=\"skeleton-chart-area\">\r\n            <div class=\"skeleton-chart\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Stock Heatmap Widget Skeleton -->\r\n    <div class=\"skeleton-widget-container\">\r\n      <div class=\"skeleton-widget-header\">\r\n        <div class=\"skeleton-title\"></div>\r\n      </div>\r\n      <div class=\"skeleton-heatmap-area\">\r\n        <div class=\"skeleton-heatmap-grid\">\r\n          <div class=\"skeleton-heatmap-cell\" v-for=\"i in 20\" :key=\"i\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Performance Monitor Skeleton -->\r\n    <div class=\"skeleton-widget-container\">\r\n      <div class=\"skeleton-widget-header\">\r\n        <div class=\"skeleton-title\"></div>\r\n      </div>\r\n      <div class=\"skeleton-performance-area\">\r\n        <div class=\"skeleton-performance-item\" v-for=\"i in 4\" :key=\"i\">\r\n          <div class=\"skeleton-performance-label\"></div>\r\n          <div class=\"skeleton-performance-value\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'MarketOverviewSkeleton'\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/* åŸºç¤éª¨æ¶å‹•ç•« */\r\n@keyframes shimmer {\r\n  0% {\r\n    background-position: -200px 0;\r\n  }\r\n  100% {\r\n    background-position: calc(200px + 100%) 0;\r\n  }\r\n}\r\n\r\n.market-overview-skeleton {\r\n  padding: 0;\r\n  overflow-x: hidden;\r\n  max-width: 100%;\r\n}\r\n\r\n/* é€šç”¨éª¨æ¶æ¨£å¼ */\r\n.skeleton-base {\r\n  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\r\n  background-size: 200px 100%;\r\n  animation: shimmer 1.5s infinite linear;\r\n  border-radius: 4px;\r\n}\r\n\r\n/* Widget å®¹å™¨éª¨æ¶ */\r\n.skeleton-widget-container {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  margin-bottom: 2rem;\r\n  overflow: hidden;\r\n  position: relative;\r\n}\r\n\r\n.skeleton-widget-container.large {\r\n  min-height: 400px;\r\n}\r\n\r\n.skeleton-widget-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 1rem;\r\n  padding-bottom: 0.75rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.skeleton-title {\r\n  @extend .skeleton-base;\r\n  width: 140px;\r\n  height: 20px;\r\n}\r\n\r\n/* Market Index Ticker éª¨æ¶ */\r\n.skeleton-ticker-area {\r\n  display: flex;\r\n  gap: 1rem;\r\n  overflow: hidden;\r\n  min-height: 100px;\r\n  align-items: center;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.skeleton-ticker-item {\r\n  @extend .skeleton-base;\r\n  flex: 1;\r\n  min-width: 120px;\r\n  height: 60px;\r\n  border-radius: 8px;\r\n}\r\n\r\n/* Fear & Greed Gauge éª¨æ¶ */\r\n.skeleton-gauge-area {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 2rem;\r\n  min-height: 200px;\r\n}\r\n\r\n.skeleton-gauge-circle {\r\n  @extend .skeleton-base;\r\n  width: 150px;\r\n  height: 150px;\r\n  border-radius: 50%;\r\n}\r\n\r\n.skeleton-gauge-info {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1rem;\r\n}\r\n\r\n.skeleton-gauge-value {\r\n  @extend .skeleton-base;\r\n  width: 80px;\r\n  height: 32px;\r\n}\r\n\r\n.skeleton-gauge-label {\r\n  @extend .skeleton-base;\r\n  width: 120px;\r\n  height: 20px;\r\n}\r\n\r\n/* Top Stories éª¨æ¶ */\r\n.skeleton-stories-area {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1rem;\r\n  min-height: 600px;\r\n}\r\n\r\n.skeleton-story-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n  padding: 1rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.skeleton-story-time {\r\n  @extend .skeleton-base;\r\n  width: 100px;\r\n  height: 14px;\r\n}\r\n\r\n.skeleton-story-title {\r\n  @extend .skeleton-base;\r\n  width: 80%;\r\n  height: 18px;\r\n}\r\n\r\n.skeleton-story-content {\r\n  @extend .skeleton-base;\r\n  width: 60%;\r\n  height: 14px;\r\n}\r\n\r\n/* Market Insight éª¨æ¶ */\r\n.skeleton-insight-grid {\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n  gap: 1.5rem;\r\n  align-items: start;\r\n}\r\n\r\n.skeleton-insight-section {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.75rem;\r\n}\r\n\r\n.skeleton-insight-section:nth-child(2) {\r\n  border-top: 1px solid #f0f0f0;\r\n  padding-top: 1.5rem;\r\n}\r\n\r\n.skeleton-section-header {\r\n  padding-bottom: 0.5rem;\r\n}\r\n\r\n.skeleton-section-title {\r\n  @extend .skeleton-base;\r\n  width: 200px;\r\n  height: 18px;\r\n}\r\n\r\n.skeleton-chart-area {\r\n  min-height: 600px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.skeleton-chart {\r\n  @extend .skeleton-base;\r\n  width: 100%;\r\n  height: 500px;\r\n  border-radius: 8px;\r\n}\r\n\r\n/* Stock Heatmap éª¨æ¶ */\r\n.skeleton-heatmap-area {\r\n  min-height: 500px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.skeleton-heatmap-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(5, 1fr);\r\n  gap: 0.5rem;\r\n  width: 100%;\r\n  height: 400px;\r\n}\r\n\r\n.skeleton-heatmap-cell {\r\n  @extend .skeleton-base;\r\n  border-radius: 4px;\r\n}\r\n\r\n/* Performance Monitor éª¨æ¶ */\r\n.skeleton-performance-area {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\r\n  gap: 1rem;\r\n  min-height: 120px;\r\n}\r\n\r\n.skeleton-performance-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n  padding: 1rem;\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n}\r\n\r\n.skeleton-performance-label {\r\n  @extend .skeleton-base;\r\n  width: 100px;\r\n  height: 16px;\r\n}\r\n\r\n.skeleton-performance-value {\r\n  @extend .skeleton-base;\r\n  width: 80px;\r\n  height: 24px;\r\n}\r\n\r\n/* å¯¦éš›æ‡‰ç”¨éª¨æ¶æ¨£å¼ */\r\n.skeleton-title,\r\n.skeleton-ticker-item,\r\n.skeleton-gauge-circle,\r\n.skeleton-gauge-value,\r\n.skeleton-gauge-label,\r\n.skeleton-story-time,\r\n.skeleton-story-title,\r\n.skeleton-story-content,\r\n.skeleton-section-title,\r\n.skeleton-chart,\r\n.skeleton-heatmap-cell,\r\n.skeleton-performance-label,\r\n.skeleton-performance-value {\r\n  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\r\n  background-size: 200px 100%;\r\n  animation: shimmer 1.5s infinite linear;\r\n  border-radius: 4px;\r\n}\r\n\r\n/* éŸ¿æ‡‰å¼è¨­è¨ˆ */\r\n@media (max-width: 768px) {\r\n  .skeleton-widget-container {\r\n    padding: 0.75rem;\r\n    margin-bottom: 1rem;\r\n  }\r\n  \r\n  .skeleton-ticker-area {\r\n    flex-direction: column;\r\n    gap: 0.5rem;\r\n  }\r\n  \r\n  .skeleton-ticker-item {\r\n    min-width: 100%;\r\n    height: 50px;\r\n  }\r\n  \r\n  .skeleton-gauge-area {\r\n    flex-direction: column;\r\n    gap: 1rem;\r\n  }\r\n  \r\n  .skeleton-gauge-circle {\r\n    width: 120px;\r\n    height: 120px;\r\n  }\r\n  \r\n  .skeleton-heatmap-grid {\r\n    grid-template-columns: repeat(3, 1fr);\r\n    height: 300px;\r\n  }\r\n  \r\n  .skeleton-performance-area {\r\n    grid-template-columns: 1fr;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .skeleton-widget-container {\r\n    padding: 0.5rem;\r\n    margin: 0 -0.25rem 1rem -0.25rem;\r\n  }\r\n  \r\n  .skeleton-heatmap-grid {\r\n    grid-template-columns: repeat(2, 1fr);\r\n    height: 250px;\r\n  }\r\n}\r\n\r\n/* å‹•ç•«å»¶é²æ•ˆæœ */\r\n.skeleton-ticker-item:nth-child(1) { animation-delay: 0.1s; }\r\n.skeleton-ticker-item:nth-child(2) { animation-delay: 0.2s; }\r\n.skeleton-ticker-item:nth-child(3) { animation-delay: 0.3s; }\r\n.skeleton-ticker-item:nth-child(4) { animation-delay: 0.4s; }\r\n.skeleton-ticker-item:nth-child(5) { animation-delay: 0.5s; }\r\n.skeleton-ticker-item:nth-child(6) { animation-delay: 0.6s; }\r\n\r\n.skeleton-story-item:nth-child(odd) { animation-delay: 0.1s; }\r\n.skeleton-story-item:nth-child(even) { animation-delay: 0.2s; }\r\n\r\n/* æ·¡å…¥æ•ˆæœ */\r\n.market-overview-skeleton {\r\n  animation: fadeIn 0.3s ease-in;\r\n}\r\n\r\n@keyframes fadeIn {\r\n  from {\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    opacity: 1;\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"market-dashboard\">\r\n    <h2>Market Overview</h2>\r\n    <p class=\"text-muted mb-3\">Global markets overview and macro indicators</p>\r\n\r\n    <!-- è¼‰å…¥ç‹€æ…‹é¡¯ç¤ºéª¨æ¶å± -->\r\n    <div v-if=\"loading\" class=\"loading-with-skeleton\">\r\n      <MarketOverviewSkeleton />\r\n    </div>\r\n\r\n    <!-- éŒ¯èª¤ç‹€æ…‹ -->\r\n    <div v-else-if=\"error\" class=\"error\">\r\n      <p class=\"text-danger\">{{ error }}</p>\r\n      <button @click=\"refresh\" class=\"btn btn-secondary\">Retry</button>\r\n    </div>\r\n\r\n    <!-- æ­£å¸¸å…§å®¹ -->\r\n    <div v-else>\r\n      <!-- Major Market Indices - é«˜å„ªå…ˆç´š -->\r\n      <div class=\"widget-container-ticker\">\r\n        <div class=\"widget-header\">\r\n          <h3>Market Index</h3>\r\n        </div>\r\n        <LazyTradingViewWidget\r\n          widget-type=\"Market Index\"\r\n          :config=\"tickersConfig\"\r\n          script-url=\"https://s3.tradingview.com/external-embedding/embed-widget-tickers.js\"\r\n          height=\"100px\"\r\n          :priority=\"1\"\r\n        />\r\n      </div>\r\n\r\n      <!-- Top Stories - ç§»åˆ° Market Index ä¸‹æ–¹ -->\r\n      <div class=\"widget-container\">\r\n        <div class=\"widget-header\">\r\n          <h3>Top Stories</h3>\r\n        </div>\r\n        <LazyTradingViewWidget\r\n          widget-type=\"Top Stories\"\r\n          :config=\"topStoriesConfig\"\r\n          script-url=\"https://s3.tradingview.com/external-embedding/embed-widget-timeline.js\"\r\n          height=\"650px\"\r\n          :priority=\"2\"\r\n        />\r\n      </div>\r\n\r\n      <!-- Fear & Greed Gauge - é«˜å„ªå…ˆç´š (ä¸æ˜¯ TradingView widget) -->\r\n      <ZeiiermanFearGreedGauge />\r\n\r\n      <!-- VIX Index - ç§»åˆ° Fear & Greed Index ä¸‹æ–¹ -->\r\n      <div class=\"widget-container vix-container\">\r\n        <div class=\"widget-header\">\r\n          <h3>VIX Index (Volatility Index)</h3>\r\n          <button @click=\"refreshVixWidget\" class=\"btn btn-sm btn-secondary\">\r\n            ğŸ”„ Refresh VIX\r\n          </button>\r\n        </div>\r\n        <VixWidget :key=\"`vix-${vixKey}`\" />\r\n      </div>\r\n\r\n      <!-- Stock Market Insight -->\r\n      <div class=\"widget-container\">\r\n        <div class=\"widget-header\">\r\n          <h3>Market Insight</h3>\r\n        </div>\r\n        \r\n        <div class=\"insight-grid\">\r\n          <div class=\"insight-section\">\r\n            <div class=\"section-header\">\r\n              <h4>Market Daily Insight (MA5)</h4>\r\n            </div>\r\n            <LazyTradingViewWidget\r\n              widget-type=\"Market Daily Insight\"\r\n              :config=\"dailyConfig\"\r\n              script-url=\"https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js\"\r\n              height=\"600px\"\r\n              :priority=\"2\"\r\n            />\r\n          </div>\r\n\r\n          <div class=\"insight-section weekly-section\">\r\n            <div class=\"section-header\">\r\n              <h4>Market Weekly Insight (MA4)</h4>\r\n            </div>\r\n            <LazyTradingViewWidget\r\n              widget-type=\"Market Weekly Insight\"\r\n              :config=\"weeklyConfig\"\r\n              script-url=\"https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js\"\r\n              height=\"600px\"\r\n              :priority=\"3\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Stock Heatmap - ä½å„ªå…ˆç´š -->\r\n      <div class=\"widget-container\">\r\n        <div class=\"widget-header\">\r\n          <h3>Stock Heatmap</h3>\r\n        </div>\r\n        <LazyTradingViewWidget\r\n          widget-type=\"Stock Heatmap\"\r\n          :config=\"heatmapConfig\"\r\n          script-url=\"https://s3.tradingview.com/external-embedding/embed-widget-stock-heatmap.js\"\r\n          height=\"500px\"\r\n          :priority=\"3\"\r\n        />\r\n      </div>\r\n\r\n      <!-- ç§»é™¤ PerformanceMonitorï¼Œé¿å…è¼‰å…¥è‚¡ç¥¨æŠ€è¡“æŒ‡æ¨™æ•¸æ“š -->\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport LazyTradingViewWidget from '@/components/LazyTradingViewWidget.vue'\r\nimport VixWidget from '@/components/VixWidget.vue'\r\nimport ZeiiermanFearGreedGauge from '@/components/ZeiiermanFearGreedGauge.vue'\r\nimport MarketOverviewSkeleton from '@/components/MarketOverviewSkeleton.vue'\r\n\r\nexport default {\r\n  name: 'MarketDashboard',\r\n  components: {\r\n    LazyTradingViewWidget,\r\n    VixWidget,\r\n    ZeiiermanFearGreedGauge,\r\n    MarketOverviewSkeleton\r\n  },\r\n  data() {\r\n    return {\r\n      loading: true,\r\n      error: null,\r\n      vixKey: Date.now() // æ·»åŠ  VIX å°ˆç”¨çš„ key\r\n    }\r\n  },\r\n  mounted() {\r\n    // é é¢è¼‰å…¥æ™‚æ»¾å‹•åˆ°é ‚éƒ¨\r\n    this.scrollToTop()\r\n    this.initializePage()\r\n  },\r\n  watch: {\r\n    $route() {\r\n      // ç•¶è·¯ç”±æ”¹è®Šæ™‚ï¼Œæ»¾å‹•åˆ°é ‚éƒ¨\r\n      this.scrollToTop()\r\n    }\r\n  },\r\n  methods: {\r\n    async initializePage() {\r\n      try {\r\n        // æ¨¡æ“¬åˆå§‹åŒ–éç¨‹\r\n        await new Promise(resolve => setTimeout(resolve, 800))\r\n        this.loading = false\r\n      } catch (err) {\r\n        this.error = String(err)\r\n        this.loading = false\r\n      }\r\n    },\r\n    async refresh() {\r\n      this.loading = true\r\n      this.error = null\r\n      this.vixKey = Date.now() // å¼·åˆ¶é‡æ–°è¼‰å…¥ VIX widget\r\n      await this.initializePage()\r\n    },\r\n\r\n    // æ»¾å‹•åˆ°é é¢é ‚éƒ¨\r\n    scrollToTop() {\r\n      // ä½¿ç”¨ nextTick ç¢ºä¿ DOM å·²æ›´æ–°\r\n      this.$nextTick(() => {\r\n        window.scrollTo({\r\n          top: 0,\r\n          left: 0,\r\n          behavior: 'smooth'\r\n        })\r\n        \r\n        // å‚™ç”¨æ–¹æ¡ˆï¼šç«‹å³æ»¾å‹•\r\n        setTimeout(() => {\r\n          window.scrollTo(0, 0)\r\n        }, 100)\r\n      })\r\n    },\r\n\r\n    // å¼·åˆ¶åˆ·æ–° VIX widget\r\n    refreshVixWidget() {\r\n      this.vixKey = Date.now()\r\n      console.log('VIX widget refreshed with key:', this.vixKey)\r\n    }\r\n  },\r\n  computed: {\r\n    tickersConfig() {\r\n      return {\r\n        \"symbols\": [\r\n          {\"proName\": \"FOREXCOM:SPXUSD\",\"title\": \"S&P 500 Index\"},\r\n          {\"proName\": \"NASDAQ:NDX\",\"title\": \"NASDAQ 100 Index\"},\r\n          {\"proName\": \"OPOFINANCE:DJIUSD\",\"title\": \"Dow Jone Index\"},\r\n          {\"proName\": \"CAPITALCOM:RTY\",\"title\": \"US Russel 2000\"},\r\n          {\"proName\": \"INDEX:BTCUSD\",\"title\": \"BTC\"},\r\n          {\"proName\": \"TVC:GOLD\",\"title\": \"GOLD\"}\r\n        ],\r\n        \"colorTheme\": \"light\",\r\n        \"locale\": \"en\",\r\n        \"largeChartUrl\": \"\",\r\n        \"isTransparent\": true,\r\n        \"showSymbolLogo\": true\r\n      }\r\n    },\r\n\r\n    topStoriesConfig() {\r\n      return {\r\n        \"displayMode\": \"regular\",\r\n        \"feedMode\": \"market\",\r\n        \"colorTheme\": \"light\",\r\n        \"isTransparent\": true,\r\n        \"locale\": \"en\",\r\n        \"market\": \"stock\",\r\n        \"width\": \"100%\",\r\n        \"height\": \"100%\"\r\n      }\r\n    },\r\n\r\n    dailyConfig() {\r\n      return {\r\n        \"lineWidth\": 2,\r\n        \"lineType\": 0,\r\n        \"chartType\": \"candlesticks\",\r\n        \"showVolume\": true,\r\n        \"fontColor\": \"rgb(106, 109, 120)\",\r\n        \"gridLineColor\": \"rgba(46, 46, 46, 0.06)\",\r\n        \"volumeUpColor\": \"rgba(34, 171, 148, 0.5)\",\r\n        \"volumeDownColor\": \"rgba(247, 82, 95, 0.5)\",\r\n        \"backgroundColor\": \"#ffffff\",\r\n        \"widgetFontColor\": \"#0F0F0F\",\r\n        \"upColor\": \"#22ab94\",\r\n        \"downColor\": \"#f7525f\",\r\n        \"borderUpColor\": \"#22ab94\",\r\n        \"borderDownColor\": \"#f7525f\",\r\n        \"wickUpColor\": \"#22ab94\",\r\n        \"wickDownColor\": \"#f7525f\",\r\n        \"colorTheme\": \"light\",\r\n        \"isTransparent\": true,\r\n        \"locale\": \"en\",\r\n        \"chartOnly\": false,\r\n        \"scalePosition\": \"right\",\r\n        \"scaleMode\": \"Normal\",\r\n        \"fontFamily\": \"-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif\",\r\n        \"valuesTracking\": \"1\",\r\n        \"changeMode\": \"price-and-percent\",\r\n        \"symbols\": [[\"VANTAGE:SP500|6M\"],[\"NASDAQ:NDX|6M\"],[\"OPOFINANCE:DJIUSD|6M\"],[\"CAPITALCOM:RTY|6M\"],[\"INDEX:BTCUSD|6M\"],[\"TVC:GOLD|6M\"]],\r\n        \"dateRanges\": [\"6m|1D\"],\r\n        \"fontSize\": \"10\",\r\n        \"headerFontSize\": \"medium\",\r\n        \"autosize\": true,\r\n        \"width\": \"100%\",\r\n        \"height\": \"100%\",\r\n        \"noTimeScale\": false,\r\n        \"hideDateRanges\": false,\r\n        \"showMA\": true,\r\n        \"maLength\": \"5\",\r\n        \"maLineColor\": \"#2962FF\",\r\n        \"maLineWidth\": 1,\r\n        \"hideMarketStatus\": false,\r\n        \"hideSymbolLogo\": false\r\n      }\r\n    },\r\n\r\n    weeklyConfig() {\r\n      return {\r\n        \"lineWidth\": 2,\r\n        \"lineType\": 0,\r\n        \"chartType\": \"candlesticks\",\r\n        \"showVolume\": true,\r\n        \"fontColor\": \"rgb(106, 109, 120)\",\r\n        \"gridLineColor\": \"rgba(46, 46, 46, 0.06)\",\r\n        \"volumeUpColor\": \"rgba(34, 171, 148, 0.5)\",\r\n        \"volumeDownColor\": \"rgba(247, 82, 95, 0.5)\",\r\n        \"backgroundColor\": \"#ffffff\",\r\n        \"widgetFontColor\": \"#0F0F0F\",\r\n        \"upColor\": \"#22ab94\",\r\n        \"downColor\": \"#f7525f\",\r\n        \"borderUpColor\": \"#22ab94\",\r\n        \"borderDownColor\": \"#f7525f\",\r\n        \"wickUpColor\": \"#22ab94\",\r\n        \"wickDownColor\": \"#f7525f\",\r\n        \"colorTheme\": \"light\",\r\n        \"isTransparent\": true,\r\n        \"locale\": \"en\",\r\n        \"chartOnly\": false,\r\n        \"scalePosition\": \"right\",\r\n        \"scaleMode\": \"Normal\",\r\n        \"fontFamily\": \"-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif\",\r\n        \"valuesTracking\": \"1\",\r\n        \"changeMode\": \"price-and-percent\",\r\n        \"symbols\": [[\"VANTAGE:SP500|6M\"],[\"NASDAQ:NDX|6M\"],[\"OPOFINANCE:DJIUSD|6M\"],[\"CAPITALCOM:RTY|6M\"],[\"INDEX:BTCUSD|6M\"],[\"TVC:GOLD|6M\"]],\r\n        \"dateRanges\": [\"6m|1W\"],\r\n        \"fontSize\": \"10\",\r\n        \"headerFontSize\": \"medium\",\r\n        \"autosize\": true,\r\n        \"width\": \"100%\",\r\n        \"height\": \"100%\",\r\n        \"noTimeScale\": false,\r\n        \"hideDateRanges\": false,\r\n        \"showMA\": true,\r\n        \"maLength\": \"4\",\r\n        \"maLineColor\": \"#2962FF\",\r\n        \"maLineWidth\": 1,\r\n        \"hideMarketStatus\": false,\r\n        \"hideSymbolLogo\": false\r\n      }\r\n    },\r\n\r\n    heatmapConfig() {\r\n      return {\r\n        \"exchanges\": [],\r\n        \"dataSource\": \"SPX500\",\r\n        \"grouping\": \"sector\",\r\n        \"blockSize\": \"market_cap_basic\",\r\n        \"blockColor\": \"change\",\r\n        \"locale\": \"en\",\r\n        \"symbolUrl\": \"\",\r\n        \"colorTheme\": \"light\",\r\n        \"hasTopBar\": false,\r\n        \"isDataSetEnabled\": false,\r\n        \"isZoomEnabled\": true,\r\n        \"hasSymbolTooltip\": true,\r\n        \"width\": \"100%\",\r\n        \"height\": \"100%\"\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.market-dashboard {\r\n  padding: 0;\r\n  overflow-x: hidden;\r\n  max-width: 100%;\r\n}\r\n\r\n.mb-3 {\r\n  margin-bottom: 0.75rem;\r\n}\r\n\r\n.text-muted {\r\n  color: #6c757d;\r\n}\r\n\r\n.text-muted {\r\n  color: #6c757d;\r\n}\r\n\r\n.loading-with-skeleton {\r\n  /* éª¨æ¶å±è¼‰å…¥å®¹å™¨ */\r\n}\r\n\r\n.error {\r\n  text-align: center;\r\n  padding: 2rem;\r\n  background-color: #f8d7da;\r\n  border: 1px solid #f5c6cb;\r\n  border-radius: 8px;\r\n  margin: 1rem 0;\r\n}\r\n\r\n.btn {\r\n  padding: 0.5rem 1rem;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.btn-secondary {\r\n  background: #6c757d;\r\n  color: white;\r\n}\r\n\r\n.btn-secondary:hover {\r\n  background: #545b62;\r\n}\r\n\r\n.btn-sm {\r\n  padding: 0.25rem 0.5rem;\r\n  font-size: 0.8rem;\r\n}\r\n\r\n/* çµ±ä¸€çš„ Widget å®¹å™¨æ¨£å¼ - é™å®šåœ¨ market-dashboard å…§ */\r\n.market-dashboard .widget-container {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  margin-bottom: 2rem;\r\n  overflow: hidden;\r\n  position: relative;\r\n}\r\n\r\n/* Ticker å°ˆç”¨çš„ Widget å®¹å™¨æ¨£å¼ - é™å®šåœ¨ market-dashboard å…§ */\r\n.market-dashboard .widget-container-ticker {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  margin-bottom: 2rem;\r\n  overflow: hidden;\r\n  position: relative;\r\n}\r\n\r\n.market-dashboard .widget-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 1rem;\r\n  padding-bottom: 0.75rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.market-dashboard .widget-header h3 {\r\n  font-size: 1.1rem;\r\n  font-weight: 600;\r\n  color: #333;\r\n  margin: 0;\r\n}\r\n\r\n.market-dashboard .insight-grid {\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n  gap: 1.5rem;\r\n  align-items: start;\r\n}\r\n\r\n.market-dashboard .insight-section {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.75rem;\r\n}\r\n\r\n/* ç¬¬äºŒå€‹ insight-section ä¸Šæ–¹æ·»åŠ é–“éš”ç·š */\r\n.market-dashboard .weekly-section {\r\n  border-top: 1px solid #f0f0f0;\r\n  padding-top: 1.5rem;\r\n}\r\n\r\n.market-dashboard .section-header {\r\n  padding-bottom: 0.5rem;\r\n  /* ç§»é™¤åº•ç·š border-bottom: 1px solid #f0f0f0; */\r\n}\r\n\r\n.market-dashboard .section-header h4 {\r\n  font-size: 0.95rem;\r\n  font-weight: 600;\r\n  color: #555;\r\n  margin: 0;\r\n}\r\n\r\n/* VIX å°ˆç”¨å®¹å™¨æ¨£å¼ - é™å®šåœ¨ market-dashboard å…§ */\r\n.market-dashboard .vix-container {\r\n  min-height: 600px; /* æ•´é«”å®¹å™¨ 600px */\r\n  overflow: hidden; /* åƒè€ƒ LazyTradingViewWidget çš„åšæ³• */\r\n}\r\n\r\n/* éŸ¿æ‡‰å¼è¨­è¨ˆ */\r\n@media (max-width: 768px) {\r\n  .market-dashboard .widget-header {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 0.5rem;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .market-dashboard .widget-container {\r\n    padding: 0.75rem;\r\n    margin: 0 -0.25rem 2rem -0.25rem;\r\n  }\r\n  \r\n  .market-dashboard .insight-grid {\r\n    gap: 0.75rem;\r\n  }\r\n}\r\n</style>","/**\r\n * çµ±ä¸€è‚¡ç¥¨é…ç½®æœå‹™\r\n * æ‰€æœ‰æ¨¡çµ„éƒ½é€šéæ­¤æœå‹™ç²å–è‚¡ç¥¨é…ç½®ï¼Œé¿å…é‡è¤‡ç¶­è­·å¤šå€‹é…ç½®æ–‡ä»¶\r\n */\r\n\r\nclass StocksConfigService {\r\n  constructor() {\r\n    this.cache = null\r\n    this.lastUpdate = null\r\n    this.cacheTimeout = 5 * 60 * 1000 // 5åˆ†é˜ç·©å­˜\r\n  }\r\n\r\n  /**\r\n   * ç²å–è‚¡ç¥¨é…ç½®æ–‡ä»¶çš„ URL\r\n   */\r\n  getConfigUrl() {\r\n    // ä½¿ç”¨ import.meta.env å‹•æ…‹è™•ç†è·¯å¾‘\r\n    const basePath = import.meta.env.PROD ? '/investment-dashboard' : ''\r\n    return `${basePath}/config/stocks.json`\r\n  }\r\n\r\n  /**\r\n   * è¼‰å…¥è‚¡ç¥¨é…ç½®\r\n   */\r\n  async loadConfig() {\r\n    try {\r\n      // æª¢æŸ¥ç·©å­˜\r\n      if (this.cache && this.lastUpdate && \r\n          (Date.now() - this.lastUpdate) < this.cacheTimeout) {\r\n        return this.cache\r\n      }\r\n\r\n      const url = this.getConfigUrl()\r\n      const response = await fetch(`${url}?t=${Date.now()}`)\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}`)\r\n      }\r\n      \r\n      const config = await response.json()\r\n      \r\n      // é©—è­‰é…ç½®æ ¼å¼\r\n      if (!config.stocks || !Array.isArray(config.stocks)) {\r\n        throw new Error('Invalid config format: missing stocks array')\r\n      }\r\n      \r\n      // æ›´æ–°ç·©å­˜\r\n      this.cache = config\r\n      this.lastUpdate = Date.now()\r\n      \r\n      console.log(`âœ… Loaded ${config.stocks.length} stocks from config/stocks.json`)\r\n      return config\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ Failed to load stocks config:', error)\r\n      \r\n      // è¿”å›ç·©å­˜æ•¸æ“šï¼ˆå¦‚æœæœ‰ï¼‰\r\n      if (this.cache) {\r\n        console.warn('âš ï¸ Using cached config due to load failure')\r\n        return this.cache\r\n      }\r\n      \r\n      // æœ€çµ‚ fallback\r\n      return this.getFallbackConfig()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ç²å–æ‰€æœ‰å•Ÿç”¨çš„è‚¡ç¥¨ç¬¦è™Ÿ\r\n   */\r\n  async getEnabledSymbols() {\r\n    const config = await this.loadConfig()\r\n    return config.stocks\r\n      .filter(stock => stock.enabled)\r\n      .map(stock => stock.symbol)\r\n  }\r\n\r\n  /**\r\n   * ç²å–æŒ‡å®šå„ªå…ˆç´šçš„è‚¡ç¥¨ç¬¦è™Ÿ\r\n   */\r\n  async getSymbolsByPriority(priority = 1) {\r\n    const config = await this.loadConfig()\r\n    return config.stocks\r\n      .filter(stock => stock.enabled && stock.priority === priority)\r\n      .map(stock => stock.symbol)\r\n  }\r\n\r\n  /**\r\n   * ç²å–è‚¡ç¥¨çš„äº¤æ˜“æ‰€\r\n   */\r\n  async getStockExchange(symbol) {\r\n    const config = await this.loadConfig()\r\n    const stock = config.stocks.find(s => s.symbol === symbol)\r\n    return stock ? stock.exchange : 'NASDAQ' // é è¨­ç‚º NASDAQ\r\n  }\r\n\r\n  /**\r\n   * ç²å–è‚¡ç¥¨çš„ sector\r\n   */\r\n  async getStockSector(symbol) {\r\n    const config = await this.loadConfig()\r\n    const stock = config.stocks.find(s => s.symbol === symbol)\r\n    return stock ? stock.sector : 'Unknown'\r\n  }\r\n\r\n  /**\r\n   * ç²å–è‚¡ç¥¨çš„ industry\r\n   */\r\n  async getStockIndustry(symbol) {\r\n    const config = await this.loadConfig()\r\n    const stock = config.stocks.find(s => s.symbol === symbol)\r\n    return stock ? stock.industry : 'Unknown'\r\n  }\r\n\r\n  /**\r\n   * ç²å–å®Œæ•´çš„è‚¡ç¥¨ä¿¡æ¯\r\n   */\r\n  async getStockInfo(symbol) {\r\n    const config = await this.loadConfig()\r\n    return config.stocks.find(s => s.symbol === symbol) || null\r\n  }\r\n\r\n  /**\r\n   * ç²å–æ‰€æœ‰äº¤æ˜“æ‰€åˆ—è¡¨\r\n   */\r\n  async getExchanges() {\r\n    const config = await this.loadConfig()\r\n    return config.metadata?.exchanges || ['NYSE', 'NASDAQ', 'AMEX']\r\n  }\r\n\r\n  /**\r\n   * ç²å–æ‰€æœ‰ sector åˆ—è¡¨\r\n   */\r\n  async getSectors() {\r\n    const config = await this.loadConfig()\r\n    return config.metadata?.sectors || []\r\n  }\r\n\r\n  /**\r\n   * æŒ‰äº¤æ˜“æ‰€åˆ†çµ„è‚¡ç¥¨\r\n   */\r\n  async getStocksByExchange() {\r\n    const config = await this.loadConfig()\r\n    const groups = {}\r\n    \r\n    config.stocks\r\n      .filter(stock => stock.enabled)\r\n      .forEach(stock => {\r\n        if (!groups[stock.exchange]) {\r\n          groups[stock.exchange] = []\r\n        }\r\n        groups[stock.exchange].push(stock.symbol)\r\n      })\r\n    \r\n    return groups\r\n  }\r\n\r\n  /**\r\n   * æŒ‰ sector åˆ†çµ„è‚¡ç¥¨\r\n   */\r\n  async getStocksBySector() {\r\n    const config = await this.loadConfig()\r\n    const groups = {}\r\n    \r\n    config.stocks\r\n      .filter(stock => stock.enabled)\r\n      .forEach(stock => {\r\n        if (!groups[stock.sector]) {\r\n          groups[stock.sector] = []\r\n        }\r\n        groups[stock.sector].push(stock.symbol)\r\n      })\r\n    \r\n    return groups\r\n  }\r\n\r\n  /**\r\n   * ç²å–é…ç½®çµ±è¨ˆä¿¡æ¯\r\n   */\r\n  async getStats() {\r\n    const config = await this.loadConfig()\r\n    const enabledStocks = config.stocks.filter(s => s.enabled)\r\n    \r\n    return {\r\n      total: config.stocks.length,\r\n      enabled: enabledStocks.length,\r\n      disabled: config.stocks.length - enabledStocks.length,\r\n      exchanges: [...new Set(enabledStocks.map(s => s.exchange))],\r\n      sectors: [...new Set(enabledStocks.map(s => s.sector))],\r\n      version: config.version,\r\n      lastUpdated: config.last_updated\r\n    }\r\n  }\r\n\r\n  /**\r\n   * æ¸…é™¤ç·©å­˜\r\n   */\r\n  clearCache() {\r\n    this.cache = null\r\n    this.lastUpdate = null\r\n    console.log('ğŸ—‘ï¸ StocksConfigService cache cleared')\r\n  }\r\n\r\n  /**\r\n   * æ‰‹å‹•åˆ·æ–°é…ç½®\r\n   */\r\n  async refresh() {\r\n    this.clearCache()\r\n    return await this.loadConfig()\r\n  }\r\n\r\n  /**\r\n   * ç·Šæ€¥ fallback é…ç½®\r\n   */\r\n  getFallbackConfig() {\r\n    console.warn('âš ï¸ Using emergency fallback config')\r\n    return {\r\n      version: \"1.0.0-fallback\",\r\n      stocks: [\r\n        { symbol: \"ASTS\", exchange: \"NASDAQ\", sector: \"Technology\", industry: \"Communication Equipment\", enabled: true, priority: 1 },\r\n        { symbol: \"RIVN\", exchange: \"NASDAQ\", sector: \"Consumer Cyclical\", industry: \"Auto Manufacturers\", enabled: true, priority: 1 },\r\n        { symbol: \"PL\", exchange: \"NYSE\", sector: \"Industrials\", industry: \"Aerospace & Defense\", enabled: true, priority: 1 },\r\n        { symbol: \"CRM\", exchange: \"NYSE\", sector: \"Technology\", industry: \"Software - Application\", enabled: true, priority: 1 },\r\n        { symbol: \"NVDA\", exchange: \"NASDAQ\", sector: \"Technology\", industry: \"Semiconductors\", enabled: true, priority: 1 },\r\n        { symbol: \"TSLA\", exchange: \"NASDAQ\", sector: \"Consumer Cyclical\", industry: \"Auto Manufacturers\", enabled: true, priority: 1 },\r\n        { symbol: \"RR\", exchange: \"NASDAQ\", sector: \"Technology\", industry: \"Software - Application\", enabled: true, priority: 2 }\r\n      ],\r\n      metadata: {\r\n        total_stocks: 7,\r\n        enabled_stocks: 7,\r\n        exchanges: [\"NYSE\", \"NASDAQ\"],\r\n        sectors: [\"Technology\", \"Consumer Cyclical\", \"Industrials\"]\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * é©—è­‰è‚¡ç¥¨ç¬¦è™Ÿæ˜¯å¦å­˜åœ¨\r\n   */\r\n  async isValidSymbol(symbol) {\r\n    const config = await this.loadConfig()\r\n    return config.stocks.some(stock => stock.symbol === symbol && stock.enabled)\r\n  }\r\n\r\n  /**\r\n   * ç²å–èˆ‡èˆŠç‰ˆ symbolsConfig å…¼å®¹çš„æ ¼å¼\r\n   */\r\n  async getSymbolsList() {\r\n    return await this.getEnabledSymbols()\r\n  }\r\n\r\n  /**\r\n   * ç²å–é…ç½®ä¾†æºä¿¡æ¯\r\n   */\r\n  getConfigSource() {\r\n    return this.cache ? 'stocks.json' : 'fallback'\r\n  }\r\n\r\n  /**\r\n   * ç²å–ç·©å­˜ä¿¡æ¯\r\n   */\r\n  getCacheInfo() {\r\n    return {\r\n      cached: !!this.cache,\r\n      lastUpdate: this.lastUpdate,\r\n      cacheAge: this.lastUpdate ? Date.now() - this.lastUpdate : 0,\r\n      cacheTimeout: this.cacheTimeout\r\n    }\r\n  }\r\n}\r\n\r\n// å°å‡ºå–®ä¾‹\r\nexport const stocksConfig = new StocksConfigService()\r\n\r\n// ç‚ºäº†å‘å¾Œå…¼å®¹ï¼Œä¹Ÿå°å‡ºé¡\r\nexport { StocksConfigService }","/**\r\n * TradingView Widget å¿«å–ç®¡ç†\r\n * é¿å…é‡è¤‡è¼‰å…¥ç›¸åŒçš„ widgets\r\n */\r\n\r\nclass WidgetCache {\r\n  constructor() {\r\n    this.cache = new Map()\r\n    this.loadingPromises = new Map()\r\n    this.maxCacheSize = 50 // æœ€å¤šå¿«å– 50 å€‹ widgets\r\n    this.cacheTimeout = 5 * 60 * 1000 // 5 åˆ†é˜éæœŸ\r\n  }\r\n\r\n  /**\r\n   * ç”Ÿæˆå¿«å–éµå€¼\r\n   */\r\n  generateKey(widgetType, symbol, exchange) {\r\n    return `${widgetType}-${symbol}-${exchange}`\r\n  }\r\n\r\n  /**\r\n   * æª¢æŸ¥æ˜¯å¦å·²å¿«å–\r\n   */\r\n  has(widgetType, symbol, exchange) {\r\n    const key = this.generateKey(widgetType, symbol, exchange)\r\n    const cached = this.cache.get(key)\r\n    \r\n    if (!cached) return false\r\n    \r\n    // æª¢æŸ¥æ˜¯å¦éæœŸ\r\n    if (Date.now() - cached.timestamp > this.cacheTimeout) {\r\n      this.cache.delete(key)\r\n      return false\r\n    }\r\n    \r\n    return true\r\n  }\r\n\r\n  /**\r\n   * ç²å–å¿«å–çš„ widget\r\n   */\r\n  get(widgetType, symbol, exchange) {\r\n    const key = this.generateKey(widgetType, symbol, exchange)\r\n    const cached = this.cache.get(key)\r\n    \r\n    if (cached && Date.now() - cached.timestamp <= this.cacheTimeout) {\r\n      return cached.data\r\n    }\r\n    \r\n    return null\r\n  }\r\n\r\n  /**\r\n   * è¨­å®šå¿«å–\r\n   */\r\n  set(widgetType, symbol, exchange, data) {\r\n    const key = this.generateKey(widgetType, symbol, exchange)\r\n    \r\n    // å¦‚æœå¿«å–å·²æ»¿ï¼Œåˆªé™¤æœ€èˆŠçš„é …ç›®\r\n    if (this.cache.size >= this.maxCacheSize) {\r\n      const firstKey = this.cache.keys().next().value\r\n      this.cache.delete(firstKey)\r\n    }\r\n    \r\n    this.cache.set(key, {\r\n      data,\r\n      timestamp: Date.now()\r\n    })\r\n  }\r\n\r\n  /**\r\n   * æª¢æŸ¥æ˜¯å¦æ­£åœ¨è¼‰å…¥\r\n   */\r\n  isLoading(widgetType, symbol, exchange) {\r\n    const key = this.generateKey(widgetType, symbol, exchange)\r\n    return this.loadingPromises.has(key)\r\n  }\r\n\r\n  /**\r\n   * è¨­å®šè¼‰å…¥ç‹€æ…‹\r\n   */\r\n  setLoading(widgetType, symbol, exchange, promise) {\r\n    const key = this.generateKey(widgetType, symbol, exchange)\r\n    this.loadingPromises.set(key, promise)\r\n    \r\n    // è¼‰å…¥å®Œæˆå¾Œæ¸…é™¤\r\n    promise.finally(() => {\r\n      this.loadingPromises.delete(key)\r\n    })\r\n    \r\n    return promise\r\n  }\r\n\r\n  /**\r\n   * ç²å–è¼‰å…¥ä¸­çš„ Promise\r\n   */\r\n  getLoadingPromise(widgetType, symbol, exchange) {\r\n    const key = this.generateKey(widgetType, symbol, exchange)\r\n    return this.loadingPromises.get(key)\r\n  }\r\n\r\n  /**\r\n   * æ¸…é™¤å¿«å–\r\n   */\r\n  clear() {\r\n    this.cache.clear()\r\n    this.loadingPromises.clear()\r\n  }\r\n\r\n  /**\r\n   * æ¸…é™¤éæœŸå¿«å–\r\n   */\r\n  clearExpired() {\r\n    const now = Date.now()\r\n    for (const [key, cached] of this.cache.entries()) {\r\n      if (now - cached.timestamp > this.cacheTimeout) {\r\n        this.cache.delete(key)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ç²å–å¿«å–çµ±è¨ˆ\r\n   */\r\n  getStats() {\r\n    return {\r\n      cacheSize: this.cache.size,\r\n      loadingCount: this.loadingPromises.size,\r\n      maxCacheSize: this.maxCacheSize\r\n    }\r\n  }\r\n}\r\n\r\n// å–®ä¾‹æ¨¡å¼\r\nexport const widgetCache = new WidgetCache()\r\n\r\n// å®šæœŸæ¸…ç†éæœŸå¿«å–\r\nsetInterval(() => {\r\n  widgetCache.clearExpired()\r\n}, 60000) // æ¯åˆ†é˜æ¸…ç†ä¸€æ¬¡\r\n\r\nexport default widgetCache","<template>\r\n  <div class=\"fast-widget\" :class=\"{ 'overview-widget': widgetType === 'overview' }\" :id=\"containerId\" ref=\"container\">\r\n    <div v-if=\"!loaded && !error\" class=\"fast-loading\">\r\n      <div class=\"loading-spinner\"></div>\r\n      <span>Loading {{ widgetType }}...</span>\r\n    </div>\r\n    \r\n    <div v-if=\"error\" class=\"fast-error\">\r\n      <span>âš ï¸ Failed to load</span>\r\n      <button @click=\"retry\" class=\"retry-btn\">Retry</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { widgetCache } from '@/utils/widgetCache'\r\nimport { widgetThrottle } from '@/utils/widgetThrottle'\r\nimport { widgetPreloader } from '@/utils/widgetPreloader'\r\nimport { widgetLoadManager } from '@/utils/widgetLoadManager'\r\n\r\nexport default {\r\n  name: 'FastTradingViewWidget',\r\n  props: {\r\n    widgetType: {\r\n      type: String,\r\n      required: true,\r\n      validator: (value) => ['overview', 'technical'].includes(value)\r\n    },\r\n    symbol: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    exchange: {\r\n      type: String,\r\n      default: 'NASDAQ'\r\n    },\r\n    priority: {\r\n      type: Number,\r\n      default: 1 // 1=é«˜å„ªå…ˆç´š, 2=ä¸­å„ªå…ˆç´š, 3=ä½å„ªå…ˆç´š\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      loaded: false,\r\n      error: false,\r\n      loadStartTime: 0,\r\n      isVisible: false,\r\n      observer: null\r\n    }\r\n  },\r\n  computed: {\r\n    containerId() {\r\n      return `fast-widget-${this.widgetType}-${this.symbol}-${Date.now()}`\r\n    },\r\n    \r\n    cacheKey() {\r\n      return `${this.widgetType}-${this.symbol}-${this.exchange}`\r\n    }\r\n  },\r\n  async mounted() {\r\n    this.setupIntersectionObserver()\r\n  },\r\n  beforeUnmount() {\r\n    if (this.observer) {\r\n      this.observer.disconnect()\r\n    }\r\n  },\r\n  methods: {\r\n    setupIntersectionObserver() {\r\n      // æ ¹æ“šå„ªå…ˆç´šè¨­ç½®ä¸åŒçš„ rootMargin\r\n      const rootMargins = {\r\n        1: '300px', // é«˜å„ªå…ˆç´šï¼šæå‰ 300px è¼‰å…¥\r\n        2: '150px', // ä¸­å„ªå…ˆç´šï¼šæå‰ 150px è¼‰å…¥\r\n        3: '50px'   // ä½å„ªå…ˆç´šï¼šæå‰ 50px è¼‰å…¥\r\n      }\r\n\r\n      this.observer = new IntersectionObserver(\r\n        (entries) => {\r\n          entries.forEach((entry) => {\r\n            if (entry.isIntersecting && !this.loaded && !this.error) {\r\n              this.isVisible = true\r\n              this.loadWidget()\r\n              this.observer.disconnect() // è¼‰å…¥å¾Œåœæ­¢è§€å¯Ÿ\r\n            }\r\n          })\r\n        },\r\n        {\r\n          rootMargin: rootMargins[this.priority] || '150px',\r\n          threshold: 0.1\r\n        }\r\n      )\r\n\r\n      this.observer.observe(this.$refs.container)\r\n    },\r\n\r\n    async loadWidget() {\r\n      this.loadStartTime = performance.now()\r\n      this.loaded = false\r\n      this.error = false\r\n\r\n      try {\r\n        // æ ¹æ“šå„ªå…ˆç´šæ·»åŠ å»¶é²\r\n        const delays = {\r\n          1: 0,     // é«˜å„ªå…ˆç´šï¼šç«‹å³è¼‰å…¥\r\n          2: 300,   // ä¸­å„ªå…ˆç´šï¼šå»¶é² 300ms\r\n          3: 600    // ä½å„ªå…ˆç´šï¼šå»¶é² 600ms\r\n        }\r\n\r\n        const delay = delays[this.priority] || 0\r\n        if (delay > 0) {\r\n          await new Promise(resolve => setTimeout(resolve, delay))\r\n        }\r\n\r\n        // æª¢æŸ¥å¿«å–\r\n        if (widgetCache.has(this.widgetType, this.symbol, this.exchange)) {\r\n          const cached = widgetCache.get(this.widgetType, this.symbol, this.exchange)\r\n          if (cached) {\r\n            this.renderCachedWidget(cached)\r\n            return\r\n          }\r\n        }\r\n\r\n        // æª¢æŸ¥æ˜¯å¦æ­£åœ¨è¼‰å…¥ç›¸åŒçš„ widget\r\n        if (widgetCache.isLoading(this.widgetType, this.symbol, this.exchange)) {\r\n          const loadingPromise = widgetCache.getLoadingPromise(this.widgetType, this.symbol, this.exchange)\r\n          await loadingPromise\r\n          return\r\n        }\r\n\r\n        // ä½¿ç”¨ Widget Load Manager ç®¡ç†ä½µç™¼\r\n        const widgetId = `fast-${this.widgetType}-${this.symbol}-${this.containerId}`\r\n        const loadPromise = widgetLoadManager.addToQueue(\r\n          () => this.createWidget(),\r\n          widgetId,\r\n          this.priority\r\n        )\r\n        widgetCache.setLoading(this.widgetType, this.symbol, this.exchange, loadPromise)\r\n        \r\n        await loadPromise\r\n\r\n      } catch (err) {\r\n        console.error('Failed to load widget:', err)\r\n        this.error = true\r\n      }\r\n    },\r\n\r\n    async createWidget() {\r\n      return new Promise((resolve, reject) => {\r\n        this.$nextTick(async () => {\r\n          const container = this.$refs.container\r\n          if (!container) {\r\n            reject(new Error('Container not found'))\r\n            return\r\n          }\r\n\r\n          const config = this.getWidgetConfig()\r\n          const scriptUrl = this.getScriptUrl()\r\n          \r\n          // æª¢æŸ¥æ˜¯å¦å·²é è¼‰å…¥è…³æœ¬\r\n          if (!widgetPreloader.isPreloaded(scriptUrl)) {\r\n            try {\r\n              await widgetPreloader.preloadScript(scriptUrl)\r\n            } catch (error) {\r\n              console.warn('Script preload failed, continuing with normal load:', error)\r\n            }\r\n          }\r\n\r\n          const script = document.createElement('script')\r\n          \r\n          script.type = 'text/javascript'\r\n          script.src = scriptUrl\r\n          script.async = true\r\n          script.innerHTML = JSON.stringify(config)\r\n          \r\n          // è¨­å®šè¶…æ™‚ - æ ¹æ“šå„ªå…ˆç´šèª¿æ•´\r\n          const timeouts = {\r\n            1: 3000,  // é«˜å„ªå…ˆç´šï¼š3ç§’è¶…æ™‚\r\n            2: 5000,  // ä¸­å„ªå…ˆç´šï¼š5ç§’è¶…æ™‚\r\n            3: 8000   // ä½å„ªå…ˆç´šï¼š8ç§’è¶…æ™‚\r\n          }\r\n          \r\n          const timeout = setTimeout(() => {\r\n            this.error = true\r\n            reject(new Error('Widget load timeout'))\r\n          }, timeouts[this.priority] || 5000)\r\n          \r\n          script.onload = () => {\r\n            clearTimeout(timeout)\r\n            this.loaded = true\r\n            \r\n            const loadTime = performance.now() - this.loadStartTime\r\n            console.log(`Widget ${this.cacheKey} loaded in ${loadTime.toFixed(2)}ms (Priority: ${this.priority})`)\r\n            \r\n            // å¿«å– widget é…ç½®\r\n            widgetCache.set(this.widgetType, this.symbol, this.exchange, {\r\n              config,\r\n              scriptUrl\r\n            })\r\n            \r\n            resolve()\r\n          }\r\n          \r\n          script.onerror = () => {\r\n            clearTimeout(timeout)\r\n            this.error = true\r\n            reject(new Error('Script load failed'))\r\n          }\r\n          \r\n          container.appendChild(script)\r\n        })\r\n      })\r\n    },\r\n\r\n    getWidgetConfig() {\r\n      if (this.widgetType === 'overview') {\r\n        return {\r\n          \"lineWidth\": 2,\r\n          \"lineType\": 0,\r\n          \"chartType\": \"candlesticks\",\r\n          \"showVolume\": true,\r\n          \"fontColor\": \"rgb(106, 109, 120)\",\r\n          \"gridLineColor\": \"rgba(46, 46, 46, 0.06)\",\r\n          \"volumeUpColor\": \"rgba(34, 171, 148, 0.5)\",\r\n          \"volumeDownColor\": \"rgba(247, 82, 95, 0.5)\",\r\n          \"backgroundColor\": \"#ffffff\",\r\n          \"widgetFontColor\": \"#0F0F0F\",\r\n          \"upColor\": \"#22ab94\",\r\n          \"downColor\": \"#f7525f\",\r\n          \"borderUpColor\": \"#22ab94\",\r\n          \"borderDownColor\": \"#f7525f\",\r\n          \"wickUpColor\": \"#22ab94\",\r\n          \"wickDownColor\": \"#f7525f\",\r\n          \"colorTheme\": \"light\",\r\n          \"isTransparent\": true,\r\n          \"locale\": \"en\",\r\n          \"chartOnly\": false,\r\n          \"scalePosition\": \"right\",\r\n          \"scaleMode\": \"Normal\",\r\n          \"fontFamily\": \"-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif\",\r\n          \"valuesTracking\": \"1\",\r\n          \"changeMode\": \"price-and-percent\",\r\n          \"symbols\": [[this.symbol, `${this.exchange}:${this.symbol}|1D`]],\r\n          \"dateRanges\": [\"1d|1\", \"1m|30\", \"3m|60\", \"12m|1D\", \"60m|1W\", \"all|1M\"],\r\n          \"fontSize\": \"10\",\r\n          \"headerFontSize\": \"medium\",\r\n          \"autosize\": true,\r\n          \"width\": \"100%\",\r\n          \"height\": \"100%\",\r\n          \"noTimeScale\": false,\r\n          \"hideDateRanges\": false,\r\n          \"showMA\": true,\r\n          \"maLength\": 9,\r\n          \"maLineColor\": \"#2962FF\",\r\n          \"maLineWidth\": 1,\r\n          \"hideMarketStatus\": false,\r\n          \"hideSymbolLogo\": false\r\n        }\r\n      } else if (this.widgetType === 'technical') {\r\n        return {\r\n          \"interval\": \"1D\",\r\n          \"width\": \"100%\",\r\n          \"height\": \"100%\",\r\n          \"isTransparent\": false,\r\n          \"symbol\": `${this.exchange}:${this.symbol}`,\r\n          \"showIntervalTabs\": true,\r\n          \"locale\": \"en\",\r\n          \"colorTheme\": \"light\"\r\n        }\r\n      }\r\n    },\r\n\r\n    getScriptUrl() {\r\n      if (this.widgetType === 'overview') {\r\n        return 'https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js'\r\n      } else if (this.widgetType === 'technical') {\r\n        return 'https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js'\r\n      }\r\n    },\r\n\r\n    renderCachedWidget(cached) {\r\n      this.$nextTick(() => {\r\n        const container = this.$refs.container\r\n        if (!container) return\r\n\r\n        const script = document.createElement('script')\r\n        script.type = 'text/javascript'\r\n        script.src = cached.scriptUrl\r\n        script.async = true\r\n        script.innerHTML = JSON.stringify(cached.config)\r\n        \r\n        script.onload = () => {\r\n          this.loaded = true\r\n          const loadTime = performance.now() - this.loadStartTime\r\n          console.log(`Cached widget ${this.cacheKey} loaded in ${loadTime.toFixed(2)}ms`)\r\n        }\r\n        \r\n        container.appendChild(script)\r\n      })\r\n    },\r\n\r\n    async retry() {\r\n      this.setupIntersectionObserver()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.fast-widget {\r\n  width: 100%;\r\n  height: 100%;\r\n  min-height: 500px;\r\n  position: relative;\r\n}\r\n\r\n/* Symbol Overview ç‰¹æ®Šæ¨£å¼ - ç™½åº•å’Œ padding */\r\n.fast-widget.overview-widget {\r\n  background: #ffffff;\r\n  padding: 8px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.fast-loading {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  min-height: 500px;\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n  color: #6c757d;\r\n}\r\n\r\n/* Symbol Overview çš„ loading ç‹€æ…‹èª¿æ•´ */\r\n.fast-widget.overview-widget .fast-loading {\r\n  margin: -8px; /* æŠµæ¶ˆå®¹å™¨çš„ padding */\r\n}\r\n\r\n.loading-spinner {\r\n  width: 32px;\r\n  height: 32px;\r\n  border: 3px solid #e9ecef;\r\n  border-top: 3px solid #007bff;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n.fast-loading span {\r\n  font-size: 0.9rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.fast-error {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  min-height: 500px;\r\n  background: #f8d7da;\r\n  border: 1px solid #f5c6cb;\r\n  border-radius: 8px;\r\n  color: #721c24;\r\n}\r\n\r\n/* Symbol Overview çš„ error ç‹€æ…‹èª¿æ•´ */\r\n.fast-widget.overview-widget .fast-error {\r\n  margin: -8px; /* æŠµæ¶ˆå®¹å™¨çš„ padding */\r\n}\r\n\r\n.retry-btn {\r\n  margin-top: 0.5rem;\r\n  padding: 0.5rem 1rem;\r\n  background: #dc3545;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.85rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.retry-btn:hover {\r\n  background: #c82333;\r\n}\r\n</style>","<template>\r\n  <div class=\"fast-widget overview-widget\" :id=\"containerId\" ref=\"container\">\r\n    <div v-if=\"!loaded && !error\" class=\"fast-loading\">\r\n      <div class=\"loading-spinner\"></div>\r\n      <span>Loading Technical Analysis...</span>\r\n    </div>\r\n    \r\n    <div v-if=\"error\" class=\"fast-error\">\r\n      <span>âš ï¸ Failed to load</span>\r\n      <button @click=\"retry\" class=\"retry-btn\">Retry</button>\r\n    </div>\r\n\r\n    <!-- TradingView Widget Container -->\r\n    <div v-show=\"loaded\" class=\"tradingview-widget-container\">\r\n      <div class=\"tradingview-widget-container__widget\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { widgetLoadManager } from '@/utils/widgetLoadManager'\r\n\r\nexport default {\r\n  name: 'TechnicalAnalysisWidget',\r\n  props: {\r\n    symbol: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    exchange: {\r\n      type: String,\r\n      default: 'NASDAQ'\r\n    },\r\n    priority: {\r\n      type: Number,\r\n      default: 2\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      loaded: false,\r\n      error: false,\r\n      loadStartTime: 0,\r\n      isVisible: false,\r\n      observer: null,\r\n      retryCount: 0\r\n    }\r\n  },\r\n  computed: {\r\n    containerId() {\r\n      return `technical-analysis-${this.symbol}-${Date.now()}`\r\n    }\r\n  },\r\n  async mounted() {\r\n    this.setupIntersectionObserver()\r\n  },\r\n  beforeUnmount() {\r\n    if (this.observer) {\r\n      this.observer.disconnect()\r\n    }\r\n  },\r\n  methods: {\r\n    setupIntersectionObserver() {\r\n      // æ ¹æ“šå„ªå…ˆç´šè¨­ç½®ä¸åŒçš„ rootMargin\r\n      const rootMargins = {\r\n        1: '300px', // é«˜å„ªå…ˆç´šï¼šæå‰ 300px è¼‰å…¥\r\n        2: '150px', // ä¸­å„ªå…ˆç´šï¼šæå‰ 150px è¼‰å…¥\r\n        3: '50px'   // ä½å„ªå…ˆç´šï¼šæå‰ 50px è¼‰å…¥\r\n      }\r\n\r\n      this.observer = new IntersectionObserver(\r\n        (entries) => {\r\n          entries.forEach((entry) => {\r\n            if (entry.isIntersecting && !this.loaded && !this.error) {\r\n              this.isVisible = true\r\n              this.loadWidget()\r\n              this.observer.disconnect() // è¼‰å…¥å¾Œåœæ­¢è§€å¯Ÿ\r\n            }\r\n          })\r\n        },\r\n        {\r\n          rootMargin: rootMargins[this.priority] || '150px',\r\n          threshold: 0.1\r\n        }\r\n      )\r\n\r\n      this.observer.observe(this.$refs.container)\r\n    },\r\n\r\n    async loadWidget() {\r\n      this.loadStartTime = performance.now()\r\n      this.loaded = false\r\n      this.error = false\r\n\r\n      try {\r\n        // æ ¹æ“šå„ªå…ˆç´šæ·»åŠ å»¶é²\r\n        const delays = {\r\n          1: 0,     // é«˜å„ªå…ˆç´šï¼šç«‹å³è¼‰å…¥\r\n          2: 300,   // ä¸­å„ªå…ˆç´šï¼šå»¶é² 300ms\r\n          3: 600    // ä½å„ªå…ˆç´šï¼šå»¶é² 600ms\r\n        }\r\n\r\n        const delay = delays[this.priority] || 0\r\n        if (delay > 0) {\r\n          await new Promise(resolve => setTimeout(resolve, delay))\r\n        }\r\n\r\n        // ä½¿ç”¨ Widget Load Manager ç®¡ç†ä½µç™¼\r\n        const widgetId = `technical-analysis-${this.symbol}-${this.containerId}`\r\n        await widgetLoadManager.addToQueue(\r\n          () => this.createWidget(),\r\n          widgetId,\r\n          this.priority\r\n        )\r\n\r\n      } catch (err) {\r\n        console.error('Failed to load Technical Analysis widget:', err)\r\n        this.error = true\r\n      }\r\n    },\r\n\r\n    async createWidget() {\r\n      return new Promise((resolve, reject) => {\r\n        this.$nextTick(async () => {\r\n          const container = this.$refs.container\r\n          if (!container) {\r\n            reject(new Error('Container not found'))\r\n            return\r\n          }\r\n\r\n          const config = this.getWidgetConfig()\r\n          const scriptUrl = 'https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js'\r\n          \r\n          const script = document.createElement('script')\r\n          \r\n          script.type = 'text/javascript'\r\n          script.src = scriptUrl\r\n          script.async = true\r\n          script.innerHTML = JSON.stringify(config)\r\n          \r\n          // èª¿æ•´ timeout - æ ¹æ“šå„ªå…ˆç´šå’Œé‡è©¦æ¬¡æ•¸\r\n          const baseTimeouts = {\r\n            1: 8000,   // é«˜å„ªå…ˆç´šï¼š8ç§’\r\n            2: 12000,  // ä¸­å„ªå…ˆç´šï¼š12ç§’\r\n            3: 15000   // ä½å„ªå…ˆç´šï¼š15ç§’\r\n          }\r\n          \r\n          const retryCount = this.retryCount || 0\r\n          const timeoutDuration = baseTimeouts[this.priority] + (retryCount * 3000) // æ¯æ¬¡é‡è©¦å¢åŠ  3 ç§’\r\n          \r\n          const timeout = setTimeout(() => {\r\n            this.error = true\r\n            reject(new Error(`Widget load timeout after ${timeoutDuration}ms (retry: ${retryCount})`))\r\n          }, timeoutDuration)\r\n          \r\n          script.onload = () => {\r\n            clearTimeout(timeout)\r\n            this.loaded = true\r\n            \r\n            const loadTime = performance.now() - this.loadStartTime\r\n            console.log(`Technical Analysis widget ${this.symbol} loaded in ${loadTime.toFixed(2)}ms (retry: ${retryCount})`)\r\n            \r\n            resolve()\r\n          }\r\n          \r\n          script.onerror = () => {\r\n            clearTimeout(timeout)\r\n            this.error = true\r\n            reject(new Error('Script load failed'))\r\n          }\r\n          \r\n          // å°‡ script æ·»åŠ åˆ° tradingview-widget-container__widget ä¸­\r\n          const widgetContainer = container.querySelector('.tradingview-widget-container__widget')\r\n          if (widgetContainer) {\r\n            widgetContainer.appendChild(script)\r\n          } else {\r\n            container.appendChild(script)\r\n          }\r\n        })\r\n      })\r\n    },\r\n\r\n    getWidgetConfig() {\r\n      return {\r\n        \"colorTheme\": \"light\",\r\n        \"displayMode\": \"single\",\r\n        \"isTransparent\": true,\r\n        \"locale\": \"en\",\r\n        \"interval\": \"1D\",\r\n        \"disableInterval\": false,\r\n        \"width\": \"100%\",\r\n        \"height\": \"100%\",\r\n        \"symbol\": `${this.exchange}:${this.symbol}`,\r\n        \"showIntervalTabs\": true\r\n      }\r\n    },\r\n\r\n    async retry() {\r\n      // å¯¦æ–½æŒ‡æ•¸é€€é¿é‡è©¦\r\n      this.retryCount = (this.retryCount || 0) + 1\r\n      const maxRetries = 2\r\n      \r\n      if (this.retryCount > maxRetries) {\r\n        console.error(`Technical Analysis widget ${this.symbol} exceeded max retries (${maxRetries})`)\r\n        return\r\n      }\r\n      \r\n      // æŒ‡æ•¸é€€é¿å»¶é²\r\n      const backoffDelay = Math.min(1000 * Math.pow(2, this.retryCount - 1), 5000) // æœ€å¤š 5 ç§’\r\n      console.log(`Technical Analysis widget ${this.symbol} retrying in ${backoffDelay}ms (attempt ${this.retryCount}/${maxRetries})`)\r\n      \r\n      await new Promise(resolve => setTimeout(resolve, backoffDelay))\r\n      \r\n      this.setupIntersectionObserver()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.fast-widget {\r\n  width: 100%;\r\n  height: 100%;\r\n  min-height: 500px;\r\n  position: relative;\r\n}\r\n\r\n/* ä½¿ç”¨èˆ‡ Symbol Overview ç›¸åŒçš„æ¨£å¼ */\r\n.fast-widget.overview-widget {\r\n  background: #ffffff;\r\n  padding: 8px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.fast-loading {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  min-height: 500px;\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n  color: #6c757d;\r\n}\r\n\r\n/* è¼‰å…¥ç‹€æ…‹èª¿æ•´ */\r\n.fast-widget.overview-widget .fast-loading {\r\n  margin: -8px; /* æŠµæ¶ˆå®¹å™¨çš„ padding */\r\n}\r\n\r\n.loading-spinner {\r\n  width: 32px;\r\n  height: 32px;\r\n  border: 3px solid #e9ecef;\r\n  border-top: 3px solid #007bff;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n.fast-loading span {\r\n  font-size: 0.9rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.fast-error {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  min-height: 500px;\r\n  background: #f8d7da;\r\n  border: 1px solid #f5c6cb;\r\n  border-radius: 8px;\r\n  color: #721c24;\r\n}\r\n\r\n/* éŒ¯èª¤ç‹€æ…‹èª¿æ•´ */\r\n.fast-widget.overview-widget .fast-error {\r\n  margin: -8px; /* æŠµæ¶ˆå®¹å™¨çš„ padding */\r\n}\r\n\r\n.retry-btn {\r\n  margin-top: 0.5rem;\r\n  padding: 0.5rem 1rem;\r\n  background: #dc3545;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.85rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.retry-btn:hover {\r\n  background: #c82333;\r\n}\r\n\r\n/* TradingView Widget æ¨£å¼ */\r\n.tradingview-widget-container {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: relative;\r\n}\r\n\r\n.tradingview-widget-container__widget {\r\n  width: 100%;\r\n  height: 100%; /* ç§»é™¤ copyright å¾Œä½¿ç”¨å…¨é«˜åº¦ */\r\n}\r\n</style>","<template>\r\n  <div class=\"technical-indicators\">\r\n    <div class=\"indicators-header\">\r\n      <h4>Technical Indicators</h4>\r\n      <div v-if=\"cacheInfo\" class=\"cache-info\">\r\n        <small>{{ cacheInfo }}</small>\r\n      </div>\r\n    </div>\r\n    \r\n    <div v-if=\"loading\" class=\"loading-state\">\r\n      <div class=\"loading-spinner\"></div>\r\n      <span>Loading technical data...</span>\r\n    </div>\r\n    \r\n    <div v-else-if=\"error\" class=\"error-state\">\r\n      <span class=\"error-icon\">âš ï¸</span>\r\n      <span>{{ error }}</span>\r\n      <button @click=\"retryLoad\" class=\"retry-button\" :disabled=\"loading\">\r\n        {{ loading ? 'Loading...' : 'Retry' }}\r\n      </button>\r\n    </div>\r\n    \r\n    <div v-else class=\"indicators-grid\">\r\n      <!-- Row 1: MA5, MA10, MA30 -->\r\n      <div class=\"indicator-item\">\r\n        <span class=\"indicator-label\">MA5</span>\r\n        <div class=\"indicator-value-row\">\r\n          <span class=\"indicator-value\" :class=\"getSignalClass(technicalData?.ma5?.signal)\">\r\n            {{ formatValue(technicalData?.ma5?.value) }}\r\n          </span>\r\n          <span class=\"price-diff\" :class=\"getPriceDiffClass(technicalData?.ma5?.value)\">\r\n            {{ formatPriceDiff(technicalData?.ma5?.value) }}\r\n          </span>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"indicator-item\">\r\n        <span class=\"indicator-label\">MA10</span>\r\n        <div class=\"indicator-value-row\">\r\n          <span class=\"indicator-value\" :class=\"getSignalClass(technicalData?.ma10?.signal)\">\r\n            {{ formatValue(technicalData?.ma10?.value) }}\r\n          </span>\r\n          <span class=\"price-diff\" :class=\"getPriceDiffClass(technicalData?.ma10?.value)\">\r\n            {{ formatPriceDiff(technicalData?.ma10?.value) }}\r\n          </span>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"indicator-item\">\r\n        <span class=\"indicator-label\">MA30</span>\r\n        <div class=\"indicator-value-row\">\r\n          <span class=\"indicator-value\" :class=\"getSignalClass(technicalData?.ma30?.signal)\">\r\n            {{ formatValue(technicalData?.ma30?.value) }}\r\n          </span>\r\n          <span class=\"price-diff\" :class=\"getPriceDiffClass(technicalData?.ma30?.value)\">\r\n            {{ formatPriceDiff(technicalData?.ma30?.value) }}\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Row 2: SMA5, SMA10, SMA30 -->\r\n      <div class=\"indicator-item\">\r\n        <span class=\"indicator-label\">SMA5</span>\r\n        <div class=\"indicator-value-row\">\r\n          <span class=\"indicator-value\" :class=\"getSignalClass(technicalData?.sma5?.signal)\">\r\n            {{ formatValue(technicalData?.sma5?.value) }}\r\n          </span>\r\n          <span class=\"price-diff\" :class=\"getPriceDiffClass(technicalData?.sma5?.value)\">\r\n            {{ formatPriceDiff(technicalData?.sma5?.value) }}\r\n          </span>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"indicator-item\">\r\n        <span class=\"indicator-label\">SMA10</span>\r\n        <div class=\"indicator-value-row\">\r\n          <span class=\"indicator-value\" :class=\"getSignalClass(technicalData?.sma10?.signal)\">\r\n            {{ formatValue(technicalData?.sma10?.value) }}\r\n          </span>\r\n          <span class=\"price-diff\" :class=\"getPriceDiffClass(technicalData?.sma10?.value)\">\r\n            {{ formatPriceDiff(technicalData?.sma10?.value) }}\r\n          </span>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"indicator-item\">\r\n        <span class=\"indicator-label\">SMA30</span>\r\n        <div class=\"indicator-value-row\">\r\n          <span class=\"indicator-value\" :class=\"getSignalClass(technicalData?.sma30?.signal)\">\r\n            {{ formatValue(technicalData?.sma30?.value) }}\r\n          </span>\r\n          <span class=\"price-diff\" :class=\"getPriceDiffClass(technicalData?.sma30?.value)\">\r\n            {{ formatPriceDiff(technicalData?.sma30?.value) }}\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Row 3: Ichimoku Components -->\r\n      <div class=\"indicator-item\">\r\n        <span class=\"indicator-label\">Ichimoku Conversion (9)</span>\r\n        <div class=\"indicator-value-row\">\r\n          <span class=\"indicator-value\" :class=\"getSignalClass(technicalData?.ichimokuConversionLine?.signal)\">\r\n            {{ formatValue(technicalData?.ichimokuConversionLine?.value) }}\r\n          </span>\r\n          <span class=\"price-diff\" :class=\"getPriceDiffClass(technicalData?.ichimokuConversionLine?.value)\">\r\n            {{ formatPriceDiff(technicalData?.ichimokuConversionLine?.value) }}\r\n          </span>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"indicator-item\">\r\n        <span class=\"indicator-label\">Ichimoku Base (26)</span>\r\n        <div class=\"indicator-value-row\">\r\n          <span class=\"indicator-value\" :class=\"getSignalClass(technicalData?.ichimokuBaseLine?.signal)\">\r\n            {{ formatValue(technicalData?.ichimokuBaseLine?.value) }}\r\n          </span>\r\n          <span class=\"price-diff\" :class=\"getPriceDiffClass(technicalData?.ichimokuBaseLine?.value)\">\r\n            {{ formatPriceDiff(technicalData?.ichimokuBaseLine?.value) }}\r\n          </span>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"indicator-item\">\r\n        <span class=\"indicator-label\">Ichimoku Lagging (26)</span>\r\n        <div class=\"indicator-value-row\">\r\n          <span class=\"indicator-value\" :class=\"getSignalClass(technicalData?.ichimokuLaggingSpan?.signal)\">\r\n            {{ formatValue(technicalData?.ichimokuLaggingSpan?.value) }}\r\n          </span>\r\n          <span class=\"price-diff\" :class=\"getPriceDiffClass(technicalData?.ichimokuLaggingSpan?.value)\">\r\n            {{ formatPriceDiff(technicalData?.ichimokuLaggingSpan?.value) }}\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Row 4: Technical Indicators -->\r\n      <div class=\"indicator-item\">\r\n        <span class=\"indicator-label\">ADX (14)</span>\r\n        <span class=\"indicator-value\" :class=\"getSignalClass(technicalData?.adx14?.signal)\">\r\n          {{ formatValue(technicalData?.adx14?.value) }}\r\n        </span>\r\n      </div>\r\n      \r\n      <div class=\"indicator-item\">\r\n        <span class=\"indicator-label\">MACD (12,26)</span>\r\n        <span class=\"indicator-value\" :class=\"getSignalClass(technicalData?.macd?.signal)\">\r\n          {{ formatValue(technicalData?.macd?.value) }}\r\n        </span>\r\n      </div>\r\n      \r\n      <div class=\"indicator-item\">\r\n        <span class=\"indicator-label\">VWMA (20)</span>\r\n        <span class=\"indicator-value\" :class=\"getSignalClass(technicalData?.vwma20?.signal)\">\r\n          {{ formatValue(technicalData?.vwma20?.value) }}\r\n        </span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport hybridTechnicalIndicatorsAPI from '../utils/hybridTechnicalIndicatorsApi.js'\r\n\r\nexport default {\r\n  name: 'TechnicalIndicators',\r\n  props: {\r\n    symbol: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    exchange: {\r\n      type: String,\r\n      default: 'NASDAQ'\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      loading: true,\r\n      error: null,\r\n      technicalData: null,\r\n      cacheInfo: null\r\n    }\r\n  },\r\n  mounted() {\r\n    this.loadTechnicalData()\r\n  },\r\n  watch: {\r\n    symbol() {\r\n      this.loadTechnicalData()\r\n    }\r\n  },\r\n  methods: {\r\n    async loadTechnicalData() {\r\n      this.loading = true;\r\n      this.error = null;\r\n      this.cacheInfo = null;\r\n      \r\n      try {\r\n        console.log(`ğŸ” Loading technical data for ${this.symbol}...`);\r\n        \r\n        const startTime = Date.now();\r\n        \r\n        // ğŸš€ æ€§èƒ½å„ªåŒ–ï¼šåªè¼‰å…¥ç•¶å‰è‚¡ç¥¨çš„æŠ€è¡“æŒ‡æ¨™æ•¸æ“š\r\n        // é¿å…è¼‰å…¥æ‰€æœ‰è‚¡ç¥¨çš„æ•¸æ“š\r\n        this.technicalData = await hybridTechnicalIndicatorsAPI.getTechnicalIndicators(this.symbol);\r\n        \r\n        const loadTime = Date.now() - startTime;\r\n        \r\n        if (this.technicalData.error) {\r\n          throw new Error(this.technicalData.error);\r\n        }\r\n        \r\n        // è¨­ç½®ç·©å­˜ä¿¡æ¯\r\n        if (this.technicalData.source) {\r\n          if (this.technicalData.source.includes('Cache')) {\r\n            this.cacheInfo = `${this.technicalData.source} (${loadTime}ms)`;\r\n          } else if (this.technicalData.source.includes('Precomputed')) {\r\n            this.cacheInfo = `${this.technicalData.source} (${loadTime}ms)`;\r\n          } else {\r\n            this.cacheInfo = `Fresh data (${loadTime}ms)`;\r\n          }\r\n        } else {\r\n          this.cacheInfo = `Loaded in ${loadTime}ms`;\r\n        }\r\n        \r\n        console.log(`âœ… Technical data loaded for ${this.symbol}:`, {\r\n          source: this.technicalData.source,\r\n          loadTime: `${loadTime}ms`,\r\n          hasADX: !!this.technicalData.adx14?.value\r\n        });\r\n        \r\n        // é©—è­‰ ADX æ•¸æ“š\r\n        if (this.technicalData.adx14 && this.technicalData.adx14.value !== null && this.technicalData.adx14.value !== 'N/A') {\r\n          console.log(`âœ… ADX data is valid for ${this.symbol}: ${this.technicalData.adx14.value}`);\r\n        } else {\r\n          console.warn(`âš ï¸ ADX data may be invalid for ${this.symbol}:`, this.technicalData.adx14);\r\n        }\r\n        \r\n        // ç™¼é€è‡ªå®šç¾©äº‹ä»¶çµ¦ PerformanceMonitorï¼ˆå¦‚æœå­˜åœ¨ï¼‰\r\n        if (typeof window !== 'undefined') {\r\n          window.dispatchEvent(new CustomEvent('widget-loaded', {\r\n            detail: {\r\n              name: `TechnicalIndicators-${this.symbol}`,\r\n              time: loadTime,\r\n              priority: 2\r\n            }\r\n          }))\r\n        }\r\n        \r\n      } catch (error) {\r\n        console.error(`âŒ Failed to load technical data for ${this.symbol}:`, error);\r\n        this.error = error.message;\r\n        \r\n        // å¦‚æœæ˜¯ç¶²è·¯éŒ¯èª¤ï¼Œæä¾›é‡è©¦é¸é …\r\n        if (error.message.includes('fetch') || error.message.includes('network') || error.message.includes('proxy')) {\r\n          this.error = `Network error loading data for ${this.symbol}. Click to retry.`;\r\n        }\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n    \r\n    // æ‰‹å‹•é‡è©¦è¼‰å…¥\r\n    async retryLoad() {\r\n      await this.loadTechnicalData();\r\n    },\r\n    \r\n    getSignalClass(signal) {\r\n      if (!signal) return 'neutral';\r\n      \r\n      const bullishSignals = ['BUY', 'OVERSOLD', 'STRONG_TREND'];\r\n      const bearishSignals = ['SELL', 'OVERBOUGHT'];\r\n      \r\n      if (bullishSignals.includes(signal)) return 'bullish';\r\n      if (bearishSignals.includes(signal)) return 'bearish';\r\n      return 'neutral';\r\n    },\r\n    \r\n    formatValue(value) {\r\n      if (value === null || value === undefined) return 'N/A';\r\n      if (typeof value === 'string') return value;\r\n      if (typeof value === 'number') return value.toFixed(2);\r\n      return 'N/A';\r\n    },\r\n    \r\n    // è¨ˆç®—èˆ‡æœ€å¾Œæ”¶ç›¤åƒ¹çš„å·®ç•° (åå‘è¨ˆç®—ï¼šä»¥æ”¶ç›¤åƒ¹ç‚ºåŸºæº–)\r\n    formatPriceDiff(indicatorValue) {\r\n      if (!indicatorValue || !this.technicalData) return '';\r\n      \r\n      // å¾æŠ€è¡“æ•¸æ“šä¸­ç²å–ç•¶å‰åƒ¹æ ¼\r\n      const currentPrice = this.getCurrentPrice();\r\n      if (!currentPrice) return '';\r\n      \r\n      const diff = currentPrice - parseFloat(indicatorValue);\r\n      const diffPercent = (diff / parseFloat(indicatorValue)) * 100;\r\n      \r\n      if (Math.abs(diff) < 0.01) return 'Â±0.00';\r\n      \r\n      const sign = diff > 0 ? '+' : '';\r\n      return `${sign}${diff.toFixed(2)} (${sign}${diffPercent.toFixed(1)}%)`;\r\n    },\r\n    \r\n    // ç²å–ç•¶å‰è‚¡åƒ¹\r\n    getCurrentPrice() {\r\n      if (!this.technicalData) return null;\r\n      \r\n      // å˜—è©¦å¾ä¸åŒçš„æŒ‡æ¨™ä¸­ç²å–ç•¶å‰åƒ¹æ ¼\r\n      if (this.technicalData.sma5?.currentPrice) {\r\n        return parseFloat(this.technicalData.sma5.currentPrice);\r\n      }\r\n      if (this.technicalData.ma5?.currentPrice) {\r\n        return parseFloat(this.technicalData.ma5.currentPrice);\r\n      }\r\n      if (this.technicalData.sma50?.currentPrice) {\r\n        return parseFloat(this.technicalData.sma50.currentPrice);\r\n      }\r\n      \r\n      return null;\r\n    },\r\n    \r\n    // åƒ¹æ ¼å·®ç•°çš„é¡è‰²é¡åˆ¥ (åå‘é‚è¼¯)\r\n    getPriceDiffClass(indicatorValue) {\r\n      if (!indicatorValue) return 'neutral';\r\n      \r\n      const currentPrice = this.getCurrentPrice();\r\n      if (!currentPrice) return 'neutral';\r\n      \r\n      const diff = currentPrice - parseFloat(indicatorValue);\r\n      \r\n      if (Math.abs(diff) < 0.01) return 'neutral';\r\n      return diff > 0 ? 'positive' : 'negative';\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.technical-indicators {\r\n  background: #f8f9fa;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  margin-top: 1rem;\r\n}\r\n\r\n.indicators-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.indicators-header h4 {\r\n  font-size: 0.95rem;\r\n  font-weight: 600;\r\n  color: #495057;\r\n  margin: 0;\r\n}\r\n\r\n.cache-info {\r\n  color: #6c757d;\r\n  font-size: 0.7rem;\r\n}\r\n\r\n.loading-state {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 0.75rem;\r\n  color: #6c757d;\r\n  font-size: 0.9rem;\r\n  padding: 2rem;\r\n}\r\n\r\n.loading-spinner {\r\n  width: 20px;\r\n  height: 20px;\r\n  border: 2px solid #e9ecef;\r\n  border-top: 2px solid #007bff;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n.error-state {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 0.5rem;\r\n  color: #dc3545;\r\n  font-size: 0.9rem;\r\n  text-align: center;\r\n  padding: 2rem;\r\n  flex-direction: column;\r\n}\r\n\r\n.error-icon {\r\n  font-size: 1.1rem;\r\n}\r\n\r\n.retry-button {\r\n  background: #007bff;\r\n  color: white;\r\n  border: none;\r\n  padding: 0.5rem 1rem;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.8rem;\r\n  margin-top: 0.5rem;\r\n}\r\n\r\n.retry-button:hover:not(:disabled) {\r\n  background: #0056b3;\r\n}\r\n\r\n.retry-button:disabled {\r\n  background: #6c757d;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.indicators-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(3, 1fr);\r\n  gap: 0.75rem;\r\n}\r\n\r\n.indicator-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  text-align: center;\r\n  padding: 0.75rem;\r\n  background: white;\r\n  border-radius: 6px;\r\n  border: 1px solid #e9ecef;\r\n  min-height: 60px;\r\n  justify-content: center;\r\n}\r\n\r\n.indicator-label {\r\n  font-size: 0.75rem;\r\n  color: #6c757d;\r\n  margin-bottom: 0.25rem;\r\n  font-weight: 500;\r\n  line-height: 1.2;\r\n}\r\n\r\n.indicator-value-row {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  flex-wrap: wrap;\r\n  justify-content: center;\r\n}\r\n\r\n.indicator-value {\r\n  font-size: 0.85rem;\r\n  font-weight: 600;\r\n  line-height: 1.2;\r\n}\r\n\r\n.indicator-value.bullish {\r\n  color: #28a745;\r\n}\r\n\r\n.indicator-value.bearish {\r\n  color: #dc3545;\r\n}\r\n\r\n.indicator-value.neutral {\r\n  color: #6c757d;\r\n}\r\n\r\n.price-diff {\r\n  font-size: 0.65rem;\r\n  font-weight: 500;\r\n  white-space: nowrap;\r\n}\r\n\r\n.price-diff.positive {\r\n  color: #28a745;\r\n}\r\n\r\n.price-diff.negative {\r\n  color: #dc3545;\r\n}\r\n\r\n.price-diff.neutral {\r\n  color: #6c757d;\r\n}\r\n\r\n.cache-info {\r\n  margin-top: 0.5rem;\r\n  text-align: center;\r\n  color: #6c757d;\r\n  font-size: 0.7rem;\r\n}\r\n\r\n/* éŸ¿æ‡‰å¼è¨­è¨ˆ */\r\n@media (max-width: 768px) {\r\n  .indicators-grid {\r\n    grid-template-columns: repeat(2, 1fr);\r\n    gap: 0.5rem;\r\n  }\r\n  \r\n  .indicator-item {\r\n    padding: 0.5rem;\r\n    min-height: 50px;\r\n  }\r\n  \r\n  .indicator-label {\r\n    font-size: 0.7rem;\r\n  }\r\n  \r\n  .indicator-value {\r\n    font-size: 0.8rem;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .indicators-grid {\r\n    grid-template-columns: 1fr;\r\n  }\r\n}\r\n</style>","<template>\r\n  <div \r\n    class=\"stock-card-pair\"\r\n    :id=\"domId\"\r\n    :data-symbol=\"quote.symbol\"\r\n    tabindex=\"-1\"\r\n  >\r\n    <!-- Stock Info Header -->\r\n    <div class=\"stock-info-header\">\r\n      <div class=\"symbol-info\">\r\n        <h3 class=\"symbol\">{{ quote.symbol }}</h3>\r\n        <div class=\"symbol-tags\">\r\n          <span class=\"exchange-tag\">{{ getExchange() }}</span>\r\n          <span class=\"industry-tag\" :class=\"`industry-${getIndustryCategory()}`\">{{ getIndustry() }}</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"header-actions\">\r\n        <button \r\n          @click=\"goToDetail\" \r\n          class=\"detail-btn\"\r\n          :title=\"`View detailed analysis for ${quote.symbol}`\"\r\n        >\r\n          Detail\r\n          <span class=\"btn-icon\">â†’</span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- TradingView Widgets Container -->\r\n    <div class=\"widgets-container\">\r\n      <!-- Symbol Overview (2/3 width) -->\r\n      <div class=\"widget-overview\">\r\n        <div class=\"widget-header\">\r\n          <h4>Symbol Overview</h4>\r\n        </div>\r\n        <FastTradingViewWidget \r\n          widget-type=\"overview\"\r\n          :symbol=\"quote.symbol\" \r\n          :exchange=\"getExchange()\"\r\n          :priority=\"1\"\r\n        />\r\n      </div>\r\n\r\n      <!-- Technical Analysis (1/3 width) - ä½¿ç”¨æ–°çš„ TechnicalAnalysisWidget -->\r\n      <div class=\"widget-overview\">\r\n        <div class=\"widget-header\">\r\n          <h4>Technical Analysis</h4>\r\n        </div>\r\n        <TechnicalAnalysisWidget \r\n          :symbol=\"quote.symbol\" \r\n          :exchange=\"getExchange()\"\r\n          :priority=\"2\"\r\n        />\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Additional Info (Optional) -->\r\n    <div v-if=\"dailyData\" class=\"additional-info\">\r\n      <div class=\"brief-section\">\r\n        <h5>Daily Brief</h5>\r\n        <p class=\"brief-text\">{{ dailyData.short_brief_zh }}</p>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Technical Indicators -->\r\n    <TechnicalIndicators \r\n      :symbol=\"quote.symbol\" \r\n      :exchange=\"getExchange()\"\r\n    />\r\n\r\n\r\n\r\n    <!-- Stale Indicator -->\r\n    <div v-if=\"isStale\" class=\"stale-indicator\">\r\n      <span class=\"stale-badge\" :class=\"`stale-${quote.stale_level}`\">\r\n        {{ getStaleText() }}\r\n      </span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport FastTradingViewWidget from './FastTradingViewWidget.vue'\r\nimport TechnicalAnalysisWidget from './TechnicalAnalysisWidget.vue'\r\nimport TechnicalIndicators from './TechnicalIndicators.vue'\r\n\r\nexport default {\r\n  name: 'StockCard',\r\n  components: {\r\n    FastTradingViewWidget,\r\n    TechnicalAnalysisWidget,\r\n    TechnicalIndicators\r\n  },\r\n  props: {\r\n    quote: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    dailyData: {\r\n      type: Object,\r\n      default: null\r\n    },\r\n    metadata: {\r\n      type: Object,\r\n      default: null\r\n    }\r\n  },\r\n  computed: {\r\n    isStale() {\r\n      return this.quote.stale_level !== 'fresh'\r\n    },\r\n\r\n    domId() {\r\n      return `sym-${this.sanitizeSymbol(this.quote.symbol)}`\r\n    }\r\n  },\r\n  methods: {\r\n    getSector() {\r\n      if (!this.metadata) return 'Unknown'\r\n      \r\n      // æ ¹æ“š PRD è¦æ±‚ï¼Œconfidence < 0.7 æ­¸é¡ç‚º Unknown\r\n      if (this.metadata.confidence < 0.7) {\r\n        return 'Unknown'\r\n      }\r\n      \r\n      return this.metadata.sector || 'Unknown'\r\n    },\r\n\r\n    getIndustry() {\r\n      if (!this.metadata) {\r\n        return 'Unknown Industry'\r\n      }\r\n      \r\n      if (this.metadata.confidence < 0.7) {\r\n        return 'Unknown Industry'\r\n      }\r\n      \r\n      return this.metadata.industry || this.metadata.sector || 'Unknown Industry'\r\n    },\r\n\r\n    getIndustryCategory() {\r\n      const industry = this.getIndustry()\r\n      \r\n      // æ ¹æ“š industry è¿”å›ä¸»è¦åˆ†é¡ï¼Œç”¨æ–¼æ¨£å¼\r\n      const industryCategories = {\r\n        'Industrial IoT Solutions': 'tech-iot',\r\n        'Satellite Imaging & Analytics': 'tech-satellite',\r\n        'Database Software': 'tech-software',\r\n        'Enterprise Software': 'tech-software',\r\n        'Semiconductors': 'tech-hardware',\r\n        'Aerospace & Defense': 'industrial-aerospace',\r\n        'Space Infrastructure': 'industrial-space',\r\n        'Satellite Communications': 'communications',\r\n        'Electric Vehicles': 'automotive',\r\n        'Unknown Industry': 'unknown'\r\n      }\r\n      \r\n      return industryCategories[industry] || 'other'\r\n    },\r\n\r\n    getExchange() {\r\n      if (this.metadata && this.metadata.exchange) {\r\n        // å°‡ metadata ä¸­çš„ exchange ä»£ç¢¼è½‰æ›ç‚ºé¡¯ç¤ºåç¨±\r\n        const exchangeMap = {\r\n          'NYQ': 'NYSE',    // New York Stock Exchange\r\n          'NMS': 'NASDAQ',  // NASDAQ Global Select Market\r\n          'NCM': 'NASDAQ',  // NASDAQ Capital Market\r\n          'NGM': 'NASDAQ',  // NASDAQ Global Market\r\n          'ASE': 'AMEX'     // NYSE American (åŸ American Stock Exchange)\r\n        }\r\n        return exchangeMap[this.metadata.exchange] || this.metadata.exchange\r\n      }\r\n      \r\n      // æ ¹æ“š symbol æ¨æ¸¬äº¤æ˜“æ‰€ï¼ˆå‚™ç”¨æ–¹æ¡ˆï¼‰\r\n      const symbol = this.quote.symbol\r\n      \r\n      // NYSE è‚¡ç¥¨\r\n      if (['ORCL', 'TSM', 'RDW', 'CRM', 'PL', 'LEU', 'SMR', 'IONQ', 'HIMS'].includes(symbol)) {\r\n        return 'NYSE'\r\n      }\r\n      // NASDAQ è‚¡ç¥¨\r\n      else if (['ASTS', 'RIVN', 'ONDS', 'AVAV', 'MDB', 'RKLB', 'NVDA', 'AVGO', 'AMZN', 'GOOG', 'META', 'NFLX', 'CRWV', 'PLTR', 'TSLA'].includes(symbol)) {\r\n        return 'NASDAQ'\r\n      }\r\n      \r\n      return 'NASDAQ' // é è¨­å€¼\r\n    },\r\n\r\n    getStaleText() {\r\n      switch (this.quote.stale_level) {\r\n        case 'stale': return 'ğŸŸ¡ Stale Data'\r\n        case 'very_stale': return 'ğŸ”´ Very Stale'\r\n        default: return ''\r\n      }\r\n    },\r\n\r\n    goToDetail() {\r\n      // å°èˆªåˆ°è‚¡ç¥¨è©³ç´°é é¢ (æ–°è·¯ç”±çµæ§‹)\r\n      console.log('Navigating to stock detail for:', this.quote.symbol)\r\n      this.$router.push({\r\n        name: 'stock-detail',\r\n        params: { symbol: this.quote.symbol }\r\n      }).catch(err => {\r\n        console.error('Navigation error:', err)\r\n      })\r\n    },\r\n\r\n    sanitizeSymbol(symbol) {\r\n      // å°‡ symbol è½‰æ›ç‚ºæœ‰æ•ˆçš„ DOM ID\r\n      // æ›¿æ›éå­—æ¯æ•¸å­—å­—ç¬¦ç‚ºåº•ç·š\r\n      return symbol.replace(/[^a-zA-Z0-9]/g, '_')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/* Stock Card Pair Container */\r\n.stock-card-pair {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 12px;\r\n  padding: 1.5rem;\r\n  transition: all 0.2s;\r\n  position: relative;\r\n  width: 100%;\r\n  scroll-margin-top: 80px; /* Handle sticky header offset */\r\n}\r\n\r\n/* Stock Info Header */\r\n.stock-info-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 1.5rem;\r\n  padding-bottom: 1rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.symbol-info .symbol {\r\n  font-size: 1.5rem;\r\n  font-weight: 700;\r\n  color: #333;\r\n  margin: 0 0 0.5rem 0;\r\n}\r\n\r\n.symbol-tags {\r\n  display: flex;\r\n  gap: 0.5rem;\r\n  align-items: center;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.exchange-tag {\r\n  font-size: 0.75rem;\r\n  color: #007bff;\r\n  background-color: #e7f3ff;\r\n  padding: 0.25rem 0.5rem;\r\n  border-radius: 4px;\r\n  font-weight: 500;\r\n  border: 1px solid #90caf9;\r\n  display: inline-block;\r\n}\r\n\r\n.industry-tag {\r\n  font-size: 0.75rem;\r\n  color: #666;\r\n  background-color: #e8f4fd;\r\n  padding: 0.25rem 0.5rem;\r\n  border-radius: 4px;\r\n  font-weight: 500;\r\n  border: 1px solid #b3d9ff;\r\n  display: inline-block;\r\n}\r\n\r\n/* Industry Category Specific Styles */\r\n.industry-tech-iot {\r\n  background-color: #e3f2fd;\r\n  color: #1565c0;\r\n  border-color: #90caf9;\r\n}\r\n\r\n.industry-tech-satellite {\r\n  background-color: #f3e5f5;\r\n  color: #7b1fa2;\r\n  border-color: #ce93d8;\r\n}\r\n\r\n.industry-tech-software {\r\n  background-color: #e8f5e8;\r\n  color: #2e7d32;\r\n  border-color: #a5d6a7;\r\n}\r\n\r\n.industry-tech-hardware {\r\n  background-color: #fff3e0;\r\n  color: #ef6c00;\r\n  border-color: #ffcc80;\r\n}\r\n\r\n.industry-industrial-aerospace {\r\n  background-color: #fce4ec;\r\n  color: #c2185b;\r\n  border-color: #f8bbd9;\r\n}\r\n\r\n.industry-industrial-space {\r\n  background-color: #f1f8e9;\r\n  color: #558b2f;\r\n  border-color: #c5e1a5;\r\n}\r\n\r\n.industry-communications {\r\n  background-color: #e0f2f1;\r\n  color: #00695c;\r\n  border-color: #80cbc4;\r\n}\r\n\r\n.industry-automotive {\r\n  background-color: #fff8e1;\r\n  color: #ff8f00;\r\n  border-color: #ffcc02;\r\n}\r\n\r\n.industry-unknown {\r\n  background-color: #f5f5f5;\r\n  color: #757575;\r\n  border-color: #e0e0e0;\r\n}\r\n\r\n.industry-other {\r\n  background-color: #fafafa;\r\n  color: #616161;\r\n  border-color: #bdbdbd;\r\n}\r\n\r\n.exchange-info .exchange {\r\n  font-size: 0.9rem;\r\n  color: #007bff;\r\n  background-color: #e7f3ff;\r\n  padding: 0.3rem 0.6rem;\r\n  border-radius: 6px;\r\n  font-weight: 600;\r\n}\r\n\r\n/* Header Actions */\r\n.header-actions {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 1rem;\r\n}\r\n\r\n.detail-btn {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 0.5rem;\r\n  padding: 0.5rem 1rem;\r\n  background: linear-gradient(135deg, #007bff, #0056b3);\r\n  color: white;\r\n  border: none;\r\n  border-radius: 6px;\r\n  font-size: 0.85rem;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n  box-shadow: 0 2px 4px rgba(0, 123, 255, 0.2);\r\n  line-height: 1;\r\n  min-height: 36px;\r\n}\r\n\r\n.detail-btn:hover {\r\n  background: linear-gradient(135deg, #0056b3, #004085);\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 4px 8px rgba(0, 123, 255, 0.3);\r\n}\r\n\r\n.detail-btn:active {\r\n  transform: translateY(0);\r\n}\r\n\r\n.btn-icon {\r\n  font-size: 1rem;\r\n  line-height: 1;\r\n  display: inline-flex;\r\n  align-items: center;\r\n}\r\n\r\n/* Widgets Container */\r\n.widgets-container {\r\n  display: grid;\r\n  grid-template-columns: 2fr 1fr; /* 2/3 å’Œ 1/3 çš„æ¯”ä¾‹ */\r\n  gap: 1.5rem;\r\n  margin-bottom: 0px; /* ç§»é™¤ä¸‹æ–¹ padding */\r\n  min-height: 450px; /* æ¸›å°‘é«˜åº¦å¾ 600px åˆ° 450px */\r\n  will-change: transform; /* å„ªåŒ–å‹•ç•«æ€§èƒ½ */\r\n}\r\n\r\n.widget-overview,\r\n.widget-technical {\r\n  background: #fafafa;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n  display: flex;\r\n  flex-direction: column;\r\n  contain: layout style paint; /* CSS containment å„ªåŒ– */\r\n}\r\n\r\n.widget-overview {\r\n  min-height: 440px; /* Symbol Overview å°é½Š Technical Analysis é«˜åº¦ */\r\n  height: 440px;\r\n}\r\n\r\n.widget-technical {\r\n  min-height: 440px; /* Technical Analysis é©åº¦å¢åŠ åˆ° 440px é¿å… scroll bar */\r\n  height: 440px;\r\n}\r\n\r\n.widget-header {\r\n  background: #f8f9fa;\r\n  padding: 0.75rem 1rem;\r\n  border-bottom: 1px solid #e9ecef;\r\n  flex-shrink: 0; /* é˜²æ­¢ header è¢«å£“ç¸® */\r\n}\r\n\r\n.widget-header h4 {\r\n  font-size: 0.95rem;\r\n  font-weight: 600;\r\n  color: #495057;\r\n  margin: 0;\r\n}\r\n\r\n/* ç¢ºä¿ widget å…§å®¹å€åŸŸæœ‰è¶³å¤ é«˜åº¦ */\r\n.widget-overview > :not(.widget-header) {\r\n  flex: 1;\r\n  min-height: 390px; /* Symbol Overview å…§å®¹å€åŸŸå°é½Š */\r\n}\r\n\r\n.widget-technical > :not(.widget-header) {\r\n  flex: 1;\r\n  min-height: 390px; /* Technical Analysis å…§å®¹å€åŸŸé©åº¦å¢åŠ åˆ° 390px */\r\n}\r\n\r\n/* Additional Info */\r\n.additional-info {\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.brief-section {\r\n  background: #f8f9fa;\r\n  padding: 1rem;\r\n  border-radius: 6px;\r\n  border-left: 4px solid #007bff;\r\n}\r\n\r\n.brief-section h5 {\r\n  font-size: 0.9rem;\r\n  color: #495057;\r\n  margin: 0 0 0.5rem 0;\r\n  font-weight: 600;\r\n}\r\n\r\n.brief-text {\r\n  font-size: 0.85rem;\r\n  line-height: 1.5;\r\n  color: #6c757d;\r\n  margin: 0;\r\n}\r\n\r\n\r\n\r\n/* Stale Indicator */\r\n.stale-indicator {\r\n  position: absolute;\r\n  top: 1rem;\r\n  right: 1rem;\r\n}\r\n\r\n.stale-badge {\r\n  font-size: 0.7rem;\r\n  padding: 0.25rem 0.5rem;\r\n  border-radius: 4px;\r\n  font-weight: 500;\r\n}\r\n\r\n.stale-badge.stale-very_stale {\r\n  background-color: #f8d7da;\r\n  color: #721c24;\r\n}\r\n\r\n/* éŸ¿æ‡‰å¼è¨­è¨ˆ */\r\n\r\n/* å¤§è¢å¹• (æ¡Œæ©Ÿ) - 1200px ä»¥ä¸Š */\r\n@media (min-width: 1200px) {\r\n  .stock-card-pair {\r\n    padding: 2rem;\r\n  }\r\n  \r\n  .symbol-info .symbol {\r\n    font-size: 1.6rem;\r\n  }\r\n  \r\n  .widgets-container {\r\n    gap: 2rem;\r\n  }\r\n}\r\n\r\n/* ä¸­ç­‰è¢å¹• (å¹³æ¿æ©«å‘) - 768px åˆ° 1199px */\r\n@media (min-width: 768px) and (max-width: 1199px) {\r\n  .stock-card-pair {\r\n    padding: 1.5rem;\r\n  }\r\n  \r\n  .symbol-info .symbol {\r\n    font-size: 1.4rem;\r\n  }\r\n  \r\n  .widgets-container {\r\n    gap: 1.25rem;\r\n  }\r\n}\r\n\r\n/* å°è¢å¹• (å¹³æ¿ç›´å‘å’Œæ‰‹æ©Ÿ) - 768px ä»¥ä¸‹ */\r\n@media (max-width: 767px) {\r\n  .stock-card-pair {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .stock-info-header {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 0.75rem;\r\n  }\r\n  \r\n  .header-actions {\r\n    width: 100%;\r\n    justify-content: space-between;\r\n  }\r\n  \r\n  .detail-btn {\r\n    padding: 0.4rem 0.8rem;\r\n    font-size: 0.8rem;\r\n  }\r\n  \r\n  .symbol-info .symbol {\r\n    font-size: 1.3rem;\r\n  }\r\n  \r\n  /* æ‰‹æ©Ÿç‰ˆï¼šwidgets å‚ç›´æ’åˆ— */\r\n  .widgets-container {\r\n    grid-template-columns: 1fr;\r\n    gap: 1rem;\r\n  }\r\n  \r\n  .widget-overview {\r\n    height: 380px; /* æ‰‹æ©Ÿç‰ˆå°é½Šé«˜åº¦ */\r\n    min-height: 380px;\r\n  }\r\n  \r\n  .widget-technical {\r\n    height: 380px; /* æ‰‹æ©Ÿç‰ˆ Technical Analysis é©åº¦èª¿æ•´ */\r\n    min-height: 380px;\r\n  }\r\n  \r\n  .widget-header h4 {\r\n    font-size: 0.9rem;\r\n  }\r\n  \r\n  .brief-section {\r\n    padding: 0.75rem;\r\n  }\r\n  \r\n  .brief-text {\r\n    font-size: 0.8rem;\r\n  }\r\n}\r\n\r\n/* æ¥µå°è¢å¹• (å°æ‰‹æ©Ÿ) - 480px ä»¥ä¸‹ */\r\n@media (max-width: 480px) {\r\n  .stock-card-pair {\r\n    padding: 0.75rem;\r\n  }\r\n  \r\n  .symbol-info .symbol {\r\n    font-size: 1.2rem;\r\n  }\r\n  \r\n  .exchange-tag,\r\n  .industry-tag {\r\n    font-size: 0.7rem;\r\n    padding: 0.2rem 0.4rem;\r\n  }\r\n  \r\n  .widgets-container {\r\n    gap: 0.75rem;\r\n  }\r\n  \r\n  .widget-overview {\r\n    height: 330px; /* å°è¢å¹•å°é½Šé«˜åº¦ */\r\n    min-height: 330px;\r\n  }\r\n  \r\n  .widget-technical {\r\n    height: 330px; /* å°è¢å¹• Technical Analysis é©åº¦èª¿æ•´ */\r\n    min-height: 330px;\r\n  }\r\n  \r\n  .widget-header {\r\n    padding: 0.5rem 0.75rem;\r\n  }\r\n  \r\n  .brief-section {\r\n    padding: 0.5rem;\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"toc-tree\">\r\n    <div\r\n      v-for=\"sectorNode in nodes\"\r\n      :key=\"sectorNode.id\"\r\n      class=\"tree-node sector-node\"\r\n    >\r\n      <!-- Sector Header - ç§»é™¤ details/summaryï¼Œç›´æ¥é¡¯ç¤º -->\r\n      <div class=\"tree-label sector-label\">\r\n        <span class=\"label-text\" :title=\"sectorNode.label\">{{ sectorNode.label }}</span>\r\n        <span class=\"item-count\">({{ getTotalSymbolCount(sectorNode) }})</span>\r\n      </div>\r\n      \r\n      <!-- Industry å’Œ Symbol ç›´æ¥é¡¯ç¤ºï¼Œä¸ä½¿ç”¨ details -->\r\n      <div class=\"tree-children\">\r\n        <div\r\n          v-for=\"industryNode in sectorNode.children\"\r\n          :key=\"industryNode.id\"\r\n          class=\"tree-node industry-node\"\r\n        >\r\n          <!-- Industry Header - ç§»é™¤ details/summaryï¼Œç›´æ¥é¡¯ç¤º -->\r\n          <div class=\"tree-label industry-label\">\r\n            <span class=\"label-text\" :title=\"industryNode.label\">{{ industryNode.label }}</span>\r\n            <span class=\"item-count\">({{ industryNode.children.length }})</span>\r\n          </div>\r\n          \r\n          <!-- Symbol åˆ—è¡¨ç›´æ¥é¡¯ç¤º -->\r\n          <div class=\"tree-children\">\r\n            <button\r\n              v-for=\"symbolNode in industryNode.children\"\r\n              :key=\"symbolNode.id\"\r\n              class=\"tree-node symbol-node\"\r\n              :class=\"{ 'is-active': symbolNode.symbol === activeSymbol }\"\r\n              :aria-current=\"symbolNode.symbol === activeSymbol ? 'location' : null\"\r\n              @click=\"onSymbolClick(symbolNode.symbol)\"\r\n              @keydown.enter=\"onSymbolClick(symbolNode.symbol)\"\r\n              @keydown.space.prevent=\"onSymbolClick(symbolNode.symbol)\"\r\n            >\r\n              <span class=\"symbol-text\" :title=\"symbolNode.label\">{{ symbolNode.label }}</span>\r\n              <span class=\"exchange-badge\">{{ symbolNode.metadata.exchange }}</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'TOCTree',\r\n  props: {\r\n    nodes: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    activeSymbol: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    searchQuery: {\r\n      type: String,\r\n      default: ''\r\n    }\r\n    // ç§»é™¤ expandedSections propï¼Œå› ç‚ºä¸å†éœ€è¦\r\n  },\r\n  emits: ['symbol-click'], // ç§»é™¤ toggle-section emit\r\n  methods: {\r\n    onSymbolClick(symbol) {\r\n      this.$emit('symbol-click', symbol)\r\n    },\r\n\r\n    getTotalSymbolCount(sectorNode) {\r\n      return sectorNode.children.reduce((total, industryNode) => {\r\n        return total + industryNode.children.length\r\n      }, 0)\r\n    }\r\n    // ç§»é™¤ onToggle å’Œ isSectionExpanded æ–¹æ³•\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.toc-tree {\r\n  font-size: 0.85rem;\r\n}\r\n\r\n.tree-node {\r\n  margin: 0;\r\n}\r\n\r\n/* Sector Styles - Level 0 */\r\n.sector-node {\r\n  margin-bottom: 0.25rem;\r\n}\r\n\r\n.sector-label {\r\n  font-weight: 600;\r\n  color: #333;\r\n  padding: 0.5rem 0.75rem;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  background: transparent;\r\n  border: none;\r\n  border-radius: 4px;\r\n  text-align: left;\r\n  width: 100%;\r\n  cursor: default; /* ç§»é™¤ pointer cursorï¼Œå› ç‚ºä¸å†å¯é»æ“Š */\r\n}\r\n\r\n/* Industry Styles - Level 1 */\r\n.industry-node {\r\n  margin-bottom: 0.125rem;\r\n}\r\n\r\n.industry-label {\r\n  font-weight: 500;\r\n  color: #495057;\r\n  padding: 0.375rem 0.75rem;\r\n  padding-left: 2rem; /* éšå±¤ç¸®æ’ - Level 1 */\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  background: transparent;\r\n  border: none;\r\n  border-radius: 3px;\r\n  text-align: left;\r\n  width: 100%;\r\n  cursor: default; /* ç§»é™¤ pointer cursorï¼Œå› ç‚ºä¸å†å¯é»æ“Š */\r\n}\r\n\r\n/* Symbol Styles - Level 2 */\r\n.symbol-node {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  width: 100%;\r\n  padding: 0.375rem 0.75rem;\r\n  padding-left: 3.25rem; /* éšå±¤ç¸®æ’ - Level 2 */\r\n  margin-bottom: 0.0625rem;\r\n  background: transparent;\r\n  border: none;\r\n  border-radius: 3px;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n  text-align: left;\r\n  font-size: 0.8rem;\r\n}\r\n\r\n.symbol-node:hover {\r\n  background: #e7f3ff;\r\n}\r\n\r\n.symbol-node.is-active {\r\n  background: #007bff;\r\n  color: white;\r\n  font-weight: 500;\r\n}\r\n\r\n.symbol-node.is-active .exchange-badge {\r\n  background: rgba(255, 255, 255, 0.2);\r\n  color: white;\r\n  border-color: rgba(255, 255, 255, 0.3);\r\n}\r\n\r\n/* Text Content Styles */\r\n.label-text {\r\n  flex: 1;\r\n  min-width: 0; /* å…è¨±æ–‡å­—æ”¶ç¸® */\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n  margin-right: 0.5rem;\r\n}\r\n\r\n.symbol-text {\r\n  flex: 1;\r\n  min-width: 0;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n  font-weight: 500;\r\n  margin-right: 0.5rem;\r\n}\r\n\r\n.exchange-badge {\r\n  font-size: 0.7rem;\r\n  padding: 0.125rem 0.25rem;\r\n  background: #e9ecef;\r\n  color: #495057;\r\n  border: 1px solid #ced4da;\r\n  border-radius: 2px;\r\n  font-weight: 400;\r\n  flex-shrink: 0; /* é˜²æ­¢ badge è¢«å£“ç¸® */\r\n}\r\n\r\n.item-count {\r\n  font-size: 0.75rem;\r\n  color: #6c757d;\r\n  font-weight: 400;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.tree-children {\r\n  margin-top: 0.125rem;\r\n}\r\n\r\n/* Focus styles for accessibility */\r\n.symbol-node:focus {\r\n  outline: 2px solid #007bff;\r\n  outline-offset: 1px;\r\n}\r\n\r\n/* Reduced motion support */\r\n@media (prefers-reduced-motion: reduce) {\r\n  .symbol-node {\r\n    transition: none;\r\n  }\r\n}\r\n\r\n/* Responsive adjustments */\r\n@media (max-width: 320px) {\r\n  .industry-label {\r\n    padding-left: 1.5rem; /* æ¸›å°‘å°è¢å¹•çš„ç¸®æ’ */\r\n  }\r\n  \r\n  .symbol-node {\r\n    padding-left: 2.5rem;\r\n  }\r\n  \r\n  .label-text,\r\n  .symbol-text {\r\n    font-size: 0.75rem;\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"navigation-panel\" :class=\"{ 'is-visible': isVisible }\">\r\n    <div class=\"panel-header\">\r\n      <h3>Quick Navigation</h3>\r\n      <div class=\"search-container\">\r\n        <input\r\n          v-model=\"localSearchQuery\"\r\n          type=\"text\"\r\n          placeholder=\"Search stocks, sectors, industries...\"\r\n          class=\"search-input\"\r\n          aria-label=\"Search stocks\"\r\n          @input=\"onSearchChange\"\r\n        />\r\n        <span class=\"search-icon\">ğŸ”</span>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"panel-content\">\r\n      <TOCTree\r\n        :nodes=\"filteredTocTree\"\r\n        :active-symbol=\"activeSymbol\"\r\n        :search-query=\"localSearchQuery\"\r\n        @symbol-click=\"onSymbolClick\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport TOCTree from './TOCTree.vue'\r\n\r\nexport default {\r\n  name: 'NavigationPanel',\r\n  components: {\r\n    TOCTree\r\n  },\r\n  props: {\r\n    tocTree: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    activeSymbol: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    searchQuery: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    isVisible: {\r\n      type: Boolean,\r\n      default: true\r\n    }\r\n    // ç§»é™¤ expandedSections prop\r\n  },\r\n  emits: ['symbol-click', 'search-change'], // ç§»é™¤ toggle-section emit\r\n  data() {\r\n    return {\r\n      localSearchQuery: this.searchQuery\r\n    }\r\n  },\r\n  computed: {\r\n    filteredTocTree() {\r\n      if (!this.localSearchQuery.trim()) {\r\n        return this.tocTree\r\n      }\r\n\r\n      const query = this.localSearchQuery.toLowerCase().trim()\r\n      \r\n      return this.tocTree.map(sectorNode => {\r\n        const filteredSector = { ...sectorNode, children: [] }\r\n        \r\n        sectorNode.children.forEach(industryNode => {\r\n          const filteredIndustry = { ...industryNode, children: [] }\r\n          \r\n          industryNode.children.forEach(symbolNode => {\r\n            // æœå°‹åŒ¹é…ï¼šsector, industry, symbol, company name\r\n            const matches = [\r\n              sectorNode.label,\r\n              industryNode.label,\r\n              symbolNode.label,\r\n              symbolNode.symbol\r\n            ].some(text => text.toLowerCase().includes(query))\r\n            \r\n            if (matches) {\r\n              filteredIndustry.children.push(symbolNode)\r\n            }\r\n          })\r\n          \r\n          if (filteredIndustry.children.length > 0) {\r\n            filteredSector.children.push(filteredIndustry)\r\n          }\r\n        })\r\n        \r\n        return filteredSector.children.length > 0 ? filteredSector : null\r\n      }).filter(Boolean)\r\n    }\r\n  },\r\n  watch: {\r\n    searchQuery(newValue) {\r\n      this.localSearchQuery = newValue\r\n    }\r\n  },\r\n  methods: {\r\n    onSymbolClick(symbol) {\r\n      this.$emit('symbol-click', symbol)\r\n    },\r\n\r\n    onSearchChange() {\r\n      this.$emit('search-change', this.localSearchQuery)\r\n    }\r\n    // ç§»é™¤ onToggleSection æ–¹æ³•\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.navigation-panel {\r\n  position: sticky;\r\n  top: 80px; /* Account for header height */\r\n  height: calc(100vh - 100px);\r\n  width: 350px; /* å¾ 300px å¢åŠ åˆ° 350px */\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.panel-header {\r\n  padding: 1rem;\r\n  border-bottom: 1px solid #e9ecef;\r\n  background: #f8f9fa;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.panel-header h3 {\r\n  margin: 0 0 0.75rem 0;\r\n  font-size: 1rem;\r\n  font-weight: 600;\r\n  color: #333;\r\n}\r\n\r\n.search-container {\r\n  position: relative;\r\n}\r\n\r\n.search-input {\r\n  width: 100%;\r\n  padding: 0.5rem 2rem 0.5rem 0.75rem;\r\n  border: 1px solid #ddd;\r\n  border-radius: 6px;\r\n  font-size: 0.85rem;\r\n  background: white;\r\n  transition: border-color 0.2s;\r\n}\r\n\r\n.search-input:focus {\r\n  outline: none;\r\n  border-color: #007bff;\r\n  box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.1);\r\n}\r\n\r\n.search-icon {\r\n  position: absolute;\r\n  right: 0.75rem;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  color: #666;\r\n  pointer-events: none;\r\n}\r\n\r\n.panel-content {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  padding: 0.5rem;\r\n}\r\n\r\n/* éŸ¿æ‡‰å¼è¨­è¨ˆ */\r\n@media (max-width: 1023px) {\r\n  .navigation-panel {\r\n    display: none;\r\n  }\r\n}\r\n\r\n/* æ»¾å‹•æ¢æ¨£å¼ */\r\n.panel-content::-webkit-scrollbar {\r\n  width: 6px;\r\n}\r\n\r\n.panel-content::-webkit-scrollbar-track {\r\n  background: #f1f1f1;\r\n  border-radius: 3px;\r\n}\r\n\r\n.panel-content::-webkit-scrollbar-thumb {\r\n  background: #c1c1c1;\r\n  border-radius: 3px;\r\n}\r\n\r\n.panel-content::-webkit-scrollbar-thumb:hover {\r\n  background: #a8a8a8;\r\n}\r\n</style>","/**\r\n * NavigationService - è™•ç† Stock Overview é é¢å…§çš„å°è¦½åŠŸèƒ½\r\n * ä½¿ç”¨ç´” DOM scroll é¿å…èˆ‡ Hash Router è¡çª\r\n */\r\nexport class NavigationService {\r\n  constructor() {\r\n    this.headerOffset = 80 // é è¨­ header é«˜åº¦\r\n  }\r\n\r\n  /**\r\n   * æ»¾å‹•åˆ°æŒ‡å®šçš„è‚¡ç¥¨ symbol\r\n   * @param {string} symbol - è‚¡ç¥¨ä»£ç¢¼\r\n   * @param {boolean} smooth - æ˜¯å¦ä½¿ç”¨å¹³æ»‘æ»¾å‹•\r\n   * @returns {Promise<void>}\r\n   */\r\n  async scrollToSymbol(symbol, smooth = true) {\r\n    try {\r\n      const sanitizedSymbol = this.sanitizeSymbol(symbol)\r\n      const targetId = `sym-${sanitizedSymbol}`\r\n      const targetElement = document.getElementById(targetId)\r\n\r\n      if (!targetElement) {\r\n        console.warn(`NavigationService: Element with ID \"${targetId}\" not found for symbol \"${symbol}\"`)\r\n        return\r\n      }\r\n\r\n      // æª¢æŸ¥ prefers-reduced-motion è¨­å®š\r\n      const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches\r\n      \r\n      // è¨ˆç®—æ»¾å‹•ä½ç½®ï¼Œè€ƒæ…® sticky header\r\n      const elementTop = targetElement.offsetTop\r\n      const scrollTop = elementTop - this.getHeaderOffset()\r\n      const currentScrollTop = window.pageYOffset\r\n      const scrollDistance = Math.abs(scrollTop - currentScrollTop)\r\n      \r\n      // è·é›¢æ„ŸçŸ¥æ»¾å‹•ï¼šè¶…é 2 å€‹ viewport é«˜åº¦ä½¿ç”¨ç¬ç§»\r\n      const viewportHeight = window.innerHeight\r\n      const distanceThreshold = viewportHeight * 2\r\n      const shouldUseInstant = scrollDistance > distanceThreshold || prefersReducedMotion\r\n      const shouldUseSmooth = smooth && !shouldUseInstant\r\n\r\n      console.log(`NavigationService: Scroll distance ${scrollDistance}px, threshold ${distanceThreshold}px, using ${shouldUseSmooth ? 'smooth' : 'instant'} scroll`)\r\n\r\n      // åŸ·è¡Œæ»¾å‹•\r\n      window.scrollTo({\r\n        top: Math.max(0, scrollTop),\r\n        behavior: shouldUseSmooth ? 'smooth' : 'instant'\r\n      })\r\n\r\n      // ç­‰å¾…æ»¾å‹•å®Œæˆå¾Œè¨­å®š focusï¼ˆæå‡ç„¡éšœç¤™æ€§ï¼‰\r\n      if (shouldUseSmooth) {\r\n        // å¹³æ»‘æ»¾å‹•éœ€è¦ç­‰å¾…\r\n        await this.waitForScrollComplete()\r\n      }\r\n\r\n      // è¨­å®š focus åˆ°ç›®æ¨™å…ƒç´ \r\n      targetElement.focus({ preventScroll: true })\r\n\r\n      console.log(`NavigationService: Scrolled to symbol \"${symbol}\" (ID: ${targetId}) using ${shouldUseSmooth ? 'smooth' : 'instant'} behavior`)\r\n    } catch (error) {\r\n      console.error('NavigationService: Error scrolling to symbol:', error)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * æ¸…ç† symbol ç‚ºæœ‰æ•ˆçš„ DOM ID\r\n   * @param {string} symbol - åŸå§‹ symbol\r\n   * @returns {string} æ¸…ç†å¾Œçš„ symbol\r\n   */\r\n  sanitizeSymbol(symbol) {\r\n    return symbol.replace(/[^a-zA-Z0-9]/g, '_')\r\n  }\r\n\r\n  /**\r\n   * æ›´æ–° URL query åƒæ•¸\r\n   * @param {string} symbol - è‚¡ç¥¨ä»£ç¢¼\r\n   */\r\n  updateQueryParam(symbol) {\r\n    try {\r\n      const url = new URL(window.location)\r\n      \r\n      if (symbol) {\r\n        url.searchParams.set('focus', symbol)\r\n      } else {\r\n        url.searchParams.delete('focus')\r\n      }\r\n\r\n      // ä½¿ç”¨ replaceState é¿å…å½±éŸ¿ç€è¦½å™¨æ­·å²\r\n      window.history.replaceState(null, '', url.toString())\r\n      \r\n      console.log(`NavigationService: Updated URL query param to focus=${symbol}`)\r\n    } catch (error) {\r\n      console.error('NavigationService: Error updating query param:', error)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * å¾ URL query åƒæ•¸è®€å– focus symbol\r\n   * @returns {string|null} focus symbol æˆ– null\r\n   */\r\n  getFocusSymbolFromQuery() {\r\n    try {\r\n      const url = new URL(window.location)\r\n      return url.searchParams.get('focus')\r\n    } catch (error) {\r\n      console.error('NavigationService: Error reading query param:', error)\r\n      return null\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ç²å–ç•¶å‰ header é«˜åº¦\r\n   * @returns {number} header é«˜åº¦ï¼ˆåƒç´ ï¼‰\r\n   */\r\n  getHeaderOffset() {\r\n    try {\r\n      // å˜—è©¦å‹•æ…‹è¨ˆç®— header é«˜åº¦\r\n      const header = document.querySelector('header, .header, .navbar, .app-header')\r\n      if (header) {\r\n        const rect = header.getBoundingClientRect()\r\n        return rect.height + 20 // é¡å¤– 20px é–“è·\r\n      }\r\n    } catch (error) {\r\n      console.warn('NavigationService: Could not calculate header height:', error)\r\n    }\r\n    \r\n    return this.headerOffset // ä½¿ç”¨é è¨­å€¼\r\n  }\r\n\r\n  /**\r\n   * ç­‰å¾…å¹³æ»‘æ»¾å‹•å®Œæˆ\r\n   * @returns {Promise<void>}\r\n   */\r\n  waitForScrollComplete() {\r\n    return new Promise(resolve => {\r\n      let lastScrollTop = window.pageYOffset\r\n      let scrollEndTimer = null\r\n\r\n      const checkScrollEnd = () => {\r\n        const currentScrollTop = window.pageYOffset\r\n        \r\n        if (Math.abs(currentScrollTop - lastScrollTop) < 1) {\r\n          // æ»¾å‹•å·²åœæ­¢\r\n          clearTimeout(scrollEndTimer)\r\n          resolve()\r\n        } else {\r\n          // æ»¾å‹•ä»åœ¨é€²è¡Œ\r\n          lastScrollTop = currentScrollTop\r\n          scrollEndTimer = setTimeout(checkScrollEnd, 50)\r\n        }\r\n      }\r\n\r\n      // é–‹å§‹æª¢æŸ¥\r\n      scrollEndTimer = setTimeout(checkScrollEnd, 50)\r\n      \r\n      // æœ€å¤§ç­‰å¾…æ™‚é–“ 2 ç§’\r\n      setTimeout(resolve, 2000)\r\n    })\r\n  }\r\n\r\n  /**\r\n   * é©—è­‰ symbol æ˜¯å¦å­˜åœ¨æ–¼é é¢ä¸­\r\n   * @param {string} symbol - è‚¡ç¥¨ä»£ç¢¼\r\n   * @returns {boolean} æ˜¯å¦å­˜åœ¨\r\n   */\r\n  isSymbolValid(symbol) {\r\n    const sanitizedSymbol = this.sanitizeSymbol(symbol)\r\n    const targetId = `sym-${sanitizedSymbol}`\r\n    return document.getElementById(targetId) !== null\r\n  }\r\n}\r\n\r\n// å‰µå»ºå–®ä¾‹å¯¦ä¾‹\r\nexport const navigationService = new NavigationService()","/**\r\n * ScrollSpyService - ä½¿ç”¨ IntersectionObserver ç›£æ§ StockCard å¯è¦‹æ€§\r\n * æä¾›é«˜æ•ˆèƒ½çš„ ScrollSpy åŠŸèƒ½\r\n */\r\nexport class ScrollSpyService {\r\n  constructor() {\r\n    this.observer = null\r\n    this.callback = null\r\n    this.observedElements = new Map() // element -> symbol mapping\r\n    this.isActive = false\r\n    \r\n    // IntersectionObserver é…ç½®\r\n    this.observerOptions = {\r\n      root: null, // ä½¿ç”¨ viewport\r\n      rootMargin: '-80px 0px -50% 0px', // è€ƒæ…® header é«˜åº¦å’Œä¸­å¿ƒä½ç½®\r\n      threshold: [0, 0.1, 0.25, 0.5, 0.75, 1.0] // å¤šå€‹é–¾å€¼ä»¥ç²å¾—æ›´ç²¾ç¢ºçš„äº¤é›†æ¯”ä¾‹\r\n    }\r\n  }\r\n\r\n  /**\r\n   * åˆå§‹åŒ– ScrollSpy æœå‹™\r\n   * @param {Element[]} elements - è¦ç›£æ§çš„ StockCard å…ƒç´ \r\n   * @param {Function} callback - ç•¶ active symbol è®Šæ›´æ™‚çš„å›èª¿å‡½æ•¸\r\n   */\r\n  setup(elements, callback) {\r\n    try {\r\n      this.cleanup() // æ¸…ç†ç¾æœ‰çš„ observer\r\n      \r\n      this.callback = callback\r\n      this.observedElements.clear()\r\n\r\n      // å‰µå»º IntersectionObserver\r\n      this.observer = new IntersectionObserver(\r\n        this.handleIntersection.bind(this),\r\n        this.observerOptions\r\n      )\r\n\r\n      // é–‹å§‹è§€å¯Ÿæ‰€æœ‰å…ƒç´ \r\n      elements.forEach(element => {\r\n        const symbol = element.dataset.symbol\r\n        if (symbol) {\r\n          this.observedElements.set(element, symbol)\r\n          this.observer.observe(element)\r\n        }\r\n      })\r\n\r\n      this.isActive = true\r\n      console.log(`ScrollSpyService: Started observing ${elements.length} elements`)\r\n    } catch (error) {\r\n      console.error('ScrollSpyService: Error setting up observer:', error)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * è™•ç† IntersectionObserver å›èª¿\r\n   * @param {IntersectionObserverEntry[]} entries - äº¤é›†è®Šæ›´æ¢ç›®\r\n   */\r\n  handleIntersection(entries) {\r\n    if (!this.isActive || !this.callback) return\r\n\r\n    try {\r\n      // æ”¶é›†æ‰€æœ‰å¯è¦‹çš„å…ƒç´ åŠå…¶äº¤é›†æ¯”ä¾‹\r\n      const visibleElements = []\r\n      \r\n      entries.forEach(entry => {\r\n        const symbol = this.observedElements.get(entry.target)\r\n        if (symbol && entry.isIntersecting) {\r\n          visibleElements.push({\r\n            element: entry.target,\r\n            symbol: symbol,\r\n            intersectionRatio: entry.intersectionRatio,\r\n            boundingClientRect: entry.boundingClientRect\r\n          })\r\n        }\r\n      })\r\n\r\n      // å¦‚æœæ²’æœ‰å¯è¦‹å…ƒç´ ï¼Œä¸æ›´æ–° active symbol\r\n      if (visibleElements.length === 0) return\r\n\r\n      // æ‰¾å‡ºæœ€ä½³çš„ active symbol\r\n      const activeSymbol = this.determineActiveSymbol(visibleElements)\r\n      \r\n      if (activeSymbol) {\r\n        // ä½¿ç”¨ debounce é¿å…éåº¦é »ç¹çš„å›èª¿\r\n        this.debouncedCallback(activeSymbol)\r\n      }\r\n    } catch (error) {\r\n      console.error('ScrollSpyService: Error handling intersection:', error)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ç¢ºå®šç•¶å‰çš„ active symbol\r\n   * @param {Object[]} visibleElements - å¯è¦‹å…ƒç´ åˆ—è¡¨\r\n   * @returns {string|null} active symbol\r\n   */\r\n  determineActiveSymbol(visibleElements) {\r\n    if (visibleElements.length === 0) return null\r\n    if (visibleElements.length === 1) return visibleElements[0].symbol\r\n\r\n    // å¤šå€‹å…ƒç´ å¯è¦‹æ™‚ï¼Œé¸æ“‡æœ€ä½³çš„ä¸€å€‹\r\n    // å„ªå…ˆç´šï¼š1. äº¤é›†æ¯”ä¾‹æœ€é«˜ 2. è·é›¢è¦–çª—ä¸­å¿ƒæœ€è¿‘\r\n    const viewportHeight = window.innerHeight\r\n    const viewportCenter = viewportHeight / 2\r\n\r\n    let bestElement = visibleElements[0]\r\n    let bestScore = this.calculateElementScore(bestElement, viewportCenter)\r\n\r\n    for (let i = 1; i < visibleElements.length; i++) {\r\n      const element = visibleElements[i]\r\n      const score = this.calculateElementScore(element, viewportCenter)\r\n      \r\n      if (score > bestScore) {\r\n        bestElement = element\r\n        bestScore = score\r\n      }\r\n    }\r\n\r\n    return bestElement.symbol\r\n  }\r\n\r\n  /**\r\n   * è¨ˆç®—å…ƒç´ çš„è©•åˆ†ï¼ˆç”¨æ–¼ç¢ºå®šæœ€ä½³ active elementï¼‰\r\n   * @param {Object} elementInfo - å…ƒç´ è³‡è¨Š\r\n   * @param {number} viewportCenter - è¦–çª—ä¸­å¿ƒä½ç½®\r\n   * @returns {number} è©•åˆ†\r\n   */\r\n  calculateElementScore(elementInfo, viewportCenter) {\r\n    const { intersectionRatio, boundingClientRect } = elementInfo\r\n    \r\n    // å…ƒç´ ä¸­å¿ƒä½ç½®\r\n    const elementCenter = boundingClientRect.top + (boundingClientRect.height / 2)\r\n    \r\n    // è·é›¢è¦–çª—ä¸­å¿ƒçš„è·é›¢ï¼ˆè¶Šè¿‘è¶Šå¥½ï¼‰\r\n    const distanceFromCenter = Math.abs(elementCenter - viewportCenter)\r\n    const maxDistance = viewportCenter // æœ€å¤§å¯èƒ½è·é›¢\r\n    const centerScore = 1 - (distanceFromCenter / maxDistance)\r\n    \r\n    // ç¶œåˆè©•åˆ†ï¼šäº¤é›†æ¯”ä¾‹ (70%) + ä¸­å¿ƒè·é›¢ (30%)\r\n    return (intersectionRatio * 0.7) + (centerScore * 0.3)\r\n  }\r\n\r\n  /**\r\n   * é˜²æŠ–å›èª¿å‡½æ•¸\r\n   * @param {string} symbol - active symbol\r\n   */\r\n  debouncedCallback(symbol) {\r\n    if (this.debounceTimer) {\r\n      clearTimeout(this.debounceTimer)\r\n    }\r\n    \r\n    this.debounceTimer = setTimeout(() => {\r\n      if (this.callback && this.isActive) {\r\n        this.callback(symbol)\r\n      }\r\n    }, 100) // 100ms é˜²æŠ–\r\n  }\r\n\r\n  /**\r\n   * æ›´æ–° active symbolï¼ˆæ‰‹å‹•è§¸ç™¼ï¼‰\r\n   * @param {string} symbol - è¦è¨­ç‚º active çš„ symbol\r\n   */\r\n  updateActiveSymbol(symbol) {\r\n    if (this.callback && this.isActive) {\r\n      this.callback(symbol)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * é‡æ–°æƒææ‰€æœ‰å…ƒç´ ä¸¦æ›´æ–° active symbol\r\n   */\r\n  refresh() {\r\n    if (!this.observer || !this.isActive) return\r\n\r\n    try {\r\n      // è§¸ç™¼é‡æ–°æª¢æŸ¥æ‰€æœ‰è§€å¯Ÿçš„å…ƒç´ \r\n      const elements = Array.from(this.observedElements.keys())\r\n      const visibleElements = []\r\n\r\n      elements.forEach(element => {\r\n        const rect = element.getBoundingClientRect()\r\n        const symbol = this.observedElements.get(element)\r\n        \r\n        // æª¢æŸ¥å…ƒç´ æ˜¯å¦åœ¨è¦–çª—å…§\r\n        if (rect.top < window.innerHeight && rect.bottom > 0 && symbol) {\r\n          const intersectionRatio = this.calculateIntersectionRatio(rect)\r\n          if (intersectionRatio > 0) {\r\n            visibleElements.push({\r\n              element,\r\n              symbol,\r\n              intersectionRatio,\r\n              boundingClientRect: rect\r\n            })\r\n          }\r\n        }\r\n      })\r\n\r\n      const activeSymbol = this.determineActiveSymbol(visibleElements)\r\n      if (activeSymbol) {\r\n        this.updateActiveSymbol(activeSymbol)\r\n      }\r\n    } catch (error) {\r\n      console.error('ScrollSpyService: Error refreshing:', error)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * è¨ˆç®—å…ƒç´ çš„äº¤é›†æ¯”ä¾‹\r\n   * @param {DOMRect} rect - å…ƒç´ çš„ bounding rect\r\n   * @returns {number} äº¤é›†æ¯”ä¾‹ (0-1)\r\n   */\r\n  calculateIntersectionRatio(rect) {\r\n    const viewportHeight = window.innerHeight\r\n    const headerOffset = 80 // è€ƒæ…® header é«˜åº¦\r\n    \r\n    const visibleTop = Math.max(rect.top, headerOffset)\r\n    const visibleBottom = Math.min(rect.bottom, viewportHeight)\r\n    const visibleHeight = Math.max(0, visibleBottom - visibleTop)\r\n    \r\n    return visibleHeight / rect.height\r\n  }\r\n\r\n  /**\r\n   * æ¸…ç† ScrollSpy æœå‹™\r\n   */\r\n  cleanup() {\r\n    try {\r\n      if (this.observer) {\r\n        this.observer.disconnect()\r\n        this.observer = null\r\n      }\r\n      \r\n      if (this.debounceTimer) {\r\n        clearTimeout(this.debounceTimer)\r\n        this.debounceTimer = null\r\n      }\r\n      \r\n      this.observedElements.clear()\r\n      this.callback = null\r\n      this.isActive = false\r\n      \r\n      console.log('ScrollSpyService: Cleaned up')\r\n    } catch (error) {\r\n      console.error('ScrollSpyService: Error during cleanup:', error)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * æš«åœ ScrollSpy æœå‹™\r\n   */\r\n  pause() {\r\n    this.isActive = false\r\n  }\r\n\r\n  /**\r\n   * æ¢å¾© ScrollSpy æœå‹™\r\n   */\r\n  resume() {\r\n    this.isActive = true\r\n    this.refresh() // ç«‹å³åˆ·æ–°ç‹€æ…‹\r\n  }\r\n}\r\n\r\n// å‰µå»ºå–®ä¾‹å¯¦ä¾‹\r\nexport const scrollSpyService = new ScrollSpyService()","<template>\r\n  <div class=\"stock-overview\">\r\n    <div class=\"stock-header\">\r\n      <h2>Stock Overview</h2>\r\n      <div class=\"header-right\">\r\n        <div class=\"update-info\" v-if=\"lastUpdate\">\r\n          <span class=\"text-muted\">Last updated: {{ formatTime(lastUpdate) }}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \r\n    <p class=\"text-muted mb-3\">Stock universe overview and analysis</p>\r\n\r\n    <div v-if=\"loading\" class=\"loading\">\r\n      <div class=\"spinner\"></div>\r\n      <p>Loading stock data...</p>\r\n    </div>\r\n\r\n    <div v-else-if=\"error\" class=\"error\">\r\n      <p class=\"text-danger\">{{ error }}</p>\r\n      <button @click=\"refresh\" class=\"btn btn-secondary\">Retry</button>\r\n    </div>\r\n\r\n    <div v-else class=\"main-layout\">\r\n      <!-- Navigation Panel (Desktop) -->\r\n      <NavigationPanel\r\n        :toc-tree=\"tocTree\"\r\n        :active-symbol=\"activeSymbol\"\r\n        :search-query=\"searchQuery\"\r\n        :is-visible=\"true\"\r\n        @symbol-click=\"onSymbolClick\"\r\n        @search-change=\"onSearchChange\"\r\n        class=\"navigation-sidebar\"\r\n      />\r\n\r\n      <!-- Main Content -->\r\n      <div class=\"main-content\">\r\n        <!-- Market Index Section -->\r\n        <div class=\"widget-container-ticker\">\r\n          <div class=\"widget-header\">\r\n            <h3>Market Index</h3>\r\n          </div>\r\n          <LazyTradingViewWidget\r\n            widget-type=\"Market Index\"\r\n            :config=\"tickersConfig\"\r\n            script-url=\"https://s3.tradingview.com/external-embedding/embed-widget-tickers.js\"\r\n            height=\"100px\"\r\n            :priority=\"1\"\r\n          />\r\n        </div>\r\n        \r\n        <!-- Sector Groups -->\r\n        <div class=\"sector-groups\">\r\n          <div \r\n            v-for=\"(group, sector) in groupedStocks\" \r\n            :key=\"sector\"\r\n            class=\"sector-group\"\r\n          >\r\n            <h4 class=\"sector-title\">\r\n              {{ sector }}\r\n              <span class=\"stock-count\">({{ group.length }})</span>\r\n            </h4>\r\n            \r\n            <div class=\"stocks-in-group\">\r\n              <StockCard\r\n                v-for=\"stock in group\"\r\n                :key=\"stock.quote.symbol\"\r\n                :quote=\"stock.quote\"\r\n                :daily-data=\"stock.dailyData\"\r\n                :metadata=\"stock.metadata\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-if=\"!loading && Object.keys(groupedStocks).length === 0\" class=\"no-data\">\r\n      <p>No stock data available</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { stocksConfig } from '@/utils/stocksConfigService'\r\nimport StockCard from './StockCard.vue'\r\nimport LazyTradingViewWidget from './LazyTradingViewWidget.vue'\r\nimport NavigationPanel from './NavigationPanel.vue'\r\nimport { navigationService } from '@/services/NavigationService.js'\r\nimport { scrollSpyService } from '@/services/ScrollSpyService.js'\r\n\r\nexport default {\r\n  name: 'StockOverview',\r\n  components: {\r\n    StockCard,\r\n    LazyTradingViewWidget,\r\n    NavigationPanel\r\n  },\r\n  data() {\r\n    return {\r\n      quotes: [],\r\n      dailyData: null,\r\n      metadata: null,\r\n      loading: false,\r\n      error: null,\r\n      lastUpdate: null,\r\n      configuredSymbols: [],\r\n      // Navigation state\r\n      activeSymbol: '',\r\n      searchQuery: ''\r\n      // ç§»é™¤ expandedSectionsï¼Œå› ç‚ºä¸å†éœ€è¦å±•é–‹/æ”¶åˆåŠŸèƒ½\r\n    }\r\n  },\r\n  computed: {\r\n    tickersConfig() {\r\n      return {\r\n        \"symbols\": [\r\n          {\"proName\": \"FOREXCOM:SPXUSD\",\"title\": \"S&P 500 Index\"},\r\n          {\"proName\": \"NASDAQ:NDX\",\"title\": \"NASDAQ 100 Index\"},\r\n          {\"proName\": \"OPOFINANCE:DJIUSD\",\"title\": \"Dow Jone Index\"},\r\n          {\"proName\": \"CAPITALCOM:RTY\",\"title\": \"US Russel 2000\"},\r\n          {\"proName\": \"INDEX:BTCUSD\",\"title\": \"BTC\"},\r\n          {\"proName\": \"TVC:GOLD\",\"title\": \"GOLD\"}\r\n        ],\r\n        \"colorTheme\": \"light\",\r\n        \"locale\": \"en\",\r\n        \"largeChartUrl\": \"\",\r\n        \"isTransparent\": true,\r\n        \"showSymbolLogo\": true\r\n      }\r\n    },\r\n\r\n    groupedStocks() {\r\n      if (!this.quotes.length || !this.metadata) {\r\n        return {}\r\n      }\r\n      \r\n      const groups = {}\r\n      \r\n      this.quotes.forEach(quote => {\r\n        const symbolMetadata = this.metadata.items.find(m => m.symbol === quote.symbol)\r\n        const symbolDailyData = this.dailyData?.per_symbol?.find(d => d.symbol === quote.symbol)\r\n        \r\n        let sector = 'Unknown'\r\n        if (symbolMetadata && symbolMetadata.confidence >= 0.7) {\r\n          sector = symbolMetadata.sector || 'Unknown'\r\n        }\r\n        \r\n        if (!groups[sector]) {\r\n          groups[sector] = []\r\n        }\r\n        \r\n        groups[sector].push({\r\n          quote,\r\n          dailyData: symbolDailyData,\r\n          metadata: symbolMetadata\r\n        })\r\n      })\r\n      \r\n      // è‡ªè¨‚ Sector æ’åºé †åº\r\n      const sectorPriority = [\r\n        'Technology',\r\n        'Financial Services',\r\n        'Consumer Cyclical',\r\n        'Communication Services',\r\n        'Healthcare',\r\n        'Industrials',\r\n        'Consumer Defensive',\r\n        'Energy',\r\n        'Basic Materials',\r\n        'Real Estate',\r\n        'Utilities'\r\n      ]\r\n      \r\n      // è‡ªè¨‚ Industry æ’åºé †åº (æŒ‰ sector åˆ†çµ„)\r\n      const industryPriority = {\r\n        'Technology': [\r\n          'Semiconductors',\r\n          'Software - Infrastructure',\r\n          'Consumer Electronics',\r\n          'Software - Application',\r\n          'Information Technology Services',\r\n          'Semiconductor Equipment & Materials',\r\n          'Communication Equipment',\r\n          'Computer Hardware',\r\n          'Electronic Components',\r\n          'Scientific & Technical Instruments',\r\n          'Solar',\r\n          'Electronics & Computer Distribution'\r\n        ],\r\n        'Financial Services': [\r\n          'Banks - Diversified',\r\n          'Credit Services',\r\n          'Asset Management',\r\n          'Capital Markets',\r\n          'Insurance - Diversified',\r\n          'Banks - Regional',\r\n          'Financial Data & Stock Exchanges',\r\n          'Insurance - Property & Casualty',\r\n          'Insurance Brokers',\r\n          'Insurance - Life',\r\n          'Insurance - Specialty',\r\n          'Mortgage Finance',\r\n          'Insurance - Reinsurance',\r\n          'Financial Conglomerates',\r\n          'Shell Companies'\r\n        ],\r\n        'Consumer Cyclical': [\r\n          'Internet Retail',\r\n          'Auto Manufacturers',\r\n          'Restaurants',\r\n          'Home Improvement Retail',\r\n          'Travel Services',\r\n          'Apparel Retail',\r\n          'Auto Parts',\r\n          'Specialty Retail',\r\n          'Lodging',\r\n          'Residential Construction',\r\n          'Auto & Truck Dealerships',\r\n          'Packaging & Containers',\r\n          'Footwear & Accessories',\r\n          'Resorts & Casinos',\r\n          'Gambling',\r\n          'Leisure',\r\n          'Apparel Manufacturing',\r\n          'Furnishings, Fixtures & Appliances',\r\n          'Personal Services',\r\n          'Luxury Goods',\r\n          'Recreational Vehicles',\r\n          'Department Stores',\r\n          'Education & Training Services'\r\n        ],\r\n        'Communication Services': [\r\n          'Internet Content & Information',\r\n          'Telecom Services',\r\n          'Entertainment',\r\n          'Advertising Agencies',\r\n          'Electronic Gaming & Multimedia',\r\n          'Publishing',\r\n          'Broadcasting'\r\n        ],\r\n        'Healthcare': [\r\n          'Drug Manufacturers - General',\r\n          'Biotechnology',\r\n          'Medical Devices',\r\n          'Diagnostics & Research',\r\n          'Healthcare Plans',\r\n          'Medical Instruments & Supplies',\r\n          'Medical Distribution',\r\n          'Medical Care Facilities',\r\n          'Drug Manufacturers - Specialty & Generic',\r\n          'Health Information Services',\r\n          'Pharmaceutical Retailers'\r\n        ],\r\n        'Industrials': [\r\n          'Aerospace & Defense',\r\n          'Specialty Industrial Machinery',\r\n          'Farm & Heavy Construction Machinery',\r\n          'Railroads',\r\n          'Engineering & Construction',\r\n          'Building Products & Equipment',\r\n          'Specialty Business Services',\r\n          'Waste Management',\r\n          'Industrial Distribution',\r\n          'Conglomerates',\r\n          'Integrated Freight & Logistics',\r\n          'Electrical Equipment & Parts',\r\n          'Rental & Leasing Services',\r\n          'Airlines',\r\n          'Trucking',\r\n          'Consulting Services',\r\n          'Tools & Accessories',\r\n          'Metal Fabrication',\r\n          'Pollution & Treatment Controls',\r\n          'Security & Protection Services',\r\n          'Marine Shipping',\r\n          'Airports & Air Services',\r\n          'Staffing & Employment Services',\r\n          'Business Equipment & Supplies',\r\n          'Infrastructure Operations'\r\n        ],\r\n        'Consumer Defensive': [\r\n          'Discount Stores',\r\n          'Beverages - Non-Alcoholic',\r\n          'Household & Personal Products',\r\n          'Tobacco',\r\n          'Packaged Foods',\r\n          'Confectioners',\r\n          'Farm Products',\r\n          'Food Distribution',\r\n          'Grocery Stores',\r\n          'Education & Training Services',\r\n          'Beverages - Brewers',\r\n          'Beverages - Wineries & Distilleries'\r\n        ],\r\n        'Energy': [\r\n          'Oil & Gas Integrated',\r\n          'Oil & Gas Midstream',\r\n          'Oil & Gas E&P',\r\n          'Oil & Gas Equipment & Services',\r\n          'Oil & Gas Refining & Marketing',\r\n          'Uranium',\r\n          'Oil & Gas Drilling',\r\n          'Thermal Coal',\r\n          'Utilities - Independent Power Producers'\r\n        ],\r\n        'Basic Materials': [\r\n          'Gold',\r\n          'Specialty Chemicals',\r\n          'Building Materials',\r\n          'Copper',\r\n          'Steel',\r\n          'Agricultural Inputs',\r\n          'Other Industrial Metals & Mining',\r\n          'Chemicals',\r\n          'Other Precious Metals & Mining',\r\n          'Aluminum',\r\n          'Lumber & Wood Production',\r\n          'Silver',\r\n          'Coking Coal',\r\n          'Paper & Paper Products'\r\n        ],\r\n        'Real Estate': [\r\n          'REIT - Specialty',\r\n          'REIT - Industrial',\r\n          'REIT - Healthcare Facilities',\r\n          'REIT - Retail',\r\n          'REIT - Residential',\r\n          'Real Estate Services',\r\n          'REIT - Mortgage',\r\n          'REIT - Office',\r\n          'REIT - Diversified',\r\n          'REIT - Hotel & Motel',\r\n          'Real Estate - Development',\r\n          'Real Estate - Diversified'\r\n        ],\r\n        'Utilities': [\r\n          'Utilities - Regulated Electric',\r\n          'Utilities - Independent Power Producers',\r\n          'Utilities - Regulated Gas',\r\n          'Utilities - Diversified',\r\n          'Utilities - Renewable',\r\n          'Utilities - Regulated Water'\r\n        ]\r\n      }\r\n      \r\n      // æŒ‰è‡ªè¨‚é †åºæ’åºï¼Œåªé¡¯ç¤ºæœ‰è‚¡ç¥¨çš„ sector\r\n      const sortedGroups = {}\r\n      \r\n      // 1. å…ˆæŒ‰å„ªå…ˆé †åºæ·»åŠ æœ‰è‚¡ç¥¨çš„ sector\r\n      sectorPriority.forEach(sector => {\r\n        if (groups[sector] && groups[sector].length > 0) {\r\n          // åœ¨æ¯å€‹ sector å…§æŒ‰ industry æ’åº\r\n          const sectorIndustryPriority = industryPriority[sector] || []\r\n          \r\n          // æŒ‰ industry åˆ†çµ„\r\n          const industryGroups = {}\r\n          groups[sector].forEach(stock => {\r\n            const industry = stock.metadata?.industry || 'Unknown Industry'\r\n            if (!industryGroups[industry]) {\r\n              industryGroups[industry] = []\r\n            }\r\n            industryGroups[industry].push(stock)\r\n          })\r\n          \r\n          // æŒ‰ industry å„ªå…ˆé †åºæ’åº\r\n          const sortedStocks = []\r\n          \r\n          // å…ˆæ·»åŠ æœ‰å„ªå…ˆé †åºçš„ industry\r\n          sectorIndustryPriority.forEach(industry => {\r\n            if (industryGroups[industry]) {\r\n              // åœ¨æ¯å€‹ industry å…§æŒ‰ market cap å¾å¤§åˆ°å°æ’åº\r\n              const sortedIndustryStocks = industryGroups[industry].sort((a, b) => {\r\n                const marketCapA = a.metadata?.market_cap || 0\r\n                const marketCapB = b.metadata?.market_cap || 0\r\n                \r\n                // å¦‚æœ market cap ç›¸åŒæˆ–éƒ½ç‚º 0ï¼Œå‰‡æŒ‰ symbol å­—æ¯é †åºæ’åº\r\n                if (marketCapA === marketCapB) {\r\n                  return a.quote.symbol.localeCompare(b.quote.symbol)\r\n                }\r\n                \r\n                // Market cap å¾å¤§åˆ°å°æ’åº\r\n                return marketCapB - marketCapA\r\n              })\r\n              sortedStocks.push(...sortedIndustryStocks)\r\n            }\r\n          })\r\n          \r\n          // å†æ·»åŠ ä¸åœ¨å„ªå…ˆåˆ—è¡¨ä¸­çš„å…¶ä»– industry\r\n          Object.keys(industryGroups).forEach(industry => {\r\n            if (!sectorIndustryPriority.includes(industry)) {\r\n              const sortedIndustryStocks = industryGroups[industry].sort((a, b) => {\r\n                const marketCapA = a.metadata?.market_cap || 0\r\n                const marketCapB = b.metadata?.market_cap || 0\r\n                \r\n                // å¦‚æœ market cap ç›¸åŒæˆ–éƒ½ç‚º 0ï¼Œå‰‡æŒ‰ symbol å­—æ¯é †åºæ’åº\r\n                if (marketCapA === marketCapB) {\r\n                  return a.quote.symbol.localeCompare(b.quote.symbol)\r\n                }\r\n                \r\n                // Market cap å¾å¤§åˆ°å°æ’åº\r\n                return marketCapB - marketCapA\r\n              })\r\n              sortedStocks.push(...sortedIndustryStocks)\r\n            }\r\n          })\r\n          \r\n          sortedGroups[sector] = sortedStocks\r\n        }\r\n      })\r\n      \r\n      // 2. æ·»åŠ ä¸åœ¨å„ªå…ˆåˆ—è¡¨ä¸­ä½†æœ‰è‚¡ç¥¨çš„å…¶ä»– sector (å¦‚ Unknown)\r\n      Object.keys(groups).forEach(sector => {\r\n        if (!sectorPriority.includes(sector) && groups[sector].length > 0) {\r\n          sortedGroups[sector] = groups[sector].sort((a, b) => {\r\n            return a.quote.symbol.localeCompare(b.quote.symbol)\r\n          })\r\n        }\r\n      })\r\n      \r\n      return sortedGroups\r\n    },\r\n\r\n    tocTree() {\r\n      if (!this.quotes.length || !this.metadata) {\r\n        return []\r\n      }\r\n\r\n      const tree = []\r\n      \r\n      // ä½¿ç”¨èˆ‡ groupedStocks ç›¸åŒçš„é‚è¼¯ä¾†ç¢ºä¿ä¸€è‡´æ€§\r\n      Object.entries(this.groupedStocks).forEach(([sectorName, stocks]) => {\r\n        const sectorNode = {\r\n          id: `sector-${this.sanitizeId(sectorName)}`,\r\n          type: 'sector',\r\n          label: sectorName,\r\n          children: []\r\n        }\r\n\r\n        // æŒ‰ industry åˆ†çµ„\r\n        const industryGroups = {}\r\n        stocks.forEach(stock => {\r\n          const industry = stock.metadata?.industry || 'Unknown Industry'\r\n          if (!industryGroups[industry]) {\r\n            industryGroups[industry] = []\r\n          }\r\n          industryGroups[industry].push(stock)\r\n        })\r\n\r\n        // ç‚ºæ¯å€‹ industry å‰µå»ºç¯€é»\r\n        Object.entries(industryGroups).forEach(([industryName, industryStocks]) => {\r\n          const industryNode = {\r\n            id: `industry-${this.sanitizeId(sectorName)}-${this.sanitizeId(industryName)}`,\r\n            type: 'industry',\r\n            label: industryName,\r\n            children: []\r\n          }\r\n\r\n          // ç‚ºæ¯å€‹ symbol å‰µå»ºç¯€é»\r\n          industryStocks.forEach(stock => {\r\n            const symbolNode = {\r\n              id: `symbol-${this.sanitizeId(stock.quote.symbol)}`,\r\n              type: 'symbol',\r\n              label: stock.quote.symbol,\r\n              symbol: stock.quote.symbol,\r\n              metadata: {\r\n                sector: sectorName,\r\n                industry: industryName,\r\n                exchange: this.mapExchangeCode(stock.metadata?.exchange),\r\n                marketCap: stock.metadata?.market_cap || 0\r\n              }\r\n            }\r\n            industryNode.children.push(symbolNode)\r\n          })\r\n\r\n          sectorNode.children.push(industryNode)\r\n        })\r\n\r\n        tree.push(sectorNode)\r\n      })\r\n\r\n      return tree\r\n    },\r\n\r\n    // æ•ˆèƒ½å„ªåŒ–çš„è³‡æ–™æ˜ å°„\r\n    metadataMap() {\r\n      if (!this.metadata?.items) return new Map()\r\n      \r\n      const map = new Map()\r\n      this.metadata.items.forEach(item => {\r\n        map.set(item.symbol, item)\r\n      })\r\n      return map\r\n    },\r\n\r\n    dailyDataMap() {\r\n      if (!this.dailyData?.per_symbol) return new Map()\r\n      \r\n      const map = new Map()\r\n      this.dailyData.per_symbol.forEach(item => {\r\n        map.set(item.symbol, item)\r\n      })\r\n      return map\r\n    }\r\n  },\r\n  async mounted() {\r\n    await this.loadStockData()\r\n    this.initializeNavigation()\r\n  },\r\n\r\n  beforeUnmount() {\r\n    this.cleanupNavigation()\r\n  },\r\n  methods: {\r\n    async loadStockData() {\r\n      this.loading = true\r\n      this.error = null\r\n      \r\n      try {\r\n        console.log('ğŸš€ Starting simple stock data load...')\r\n        \r\n        // å‹•æ…‹ç²å– base path\r\n        const basePath = import.meta.env.PROD ? '/investment-dashboard' : ''\r\n        \r\n        // 1. è¼‰å…¥é…ç½®\r\n        this.configuredSymbols = await stocksConfig.getEnabledSymbols()\r\n        console.log(`âœ… Loaded ${this.configuredSymbols.length} symbols from config`)\r\n        \r\n        // 2. ç›´æ¥è¼‰å…¥ quotes æ•¸æ“š\r\n        const quotesResponse = await fetch(`${basePath}/data/quotes/latest.json?t=` + Date.now())\r\n        if (!quotesResponse.ok) {\r\n          throw new Error(`Failed to load quotes: HTTP ${quotesResponse.status}`)\r\n        }\r\n        \r\n        const quotesData = await quotesResponse.json()\r\n        if (quotesData.items) {\r\n          this.quotes = quotesData.items.filter(quote => \r\n            this.configuredSymbols.includes(quote.symbol)\r\n          )\r\n          this.lastUpdate = quotesData.as_of\r\n          console.log(`âœ… Loaded ${this.quotes.length} quotes`)\r\n        }\r\n        \r\n        // 3. ç›´æ¥è¼‰å…¥ daily æ•¸æ“š\r\n        const dailyResponse = await fetch(`${basePath}/data/daily/2025-12-28.json?t=` + Date.now())\r\n        if (dailyResponse.ok) {\r\n          this.dailyData = await dailyResponse.json()\r\n          console.log(`âœ… Loaded daily data`)\r\n        }\r\n        \r\n        // 4. ç›´æ¥è¼‰å…¥ metadata\r\n        const metadataResponse = await fetch(`${basePath}/data/symbols_metadata.json?t=` + Date.now())\r\n        if (metadataResponse.ok) {\r\n          this.metadata = await metadataResponse.json()\r\n          console.log(`âœ… Loaded metadata for ${this.metadata.items.length} symbols`)\r\n        }\r\n        \r\n        console.log('âœ… Simple stock data load completed successfully!')\r\n        \r\n      } catch (err) {\r\n        this.error = String(err)\r\n        console.error('âŒ Simple stock data load failed:', err)\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n\r\n    async refresh() {\r\n      await this.loadStockData()\r\n    },\r\n\r\n    formatTime(timeString) {\r\n      if (!timeString) return ''\r\n      \r\n      try {\r\n        const date = new Date(timeString)\r\n        return date.toLocaleString('en-US', {\r\n          month: 'short',\r\n          day: 'numeric',\r\n          hour: '2-digit',\r\n          minute: '2-digit'\r\n        })\r\n      } catch {\r\n        return timeString\r\n      }\r\n    },\r\n\r\n    // Helper method to map exchange codes to display names\r\n    mapExchangeCode(exchangeCode) {\r\n      if (!exchangeCode) return 'Unknown'\r\n      \r\n      const exchangeMap = {\r\n        'NYQ': 'NYSE',    // New York Stock Exchange\r\n        'NMS': 'NASDAQ',  // NASDAQ Global Select Market\r\n        'NCM': 'NASDAQ',  // NASDAQ Capital Market\r\n        'NGM': 'NASDAQ',  // NASDAQ Global Market\r\n        'ASE': 'AMEX'     // NYSE American (åŸ American Stock Exchange)\r\n      }\r\n      \r\n      return exchangeMap[exchangeCode] || exchangeCode\r\n    },\r\n\r\n    sanitizeId(str) {\r\n      // å°‡å­—ä¸²è½‰æ›ç‚ºæœ‰æ•ˆçš„ DOM ID\r\n      return str.replace(/[^a-zA-Z0-9]/g, '_')\r\n    },\r\n    async onSymbolClick(symbol) {\r\n      console.log('Navigation: Symbol clicked:', symbol)\r\n      \r\n      // æš«åœ ScrollSpy é¿å…è¡çª\r\n      scrollSpyService.pause()\r\n      \r\n      try {\r\n        // æ›´æ–° URL query åƒæ•¸\r\n        navigationService.updateQueryParam(symbol)\r\n        \r\n        // æ»¾å‹•åˆ°ç›®æ¨™\r\n        await navigationService.scrollToSymbol(symbol)\r\n        \r\n        // æ›´æ–° active symbol\r\n        this.activeSymbol = symbol\r\n        \r\n        // è‡ªå‹•å±•é–‹å°æ‡‰çš„ sections\r\n        this.autoExpandForSymbol(symbol)\r\n      } finally {\r\n        // æ¢å¾© ScrollSpy\r\n        setTimeout(() => {\r\n          scrollSpyService.resume()\r\n        }, 500)\r\n      }\r\n    },\r\n\r\n    onSearchChange(query) {\r\n      this.searchQuery = query\r\n    },\r\n\r\n    onToggleSection(sectionId, expanded) {\r\n      if (expanded) {\r\n        this.expandedSections.add(sectionId)\r\n      } else {\r\n        this.expandedSections.delete(sectionId)\r\n      }\r\n      \r\n      // å„²å­˜åˆ° localStorage\r\n      this.saveExpandedSections()\r\n    },\r\n\r\n    autoExpandForSymbol(symbol) {\r\n      // æ‰¾åˆ° symbol å°æ‡‰çš„ sector å’Œ industry\r\n      for (const sectorNode of this.tocTree) {\r\n        for (const industryNode of sectorNode.children) {\r\n          const symbolNode = industryNode.children.find(s => s.symbol === symbol)\r\n          if (symbolNode) {\r\n            this.expandedSections.add(sectorNode.id)\r\n            this.expandedSections.add(industryNode.id)\r\n            this.saveExpandedSections()\r\n            return\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    saveExpandedSections() {\r\n      try {\r\n        const sectionsArray = Array.from(this.expandedSections)\r\n        localStorage.setItem('stock-overview-expanded-sections', JSON.stringify(sectionsArray))\r\n      } catch (error) {\r\n        console.warn('Failed to save expanded sections:', error)\r\n      }\r\n    },\r\n\r\n    loadExpandedSections() {\r\n      try {\r\n        const saved = localStorage.getItem('stock-overview-expanded-sections')\r\n        if (saved) {\r\n          const sectionsArray = JSON.parse(saved)\r\n          this.expandedSections = new Set(sectionsArray)\r\n        }\r\n      } catch (error) {\r\n        console.warn('Failed to load expanded sections:', error)\r\n        this.expandedSections = new Set()\r\n      }\r\n    },\r\n\r\n    initializeNavigation() {\r\n      // è¼‰å…¥å„²å­˜çš„å±•é–‹ç‹€æ…‹ï¼Œå¦‚æœæ²’æœ‰å„²å­˜çš„ç‹€æ…‹å‰‡é è¨­å…¨éƒ¨å±•é–‹\r\n      this.loadExpandedSections()\r\n      \r\n      // å¦‚æœæ²’æœ‰å„²å­˜çš„å±•é–‹ç‹€æ…‹ï¼Œé è¨­å±•é–‹æ‰€æœ‰ sections\r\n      if (this.expandedSections.size === 0) {\r\n        this.expandAllSections()\r\n      }\r\n      \r\n      // æª¢æŸ¥ URL query åƒæ•¸\r\n      const focusSymbol = navigationService.getFocusSymbolFromQuery()\r\n      if (focusSymbol && this.isSymbolValid(focusSymbol)) {\r\n        console.log('Navigation: Found focus symbol in URL:', focusSymbol)\r\n        \r\n        // å»¶é²åŸ·è¡Œä»¥ç¢ºä¿ DOM å·²æ¸²æŸ“\r\n        this.$nextTick(() => {\r\n          setTimeout(() => {\r\n            this.onSymbolClick(focusSymbol)\r\n          }, 500)\r\n        })\r\n      }\r\n      \r\n      // åˆå§‹åŒ– ScrollSpy\r\n      this.$nextTick(() => {\r\n        this.setupScrollSpy()\r\n      })\r\n    },\r\n\r\n    setupScrollSpy() {\r\n      try {\r\n        // ç²å–æ‰€æœ‰ StockCard å…ƒç´ \r\n        const stockCardElements = document.querySelectorAll('[data-symbol]')\r\n        \r\n        if (stockCardElements.length === 0) {\r\n          console.warn('ScrollSpy: No stock card elements found')\r\n          return\r\n        }\r\n        \r\n        // è¨­ç½® ScrollSpy\r\n        scrollSpyService.setup(\r\n          Array.from(stockCardElements),\r\n          (activeSymbol) => {\r\n            console.log('ScrollSpy: Active symbol changed to:', activeSymbol)\r\n            this.activeSymbol = activeSymbol\r\n            this.autoExpandForSymbol(activeSymbol)\r\n          }\r\n        )\r\n        \r\n        console.log(`ScrollSpy: Initialized with ${stockCardElements.length} elements`)\r\n      } catch (error) {\r\n        console.error('Failed to setup ScrollSpy:', error)\r\n      }\r\n    },\r\n\r\n    cleanupNavigation() {\r\n      scrollSpyService.cleanup()\r\n    },\r\n\r\n    isSymbolValid(symbol) {\r\n      return navigationService.isSymbolValid(symbol)\r\n    },\r\n\r\n    expandAllSections() {\r\n      // å±•é–‹æ‰€æœ‰ sector å’Œ industry sections\r\n      this.tocTree.forEach(sectorNode => {\r\n        this.expandedSections.add(sectorNode.id)\r\n        sectorNode.children.forEach(industryNode => {\r\n          this.expandedSections.add(industryNode.id)\r\n        })\r\n      })\r\n      this.saveExpandedSections()\r\n      console.log('Navigation: Expanded all sections by default')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.stock-overview {\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n/* Main Layout */\r\n.main-layout {\r\n  display: flex;\r\n  gap: 2rem;\r\n  align-items: flex-start;\r\n}\r\n\r\n.navigation-sidebar {\r\n  flex-shrink: 0;\r\n}\r\n\r\n.main-content {\r\n  flex: 1;\r\n  min-width: 0; /* é˜²æ­¢ flex item æº¢å‡º */\r\n}\r\n\r\n.stock-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: flex-start;\r\n  margin-bottom: 0.75rem;\r\n  gap: 1rem;\r\n}\r\n\r\n.stock-header h2 {\r\n  font-size: 1.5rem;\r\n  font-weight: 700;\r\n  color: #333;\r\n  margin: 0;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.header-right {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-end;\r\n  gap: 0.25rem;\r\n}\r\n\r\n.header-right .text-muted {\r\n  margin: 0;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.loading {\r\n  text-align: center;\r\n  padding: 3rem;\r\n}\r\n\r\n.spinner {\r\n  border: 4px solid #f3f3f3;\r\n  border-top: 4px solid #007bff;\r\n  border-radius: 50%;\r\n  width: 40px;\r\n  height: 40px;\r\n  animation: spin 1s linear infinite;\r\n  margin: 0 auto 1rem;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n.error {\r\n  text-align: center;\r\n  padding: 2rem;\r\n  background-color: #f8d7da;\r\n  border: 1px solid #f5c6cb;\r\n  border-radius: 8px;\r\n  margin: 1rem 0;\r\n}\r\n\r\n.no-data {\r\n  text-align: center;\r\n  padding: 3rem;\r\n  color: #666;\r\n  background-color: #f8f9fa;\r\n  border-radius: 8px;\r\n}\r\n\r\n.widget-container-ticker {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  margin-bottom: 2rem;\r\n  overflow: hidden;\r\n  position: relative;\r\n}\r\n\r\n.widget-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  background: #f8f9fa;\r\n  margin: -1rem -1rem 1rem -1rem;\r\n  padding: 0.75rem 1rem;\r\n  border-bottom: 1px solid #e9ecef;\r\n  border-top-left-radius: 8px;\r\n  border-top-right-radius: 8px;\r\n}\r\n\r\n.widget-header h3 {\r\n  font-size: 1.1rem;\r\n  font-weight: 600;\r\n  color: #333;\r\n  margin: 0;\r\n}\r\n\r\n.sector-groups {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 2rem;\r\n}\r\n\r\n.sector-group {\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n  padding: 1.5rem;\r\n}\r\n\r\n.sector-title {\r\n  font-size: 1.1rem;\r\n  font-weight: 600;\r\n  color: #333;\r\n  margin-bottom: 1rem;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.stock-count {\r\n  font-size: 0.8rem;\r\n  color: #666;\r\n  font-weight: 400;\r\n}\r\n\r\n.stocks-in-group {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 2rem;\r\n}\r\n\r\n.stocks-in-group > * {\r\n  width: 100%;\r\n}\r\n\r\n.btn {\r\n  padding: 8px 16px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n\r\n.btn-secondary {\r\n  background-color: #6c757d;\r\n  color: white;\r\n}\r\n\r\n.btn-secondary:hover {\r\n  background-color: #5a6268;\r\n}\r\n\r\n.text-muted {\r\n  color: #6c757d;\r\n}\r\n\r\n.text-danger {\r\n  color: #dc3545;\r\n}\r\n\r\n.mb-3 {\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n@media (max-width: 767px) {\r\n  .stock-header {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 0.5rem;\r\n  }\r\n  \r\n  /* è¡Œå‹•ç‰ˆéš±è—å°è¦½é¢æ¿ */\r\n  .main-layout {\r\n    flex-direction: column;\r\n    gap: 1rem;\r\n  }\r\n  \r\n  .navigation-sidebar {\r\n    display: none;\r\n  }\r\n  \r\n  .sector-group {\r\n    padding: 1rem;\r\n    margin: 0 -0.5rem;\r\n  }\r\n  \r\n  .stocks-in-group {\r\n    gap: 1.5rem;\r\n  }\r\n}\r\n\r\n@media (max-width: 1023px) {\r\n  .main-layout {\r\n    flex-direction: column;\r\n    gap: 1rem;\r\n  }\r\n  \r\n  .navigation-sidebar {\r\n    display: none;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .sector-groups {\r\n    gap: 1.5rem;\r\n  }\r\n  \r\n  .sector-group {\r\n    padding: 0.75rem;\r\n    margin: 0 -0.25rem;\r\n  }\r\n  \r\n  .stocks-in-group {\r\n    gap: 1rem;\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"performance-monitor\" v-if=\"showMonitor\">\r\n    <div class=\"monitor-header\">\r\n      <h4>Performance Monitor</h4>\r\n      <button @click=\"toggleMonitor\" class=\"toggle-btn\">\r\n        {{ expanded ? 'âˆ’' : '+' }}\r\n      </button>\r\n    </div>\r\n    \r\n    <div v-if=\"expanded\" class=\"monitor-content\">\r\n      <div class=\"metrics-grid\">\r\n        <div class=\"metric-card\">\r\n          <div class=\"metric-label\">Page Load</div>\r\n          <div class=\"metric-value\">{{ pageLoadTime }}ms</div>\r\n        </div>\r\n        \r\n        <div class=\"metric-card\">\r\n          <div class=\"metric-label\">Widgets Loaded</div>\r\n          <div class=\"metric-value\">{{ widgetsLoaded }}/{{ totalWidgets }}</div>\r\n        </div>\r\n        \r\n        <div class=\"metric-card\">\r\n          <div class=\"metric-label\">Total Size</div>\r\n          <div class=\"metric-value\">{{ totalSize }}</div>\r\n        </div>\r\n        \r\n        <div class=\"metric-card\">\r\n          <div class=\"metric-label\">Memory Usage</div>\r\n          <div class=\"metric-value\">{{ memoryUsage }}</div>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"widgets-list\">\r\n        <h5>Widget Load Times</h5>\r\n        <div v-for=\"widget in widgetTimes\" :key=\"widget.id\" class=\"widget-item\">\r\n          <span class=\"widget-name\">{{ widget.name }}</span>\r\n          <span class=\"widget-time\" :class=\"getTimeClass(widget.time)\">\r\n            {{ widget.time }}ms\r\n          </span>\r\n          <span class=\"widget-priority\">P{{ widget.priority }}</span>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"actions\">\r\n        <button @click=\"clearMetrics\" class=\"clear-btn\">Clear</button>\r\n        <button @click=\"exportMetrics\" class=\"export-btn\">Export</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'PerformanceMonitor',\r\n  data() {\r\n    return {\r\n      showMonitor: false,\r\n      expanded: true, // é è¨­ç‚ºå±•é–‹ç‹€æ…‹\r\n      pageLoadTime: 0,\r\n      widgetsLoaded: 0,\r\n      totalWidgets: 0,\r\n      widgetTimes: [],\r\n      startTime: 0\r\n    }\r\n  },\r\n  computed: {\r\n    totalSize() {\r\n      if (typeof performance !== 'undefined' && performance.getEntriesByType) {\r\n        const entries = performance.getEntriesByType('resource')\r\n        const totalBytes = entries.reduce((sum, entry) => {\r\n          return sum + (entry.transferSize || 0)\r\n        }, 0)\r\n        \r\n        if (totalBytes > 1024 * 1024) {\r\n          return `${(totalBytes / (1024 * 1024)).toFixed(1)}MB`\r\n        } else if (totalBytes > 1024) {\r\n          return `${(totalBytes / 1024).toFixed(1)}KB`\r\n        }\r\n        return `${totalBytes}B`\r\n      }\r\n      return 'N/A'\r\n    },\r\n    \r\n    memoryUsage() {\r\n      if (typeof performance !== 'undefined' && performance.memory) {\r\n        const used = performance.memory.usedJSHeapSize\r\n        if (used > 1024 * 1024) {\r\n          return `${(used / (1024 * 1024)).toFixed(1)}MB`\r\n        }\r\n        return `${(used / 1024).toFixed(1)}KB`\r\n      }\r\n      return 'N/A'\r\n    }\r\n  },\r\n  mounted() {\r\n    this.startTime = performance.now()\r\n    this.setupPerformanceTracking()\r\n    \r\n    // æª¢æŸ¥æ˜¯å¦åœ¨é–‹ç™¼ç’°å¢ƒæˆ–æœ‰ debug åƒæ•¸\r\n    const isDev = process.env.NODE_ENV === 'development'\r\n    const hasDebug = new URLSearchParams(window.location.search).has('debug')\r\n    this.showMonitor = isDev || hasDebug\r\n    \r\n    // ç›£è½é é¢è¼‰å…¥å®Œæˆ\r\n    if (document.readyState === 'complete') {\r\n      this.calculatePageLoadTime()\r\n    } else {\r\n      window.addEventListener('load', this.calculatePageLoadTime)\r\n    }\r\n  },\r\n  beforeUnmount() {\r\n    window.removeEventListener('load', this.calculatePageLoadTime)\r\n  },\r\n  methods: {\r\n    setupPerformanceTracking() {\r\n      // ğŸš¨ ä¿®å¾©ï¼šç§»é™¤ console.log æ””æˆªï¼Œé¿å…ç„¡é™å¾ªç’°å’Œ Console å´©æ½°\r\n      // æ”¹ç”¨ Performance Observer API å’Œè‡ªå®šç¾©äº‹ä»¶ä¾†è¿½è¹¤æ€§èƒ½\r\n      \r\n      // ç›£è½è‡ªå®šç¾©æ€§èƒ½äº‹ä»¶\r\n      window.addEventListener('widget-loaded', (event) => {\r\n        if (event.detail) {\r\n          this.addWidgetTime({\r\n            name: event.detail.name,\r\n            time: event.detail.time,\r\n            priority: event.detail.priority || 1\r\n          })\r\n        }\r\n      })\r\n      \r\n      // ä½¿ç”¨ Performance Observer ç›£è½è³‡æºè¼‰å…¥\r\n      if (typeof PerformanceObserver !== 'undefined') {\r\n        try {\r\n          const observer = new PerformanceObserver((list) => {\r\n            for (const entry of list.getEntries()) {\r\n              // åªç›£è½ TradingView ç›¸é—œçš„è³‡æº\r\n              if (entry.name.includes('tradingview') || entry.name.includes('widget')) {\r\n                this.addWidgetTime({\r\n                  name: entry.name.split('/').pop() || 'Unknown Widget',\r\n                  time: Math.round(entry.duration),\r\n                  priority: 2\r\n                })\r\n              }\r\n            }\r\n          })\r\n          \r\n          observer.observe({ entryTypes: ['resource', 'navigation'] })\r\n          \r\n          // çµ„ä»¶éŠ·æ¯€æ™‚æ–·é–‹è§€å¯Ÿè€…\r\n          this.$once('hook:beforeDestroy', () => {\r\n            observer.disconnect()\r\n          })\r\n        } catch (error) {\r\n          console.warn('PerformanceObserver not supported:', error)\r\n        }\r\n      }\r\n    },\r\n    \r\n    calculatePageLoadTime() {\r\n      this.pageLoadTime = Math.round(performance.now() - this.startTime)\r\n    },\r\n    \r\n    addWidgetTime(widget) {\r\n      this.widgetTimes.push({\r\n        id: Date.now() + Math.random(),\r\n        ...widget\r\n      })\r\n      this.widgetsLoaded++\r\n      \r\n      // ä¼°ç®—ç¸½ widgets æ•¸é‡\r\n      if (this.totalWidgets === 0) {\r\n        // æ ¹æ“šç•¶å‰é é¢ä¼°ç®—\r\n        const path = this.$route?.path || window.location.pathname\r\n        if (path.includes('market-dashboard')) {\r\n          this.totalWidgets = 5 // Market Dashboard çš„ widgets æ•¸é‡\r\n        } else if (path.includes('stock-dashboard')) {\r\n          this.totalWidgets = 10 // ä¼°ç®— Stock Dashboard çš„ widgets æ•¸é‡\r\n        } else {\r\n          this.totalWidgets = this.widgetsLoaded + 2 // å‹•æ…‹ä¼°ç®—\r\n        }\r\n      }\r\n    },\r\n    \r\n    getTimeClass(time) {\r\n      if (time < 1000) return 'time-good'\r\n      if (time < 3000) return 'time-ok'\r\n      return 'time-slow'\r\n    },\r\n    \r\n    toggleMonitor() {\r\n      this.expanded = !this.expanded\r\n    },\r\n    \r\n    clearMetrics() {\r\n      this.widgetTimes = []\r\n      this.widgetsLoaded = 0\r\n      this.totalWidgets = 0\r\n      this.startTime = performance.now()\r\n    },\r\n    \r\n    exportMetrics() {\r\n      const data = {\r\n        pageLoadTime: this.pageLoadTime,\r\n        widgetsLoaded: this.widgetsLoaded,\r\n        totalWidgets: this.totalWidgets,\r\n        totalSize: this.totalSize,\r\n        memoryUsage: this.memoryUsage,\r\n        widgetTimes: this.widgetTimes,\r\n        timestamp: new Date().toISOString(),\r\n        url: window.location.href\r\n      }\r\n      \r\n      const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' })\r\n      const url = URL.createObjectURL(blob)\r\n      const a = document.createElement('a')\r\n      a.href = url\r\n      a.download = `performance-${Date.now()}.json`\r\n      a.click()\r\n      URL.revokeObjectURL(url)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.performance-monitor {\r\n  position: fixed;\r\n  top: 80px;\r\n  right: 20px;\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n  z-index: 1000;\r\n  min-width: 300px;\r\n  max-width: 400px;\r\n}\r\n\r\n.monitor-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 0.75rem 1rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n  background: #f8f9fa;\r\n  border-radius: 8px 8px 0 0;\r\n}\r\n\r\n.monitor-header h4 {\r\n  margin: 0;\r\n  font-size: 0.9rem;\r\n  font-weight: 600;\r\n  color: #333;\r\n}\r\n\r\n.toggle-btn {\r\n  background: none;\r\n  border: none;\r\n  font-size: 1.2rem;\r\n  font-weight: bold;\r\n  cursor: pointer;\r\n  color: #666;\r\n  padding: 0;\r\n  width: 24px;\r\n  height: 24px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.toggle-btn:hover {\r\n  color: #007bff;\r\n}\r\n\r\n.monitor-content {\r\n  padding: 1rem;\r\n}\r\n\r\n.metrics-grid {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 0.75rem;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.metric-card {\r\n  background: #f8f9fa;\r\n  padding: 0.75rem;\r\n  border-radius: 6px;\r\n  text-align: center;\r\n}\r\n\r\n.metric-label {\r\n  font-size: 0.75rem;\r\n  color: #666;\r\n  margin-bottom: 0.25rem;\r\n}\r\n\r\n.metric-value {\r\n  font-size: 0.9rem;\r\n  font-weight: 600;\r\n  color: #333;\r\n}\r\n\r\n.widgets-list {\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.widgets-list h5 {\r\n  font-size: 0.85rem;\r\n  margin: 0 0 0.5rem 0;\r\n  color: #333;\r\n}\r\n\r\n.widget-item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 0.5rem;\r\n  background: #f8f9fa;\r\n  border-radius: 4px;\r\n  margin-bottom: 0.25rem;\r\n  font-size: 0.8rem;\r\n}\r\n\r\n.widget-name {\r\n  flex: 1;\r\n  color: #333;\r\n  font-weight: 500;\r\n}\r\n\r\n.widget-time {\r\n  margin-right: 0.5rem;\r\n  font-weight: 600;\r\n}\r\n\r\n.time-good {\r\n  color: #28a745;\r\n}\r\n\r\n.time-ok {\r\n  color: #ffc107;\r\n}\r\n\r\n.time-slow {\r\n  color: #dc3545;\r\n}\r\n\r\n.widget-priority {\r\n  background: #007bff;\r\n  color: white;\r\n  padding: 0.125rem 0.375rem;\r\n  border-radius: 12px;\r\n  font-size: 0.7rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.actions {\r\n  display: flex;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.clear-btn,\r\n.export-btn {\r\n  flex: 1;\r\n  padding: 0.5rem;\r\n  border: 1px solid #dee2e6;\r\n  border-radius: 4px;\r\n  background: white;\r\n  cursor: pointer;\r\n  font-size: 0.8rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.clear-btn:hover {\r\n  background: #f8f9fa;\r\n}\r\n\r\n.export-btn {\r\n  background: #007bff;\r\n  color: white;\r\n  border-color: #007bff;\r\n}\r\n\r\n.export-btn:hover {\r\n  background: #0056b3;\r\n}\r\n\r\n/* éŸ¿æ‡‰å¼è¨­è¨ˆ */\r\n@media (max-width: 768px) {\r\n  .performance-monitor {\r\n    position: relative;\r\n    top: auto;\r\n    right: auto;\r\n    margin: 1rem;\r\n    width: calc(100% - 2rem);\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"stock-dashboard\">\r\n    <!-- Performance Monitor -->\r\n    <PerformanceMonitor />\r\n\r\n    <!-- Stock Overview (åŸ Stock Grid) -->\r\n    <StockOverview />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport StockOverview from '@/components/StockOverview.vue'\r\nimport PerformanceMonitor from '@/components/PerformanceMonitor.vue'\r\n\r\nexport default {\r\n  name: 'StockDashboard',\r\n  components: {\r\n    StockOverview,\r\n    PerformanceMonitor\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.stock-dashboard {\r\n  padding: 0;\r\n}\r\n\r\n.mb-3 {\r\n  margin-bottom: 0.75rem;\r\n}\r\n\r\n.text-muted {\r\n  color: #6c757d;\r\n}\r\n</style>","<template>\n  <div class=\"settings\">\n    <h2>Settings</h2>\n    <p class=\"text-muted mb-3\">Configure system preferences and view diagnostics</p>\n\n    <div class=\"card\">\n      <h3>Privacy & Analytics</h3>\n      <p class=\"text-muted\">Toggle tracking and scraping preferences</p>\n      <!-- Settings toggles will be implemented in task 7.1 -->\n    </div>\n\n    <div class=\"card\">\n      <h3>System Diagnostics</h3>\n      <p class=\"text-muted\">View system status and data freshness</p>\n      <!-- Diagnostics panel will be implemented in task 7.2 -->\n    </div>\n\n    <div class=\"card\">\n      <h3>Import/Export</h3>\n      <p class=\"text-muted\">Backup and restore your configuration</p>\n      <!-- Import/export functionality will be implemented in task 7.3 -->\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Settings'\n}\n</script>\n","<template>\r\n  <div class=\"advanced-chart-widget\" :id=\"containerId\" ref=\"container\">\r\n    <div v-if=\"!loaded && !error\" class=\"chart-loading\">\r\n      <div class=\"loading-spinner\"></div>\r\n      <span>Loading Market Regime...</span>\r\n    </div>\r\n    \r\n    <div v-if=\"error\" class=\"chart-error\">\r\n      <span>âš ï¸ Failed to load</span>\r\n      <button @click=\"retry\" class=\"retry-btn\">Retry</button>\r\n    </div>\r\n\r\n    <!-- TradingView Advanced Chart Container -->\r\n    <div v-show=\"loaded\" class=\"tradingview-widget-container\" style=\"height:100%;width:100%\">\r\n      <div class=\"tradingview-widget-container__widget\" style=\"height:calc(100% - 32px);width:100%\"></div>\r\n      <div class=\"tradingview-widget-copyright\">\r\n        <a :href=\"`https://www.tradingview.com/symbols/${exchange}-${symbol}/`\" rel=\"noopener nofollow\" target=\"_blank\">\r\n          <span class=\"blue-text\">{{ symbol }} stock chart</span>\r\n        </a>\r\n        <span class=\"trademark\"> by TradingView</span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'MarketRegimeWidget',\r\n  props: {\r\n    symbol: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    exchange: {\r\n      type: String,\r\n      default: 'NASDAQ'\r\n    },\r\n    priority: {\r\n      type: Number,\r\n      default: 3\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      loaded: false,\r\n      error: false,\r\n      loadStartTime: 0,\r\n      isVisible: false,\r\n      observer: null\r\n    }\r\n  },\r\n  computed: {\r\n    containerId() {\r\n      return `market-regime-${this.symbol}-${Date.now()}`\r\n    }\r\n  },\r\n  async mounted() {\r\n    this.setupIntersectionObserver()\r\n  },\r\n  beforeUnmount() {\r\n    if (this.observer) {\r\n      this.observer.disconnect()\r\n    }\r\n  },\r\n  methods: {\r\n    setupIntersectionObserver() {\r\n      const rootMargins = {\r\n        1: '300px',\r\n        2: '150px', \r\n        3: '50px'\r\n      }\r\n\r\n      this.observer = new IntersectionObserver(\r\n        (entries) => {\r\n          entries.forEach((entry) => {\r\n            if (entry.isIntersecting && !this.loaded && !this.error) {\r\n              this.isVisible = true\r\n              this.loadWidget()\r\n              this.observer.disconnect()\r\n            }\r\n          })\r\n        },\r\n        {\r\n          rootMargin: rootMargins[this.priority] || '50px',\r\n          threshold: 0.1\r\n        }\r\n      )\r\n\r\n      this.observer.observe(this.$refs.container)\r\n    },\r\n\r\n    async loadWidget() {\r\n      this.loadStartTime = performance.now()\r\n      this.loaded = false\r\n      this.error = false\r\n\r\n      try {\r\n        const delays = {\r\n          1: 0,\r\n          2: 300,\r\n          3: 600\r\n        }\r\n\r\n        const delay = delays[this.priority] || 0\r\n        if (delay > 0) {\r\n          await new Promise(resolve => setTimeout(resolve, delay))\r\n        }\r\n\r\n        await this.createWidget()\r\n\r\n      } catch (err) {\r\n        console.error('Failed to load Market Regime widget:', err)\r\n        this.error = true\r\n      }\r\n    },\r\n\r\n    async createWidget() {\r\n      return new Promise((resolve, reject) => {\r\n        this.$nextTick(async () => {\r\n          const container = this.$refs.container\r\n          if (!container) {\r\n            reject(new Error('Container not found'))\r\n            return\r\n          }\r\n\r\n          const config = this.getWidgetConfig()\r\n          const scriptUrl = 'https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js'\r\n          \r\n          const script = document.createElement('script')\r\n          \r\n          script.type = 'text/javascript'\r\n          script.src = scriptUrl\r\n          script.async = true\r\n          script.innerHTML = JSON.stringify(config)\r\n          \r\n          const timeout = setTimeout(() => {\r\n            this.error = true\r\n            reject(new Error('Widget load timeout'))\r\n          }, 8000)\r\n          \r\n          script.onload = () => {\r\n            clearTimeout(timeout)\r\n            this.loaded = true\r\n            \r\n            const loadTime = performance.now() - this.loadStartTime\r\n            console.log(`Market Regime widget ${this.symbol} loaded in ${loadTime.toFixed(2)}ms`)\r\n            \r\n            resolve()\r\n          }\r\n          \r\n          script.onerror = () => {\r\n            clearTimeout(timeout)\r\n            this.error = true\r\n            reject(new Error('Script load failed'))\r\n          }\r\n          \r\n          const widgetContainer = container.querySelector('.tradingview-widget-container__widget')\r\n          if (widgetContainer) {\r\n            widgetContainer.appendChild(script)\r\n          } else {\r\n            container.appendChild(script)\r\n          }\r\n        })\r\n      })\r\n    },\r\n\r\n    getWidgetConfig() {\r\n      return {\r\n        \"allow_symbol_change\": true,\r\n        \"calendar\": false,\r\n        \"details\": false,\r\n        \"hide_side_toolbar\": true,\r\n        \"hide_top_toolbar\": false,\r\n        \"hide_legend\": false,\r\n        \"hide_volume\": false,\r\n        \"hotlist\": false,\r\n        \"interval\": \"D\",\r\n        \"locale\": \"en\",\r\n        \"save_image\": true,\r\n        \"style\": \"9\",\r\n        \"symbol\": `${this.exchange}:${this.symbol}`,\r\n        \"theme\": \"light\",\r\n        \"timezone\": \"Etc/UTC\",\r\n        \"backgroundColor\": \"#ffffff\",\r\n        \"gridColor\": \"rgba(46, 46, 46, 0.06)\",\r\n        \"watchlist\": [],\r\n        \"withdateranges\": true,\r\n        \"range\": \"6M\",\r\n        \"compareSymbols\": [],\r\n        \"studies\": [\r\n          \"STD;Ichimoku%1Cloud\",\r\n          \"STD;BBTrend\",\r\n          \"STD;TEMA\",\r\n          \"STD;Awesome_Oscillator\",\r\n          \"STD;Average%1Directional%1Index\"\r\n        ],\r\n        \"autosize\": true\r\n      }\r\n    },\r\n\r\n    async retry() {\r\n      this.setupIntersectionObserver()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.advanced-chart-widget {\r\n  width: 100%;\r\n  height: 100%;\r\n  min-height: 850px;\r\n  position: relative;\r\n  background: #ffffff;\r\n  padding: 8px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.chart-loading {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  min-height: 850px;\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n  color: #6c757d;\r\n  margin: -8px;\r\n}\r\n\r\n.loading-spinner {\r\n  width: 32px;\r\n  height: 32px;\r\n  border: 3px solid #e9ecef;\r\n  border-top: 3px solid #007bff;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n.chart-loading span {\r\n  font-size: 0.9rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.chart-error {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  min-height: 850px;\r\n  background: #f8d7da;\r\n  border: 1px solid #f5c6cb;\r\n  border-radius: 8px;\r\n  color: #721c24;\r\n  margin: -8px;\r\n}\r\n\r\n.retry-btn {\r\n  margin-top: 0.5rem;\r\n  padding: 0.5rem 1rem;\r\n  background: #dc3545;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.85rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.retry-btn:hover {\r\n  background: #c82333;\r\n}\r\n\r\n/* TradingView Widget æ¨£å¼ */\r\n.tradingview-widget-container {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: relative;\r\n}\r\n\r\n.tradingview-widget-container__widget {\r\n  width: 100%;\r\n  height: calc(100% - 32px);\r\n}\r\n\r\n.tradingview-widget-copyright {\r\n  font-size: 11px;\r\n  color: #787B86;\r\n  text-align: center;\r\n  padding: 5px 0;\r\n  line-height: 1.2;\r\n}\r\n\r\n.tradingview-widget-copyright a {\r\n  text-decoration: none;\r\n  color: #787B86;\r\n}\r\n\r\n.tradingview-widget-copyright .blue-text {\r\n  color: #2962FF;\r\n}\r\n\r\n.tradingview-widget-copyright .trademark {\r\n  color: #787B86;\r\n}\r\n\r\n.tradingview-widget-copyright a:hover .blue-text {\r\n  color: #1E53E5;\r\n}\r\n</style>\r\n\r\n<!-- å…¨åŸŸæ¨£å¼ä¾†è¦†è“‹ TradingView iframe é«˜åº¦ -->\r\n<style>\r\n/* ç¦ç”¨ TradingView iframe çš„å›ºå®šé«˜åº¦ - å…¨åŸŸæ¨£å¼ */\r\n.advanced-chart-widget .tradingview-widget-container iframe {\r\n  height: 100% !important;\r\n}\r\n</style>","<template>\r\n  <div class=\"advanced-chart-widget\" :id=\"containerId\" ref=\"container\">\r\n    <div v-if=\"!loaded && !error\" class=\"chart-loading\">\r\n      <div class=\"loading-spinner\"></div>\r\n      <span>Loading Trading Strategy...</span>\r\n    </div>\r\n    \r\n    <div v-if=\"error\" class=\"chart-error\">\r\n      <span>âš ï¸ Failed to load</span>\r\n      <button @click=\"retry\" class=\"retry-btn\">Retry</button>\r\n    </div>\r\n\r\n    <!-- TradingView Advanced Chart Container -->\r\n    <div v-show=\"loaded\" class=\"tradingview-widget-container\" style=\"height:100%;width:100%\">\r\n      <div class=\"tradingview-widget-container__widget\" style=\"height:calc(100% - 32px);width:100%\"></div>\r\n      <div class=\"tradingview-widget-copyright\">\r\n        <a :href=\"`https://www.tradingview.com/symbols/${exchange}-${symbol}/`\" rel=\"noopener nofollow\" target=\"_blank\">\r\n          <span class=\"blue-text\">{{ symbol }} stock chart</span>\r\n        </a>\r\n        <span class=\"trademark\"> by TradingView</span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'TradingStrategyWidget',\r\n  props: {\r\n    symbol: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    exchange: {\r\n      type: String,\r\n      default: 'NASDAQ'\r\n    },\r\n    priority: {\r\n      type: Number,\r\n      default: 4\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      loaded: false,\r\n      error: false,\r\n      loadStartTime: 0,\r\n      isVisible: false,\r\n      observer: null\r\n    }\r\n  },\r\n  computed: {\r\n    containerId() {\r\n      return `trading-strategy-${this.symbol}-${Date.now()}`\r\n    }\r\n  },\r\n  async mounted() {\r\n    this.setupIntersectionObserver()\r\n  },\r\n  beforeUnmount() {\r\n    if (this.observer) {\r\n      this.observer.disconnect()\r\n    }\r\n  },\r\n  methods: {\r\n    setupIntersectionObserver() {\r\n      const rootMargins = {\r\n        1: '300px',\r\n        2: '150px', \r\n        3: '50px',\r\n        4: '25px'\r\n      }\r\n\r\n      this.observer = new IntersectionObserver(\r\n        (entries) => {\r\n          entries.forEach((entry) => {\r\n            if (entry.isIntersecting && !this.loaded && !this.error) {\r\n              this.isVisible = true\r\n              this.loadWidget()\r\n              this.observer.disconnect()\r\n            }\r\n          })\r\n        },\r\n        {\r\n          rootMargin: rootMargins[this.priority] || '25px',\r\n          threshold: 0.1\r\n        }\r\n      )\r\n\r\n      this.observer.observe(this.$refs.container)\r\n    },\r\n\r\n    async loadWidget() {\r\n      this.loadStartTime = performance.now()\r\n      this.loaded = false\r\n      this.error = false\r\n\r\n      try {\r\n        const delays = {\r\n          1: 0,\r\n          2: 300,\r\n          3: 600,\r\n          4: 900\r\n        }\r\n\r\n        const delay = delays[this.priority] || 0\r\n        if (delay > 0) {\r\n          await new Promise(resolve => setTimeout(resolve, delay))\r\n        }\r\n\r\n        await this.createWidget()\r\n\r\n      } catch (err) {\r\n        console.error('Failed to load Trading Strategy widget:', err)\r\n        this.error = true\r\n      }\r\n    },\r\n\r\n    async createWidget() {\r\n      return new Promise((resolve, reject) => {\r\n        this.$nextTick(async () => {\r\n          const container = this.$refs.container\r\n          if (!container) {\r\n            reject(new Error('Container not found'))\r\n            return\r\n          }\r\n\r\n          const config = this.getWidgetConfig()\r\n          const scriptUrl = 'https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js'\r\n          \r\n          const script = document.createElement('script')\r\n          \r\n          script.type = 'text/javascript'\r\n          script.src = scriptUrl\r\n          script.async = true\r\n          script.innerHTML = JSON.stringify(config)\r\n          \r\n          const timeout = setTimeout(() => {\r\n            this.error = true\r\n            reject(new Error('Widget load timeout'))\r\n          }, 8000)\r\n          \r\n          script.onload = () => {\r\n            clearTimeout(timeout)\r\n            this.loaded = true\r\n            \r\n            const loadTime = performance.now() - this.loadStartTime\r\n            console.log(`Trading Strategy widget ${this.symbol} loaded in ${loadTime.toFixed(2)}ms`)\r\n            \r\n            resolve()\r\n          }\r\n          \r\n          script.onerror = () => {\r\n            clearTimeout(timeout)\r\n            this.error = true\r\n            reject(new Error('Script load failed'))\r\n          }\r\n          \r\n          const widgetContainer = container.querySelector('.tradingview-widget-container__widget')\r\n          if (widgetContainer) {\r\n            widgetContainer.appendChild(script)\r\n          } else {\r\n            container.appendChild(script)\r\n          }\r\n        })\r\n      })\r\n    },\r\n\r\n    getWidgetConfig() {\r\n      return {\r\n        \"allow_symbol_change\": true,\r\n        \"calendar\": false,\r\n        \"details\": false,\r\n        \"hide_side_toolbar\": true,\r\n        \"hide_top_toolbar\": false,\r\n        \"hide_legend\": false,\r\n        \"hide_volume\": false,\r\n        \"hotlist\": false,\r\n        \"interval\": \"D\",\r\n        \"locale\": \"en\",\r\n        \"save_image\": true,\r\n        \"style\": \"9\",\r\n        \"symbol\": `${this.exchange}:${this.symbol}`,\r\n        \"theme\": \"light\",\r\n        \"timezone\": \"Etc/UTC\",\r\n        \"backgroundColor\": \"#ffffff\",\r\n        \"gridColor\": \"rgba(46, 46, 46, 0.06)\",\r\n        \"watchlist\": [],\r\n        \"withdateranges\": true,\r\n        \"range\": \"6M\",\r\n        \"compareSymbols\": [],\r\n        \"studies\": [\r\n          \"STD;MACD\",\r\n          \"STD;Donchian_Channels\",\r\n          \"STD;TRIX\",\r\n          \"STD;RSI\"\r\n        ],\r\n        \"autosize\": true\r\n      }\r\n    },\r\n\r\n    async retry() {\r\n      this.setupIntersectionObserver()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.advanced-chart-widget {\r\n  width: 100%;\r\n  height: 100%;\r\n  min-height: 850px;\r\n  position: relative;\r\n  background: #ffffff;\r\n  padding: 8px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.chart-loading {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  min-height: 850px;\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n  color: #6c757d;\r\n  margin: -8px;\r\n}\r\n\r\n.loading-spinner {\r\n  width: 32px;\r\n  height: 32px;\r\n  border: 3px solid #e9ecef;\r\n  border-top: 3px solid #007bff;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n.chart-loading span {\r\n  font-size: 0.9rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.chart-error {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  min-height: 850px;\r\n  background: #f8d7da;\r\n  border: 1px solid #f5c6cb;\r\n  border-radius: 8px;\r\n  color: #721c24;\r\n  margin: -8px;\r\n}\r\n\r\n.retry-btn {\r\n  margin-top: 0.5rem;\r\n  padding: 0.5rem 1rem;\r\n  background: #dc3545;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.85rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.retry-btn:hover {\r\n  background: #c82333;\r\n}\r\n\r\n/* TradingView Widget æ¨£å¼ */\r\n.tradingview-widget-container {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: relative;\r\n}\r\n\r\n.tradingview-widget-container__widget {\r\n  width: 100%;\r\n  height: calc(100% - 32px);\r\n}\r\n\r\n.tradingview-widget-copyright {\r\n  font-size: 11px;\r\n  color: #787B86;\r\n  text-align: center;\r\n  padding: 5px 0;\r\n  line-height: 1.2;\r\n}\r\n\r\n.tradingview-widget-copyright a {\r\n  text-decoration: none;\r\n  color: #787B86;\r\n}\r\n\r\n.tradingview-widget-copyright .blue-text {\r\n  color: #2962FF;\r\n}\r\n\r\n.tradingview-widget-copyright .trademark {\r\n  color: #787B86;\r\n}\r\n\r\n.tradingview-widget-copyright a:hover .blue-text {\r\n  color: #1E53E5;\r\n}\r\n</style>\r\n\r\n<!-- å…¨åŸŸæ¨£å¼ä¾†è¦†è“‹ TradingView iframe é«˜åº¦ -->\r\n<style>\r\n/* ç¦ç”¨ TradingView iframe çš„å›ºå®šé«˜åº¦ - å…¨åŸŸæ¨£å¼ */\r\n.advanced-chart-widget .tradingview-widget-container iframe {\r\n  height: 100% !important;\r\n}\r\n</style>","<template>\r\n  <div class=\"company-profile-container\">\r\n    <div class=\"company-profile-widget\" :id=\"widgetId\" ref=\"container\">\r\n      <div v-if=\"!loaded && !error\" class=\"profile-loading\">\r\n        <div class=\"loading-spinner\"></div>\r\n        <span>Loading company profile...</span>\r\n      </div>\r\n      \r\n      <div v-if=\"error\" class=\"profile-error\">\r\n        <span>âš ï¸ Failed to load company profile</span>\r\n        <button @click=\"retry\" class=\"retry-btn\">Retry</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'TradingViewCompanyProfile',\r\n  props: {\r\n    symbol: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    exchange: {\r\n      type: String,\r\n      default: 'NASDAQ'\r\n    },\r\n    colorTheme: {\r\n      type: String,\r\n      default: 'light'\r\n    },\r\n    isTransparent: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    locale: {\r\n      type: String,\r\n      default: 'en'\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      loaded: false,\r\n      error: false,\r\n      widgetId: `company-profile-${Date.now()}`\r\n    }\r\n  },\r\n  computed: {\r\n    fullSymbol() {\r\n      return `${this.exchange}:${this.symbol}`\r\n    }\r\n  },\r\n  mounted() {\r\n    this.loadCompanyProfile()\r\n  },\r\n  watch: {\r\n    symbol() {\r\n      this.loadCompanyProfile()\r\n    },\r\n    exchange() {\r\n      this.loadCompanyProfile()\r\n    }\r\n  },\r\n  methods: {\r\n    async loadCompanyProfile() {\r\n      this.loaded = false\r\n      this.error = false\r\n\r\n      try {\r\n        await this.$nextTick()\r\n        this.createCompanyProfile()\r\n      } catch (err) {\r\n        console.error('Failed to load company profile:', err)\r\n        this.error = true\r\n      }\r\n    },\r\n\r\n    createCompanyProfile() {\r\n      const container = this.$refs.container\r\n      if (!container) return\r\n\r\n      // æ¸…é™¤ç¾æœ‰çš„ widget\r\n      container.innerHTML = ''\r\n\r\n      // å‰µå»º widget å®¹å™¨çµæ§‹\r\n      const widgetContainer = document.createElement('div')\r\n      widgetContainer.className = 'tradingview-widget-container'\r\n      widgetContainer.style.height = '100%'\r\n      widgetContainer.style.width = '100%'\r\n\r\n      const widgetContent = document.createElement('div')\r\n      widgetContent.className = 'tradingview-widget-container__widget'\r\n\r\n      widgetContainer.appendChild(widgetContent)\r\n      container.appendChild(widgetContainer)\r\n\r\n      // å‰µå»ºé…ç½®\r\n      const config = {\r\n        \"symbol\": this.fullSymbol,\r\n        \"colorTheme\": this.colorTheme,\r\n        \"isTransparent\": this.isTransparent,\r\n        \"locale\": this.locale,\r\n        \"width\": \"100%\",\r\n        \"height\": \"100%\"\r\n      }\r\n\r\n      console.log(`ğŸ¢ Creating Company Profile widget for ${this.fullSymbol}`, config)\r\n\r\n      // å‰µå»ºè…³æœ¬\r\n      const script = document.createElement('script')\r\n      script.type = 'text/javascript'\r\n      script.src = 'https://s3.tradingview.com/external-embedding/embed-widget-symbol-profile.js'\r\n      script.async = true\r\n      script.innerHTML = JSON.stringify(config)\r\n\r\n      // è¨­å®šè¼‰å…¥äº‹ä»¶\r\n      script.onload = () => {\r\n        this.loaded = true\r\n        console.log('TradingView Company Profile loaded successfully')\r\n      }\r\n\r\n      script.onerror = () => {\r\n        this.error = true\r\n        console.error('TradingView Company Profile failed to load')\r\n      }\r\n\r\n      // æ·»åŠ è…³æœ¬åˆ° widget å®¹å™¨\r\n      widgetContent.appendChild(script)\r\n\r\n      // è¨­å®šè¶…æ™‚ä¿è­·\r\n      setTimeout(() => {\r\n        if (!this.loaded && !this.error) {\r\n          this.loaded = true\r\n        }\r\n      }, 8000)\r\n    },\r\n\r\n    async retry() {\r\n      await this.loadCompanyProfile()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.company-profile-container {\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n\r\n.company-profile-widget {\r\n  height: 100%;\r\n  width: 100%;\r\n  position: relative;\r\n}\r\n\r\n/* Loading ç‹€æ…‹ */\r\n.profile-loading {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 0.5rem;\r\n  height: 100%;\r\n  color: #6c757d;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.loading-spinner {\r\n  width: 20px;\r\n  height: 20px;\r\n  border: 2px solid #e9ecef;\r\n  border-top: 2px solid #007bff;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n/* Error ç‹€æ…‹ */\r\n.profile-error {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 1rem;\r\n  height: 100%;\r\n  background: #f8d7da;\r\n  border: 1px solid #f5c6cb;\r\n  border-radius: 4px;\r\n  color: #721c24;\r\n}\r\n\r\n.retry-btn {\r\n  padding: 0.25rem 0.75rem;\r\n  background: #dc3545;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.8rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.retry-btn:hover {\r\n  background: #c82333;\r\n}\r\n\r\n/* TradingView Widget æ¨£å¼è¦†è“‹ - åƒ…é‡å° Company Profile */\r\n:global(.company-profile-widget .tv-embed-widget-wrapper) {\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n  min-height: 400px !important;\r\n  max-height: 600px !important;\r\n  overflow: visible !important;\r\n}\r\n\r\n:global(.company-profile-widget .tradingview-widget-container) {\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n  min-height: 400px !important;\r\n  max-height: 600px !important;\r\n}\r\n\r\n:global(.company-profile-widget .tradingview-widget-container__widget) {\r\n  width: 100% !important;\r\n  height: calc(100% - 32px) !important;\r\n  min-height: 370px !important;\r\n  max-height: 570px !important;\r\n}\r\n\r\n:global(.company-profile-widget .tradingview-widget-container iframe) {\r\n  width: 100% !important;\r\n  height: 400px !important;\r\n  min-height: 400px !important;\r\n  max-height: 600px !important;\r\n}\r\n</style>","<template>\r\n  <div class=\"fundamental-data-container\">\r\n    <div class=\"fundamental-data-widget\" :id=\"widgetId\" ref=\"container\">\r\n      <div v-if=\"!loaded && !error\" class=\"fundamental-loading\">\r\n        <div class=\"loading-spinner\"></div>\r\n        <span>Loading fundamental data...</span>\r\n      </div>\r\n      \r\n      <div v-if=\"error\" class=\"fundamental-error\">\r\n        <span>âš ï¸ Failed to load fundamental data</span>\r\n        <button @click=\"retry\" class=\"retry-btn\">Retry</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'TradingViewFundamentalData',\r\n  props: {\r\n    symbol: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    exchange: {\r\n      type: String,\r\n      default: 'NASDAQ'\r\n    },\r\n    colorTheme: {\r\n      type: String,\r\n      default: 'dark'\r\n    },\r\n    displayMode: {\r\n      type: String,\r\n      default: 'regular'\r\n    },\r\n    isTransparent: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    locale: {\r\n      type: String,\r\n      default: 'zh_TW'\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      loaded: false,\r\n      error: false,\r\n      widgetId: `fundamental-data-${Date.now()}`\r\n    }\r\n  },\r\n  computed: {\r\n    fullSymbol() {\r\n      return `${this.exchange}:${this.symbol}`\r\n    }\r\n  },\r\n  mounted() {\r\n    this.loadFundamentalData()\r\n  },\r\n  watch: {\r\n    symbol() {\r\n      this.loadFundamentalData()\r\n    },\r\n    exchange() {\r\n      this.loadFundamentalData()\r\n    }\r\n  },\r\n  methods: {\r\n    async loadFundamentalData() {\r\n      this.loaded = false\r\n      this.error = false\r\n\r\n      try {\r\n        await this.$nextTick()\r\n        this.createFundamentalData()\r\n      } catch (err) {\r\n        console.error('Failed to load fundamental data:', err)\r\n        this.error = true\r\n      }\r\n    },\r\n\r\n    createFundamentalData() {\r\n      const container = this.$refs.container\r\n      if (!container) return\r\n\r\n      // æ¸…é™¤ç¾æœ‰çš„ widget\r\n      container.innerHTML = ''\r\n\r\n      // å‰µå»º widget å®¹å™¨çµæ§‹\r\n      const widgetContainer = document.createElement('div')\r\n      widgetContainer.className = 'tradingview-widget-container'\r\n      widgetContainer.style.height = '100%'\r\n      widgetContainer.style.width = '100%'\r\n\r\n      const widgetContent = document.createElement('div')\r\n      widgetContent.className = 'tradingview-widget-container__widget'\r\n\r\n      widgetContainer.appendChild(widgetContent)\r\n      container.appendChild(widgetContainer)\r\n\r\n      // å‰µå»ºé…ç½®\r\n      const config = {\r\n        \"symbol\": this.fullSymbol,\r\n        \"colorTheme\": \"light\",\r\n        \"displayMode\": \"regular\",\r\n        \"isTransparent\": true,\r\n        \"locale\": \"zh_TW\",\r\n        \"width\": \"100%\",\r\n        \"height\": \"100%\"\r\n      }\r\n\r\n      // å‰µå»ºè…³æœ¬\r\n      const script = document.createElement('script')\r\n      script.type = 'text/javascript'\r\n      script.src = 'https://s3.tradingview.com/external-embedding/embed-widget-financials.js'\r\n      script.async = true\r\n      script.innerHTML = JSON.stringify(config)\r\n\r\n      // è¨­å®šè¼‰å…¥äº‹ä»¶\r\n      script.onload = () => {\r\n        this.loaded = true\r\n        console.log('TradingView Fundamental Data loaded successfully')\r\n      }\r\n\r\n      script.onerror = () => {\r\n        this.error = true\r\n        console.error('TradingView Fundamental Data failed to load')\r\n      }\r\n\r\n      // æ·»åŠ è…³æœ¬åˆ° widget å®¹å™¨\r\n      widgetContent.appendChild(script)\r\n\r\n      // è¨­å®šè¶…æ™‚ä¿è­·\r\n      setTimeout(() => {\r\n        if (!this.loaded && !this.error) {\r\n          this.loaded = true\r\n        }\r\n      }, 8000)\r\n    },\r\n\r\n    async retry() {\r\n      await this.loadFundamentalData()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.fundamental-data-container {\r\n  height: 100%;\r\n  width: 100%;\r\n  min-height: 950px;\r\n  overflow: hidden;\r\n}\r\n\r\n.fundamental-data-widget {\r\n  height: 100%;\r\n  width: 100%;\r\n  position: relative;\r\n  min-height: 950px;\r\n  overflow: hidden;\r\n}\r\n\r\n/* Loading ç‹€æ…‹ */\r\n.fundamental-loading {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 0.5rem;\r\n  height: 100%;\r\n  color: #6c757d;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.loading-spinner {\r\n  width: 20px;\r\n  height: 20px;\r\n  border: 2px solid #e9ecef;\r\n  border-top: 2px solid #007bff;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n/* Error ç‹€æ…‹ */\r\n.fundamental-error {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 1rem;\r\n  height: 100%;\r\n  background: #f8d7da;\r\n  border: 1px solid #f5c6cb;\r\n  border-radius: 4px;\r\n  color: #721c24;\r\n}\r\n\r\n.retry-btn {\r\n  padding: 0.25rem 0.75rem;\r\n  background: #dc3545;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.8rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.retry-btn:hover {\r\n  background: #c82333;\r\n}\r\n\r\n/* TradingView Widget æ¨£å¼è¦†è“‹ - åƒ…é‡å° Fundamental Data */\r\n:global(.fundamental-data-widget .tradingview-widget-container) {\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n  min-height: 950px !important;\r\n  max-height: none !important;\r\n}\r\n\r\n:global(.fundamental-data-widget .tradingview-widget-container__widget) {\r\n  width: 100% !important;\r\n  height: calc(100% - 32px) !important;\r\n  min-height: 910px !important;\r\n  max-height: none !important;\r\n}\r\n\r\n:global(.fundamental-data-widget .tradingview-widget-container iframe) {\r\n  width: 100% !important;\r\n  height: 950px !important;\r\n  min-height: 600px !important;\r\n  max-height: none !important;\r\n}\r\n\r\n/* Simplified TradingView overrides - åƒ…é‡å° Fundamental Data */\r\n:global(.fundamental-data-widget .tv-embed-widget-wrapper) {\r\n  height: 950px !important;\r\n  min-height: 950px !important;\r\n  overflow: auto !important;\r\n}\r\n\r\n:global(.fundamental-data-widget .tv-feed-widget) {\r\n  height: 910px !important;\r\n  min-height: 910px !important;\r\n  overflow: auto !important;\r\n}\r\n\r\n:global(.fundamental-data-widget .tv-feed-widget__body) {\r\n  height: auto !important;\r\n  min-height: 850px !important;\r\n  overflow: auto !important;\r\n}\r\n</style>","<template>\r\n  <div class=\"stock-news\">\r\n    <div v-if=\"loading\" class=\"loading-state\">\r\n      <div class=\"loading-spinner\"></div>\r\n      <span>Loading latest news for {{ symbol }}...</span>\r\n    </div>\r\n    \r\n    <div v-else-if=\"error\" class=\"error-state\">\r\n      <span class=\"error-icon\">âš ï¸</span>\r\n      <span>{{ error }}</span>\r\n    </div>\r\n    \r\n    <div v-else-if=\"news.length === 0\" class=\"no-news-state\">\r\n      <span class=\"info-icon\">â„¹ï¸</span>\r\n      <span>No recent news available for {{ symbol }}</span>\r\n    </div>\r\n    \r\n    <div v-else class=\"news-grid\">\r\n      <article \r\n        v-for=\"(article, index) in news\" \r\n        :key=\"index\"\r\n        class=\"news-item\"\r\n        @click=\"openArticle(article.link)\"\r\n      >\r\n        <div class=\"news-header\">\r\n          <h4 class=\"news-title\">{{ article.title }}</h4>\r\n          <span class=\"news-date\">{{ formatDate(article.providerPublishTime) }}</span>\r\n        </div>\r\n        \r\n        <div class=\"news-content\">\r\n          <div class=\"news-text\">\r\n            <p class=\"news-summary\">{{ truncateText(article.summary, 150) }}</p>\r\n            <div class=\"news-meta\">\r\n              <span class=\"news-publisher\">{{ article.publisher }}</span>\r\n              <span v-if=\"article.type\" class=\"news-type\">{{ article.type }}</span>\r\n            </div>\r\n          </div>\r\n          \r\n          <div v-if=\"article.thumbnail\" class=\"news-thumbnail\">\r\n            <img \r\n              :src=\"article.thumbnail.resolutions[0]?.url\" \r\n              :alt=\"article.title\"\r\n              @error=\"handleImageError\"\r\n            />\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"news-footer\">\r\n          <span class=\"read-more\">Read more â†’</span>\r\n        </div>\r\n      </article>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'StockNews',\r\n  props: {\r\n    symbol: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    newsCount: {\r\n      type: Number,\r\n      default: 9\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      loading: true,\r\n      error: null,\r\n      news: []\r\n    }\r\n  },\r\n  mounted() {\r\n    this.loadNews()\r\n  },\r\n  watch: {\r\n    symbol() {\r\n      this.loadNews()\r\n    }\r\n  },\r\n  methods: {\r\n    async loadNews() {\r\n      this.loading = true;\r\n      this.error = null;\r\n      this.news = [];\r\n      \r\n      try {\r\n        console.log(`Loading news for ${this.symbol}...`);\r\n        \r\n        // ä½¿ç”¨ Yahoo Finance API ç²å–æ–°è\r\n        const response = await this.fetchYahooNews(this.symbol);\r\n        \r\n        if (response && response.length > 0) {\r\n          this.news = response.slice(0, this.newsCount);\r\n          console.log(`Loaded ${this.news.length} news articles for ${this.symbol}`);\r\n        } else {\r\n          this.news = [];\r\n        }\r\n        \r\n      } catch (error) {\r\n        console.error(`Failed to load news for ${this.symbol}:`, error);\r\n        this.error = error.message;\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n    \r\n    async fetchYahooNews(symbol) {\r\n      // ä½¿ç”¨ CORS ä»£ç†æœå‹™\r\n      const corsProxies = [\r\n        'https://api.allorigins.win/raw?url=',\r\n        'https://corsproxy.io/?'\r\n      ];\r\n      \r\n      for (const proxy of corsProxies) {\r\n        try {\r\n          const targetUrl = `https://query1.finance.yahoo.com/v1/finance/search?q=${symbol}&lang=en-US&region=US&quotesCount=1&newsCount=${this.newsCount}&enableFuzzyQuery=false&quotesQueryId=tss_match_phrase_query&multiQuoteQueryId=multi_quote_single_token_query&newsQueryId=news_cie_vespa&enableCb=true&enableNavLinks=true&enableEnhancedTrivialQuery=true`;\r\n          const url = `${proxy}${encodeURIComponent(targetUrl)}`;\r\n          \r\n          console.log(`Fetching news from: ${url}`);\r\n          \r\n          const response = await fetch(url);\r\n          \r\n          if (!response.ok) {\r\n            throw new Error(`HTTP error! status: ${response.status}`);\r\n          }\r\n          \r\n          const data = await response.json();\r\n          \r\n          if (data && data.news && data.news.length > 0) {\r\n            return data.news;\r\n          }\r\n          \r\n        } catch (error) {\r\n          console.warn(`Proxy failed for news:`, error.message);\r\n          continue;\r\n        }\r\n      }\r\n      \r\n      throw new Error('All news proxies failed');\r\n    },\r\n    \r\n    formatDate(timestamp) {\r\n      if (!timestamp) return 'Unknown date';\r\n      \r\n      const date = new Date(timestamp * 1000);\r\n      const now = new Date();\r\n      const diffMs = now - date;\r\n      const diffHours = Math.floor(diffMs / (1000 * 60 * 60));\r\n      const diffDays = Math.floor(diffHours / 24);\r\n      \r\n      if (diffHours < 1) {\r\n        const diffMinutes = Math.floor(diffMs / (1000 * 60));\r\n        return `${diffMinutes}m ago`;\r\n      } else if (diffHours < 24) {\r\n        return `${diffHours}h ago`;\r\n      } else if (diffDays < 7) {\r\n        return `${diffDays}d ago`;\r\n      } else {\r\n        return date.toLocaleDateString('en-US', { \r\n          month: 'short', \r\n          day: 'numeric',\r\n          year: date.getFullYear() !== now.getFullYear() ? 'numeric' : undefined\r\n        });\r\n      }\r\n    },\r\n    \r\n    truncateText(text, maxLength) {\r\n      if (!text) return '';\r\n      if (text.length <= maxLength) return text;\r\n      return text.substring(0, maxLength).trim() + '...';\r\n    },\r\n    \r\n    openArticle(link) {\r\n      if (link) {\r\n        window.open(link, '_blank', 'noopener,noreferrer');\r\n      }\r\n    },\r\n    \r\n    handleImageError(event) {\r\n      event.target.style.display = 'none';\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.stock-news {\r\n  min-height: 200px;\r\n}\r\n\r\n.loading-state, .error-state, .no-news-state {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 0.75rem;\r\n  color: #6c757d;\r\n  font-size: 0.9rem;\r\n  padding: 3rem;\r\n  text-align: center;\r\n}\r\n\r\n.loading-spinner {\r\n  width: 20px;\r\n  height: 20px;\r\n  border: 2px solid #e9ecef;\r\n  border-top: 2px solid #007bff;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n.error-state {\r\n  color: #dc3545;\r\n}\r\n\r\n.error-icon, .info-icon {\r\n  font-size: 1.1rem;\r\n}\r\n\r\n.news-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));\r\n  gap: 1rem;\r\n  padding: 0.75rem;\r\n}\r\n\r\n.news-item {\r\n  background: white;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 6px;\r\n  padding: 1rem;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n  box-shadow: 0 1px 3px rgba(0,0,0,0.05);\r\n}\r\n\r\n.news-item:hover {\r\n  border-color: #007bff;\r\n  box-shadow: 0 2px 8px rgba(0,123,255,0.15);\r\n  transform: translateY(-1px);\r\n}\r\n\r\n.news-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: flex-start;\r\n  gap: 0.75rem;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.news-title {\r\n  font-size: 0.9rem;\r\n  font-weight: 600;\r\n  color: #2c3e50;\r\n  margin: 0;\r\n  line-height: 1.3;\r\n  flex: 1;\r\n}\r\n\r\n.news-date {\r\n  font-size: 0.75rem;\r\n  color: #6c757d;\r\n  white-space: nowrap;\r\n  font-weight: 500;\r\n}\r\n\r\n.news-content {\r\n  display: flex;\r\n  gap: 0.75rem;\r\n  margin-bottom: 0.75rem;\r\n}\r\n\r\n.news-text {\r\n  flex: 1;\r\n}\r\n\r\n.news-summary {\r\n  font-size: 0.8rem;\r\n  color: #495057;\r\n  line-height: 1.4;\r\n  margin: 0 0 0.5rem 0;\r\n}\r\n\r\n.news-meta {\r\n  display: flex;\r\n  gap: 0.75rem;\r\n  align-items: center;\r\n}\r\n\r\n.news-publisher {\r\n  font-size: 0.75rem;\r\n  color: #007bff;\r\n  font-weight: 600;\r\n}\r\n\r\n.news-type {\r\n  font-size: 0.7rem;\r\n  color: #6c757d;\r\n  background: #f8f9fa;\r\n  padding: 0.2rem 0.4rem;\r\n  border-radius: 3px;\r\n  text-transform: uppercase;\r\n  font-weight: 500;\r\n}\r\n\r\n.news-thumbnail {\r\n  flex-shrink: 0;\r\n  width: 70px;\r\n  height: 50px;\r\n  border-radius: 4px;\r\n  overflow: hidden;\r\n  background: #f8f9fa;\r\n}\r\n\r\n.news-thumbnail img {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n}\r\n\r\n.news-footer {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  padding-top: 0.5rem;\r\n  border-top: 1px solid #f0f0f0;\r\n}\r\n\r\n.read-more {\r\n  font-size: 0.8rem;\r\n  color: #007bff;\r\n  font-weight: 600;\r\n  transition: color 0.2s;\r\n}\r\n\r\n.news-item:hover .read-more {\r\n  color: #0056b3;\r\n}\r\n\r\n/* éŸ¿æ‡‰å¼è¨­è¨ˆ */\r\n@media (max-width: 768px) {\r\n  .news-grid {\r\n    grid-template-columns: 1fr;\r\n    gap: 1rem;\r\n    padding: 0.5rem;\r\n  }\r\n  \r\n  .news-item {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .news-header {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 0.5rem;\r\n  }\r\n  \r\n  .news-content {\r\n    flex-direction: column;\r\n    gap: 0.75rem;\r\n  }\r\n  \r\n  .news-thumbnail {\r\n    width: 100%;\r\n    height: 120px;\r\n  }\r\n  \r\n  .news-title {\r\n    font-size: 0.95rem;\r\n  }\r\n  \r\n  .news-summary {\r\n    font-size: 0.85rem;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .news-grid {\r\n    padding: 0.25rem;\r\n  }\r\n  \r\n  .news-item {\r\n    padding: 0.75rem;\r\n  }\r\n  \r\n  .news-title {\r\n    font-size: 0.9rem;\r\n  }\r\n  \r\n  .news-summary {\r\n    font-size: 0.8rem;\r\n  }\r\n  \r\n  .news-meta {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 0.5rem;\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"stock-detail-skeleton\">\r\n    <!-- Breadcrumb Skeleton -->\r\n    <div class=\"skeleton-breadcrumb\">\r\n      <div class=\"skeleton-breadcrumb-link\"></div>\r\n      <div class=\"skeleton-breadcrumb-separator\">â€º</div>\r\n      <div class=\"skeleton-breadcrumb-current\"></div>\r\n    </div>\r\n\r\n    <!-- Stock Header Skeleton -->\r\n    <div class=\"skeleton-stock-header\">\r\n      <div class=\"skeleton-header-info\">\r\n        <div class=\"skeleton-symbol-info\">\r\n          <div class=\"skeleton-symbol\"></div>\r\n          <div class=\"skeleton-tags\">\r\n            <div class=\"skeleton-tag\"></div>\r\n            <div class=\"skeleton-tag\"></div>\r\n          </div>\r\n        </div>\r\n        <div class=\"skeleton-header-actions\">\r\n          <div class=\"skeleton-back-button\"></div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Widgets Container Skeleton -->\r\n      <div class=\"skeleton-widgets-container\">\r\n        <!-- Symbol Overview (2/3 width) -->\r\n        <div class=\"skeleton-widget-overview\">\r\n          <div class=\"skeleton-widget-header\">\r\n            <div class=\"skeleton-title\"></div>\r\n          </div>\r\n          <div class=\"skeleton-overview-content\"></div>\r\n        </div>\r\n\r\n        <!-- Technical Analysis (1/3 width) -->\r\n        <div class=\"skeleton-widget-technical\">\r\n          <div class=\"skeleton-widget-header\">\r\n            <div class=\"skeleton-title\"></div>\r\n          </div>\r\n          <div class=\"skeleton-technical-content\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Insight Widgets Container Skeleton -->\r\n    <div class=\"skeleton-insight-widgets\">\r\n      <!-- Daily Insight -->\r\n      <div class=\"skeleton-insight-widget\">\r\n        <div class=\"skeleton-widget-header\">\r\n          <div class=\"skeleton-title\"></div>\r\n        </div>\r\n        <div class=\"skeleton-insight-content\"></div>\r\n      </div>\r\n\r\n      <!-- Weekly Insight -->\r\n      <div class=\"skeleton-insight-widget\">\r\n        <div class=\"skeleton-widget-header\">\r\n          <div class=\"skeleton-title\"></div>\r\n        </div>\r\n        <div class=\"skeleton-insight-content\"></div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Technical Indicators Skeleton -->\r\n    <div class=\"skeleton-widget-container\">\r\n      <div class=\"skeleton-widget-header\">\r\n        <div class=\"skeleton-title\"></div>\r\n      </div>\r\n      <div class=\"skeleton-technical-indicators\">\r\n        <div class=\"skeleton-indicator-item\" v-for=\"i in 6\" :key=\"i\">\r\n          <div class=\"skeleton-indicator-name\"></div>\r\n          <div class=\"skeleton-indicator-value\"></div>\r\n          <div class=\"skeleton-indicator-signal\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Performance Monitor Skeleton -->\r\n    <div class=\"skeleton-widget-container\">\r\n      <div class=\"skeleton-widget-header\">\r\n        <div class=\"skeleton-title\"></div>\r\n      </div>\r\n      <div class=\"skeleton-performance-grid\">\r\n        <div class=\"skeleton-performance-item\" v-for=\"i in 4\" :key=\"i\">\r\n          <div class=\"skeleton-performance-label\"></div>\r\n          <div class=\"skeleton-performance-value\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Content Layout Skeleton -->\r\n    <div class=\"skeleton-content-layout\">\r\n      <!-- Stock News Row -->\r\n      <div class=\"skeleton-news-row\">\r\n        <div class=\"skeleton-widget-header\">\r\n          <div class=\"skeleton-title\"></div>\r\n        </div>\r\n        <div class=\"skeleton-news-content\">\r\n          <div class=\"skeleton-news-item\" v-for=\"i in 5\" :key=\"i\">\r\n            <div class=\"skeleton-news-title\"></div>\r\n            <div class=\"skeleton-news-summary\"></div>\r\n            <div class=\"skeleton-news-time\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Fundamental Data Row -->\r\n      <div class=\"skeleton-fundamental-row\">\r\n        <div class=\"skeleton-widget-header\">\r\n          <div class=\"skeleton-title\"></div>\r\n        </div>\r\n        <div class=\"skeleton-fundamental-content\">\r\n          <div class=\"skeleton-fundamental-grid\">\r\n            <div class=\"skeleton-fundamental-item\" v-for=\"i in 8\" :key=\"i\">\r\n              <div class=\"skeleton-fundamental-label\"></div>\r\n              <div class=\"skeleton-fundamental-value\"></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Company Profile Row -->\r\n      <div class=\"skeleton-profile-row\">\r\n        <div class=\"skeleton-widget-header\">\r\n          <div class=\"skeleton-title\"></div>\r\n        </div>\r\n        <div class=\"skeleton-profile-content\">\r\n          <div class=\"skeleton-profile-info\">\r\n            <div class=\"skeleton-profile-item\" v-for=\"i in 6\" :key=\"i\">\r\n              <div class=\"skeleton-profile-label\"></div>\r\n              <div class=\"skeleton-profile-value\"></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'StockDetailSkeleton'\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n<style scoped>\r\n/* åŸºç¤éª¨æ¶å‹•ç•« */\r\n@keyframes shimmer {\r\n  0% {\r\n    background-position: -200px 0;\r\n  }\r\n  100% {\r\n    background-position: calc(200px + 100%) 0;\r\n  }\r\n}\r\n\r\n.stock-detail-skeleton {\r\n  background: #f8f9fa;\r\n  padding: 1rem;\r\n  min-height: 100vh;\r\n  overflow-x: hidden;\r\n  max-width: 100%;\r\n}\r\n\r\n/* é€šç”¨éª¨æ¶æ¨£å¼ */\r\n.skeleton-base {\r\n  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\r\n  background-size: 200px 100%;\r\n  animation: shimmer 1.5s infinite linear;\r\n  border-radius: 4px;\r\n}\r\n\r\n/* Breadcrumb éª¨æ¶ */\r\n.skeleton-breadcrumb {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 1rem;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.skeleton-breadcrumb-link {\r\n  @extend .skeleton-base;\r\n  width: 120px;\r\n  height: 16px;\r\n}\r\n\r\n.skeleton-breadcrumb-separator {\r\n  color: #6c757d;\r\n  margin: 0 0.25rem;\r\n}\r\n\r\n.skeleton-breadcrumb-current {\r\n  @extend .skeleton-base;\r\n  width: 150px;\r\n  height: 16px;\r\n}\r\n\r\n/* Stock Header éª¨æ¶ */\r\n.skeleton-stock-header {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 12px;\r\n  padding: 1.5rem;\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.skeleton-header-info {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding-bottom: 1rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.skeleton-symbol-info {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.skeleton-symbol {\r\n  @extend .skeleton-base;\r\n  width: 100px;\r\n  height: 24px;\r\n}\r\n\r\n.skeleton-tags {\r\n  display: flex;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.skeleton-tag {\r\n  @extend .skeleton-base;\r\n  width: 80px;\r\n  height: 20px;\r\n  border-radius: 10px;\r\n}\r\n\r\n.skeleton-header-actions {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.skeleton-back-button {\r\n  @extend .skeleton-base;\r\n  width: 160px;\r\n  height: 36px;\r\n  border-radius: 6px;\r\n}\r\n\r\n/* Widgets Container éª¨æ¶ */\r\n.skeleton-widgets-container {\r\n  display: grid;\r\n  grid-template-columns: 2fr 1fr;\r\n  gap: 1.5rem;\r\n  margin-bottom: 1.5rem;\r\n  min-height: 450px;\r\n}\r\n\r\n.skeleton-widget-overview,\r\n.skeleton-widget-technical {\r\n  background: #fafafa;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.skeleton-widget-header {\r\n  background: #f8f9fa;\r\n  padding: 0.75rem 1rem;\r\n  border-bottom: 1px solid #e9ecef;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.skeleton-title {\r\n  @extend .skeleton-base;\r\n  width: 120px;\r\n  height: 16px;\r\n}\r\n\r\n.skeleton-overview-content,\r\n.skeleton-technical-content {\r\n  @extend .skeleton-base;\r\n  flex: 1;\r\n  margin: 1rem;\r\n  min-height: 380px;\r\n  border-radius: 8px;\r\n}\r\n\r\n/* Insight Widgets éª¨æ¶ */\r\n.skeleton-insight-widgets {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 1.5rem;\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.skeleton-insight-widget {\r\n  background: #fafafa;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-height: 600px;\r\n}\r\n\r\n.skeleton-insight-content {\r\n  @extend .skeleton-base;\r\n  flex: 1;\r\n  margin: 1rem;\r\n  min-height: 540px;\r\n  border-radius: 8px;\r\n}\r\n\r\n/* Widget å®¹å™¨éª¨æ¶ */\r\n.skeleton-widget-container {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  margin-bottom: 1.5rem;\r\n  overflow: hidden;\r\n  position: relative;\r\n}\r\n\r\n/* Technical Indicators éª¨æ¶ */\r\n.skeleton-technical-indicators {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\r\n  gap: 1rem;\r\n  min-height: 300px;\r\n}\r\n\r\n.skeleton-indicator-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n  padding: 1rem;\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n}\r\n\r\n.skeleton-indicator-name {\r\n  @extend .skeleton-base;\r\n  width: 120px;\r\n  height: 16px;\r\n}\r\n\r\n.skeleton-indicator-value {\r\n  @extend .skeleton-base;\r\n  width: 80px;\r\n  height: 24px;\r\n}\r\n\r\n.skeleton-indicator-signal {\r\n  @extend .skeleton-base;\r\n  width: 60px;\r\n  height: 20px;\r\n  border-radius: 10px;\r\n}\r\n\r\n/* Performance Monitor éª¨æ¶ */\r\n.skeleton-performance-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\r\n  gap: 1rem;\r\n  min-height: 120px;\r\n}\r\n\r\n.skeleton-performance-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n  padding: 1rem;\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n}\r\n\r\n.skeleton-performance-label {\r\n  @extend .skeleton-base;\r\n  width: 100px;\r\n  height: 16px;\r\n}\r\n\r\n.skeleton-performance-value {\r\n  @extend .skeleton-base;\r\n  width: 80px;\r\n  height: 24px;\r\n}\r\n\r\n/* Content Layout éª¨æ¶ */\r\n.skeleton-content-layout {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1.5rem;\r\n}\r\n\r\n.skeleton-news-row,\r\n.skeleton-fundamental-row,\r\n.skeleton-profile-row {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  overflow: hidden;\r\n}\r\n\r\n/* Stock News éª¨æ¶ */\r\n.skeleton-news-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1rem;\r\n  min-height: 400px;\r\n}\r\n\r\n.skeleton-news-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n  padding: 1rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.skeleton-news-title {\r\n  @extend .skeleton-base;\r\n  width: 80%;\r\n  height: 18px;\r\n}\r\n\r\n.skeleton-news-summary {\r\n  @extend .skeleton-base;\r\n  width: 60%;\r\n  height: 14px;\r\n}\r\n\r\n.skeleton-news-time {\r\n  @extend .skeleton-base;\r\n  width: 100px;\r\n  height: 12px;\r\n}\r\n\r\n/* Fundamental Data éª¨æ¶ */\r\n.skeleton-fundamental-content {\r\n  min-height: 600px;\r\n}\r\n\r\n.skeleton-fundamental-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\r\n  gap: 1rem;\r\n}\r\n\r\n.skeleton-fundamental-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n  padding: 1rem;\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n}\r\n\r\n.skeleton-fundamental-label {\r\n  @extend .skeleton-base;\r\n  width: 80px;\r\n  height: 14px;\r\n}\r\n\r\n.skeleton-fundamental-value {\r\n  @extend .skeleton-base;\r\n  width: 100px;\r\n  height: 20px;\r\n}\r\n\r\n/* Company Profile éª¨æ¶ */\r\n.skeleton-profile-content {\r\n  min-height: 400px;\r\n}\r\n\r\n.skeleton-profile-info {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\r\n  gap: 1rem;\r\n}\r\n\r\n.skeleton-profile-item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 0.75rem;\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n}\r\n\r\n.skeleton-profile-label {\r\n  @extend .skeleton-base;\r\n  width: 100px;\r\n  height: 16px;\r\n}\r\n\r\n.skeleton-profile-value {\r\n  @extend .skeleton-base;\r\n  width: 120px;\r\n  height: 16px;\r\n}\r\n\r\n/* å¯¦éš›æ‡‰ç”¨éª¨æ¶æ¨£å¼ */\r\n.skeleton-breadcrumb-link,\r\n.skeleton-breadcrumb-current,\r\n.skeleton-symbol,\r\n.skeleton-tag,\r\n.skeleton-back-button,\r\n.skeleton-title,\r\n.skeleton-overview-content,\r\n.skeleton-technical-content,\r\n.skeleton-insight-content,\r\n.skeleton-indicator-name,\r\n.skeleton-indicator-value,\r\n.skeleton-indicator-signal,\r\n.skeleton-performance-label,\r\n.skeleton-performance-value,\r\n.skeleton-news-title,\r\n.skeleton-news-summary,\r\n.skeleton-news-time,\r\n.skeleton-fundamental-label,\r\n.skeleton-fundamental-value,\r\n.skeleton-profile-label,\r\n.skeleton-profile-value {\r\n  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\r\n  background-size: 200px 100%;\r\n  animation: shimmer 1.5s infinite linear;\r\n  border-radius: 4px;\r\n}\r\n\r\n/* éŸ¿æ‡‰å¼è¨­è¨ˆ */\r\n@media (max-width: 1200px) {\r\n  .skeleton-widgets-container {\r\n    grid-template-columns: 1fr;\r\n    gap: 1rem;\r\n  }\r\n  \r\n  .skeleton-insight-widgets {\r\n    grid-template-columns: 1fr;\r\n    gap: 1rem;\r\n  }\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .stock-detail-skeleton {\r\n    padding: 0.5rem;\r\n  }\r\n  \r\n  .skeleton-stock-header {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .skeleton-header-info {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 0.75rem;\r\n  }\r\n  \r\n  .skeleton-widgets-container {\r\n    grid-template-columns: 1fr;\r\n    gap: 1rem;\r\n    min-height: auto;\r\n  }\r\n  \r\n  .skeleton-insight-widgets {\r\n    grid-template-columns: 1fr;\r\n    gap: 1rem;\r\n  }\r\n  \r\n  .skeleton-insight-widget {\r\n    height: auto;\r\n    min-height: 500px;\r\n  }\r\n  \r\n  .skeleton-insight-content {\r\n    min-height: 450px;\r\n  }\r\n  \r\n  .skeleton-overview-content,\r\n  .skeleton-technical-content {\r\n    min-height: 330px;\r\n  }\r\n  \r\n  .skeleton-technical-indicators {\r\n    grid-template-columns: 1fr;\r\n  }\r\n  \r\n  .skeleton-performance-grid {\r\n    grid-template-columns: 1fr;\r\n  }\r\n  \r\n  .skeleton-fundamental-grid {\r\n    grid-template-columns: repeat(2, 1fr);\r\n  }\r\n  \r\n  .skeleton-profile-info {\r\n    grid-template-columns: 1fr;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .skeleton-stock-header {\r\n    padding: 0.75rem;\r\n    margin: 0 -0.25rem 1rem -0.25rem;\r\n  }\r\n  \r\n  .skeleton-widget-container,\r\n  .skeleton-news-row,\r\n  .skeleton-fundamental-row,\r\n  .skeleton-profile-row {\r\n    padding: 0.5rem;\r\n    margin: 0 -0.25rem 1rem -0.25rem;\r\n  }\r\n  \r\n  .skeleton-fundamental-grid {\r\n    grid-template-columns: 1fr;\r\n  }\r\n}\r\n\r\n/* å‹•ç•«å»¶é²æ•ˆæœ */\r\n.skeleton-tag:nth-child(1) { animation-delay: 0.1s; }\r\n.skeleton-tag:nth-child(2) { animation-delay: 0.2s; }\r\n\r\n.skeleton-indicator-item:nth-child(odd) { animation-delay: 0.1s; }\r\n.skeleton-indicator-item:nth-child(even) { animation-delay: 0.2s; }\r\n\r\n.skeleton-news-item:nth-child(1) { animation-delay: 0.1s; }\r\n.skeleton-news-item:nth-child(2) { animation-delay: 0.2s; }\r\n.skeleton-news-item:nth-child(3) { animation-delay: 0.3s; }\r\n\r\n.skeleton-fundamental-item:nth-child(odd) { animation-delay: 0.1s; }\r\n.skeleton-fundamental-item:nth-child(even) { animation-delay: 0.2s; }\r\n\r\n.skeleton-profile-item:nth-child(odd) { animation-delay: 0.1s; }\r\n.skeleton-profile-item:nth-child(even) { animation-delay: 0.2s; }\r\n\r\n/* æ·¡å…¥æ•ˆæœ */\r\n.stock-detail-skeleton {\r\n  animation: fadeIn 0.3s ease-in;\r\n}\r\n\r\n@keyframes fadeIn {\r\n  from {\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    opacity: 1;\r\n  }\r\n}\r\n</style>","/**\r\n * Zod validation schemas for Investment Dashboard data models\r\n * Provides runtime validation for all data contracts\r\n */\r\n\r\nimport { z } from 'zod'\r\nimport type {\r\n  UserState,\r\n  QuotesSnapshot,\r\n  DailySnapshot,\r\n  MetadataSnapshot,\r\n  SystemStatus,\r\n  UniverseConfig,\r\n  MacroIndicatorConfig,\r\n  NewsSourcesConfig,\r\n  WishConfig,\r\n  VersionConfig,\r\n  ValidationResult\r\n} from '@/types'\r\n\r\n// ============================================================================\r\n// Custom datetime validator that accepts ISO strings with timezone\r\nconst DateTimeString = z.string().refine(\r\n  (val) => {\r\n    try {\r\n      const date = new Date(val)\r\n      return !isNaN(date.getTime()) && val.includes('T')\r\n    } catch {\r\n      return false\r\n    }\r\n  },\r\n  { message: 'Invalid datetime format' }\r\n)\r\n// ============================================================================\r\n\r\nconst StaleLevel = z.enum(['fresh', 'stale', 'very_stale'])\r\nconst MarketState = z.enum(['open', 'closed', 'pre', 'post']).nullable()\r\nconst PriceType = z.enum(['latest', 'close', 'last_known'])\r\nconst BriefSource = z.enum(['llm', 'fallback'])\r\nconst QualityFlag = z.enum(['good', 'stale', 'degraded', 'disabled_scrape'])\r\nconst ConfidenceLevel = z.union([z.literal(0.50), z.literal(0.75), z.literal(0.90)])\r\nconst SystemStatusType = z.enum(['operational', 'degraded', 'maintenance', 'outage'])\r\nconst JobStatusType = z.enum(['success', 'failed', 'running', 'pending'])\r\n\r\n// ============================================================================\r\n// User State Validation Schemas\r\n// ============================================================================\r\n\r\nconst HoldingDataSchema = z.object({\r\n  avg_cost_usd: z.number().positive().finite(),\r\n  shares: z.number().positive().finite().optional()\r\n})\r\n\r\nconst UserSettingsSchema = z.object({\r\n  scraping_enabled: z.boolean(),\r\n  degradation_enabled: z.boolean(),\r\n  ga_enabled: z.boolean(),\r\n  clarity_enabled: z.boolean()\r\n})\r\n\r\nconst ImportResultSchema = z.object({\r\n  timestamp: DateTimeString,\r\n  success: z.boolean(),\r\n  error: z.string().optional(),\r\n  changes_applied: z.number().nonnegative(),\r\n  dry_run: z.boolean()\r\n})\r\n\r\nconst DiagnosticsDataSchema = z.object({\r\n  last_import_result: ImportResultSchema.optional()\r\n})\r\n\r\n// Forward declarations for recursive types\r\nconst DailySnapshotSchema: z.ZodType<DailySnapshot> = z.lazy(() => DailySnapshotSchemaImpl)\r\nconst QuotesSnapshotSchema: z.ZodType<QuotesSnapshot> = z.lazy(() => QuotesSnapshotSchemaImpl)\r\nconst MetadataSnapshotSchema: z.ZodType<MetadataSnapshot> = z.lazy(() => MetadataSnapshotSchemaImpl)\r\n\r\nconst CacheDataSchema = z.object({\r\n  last_daily_snapshot: DailySnapshotSchema.optional(),\r\n  last_quotes_snapshot: QuotesSnapshotSchema.optional(),\r\n  last_metadata: MetadataSnapshotSchema.optional()\r\n})\r\n\r\nexport const UserStateSchema = z.object({\r\n  schema_version: z.string(),\r\n  watchlist: z.array(z.string().max(10).regex(/^[A-Z0-9.-]+$/)),\r\n  holdings: z.record(z.string(), HoldingDataSchema),\r\n  settings: UserSettingsSchema,\r\n  cache: CacheDataSchema,\r\n  diagnostics: DiagnosticsDataSchema\r\n})\r\n\r\n// ============================================================================\r\n// Quote Data Validation Schemas\r\n// ============================================================================\r\n\r\nconst QuoteItemSchema = z.object({\r\n  symbol: z.string().max(10).regex(/^[A-Z0-9.-]+$/),\r\n  price_usd: z.number().nullable(),\r\n  price_type: PriceType,\r\n  market_state: MarketState,\r\n  is_delayed: z.boolean(),\r\n  stale_level: StaleLevel,\r\n  error: z.string().nullable(),\r\n  change_percent: z.number().optional(),\r\n  volume: z.number().nonnegative().optional()\r\n})\r\n\r\nconst QuotesMetadataSchema = z.object({\r\n  total_symbols: z.number().nonnegative(),\r\n  successful_updates: z.number().nonnegative(),\r\n  failed_updates: z.number().nonnegative(),\r\n  average_delay_minutes: z.number().nonnegative().optional(),\r\n  next_update: DateTimeString.optional()\r\n})\r\n\r\nconst QuotesSnapshotSchemaImpl = z.object({\r\n  as_of: DateTimeString,\r\n  provider: z.string(),\r\n  market_session: z.string().optional(),\r\n  items: z.array(QuoteItemSchema),\r\n  metadata: QuotesMetadataSchema.optional()\r\n})\r\n\r\n// ============================================================================\r\n// Daily Snapshot Validation Schemas\r\n// ============================================================================\r\n\r\nconst NewsItemSchema = z.object({\r\n  title: z.string().min(1),\r\n  url: z.string().url(),\r\n  published_at: DateTimeString,\r\n  source: z.string().min(1),\r\n  summary: z.string().optional()\r\n})\r\n\r\nconst SymbolDataSchema = z.object({\r\n  symbol: z.string().max(10).regex(/^[A-Z0-9.-]+$/),\r\n  short_brief_zh: z.string(),\r\n  brief_truncated: z.boolean(),\r\n  brief_source: BriefSource,\r\n  news_top10: z.array(NewsItemSchema),\r\n  news_insufficient: z.boolean(),\r\n  gaps: z.array(z.string())\r\n})\r\n\r\nconst MarketsIndicatorSchema = z.object({\r\n  id: z.string().min(1),\r\n  value: z.number().nullable(),\r\n  as_of: DateTimeString,\r\n  source_name: z.string().min(1),\r\n  quality_flag: QualityFlag\r\n})\r\n\r\nconst MacroDataSchema = z.object({\r\n  items: z.array(MarketsIndicatorSchema).length(10, 'Must have exactly 10 markets indicators')\r\n})\r\n\r\nconst GenerationMetadataSchema = z.object({\r\n  total_processing_time_ms: z.number().nonnegative(),\r\n  news_sources_attempted: z.number().nonnegative(),\r\n  news_sources_successful: z.number().nonnegative(),\r\n  total_articles_collected: z.number().nonnegative(),\r\n  articles_after_deduplication: z.number().nonnegative(),\r\n  llm_brief_generation_success_rate: z.number().min(0).max(1),\r\n  macro_indicators_updated: z.number().nonnegative(),\r\n  macro_indicators_failed: z.number().nonnegative()\r\n})\r\n\r\nconst DailySnapshotSchemaImpl = z.object({\r\n  as_of_date_taipei: z.string().regex(/^\\d{4}-\\d{2}-\\d{2}$/),\r\n  generated_at_utc: DateTimeString,\r\n  universe: z.array(z.string()).length(10, 'Universe must have exactly 10 symbols'),\r\n  per_symbol: z.array(SymbolDataSchema).length(10, 'Must have data for exactly 10 symbols'),\r\n  macro: MacroDataSchema,\r\n  generation_metadata: GenerationMetadataSchema.optional()\r\n})\r\n\r\n// ============================================================================\r\n// Metadata Validation Schemas\r\n// ============================================================================\r\n\r\nconst SymbolMetadataSchema = z.object({\r\n  symbol: z.string().max(10).regex(/^[A-Z0-9.-]+$/),\r\n  sector: z.string().nullable(),\r\n  industry: z.string().nullable(),\r\n  confidence: ConfidenceLevel,\r\n  sources: z.array(z.string()).min(1),\r\n  last_verified_at: DateTimeString,\r\n  market_cap_category: z.string().optional(),\r\n  exchange: z.string().optional()\r\n})\r\n\r\nconst ConfidenceDistributionSchema = z.object({\r\n  high_confidence_0_90: z.number().nonnegative(),\r\n  medium_confidence_0_75: z.number().nonnegative(),\r\n  low_confidence_0_50: z.number().nonnegative()\r\n})\r\n\r\nconst RefreshMetadataSchema = z.object({\r\n  last_refresh_duration_ms: z.number().nonnegative(),\r\n  symbols_updated: z.number().nonnegative(),\r\n  symbols_failed: z.number().nonnegative(),\r\n  confidence_improvements: z.number().nonnegative(),\r\n  new_sources_added: z.number().nonnegative()\r\n})\r\n\r\nconst MetadataSnapshotSchemaImpl = z.object({\r\n  ttl_days: z.number().positive(),\r\n  as_of: DateTimeString,\r\n  next_refresh: DateTimeString.optional(),\r\n  items: z.array(SymbolMetadataSchema).length(10, 'Must have metadata for exactly 10 symbols'),\r\n  industry_grouping: z.record(z.string(), z.array(z.string())).optional(),\r\n  confidence_distribution: ConfidenceDistributionSchema.optional(),\r\n  data_sources: z.record(z.string(), z.number().nonnegative()).optional(),\r\n  refresh_metadata: RefreshMetadataSchema.optional()\r\n})\r\n\r\n// ============================================================================\r\n// System Status Validation Schemas\r\n// ============================================================================\r\n\r\nconst JobStatusSchema = z.object({\r\n  last_run: DateTimeString,\r\n  next_run: DateTimeString,\r\n  status: JobStatusType,\r\n  duration_ms: z.number().nonnegative(),\r\n  symbols_updated: z.number().nonnegative().optional(),\r\n  symbols_processed: z.number().nonnegative().optional(),\r\n  errors: z.array(z.string()),\r\n  provider: z.string().optional()\r\n})\r\n\r\nconst FreshnessInfoSchema = z.object({\r\n  age_minutes: z.number().nonnegative().optional(),\r\n  age_hours: z.number().nonnegative().optional(),\r\n  age_days: z.number().nonnegative().optional(),\r\n  staleness: StaleLevel\r\n})\r\n\r\nconst QuotaInfoSchema = z.object({\r\n  used_minutes: z.number().nonnegative(),\r\n  total_minutes: z.number().nonnegative(),\r\n  reset_date: z.string() // Just a date string, not datetime\r\n})\r\n\r\nconst StorageInfoSchema = z.object({\r\n  data_files_mb: z.number().nonnegative(),\r\n  total_repo_mb: z.number().nonnegative()\r\n})\r\n\r\nconst ApiLimitInfoSchema = z.object({\r\n  calls_today: z.number().nonnegative(),\r\n  daily_limit: z.number().nonnegative(),\r\n  reset_time: DateTimeString\r\n})\r\n\r\nconst SystemHealthSchema = z.object({\r\n  github_actions_quota: QuotaInfoSchema.optional(),\r\n  storage_usage: StorageInfoSchema.optional(),\r\n  api_limits: z.record(z.string(), ApiLimitInfoSchema).optional()\r\n})\r\n\r\nconst DegradationStatusSchema = z.object({\r\n  enabled: z.boolean(),\r\n  active_fallbacks: z.array(z.string()),\r\n  cache_hits_last_hour: z.number().nonnegative()\r\n})\r\n\r\nexport const SystemStatusSchema = z.object({\r\n  description: z.string(),\r\n  last_updated: DateTimeString,\r\n  system_status: SystemStatusType,\r\n  jobs: z.record(z.string(), JobStatusSchema),\r\n  data_freshness: z.record(z.string(), FreshnessInfoSchema),\r\n  system_health: SystemHealthSchema,\r\n  degradation_status: DegradationStatusSchema\r\n})\r\n\r\n// ============================================================================\r\n// Configuration Validation Schemas\r\n// ============================================================================\r\n\r\nconst ValidationRulesSchema = z.object({\r\n  max_length: z.number().positive(),\r\n  allowed_chars: z.string(),\r\n  case_sensitive: z.boolean()\r\n})\r\n\r\nexport const UniverseConfigSchema = z.object({\r\n  description: z.string(),\r\n  version: z.string(),\r\n  last_updated: z.string(),\r\n  symbols: z.array(z.string().max(10).regex(/^[A-Z0-9.-]+$/)).length(10, 'Universe must have exactly 10 symbols'),\r\n  validation: ValidationRulesSchema\r\n})\r\n\r\nconst MarketsIndicatorDefinitionSchema = z.object({\r\n  id: z.string().min(1),\r\n  name: z.string().min(1),\r\n  description: z.string().min(1),\r\n  scrape_only: z.boolean(),\r\n  data_source: z.string().min(1),\r\n  update_frequency: z.string().min(1),\r\n  unit: z.string().min(1)\r\n})\r\n\r\nconst ScrapingSettingsSchema = z.object({\r\n  default_enabled: z.boolean(),\r\n  timeout_seconds: z.number().positive(),\r\n  retry_attempts: z.number().nonnegative(),\r\n  user_agent: z.string().min(1)\r\n})\r\n\r\nexport const MarketsIndicatorConfigSchema = z.object({\r\n  description: z.string(),\r\n  version: z.string(),\r\n  last_updated: z.string(),\r\n  indicators: z.array(MarketsIndicatorDefinitionSchema).length(10, 'Must have exactly 10 markets indicators'),\r\n  scraping_settings: ScrapingSettingsSchema\r\n})\r\n\r\n// ============================================================================\r\n// Validation Utility Functions\r\n// ============================================================================\r\n\r\nexport function validateData<T>(\r\n  schema: z.ZodSchema<T>,\r\n  data: unknown\r\n): ValidationResult<T> {\r\n  try {\r\n    const validatedData = schema.parse(data)\r\n    return {\r\n      success: true,\r\n      data: validatedData\r\n    }\r\n  } catch (error) {\r\n    if (error instanceof z.ZodError) {\r\n      return {\r\n        success: false,\r\n        error: {\r\n          message: 'Validation failed',\r\n          details: error.errors\r\n        }\r\n      }\r\n    }\r\n    return {\r\n      success: false,\r\n      error: {\r\n        message: 'Unknown validation error',\r\n        details: { error: String(error) }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport function validateUserState(data: unknown): ValidationResult<UserState> {\r\n  return validateData(UserStateSchema, data)\r\n}\r\n\r\nexport function validateQuotesSnapshot(data: unknown): ValidationResult<QuotesSnapshot> {\r\n  return validateData(QuotesSnapshotSchema, data)\r\n}\r\n\r\nexport function validateDailySnapshot(data: unknown): ValidationResult<DailySnapshot> {\r\n  return validateData(DailySnapshotSchema, data)\r\n}\r\n\r\nexport function validateMetadataSnapshot(data: unknown): ValidationResult<MetadataSnapshot> {\r\n  return validateData(MetadataSnapshotSchema, data)\r\n}\r\n\r\nexport function validateSystemStatus(data: unknown): ValidationResult<SystemStatus> {\r\n  return validateData(SystemStatusSchema, data)\r\n}\r\n\r\nexport function validateUniverseConfig(data: unknown): ValidationResult<UniverseConfig> {\r\n  return validateData(UniverseConfigSchema, data)\r\n}\r\n\r\nexport function validateMarketsIndicatorConfig(data: unknown): ValidationResult<MarketsIndicatorConfig> {\r\n  return validateData(MarketsIndicatorConfigSchema, data)\r\n}\r\n\r\n// ============================================================================\r\n// Symbol Validation Functions\r\n// ============================================================================\r\n\r\nexport function validateSymbolFormat(symbol: string): boolean {\r\n  const symbolSchema = z.string().max(10).regex(/^[A-Z0-9.-]+$/)\r\n  const trimmedSymbol = symbol.trim()\r\n  // Check if symbol was already trimmed (no leading/trailing spaces)\r\n  if (trimmedSymbol !== symbol) return false\r\n  return symbolSchema.safeParse(trimmedSymbol).success\r\n}\r\n\r\nexport function validateSymbolInUniverse(symbol: string, universe: string[]): boolean {\r\n  return universe.includes(symbol.toUpperCase())\r\n}\r\n\r\nexport function validateNoDuplicateSymbol(symbol: string, existingSymbols: string[]): boolean {\r\n  const normalizedSymbol = symbol.toUpperCase()\r\n  const normalizedExisting = existingSymbols.map(s => s.toUpperCase())\r\n  return !normalizedExisting.includes(normalizedSymbol)\r\n}\r\n\r\nexport function validateHoldingsCost(cost: number): ValidationResult<number> {\r\n  const costSchema = z.number().positive()\r\n  const result = costSchema.safeParse(cost)\r\n  if (result.success) {\r\n    return { success: true, data: result.data }\r\n  } else {\r\n    return {\r\n      success: false,\r\n      error: {\r\n        message: 'Cost must be positive',\r\n        details: result.error.errors\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// ============================================================================\r\n// Import/Export Validation\r\n// ============================================================================\r\n\r\nexport function validateImportFileSize(file: File): ValidationResult<File> {\r\n  const maxSizeBytes = 256 * 1024 // 256KB\r\n  if (file.size > maxSizeBytes) {\r\n    return {\r\n      success: false,\r\n      error: {\r\n        message: `File size ${Math.round(file.size / 1024)}KB exceeds maximum of 256KB`,\r\n        code: 'FILE_TOO_LARGE'\r\n      }\r\n    }\r\n  }\r\n  return { success: true, data: file }\r\n}\r\n\r\nexport function validateImportData(data: unknown): ValidationResult<UserState> {\r\n  // First check if it's a valid object with known top-level keys\r\n  const allowedKeys = ['schema_version', 'watchlist', 'holdings', 'settings', 'cache', 'diagnostics']\r\n  \r\n  if (typeof data !== 'object' || data === null) {\r\n    return {\r\n      success: false,\r\n      error: {\r\n        message: 'Import data must be a valid JSON object',\r\n        code: 'INVALID_FORMAT'\r\n      }\r\n    }\r\n  }\r\n  \r\n  const dataKeys = Object.keys(data as object)\r\n  const unknownKeys = dataKeys.filter(key => !allowedKeys.includes(key))\r\n  \r\n  if (unknownKeys.length > 0) {\r\n    return {\r\n      success: false,\r\n      error: {\r\n        message: `Unknown keys found: ${unknownKeys.join(', ')}`,\r\n        code: 'UNKNOWN_KEYS',\r\n        details: { unknownKeys }\r\n      }\r\n    }\r\n  }\r\n  \r\n  // Then validate the full schema\r\n  return validateUserState(data)\r\n}","/**\r\n * StateManager for localStorage-based user state management\r\n * Handles schema versioning, migration, and validation\r\n */\r\n\r\nimport type { UserState, ValidationResult } from '@/types'\r\nimport { validateUserState, validateImportData } from './validation'\r\n\r\nexport class StateManager {\r\n  private static readonly STORAGE_KEY = 'investment-dashboard-state'\r\n  private static readonly CURRENT_SCHEMA_VERSION = '1.0.0'\r\n  \r\n  private static readonly DEFAULT_STATE: UserState = {\r\n    schema_version: StateManager.CURRENT_SCHEMA_VERSION,\r\n    watchlist: [],\r\n    holdings: {},\r\n    settings: {\r\n      scraping_enabled: false,\r\n      degradation_enabled: true,\r\n      ga_enabled: false,\r\n      clarity_enabled: false\r\n    },\r\n    cache: {},\r\n    diagnostics: {}\r\n  }\r\n\r\n  /**\r\n   * Load user state from localStorage with validation and migration\r\n   */\r\n  static loadState(): UserState {\r\n    try {\r\n      const stored = localStorage.getItem(StateManager.STORAGE_KEY)\r\n      if (!stored) {\r\n        return { ...StateManager.DEFAULT_STATE }\r\n      }\r\n\r\n      const parsed = JSON.parse(stored)\r\n      const migrated = StateManager.migrateState(parsed)\r\n      const validation = validateUserState(migrated)\r\n      \r\n      if (validation.success && validation.data) {\r\n        return validation.data\r\n      } else {\r\n        console.warn('Invalid state in localStorage, using defaults:', validation.error)\r\n        return { ...StateManager.DEFAULT_STATE }\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load state from localStorage:', error)\r\n      return { ...StateManager.DEFAULT_STATE }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Save user state to localStorage with validation\r\n   */\r\n  static saveState(state: UserState): ValidationResult<UserState> {\r\n    const validation = validateUserState(state)\r\n    if (!validation.success) {\r\n      return validation\r\n    }\r\n\r\n    try {\r\n      localStorage.setItem(StateManager.STORAGE_KEY, JSON.stringify(state))\r\n      return { success: true, data: state }\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        error: {\r\n          message: 'Failed to save state to localStorage',\r\n          details: { error: String(error) }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clear all user state from localStorage\r\n   */\r\n  static clearState(): void {\r\n    localStorage.removeItem(StateManager.STORAGE_KEY)\r\n  }\r\n\r\n  /**\r\n   * Export user state as JSON string\r\n   */\r\n  static exportState(): string {\r\n    const state = StateManager.loadState()\r\n    return JSON.stringify(state, null, 2)\r\n  }\r\n\r\n  /**\r\n   * Import user state from JSON string with validation\r\n   */\r\n  static importState(jsonData: string, dryRun: boolean = false): ValidationResult<UserState> {\r\n    try {\r\n      const parsed = JSON.parse(jsonData)\r\n      const validation = validateImportData(parsed)\r\n      \r\n      if (!validation.success) {\r\n        return validation\r\n      }\r\n\r\n      const migrated = StateManager.migrateState(validation.data!)\r\n      const finalValidation = validateUserState(migrated)\r\n      \r\n      if (!finalValidation.success) {\r\n        return finalValidation\r\n      }\r\n\r\n      if (!dryRun) {\r\n        const saveResult = StateManager.saveState(finalValidation.data!)\r\n        if (!saveResult.success) {\r\n          return saveResult\r\n        }\r\n      }\r\n\r\n      return { success: true, data: finalValidation.data }\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        error: {\r\n          message: 'Invalid JSON format',\r\n          details: { error: String(error) }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update watchlist with validation\r\n   */\r\n  static updateWatchlist(symbols: string[]): ValidationResult<UserState> {\r\n    const currentState = StateManager.loadState()\r\n    const newState: UserState = {\r\n      ...currentState,\r\n      watchlist: symbols\r\n    }\r\n    return StateManager.saveState(newState)\r\n  }\r\n\r\n  /**\r\n   * Add symbol to watchlist\r\n   */\r\n  static addToWatchlist(symbol: string): ValidationResult<UserState> {\r\n    const currentState = StateManager.loadState()\r\n    if (currentState.watchlist.includes(symbol.toUpperCase())) {\r\n      return {\r\n        success: false,\r\n        error: {\r\n          message: 'Symbol already in watchlist',\r\n          code: 'DUPLICATE_SYMBOL'\r\n        }\r\n      }\r\n    }\r\n\r\n    const newWatchlist = [...currentState.watchlist, symbol.toUpperCase()]\r\n    return StateManager.updateWatchlist(newWatchlist)\r\n  }\r\n\r\n  /**\r\n   * Remove symbol from watchlist\r\n   */\r\n  static removeFromWatchlist(symbol: string): ValidationResult<UserState> {\r\n    const currentState = StateManager.loadState()\r\n    const newWatchlist = currentState.watchlist.filter(s => s !== symbol.toUpperCase())\r\n    return StateManager.updateWatchlist(newWatchlist)\r\n  }\r\n\r\n  /**\r\n   * Update holdings for a symbol\r\n   */\r\n  static updateHolding(symbol: string, avgCost: number, shares?: number): ValidationResult<UserState> {\r\n    const currentState = StateManager.loadState()\r\n    const newState: UserState = {\r\n      ...currentState,\r\n      holdings: {\r\n        ...currentState.holdings,\r\n        [symbol.toUpperCase()]: {\r\n          avg_cost_usd: avgCost,\r\n          ...(shares !== undefined && { shares })\r\n        }\r\n      }\r\n    }\r\n    return StateManager.saveState(newState)\r\n  }\r\n\r\n  /**\r\n   * Remove holding for a symbol\r\n   */\r\n  static removeHolding(symbol: string): ValidationResult<UserState> {\r\n    const currentState = StateManager.loadState()\r\n    const newHoldings = { ...currentState.holdings }\r\n    delete newHoldings[symbol.toUpperCase()]\r\n    \r\n    const newState: UserState = {\r\n      ...currentState,\r\n      holdings: newHoldings\r\n    }\r\n    return StateManager.saveState(newState)\r\n  }\r\n\r\n  /**\r\n   * Update user settings\r\n   */\r\n  static updateSettings(settings: Partial<UserState['settings']>): ValidationResult<UserState> {\r\n    const currentState = StateManager.loadState()\r\n    const newState: UserState = {\r\n      ...currentState,\r\n      settings: {\r\n        ...currentState.settings,\r\n        ...settings\r\n      }\r\n    }\r\n    return StateManager.saveState(newState)\r\n  }\r\n\r\n  /**\r\n   * Update cache data\r\n   */\r\n  static updateCache(cache: Partial<UserState['cache']>): ValidationResult<UserState> {\r\n    const currentState = StateManager.loadState()\r\n    const newState: UserState = {\r\n      ...currentState,\r\n      cache: {\r\n        ...currentState.cache,\r\n        ...cache\r\n      }\r\n    }\r\n    return StateManager.saveState(newState)\r\n  }\r\n\r\n  /**\r\n   * Record import result in diagnostics\r\n   */\r\n  static recordImportResult(result: UserState['diagnostics']['last_import_result']): ValidationResult<UserState> {\r\n    const currentState = StateManager.loadState()\r\n    const newState: UserState = {\r\n      ...currentState,\r\n      diagnostics: {\r\n        ...currentState.diagnostics,\r\n        last_import_result: result\r\n      }\r\n    }\r\n    return StateManager.saveState(newState)\r\n  }\r\n\r\n  /**\r\n   * Migrate state from older schema versions\r\n   */\r\n  private static migrateState(state: any): UserState {\r\n    // Handle missing schema_version (assume v1.0.0)\r\n    if (!state.schema_version) {\r\n      state.schema_version = '1.0.0'\r\n    }\r\n\r\n    // Future migrations would go here\r\n    // Example:\r\n    // if (state.schema_version === '1.0.0') {\r\n    //   // Migrate to 1.1.0\r\n    //   state = migrateFrom1_0_0To1_1_0(state)\r\n    // }\r\n\r\n    // Ensure all required fields exist with defaults\r\n    const migrated: UserState = {\r\n      schema_version: StateManager.CURRENT_SCHEMA_VERSION,\r\n      watchlist: state.watchlist || [],\r\n      holdings: state.holdings || {},\r\n      settings: {\r\n        scraping_enabled: state.settings?.scraping_enabled ?? false,\r\n        degradation_enabled: state.settings?.degradation_enabled ?? true,\r\n        ga_enabled: state.settings?.ga_enabled ?? false,\r\n        clarity_enabled: state.settings?.clarity_enabled ?? false\r\n      },\r\n      cache: state.cache || {},\r\n      diagnostics: state.diagnostics || {}\r\n    }\r\n\r\n    return migrated\r\n  }\r\n\r\n  /**\r\n   * Get current schema version\r\n   */\r\n  static getCurrentSchemaVersion(): string {\r\n    return StateManager.CURRENT_SCHEMA_VERSION\r\n  }\r\n\r\n  /**\r\n   * Check if localStorage is available\r\n   */\r\n  static isStorageAvailable(): boolean {\r\n    try {\r\n      const test = '__storage_test__'\r\n      localStorage.setItem(test, test)\r\n      localStorage.removeItem(test)\r\n      return true\r\n    } catch {\r\n      return false\r\n    }\r\n  }\r\n}","/**\r\n * Data Fetcher - å¯¦ç¾ PRD è¦æ±‚çš„ status-first + fallback ç­–ç•¥\r\n * \r\n * Fetch é †åº:\r\n * 1. /data/status.json (æª¢æŸ¥æ™‚é–“æˆ³)\r\n * 2. ç¶²è·¯å¿«ç…§ (latest)\r\n * 3. localStorage å¿«ç…§ (last-known-good)\r\n * 4. é¡¯ç¤º N/A + stale indicator\r\n */\r\n\r\nimport type { \r\n  SystemStatus, \r\n  QuotesSnapshot, \r\n  DailySnapshot, \r\n  MetadataSnapshot\r\n} from '@/types'\r\nimport { \r\n  validateSystemStatus,\r\n  validateQuotesSnapshot, \r\n  validateDailySnapshot,\r\n  validateMetadataSnapshot\r\n} from '@/utils/validation'\r\nimport { StateManager } from '@/utils/state-manager'\r\n\r\nexport interface FetchResult<T> {\r\n  data: T | null\r\n  source: 'network' | 'cache' | 'fallback'\r\n  stale_level: 'fresh' | 'stale' | 'very_stale'\r\n  error?: string\r\n  as_of?: string\r\n}\r\n\r\nexport class DataFetcher {\r\n  private baseUrl: string\r\n  private cacheBustingEnabled: boolean\r\n\r\n  constructor(baseUrl: string = '', cacheBustingEnabled: boolean = true) {\r\n    this.baseUrl = baseUrl\r\n    this.cacheBustingEnabled = cacheBustingEnabled\r\n  }\r\n\r\n  /**\r\n   * ç²å–ç³»çµ±ç‹€æ…‹ - æ‰€æœ‰å…¶ä»–è«‹æ±‚çš„åŸºç¤\r\n   */\r\n  async fetchSystemStatus(): Promise<FetchResult<SystemStatus>> {\r\n    try {\r\n      const response = await fetch(`${this.baseUrl}/data/status.json`)\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}`)\r\n      }\r\n\r\n      const data = await response.json()\r\n      const validation = validateSystemStatus(data)\r\n      \r\n      if (!validation.success) {\r\n        throw new Error(`Invalid status.json: ${validation.error?.message}`)\r\n      }\r\n\r\n      return {\r\n        data: validation.data!,\r\n        source: 'network',\r\n        stale_level: 'fresh',\r\n        as_of: validation.data!.last_updated\r\n      }\r\n    } catch (error) {\r\n      console.warn('Failed to fetch system status:', error)\r\n      \r\n      // Fallback to cached status if available\r\n      const state = StateManager.loadState()\r\n      if (state.cache.last_daily_snapshot) {\r\n        return {\r\n          data: null, // We don't cache status.json separately\r\n          source: 'fallback',\r\n          stale_level: 'very_stale',\r\n          error: String(error)\r\n        }\r\n      }\r\n\r\n      return {\r\n        data: null,\r\n        source: 'fallback', \r\n        stale_level: 'very_stale',\r\n        error: String(error)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ç²å–è‚¡åƒ¹å¿«ç…§ - å¯¦ç¾ last-known-good ç­–ç•¥\r\n   */\r\n  async fetchQuotesSnapshot(): Promise<FetchResult<QuotesSnapshot>> {\r\n    try {\r\n      // 1. å…ˆæª¢æŸ¥ status.json ç²å–æ™‚é–“æˆ³\r\n      const statusResult = await this.fetchSystemStatus()\r\n      let cacheBuster = ''\r\n      \r\n      if (this.cacheBustingEnabled && statusResult.data?.last_updated) {\r\n        const timestamp = new Date(statusResult.data.last_updated).getTime()\r\n        cacheBuster = `?t=${timestamp}`\r\n      }\r\n\r\n      // 2. å˜—è©¦ç²å–æœ€æ–°å¿«ç…§\r\n      const response = await fetch(`${this.baseUrl}/data/quotes/latest.json${cacheBuster}`)\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}`)\r\n      }\r\n\r\n      const data = await response.json()\r\n      const validation = validateQuotesSnapshot(data)\r\n      \r\n      if (!validation.success) {\r\n        throw new Error(`Invalid quotes snapshot: ${validation.error?.message}`)\r\n      }\r\n\r\n      // 3. æˆåŠŸæ™‚æ›´æ–° localStorage cache\r\n      const userState = StateManager.loadState()\r\n      StateManager.updateCache({\r\n        last_quotes_snapshot: validation.data!\r\n      })\r\n\r\n      return {\r\n        data: validation.data!,\r\n        source: 'network',\r\n        stale_level: this.calculateStaleness(validation.data!.as_of),\r\n        as_of: validation.data!.as_of\r\n      }\r\n\r\n    } catch (error) {\r\n      console.warn('Failed to fetch quotes snapshot:', error)\r\n      \r\n      // 4. Fallback to localStorage cache\r\n      const userState = StateManager.loadState()\r\n      if (userState.cache.last_quotes_snapshot) {\r\n        return {\r\n          data: userState.cache.last_quotes_snapshot,\r\n          source: 'cache',\r\n          stale_level: this.calculateStaleness(userState.cache.last_quotes_snapshot.as_of),\r\n          as_of: userState.cache.last_quotes_snapshot.as_of,\r\n          error: String(error)\r\n        }\r\n      }\r\n\r\n      // 5. æœ€çµ‚ fallback\r\n      return {\r\n        data: null,\r\n        source: 'fallback',\r\n        stale_level: 'very_stale',\r\n        error: String(error)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ç²å–æ¯æ—¥å¿«ç…§\r\n   */\r\n  async fetchDailySnapshot(date?: string): Promise<FetchResult<DailySnapshot>> {\r\n    try {\r\n      // ä½¿ç”¨ä»Šå¤©çš„æ—¥æœŸ (Taipei timezone) å¦‚æœæ²’æœ‰æŒ‡å®š\r\n      const targetDate = date || this.getTaipeiDateString()\r\n      \r\n      const statusResult = await this.fetchSystemStatus()\r\n      let cacheBuster = ''\r\n      \r\n      if (this.cacheBustingEnabled && statusResult.data?.last_updated) {\r\n        const timestamp = new Date(statusResult.data.last_updated).getTime()\r\n        cacheBuster = `?t=${timestamp}`\r\n      }\r\n\r\n      const response = await fetch(`${this.baseUrl}/data/daily/${targetDate}.json${cacheBuster}`)\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}`)\r\n      }\r\n\r\n      const data = await response.json()\r\n      const validation = validateDailySnapshot(data)\r\n      \r\n      if (!validation.success) {\r\n        throw new Error(`Invalid daily snapshot: ${validation.error?.message}`)\r\n      }\r\n\r\n      // æ›´æ–° cache\r\n      StateManager.updateCache({\r\n        last_daily_snapshot: validation.data!\r\n      })\r\n\r\n      return {\r\n        data: validation.data!,\r\n        source: 'network',\r\n        stale_level: this.calculateStaleness(validation.data!.generated_at_utc),\r\n        as_of: validation.data!.generated_at_utc\r\n      }\r\n\r\n    } catch (error) {\r\n      console.warn('Failed to fetch daily snapshot:', error)\r\n      \r\n      // Fallback to cache\r\n      const userState = StateManager.loadState()\r\n      if (userState.cache.last_daily_snapshot) {\r\n        return {\r\n          data: userState.cache.last_daily_snapshot,\r\n          source: 'cache',\r\n          stale_level: this.calculateStaleness(userState.cache.last_daily_snapshot.generated_at_utc),\r\n          as_of: userState.cache.last_daily_snapshot.generated_at_utc,\r\n          error: String(error)\r\n        }\r\n      }\r\n\r\n      return {\r\n        data: null,\r\n        source: 'fallback',\r\n        stale_level: 'very_stale',\r\n        error: String(error)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ç²å–å…ƒæ•¸æ“šå¿«ç…§\r\n   */\r\n  async fetchMetadataSnapshot(): Promise<FetchResult<MetadataSnapshot>> {\r\n    try {\r\n      const statusResult = await this.fetchSystemStatus()\r\n      let cacheBuster = ''\r\n      \r\n      if (this.cacheBustingEnabled && statusResult.data?.last_updated) {\r\n        const timestamp = new Date(statusResult.data.last_updated).getTime()\r\n        cacheBuster = `?t=${timestamp}`\r\n      }\r\n\r\n      const response = await fetch(`${this.baseUrl}/data/symbols_metadata.json${cacheBuster}`)\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}`)\r\n      }\r\n\r\n      const data = await response.json()\r\n      const validation = validateMetadataSnapshot(data)\r\n      \r\n      if (!validation.success) {\r\n        throw new Error(`Invalid metadata snapshot: ${validation.error?.message}`)\r\n      }\r\n\r\n      // æ›´æ–° cache\r\n      StateManager.updateCache({\r\n        last_metadata: validation.data!\r\n      })\r\n\r\n      return {\r\n        data: validation.data!,\r\n        source: 'network',\r\n        stale_level: this.calculateStaleness(validation.data!.as_of),\r\n        as_of: validation.data!.as_of\r\n      }\r\n\r\n    } catch (error) {\r\n      console.warn('Failed to fetch metadata snapshot:', error)\r\n      \r\n      // Fallback to cache\r\n      const userState = StateManager.loadState()\r\n      if (userState.cache.last_metadata) {\r\n        return {\r\n          data: userState.cache.last_metadata,\r\n          source: 'cache',\r\n          stale_level: this.calculateStaleness(userState.cache.last_metadata.as_of),\r\n          as_of: userState.cache.last_metadata.as_of,\r\n          error: String(error)\r\n        }\r\n      }\r\n\r\n      return {\r\n        data: null,\r\n        source: 'fallback',\r\n        stale_level: 'very_stale',\r\n        error: String(error)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * è¨ˆç®—æ•¸æ“šæ–°é®®åº¦\r\n   */\r\n  private calculateStaleness(asOfString: string): 'fresh' | 'stale' | 'very_stale' {\r\n    try {\r\n      const asOf = new Date(asOfString)\r\n      const now = new Date()\r\n      const ageMinutes = (now.getTime() - asOf.getTime()) / (1000 * 60)\r\n\r\n      if (ageMinutes <= 60) return 'fresh'        // 1 å°æ™‚å…§\r\n      if (ageMinutes <= 24 * 60) return 'stale'  // 24 å°æ™‚å…§\r\n      return 'very_stale'                         // è¶…é 24 å°æ™‚\r\n    } catch {\r\n      return 'very_stale'\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ç²å– Taipei æ™‚å€çš„æ—¥æœŸå­—ä¸² (YYYY-MM-DD)\r\n   */\r\n  private getTaipeiDateString(): string {\r\n    const now = new Date()\r\n    // è½‰æ›ç‚º Taipei æ™‚å€ (UTC+8)\r\n    const taipeiTime = new Date(now.getTime() + (8 * 60 * 60 * 1000))\r\n    return taipeiTime.toISOString().split('T')[0]\r\n  }\r\n}\r\n\r\n// å°å‡ºå–®ä¾‹å¯¦ä¾‹ - æ ¹æ“šç’°å¢ƒè¨­ç½®æ­£ç¢ºçš„åŸºç¤è·¯å¾‘\r\nconst getBaseUrl = () => {\r\n  if (typeof window !== 'undefined') {\r\n    // åœ¨ç€è¦½å™¨ç’°å¢ƒä¸­ï¼Œæª¢æŸ¥æ˜¯å¦åœ¨ GitHub Pages\r\n    const hostname = window.location.hostname\r\n    const pathname = window.location.pathname\r\n    \r\n    if (hostname === 'romarin-hsieh.github.io' && pathname.startsWith('/investment-dashboard')) {\r\n      return '/investment-dashboard'\r\n    }\r\n  }\r\n  \r\n  // é–‹ç™¼ç’°å¢ƒæˆ–å…¶ä»–ç’°å¢ƒä½¿ç”¨ç›¸å°è·¯å¾‘\r\n  return ''\r\n}\r\n\r\nexport const dataFetcher = new DataFetcher(getBaseUrl())","// å‹•æ…‹å…ƒæ•¸æ“šæœå‹™ - ä½¿ç”¨ Yahoo Finance API ç²å–å³æ™‚çš„ sector å’Œ industry ä¿¡æ¯\r\nimport { yahooFinanceAPI } from './yahooFinanceApi.js'\r\n\r\nclass DynamicMetadataService {\r\n  constructor() {\r\n    this.cache = new Map()\r\n    this.cacheExpiry = 24 * 60 * 60 * 1000 // 24 hours - sector/industry ä¿¡æ¯è®ŠåŒ–ä¸é »ç¹\r\n    this.batchSize = 5 // æ‰¹é‡è™•ç†å¤§å°\r\n    this.requestDelay = 1000 // è«‹æ±‚é–“éš” (æ¯«ç§’)\r\n  }\r\n\r\n  // ç²å–å–®å€‹è‚¡ç¥¨çš„å…ƒæ•¸æ“š\r\n  async getSymbolMetadata(symbol) {\r\n    try {\r\n      // æª¢æŸ¥ç·©å­˜\r\n      if (this.cache.has(symbol)) {\r\n        const cached = this.cache.get(symbol)\r\n        if (Date.now() - cached.timestamp < this.cacheExpiry) {\r\n          console.log(`Using cached metadata for ${symbol}`)\r\n          return cached.data\r\n        }\r\n      }\r\n\r\n      console.log(`Fetching fresh metadata for ${symbol} from Yahoo Finance API...`)\r\n      \r\n      // å¾ Yahoo Finance API ç²å–è‚¡ç¥¨ä¿¡æ¯\r\n      const stockInfo = await yahooFinanceAPI.getStockInfo(symbol)\r\n      \r\n      if (stockInfo && !stockInfo.error && stockInfo.sector !== 'Unknown') {\r\n        // è½‰æ›ç‚ºæ¨™æº–å…ƒæ•¸æ“šæ ¼å¼\r\n        const metadata = {\r\n          symbol: symbol,\r\n          sector: stockInfo.sector || 'Unknown',\r\n          industry: stockInfo.industry || 'Unknown Industry',\r\n          exchange: stockInfo.exchange || this.getDefaultExchange(symbol),\r\n          marketCap: stockInfo.marketCap,\r\n          marketCapFormatted: stockInfo.marketCapFormatted,\r\n          marketCapCategory: stockInfo.marketCapCategory || 'unknown',\r\n          currency: stockInfo.currency || 'USD',\r\n          country: stockInfo.country || 'Unknown',\r\n          website: stockInfo.website,\r\n          employees: stockInfo.employees,\r\n          businessSummary: stockInfo.businessSummary,\r\n          confidence: stockInfo.confidence || 0.95, // Yahoo Finance API ä¿¡å¿ƒåº¦å¾ˆé«˜\r\n          source: 'Yahoo Finance API (Live)',\r\n          lastUpdated: stockInfo.lastUpdated || new Date().toISOString(),\r\n          isLive: true // æ¨™è¨˜ç‚ºå³æ™‚æ•¸æ“š\r\n        }\r\n\r\n        // ç·©å­˜çµæœ\r\n        this.cache.set(symbol, {\r\n          data: metadata,\r\n          timestamp: Date.now()\r\n        })\r\n\r\n        console.log(`Successfully fetched metadata for ${symbol}:`, {\r\n          sector: metadata.sector,\r\n          industry: metadata.industry,\r\n          confidence: metadata.confidence\r\n        })\r\n\r\n        return metadata\r\n      } else {\r\n        // API å¤±æ•—æˆ–è¿”å›ç„¡æ•ˆæ•¸æ“šï¼Œä½¿ç”¨éœæ…‹æ•¸æ“šä½œç‚ºå›é€€\r\n        console.warn(`Yahoo Finance API failed for ${symbol}, using static fallback data`)\r\n        return this.getStaticFallbackMetadata(symbol)\r\n      }\r\n    } catch (error) {\r\n      console.error(`Error fetching metadata for ${symbol}:`, error)\r\n      return this.getStaticFallbackMetadata(symbol)\r\n    }\r\n  }\r\n\r\n  // éœæ…‹å›é€€æ•¸æ“š (åŸºæ–¼åŸæœ‰çš„ symbols_metadata.json)\r\n  getStaticFallbackMetadata(symbol) {\r\n    const staticData = {\r\n      'ASTS': { sector: 'Communication Services', industry: 'Satellite Communications', confidence: 0.75 },\r\n      'RIVN': { sector: 'Consumer Cyclical', industry: 'Electric Vehicles', confidence: 0.90 },\r\n      'PL': { sector: 'Technology', industry: 'Satellite Imaging & Analytics', confidence: 0.90 },\r\n      'ONDS': { sector: 'Technology', industry: 'Industrial IoT Solutions', confidence: 0.75 },\r\n      'RDW': { sector: 'Industrials', industry: 'Space Infrastructure', confidence: 0.75 },\r\n      'AVAV': { sector: 'Industrials', industry: 'Aerospace & Defense', confidence: 0.75 },\r\n      'MDB': { sector: 'Technology', industry: 'Database Software', confidence: 0.90 },\r\n      'ORCL': { sector: 'Technology', industry: 'Enterprise Software', confidence: 0.90 },\r\n      'TSM': { sector: 'Technology', industry: 'Semiconductors', confidence: 0.90 },\r\n      'RKLB': { sector: 'Industrials', industry: 'Aerospace & Defense', confidence: 0.90 },\r\n      'CRM': { sector: 'Technology', industry: 'Enterprise Software', confidence: 0.90 },\r\n      'NVDA': { sector: 'Technology', industry: 'Semiconductors', confidence: 0.90 },\r\n      'AVGO': { sector: 'Technology', industry: 'Semiconductors', confidence: 0.90 },\r\n      'AMZN': { sector: 'Consumer Cyclical', industry: 'Internet Retail', confidence: 0.90 },\r\n      'GOOG': { sector: 'Communication Services', industry: 'Internet Content & Information', confidence: 0.90 },\r\n      'META': { sector: 'Communication Services', industry: 'Internet Content & Information', confidence: 0.90 },\r\n      'NFLX': { sector: 'Communication Services', industry: 'Entertainment', confidence: 0.90 },\r\n      'LEU': { sector: 'Energy', industry: 'Uranium', confidence: 0.75 },\r\n      'SMR': { sector: 'Energy', industry: 'Nuclear Energy', confidence: 0.75 },\r\n      'CRWV': { sector: 'Technology', industry: 'Software - Application', confidence: 0.75 },\r\n      'IONQ': { sector: 'Technology', industry: 'Quantum Computing', confidence: 0.75 },\r\n      'PLTR': { sector: 'Technology', industry: 'Software - Infrastructure', confidence: 0.90 },\r\n      'HIMS': { sector: 'Healthcare', industry: 'Health Information Services', confidence: 0.75 },\r\n      'TSLA': { sector: 'Consumer Cyclical', industry: 'Auto Manufacturers', confidence: 0.90 }\r\n    }\r\n\r\n    const fallbackData = staticData[symbol] || { \r\n      sector: 'Unknown', \r\n      industry: 'Unknown Industry', \r\n      confidence: 0.0 \r\n    }\r\n\r\n    const metadata = {\r\n      symbol: symbol,\r\n      sector: fallbackData.sector,\r\n      industry: fallbackData.industry,\r\n      exchange: this.getDefaultExchange(symbol),\r\n      marketCap: null,\r\n      marketCapFormatted: 'N/A',\r\n      marketCapCategory: 'unknown',\r\n      currency: 'USD',\r\n      country: 'Unknown',\r\n      website: null,\r\n      employees: null,\r\n      businessSummary: null,\r\n      confidence: fallbackData.confidence,\r\n      source: 'Static Fallback Data',\r\n      lastUpdated: new Date().toISOString(),\r\n      isLive: false\r\n    }\r\n\r\n    // ç·©å­˜å›é€€æ•¸æ“š (è¼ƒçŸ­çš„ç·©å­˜æ™‚é–“)\r\n    this.cache.set(symbol, {\r\n      data: metadata,\r\n      timestamp: Date.now()\r\n    })\r\n\r\n    console.log(`Using static fallback for ${symbol}:`, {\r\n      sector: metadata.sector,\r\n      industry: metadata.industry,\r\n      confidence: metadata.confidence\r\n    })\r\n\r\n    return metadata\r\n  }\r\n\r\n  // æ‰¹é‡ç²å–å¤šå€‹è‚¡ç¥¨çš„å…ƒæ•¸æ“š\r\n  async getBatchMetadata(symbols) {\r\n    const results = new Map()\r\n    const batches = this.createBatches(symbols, this.batchSize)\r\n    \r\n    console.log(`Fetching metadata for ${symbols.length} symbols in ${batches.length} batches...`)\r\n\r\n    for (let i = 0; i < batches.length; i++) {\r\n      const batch = batches[i]\r\n      console.log(`Processing batch ${i + 1}/${batches.length} (${batch.length} symbols)`)\r\n\r\n      // ä¸¦è¡Œè™•ç†æ‰¹æ¬¡å…§çš„è«‹æ±‚\r\n      const batchPromises = batch.map(symbol => \r\n        this.getSymbolMetadata(symbol).catch(error => {\r\n          console.error(`Failed to fetch metadata for ${symbol}:`, error)\r\n          return this.getDefaultMetadata(symbol)\r\n        })\r\n      )\r\n\r\n      const batchResults = await Promise.all(batchPromises)\r\n      \r\n      // å­˜å„²çµæœ\r\n      batch.forEach((symbol, index) => {\r\n        results.set(symbol, batchResults[index])\r\n      })\r\n\r\n      // åœ¨æ‰¹æ¬¡ä¹‹é–“æ·»åŠ å»¶é²ï¼Œé¿å… API é™åˆ¶\r\n      if (i < batches.length - 1) {\r\n        console.log(`Waiting ${this.requestDelay}ms before next batch...`)\r\n        await this.delay(this.requestDelay)\r\n      }\r\n    }\r\n\r\n    console.log(`Completed fetching metadata for ${results.size} symbols`)\r\n    return results\r\n  }\r\n\r\n  // ç²å–é»˜èªå…ƒæ•¸æ“š\r\n  getDefaultMetadata(symbol) {\r\n    return {\r\n      symbol: symbol,\r\n      sector: 'Unknown',\r\n      industry: 'Unknown Industry',\r\n      exchange: this.getDefaultExchange(symbol),\r\n      marketCap: null,\r\n      marketCapFormatted: 'N/A',\r\n      marketCapCategory: 'unknown',\r\n      currency: 'USD',\r\n      country: 'Unknown',\r\n      website: null,\r\n      employees: null,\r\n      businessSummary: null,\r\n      confidence: 0.0,\r\n      source: 'Default (API Failed)',\r\n      lastUpdated: new Date().toISOString(),\r\n      isLive: false\r\n    }\r\n  }\r\n\r\n  // ç²å–é»˜èªäº¤æ˜“æ‰€\r\n  getDefaultExchange(symbol) {\r\n    const nasdaqSymbols = ['AAPL', 'MSFT', 'GOOGL', 'GOOG', 'AMZN', 'TSLA', 'NVDA', 'META', 'NFLX', 'RKLB', 'ASTS', 'RIVN', 'MDB', 'ONDS', 'PL', 'AVAV', 'CRM', 'AVGO', 'LEU', 'SMR', 'CRWV', 'IONQ', 'PLTR', 'HIMS']\r\n    const nyseSymbols = ['TSM', 'ORCL', 'RDW']\r\n    \r\n    if (nasdaqSymbols.includes(symbol)) {\r\n      return 'NASDAQ'\r\n    } else if (nyseSymbols.includes(symbol)) {\r\n      return 'NYSE'\r\n    }\r\n    \r\n    return 'NASDAQ' // Default\r\n  }\r\n\r\n  // ç²å–è¡Œæ¥­é¡¯ç¤ºåç¨± (å…¼å®¹èˆŠç‰ˆ API)\r\n  getIndustryDisplay(metadata) {\r\n    if (!metadata || metadata.confidence < 0.7) {\r\n      return 'Unknown Industry'\r\n    }\r\n    \r\n    return metadata.industry || metadata.sector || 'Unknown Industry'\r\n  }\r\n\r\n  // ç²å–è¡Œæ¥­åˆ†é¡ (ç”¨æ–¼ CSS æ¨£å¼)\r\n  getIndustryCategory(metadata) {\r\n    const industry = this.getIndustryDisplay(metadata)\r\n    \r\n    const industryCategories = {\r\n      // ç§‘æŠ€é¡\r\n      'Software - Application': 'tech-software',\r\n      'Software - Infrastructure': 'tech-software',\r\n      'Database Software': 'tech-software',\r\n      'Enterprise Software': 'tech-software',\r\n      'Internet Content & Information': 'tech-internet',\r\n      'Semiconductors': 'tech-hardware',\r\n      'Quantum Computing': 'tech-quantum',\r\n      \r\n      // å·¥æ¥­é¡\r\n      'Aerospace & Defense': 'industrial-aerospace',\r\n      'Space Infrastructure': 'industrial-space',\r\n      'Industrial IoT Solutions': 'tech-iot',\r\n      \r\n      // é€šè¨Šé¡\r\n      'Satellite Communications': 'communications',\r\n      'Satellite Imaging & Analytics': 'tech-satellite',\r\n      \r\n      // æ±½è»Šé¡\r\n      'Auto Manufacturers': 'automotive',\r\n      'Electric Vehicles': 'automotive',\r\n      \r\n      // é›¶å”®é¡\r\n      'Internet Retail': 'retail',\r\n      \r\n      // å¨›æ¨‚é¡\r\n      'Entertainment': 'entertainment',\r\n      \r\n      // èƒ½æºé¡\r\n      'Uranium': 'energy-nuclear',\r\n      'Nuclear Energy': 'energy-nuclear',\r\n      \r\n      // é†«ç™‚é¡\r\n      'Health Information Services': 'healthcare',\r\n      \r\n      // æœªçŸ¥\r\n      'Unknown Industry': 'unknown'\r\n    }\r\n    \r\n    return industryCategories[industry] || 'other'\r\n  }\r\n\r\n  // ç”Ÿæˆè¡Œæ¥­çµ±è¨ˆ\r\n  generateSectorGrouping(metadataMap) {\r\n    const sectorGrouping = {}\r\n    \r\n    for (const [symbol, metadata] of metadataMap) {\r\n      const sector = metadata.sector || 'Unknown'\r\n      \r\n      if (!sectorGrouping[sector]) {\r\n        sectorGrouping[sector] = []\r\n      }\r\n      \r\n      sectorGrouping[sector].push(symbol)\r\n    }\r\n    \r\n    return sectorGrouping\r\n  }\r\n\r\n  // ç”Ÿæˆä¿¡å¿ƒåº¦åˆ†ä½ˆçµ±è¨ˆ\r\n  generateConfidenceDistribution(metadataMap) {\r\n    const distribution = {\r\n      high_confidence_0_90: 0,\r\n      medium_confidence_0_75: 0,\r\n      low_confidence_0_50: 0,\r\n      unknown_confidence: 0\r\n    }\r\n    \r\n    for (const [symbol, metadata] of metadataMap) {\r\n      const confidence = metadata.confidence || 0\r\n      \r\n      if (confidence >= 0.90) {\r\n        distribution.high_confidence_0_90++\r\n      } else if (confidence >= 0.75) {\r\n        distribution.medium_confidence_0_75++\r\n      } else if (confidence >= 0.50) {\r\n        distribution.low_confidence_0_50++\r\n      } else {\r\n        distribution.unknown_confidence++\r\n      }\r\n    }\r\n    \r\n    return distribution\r\n  }\r\n\r\n  // å‰µå»ºæ‰¹æ¬¡\r\n  createBatches(array, batchSize) {\r\n    const batches = []\r\n    for (let i = 0; i < array.length; i += batchSize) {\r\n      batches.push(array.slice(i, i + batchSize))\r\n    }\r\n    return batches\r\n  }\r\n\r\n  // å»¶é²å‡½æ•¸\r\n  delay(ms) {\r\n    return new Promise(resolve => setTimeout(resolve, ms))\r\n  }\r\n\r\n  // æ¸…é™¤ç·©å­˜\r\n  clearCache() {\r\n    this.cache.clear()\r\n    console.log('Dynamic metadata cache cleared')\r\n  }\r\n\r\n  // ç²å–ç·©å­˜çµ±è¨ˆ\r\n  getCacheStats() {\r\n    const stats = {\r\n      totalCached: this.cache.size,\r\n      cacheEntries: {}\r\n    }\r\n    \r\n    for (const [symbol, cached] of this.cache.entries()) {\r\n      stats.cacheEntries[symbol] = {\r\n        age: Date.now() - cached.timestamp,\r\n        expired: Date.now() - cached.timestamp > this.cacheExpiry,\r\n        sector: cached.data.sector,\r\n        industry: cached.data.industry,\r\n        confidence: cached.data.confidence\r\n      }\r\n    }\r\n    \r\n    return stats\r\n  }\r\n\r\n  // é ç†±ç·©å­˜ - ç‚ºå¸¸ç”¨è‚¡ç¥¨é å…ˆç²å–å…ƒæ•¸æ“š\r\n  async warmupCache(symbols) {\r\n    console.log(`Warming up metadata cache for ${symbols.length} symbols...`)\r\n    \r\n    const startTime = Date.now()\r\n    const results = await this.getBatchMetadata(symbols)\r\n    const duration = Date.now() - startTime\r\n    \r\n    console.log(`Cache warmup completed in ${duration}ms for ${results.size} symbols`)\r\n    \r\n    return {\r\n      duration,\r\n      symbolsProcessed: results.size,\r\n      successRate: (results.size / symbols.length * 100).toFixed(1) + '%'\r\n    }\r\n  }\r\n}\r\n\r\n// å°å‡ºå–®ä¾‹å¯¦ä¾‹\r\nexport const dynamicMetadataService = new DynamicMetadataService()\r\nexport default dynamicMetadataService","// Shared metadata service for stock industry information\r\n// æ”¯æ´å‹•æ…‹ API (Yahoo Finance) å’Œéœæ…‹æ–‡ä»¶å…©ç¨®æ¨¡å¼\r\nimport { dataFetcher } from '@/lib/fetcher'\r\nimport { dynamicMetadataService } from './dynamicMetadataService.js'\r\n\r\nclass MetadataService {\r\n  constructor() {\r\n    this.cache = new Map()\r\n    this.cacheExpiry = 24 * 60 * 60 * 1000 // 24 hours\r\n    this.lastFetch = null\r\n    this.metadata = null\r\n    this.useDynamicAPI = true // é è¨­ä½¿ç”¨å‹•æ…‹ API\r\n  }\r\n\r\n  // è¨­å®šæ˜¯å¦ä½¿ç”¨å‹•æ…‹ API\r\n  setUseDynamicAPI(useDynamic) {\r\n    this.useDynamicAPI = useDynamic\r\n    console.log(`Metadata service mode: ${useDynamic ? 'Dynamic API' : 'Static File'}`)\r\n  }\r\n\r\n  // Get metadata for a specific symbol\r\n  async getSymbolMetadata(symbol) {\r\n    if (this.useDynamicAPI) {\r\n      // ä½¿ç”¨å‹•æ…‹ Yahoo Finance API\r\n      return await dynamicMetadataService.getSymbolMetadata(symbol)\r\n    } else {\r\n      // ä½¿ç”¨åŸæœ‰çš„éœæ…‹æ–‡ä»¶æ–¹å¼\r\n      return await this.getStaticSymbolMetadata(symbol)\r\n    }\r\n  }\r\n\r\n  // åŸæœ‰çš„éœæ…‹æ–‡ä»¶æ–¹å¼ (ä¿ç•™ä½œç‚ºå‚™ç”¨)\r\n  async getStaticSymbolMetadata(symbol) {\r\n    // Check if we have cached metadata\r\n    if (this.cache.has(symbol)) {\r\n      const cached = this.cache.get(symbol)\r\n      if (Date.now() - cached.timestamp < this.cacheExpiry) {\r\n        return cached.data\r\n      }\r\n    }\r\n\r\n    // If no cached data or expired, fetch fresh metadata\r\n    await this.refreshMetadata()\r\n    \r\n    // Find the symbol in the metadata\r\n    if (this.metadata && this.metadata.items) {\r\n      const symbolMetadata = this.metadata.items.find(m => m.symbol === symbol)\r\n      if (symbolMetadata) {\r\n        console.log(`âœ… Found static metadata for ${symbol}:`, symbolMetadata)\r\n        // Cache the result\r\n        this.cache.set(symbol, {\r\n          data: symbolMetadata,\r\n          timestamp: Date.now()\r\n        })\r\n        return symbolMetadata\r\n      }\r\n    }\r\n\r\n    console.warn(`âŒ No metadata found for ${symbol}, using default`)\r\n    // Return default metadata if not found\r\n    const defaultMetadata = {\r\n      symbol,\r\n      sector: 'Unknown',\r\n      industry: 'Unknown Industry',\r\n      exchange: this.getDefaultExchange(symbol),\r\n      confidence: 0.0,\r\n      source: 'Static File (Default)',\r\n      isLive: false\r\n    }\r\n\r\n    this.cache.set(symbol, {\r\n      data: defaultMetadata,\r\n      timestamp: Date.now()\r\n    })\r\n\r\n    return defaultMetadata\r\n  }\r\n\r\n  // æ‰¹é‡ç²å–å…ƒæ•¸æ“š\r\n  async getBatchMetadata(symbols) {\r\n    if (this.useDynamicAPI) {\r\n      return await dynamicMetadataService.getBatchMetadata(symbols)\r\n    } else {\r\n      // éœæ…‹æ–‡ä»¶æ¨¡å¼çš„æ‰¹é‡è™•ç†\r\n      console.log(`ğŸ”„ getBatchMetadata (static mode) for ${symbols.length} symbols:`, symbols)\r\n      const results = new Map()\r\n      \r\n      // å…ˆç¢ºä¿ metadata å·²è¼‰å…¥\r\n      await this.refreshMetadata()\r\n      \r\n      for (const symbol of symbols) {\r\n        const metadata = await this.getStaticSymbolMetadata(symbol)\r\n        results.set(symbol, metadata)\r\n        \r\n        // ç‰¹åˆ¥é™¤éŒ¯ CRM å’Œ IONQ\r\n        if (['CRM', 'IONQ'].includes(symbol)) {\r\n          console.log(`ğŸ¯ getBatchMetadata result for ${symbol}:`, metadata)\r\n        }\r\n      }\r\n      \r\n      console.log(`âœ… getBatchMetadata completed, ${results.size} results`)\r\n      return results\r\n    }\r\n  }\r\n\r\n  // ç²å– metadata æ–‡ä»¶çš„æ­£ç¢ºè·¯å¾‘\r\n  getMetadataUrl() {\r\n    // ç’°å¢ƒæª¢æ¸¬é‚è¼¯ï¼Œèˆ‡ DirectMetadataLoader ä¿æŒä¸€è‡´\r\n    const hostname = window.location.hostname\r\n    const pathname = window.location.pathname\r\n    \r\n    // æ­£å¼ç’°å¢ƒ (GitHub Pages)\r\n    if (hostname === 'romarin-hsieh.github.io') {\r\n      return '/investment-dashboard/data/symbols_metadata.json'\r\n    }\r\n    \r\n    // å¦‚æœè·¯å¾‘åŒ…å« investment-dashboardï¼Œä½¿ç”¨å®Œæ•´è·¯å¾‘\r\n    if (pathname.includes('/investment-dashboard/')) {\r\n      return '/investment-dashboard/data/symbols_metadata.json'\r\n    }\r\n    \r\n    // æœ¬åœ°é–‹ç™¼ç’°å¢ƒ\r\n    return '/data/symbols_metadata.json'\r\n  }\r\n\r\n  // Refresh metadata from API\r\n  async refreshMetadata() {\r\n    try {\r\n      console.log('ğŸ”„ Refreshing metadata from dataFetcher...')\r\n      \r\n      // å˜—è©¦ç›´æ¥è¼‰å…¥ JSON æª”æ¡ˆä½œç‚ºå‚™ç”¨æ–¹æ¡ˆ\r\n      let result;\r\n      try {\r\n        result = await dataFetcher.fetchMetadataSnapshot()\r\n      } catch (fetcherError) {\r\n        console.warn('âŒ dataFetcher failed, trying direct fetch:', fetcherError)\r\n        \r\n        // ä½¿ç”¨æ­£ç¢ºçš„è·¯å¾‘ç›´æ¥è¼‰å…¥ JSON æª”æ¡ˆ\r\n        const url = this.getMetadataUrl()\r\n        console.log('ğŸ” MetadataService fetching from:', url)\r\n        \r\n        const response = await fetch(url)\r\n        if (!response.ok) {\r\n          throw new Error(`HTTP ${response.status}: ${response.statusText}`)\r\n        }\r\n        const data = await response.json()\r\n        result = { data }\r\n      }\r\n      \r\n      if (result.data) {\r\n        this.metadata = result.data\r\n        this.lastFetch = Date.now()\r\n        console.log(`âœ… Metadata refreshed successfully, ${this.metadata.items?.length || 0} items loaded`)\r\n        \r\n        // Debug: Check if CRM is in the loaded data\r\n        if (this.metadata.items) {\r\n          const crmData = this.metadata.items.find(item => item.symbol === 'CRM')\r\n          if (crmData) {\r\n            console.log('âœ… CRM found in refreshed metadata:', crmData)\r\n          } else {\r\n            console.warn('âŒ CRM not found in refreshed metadata')\r\n            console.log('Available symbols:', this.metadata.items.map(item => item.symbol).slice(0, 10))\r\n          }\r\n        }\r\n      } else {\r\n        console.warn('âŒ No data returned from fetchMetadataSnapshot')\r\n      }\r\n    } catch (error) {\r\n      console.warn('âŒ Failed to refresh metadata:', error)\r\n    }\r\n  }\r\n\r\n  // Get default exchange for a symbol\r\n  getDefaultExchange(symbol) {\r\n    const nasdaqSymbols = ['AAPL', 'MSFT', 'GOOGL', 'GOOG', 'AMZN', 'TSLA', 'NVDA', 'META', 'NFLX', 'RKLB', 'ASTS', 'RIVN', 'MDB', 'ONDS', 'PL', 'AVAV', 'CRM', 'AVGO', 'LEU', 'SMR', 'CRWV', 'IONQ', 'PLTR', 'HIMS']\r\n    const nyseSymbols = ['TSM', 'ORCL', 'RDW']\r\n    \r\n    if (nasdaqSymbols.includes(symbol)) {\r\n      return 'NASDAQ'\r\n    } else if (nyseSymbols.includes(symbol)) {\r\n      return 'NYSE'\r\n    }\r\n    \r\n    return 'NASDAQ' // Default\r\n  }\r\n\r\n  // Get industry display name (å…¼å®¹å…©ç¨®æ¨¡å¼)\r\n  getIndustryDisplay(metadata) {\r\n    if (this.useDynamicAPI) {\r\n      return dynamicMetadataService.getIndustryDisplay(metadata)\r\n    }\r\n    \r\n    // åŸæœ‰é‚è¼¯\r\n    if (!metadata || metadata.confidence < 0.7) {\r\n      return 'Unknown Industry'\r\n    }\r\n    \r\n    return metadata.industry || metadata.sector || 'Unknown Industry'\r\n  }\r\n\r\n  // Get industry category for styling (å…¼å®¹å…©ç¨®æ¨¡å¼)\r\n  getIndustryCategory(metadata) {\r\n    if (this.useDynamicAPI) {\r\n      return dynamicMetadataService.getIndustryCategory(metadata)\r\n    }\r\n    \r\n    // åŸæœ‰é‚è¼¯\r\n    const industry = this.getIndustryDisplay(metadata)\r\n    \r\n    const industryCategories = {\r\n      'Industrial IoT Solutions': 'tech-iot',\r\n      'Satellite Imaging & Analytics': 'tech-satellite',\r\n      'Database Software': 'tech-software',\r\n      'Enterprise Software': 'tech-software',\r\n      'Semiconductors': 'tech-hardware',\r\n      'Aerospace & Defense': 'industrial-aerospace',\r\n      'Space Infrastructure': 'industrial-space',\r\n      'Satellite Communications': 'communications',\r\n      'Electric Vehicles': 'automotive',\r\n      'Unknown Industry': 'unknown'\r\n    }\r\n    \r\n    return industryCategories[industry] || 'other'\r\n  }\r\n\r\n  // é ç†±ç·©å­˜\r\n  async warmupCache(symbols) {\r\n    if (this.useDynamicAPI) {\r\n      return await dynamicMetadataService.warmupCache(symbols)\r\n    } else {\r\n      // éœæ…‹æ–‡ä»¶æ¨¡å¼çš„é ç†±\r\n      console.log(`Warming up static metadata cache for ${symbols.length} symbols...`)\r\n      const startTime = Date.now()\r\n      \r\n      await this.refreshMetadata()\r\n      \r\n      for (const symbol of symbols) {\r\n        await this.getStaticSymbolMetadata(symbol)\r\n      }\r\n      \r\n      const duration = Date.now() - startTime\r\n      console.log(`Static cache warmup completed in ${duration}ms`)\r\n      \r\n      return {\r\n        duration,\r\n        symbolsProcessed: symbols.length,\r\n        mode: 'static'\r\n      }\r\n    }\r\n  }\r\n\r\n  // Clear cache\r\n  clearCache() {\r\n    this.cache.clear()\r\n    this.metadata = null\r\n    this.lastFetch = null\r\n    \r\n    if (this.useDynamicAPI) {\r\n      dynamicMetadataService.clearCache()\r\n    }\r\n  }\r\n\r\n  // ç²å–ç·©å­˜çµ±è¨ˆ\r\n  getCacheStats() {\r\n    if (this.useDynamicAPI) {\r\n      return {\r\n        mode: 'dynamic',\r\n        ...dynamicMetadataService.getCacheStats()\r\n      }\r\n    } else {\r\n      return {\r\n        mode: 'static',\r\n        totalCached: this.cache.size,\r\n        lastFetch: this.lastFetch,\r\n        metadataLoaded: !!this.metadata\r\n      }\r\n    }\r\n  }\r\n\r\n  // ç²å–ç•¶å‰æ¨¡å¼\r\n  getCurrentMode() {\r\n    return this.useDynamicAPI ? 'dynamic' : 'static'\r\n  }\r\n}\r\n\r\n// Export singleton instance\r\nexport const metadataService = new MetadataService()","// ç›´æ¥è¼‰å…¥ metadata çš„ç°¡åŒ–æœå‹™\r\n// ç¹éè¤‡é›œçš„ dataFetcher å’Œ metadataService\r\n\r\nclass DirectMetadataLoader {\r\n  constructor() {\r\n    this.cache = null\r\n    this.loading = false\r\n  }\r\n\r\n  getMetadataUrl() {\r\n    // ç’°å¢ƒæª¢æ¸¬é‚è¼¯ï¼Œèˆ‡å…¶ä»–æœå‹™ä¿æŒä¸€è‡´\r\n    const hostname = window.location.hostname\r\n    const pathname = window.location.pathname\r\n    \r\n    // æ­£å¼ç’°å¢ƒ (GitHub Pages)\r\n    if (hostname === 'romarin-hsieh.github.io') {\r\n      return '/investment-dashboard/data/symbols_metadata.json'\r\n    }\r\n    \r\n    // å¦‚æœè·¯å¾‘åŒ…å« investment-dashboardï¼Œä½¿ç”¨å®Œæ•´è·¯å¾‘\r\n    if (pathname.includes('/investment-dashboard/')) {\r\n      return '/investment-dashboard/data/symbols_metadata.json'\r\n    }\r\n    \r\n    // æœ¬åœ°é–‹ç™¼ç’°å¢ƒ\r\n    return '/data/symbols_metadata.json'\r\n  }\r\n\r\n  async loadMetadata() {\r\n    if (this.cache) {\r\n      return this.cache\r\n    }\r\n\r\n    if (this.loading) {\r\n      // ç­‰å¾…è¼‰å…¥å®Œæˆ\r\n      while (this.loading) {\r\n        await new Promise(resolve => setTimeout(resolve, 100))\r\n      }\r\n      return this.cache\r\n    }\r\n\r\n    this.loading = true\r\n    \r\n    try {\r\n      const url = this.getMetadataUrl()\r\n      console.log('ğŸ” DirectMetadataLoader fetching from:', url)\r\n      \r\n      const response = await fetch(url)\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`)\r\n      }\r\n      \r\n      const data = await response.json()\r\n      this.cache = data\r\n      \r\n      console.log('âœ… DirectMetadataLoader loaded successfully:', data.items?.length, 'items')\r\n      return this.cache\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ DirectMetadataLoader failed:', error)\r\n      return null\r\n    } finally {\r\n      this.loading = false\r\n    }\r\n  }\r\n\r\n  async getSymbolMetadata(symbol) {\r\n    const data = await this.loadMetadata()\r\n    if (!data || !data.items) {\r\n      return {\r\n        symbol,\r\n        sector: 'Unknown',\r\n        industry: 'Unknown Industry',\r\n        exchange: 'NASDAQ',\r\n        confidence: 0.0,\r\n        source: 'DirectLoader (Failed)'\r\n      }\r\n    }\r\n\r\n    const symbolData = data.items.find(item => item.symbol === symbol)\r\n    if (symbolData) {\r\n      return {\r\n        ...symbolData,\r\n        source: 'DirectLoader (Success)'\r\n      }\r\n    }\r\n\r\n    return {\r\n      symbol,\r\n      sector: 'Unknown',\r\n      industry: 'Unknown Industry',\r\n      exchange: 'NASDAQ',\r\n      confidence: 0.0,\r\n      source: 'DirectLoader (Not Found)'\r\n    }\r\n  }\r\n\r\n  async getBatchMetadata(symbols) {\r\n    const results = new Map()\r\n    \r\n    for (const symbol of symbols) {\r\n      const metadata = await this.getSymbolMetadata(symbol)\r\n      results.set(symbol, metadata)\r\n    }\r\n    \r\n    return results\r\n  }\r\n}\r\n\r\nexport const directMetadataLoader = new DirectMetadataLoader()","<template>\r\n  <div class=\"stock-detail\">\r\n    <!-- Breadcrumb -->\r\n    <nav class=\"breadcrumb\">\r\n      <router-link to=\"/stock-overview\" class=\"breadcrumb-link\">Stock Overview</router-link>\r\n      <span class=\"breadcrumb-separator\">â€º</span>\r\n      <span class=\"breadcrumb-current\">{{ symbol }} Analysis</span>\r\n    </nav>\r\n\r\n    <!-- è¼‰å…¥ç‹€æ…‹é¡¯ç¤ºéª¨æ¶å± -->\r\n    <div v-if=\"loading\" class=\"loading-with-skeleton\">\r\n      <StockDetailSkeleton />\r\n    </div>\r\n\r\n    <!-- éŒ¯èª¤ç‹€æ…‹ -->\r\n    <div v-else-if=\"error\" class=\"error\">\r\n      <p class=\"text-danger\">{{ error }}</p>\r\n      <button @click=\"refresh\" class=\"btn btn-secondary\">Retry</button>\r\n    </div>\r\n\r\n    <!-- æ­£å¸¸å…§å®¹ -->\r\n    <div v-else>\r\n      <!-- Stock Header -->\r\n      <div class=\"stock-header\">\r\n        <div class=\"stock-info-header\">\r\n          <div class=\"symbol-info\">\r\n            <h3 class=\"symbol\">{{ symbol }}</h3>\r\n            <div class=\"symbol-tags\">\r\n              <span class=\"exchange-tag\">{{ exchange }}</span>\r\n              <span class=\"industry-tag\" :class=\"`industry-${getIndustryCategory()}`\">{{ getIndustry() }}</span>\r\n            </div>\r\n          </div>\r\n          <div class=\"header-actions\">\r\n            <button @click=\"goBack\" class=\"detail-btn\">\r\n              <span class=\"btn-icon\">â†</span>\r\n              Back to Stock Overview\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- TradingView Widgets Container - Same as StockCard -->\r\n        <div class=\"widgets-container\">\r\n          <!-- Symbol Overview (2/3 width) -->\r\n          <div class=\"widget-overview\">\r\n            <div class=\"widget-header\">\r\n              <h4>Symbol Overview</h4>\r\n            </div>\r\n            <FastTradingViewWidget \r\n              widget-type=\"overview\"\r\n              :symbol=\"symbol\" \r\n              :exchange=\"exchange\"\r\n            />\r\n          </div>\r\n\r\n          <!-- Technical Analysis (1/3 width) - ä»¿ç…§ Symbol Overview æ¨£å¼ -->\r\n          <div class=\"widget-technical\">\r\n            <div class=\"widget-header\">\r\n              <h4>Technical Analysis</h4>\r\n            </div>\r\n            <FastTradingViewWidget \r\n              widget-type=\"technical\"\r\n              :symbol=\"symbol\" \r\n              :exchange=\"exchange\"\r\n              class=\"technical-overview-style\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Symbol Insight Block -->\r\n      <div class=\"symbol-insight-block\">\r\n        <div class=\"insight-header\">\r\n          <h3>Symbol Insight</h3>\r\n        </div>\r\n        \r\n        <!-- Market Regime Block (Full Width) -->\r\n        <div class=\"insight-full-widget market-regime\">\r\n          <div class=\"widget-header\">\r\n            <h4>Market Regime</h4>\r\n          </div>\r\n          <MarketRegimeWidget\r\n            :symbol=\"symbol\"\r\n            :exchange=\"exchange\"\r\n            :priority=\"2\"\r\n          />\r\n        </div>\r\n\r\n        <!-- Trading Strategy Block (Full Width) -->\r\n        <div class=\"insight-full-widget trading-strategy\">\r\n          <div class=\"widget-header\">\r\n            <h4>Trading Strategy</h4>\r\n          </div>\r\n          <TradingStrategyWidget\r\n            :symbol=\"symbol\"\r\n            :exchange=\"exchange\"\r\n            :priority=\"3\"\r\n          />\r\n        </div>\r\n        \r\n        <!-- Daily and Weekly Insight (Two Columns) -->\r\n        <div class=\"insight-widgets-container\">\r\n          <!-- Daily Insight (MA5) - Left -->\r\n          <div class=\"insight-widget daily-insight\">\r\n            <div class=\"widget-header\">\r\n              <h4>Daily Insight (MA5)</h4>\r\n            </div>\r\n            <LazyTradingViewWidget\r\n              widget-type=\"Daily Insight\"\r\n              :config=\"dailyInsightConfig\"\r\n              script-url=\"https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js\"\r\n              height=\"550px\"\r\n              :priority=\"4\"\r\n            />\r\n          </div>\r\n\r\n          <!-- Weekly Insight (MA4) - Right -->\r\n          <div class=\"insight-widget weekly-insight\">\r\n            <div class=\"widget-header\">\r\n              <h4>Weekly Insight (MA4)</h4>\r\n            </div>\r\n            <LazyTradingViewWidget\r\n              widget-type=\"Weekly Insight\"\r\n              :config=\"weeklyInsightConfig\"\r\n              script-url=\"https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js\"\r\n              height=\"550px\"\r\n              :priority=\"5\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Technical Indicators - Match Market Overview style -->\r\n      <div class=\"widget-container\">\r\n        <div class=\"widget-header\">\r\n          <h3>Technical Indicators</h3>\r\n        </div>\r\n        <TechnicalIndicators :symbol=\"symbol\" :exchange=\"exchange\" />\r\n      </div>\r\n\r\n      <!-- Performance Monitor -->\r\n      <PerformanceMonitor />\r\n\r\n      <!-- Main Content Layout -->\r\n      <div class=\"content-layout\">\r\n        <!-- Row 1: Stock News (Full Width) -->\r\n        <div class=\"widget-container\">\r\n          <div class=\"widget-header\">\r\n            <h3>Latest News</h3>\r\n          </div>\r\n          <StockNews :symbol=\"symbol\" />\r\n        </div>\r\n\r\n        <!-- Row 2: Fundamental Data (Full Width) -->\r\n        <div class=\"widget-container\">\r\n          <div class=\"widget-header\">\r\n            <h3>Fundamental Data</h3>\r\n          </div>\r\n          <TradingViewFundamentalData :symbol=\"symbol\" :exchange=\"exchange\" />\r\n        </div>\r\n\r\n        <!-- Row 3: Company Profile (Full Width) -->\r\n        <div class=\"widget-container\">\r\n          <div class=\"widget-header\">\r\n            <h3>Company Profile</h3>\r\n          </div>\r\n          <TradingViewCompanyProfile \r\n            :symbol=\"symbol\" \r\n            :exchange=\"exchange\" \r\n            color-theme=\"light\"\r\n            :is-transparent=\"true\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport FastTradingViewWidget from '@/components/FastTradingViewWidget.vue'\r\nimport LazyTradingViewWidget from '@/components/LazyTradingViewWidget.vue'\r\nimport MarketRegimeWidget from '@/components/MarketRegimeWidget.vue'\r\nimport TradingStrategyWidget from '@/components/TradingStrategyWidget.vue'\r\nimport TradingViewCompanyProfile from '@/components/TradingViewCompanyProfile.vue'\r\nimport TradingViewFundamentalData from '@/components/TradingViewFundamentalData.vue'\r\nimport TechnicalIndicators from '@/components/TechnicalIndicators.vue'\r\nimport PerformanceMonitor from '@/components/PerformanceMonitor.vue'\r\nimport StockNews from '@/components/StockNews.vue'\r\nimport StockDetailSkeleton from '@/components/StockDetailSkeleton.vue'\r\nimport { metadataService } from '@/utils/metadataService.js'\r\nimport { directMetadataLoader } from '@/utils/directMetadataLoader.js'\r\n\r\nexport default {\r\n  name: 'StockDetail',\r\n  components: {\r\n    FastTradingViewWidget,\r\n    LazyTradingViewWidget,\r\n    MarketRegimeWidget,\r\n    TradingStrategyWidget,\r\n    TradingViewCompanyProfile,\r\n    TradingViewFundamentalData,\r\n    TechnicalIndicators,\r\n    PerformanceMonitor,\r\n    StockNews,\r\n    StockDetailSkeleton\r\n  },\r\n  data() {\r\n    return {\r\n      loading: true,\r\n      error: null,\r\n      metadata: null\r\n    }\r\n  },\r\n  computed: {\r\n    symbol() {\r\n      return this.$route.params.symbol || 'RKLB'\r\n    },\r\n    exchange() {\r\n      // å„ªå…ˆä½¿ç”¨ metadata ä¸­çš„äº¤æ˜“æ‰€è³‡è¨Š\r\n      if (this.metadata && this.metadata.exchange) {\r\n        // å°‡ metadata ä¸­çš„ exchange ä»£ç¢¼è½‰æ›ç‚ºé¡¯ç¤ºåç¨±\r\n        const exchangeMap = {\r\n          'NYQ': 'NYSE',    // New York Stock Exchange\r\n          'NMS': 'NASDAQ',  // NASDAQ Global Select Market\r\n          'NCM': 'NASDAQ',  // NASDAQ Capital Market\r\n          'NGM': 'NASDAQ',  // NASDAQ Global Market\r\n          'ASE': 'AMEX',    // NYSE American (åŸ American Stock Exchange)\r\n          'NYSE': 'NYSE',   // ç›´æ¥çš„ NYSE\r\n          'NASDAQ': 'NASDAQ' // ç›´æ¥çš„ NASDAQ\r\n        }\r\n        return exchangeMap[this.metadata.exchange] || this.metadata.exchange\r\n      }\r\n      \r\n      // å‚™ç”¨æ–¹æ¡ˆï¼šæ ¹æ“š symbol æ¨æ¸¬äº¤æ˜“æ‰€ï¼ˆä½¿ç”¨æ­£ç¢ºçš„åˆ†é¡ï¼‰\r\n      const symbol = this.symbol\r\n      \r\n      // NYSE è‚¡ç¥¨ (æ ¹æ“š symbols_metadata.json çš„å¯¦éš›è³‡æ–™)\r\n      if (['ORCL', 'TSM', 'RDW', 'CRM', 'PL', 'LEU', 'SMR', 'IONQ', 'HIMS'].includes(symbol)) {\r\n        return 'NYSE'\r\n      }\r\n      // NASDAQ è‚¡ç¥¨\r\n      else if (['ASTS', 'RIVN', 'ONDS', 'AVAV', 'MDB', 'RKLB', 'NVDA', 'AVGO', 'AMZN', 'GOOG', 'META', 'NFLX', 'CRWV', 'PLTR', 'TSLA'].includes(symbol)) {\r\n        return 'NASDAQ'\r\n      }\r\n      \r\n      return 'NASDAQ' // é è¨­å€¼\r\n    },\r\n\r\n    dailyInsightConfig() {\r\n      return {\r\n        \"lineWidth\": 2,\r\n        \"lineType\": 0,\r\n        \"chartType\": \"candlesticks\",\r\n        \"showVolume\": true,\r\n        \"fontColor\": \"rgb(106, 109, 120)\",\r\n        \"gridLineColor\": \"rgba(46, 46, 46, 0.06)\",\r\n        \"volumeUpColor\": \"rgba(34, 171, 148, 0.5)\",\r\n        \"volumeDownColor\": \"rgba(247, 82, 95, 0.5)\",\r\n        \"backgroundColor\": \"#ffffff\",\r\n        \"widgetFontColor\": \"#0F0F0F\",\r\n        \"upColor\": \"#22ab94\",\r\n        \"downColor\": \"#f7525f\",\r\n        \"borderUpColor\": \"#22ab94\",\r\n        \"borderDownColor\": \"#f7525f\",\r\n        \"wickUpColor\": \"#22ab94\",\r\n        \"wickDownColor\": \"#f7525f\",\r\n        \"colorTheme\": \"light\",\r\n        \"isTransparent\": true,\r\n        \"locale\": \"en\",\r\n        \"chartOnly\": false,\r\n        \"scalePosition\": \"right\",\r\n        \"scaleMode\": \"Normal\",\r\n        \"fontFamily\": \"-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif\",\r\n        \"valuesTracking\": \"1\",\r\n        \"changeMode\": \"price-and-percent\",\r\n        \"symbols\": [[`${this.exchange}:${this.symbol}|6M`]],\r\n        \"dateRanges\": [\"6m|1D\"],\r\n        \"fontSize\": \"10\",\r\n        \"headerFontSize\": \"medium\",\r\n        \"autosize\": true,\r\n        \"width\": \"100%\",\r\n        \"height\": \"100%\",\r\n        \"noTimeScale\": false,\r\n        \"hideDateRanges\": false,\r\n        \"showMA\": true,\r\n        \"maLength\": \"5\",\r\n        \"maLineColor\": \"#2962FF\",\r\n        \"maLineWidth\": 1,\r\n        \"hideMarketStatus\": false,\r\n        \"hideSymbolLogo\": false\r\n      }\r\n    },\r\n\r\n    weeklyInsightConfig() {\r\n      return {\r\n        \"lineWidth\": 2,\r\n        \"lineType\": 0,\r\n        \"chartType\": \"candlesticks\",\r\n        \"showVolume\": true,\r\n        \"fontColor\": \"rgb(106, 109, 120)\",\r\n        \"gridLineColor\": \"rgba(46, 46, 46, 0.06)\",\r\n        \"volumeUpColor\": \"rgba(34, 171, 148, 0.5)\",\r\n        \"volumeDownColor\": \"rgba(247, 82, 95, 0.5)\",\r\n        \"backgroundColor\": \"#ffffff\",\r\n        \"widgetFontColor\": \"#0F0F0F\",\r\n        \"upColor\": \"#22ab94\",\r\n        \"downColor\": \"#f7525f\",\r\n        \"borderUpColor\": \"#22ab94\",\r\n        \"borderDownColor\": \"#f7525f\",\r\n        \"wickUpColor\": \"#22ab94\",\r\n        \"wickDownColor\": \"#f7525f\",\r\n        \"colorTheme\": \"light\",\r\n        \"isTransparent\": true,\r\n        \"locale\": \"en\",\r\n        \"chartOnly\": false,\r\n        \"scalePosition\": \"right\",\r\n        \"scaleMode\": \"Normal\",\r\n        \"fontFamily\": \"-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif\",\r\n        \"valuesTracking\": \"1\",\r\n        \"changeMode\": \"price-and-percent\",\r\n        \"symbols\": [[`${this.exchange}:${this.symbol}|6M`]],\r\n        \"dateRanges\": [\"6m|1W\"],\r\n        \"fontSize\": \"10\",\r\n        \"headerFontSize\": \"medium\",\r\n        \"autosize\": true,\r\n        \"width\": \"100%\",\r\n        \"height\": \"100%\",\r\n        \"noTimeScale\": false,\r\n        \"hideDateRanges\": false,\r\n        \"showMA\": true,\r\n        \"maLength\": \"4\",\r\n        \"maLineColor\": \"#2962FF\",\r\n        \"maLineWidth\": 1,\r\n        \"hideMarketStatus\": false,\r\n        \"hideSymbolLogo\": false\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    symbol() {\r\n      // ç•¶ symbol æ”¹è®Šæ™‚ï¼Œæ»¾å‹•åˆ°é ‚éƒ¨ä¸¦é‡æ–°è¼‰å…¥æ•¸æ“š\r\n      this.scrollToTop()\r\n      this.loadMetadata()\r\n    },\r\n    $route() {\r\n      // ç•¶è·¯ç”±æ”¹è®Šæ™‚ï¼Œæ»¾å‹•åˆ°é ‚éƒ¨\r\n      this.scrollToTop()\r\n    }\r\n  },\r\n    mounted() {\r\n    // é é¢è¼‰å…¥æ™‚æ»¾å‹•åˆ°é ‚éƒ¨\r\n    this.scrollToTop()\r\n    \r\n    // å•Ÿç”¨å‹•æ…‹ API æ¨¡å¼ä»¥ç²å–æœ€æ–°çš„ sector/industry ä¿¡æ¯\r\n    metadataService.setUseDynamicAPI(true)\r\n    \r\n    this.loadMetadata()\r\n    this.initializePage()\r\n  },\r\n  methods: {\r\n    async initializePage() {\r\n      try {\r\n        // æ¨¡æ“¬è¼‰å…¥æ™‚é–“\r\n        await new Promise(resolve => setTimeout(resolve, 1000))\r\n        this.loading = false\r\n      } catch (err) {\r\n        this.error = String(err)\r\n        this.loading = false\r\n      }\r\n    },\r\n    async refresh() {\r\n      this.loading = true\r\n      this.error = null\r\n      await this.initializePage()\r\n    },\r\n    async loadMetadata() {\r\n      try {\r\n        // ä½¿ç”¨ DirectMetadataLoader ä»¥ä¿æŒèˆ‡ StockOverview ä¸€è‡´\r\n        this.metadata = await directMetadataLoader.getSymbolMetadata(this.symbol)\r\n        console.log(`ğŸ“Š StockDetail loaded metadata for ${this.symbol}:`, this.metadata)\r\n      } catch (error) {\r\n        console.warn(`Failed to load metadata for ${this.symbol}:`, error)\r\n        this.metadata = null\r\n      }\r\n    },\r\n\r\n    getSector() {\r\n      if (!this.metadata || this.metadata.confidence < 0.7) {\r\n        return 'Unknown'\r\n      }\r\n      return this.metadata.sector || 'Unknown'\r\n    },\r\n\r\n    getIndustry() {\r\n      if (!this.metadata) {\r\n        return 'Unknown Industry'\r\n      }\r\n      \r\n      // æ ¹æ“š PRD è¦æ±‚ï¼Œconfidence < 0.7 æ­¸é¡ç‚º Unknown\r\n      if (this.metadata.confidence < 0.7) {\r\n        return 'Unknown Industry'\r\n      }\r\n      \r\n      return this.metadata.industry || this.metadata.sector || 'Unknown Industry'\r\n    },\r\n\r\n    getIndustryCategory() {\r\n      const industry = this.getIndustry()\r\n      \r\n      // æ ¹æ“š industry è¿”å›ä¸»è¦åˆ†é¡ï¼Œç”¨æ–¼æ¨£å¼\r\n      const industryCategories = {\r\n        'Software - Application': 'tech-software',\r\n        'Computer Hardware': 'tech-hardware',\r\n        'Communication Equipment': 'tech-satellite',\r\n        'Database Software': 'tech-software',\r\n        'Enterprise Software': 'tech-software',\r\n        'Semiconductors': 'tech-hardware',\r\n        'Aerospace & Defense': 'industrial-aerospace',\r\n        'Space Infrastructure': 'industrial-space',\r\n        'Satellite Communications': 'communications',\r\n        'Auto Manufacturers': 'automotive',\r\n        'Unknown Industry': 'unknown'\r\n      }\r\n      \r\n      return industryCategories[industry] || 'other'\r\n    },\r\n\r\n    goBack() {\r\n      console.log('Navigating back to stock overview')\r\n      this.$router.push({ name: 'stock-overview' }).catch(err => {\r\n        console.error('Navigation error:', err)\r\n      })\r\n    },\r\n\r\n    // æ»¾å‹•åˆ°é é¢é ‚éƒ¨\r\n    scrollToTop() {\r\n      // ä½¿ç”¨ nextTick ç¢ºä¿ DOM å·²æ›´æ–°\r\n      this.$nextTick(() => {\r\n        window.scrollTo({\r\n          top: 0,\r\n          left: 0,\r\n          behavior: 'smooth'\r\n        })\r\n        \r\n        // å‚™ç”¨æ–¹æ¡ˆï¼šç«‹å³æ»¾å‹•\r\n        setTimeout(() => {\r\n          window.scrollTo(0, 0)\r\n        }, 100)\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.stock-detail {\r\n  background: #f5f5f5; /* èˆ‡ main-content ç›¸åŒçš„èƒŒæ™¯è‰² */\r\n  padding: 1rem;\r\n  min-height: 100vh;\r\n}\r\n\r\n/* Breadcrumb */\r\n.breadcrumb {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 1rem;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.breadcrumb-link {\r\n  color: #007bff;\r\n  text-decoration: none;\r\n  font-weight: 500;\r\n}\r\n\r\n.breadcrumb-link:hover {\r\n  text-decoration: underline;\r\n}\r\n\r\n.breadcrumb-separator {\r\n  margin: 0 0.5rem;\r\n  color: #6c757d;\r\n}\r\n\r\n.breadcrumb-current {\r\n  color: #495057;\r\n  font-weight: 600;\r\n}\r\n\r\n/* Stock Header - Match Stock Overview Style */\r\n.stock-header {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 12px;\r\n  padding: 1.5rem;\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.stock-info-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding-bottom: 1rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n/* Widgets Container - Same as StockCard */\r\n.widgets-container {\r\n  display: grid;\r\n  grid-template-columns: 2fr 1fr; /* 2/3 å’Œ 1/3 çš„æ¯”ä¾‹ */\r\n  gap: 1.5rem;\r\n  margin-bottom: 0px; /* ç§»é™¤ä¸‹æ–¹ padding */\r\n  min-height: 450px;\r\n  will-change: transform;\r\n}\r\n\r\n.widget-overview,\r\n.widget-technical {\r\n  background: #fafafa;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n  display: flex;\r\n  flex-direction: column;\r\n  contain: layout style paint;\r\n}\r\n\r\n.widget-overview {\r\n  min-height: 440px; /* Symbol Overview å°é½Š Technical Analysis é«˜åº¦ */\r\n  height: 440px;\r\n}\r\n\r\n.widget-technical {\r\n  min-height: 440px; /* Technical Analysis é©åº¦å¢åŠ åˆ° 440px é¿å… scroll bar */\r\n  height: 440px;\r\n}\r\n\r\n.widget-header {\r\n  padding: 0.75rem 1rem;\r\n  border-bottom: 1px solid #e9ecef;\r\n  border-top-left-radius: 8px;\r\n  border-top-right-radius: 8px;\r\n  flex-shrink: 0;\r\n  margin: 0; /* ç¢ºä¿ Symbol Overview å’Œ Technical Analysis çš„ header æ²’æœ‰ margin */\r\n}\r\n\r\n.widget-header h4 {\r\n  font-size: 0.95rem;\r\n  font-weight: 600;\r\n  color: #495057;\r\n  margin: 0;\r\n}\r\n\r\n/* ç¢ºä¿ widget å…§å®¹å€åŸŸæœ‰è¶³å¤ é«˜åº¦ */\r\n.widget-overview > :not(.widget-header) {\r\n  flex: 1;\r\n  min-height: 390px; /* Symbol Overview å…§å®¹å€åŸŸå°é½Š */\r\n}\r\n\r\n.widget-technical > :not(.widget-header) {\r\n  flex: 1;\r\n  min-height: 390px; /* Technical Analysis å…§å®¹å€åŸŸé©åº¦å¢åŠ åˆ° 390px */\r\n}\r\n\r\n/* Technical Analysis ä»¿ç…§ Symbol Overview æ¨£å¼ */\r\n.technical-overview-style {\r\n  background: #ffffff !important;\r\n  padding: 0px !important; /* æ”¹ç‚º 0px é¿å…é›™é‡æ¡†æ¡†æ•ˆæœ */\r\n  box-sizing: border-box !important;\r\n}\r\n\r\n/* Technical Analysis loading ç‹€æ…‹èª¿æ•´ */\r\n.technical-overview-style .fast-loading {\r\n  background: #ffffff; /* ç™½è‰²èƒŒæ™¯ */\r\n  border-radius: 0; /* ç§»é™¤åœ“è§’ */\r\n  margin: 0; /* ä¸å†éœ€è¦æŠµæ¶ˆ padding */\r\n}\r\n\r\n/* Technical Analysis error ç‹€æ…‹èª¿æ•´ */\r\n.technical-overview-style .fast-error {\r\n  background: #ffffff; /* ç™½è‰²èƒŒæ™¯ */\r\n  border: 1px solid #e0e0e0; /* çµ±ä¸€é‚Šæ¡†é¡è‰² */\r\n  border-radius: 0; /* ç§»é™¤åœ“è§’ */\r\n  color: #6c757d; /* èª¿æ•´æ–‡å­—é¡è‰² */\r\n  margin: 0; /* ä¸å†éœ€è¦æŠµæ¶ˆ padding */\r\n}\r\n\r\n/* Symbol Insight Block - Match stock-card style */\r\n.symbol-insight-block {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 12px;\r\n  padding: 1.5rem;\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.insight-header {\r\n  padding-bottom: 1rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.insight-header h3 {\r\n  font-size: 1.25rem;\r\n  font-weight: 600;\r\n  color: #495057;\r\n  margin: 0;\r\n}\r\n\r\n/* Insight Widgets Container */\r\n.insight-widgets-container {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 1.5rem;\r\n}\r\n\r\n/* Full Width Insight Widgets */\r\n.insight-full-widget {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-height: 900px; /* 850px + header space */\r\n  height: 900px;\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.insight-full-widget .widget-header {\r\n  padding: 0.75rem 1rem;\r\n  border-bottom: 1px solid #e9ecef;\r\n  border-top-left-radius: 8px;\r\n  border-top-right-radius: 8px;\r\n  flex-shrink: 0;\r\n  margin: 0;\r\n}\r\n\r\n.insight-full-widget .widget-header h4 {\r\n  font-size: 0.95rem;\r\n  font-weight: 600;\r\n  color: #495057;\r\n  margin: 0;\r\n}\r\n\r\n.insight-full-widget > :not(.widget-header) {\r\n  flex: 1;\r\n  min-height: 850px;\r\n  height: 850px;\r\n}\r\n\r\n.insight-widget {\r\n  background: white; /* æ”¹ç‚ºç™½åº• */\r\n  border: 1px solid #e0e0e0; /* çµ±ä¸€é‚Šæ¡†é¡è‰² */\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-height: 600px; /* å¢åŠ æœ€å°é«˜åº¦å¾ 500px åˆ° 600px */\r\n  height: auto; /* æ”¹ç‚º auto è®“å®¹å™¨è‡ªé©æ‡‰å…§å®¹ */\r\n}\r\n\r\n.insight-widget .widget-header {\r\n  padding-bottom: 0.75rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n  margin-bottom: 1rem;\r\n  flex-shrink: 0;\r\n  height: auto; /* æ”¹ç‚º auto è®“é«˜åº¦è‡ªé©æ‡‰ */\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.insight-widget .widget-header h4 {\r\n  font-size: 0.95rem;\r\n  font-weight: 600;\r\n  color: #495057;\r\n  margin: 0;\r\n  line-height: 1.2;\r\n}\r\n\r\n.insight-widget > :not(.widget-header) {\r\n  flex: 1;\r\n  min-height: 550px; /* ç¢ºä¿å…§å®¹å€åŸŸæœ‰è¶³å¤ é«˜åº¦ */\r\n  height: 550px; /* å›ºå®šå…§å®¹å€åŸŸé«˜åº¦ */\r\n  overflow: visible; /* è®“ iframe å¯ä»¥å®Œæ•´é¡¯ç¤º */\r\n}\r\n\r\n/* Symbol Insight å€å¡Šå…§çš„ lazy-widget æ·»åŠ  8px padding */\r\n.insight-widget .lazy-widget {\r\n  padding: 8px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.symbol-info .symbol {\r\n  font-size: 1.5rem;\r\n  font-weight: 700;\r\n  color: #333;\r\n  margin: 0 0 0.5rem 0;\r\n}\r\n\r\n.symbol-tags {\r\n  display: flex;\r\n  gap: 0.5rem;\r\n  align-items: center;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.exchange-tag {\r\n  font-size: 0.75rem;\r\n  color: #007bff;\r\n  background-color: #e7f3ff;\r\n  padding: 0.25rem 0.5rem;\r\n  border-radius: 4px;\r\n  font-weight: 500;\r\n  border: 1px solid #90caf9;\r\n  display: inline-block;\r\n}\r\n\r\n.industry-tag {\r\n  font-size: 0.75rem;\r\n  color: #666;\r\n  background-color: #f5f5f5;\r\n  padding: 0.25rem 0.5rem;\r\n  border-radius: 4px;\r\n  font-weight: 500;\r\n  border: 1px solid #e0e0e0;\r\n  display: inline-block;\r\n}\r\n\r\n/* çµ±ä¸€ä½¿ç”¨ç°è‰²æ¨£å¼ï¼Œç§»é™¤å½©è‰²åˆ†é¡ */\r\n.industry-tag.industry-tech-iot,\r\n.industry-tag.industry-tech-satellite,\r\n.industry-tag.industry-tech-software,\r\n.industry-tag.industry-tech-hardware,\r\n.industry-tag.industry-industrial-aerospace,\r\n.industry-tag.industry-industrial-space,\r\n.industry-tag.industry-communications,\r\n.industry-tag.industry-automotive,\r\n.industry-tag.industry-unknown,\r\n.industry-tag.industry-other {\r\n  background-color: #f5f5f5;\r\n  color: #666;\r\n  border-color: #e0e0e0;\r\n}\r\n\r\n/* Header Actions */\r\n.header-actions {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 1rem;\r\n}\r\n\r\n.detail-btn {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 0.5rem;\r\n  padding: 0.5rem 1rem;\r\n  background: linear-gradient(135deg, #6c757d, #5a6268);\r\n  color: white;\r\n  border: none;\r\n  border-radius: 6px;\r\n  font-size: 0.85rem;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n  box-shadow: 0 2px 4px rgba(108, 117, 125, 0.2);\r\n  line-height: 1;\r\n  min-height: 36px;\r\n}\r\n\r\n.detail-btn:hover {\r\n  background: linear-gradient(135deg, #5a6268, #495057);\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 4px 8px rgba(108, 117, 125, 0.3);\r\n}\r\n\r\n.btn-icon {\r\n  font-size: 1rem;\r\n  line-height: 1;\r\n  display: inline-flex;\r\n  align-items: center;\r\n}\r\n\r\n/* Widget Container - Match Market Overview Style */\r\n.widget-container {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  margin-bottom: 2rem;\r\n  overflow: hidden;\r\n  position: relative;\r\n}\r\n\r\n.widget-container .widget-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 1rem; /* ä¿æŒ widget-container å…§çš„ header margin */\r\n  padding-bottom: 0.75rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.widget-container .widget-header h3 {\r\n  font-size: 1.1rem;\r\n  font-weight: 600;\r\n  color: #333;\r\n  margin: 0;\r\n}\r\n\r\n/* Content Layout - Row-based Structure */\r\n.content-layout {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0; /* ç§»é™¤ gapï¼Œè®“ widget-container çš„ margin-bottom æ§åˆ¶é–“è· */\r\n  margin-top: 0; /* ç§»é™¤ margin-top */\r\n}\r\n\r\n/* éŸ¿æ‡‰å¼è¨­è¨ˆ */\r\n@media (max-width: 1200px) {\r\n  .widgets-container {\r\n    grid-template-columns: 1fr;\r\n    gap: 1rem;\r\n  }\r\n  \r\n  .insight-widgets-container {\r\n    grid-template-columns: 1fr;\r\n    gap: 1rem;\r\n  }\r\n  \r\n  .insight-full-widget {\r\n    min-height: 800px;\r\n    height: 800px;\r\n  }\r\n  \r\n  .insight-full-widget > :not(.widget-header) {\r\n    min-height: 750px;\r\n    height: 750px;\r\n  }\r\n  \r\n  .symbol-insight-block {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .widget-container {\r\n    padding: 0.75rem;\r\n    margin-bottom: 1.5rem;\r\n  }\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .stock-detail {\r\n    padding: 0.5rem;\r\n  }\r\n  \r\n  .stock-header {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .symbol-insight-block {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .widget-container {\r\n    padding: 0.75rem;\r\n    margin-bottom: 1.5rem;\r\n  }\r\n  \r\n  .stock-info-header {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 0.75rem;\r\n  }\r\n  \r\n  .header-actions {\r\n    width: 100%;\r\n    justify-content: space-between;\r\n  }\r\n  \r\n  .widgets-container {\r\n    grid-template-columns: 1fr;\r\n    gap: 1rem;\r\n    min-height: auto;\r\n  }\r\n  \r\n  .insight-widgets-container {\r\n    grid-template-columns: 1fr;\r\n    gap: 1rem;\r\n  }\r\n  \r\n  .insight-full-widget {\r\n    min-height: 700px;\r\n    height: 700px;\r\n  }\r\n  \r\n  .insight-full-widget > :not(.widget-header) {\r\n    min-height: 650px;\r\n    height: 650px;\r\n  }\r\n  \r\n  .insight-widget {\r\n    height: auto; /* æ‰‹æ©Ÿç‰ˆè‡ªé©æ‡‰é«˜åº¦ */\r\n    min-height: 500px;\r\n  }\r\n  \r\n  .insight-widget > :not(.widget-header) {\r\n    height: 500px;\r\n    min-height: 500px;\r\n  }\r\n  \r\n  .widget-overview {\r\n    height: 380px; /* æ‰‹æ©Ÿç‰ˆå°é½Šé«˜åº¦ */\r\n    min-height: 380px;\r\n  }\r\n  \r\n  .widget-technical {\r\n    height: 380px; /* æ‰‹æ©Ÿç‰ˆ Technical Analysis é©åº¦èª¿æ•´ */\r\n    min-height: 380px;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .breadcrumb {\r\n    font-size: 0.8rem;\r\n  }\r\n  \r\n  .stock-header {\r\n    padding: 0.75rem;\r\n  }\r\n  \r\n  .symbol-insight-block {\r\n    padding: 0.75rem;\r\n  }\r\n  \r\n  .insight-header h3 {\r\n    font-size: 1.1rem;\r\n  }\r\n  \r\n  .symbol-info .symbol {\r\n    font-size: 1.2rem;\r\n  }\r\n  \r\n  .widget-header {\r\n    padding: 0.5rem 0.75rem;\r\n  }\r\n  \r\n  .widget-header h4 {\r\n    font-size: 0.9rem;\r\n  }\r\n  \r\n  .widget-title {\r\n    font-size: 0.9rem;\r\n    padding: 0.5rem 0.75rem;\r\n  }\r\n  \r\n  .detail-btn {\r\n    padding: 0.4rem 0.8rem;\r\n    font-size: 0.8rem;\r\n  }\r\n  \r\n  .widgets-container {\r\n    gap: 0.75rem;\r\n  }\r\n  \r\n  .insight-widgets-container {\r\n    gap: 0.75rem;\r\n  }\r\n  \r\n  .insight-full-widget {\r\n    min-height: 600px;\r\n    height: 600px;\r\n    margin-bottom: 1rem;\r\n  }\r\n  \r\n  .insight-full-widget > :not(.widget-header) {\r\n    min-height: 550px;\r\n    height: 550px;\r\n  }\r\n  \r\n  .insight-widget {\r\n    height: auto; /* å°è¢å¹•è‡ªé©æ‡‰é«˜åº¦ */\r\n    min-height: 450px;\r\n  }\r\n  \r\n  .insight-widget > :not(.widget-header) {\r\n    height: 450px;\r\n    min-height: 450px;\r\n  }\r\n  \r\n  .widget-overview {\r\n    height: 330px; /* å°è¢å¹•å°é½Šé«˜åº¦ */\r\n    min-height: 330px;\r\n  }\r\n  \r\n  .widget-technical {\r\n    height: 330px; /* å°è¢å¹• Technical Analysis é©åº¦èª¿æ•´ */\r\n    min-height: 330px;\r\n  }\r\n  \r\n  .content-layout {\r\n    margin-top: 0.75rem; /* å°è¢å¹•é€²ä¸€æ­¥æ¸›å°‘é–“éš” */\r\n  }\r\n  \r\n  .company-profile-row .widget-container,\r\n  .fundamental-data-row .widget-container {\r\n    height: 300px;\r\n    min-height: 300px;\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"top-stories-container\">\r\n    <div class=\"widget-header\">\r\n      <h3>Top Stories</h3>\r\n    </div>\r\n    \r\n    <div class=\"top-stories-widget\" :id=\"widgetId\" ref=\"container\">\r\n      <div v-if=\"!loaded && !error\" class=\"stories-loading\">\r\n        <div class=\"loading-spinner\"></div>\r\n        <span>Loading market news...</span>\r\n      </div>\r\n      \r\n      <div v-if=\"error\" class=\"stories-error\">\r\n        <span>âš ï¸ Failed to load market news</span>\r\n        <button @click=\"retry\" class=\"retry-btn\">Retry</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'TradingViewTopStories',\r\n  props: {\r\n    displayMode: {\r\n      type: String,\r\n      default: 'regular'\r\n    },\r\n    feedMode: {\r\n      type: String,\r\n      default: 'market'\r\n    },\r\n    colorTheme: {\r\n      type: String,\r\n      default: 'light'\r\n    },\r\n    isTransparent: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    locale: {\r\n      type: String,\r\n      default: 'en'\r\n    },\r\n    market: {\r\n      type: String,\r\n      default: 'stock'\r\n    },\r\n    height: {\r\n      type: String,\r\n      default: '600px'\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      loaded: false,\r\n      error: false,\r\n      widgetId: `top-stories-${Date.now()}`\r\n    }\r\n  },\r\n  mounted() {\r\n    this.loadTopStories()\r\n  },\r\n  methods: {\r\n    async loadTopStories() {\r\n      this.loaded = false\r\n      this.error = false\r\n\r\n      try {\r\n        await this.$nextTick()\r\n        this.createTopStories()\r\n      } catch (err) {\r\n        console.error('Failed to load top stories:', err)\r\n        this.error = true\r\n      }\r\n    },\r\n\r\n    createTopStories() {\r\n      const container = this.$refs.container\r\n      if (!container) return\r\n\r\n      // æ¸…é™¤ç¾æœ‰çš„ widget\r\n      container.innerHTML = ''\r\n\r\n      // å‰µå»º widget å®¹å™¨çµæ§‹\r\n      const widgetContainer = document.createElement('div')\r\n      widgetContainer.className = 'tradingview-widget-container'\r\n      widgetContainer.style.height = '100%'\r\n      widgetContainer.style.width = '100%'\r\n\r\n      const widgetContent = document.createElement('div')\r\n      widgetContent.className = 'tradingview-widget-container__widget'\r\n\r\n      widgetContainer.appendChild(widgetContent)\r\n      container.appendChild(widgetContainer)\r\n\r\n      // å‰µå»ºé…ç½®\r\n      const config = {\r\n        \"displayMode\": this.displayMode,\r\n        \"feedMode\": this.feedMode,\r\n        \"colorTheme\": this.colorTheme,\r\n        \"isTransparent\": this.isTransparent,\r\n        \"locale\": this.locale,\r\n        \"market\": this.market,\r\n        \"width\": \"100%\",\r\n        \"height\": \"100%\"\r\n      }\r\n\r\n      // å‰µå»ºè…³æœ¬\r\n      const script = document.createElement('script')\r\n      script.type = 'text/javascript'\r\n      script.src = 'https://s3.tradingview.com/external-embedding/embed-widget-timeline.js'\r\n      script.async = true\r\n      script.innerHTML = JSON.stringify(config)\r\n\r\n      // è¨­å®šè¼‰å…¥äº‹ä»¶\r\n      script.onload = () => {\r\n        this.loaded = true\r\n        console.log('TradingView Top Stories loaded successfully')\r\n      }\r\n\r\n      script.onerror = () => {\r\n        this.error = true\r\n        console.error('TradingView Top Stories failed to load')\r\n      }\r\n\r\n      // æ·»åŠ è…³æœ¬åˆ° widget å®¹å™¨\r\n      widgetContent.appendChild(script)\r\n\r\n      // è¨­å®šè¶…æ™‚ä¿è­·\r\n      setTimeout(() => {\r\n        if (!this.loaded && !this.error) {\r\n          this.loaded = true\r\n        }\r\n      }, 8000)\r\n    },\r\n\r\n    async retry() {\r\n      await this.loadTopStories()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.top-stories-container {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  margin-bottom: 2rem;\r\n  overflow: hidden;\r\n  position: relative;\r\n}\r\n\r\n.widget-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 1rem;\r\n  padding-bottom: 0.75rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.widget-header h3 {\r\n  font-size: 1.1rem;\r\n  font-weight: 600;\r\n  color: #333;\r\n  margin: 0;\r\n}\r\n\r\n.top-stories-widget {\r\n  height: 650px;\r\n  min-height: 650px;\r\n  width: 100%;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n/* Loading ç‹€æ…‹ */\r\n.stories-loading {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 0.5rem;\r\n  height: 100%;\r\n  color: #6c757d;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.loading-spinner {\r\n  width: 20px;\r\n  height: 20px;\r\n  border: 2px solid #e9ecef;\r\n  border-top: 2px solid #007bff;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n/* Error ç‹€æ…‹ */\r\n.stories-error {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 1rem;\r\n  height: 100%;\r\n  background: #f8d7da;\r\n  border: 1px solid #f5c6cb;\r\n  color: #721c24;\r\n  border-radius: 4px;\r\n}\r\n\r\n.retry-btn {\r\n  padding: 0.25rem 0.75rem;\r\n  background: #dc3545;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.8rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.retry-btn:hover {\r\n  background: #c82333;\r\n}\r\n\r\n/* TradingView Widget æ¨£å¼è¦†è“‹ */\r\n:global(.top-stories-container .tradingview-widget-container) {\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n  overflow: hidden !important;\r\n  position: relative !important;\r\n}\r\n\r\n:global(.top-stories-container .tradingview-widget-container__widget) {\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n  overflow: hidden !important;\r\n}\r\n\r\n/* éŸ¿æ‡‰å¼è¨­è¨ˆ */\r\n@media (max-width: 768px) {\r\n  .top-stories-widget {\r\n    height: 550px;\r\n    min-height: 550px;\r\n  }\r\n  \r\n  .widget-header {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 0.5rem;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .top-stories-container {\r\n    padding: 0.75rem;\r\n    margin: 0 -0.25rem 2rem -0.25rem;\r\n  }\r\n  \r\n  .top-stories-widget {\r\n    height: 500px;\r\n    min-height: 500px;\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"top-stories-skeleton\">\r\n    <!-- Page Header Skeleton -->\r\n    <div class=\"skeleton-page-header\">\r\n      <div class=\"skeleton-page-title\"></div>\r\n      <div class=\"skeleton-page-description\"></div>\r\n    </div>\r\n\r\n    <!-- Top Stories Widget Skeleton -->\r\n    <div class=\"skeleton-widget-container\">\r\n      <div class=\"skeleton-stories-area\">\r\n        <div class=\"skeleton-story-item\" v-for=\"i in 10\" :key=\"i\">\r\n          <div class=\"skeleton-story-time\"></div>\r\n          <div class=\"skeleton-story-title\"></div>\r\n          <div class=\"skeleton-story-content\"></div>\r\n          <div class=\"skeleton-story-tags\">\r\n            <div class=\"skeleton-story-tag\" v-for=\"j in 3\" :key=\"j\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Configuration Info Skeleton -->\r\n    <div class=\"skeleton-config-info\">\r\n      <div class=\"skeleton-config-title\"></div>\r\n      <div class=\"skeleton-config-list\">\r\n        <div class=\"skeleton-config-item\" v-for=\"i in 5\" :key=\"i\">\r\n          <div class=\"skeleton-config-label\"></div>\r\n          <div class=\"skeleton-config-value\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'TopStoriesSkeleton'\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/* åŸºç¤éª¨æ¶å‹•ç•« */\r\n@keyframes shimmer {\r\n  0% {\r\n    background-position: -200px 0;\r\n  }\r\n  100% {\r\n    background-position: calc(200px + 100%) 0;\r\n  }\r\n}\r\n\r\n.top-stories-skeleton {\r\n  padding: 0;\r\n  overflow-x: hidden;\r\n  max-width: 100%;\r\n}\r\n\r\n/* é€šç”¨éª¨æ¶æ¨£å¼ */\r\n.skeleton-base {\r\n  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\r\n  background-size: 200px 100%;\r\n  animation: shimmer 1.5s infinite linear;\r\n  border-radius: 4px;\r\n}\r\n\r\n/* Page Header éª¨æ¶ */\r\n.skeleton-page-header {\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.skeleton-page-title {\r\n  @extend .skeleton-base;\r\n  width: 280px;\r\n  height: 32px;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.skeleton-page-description {\r\n  @extend .skeleton-base;\r\n  width: 350px;\r\n  height: 16px;\r\n  margin-bottom: 0.75rem;\r\n}\r\n\r\n/* Widget å®¹å™¨éª¨æ¶ */\r\n.skeleton-widget-container {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  margin-bottom: 2rem;\r\n  overflow: hidden;\r\n  position: relative;\r\n  min-height: 650px;\r\n}\r\n\r\n/* Top Stories éª¨æ¶ */\r\n.skeleton-stories-area {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1rem;\r\n  min-height: 600px;\r\n}\r\n\r\n.skeleton-story-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.75rem;\r\n  padding: 1.5rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n  background: #fafafa;\r\n  border-radius: 8px;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.skeleton-story-time {\r\n  @extend .skeleton-base;\r\n  width: 120px;\r\n  height: 14px;\r\n}\r\n\r\n.skeleton-story-title {\r\n  @extend .skeleton-base;\r\n  width: 85%;\r\n  height: 20px;\r\n}\r\n\r\n.skeleton-story-content {\r\n  @extend .skeleton-base;\r\n  width: 70%;\r\n  height: 16px;\r\n}\r\n\r\n.skeleton-story-tags {\r\n  display: flex;\r\n  gap: 0.5rem;\r\n  margin-top: 0.5rem;\r\n}\r\n\r\n.skeleton-story-tag {\r\n  @extend .skeleton-base;\r\n  width: 60px;\r\n  height: 18px;\r\n  border-radius: 9px;\r\n}\r\n\r\n/* Configuration Info éª¨æ¶ */\r\n.skeleton-config-info {\r\n  background: #f8f9fa;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  margin-top: 2rem;\r\n}\r\n\r\n.skeleton-config-title {\r\n  @extend .skeleton-base;\r\n  width: 180px;\r\n  height: 20px;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.skeleton-config-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.skeleton-config-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.skeleton-config-label {\r\n  @extend .skeleton-base;\r\n  width: 120px;\r\n  height: 16px;\r\n}\r\n\r\n.skeleton-config-value {\r\n  @extend .skeleton-base;\r\n  width: 80px;\r\n  height: 16px;\r\n}\r\n\r\n/* å¯¦éš›æ‡‰ç”¨éª¨æ¶æ¨£å¼ */\r\n.skeleton-page-title,\r\n.skeleton-page-description,\r\n.skeleton-story-time,\r\n.skeleton-story-title,\r\n.skeleton-story-content,\r\n.skeleton-story-tag,\r\n.skeleton-config-title,\r\n.skeleton-config-label,\r\n.skeleton-config-value {\r\n  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\r\n  background-size: 200px 100%;\r\n  animation: shimmer 1.5s infinite linear;\r\n  border-radius: 4px;\r\n}\r\n\r\n/* éŸ¿æ‡‰å¼è¨­è¨ˆ */\r\n@media (max-width: 768px) {\r\n  .skeleton-widget-container {\r\n    padding: 0.75rem;\r\n    margin-bottom: 1rem;\r\n    min-height: 500px;\r\n  }\r\n  \r\n  .skeleton-stories-area {\r\n    min-height: 450px;\r\n  }\r\n  \r\n  .skeleton-story-item {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .skeleton-config-info {\r\n    padding: 0.75rem;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .skeleton-widget-container {\r\n    padding: 0.5rem;\r\n    margin: 0 -0.25rem 1rem -0.25rem;\r\n    min-height: 400px;\r\n  }\r\n  \r\n  .skeleton-stories-area {\r\n    min-height: 350px;\r\n  }\r\n  \r\n  .skeleton-story-item {\r\n    padding: 0.75rem;\r\n  }\r\n  \r\n  .skeleton-config-info {\r\n    padding: 0.5rem;\r\n    margin: 0 -0.25rem 2rem -0.25rem;\r\n  }\r\n  \r\n  .skeleton-story-tags {\r\n    flex-wrap: wrap;\r\n  }\r\n}\r\n\r\n/* å‹•ç•«å»¶é²æ•ˆæœ */\r\n.skeleton-story-item:nth-child(1) { animation-delay: 0.1s; }\r\n.skeleton-story-item:nth-child(2) { animation-delay: 0.2s; }\r\n.skeleton-story-item:nth-child(3) { animation-delay: 0.3s; }\r\n.skeleton-story-item:nth-child(4) { animation-delay: 0.4s; }\r\n.skeleton-story-item:nth-child(5) { animation-delay: 0.5s; }\r\n\r\n.skeleton-story-tag:nth-child(1) { animation-delay: 0.1s; }\r\n.skeleton-story-tag:nth-child(2) { animation-delay: 0.2s; }\r\n.skeleton-story-tag:nth-child(3) { animation-delay: 0.3s; }\r\n\r\n.skeleton-config-item:nth-child(odd) { animation-delay: 0.1s; }\r\n.skeleton-config-item:nth-child(even) { animation-delay: 0.2s; }\r\n\r\n/* æ·¡å…¥æ•ˆæœ */\r\n.top-stories-skeleton {\r\n  animation: fadeIn 0.3s ease-in;\r\n}\r\n\r\n@keyframes fadeIn {\r\n  from {\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    opacity: 1;\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"top-stories-test\">\r\n    <h2>Top Stories Widget Test</h2>\r\n    <p class=\"text-muted mb-3\">Testing TradingView Top Stories component</p>\r\n\r\n    <!-- è¼‰å…¥ç‹€æ…‹é¡¯ç¤ºéª¨æ¶å± -->\r\n    <div v-if=\"loading\" class=\"loading-with-skeleton\">\r\n      <TopStoriesSkeleton />\r\n    </div>\r\n\r\n    <!-- éŒ¯èª¤ç‹€æ…‹ -->\r\n    <div v-else-if=\"error\" class=\"error\">\r\n      <p class=\"text-danger\">{{ error }}</p>\r\n      <button @click=\"refresh\" class=\"btn btn-secondary\">Retry</button>\r\n    </div>\r\n\r\n    <!-- æ­£å¸¸å…§å®¹ -->\r\n    <div v-else>\r\n      <!-- Top Stories Widget -->\r\n      <TradingViewTopStories \r\n        display-mode=\"regular\"\r\n        feed-mode=\"market\"\r\n        color-theme=\"light\"\r\n        :is-transparent=\"true\"\r\n        locale=\"en\"\r\n        market=\"stock\"\r\n        height=\"650px\"\r\n      />\r\n\r\n      <!-- Configuration Info -->\r\n      <div class=\"config-info\">\r\n        <h3>Widget Configuration</h3>\r\n        <ul>\r\n          <li><strong>Display Mode:</strong> regular</li>\r\n          <li><strong>Feed Mode:</strong> market</li>\r\n          <li><strong>Color Theme:</strong> light</li>\r\n          <li><strong>Market:</strong> stock</li>\r\n          <li><strong>Height:</strong> 650px</li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport TradingViewTopStories from '@/components/TradingViewTopStories.vue'\r\nimport TopStoriesSkeleton from '@/components/TopStoriesSkeleton.vue'\r\n\r\nexport default {\r\n  name: 'TopStoriesTest',\r\n  components: {\r\n    TradingViewTopStories,\r\n    TopStoriesSkeleton\r\n  },\r\n  data() {\r\n    return {\r\n      loading: true,\r\n      error: null\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initializePage()\r\n  },\r\n  methods: {\r\n    async initializePage() {\r\n      try {\r\n        // æ¨¡æ“¬è¼‰å…¥æ™‚é–“\r\n        await new Promise(resolve => setTimeout(resolve, 800))\r\n        this.loading = false\r\n      } catch (err) {\r\n        this.error = String(err)\r\n        this.loading = false\r\n      }\r\n    },\r\n    async refresh() {\r\n      this.loading = true\r\n      this.error = null\r\n      await this.initializePage()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.top-stories-test {\r\n  padding: 0;\r\n}\r\n\r\n.mb-3 {\r\n  margin-bottom: 0.75rem;\r\n}\r\n\r\n.text-muted {\r\n  color: #6c757d;\r\n}\r\n\r\n.loading-with-skeleton {\r\n  /* éª¨æ¶å±è¼‰å…¥å®¹å™¨ */\r\n}\r\n\r\n.error {\r\n  text-align: center;\r\n  padding: 2rem;\r\n  background-color: #f8d7da;\r\n  border: 1px solid #f5c6cb;\r\n  border-radius: 8px;\r\n  margin: 1rem 0;\r\n}\r\n\r\n.text-danger {\r\n  color: #dc3545;\r\n}\r\n\r\n.btn {\r\n  padding: 0.5rem 1rem;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.btn-secondary {\r\n  background: #6c757d;\r\n  color: white;\r\n}\r\n\r\n.btn-secondary:hover {\r\n  background: #545b62;\r\n}\r\n\r\n.config-info {\r\n  background: #f8f9fa;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  margin-top: 2rem;\r\n}\r\n\r\n.config-info h3 {\r\n  margin-bottom: 1rem;\r\n  color: #333;\r\n}\r\n\r\n.config-info ul {\r\n  margin: 0;\r\n  padding-left: 1.5rem;\r\n}\r\n\r\n.config-info li {\r\n  margin-bottom: 0.5rem;\r\n  color: #666;\r\n}\r\n</style>","<template>\r\n  <div class=\"stock-market-insight-container\">\r\n    <div class=\"widget-header\">\r\n      <h3>Stock Market Insight</h3>\r\n    </div>\r\n    \r\n    <div class=\"insight-grid\">\r\n      <!-- Stock Market Daily -->\r\n      <div class=\"insight-section\">\r\n        <div class=\"section-header\">\r\n          <h4>Stock Market Daily</h4>\r\n        </div>\r\n        <div class=\"daily-widget\" :id=\"dailyWidgetId\" ref=\"dailyContainer\">\r\n          <div v-if=\"!dailyLoaded && !dailyError\" class=\"widget-loading\">\r\n            <div class=\"loading-spinner\"></div>\r\n            <span>Loading daily market data...</span>\r\n          </div>\r\n          \r\n          <div v-if=\"dailyError\" class=\"widget-error\">\r\n            <span>âš ï¸ Failed to load daily data</span>\r\n            <button @click=\"retryDaily\" class=\"retry-btn\">Retry</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Stock Market Weekly -->\r\n      <div class=\"insight-section\">\r\n        <div class=\"section-header\">\r\n          <h4>Stock Market Weekly</h4>\r\n        </div>\r\n        <div class=\"weekly-widget\" :id=\"weeklyWidgetId\" ref=\"weeklyContainer\">\r\n          <div v-if=\"!weeklyLoaded && !weeklyError\" class=\"widget-loading\">\r\n            <div class=\"loading-spinner\"></div>\r\n            <span>Loading weekly market data...</span>\r\n          </div>\r\n          \r\n          <div v-if=\"weeklyError\" class=\"widget-error\">\r\n            <span>âš ï¸ Failed to load weekly data</span>\r\n            <button @click=\"retryWeekly\" class=\"retry-btn\">Retry</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'StockMarketInsight',\r\n  props: {\r\n    colorTheme: {\r\n      type: String,\r\n      default: 'light'\r\n    },\r\n    isTransparent: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    locale: {\r\n      type: String,\r\n      default: 'en'\r\n    },\r\n    height: {\r\n      type: String,\r\n      default: '1300px'\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      dailyLoaded: false,\r\n      dailyError: false,\r\n      weeklyLoaded: false,\r\n      weeklyError: false,\r\n      dailyWidgetId: `daily-market-${Date.now()}`,\r\n      weeklyWidgetId: `weekly-market-${Date.now()}`\r\n    }\r\n  },\r\n  mounted() {\r\n    this.loadWidgets()\r\n  },\r\n  methods: {\r\n    async loadWidgets() {\r\n      await this.$nextTick()\r\n      this.createDailyWidget()\r\n      this.createWeeklyWidget()\r\n    },\r\n\r\n    createDailyWidget() {\r\n      const container = this.$refs.dailyContainer\r\n      if (!container) return\r\n\r\n      // æ¸…é™¤ç¾æœ‰çš„ widget\r\n      container.innerHTML = ''\r\n\r\n      // å‰µå»º widget å®¹å™¨çµæ§‹\r\n      const widgetContainer = document.createElement('div')\r\n      widgetContainer.className = 'tradingview-widget-container'\r\n      widgetContainer.style.height = '100%'\r\n      widgetContainer.style.width = '100%'\r\n\r\n      const widgetContent = document.createElement('div')\r\n      widgetContent.className = 'tradingview-widget-container__widget'\r\n\r\n      widgetContainer.appendChild(widgetContent)\r\n      container.appendChild(widgetContainer)\r\n\r\n      // Daily é…ç½®\r\n      const dailyConfig = {\r\n        \"lineWidth\": 2,\r\n        \"lineType\": 0,\r\n        \"chartType\": \"candlesticks\",\r\n        \"showVolume\": true,\r\n        \"fontColor\": \"#707070\",\r\n        \"gridLineColor\": \"rgba(46, 46, 46, 0.06)\",\r\n        \"volumeUpColor\": \"rgba(34, 171, 148, 0.5)\",\r\n        \"volumeDownColor\": \"rgba(247, 82, 95, 0.5)\",\r\n        \"backgroundColor\": \"#ffffff\",\r\n        \"widgetFontColor\": \"#0F0F0F\",\r\n        \"upColor\": \"#22ab94\",\r\n        \"downColor\": \"#f7525f\",\r\n        \"borderUpColor\": \"#22ab94\",\r\n        \"borderDownColor\": \"#f7525f\",\r\n        \"wickUpColor\": \"#22ab94\",\r\n        \"wickDownColor\": \"#f7525f\",\r\n        \"colorTheme\": this.colorTheme,\r\n        \"isTransparent\": this.isTransparent,\r\n        \"locale\": this.locale,\r\n        \"chartOnly\": false,\r\n        \"scalePosition\": \"right\",\r\n        \"scaleMode\": \"Normal\",\r\n        \"fontFamily\": \"-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif\",\r\n        \"valuesTracking\": \"1\",\r\n        \"changeMode\": \"price-and-percent\",\r\n        \"symbols\": [[\"IG:NASDAQ|6M\"], [\"THINKMARKETS:US30|6M\"]],\r\n        \"dateRanges\": [\"6m|1D\"],\r\n        \"fontSize\": \"10\",\r\n        \"headerFontSize\": \"medium\",\r\n        \"autosize\": true,\r\n        \"width\": \"100%\",\r\n        \"height\": \"100%\",\r\n        \"noTimeScale\": false,\r\n        \"hideDateRanges\": false,\r\n        \"showMA\": true,\r\n        \"maLength\": \"5\",\r\n        \"maLineColor\": \"#2962FF\",\r\n        \"maLineWidth\": 1,\r\n        \"hideMarketStatus\": false,\r\n        \"hideSymbolLogo\": false\r\n      }\r\n\r\n      // å‰µå»ºè…³æœ¬\r\n      const script = document.createElement('script')\r\n      script.type = 'text/javascript'\r\n      script.src = 'https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js'\r\n      script.async = true\r\n      script.innerHTML = JSON.stringify(dailyConfig)\r\n\r\n      // è¨­å®šè¼‰å…¥äº‹ä»¶\r\n      script.onload = () => {\r\n        this.dailyLoaded = true\r\n        console.log('Daily Market Widget loaded successfully')\r\n      }\r\n\r\n      script.onerror = () => {\r\n        this.dailyError = true\r\n        console.error('Daily Market Widget failed to load')\r\n      }\r\n\r\n      // æ·»åŠ è…³æœ¬åˆ° widget å®¹å™¨\r\n      widgetContent.appendChild(script)\r\n\r\n      // è¨­å®šè¶…æ™‚ä¿è­·\r\n      setTimeout(() => {\r\n        if (!this.dailyLoaded && !this.dailyError) {\r\n          this.dailyLoaded = true\r\n        }\r\n      }, 8000)\r\n    },\r\n\r\n    createWeeklyWidget() {\r\n      const container = this.$refs.weeklyContainer\r\n      if (!container) return\r\n\r\n      // æ¸…é™¤ç¾æœ‰çš„ widget\r\n      container.innerHTML = ''\r\n\r\n      // å‰µå»º widget å®¹å™¨çµæ§‹\r\n      const widgetContainer = document.createElement('div')\r\n      widgetContainer.className = 'tradingview-widget-container'\r\n      widgetContainer.style.height = '100%'\r\n      widgetContainer.style.width = '100%'\r\n\r\n      const widgetContent = document.createElement('div')\r\n      widgetContent.className = 'tradingview-widget-container__widget'\r\n\r\n      widgetContainer.appendChild(widgetContent)\r\n      container.appendChild(widgetContainer)\r\n\r\n      // Weekly é…ç½® (ä¸»è¦å·®ç•°æ˜¯ dateRanges: [\"6m|1W\"])\r\n      const weeklyConfig = {\r\n        \"lineWidth\": 2,\r\n        \"lineType\": 0,\r\n        \"chartType\": \"candlesticks\",\r\n        \"showVolume\": true,\r\n        \"fontColor\": \"#707070\",\r\n        \"gridLineColor\": \"rgba(46, 46, 46, 0.06)\",\r\n        \"volumeUpColor\": \"rgba(34, 171, 148, 0.5)\",\r\n        \"volumeDownColor\": \"rgba(247, 82, 95, 0.5)\",\r\n        \"backgroundColor\": \"#ffffff\",\r\n        \"widgetFontColor\": \"#0F0F0F\",\r\n        \"upColor\": \"#22ab94\",\r\n        \"downColor\": \"#f7525f\",\r\n        \"borderUpColor\": \"#22ab94\",\r\n        \"borderDownColor\": \"#f7525f\",\r\n        \"wickUpColor\": \"#22ab94\",\r\n        \"wickDownColor\": \"#f7525f\",\r\n        \"colorTheme\": this.colorTheme,\r\n        \"isTransparent\": this.isTransparent,\r\n        \"locale\": this.locale,\r\n        \"chartOnly\": false,\r\n        \"scalePosition\": \"right\",\r\n        \"scaleMode\": \"Normal\",\r\n        \"fontFamily\": \"-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif\",\r\n        \"valuesTracking\": \"1\",\r\n        \"changeMode\": \"price-and-percent\",\r\n        \"symbols\": [[\"IG:NASDAQ|6M\"], [\"THINKMARKETS:US30|6M\"]],\r\n        \"dateRanges\": [\"6m|1W\"],\r\n        \"fontSize\": \"10\",\r\n        \"headerFontSize\": \"medium\",\r\n        \"autosize\": true,\r\n        \"width\": \"100%\",\r\n        \"height\": \"100%\",\r\n        \"noTimeScale\": false,\r\n        \"hideDateRanges\": false,\r\n        \"showMA\": true,\r\n        \"maLength\": \"5\",\r\n        \"maLineColor\": \"#2962FF\",\r\n        \"maLineWidth\": 1,\r\n        \"hideMarketStatus\": false,\r\n        \"hideSymbolLogo\": false\r\n      }\r\n\r\n      // å‰µå»ºè…³æœ¬\r\n      const script = document.createElement('script')\r\n      script.type = 'text/javascript'\r\n      script.src = 'https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js'\r\n      script.async = true\r\n      script.innerHTML = JSON.stringify(weeklyConfig)\r\n\r\n      // è¨­å®šè¼‰å…¥äº‹ä»¶\r\n      script.onload = () => {\r\n        this.weeklyLoaded = true\r\n        console.log('Weekly Market Widget loaded successfully')\r\n      }\r\n\r\n      script.onerror = () => {\r\n        this.weeklyError = true\r\n        console.error('Weekly Market Widget failed to load')\r\n      }\r\n\r\n      // æ·»åŠ è…³æœ¬åˆ° widget å®¹å™¨\r\n      widgetContent.appendChild(script)\r\n\r\n      // è¨­å®šè¶…æ™‚ä¿è­·\r\n      setTimeout(() => {\r\n        if (!this.weeklyLoaded && !this.weeklyError) {\r\n          this.weeklyLoaded = true\r\n        }\r\n      }, 8000)\r\n    },\r\n\r\n    async retryDaily() {\r\n      this.dailyLoaded = false\r\n      this.dailyError = false\r\n      await this.$nextTick()\r\n      this.createDailyWidget()\r\n    },\r\n\r\n    async retryWeekly() {\r\n      this.weeklyLoaded = false\r\n      this.weeklyError = false\r\n      await this.$nextTick()\r\n      this.createWeeklyWidget()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.stock-market-insight-container {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  margin-bottom: 2rem;\r\n  overflow: hidden;\r\n  position: relative;\r\n}\r\n\r\n.widget-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 1rem;\r\n  padding-bottom: 0.75rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.widget-header h3 {\r\n  font-size: 1.1rem;\r\n  font-weight: 600;\r\n  color: #333;\r\n  margin: 0;\r\n}\r\n\r\n.insight-grid {\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n  gap: 1.5rem;\r\n  align-items: start;\r\n}\r\n\r\n.insight-section {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.75rem;\r\n}\r\n\r\n.section-header {\r\n  padding-bottom: 0.5rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.section-header h4 {\r\n  font-size: 0.95rem;\r\n  font-weight: 600;\r\n  color: #555;\r\n  margin: 0;\r\n}\r\n\r\n.daily-widget,\r\n.weekly-widget {\r\n  height: 600px;\r\n  min-height: 600px;\r\n  width: 100%;\r\n  position: relative;\r\n  overflow: hidden;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 6px;\r\n  background: #fafafa;\r\n}\r\n\r\n/* Loading ç‹€æ…‹ */\r\n.widget-loading {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 0.5rem;\r\n  height: 100%;\r\n  color: #6c757d;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.loading-spinner {\r\n  width: 20px;\r\n  height: 20px;\r\n  border: 2px solid #e9ecef;\r\n  border-top: 2px solid #007bff;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n/* Error ç‹€æ…‹ */\r\n.widget-error {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 1rem;\r\n  height: 100%;\r\n  background: #f8d7da;\r\n  border: 1px solid #f5c6cb;\r\n  color: #721c24;\r\n  border-radius: 4px;\r\n}\r\n\r\n.retry-btn {\r\n  padding: 0.25rem 0.75rem;\r\n  background: #dc3545;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.8rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.retry-btn:hover {\r\n  background: #c82333;\r\n}\r\n\r\n/* TradingView Widget æ¨£å¼è¦†è“‹ */\r\n:global(.stock-market-insight-container .tradingview-widget-container) {\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n  overflow: hidden !important;\r\n  position: relative !important;\r\n}\r\n\r\n:global(.stock-market-insight-container .tradingview-widget-container__widget) {\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n  overflow: hidden !important;\r\n}\r\n\r\n/* éŸ¿æ‡‰å¼è¨­è¨ˆ */\r\n@media (max-width: 1024px) {\r\n  .daily-widget,\r\n  .weekly-widget {\r\n    height: 550px;\r\n    min-height: 550px;\r\n  }\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .widget-header {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 0.5rem;\r\n  }\r\n  \r\n  .daily-widget,\r\n  .weekly-widget {\r\n    height: 500px;\r\n    min-height: 500px;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .stock-market-insight-container {\r\n    padding: 0.75rem;\r\n    margin: 0 -0.25rem 2rem -0.25rem;\r\n  }\r\n  \r\n  .insight-grid {\r\n    gap: 0.75rem;\r\n  }\r\n  \r\n  .daily-widget,\r\n  .weekly-widget {\r\n    height: 450px;\r\n    min-height: 450px;\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"stock-market-insight-skeleton\">\r\n    <!-- Page Header Skeleton -->\r\n    <div class=\"skeleton-page-header\">\r\n      <div class=\"skeleton-page-title\"></div>\r\n      <div class=\"skeleton-page-description\"></div>\r\n    </div>\r\n\r\n    <!-- Stock Market Insight Widget Skeleton -->\r\n    <div class=\"skeleton-widget-container large\">\r\n      <div class=\"skeleton-insight-grid\">\r\n        <!-- Daily Insight Section -->\r\n        <div class=\"skeleton-insight-section\">\r\n          <div class=\"skeleton-section-header\">\r\n            <div class=\"skeleton-section-title\"></div>\r\n          </div>\r\n          <div class=\"skeleton-chart-area\">\r\n            <div class=\"skeleton-chart\"></div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Weekly Insight Section -->\r\n        <div class=\"skeleton-insight-section\">\r\n          <div class=\"skeleton-section-header\">\r\n            <div class=\"skeleton-section-title\"></div>\r\n          </div>\r\n          <div class=\"skeleton-chart-area\">\r\n            <div class=\"skeleton-chart\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Configuration Info Skeleton -->\r\n    <div class=\"skeleton-config-info\">\r\n      <div class=\"skeleton-config-title\"></div>\r\n      <div class=\"skeleton-config-grid\">\r\n        <div class=\"skeleton-config-section\">\r\n          <div class=\"skeleton-config-section-title\"></div>\r\n          <div class=\"skeleton-config-list\">\r\n            <div class=\"skeleton-config-item\" v-for=\"i in 5\" :key=\"i\">\r\n              <div class=\"skeleton-config-label\"></div>\r\n              <div class=\"skeleton-config-value\"></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"skeleton-config-section\">\r\n          <div class=\"skeleton-config-section-title\"></div>\r\n          <div class=\"skeleton-config-list\">\r\n            <div class=\"skeleton-config-item\" v-for=\"i in 5\" :key=\"i\">\r\n              <div class=\"skeleton-config-label\"></div>\r\n              <div class=\"skeleton-config-value\"></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'StockMarketInsightSkeleton'\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/* åŸºç¤éª¨æ¶å‹•ç•« */\r\n@keyframes shimmer {\r\n  0% {\r\n    background-position: -200px 0;\r\n  }\r\n  100% {\r\n    background-position: calc(200px + 100%) 0;\r\n  }\r\n}\r\n\r\n.stock-market-insight-skeleton {\r\n  padding: 0;\r\n  overflow-x: hidden;\r\n  max-width: 100%;\r\n}\r\n\r\n/* é€šç”¨éª¨æ¶æ¨£å¼ */\r\n.skeleton-base {\r\n  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\r\n  background-size: 200px 100%;\r\n  animation: shimmer 1.5s infinite linear;\r\n  border-radius: 4px;\r\n}\r\n\r\n/* Page Header éª¨æ¶ */\r\n.skeleton-page-header {\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.skeleton-page-title {\r\n  @extend .skeleton-base;\r\n  width: 320px;\r\n  height: 32px;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.skeleton-page-description {\r\n  @extend .skeleton-base;\r\n  width: 450px;\r\n  height: 16px;\r\n  margin-bottom: 0.75rem;\r\n}\r\n\r\n/* Widget å®¹å™¨éª¨æ¶ */\r\n.skeleton-widget-container {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  margin-bottom: 2rem;\r\n  overflow: hidden;\r\n  position: relative;\r\n}\r\n\r\n.skeleton-widget-container.large {\r\n  min-height: 1300px;\r\n}\r\n\r\n/* Market Insight Grid éª¨æ¶ */\r\n.skeleton-insight-grid {\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n  gap: 1.5rem;\r\n  align-items: start;\r\n}\r\n\r\n.skeleton-insight-section {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.75rem;\r\n}\r\n\r\n.skeleton-insight-section:nth-child(2) {\r\n  border-top: 1px solid #f0f0f0;\r\n  padding-top: 1.5rem;\r\n}\r\n\r\n.skeleton-section-header {\r\n  padding-bottom: 0.5rem;\r\n}\r\n\r\n.skeleton-section-title {\r\n  @extend .skeleton-base;\r\n  width: 220px;\r\n  height: 18px;\r\n}\r\n\r\n.skeleton-chart-area {\r\n  min-height: 600px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.skeleton-chart {\r\n  @extend .skeleton-base;\r\n  width: 100%;\r\n  height: 550px;\r\n  border-radius: 8px;\r\n}\r\n\r\n/* Configuration Info éª¨æ¶ */\r\n.skeleton-config-info {\r\n  background: #f8f9fa;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  margin-top: 2rem;\r\n}\r\n\r\n.skeleton-config-title {\r\n  @extend .skeleton-base;\r\n  width: 200px;\r\n  height: 20px;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.skeleton-config-grid {\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n  gap: 1.5rem;\r\n}\r\n\r\n.skeleton-config-section {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.75rem;\r\n}\r\n\r\n.skeleton-config-section-title {\r\n  @extend .skeleton-base;\r\n  width: 160px;\r\n  height: 18px;\r\n}\r\n\r\n.skeleton-config-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.skeleton-config-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.skeleton-config-label {\r\n  @extend .skeleton-base;\r\n  width: 100px;\r\n  height: 14px;\r\n}\r\n\r\n.skeleton-config-value {\r\n  @extend .skeleton-base;\r\n  width: 150px;\r\n  height: 14px;\r\n}\r\n\r\n/* å¯¦éš›æ‡‰ç”¨éª¨æ¶æ¨£å¼ */\r\n.skeleton-page-title,\r\n.skeleton-page-description,\r\n.skeleton-section-title,\r\n.skeleton-chart,\r\n.skeleton-config-title,\r\n.skeleton-config-section-title,\r\n.skeleton-config-label,\r\n.skeleton-config-value {\r\n  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\r\n  background-size: 200px 100%;\r\n  animation: shimmer 1.5s infinite linear;\r\n  border-radius: 4px;\r\n}\r\n\r\n/* éŸ¿æ‡‰å¼è¨­è¨ˆ */\r\n@media (max-width: 768px) {\r\n  .skeleton-widget-container {\r\n    padding: 0.75rem;\r\n    margin-bottom: 1rem;\r\n  }\r\n  \r\n  .skeleton-widget-container.large {\r\n    min-height: 1000px;\r\n  }\r\n  \r\n  .skeleton-chart-area {\r\n    min-height: 450px;\r\n  }\r\n  \r\n  .skeleton-chart {\r\n    height: 400px;\r\n  }\r\n  \r\n  .skeleton-config-info {\r\n    padding: 0.75rem;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .skeleton-widget-container {\r\n    padding: 0.5rem;\r\n    margin: 0 -0.25rem 1rem -0.25rem;\r\n  }\r\n  \r\n  .skeleton-widget-container.large {\r\n    min-height: 800px;\r\n  }\r\n  \r\n  .skeleton-chart-area {\r\n    min-height: 350px;\r\n  }\r\n  \r\n  .skeleton-chart {\r\n    height: 300px;\r\n  }\r\n  \r\n  .skeleton-config-info {\r\n    padding: 0.5rem;\r\n    margin: 0 -0.25rem 2rem -0.25rem;\r\n  }\r\n}\r\n\r\n/* å‹•ç•«å»¶é²æ•ˆæœ */\r\n.skeleton-insight-section:nth-child(1) { animation-delay: 0.1s; }\r\n.skeleton-insight-section:nth-child(2) { animation-delay: 0.2s; }\r\n\r\n.skeleton-config-section:nth-child(1) { animation-delay: 0.1s; }\r\n.skeleton-config-section:nth-child(2) { animation-delay: 0.2s; }\r\n\r\n.skeleton-config-item:nth-child(odd) { animation-delay: 0.1s; }\r\n.skeleton-config-item:nth-child(even) { animation-delay: 0.2s; }\r\n\r\n/* æ·¡å…¥æ•ˆæœ */\r\n.stock-market-insight-skeleton {\r\n  animation: fadeIn 0.3s ease-in;\r\n}\r\n\r\n@keyframes fadeIn {\r\n  from {\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    opacity: 1;\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"stock-market-insight-test\">\r\n    <h2>Stock Market Insight Test</h2>\r\n    <p class=\"text-muted mb-3\">Testing Stock Market Insight component with Daily and Weekly views</p>\r\n\r\n    <!-- è¼‰å…¥ç‹€æ…‹é¡¯ç¤ºéª¨æ¶å± -->\r\n    <div v-if=\"loading\" class=\"loading-with-skeleton\">\r\n      <StockMarketInsightSkeleton />\r\n    </div>\r\n\r\n    <!-- éŒ¯èª¤ç‹€æ…‹ -->\r\n    <div v-else-if=\"error\" class=\"error\">\r\n      <p class=\"text-danger\">{{ error }}</p>\r\n      <button @click=\"refresh\" class=\"btn btn-secondary\">Retry</button>\r\n    </div>\r\n\r\n    <!-- æ­£å¸¸å…§å®¹ -->\r\n    <div v-else>\r\n      <!-- Stock Market Insight Widget -->\r\n      <StockMarketInsight \r\n        color-theme=\"light\"\r\n        :is-transparent=\"true\"\r\n        locale=\"en\"\r\n        height=\"1300px\"\r\n      />\r\n\r\n      <!-- Configuration Info -->\r\n      <div class=\"config-info\">\r\n        <h3>Widget Configuration</h3>\r\n        <div class=\"config-grid\">\r\n          <div class=\"config-section\">\r\n            <h4>Daily Configuration</h4>\r\n            <ul>\r\n              <li><strong>Symbols:</strong> NASDAQ, US30</li>\r\n              <li><strong>Date Range:</strong> 6 months, 1 Day intervals</li>\r\n              <li><strong>Chart Type:</strong> Candlesticks</li>\r\n              <li><strong>Moving Average:</strong> 5-period</li>\r\n              <li><strong>Volume:</strong> Enabled</li>\r\n            </ul>\r\n          </div>\r\n          <div class=\"config-section\">\r\n            <h4>Weekly Configuration</h4>\r\n            <ul>\r\n              <li><strong>Symbols:</strong> NASDAQ, US30</li>\r\n              <li><strong>Date Range:</strong> 6 months, 1 Week intervals</li>\r\n              <li><strong>Chart Type:</strong> Candlesticks</li>\r\n              <li><strong>Moving Average:</strong> 5-period</li>\r\n              <li><strong>Volume:</strong> Enabled</li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport StockMarketInsight from '@/components/StockMarketInsight.vue'\r\nimport StockMarketInsightSkeleton from '@/components/StockMarketInsightSkeleton.vue'\r\n\r\nexport default {\r\n  name: 'StockMarketInsightTest',\r\n  components: {\r\n    StockMarketInsight,\r\n    StockMarketInsightSkeleton\r\n  },\r\n  data() {\r\n    return {\r\n      loading: true,\r\n      error: null\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initializePage()\r\n  },\r\n  methods: {\r\n    async initializePage() {\r\n      try {\r\n        // æ¨¡æ“¬è¼‰å…¥æ™‚é–“\r\n        await new Promise(resolve => setTimeout(resolve, 1000))\r\n        this.loading = false\r\n      } catch (err) {\r\n        this.error = String(err)\r\n        this.loading = false\r\n      }\r\n    },\r\n    async refresh() {\r\n      this.loading = true\r\n      this.error = null\r\n      await this.initializePage()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.stock-market-insight-test {\r\n  padding: 0;\r\n}\r\n\r\n.mb-3 {\r\n  margin-bottom: 0.75rem;\r\n}\r\n\r\n.text-muted {\r\n  color: #6c757d;\r\n}\r\n\r\n.loading-with-skeleton {\r\n  /* éª¨æ¶å±è¼‰å…¥å®¹å™¨ */\r\n}\r\n\r\n.error {\r\n  text-align: center;\r\n  padding: 2rem;\r\n  background-color: #f8d7da;\r\n  border: 1px solid #f5c6cb;\r\n  border-radius: 8px;\r\n  margin: 1rem 0;\r\n}\r\n\r\n.text-danger {\r\n  color: #dc3545;\r\n}\r\n\r\n.btn {\r\n  padding: 0.5rem 1rem;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.btn-secondary {\r\n  background: #6c757d;\r\n  color: white;\r\n}\r\n\r\n.btn-secondary:hover {\r\n  background: #545b62;\r\n}\r\n\r\n.config-info {\r\n  background: #f8f9fa;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  margin-top: 2rem;\r\n}\r\n\r\n.config-info h3 {\r\n  margin-bottom: 1rem;\r\n  color: #333;\r\n}\r\n\r\n.config-grid {\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n  gap: 1.5rem;\r\n}\r\n\r\n.config-section h4 {\r\n  margin-bottom: 0.75rem;\r\n  color: #555;\r\n  font-size: 1rem;\r\n}\r\n\r\n.config-section ul {\r\n  margin: 0;\r\n  padding-left: 1.5rem;\r\n}\r\n\r\n.config-section li {\r\n  margin-bottom: 0.5rem;\r\n  color: #666;\r\n  font-size: 0.9rem;\r\n}\r\n</style>","<template>\r\n  <div class=\"yahoo-finance-test\">\r\n    <div class=\"test-header\">\r\n      <h2>Yahoo Finance API æ¸¬è©¦</h2>\r\n      <p>æ¸¬è©¦ Yahoo Finance API çš„æŠ€è¡“æŒ‡æ¨™æ•¸æ“šç²å–åŠŸèƒ½</p>\r\n    </div>\r\n\r\n    <div class=\"test-controls\">\r\n      <div class=\"symbol-input\">\r\n        <label for=\"symbol\">è‚¡ç¥¨ä»£è™Ÿ:</label>\r\n        <input \r\n          id=\"symbol\"\r\n          v-model=\"testSymbol\" \r\n          type=\"text\" \r\n          placeholder=\"ä¾‹å¦‚: AAPL, TSLA, ONDS\"\r\n          @keyup.enter=\"testSymbol && loadTestData()\"\r\n        />\r\n        <button \r\n          @click=\"loadTestData()\" \r\n          :disabled=\"!testSymbol || loading\"\r\n          class=\"test-btn\"\r\n        >\r\n          {{ loading ? 'è¼‰å…¥ä¸­...' : 'æ¸¬è©¦' }}\r\n        </button>\r\n      </div>\r\n      \r\n      <div class=\"preset-symbols\">\r\n        <span>å¿«é€Ÿæ¸¬è©¦:</span>\r\n        <button \r\n          v-for=\"symbol in presetSymbols\" \r\n          :key=\"symbol\"\r\n          @click=\"testSymbol = symbol; loadTestData()\"\r\n          :disabled=\"loading\"\r\n          class=\"preset-btn\"\r\n        >\r\n          {{ symbol }}\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-if=\"loading\" class=\"loading-section\">\r\n      <div class=\"loading-spinner\"></div>\r\n      <p>æ­£åœ¨å¾ Yahoo Finance ç²å– {{ testSymbol }} çš„æŠ€è¡“æŒ‡æ¨™æ•¸æ“š...</p>\r\n    </div>\r\n\r\n    <div v-if=\"error\" class=\"error-section\">\r\n      <h3>âŒ éŒ¯èª¤</h3>\r\n      <p>{{ error }}</p>\r\n    </div>\r\n\r\n    <div v-if=\"testData && !loading\" class=\"results-section\">\r\n      <h3>âœ… {{ testSymbol }} æŠ€è¡“æŒ‡æ¨™çµæœ</h3>\r\n      \r\n      <div class=\"indicators-grid\">\r\n        <!-- ç§»å‹•å¹³å‡ç·šçµ„ -->\r\n        <div class=\"indicator-section\">\r\n          <h3>ç§»å‹•å¹³å‡ç·š (Moving Averages)</h3>\r\n          <div class=\"ma-grid\">\r\n            <!-- MA5/SMA5 -->\r\n            <div class=\"indicator-card compact\">\r\n              <h4>MA5 / SMA5</h4>\r\n              <div class=\"indicator-details\">\r\n                <div class=\"main-value\" :class=\"getSignalClass(testData.ma5?.signal)\">\r\n                  {{ testData.ma5?.value || 'N/A' }}\r\n                </div>\r\n                <div class=\"signal-badge\" :class=\"getSignalClass(testData.ma5?.signal)\">\r\n                  {{ testData.ma5?.signal || 'N/A' }}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- MA10/SMA10 -->\r\n            <div class=\"indicator-card compact\">\r\n              <h4>MA10 / SMA10</h4>\r\n              <div class=\"indicator-details\">\r\n                <div class=\"main-value\" :class=\"getSignalClass(testData.ma10?.signal)\">\r\n                  {{ testData.ma10?.value || 'N/A' }}\r\n                </div>\r\n                <div class=\"signal-badge\" :class=\"getSignalClass(testData.ma10?.signal)\">\r\n                  {{ testData.ma10?.signal || 'N/A' }}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- MA30/SMA30 -->\r\n            <div class=\"indicator-card compact\">\r\n              <h4>MA30 / SMA30</h4>\r\n              <div class=\"indicator-details\">\r\n                <div class=\"main-value\" :class=\"getSignalClass(testData.ma30?.signal)\">\r\n                  {{ testData.ma30?.value || 'N/A' }}\r\n                </div>\r\n                <div class=\"signal-badge\" :class=\"getSignalClass(testData.ma30?.signal)\">\r\n                  {{ testData.ma30?.signal || 'N/A' }}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- SMA50 -->\r\n            <div class=\"indicator-card compact\">\r\n              <h4>SMA50</h4>\r\n              <div class=\"indicator-details\">\r\n                <div class=\"main-value\" :class=\"getSignalClass(testData.sma50?.signal)\">\r\n                  {{ testData.sma50?.value || 'N/A' }}\r\n                </div>\r\n                <div class=\"signal-badge\" :class=\"getSignalClass(testData.sma50?.signal)\">\r\n                  {{ testData.sma50?.signal || 'N/A' }}\r\n                </div>\r\n                <div class=\"additional-info\">\r\n                  <small>ç•¶å‰åƒ¹æ ¼: ${{ testData.sma50?.currentPrice || 'N/A' }}</small>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- ä¸€ç›®å‡è¡¡è¡¨çµ„ -->\r\n        <div class=\"indicator-section\">\r\n          <h3>ä¸€ç›®å‡è¡¡è¡¨ (Ichimoku Cloud)</h3>\r\n          <div class=\"ichimoku-grid\">\r\n            <!-- è½‰æ›ç·š -->\r\n            <div class=\"indicator-card compact\">\r\n              <h4>è½‰æ›ç·š (9)</h4>\r\n              <div class=\"indicator-details\">\r\n                <div class=\"main-value\" :class=\"getSignalClass(testData.ichimokuConversionLine?.signal)\">\r\n                  {{ testData.ichimokuConversionLine?.value || 'N/A' }}\r\n                </div>\r\n                <div class=\"signal-badge\" :class=\"getSignalClass(testData.ichimokuConversionLine?.signal)\">\r\n                  {{ testData.ichimokuConversionLine?.signal || 'N/A' }}\r\n                </div>\r\n                <div class=\"additional-info\">\r\n                  <small>æœ€é«˜: {{ testData.ichimokuConversionLine?.highestHigh || 'N/A' }}</small>\r\n                  <small>æœ€ä½: {{ testData.ichimokuConversionLine?.lowestLow || 'N/A' }}</small>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- åŸºæº–ç·š -->\r\n            <div class=\"indicator-card compact\">\r\n              <h4>åŸºæº–ç·š (26)</h4>\r\n              <div class=\"indicator-details\">\r\n                <div class=\"main-value\" :class=\"getSignalClass(testData.ichimokuBaseLine?.signal)\">\r\n                  {{ testData.ichimokuBaseLine?.value || 'N/A' }}\r\n                </div>\r\n                <div class=\"signal-badge\" :class=\"getSignalClass(testData.ichimokuBaseLine?.signal)\">\r\n                  {{ testData.ichimokuBaseLine?.signal || 'N/A' }}\r\n                </div>\r\n                <div class=\"additional-info\">\r\n                  <small>æœ€é«˜: {{ testData.ichimokuBaseLine?.highestHigh || 'N/A' }}</small>\r\n                  <small>æœ€ä½: {{ testData.ichimokuBaseLine?.lowestLow || 'N/A' }}</small>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- é²è¡Œç·š -->\r\n            <div class=\"indicator-card compact\">\r\n              <h4>é²è¡Œç·š (26)</h4>\r\n              <div class=\"indicator-details\">\r\n                <div class=\"main-value\" :class=\"getSignalClass(testData.ichimokuLaggingSpan?.signal)\">\r\n                  {{ testData.ichimokuLaggingSpan?.value || 'N/A' }}\r\n                </div>\r\n                <div class=\"signal-badge\" :class=\"getSignalClass(testData.ichimokuLaggingSpan?.signal)\">\r\n                  {{ testData.ichimokuLaggingSpan?.signal || 'N/A' }}\r\n                </div>\r\n                <div class=\"additional-info\">\r\n                  <small>åƒè€ƒåƒ¹: {{ testData.ichimokuLaggingSpan?.laggingReference || 'N/A' }}</small>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- æˆäº¤é‡åŠ æ¬Šç§»å‹•å¹³å‡ç·š -->\r\n        <div class=\"indicator-section\">\r\n          <h3>æˆäº¤é‡åŠ æ¬Šç§»å‹•å¹³å‡ç·š (VWMA)</h3>\r\n          <div class=\"vwma-grid\">\r\n            <div class=\"indicator-card\">\r\n              <h4>VWMA (20)</h4>\r\n              <div class=\"indicator-details\">\r\n                <div class=\"main-value\" :class=\"getSignalClass(testData.vwma20?.signal)\">\r\n                  {{ testData.vwma20?.value || 'N/A' }}\r\n                </div>\r\n                <div class=\"signal-badge\" :class=\"getSignalClass(testData.vwma20?.signal)\">\r\n                  {{ testData.vwma20?.signal || 'N/A' }}\r\n                </div>\r\n                <div class=\"additional-info\">\r\n                  <small>ç•¶å‰åƒ¹æ ¼: ${{ testData.vwma20?.currentPrice || 'N/A' }}</small>\r\n                  <small>ç¸½æˆäº¤é‡: {{ testData.vwma20?.totalVolume || 'N/A' }}</small>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- æŠ€è¡“æŒ‡æ¨™çµ„ -->\r\n        <div class=\"indicator-section\">\r\n          <h3>æŠ€è¡“æŒ‡æ¨™ (Technical Indicators)</h3>\r\n          <div class=\"technical-grid\">\r\n            <!-- RSI(14) -->\r\n            <div class=\"indicator-card\">\r\n              <h4>Relative Strength Index (14)</h4>\r\n              <div class=\"indicator-details\">\r\n                <div class=\"main-value\" :class=\"getSignalClass(testData.rsi14?.signal)\">\r\n                  {{ testData.rsi14?.value || 'N/A' }}\r\n                </div>\r\n                <div class=\"signal-badge\" :class=\"getSignalClass(testData.rsi14?.signal)\">\r\n                  {{ testData.rsi14?.signal || 'N/A' }}\r\n                </div>\r\n                <div class=\"rsi-bar\" v-if=\"testData.rsi14?.value\">\r\n                  <div class=\"rsi-fill\" :style=\"{ width: testData.rsi14.value + '%' }\"></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- ADX(14) -->\r\n            <div class=\"indicator-card\">\r\n              <h4>Average Directional Index (14)</h4>\r\n              <div class=\"indicator-details\">\r\n                <div class=\"main-value\" :class=\"getSignalClass(testData.adx14?.signal)\">\r\n                  {{ testData.adx14?.value || 'N/A' }}\r\n                </div>\r\n                <div class=\"signal-badge\" :class=\"getSignalClass(testData.adx14?.signal)\">\r\n                  {{ testData.adx14?.signal || 'N/A' }}\r\n                </div>\r\n                <div class=\"additional-info\">\r\n                  <small>+DI: {{ testData.adx14?.plusDI || 'N/A' }}</small>\r\n                  <small>-DI: {{ testData.adx14?.minusDI || 'N/A' }}</small>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- MACD -->\r\n            <div class=\"indicator-card\">\r\n              <h4>MACD Level (12, 26)</h4>\r\n              <div class=\"indicator-details\">\r\n                <div class=\"main-value\" :class=\"getSignalClass(testData.macd?.signal)\">\r\n                  {{ testData.macd?.value || 'N/A' }}\r\n                </div>\r\n                <div class=\"signal-badge\" :class=\"getSignalClass(testData.macd?.signal)\">\r\n                  {{ testData.macd?.signal || 'N/A' }}\r\n                </div>\r\n                <div class=\"additional-info\">\r\n                  <small>ä¿¡è™Ÿç·š: {{ testData.macd?.signalLine || 'N/A' }}</small>\r\n                  <small>æŸ±ç‹€åœ–: {{ testData.macd?.histogram || 'N/A' }}</small>\r\n                  <small>EMA12: {{ testData.macd?.ema12 || 'N/A' }}</small>\r\n                  <small>EMA26: {{ testData.macd?.ema26 || 'N/A' }}</small>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"metadata\">\r\n        <p><strong>æœ€å¾Œæ›´æ–°:</strong> {{ formatDate(testData.lastUpdated) }}</p>\r\n        <p><strong>æ•¸æ“šä¾†æº:</strong> {{ testData.source || 'Yahoo Finance' }}</p>\r\n        <p v-if=\"testData.proxy\"><strong>ä»£ç†æœå‹™:</strong> {{ testData.proxy }}</p>\r\n        <p v-if=\"testData.dataPoints\"><strong>æ•¸æ“šé»æ•¸é‡:</strong> {{ testData.dataPoints }}</p>\r\n        <p v-if=\"testData.error\" class=\"error-text\"><strong>æ³¨æ„:</strong> {{ testData.error }}</p>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"cache-section\">\r\n      <h3>ç·©å­˜ç‹€æ…‹</h3>\r\n      <button @click=\"loadCacheStatus()\" class=\"cache-btn\">æª¢æŸ¥ç·©å­˜</button>\r\n      <button @click=\"clearCache()\" class=\"cache-btn\">æ¸…é™¤æ‰€æœ‰ç·©å­˜</button>\r\n      \r\n      <div v-if=\"cacheStatus\" class=\"cache-info\">\r\n        <h4>API è«‹æ±‚ç·©å­˜ (5åˆ†é˜)</h4>\r\n        <pre>{{ JSON.stringify(cacheStatus.apiCache, null, 2) }}</pre>\r\n        \r\n        <h4>æ¯æ—¥æŠ€è¡“æŒ‡æ¨™ç·©å­˜ (24å°æ™‚)</h4>\r\n        <pre>{{ JSON.stringify(cacheStatus.dailyCache, null, 2) }}</pre>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport yahooFinanceAPI from '../utils/yahooFinanceApi.js'\r\n\r\nexport default {\r\n  name: 'YahooFinanceTest',\r\n  data() {\r\n    return {\r\n      testSymbol: 'AAPL',\r\n      loading: false,\r\n      error: null,\r\n      testData: null,\r\n      cacheStatus: null,\r\n      presetSymbols: ['AAPL', 'TSLA', 'MSFT', 'GOOGL', 'ONDS', 'RDW']\r\n    }\r\n  },\r\n  methods: {\r\n    async loadTestData() {\r\n      if (!this.testSymbol) return;\r\n      \r\n      this.loading = true;\r\n      this.error = null;\r\n      this.testData = null;\r\n      \r\n      try {\r\n        console.log(`Testing Yahoo Finance API for ${this.testSymbol}...`);\r\n        this.testData = await yahooFinanceAPI.getTechnicalIndicators(this.testSymbol);\r\n        \r\n        if (this.testData.error) {\r\n          this.error = this.testData.error;\r\n        }\r\n        \r\n      } catch (err) {\r\n        this.error = err.message;\r\n        console.error('Test failed:', err);\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n    \r\n    getSignalClass(signal) {\r\n      if (!signal) return 'neutral';\r\n      \r\n      const bullishSignals = ['BUY', 'OVERSOLD', 'STRONG_TREND'];\r\n      const bearishSignals = ['SELL', 'OVERBOUGHT'];\r\n      const neutralSignals = ['WEAK_TREND'];\r\n      \r\n      if (bullishSignals.includes(signal)) return 'bullish';\r\n      if (bearishSignals.includes(signal)) return 'bearish';\r\n      return 'neutral';\r\n    },\r\n    \r\n    formatDate(dateString) {\r\n      if (!dateString) return 'N/A';\r\n      return new Date(dateString).toLocaleString('zh-TW');\r\n    },\r\n    \r\n    async loadCacheStatus() {\r\n      this.cacheStatus = yahooFinanceAPI.getCacheStats();\r\n    },\r\n    \r\n    clearCache() {\r\n      yahooFinanceAPI.clearCache();\r\n      yahooFinanceAPI.clearDailyCache();\r\n      this.cacheStatus = null;\r\n      alert('æ‰€æœ‰ç·©å­˜å·²æ¸…é™¤ (API ç·©å­˜ + æ¯æ—¥ç·©å­˜)');\r\n    }\r\n  },\r\n  \r\n  mounted() {\r\n    // è‡ªå‹•è¼‰å…¥ AAPL æ•¸æ“šä½œç‚ºç¤ºä¾‹\r\n    this.loadTestData();\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.yahoo-finance-test {\r\n  max-width: 1600px;\r\n  margin: 0 auto;\r\n  padding: 2rem;\r\n}\r\n\r\n.test-header {\r\n  text-align: center;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.test-header h2 {\r\n  color: #2c3e50;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.test-controls {\r\n  background: #f8f9fa;\r\n  padding: 1.5rem;\r\n  border-radius: 8px;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.symbol-input {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 1rem;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.symbol-input label {\r\n  font-weight: 600;\r\n  min-width: 80px;\r\n}\r\n\r\n.symbol-input input {\r\n  flex: 1;\r\n  padding: 0.5rem;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 1rem;\r\n}\r\n\r\n.test-btn, .preset-btn, .cache-btn {\r\n  padding: 0.5rem 1rem;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.9rem;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.test-btn {\r\n  background: #007bff;\r\n  color: white;\r\n}\r\n\r\n.test-btn:hover:not(:disabled) {\r\n  background: #0056b3;\r\n}\r\n\r\n.test-btn:disabled {\r\n  background: #6c757d;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.preset-symbols {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.preset-btn {\r\n  background: #e9ecef;\r\n  color: #495057;\r\n  border: 1px solid #ced4da;\r\n}\r\n\r\n.preset-btn:hover:not(:disabled) {\r\n  background: #dee2e6;\r\n}\r\n\r\n.loading-section {\r\n  text-align: center;\r\n  padding: 2rem;\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.loading-spinner {\r\n  width: 40px;\r\n  height: 40px;\r\n  border: 4px solid #e9ecef;\r\n  border-top: 4px solid #007bff;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n  margin: 0 auto 1rem;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n.error-section {\r\n  background: #f8d7da;\r\n  color: #721c24;\r\n  padding: 1.5rem;\r\n  border-radius: 8px;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.results-section {\r\n  background: white;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  padding: 2rem;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.indicators-grid {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 2rem;\r\n  margin: 1.5rem 0;\r\n}\r\n\r\n.indicator-section {\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n  padding: 1.5rem;\r\n}\r\n\r\n.indicator-section h3 {\r\n  margin: 0 0 1rem 0;\r\n  color: #495057;\r\n  font-size: 1.1rem;\r\n  border-bottom: 2px solid #dee2e6;\r\n  padding-bottom: 0.5rem;\r\n}\r\n\r\n.ma-grid, .ichimoku-grid, .technical-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\r\n  gap: 1rem;\r\n}\r\n\r\n.vwma-grid {\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n  max-width: 400px;\r\n}\r\n\r\n.indicator-card {\r\n  background: white;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  padding: 1.5rem;\r\n}\r\n\r\n.indicator-card.compact {\r\n  padding: 1rem;\r\n}\r\n\r\n.indicator-card h4 {\r\n  margin: 0 0 1rem 0;\r\n  color: #495057;\r\n  font-size: 0.95rem;\r\n}\r\n\r\n.main-value {\r\n  font-size: 1.3rem;\r\n  font-weight: bold;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.signal-badge {\r\n  display: inline-block;\r\n  padding: 0.25rem 0.75rem;\r\n  border-radius: 20px;\r\n  font-size: 0.75rem;\r\n  font-weight: 600;\r\n  text-transform: uppercase;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.bullish {\r\n  color: #155724;\r\n  background: #d4edda;\r\n}\r\n\r\n.bearish {\r\n  color: #721c24;\r\n  background: #f8d7da;\r\n}\r\n\r\n.neutral {\r\n  color: #495057;\r\n  background: #e9ecef;\r\n}\r\n\r\n.additional-info {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.25rem;\r\n}\r\n\r\n.additional-info small {\r\n  color: #6c757d;\r\n  font-size: 0.8rem;\r\n}\r\n\r\n.rsi-bar {\r\n  width: 100%;\r\n  height: 8px;\r\n  background: #e9ecef;\r\n  border-radius: 4px;\r\n  overflow: hidden;\r\n  margin-top: 0.5rem;\r\n}\r\n\r\n.rsi-fill {\r\n  height: 100%;\r\n  background: linear-gradient(90deg, #28a745 0%, #ffc107 50%, #dc3545 100%);\r\n  transition: width 0.3s ease;\r\n}\r\n\r\n.metadata {\r\n  background: #f8f9fa;\r\n  padding: 1rem;\r\n  border-radius: 4px;\r\n  margin-top: 1.5rem;\r\n}\r\n\r\n.metadata p {\r\n  margin: 0.25rem 0;\r\n  font-size: 0.9rem;\r\n  color: #6c757d;\r\n}\r\n\r\n.error-text {\r\n  color: #dc3545 !important;\r\n  font-weight: 600;\r\n}\r\n\r\n.cache-section {\r\n  background: #f8f9fa;\r\n  padding: 1.5rem;\r\n  border-radius: 8px;\r\n}\r\n\r\n.cache-section h3 {\r\n  margin: 0 0 1rem 0;\r\n  color: #495057;\r\n}\r\n\r\n.cache-btn {\r\n  background: #6c757d;\r\n  color: white;\r\n  margin-right: 0.5rem;\r\n}\r\n\r\n.cache-btn:hover {\r\n  background: #545b62;\r\n}\r\n\r\n.cache-info {\r\n  margin-top: 1rem;\r\n  background: white;\r\n  padding: 1rem;\r\n  border-radius: 4px;\r\n  border: 1px solid #e9ecef;\r\n}\r\n\r\n.cache-info pre {\r\n  margin: 0;\r\n  font-size: 0.8rem;\r\n  color: #495057;\r\n  white-space: pre-wrap;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .yahoo-finance-test {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .symbol-input {\r\n    flex-direction: column;\r\n    align-items: stretch;\r\n  }\r\n  \r\n  .preset-symbols {\r\n    justify-content: center;\r\n  }\r\n  \r\n  .ma-grid, .ichimoku-grid, .technical-grid {\r\n    grid-template-columns: 1fr;\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"validation-page\">\r\n    <div class=\"validation-header\">\r\n      <h2>æŠ€è¡“æŒ‡æ¨™é©—è­‰</h2>\r\n      <p>å°æ¯”æˆ‘å€‘çš„è¨ˆç®—çµæœèˆ‡ TradingView çš„æ•¸æ“š</p>\r\n    </div>\r\n\r\n    <div class=\"validation-controls\">\r\n      <div class=\"symbol-input\">\r\n        <label>è‚¡ç¥¨ä»£è™Ÿ:</label>\r\n        <input \r\n          v-model=\"testSymbol\" \r\n          type=\"text\" \r\n          placeholder=\"ä¾‹å¦‚: AAPL\"\r\n          @keyup.enter=\"loadData()\"\r\n        />\r\n        <button @click=\"loadData()\" :disabled=\"loading\">\r\n          {{ loading ? 'è¼‰å…¥ä¸­...' : 'è¼‰å…¥æ•¸æ“š' }}\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-if=\"loading\" class=\"loading-section\">\r\n      <div class=\"loading-spinner\"></div>\r\n      <p>æ­£åœ¨è¼‰å…¥æ•¸æ“š...</p>\r\n    </div>\r\n\r\n    <div v-if=\"ourData && !loading\" class=\"comparison-section\">\r\n      <h3>{{ testSymbol }} æŠ€è¡“æŒ‡æ¨™å°æ¯”</h3>\r\n      \r\n      <div class=\"comparison-grid\">\r\n        <!-- æˆ‘å€‘çš„è¨ˆç®—çµæœ -->\r\n        <div class=\"our-results\">\r\n          <h4>æˆ‘å€‘çš„è¨ˆç®—çµæœ</h4>\r\n          <div class=\"indicator-list\">\r\n            <div class=\"indicator-item\">\r\n              <strong>SMA(50):</strong> {{ ourData.sma50?.value || 'N/A' }}\r\n              <span class=\"signal\" :class=\"getSignalClass(ourData.sma50?.signal)\">\r\n                {{ ourData.sma50?.signal }}\r\n              </span>\r\n            </div>\r\n            <div class=\"indicator-item\">\r\n              <strong>RSI(14):</strong> {{ ourData.rsi14?.value || 'N/A' }}\r\n              <span class=\"signal\" :class=\"getSignalClass(ourData.rsi14?.signal)\">\r\n                {{ ourData.rsi14?.signal }}\r\n              </span>\r\n            </div>\r\n            <div class=\"indicator-item\">\r\n              <strong>MACD:</strong> {{ ourData.macd?.value || 'N/A' }}\r\n              <span class=\"signal\" :class=\"getSignalClass(ourData.macd?.signal)\">\r\n                {{ ourData.macd?.signal }}\r\n              </span>\r\n            </div>\r\n          </div>\r\n          \r\n          <div class=\"debug-info\">\r\n            <h5>èª¿è©¦ä¿¡æ¯</h5>\r\n            <p><strong>æ•¸æ“šé»:</strong> {{ ourData.dataPoints }}</p>\r\n            <p><strong>åƒ¹æ ¼ç¯„åœ:</strong> ${{ ourData.priceRange?.min }} - ${{ ourData.priceRange?.max }}</p>\r\n            <p><strong>æœ€æ–°åƒ¹æ ¼:</strong> ${{ ourData.priceRange?.latest }}</p>\r\n            <p><strong>ç•¶å‰åƒ¹æ ¼:</strong> ${{ ourData.sma50?.currentPrice }}</p>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- TradingView Widget -->\r\n        <div class=\"tradingview-results\">\r\n          <h4>TradingView æŠ€è¡“åˆ†æ</h4>\r\n          <div class=\"tradingview-widget-container\">\r\n            <div class=\"tradingview-widget\" :id=\"`tradingview-widget-${testSymbol}`\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- è©³ç´°å°æ¯” -->\r\n      <div class=\"detailed-comparison\">\r\n        <h4>è©³ç´°æ•¸æ“šå°æ¯”</h4>\r\n        <div class=\"comparison-table\">\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                <th>æŒ‡æ¨™</th>\r\n                <th>æˆ‘å€‘çš„çµæœ</th>\r\n                <th>TradingView</th>\r\n                <th>å·®ç•°</th>\r\n                <th>ç‹€æ…‹</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr>\r\n                <td>SMA(50)</td>\r\n                <td>${{ ourData.sma50?.value || 'N/A' }}</td>\r\n                <td>è«‹æŸ¥çœ‹å³å´ Widget</td>\r\n                <td>-</td>\r\n                <td>{{ ourData.sma50?.signal }}</td>\r\n              </tr>\r\n              <tr>\r\n                <td>RSI(14)</td>\r\n                <td>{{ ourData.rsi14?.value || 'N/A' }}</td>\r\n                <td>è«‹æŸ¥çœ‹å³å´ Widget</td>\r\n                <td>-</td>\r\n                <td>{{ ourData.rsi14?.signal }}</td>\r\n              </tr>\r\n              <tr>\r\n                <td>MACD</td>\r\n                <td>{{ ourData.macd?.value || 'N/A' }}</td>\r\n                <td>è«‹æŸ¥çœ‹å³å´ Widget</td>\r\n                <td>-</td>\r\n                <td>{{ ourData.macd?.signal }}</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport yahooFinanceAPI from '../utils/yahooFinanceApi.js'\r\n\r\nexport default {\r\n  name: 'TechnicalIndicatorsValidation',\r\n  data() {\r\n    return {\r\n      testSymbol: 'AAPL',\r\n      loading: false,\r\n      ourData: null,\r\n      tradingViewWidget: null\r\n    }\r\n  },\r\n  methods: {\r\n    async loadData() {\r\n      if (!this.testSymbol) return;\r\n      \r\n      this.loading = true;\r\n      this.ourData = null;\r\n      \r\n      try {\r\n        // è¨­ç½®ç‚º API æ¨¡å¼\r\n        yahooFinanceAPI.setMockMode(false);\r\n        \r\n        // ç²å–æˆ‘å€‘çš„è¨ˆç®—çµæœ\r\n        this.ourData = await yahooFinanceAPI.getTechnicalIndicators(this.testSymbol);\r\n        \r\n        // è¼‰å…¥ TradingView Widget\r\n        this.loadTradingViewWidget();\r\n        \r\n      } catch (error) {\r\n        console.error('Failed to load data:', error);\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n    \r\n    loadTradingViewWidget() {\r\n      // æ¸…é™¤ç¾æœ‰çš„ widget\r\n      if (this.tradingViewWidget) {\r\n        const container = document.getElementById(`tradingview-widget-${this.testSymbol}`);\r\n        if (container) {\r\n          container.innerHTML = '';\r\n        }\r\n      }\r\n      \r\n      // å‰µå»ºæ–°çš„ TradingView widget\r\n      setTimeout(() => {\r\n        const script = document.createElement('script');\r\n        script.type = 'text/javascript';\r\n        script.src = 'https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js';\r\n        script.async = true;\r\n        script.innerHTML = JSON.stringify({\r\n          \"interval\": \"1D\",\r\n          \"width\": \"100%\",\r\n          \"height\": \"400\",\r\n          \"isTransparent\": false,\r\n          \"symbol\": `NASDAQ:${this.testSymbol}`,\r\n          \"showIntervalTabs\": true,\r\n          \"locale\": \"en\",\r\n          \"colorTheme\": \"light\"\r\n        });\r\n        \r\n        const container = document.getElementById(`tradingview-widget-${this.testSymbol}`);\r\n        if (container) {\r\n          container.appendChild(script);\r\n        }\r\n      }, 100);\r\n    },\r\n    \r\n    getSignalClass(signal) {\r\n      if (!signal) return 'neutral';\r\n      \r\n      const bullishSignals = ['BUY', 'OVERSOLD'];\r\n      const bearishSignals = ['SELL', 'OVERBOUGHT'];\r\n      \r\n      if (bullishSignals.includes(signal)) return 'bullish';\r\n      if (bearishSignals.includes(signal)) return 'bearish';\r\n      return 'neutral';\r\n    }\r\n  },\r\n  \r\n  mounted() {\r\n    this.loadData();\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.validation-page {\r\n  max-width: 1400px;\r\n  margin: 0 auto;\r\n  padding: 2rem;\r\n}\r\n\r\n.validation-header {\r\n  text-align: center;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.validation-header h2 {\r\n  color: #2c3e50;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.validation-controls {\r\n  background: #f8f9fa;\r\n  padding: 1.5rem;\r\n  border-radius: 8px;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.symbol-input {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 1rem;\r\n}\r\n\r\n.symbol-input label {\r\n  font-weight: 600;\r\n  min-width: 100px;\r\n}\r\n\r\n.symbol-input input {\r\n  flex: 1;\r\n  padding: 0.5rem;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 1rem;\r\n  max-width: 200px;\r\n}\r\n\r\n.symbol-input button {\r\n  padding: 0.5rem 1rem;\r\n  background: #007bff;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n\r\n.symbol-input button:hover:not(:disabled) {\r\n  background: #0056b3;\r\n}\r\n\r\n.symbol-input button:disabled {\r\n  background: #6c757d;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.loading-section {\r\n  text-align: center;\r\n  padding: 2rem;\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n}\r\n\r\n.loading-spinner {\r\n  width: 40px;\r\n  height: 40px;\r\n  border: 4px solid #e9ecef;\r\n  border-top: 4px solid #007bff;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n  margin: 0 auto 1rem;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n.comparison-section {\r\n  background: white;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  padding: 2rem;\r\n}\r\n\r\n.comparison-grid {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 2rem;\r\n  margin: 2rem 0;\r\n}\r\n\r\n.our-results, .tradingview-results {\r\n  background: #f8f9fa;\r\n  padding: 1.5rem;\r\n  border-radius: 8px;\r\n}\r\n\r\n.our-results h4, .tradingview-results h4 {\r\n  margin: 0 0 1rem 0;\r\n  color: #495057;\r\n}\r\n\r\n.indicator-list {\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.indicator-item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 0.5rem 0;\r\n  border-bottom: 1px solid #e9ecef;\r\n}\r\n\r\n.indicator-item:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.signal {\r\n  padding: 0.25rem 0.5rem;\r\n  border-radius: 4px;\r\n  font-size: 0.8rem;\r\n  font-weight: 600;\r\n  text-transform: uppercase;\r\n}\r\n\r\n.signal.bullish {\r\n  background: #d4edda;\r\n  color: #155724;\r\n}\r\n\r\n.signal.bearish {\r\n  background: #f8d7da;\r\n  color: #721c24;\r\n}\r\n\r\n.signal.neutral {\r\n  background: #e9ecef;\r\n  color: #495057;\r\n}\r\n\r\n.debug-info {\r\n  background: white;\r\n  padding: 1rem;\r\n  border-radius: 4px;\r\n  border: 1px solid #e9ecef;\r\n}\r\n\r\n.debug-info h5 {\r\n  margin: 0 0 0.5rem 0;\r\n  color: #495057;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.debug-info p {\r\n  margin: 0.25rem 0;\r\n  font-size: 0.8rem;\r\n  color: #6c757d;\r\n}\r\n\r\n.tradingview-widget-container {\r\n  height: 400px;\r\n  background: white;\r\n  border-radius: 4px;\r\n  overflow: hidden;\r\n}\r\n\r\n.detailed-comparison {\r\n  margin-top: 2rem;\r\n  background: #f8f9fa;\r\n  padding: 1.5rem;\r\n  border-radius: 8px;\r\n}\r\n\r\n.detailed-comparison h4 {\r\n  margin: 0 0 1rem 0;\r\n  color: #495057;\r\n}\r\n\r\n.comparison-table {\r\n  overflow-x: auto;\r\n}\r\n\r\n.comparison-table table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  background: white;\r\n  border-radius: 4px;\r\n  overflow: hidden;\r\n}\r\n\r\n.comparison-table th,\r\n.comparison-table td {\r\n  padding: 0.75rem;\r\n  text-align: left;\r\n  border-bottom: 1px solid #e9ecef;\r\n}\r\n\r\n.comparison-table th {\r\n  background: #e9ecef;\r\n  font-weight: 600;\r\n  color: #495057;\r\n}\r\n\r\n.comparison-table tr:last-child td {\r\n  border-bottom: none;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .validation-page {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .comparison-grid {\r\n    grid-template-columns: 1fr;\r\n  }\r\n  \r\n  .symbol-input {\r\n    flex-direction: column;\r\n    align-items: stretch;\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"metadata-test-container\">\r\n    <div class=\"header\">\r\n      <h1>å…ƒæ•¸æ“šæœå‹™æ¸¬è©¦</h1>\r\n      <p>æ¸¬è©¦å‹•æ…‹ Yahoo Finance API vs éœæ…‹æ–‡ä»¶çš„ sector/industry æ•¸æ“š</p>\r\n    </div>\r\n\r\n    <!-- æ§åˆ¶é¢æ¿ -->\r\n    <div class=\"control-panel\">\r\n      <div class=\"mode-selector\">\r\n        <label>\r\n          <input \r\n            type=\"radio\" \r\n            :value=\"true\" \r\n            v-model=\"useDynamicAPI\"\r\n            @change=\"switchMode\"\r\n          />\r\n          å‹•æ…‹ API (Yahoo Finance)\r\n        </label>\r\n        <label>\r\n          <input \r\n            type=\"radio\" \r\n            :value=\"false\" \r\n            v-model=\"useDynamicAPI\"\r\n            @change=\"switchMode\"\r\n          />\r\n          éœæ…‹æ–‡ä»¶ (symbols_metadata.json)\r\n        </label>\r\n      </div>\r\n\r\n      <div class=\"test-controls\">\r\n        <button @click=\"testSingleSymbol\" :disabled=\"loading\">\r\n          æ¸¬è©¦å–®å€‹è‚¡ç¥¨\r\n        </button>\r\n        <button @click=\"testBatchSymbols\" :disabled=\"loading\">\r\n          æ‰¹é‡æ¸¬è©¦\r\n        </button>\r\n        <button @click=\"clearCache\" :disabled=\"loading\">\r\n          æ¸…é™¤ç·©å­˜\r\n        </button>\r\n        <button @click=\"warmupCache\" :disabled=\"loading\">\r\n          é ç†±ç·©å­˜\r\n        </button>\r\n      </div>\r\n\r\n      <div class=\"symbol-input\">\r\n        <input \r\n          v-model=\"testSymbol\" \r\n          placeholder=\"è¼¸å…¥è‚¡ç¥¨ä»£ç¢¼ (ä¾‹å¦‚: AAPL)\"\r\n          @keyup.enter=\"testSingleSymbol\"\r\n        />\r\n      </div>\r\n    </div>\r\n\r\n    <!-- ç‹€æ…‹é¡¯ç¤º -->\r\n    <div class=\"status-panel\" v-if=\"loading || error || successMessage\">\r\n      <div v-if=\"loading\" class=\"loading\">\r\n        <span class=\"spinner\"></span>\r\n        {{ loadingMessage }}\r\n      </div>\r\n      <div v-if=\"error\" class=\"error\">\r\n        âŒ {{ error }}\r\n      </div>\r\n      <div v-if=\"successMessage\" class=\"success\">\r\n        âœ… {{ successMessage }}\r\n      </div>\r\n    </div>\r\n\r\n    <!-- ç·©å­˜çµ±è¨ˆ -->\r\n    <div class=\"cache-stats\" v-if=\"cacheStats\">\r\n      <h3>ç·©å­˜çµ±è¨ˆ</h3>\r\n      <div class=\"stats-grid\">\r\n        <div class=\"stat-item\">\r\n          <label>æ¨¡å¼:</label>\r\n          <span>{{ cacheStats.mode === 'dynamic' ? 'å‹•æ…‹ API' : 'éœæ…‹æ–‡ä»¶' }}</span>\r\n        </div>\r\n        <div class=\"stat-item\">\r\n          <label>ç·©å­˜æ¢ç›®:</label>\r\n          <span>{{ cacheStats.totalCached || 0 }}</span>\r\n        </div>\r\n        <div class=\"stat-item\" v-if=\"cacheStats.mode === 'static'\">\r\n          <label>å…ƒæ•¸æ“šå·²è¼‰å…¥:</label>\r\n          <span>{{ cacheStats.metadataLoaded ? 'æ˜¯' : 'å¦' }}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- æ¸¬è©¦çµæœ -->\r\n    <div class=\"results-section\" v-if=\"testResults.length > 0\">\r\n      <h3>æ¸¬è©¦çµæœ</h3>\r\n      <div class=\"results-grid\">\r\n        <div \r\n          v-for=\"result in testResults\" \r\n          :key=\"result.symbol\"\r\n          class=\"result-card\"\r\n          :class=\"getResultCardClass(result)\"\r\n        >\r\n          <div class=\"result-header\">\r\n            <h4>{{ result.symbol }}</h4>\r\n            <span class=\"confidence-badge\" :class=\"getConfidenceBadgeClass(result.confidence)\">\r\n              {{ (result.confidence * 100).toFixed(0) }}%\r\n            </span>\r\n          </div>\r\n          \r\n          <div class=\"result-content\">\r\n            <div class=\"metadata-row\">\r\n              <label>Sector:</label>\r\n              <span>{{ result.sector }}</span>\r\n            </div>\r\n            <div class=\"metadata-row\">\r\n              <label>Industry:</label>\r\n              <span>{{ result.industry }}</span>\r\n            </div>\r\n            <div class=\"metadata-row\">\r\n              <label>Exchange:</label>\r\n              <span>{{ result.exchange }}</span>\r\n            </div>\r\n            <div class=\"metadata-row\" v-if=\"result.marketCapFormatted\">\r\n              <label>Market Cap:</label>\r\n              <span>{{ result.marketCapFormatted }}</span>\r\n            </div>\r\n            <div class=\"metadata-row\" v-if=\"result.country\">\r\n              <label>Country:</label>\r\n              <span>{{ result.country }}</span>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"result-footer\">\r\n            <div class=\"source-info\">\r\n              <small>{{ result.source }}</small>\r\n            </div>\r\n            <div class=\"timestamp\">\r\n              <small>{{ formatTimestamp(result.lastUpdated) }}</small>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- æ¯”è¼ƒçµæœ -->\r\n    <div class=\"comparison-section\" v-if=\"comparisonResults.length > 0\">\r\n      <h3>å‹•æ…‹ vs éœæ…‹æ¯”è¼ƒ</h3>\r\n      <div class=\"comparison-table\">\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>Symbol</th>\r\n              <th>å‹•æ…‹ API - Sector</th>\r\n              <th>éœæ…‹æ–‡ä»¶ - Sector</th>\r\n              <th>å‹•æ…‹ API - Industry</th>\r\n              <th>éœæ…‹æ–‡ä»¶ - Industry</th>\r\n              <th>åŒ¹é…åº¦</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"comp in comparisonResults\" :key=\"comp.symbol\">\r\n              <td>{{ comp.symbol }}</td>\r\n              <td>{{ comp.dynamic.sector }}</td>\r\n              <td>{{ comp.static.sector }}</td>\r\n              <td>{{ comp.dynamic.industry }}</td>\r\n              <td>{{ comp.static.industry }}</td>\r\n              <td>\r\n                <span class=\"match-indicator\" :class=\"comp.matchClass\">\r\n                  {{ comp.matchScore }}%\r\n                </span>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { metadataService } from '@/utils/metadataService.js'\r\n\r\nexport default {\r\n  name: 'MetadataServiceTest',\r\n  data() {\r\n    return {\r\n      useDynamicAPI: true,\r\n      loading: false,\r\n      loadingMessage: '',\r\n      error: null,\r\n      successMessage: null,\r\n      testSymbol: 'AAPL',\r\n      testResults: [],\r\n      comparisonResults: [],\r\n      cacheStats: null,\r\n      \r\n      // æ¸¬è©¦ç”¨çš„è‚¡ç¥¨åˆ—è¡¨\r\n      testSymbols: ['AAPL', 'MSFT', 'GOOGL', 'TSLA', 'NVDA', 'META', 'AMZN', 'NFLX', 'ASTS', 'RIVN']\r\n    }\r\n  },\r\n  \r\n  async mounted() {\r\n    await this.updateCacheStats()\r\n  },\r\n  \r\n  methods: {\r\n    async switchMode() {\r\n      try {\r\n        metadataService.setUseDynamicAPI(this.useDynamicAPI)\r\n        await this.updateCacheStats()\r\n        this.successMessage = `å·²åˆ‡æ›åˆ°${this.useDynamicAPI ? 'å‹•æ…‹ API' : 'éœæ…‹æ–‡ä»¶'}æ¨¡å¼`\r\n        setTimeout(() => { this.successMessage = null }, 3000)\r\n      } catch (error) {\r\n        this.error = `åˆ‡æ›æ¨¡å¼å¤±æ•—: ${error.message}`\r\n        setTimeout(() => { this.error = null }, 5000)\r\n      }\r\n    },\r\n\r\n    async testSingleSymbol() {\r\n      if (!this.testSymbol.trim()) {\r\n        this.error = 'è«‹è¼¸å…¥è‚¡ç¥¨ä»£ç¢¼'\r\n        setTimeout(() => { this.error = null }, 3000)\r\n        return\r\n      }\r\n\r\n      this.loading = true\r\n      this.loadingMessage = `æ­£åœ¨ç²å– ${this.testSymbol} çš„å…ƒæ•¸æ“š...`\r\n      this.error = null\r\n\r\n      try {\r\n        const startTime = Date.now()\r\n        const metadata = await metadataService.getSymbolMetadata(this.testSymbol.toUpperCase())\r\n        const duration = Date.now() - startTime\r\n\r\n        // æ·»åŠ åˆ°çµæœåˆ—è¡¨\r\n        const result = {\r\n          ...metadata,\r\n          duration,\r\n          timestamp: new Date().toISOString()\r\n        }\r\n\r\n        // æ›´æ–°çµæœåˆ—è¡¨ (ä¿æŒæœ€æ–°çš„åœ¨å‰é¢)\r\n        this.testResults = [result, ...this.testResults.filter(r => r.symbol !== result.symbol)]\r\n\r\n        this.successMessage = `æˆåŠŸç²å– ${result.symbol} çš„å…ƒæ•¸æ“š (${duration}ms)`\r\n        setTimeout(() => { this.successMessage = null }, 3000)\r\n\r\n        await this.updateCacheStats()\r\n      } catch (error) {\r\n        this.error = `ç²å–å…ƒæ•¸æ“šå¤±æ•—: ${error.message}`\r\n        setTimeout(() => { this.error = null }, 5000)\r\n      } finally {\r\n        this.loading = false\r\n        this.loadingMessage = ''\r\n      }\r\n    },\r\n\r\n    async testBatchSymbols() {\r\n      this.loading = true\r\n      this.loadingMessage = `æ­£åœ¨æ‰¹é‡ç²å– ${this.testSymbols.length} å€‹è‚¡ç¥¨çš„å…ƒæ•¸æ“š...`\r\n      this.error = null\r\n\r\n      try {\r\n        const startTime = Date.now()\r\n        const metadataMap = await metadataService.getBatchMetadata(this.testSymbols)\r\n        const duration = Date.now() - startTime\r\n\r\n        // è½‰æ›ç‚ºçµæœæ•¸çµ„\r\n        const results = []\r\n        for (const [symbol, metadata] of metadataMap) {\r\n          results.push({\r\n            ...metadata,\r\n            duration: duration / metadataMap.size, // å¹³å‡æ™‚é–“\r\n            timestamp: new Date().toISOString()\r\n          })\r\n        }\r\n\r\n        this.testResults = results\r\n        this.successMessage = `æˆåŠŸæ‰¹é‡ç²å– ${results.length} å€‹è‚¡ç¥¨çš„å…ƒæ•¸æ“š (${duration}ms)`\r\n        setTimeout(() => { this.successMessage = null }, 3000)\r\n\r\n        await this.updateCacheStats()\r\n      } catch (error) {\r\n        this.error = `æ‰¹é‡ç²å–å¤±æ•—: ${error.message}`\r\n        setTimeout(() => { this.error = null }, 5000)\r\n      } finally {\r\n        this.loading = false\r\n        this.loadingMessage = ''\r\n      }\r\n    },\r\n\r\n    async clearCache() {\r\n      this.loading = true\r\n      this.loadingMessage = 'æ­£åœ¨æ¸…é™¤ç·©å­˜...'\r\n\r\n      try {\r\n        metadataService.clearCache()\r\n        await this.updateCacheStats()\r\n        this.successMessage = 'ç·©å­˜å·²æ¸…é™¤'\r\n        setTimeout(() => { this.successMessage = null }, 3000)\r\n      } catch (error) {\r\n        this.error = `æ¸…é™¤ç·©å­˜å¤±æ•—: ${error.message}`\r\n        setTimeout(() => { this.error = null }, 5000)\r\n      } finally {\r\n        this.loading = false\r\n        this.loadingMessage = ''\r\n      }\r\n    },\r\n\r\n    async warmupCache() {\r\n      this.loading = true\r\n      this.loadingMessage = 'æ­£åœ¨é ç†±ç·©å­˜...'\r\n\r\n      try {\r\n        const result = await metadataService.warmupCache(this.testSymbols)\r\n        await this.updateCacheStats()\r\n        \r\n        this.successMessage = `ç·©å­˜é ç†±å®Œæˆ: ${result.symbolsProcessed} å€‹è‚¡ç¥¨, ${result.duration}ms`\r\n        setTimeout(() => { this.successMessage = null }, 3000)\r\n      } catch (error) {\r\n        this.error = `é ç†±ç·©å­˜å¤±æ•—: ${error.message}`\r\n        setTimeout(() => { this.error = null }, 5000)\r\n      } finally {\r\n        this.loading = false\r\n        this.loadingMessage = ''\r\n      }\r\n    },\r\n\r\n    async updateCacheStats() {\r\n      try {\r\n        this.cacheStats = metadataService.getCacheStats()\r\n      } catch (error) {\r\n        console.warn('Failed to get cache stats:', error)\r\n      }\r\n    },\r\n\r\n    getResultCardClass(result) {\r\n      if (result.confidence >= 0.9) return 'high-confidence'\r\n      if (result.confidence >= 0.7) return 'medium-confidence'\r\n      if (result.confidence >= 0.5) return 'low-confidence'\r\n      return 'no-confidence'\r\n    },\r\n\r\n    getConfidenceBadgeClass(confidence) {\r\n      if (confidence >= 0.9) return 'high'\r\n      if (confidence >= 0.7) return 'medium'\r\n      if (confidence >= 0.5) return 'low'\r\n      return 'none'\r\n    },\r\n\r\n    formatTimestamp(timestamp) {\r\n      if (!timestamp) return 'N/A'\r\n      return new Date(timestamp).toLocaleString('zh-TW')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.metadata-test-container {\r\n  max-width: 1600px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\r\n}\r\n\r\n.header {\r\n  text-align: center;\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.header h1 {\r\n  color: #2c3e50;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.header p {\r\n  color: #7f8c8d;\r\n  font-size: 16px;\r\n}\r\n\r\n.control-panel {\r\n  background: #f8f9fa;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.mode-selector {\r\n  display: flex;\r\n  gap: 20px;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.mode-selector label {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  cursor: pointer;\r\n  font-weight: 500;\r\n}\r\n\r\n.test-controls {\r\n  display: flex;\r\n  gap: 10px;\r\n  margin-bottom: 15px;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.test-controls button {\r\n  padding: 8px 16px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  background: #3498db;\r\n  color: white;\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n  transition: background-color 0.2s;\r\n}\r\n\r\n.test-controls button:hover:not(:disabled) {\r\n  background: #2980b9;\r\n}\r\n\r\n.test-controls button:disabled {\r\n  background: #bdc3c7;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.symbol-input input {\r\n  padding: 8px 12px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 14px;\r\n  width: 200px;\r\n}\r\n\r\n.status-panel {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.loading {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  color: #3498db;\r\n  font-weight: 500;\r\n}\r\n\r\n.spinner {\r\n  width: 16px;\r\n  height: 16px;\r\n  border: 2px solid #e3f2fd;\r\n  border-top: 2px solid #3498db;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n.error {\r\n  color: #e74c3c;\r\n  font-weight: 500;\r\n}\r\n\r\n.success {\r\n  color: #27ae60;\r\n  font-weight: 500;\r\n}\r\n\r\n.cache-stats {\r\n  background: #f8f9fa;\r\n  padding: 15px;\r\n  border-radius: 8px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.cache-stats h3 {\r\n  margin: 0 0 10px 0;\r\n  color: #2c3e50;\r\n}\r\n\r\n.stats-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\r\n  gap: 10px;\r\n}\r\n\r\n.stat-item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n\r\n.stat-item label {\r\n  font-weight: 500;\r\n  color: #7f8c8d;\r\n}\r\n\r\n.results-section {\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.results-section h3 {\r\n  color: #2c3e50;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.results-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\r\n  gap: 15px;\r\n}\r\n\r\n.result-card {\r\n  border: 1px solid #e1e8ed;\r\n  border-radius: 8px;\r\n  padding: 15px;\r\n  background: white;\r\n}\r\n\r\n.result-card.high-confidence {\r\n  border-left: 4px solid #27ae60;\r\n}\r\n\r\n.result-card.medium-confidence {\r\n  border-left: 4px solid #f39c12;\r\n}\r\n\r\n.result-card.low-confidence {\r\n  border-left: 4px solid #e67e22;\r\n}\r\n\r\n.result-card.no-confidence {\r\n  border-left: 4px solid #e74c3c;\r\n}\r\n\r\n.result-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.result-header h4 {\r\n  margin: 0;\r\n  color: #2c3e50;\r\n}\r\n\r\n.confidence-badge {\r\n  padding: 2px 8px;\r\n  border-radius: 12px;\r\n  font-size: 12px;\r\n  font-weight: bold;\r\n}\r\n\r\n.confidence-badge.high {\r\n  background: #d5f4e6;\r\n  color: #27ae60;\r\n}\r\n\r\n.confidence-badge.medium {\r\n  background: #fef9e7;\r\n  color: #f39c12;\r\n}\r\n\r\n.confidence-badge.low {\r\n  background: #fdf2e9;\r\n  color: #e67e22;\r\n}\r\n\r\n.confidence-badge.none {\r\n  background: #fdedec;\r\n  color: #e74c3c;\r\n}\r\n\r\n.result-content {\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.metadata-row {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-bottom: 5px;\r\n}\r\n\r\n.metadata-row label {\r\n  font-weight: 500;\r\n  color: #7f8c8d;\r\n}\r\n\r\n.result-footer {\r\n  border-top: 1px solid #ecf0f1;\r\n  padding-top: 8px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n\r\n.result-footer small {\r\n  color: #95a5a6;\r\n  font-size: 11px;\r\n}\r\n\r\n.comparison-section {\r\n  margin-top: 30px;\r\n}\r\n\r\n.comparison-section h3 {\r\n  color: #2c3e50;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.comparison-table {\r\n  overflow-x: auto;\r\n}\r\n\r\n.comparison-table table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  background: white;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\r\n}\r\n\r\n.comparison-table th,\r\n.comparison-table td {\r\n  padding: 12px;\r\n  text-align: left;\r\n  border-bottom: 1px solid #ecf0f1;\r\n}\r\n\r\n.comparison-table th {\r\n  background: #f8f9fa;\r\n  font-weight: 600;\r\n  color: #2c3e50;\r\n}\r\n\r\n.match-indicator {\r\n  padding: 2px 8px;\r\n  border-radius: 12px;\r\n  font-size: 12px;\r\n  font-weight: bold;\r\n}\r\n\r\n.match-indicator.high {\r\n  background: #d5f4e6;\r\n  color: #27ae60;\r\n}\r\n\r\n.match-indicator.medium {\r\n  background: #fef9e7;\r\n  color: #f39c12;\r\n}\r\n\r\n.match-indicator.low {\r\n  background: #fdedec;\r\n  color: #e74c3c;\r\n}\r\n</style>","<template>\r\n  <div class=\"proxy-diagnostic\">\r\n    <div class=\"test-header\">\r\n      <h2>ğŸ” Yahoo Finance API Proxy è¨ºæ–·å·¥å…·</h2>\r\n      <p>æ¸¬è©¦å„å€‹ CORS ä»£ç†æœå‹™çš„å¯ç”¨æ€§å’Œ Yahoo Finance API çš„ç‹€æ…‹</p>\r\n    </div>\r\n\r\n    <div class=\"test-controls\">\r\n      <div class=\"symbol-input\">\r\n        <label>æ¸¬è©¦è‚¡ç¥¨:</label>\r\n        <input v-model=\"testSymbol\" placeholder=\"AAPL\" />\r\n        <button @click=\"runFullDiagnostic\" :disabled=\"testing\">\r\n          {{ testing ? 'æ¸¬è©¦ä¸­...' : 'é–‹å§‹å®Œæ•´è¨ºæ–·' }}\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-if=\"testing\" class=\"loading\">\r\n      <div class=\"spinner\"></div>\r\n      <p>æ­£åœ¨æ¸¬è©¦ {{ currentTest }}...</p>\r\n    </div>\r\n\r\n    <!-- Proxy æœå‹™æ¸¬è©¦çµæœ -->\r\n    <div class=\"proxy-results\">\r\n      <h3>ğŸ“¡ CORS Proxy æœå‹™ç‹€æ…‹</h3>\r\n      <div class=\"proxy-grid\">\r\n        <div \r\n          v-for=\"(result, index) in proxyResults\" \r\n          :key=\"index\"\r\n          class=\"proxy-card\"\r\n          :class=\"getStatusClass(result.status)\"\r\n        >\r\n          <div class=\"proxy-header\">\r\n            <h4>Proxy {{ index + 1 }}: {{ result.name }}</h4>\r\n            <span class=\"status-badge\" :class=\"getStatusClass(result.status)\">\r\n              {{ result.status }}\r\n            </span>\r\n          </div>\r\n          \r\n          <div class=\"proxy-details\">\r\n            <p><strong>URL:</strong> {{ result.url }}</p>\r\n            <p><strong>éŸ¿æ‡‰æ™‚é–“:</strong> {{ result.responseTime }}ms</p>\r\n            <p><strong>HTTP ç‹€æ…‹:</strong> {{ result.httpStatus }}</p>\r\n            \r\n            <div v-if=\"result.error\" class=\"error-details\">\r\n              <p><strong>éŒ¯èª¤é¡å‹:</strong> {{ result.errorType }}</p>\r\n              <p><strong>éŒ¯èª¤è¨Šæ¯:</strong> {{ result.error }}</p>\r\n            </div>\r\n            \r\n            <div v-if=\"result.data\" class=\"success-details\">\r\n              <p><strong>æ•¸æ“šé»:</strong> {{ result.dataPoints }}</p>\r\n              <p><strong>åƒ¹æ ¼ç¯„åœ:</strong> ${{ result.priceRange?.min }} - ${{ result.priceRange?.max }}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Yahoo Finance API ç›´æ¥æ¸¬è©¦ -->\r\n    <div class=\"direct-api-test\">\r\n      <h3>ğŸ¯ Yahoo Finance API ç›´æ¥æ¸¬è©¦</h3>\r\n      <div class=\"api-test-grid\">\r\n        <div class=\"api-test-card\">\r\n          <h4>Chart API (æŠ€è¡“æŒ‡æ¨™æ•¸æ“š)</h4>\r\n          <div class=\"test-result\" :class=\"getStatusClass(directApiResults.chart?.status)\">\r\n            <p><strong>ç‹€æ…‹:</strong> {{ directApiResults.chart?.status || 'æœªæ¸¬è©¦' }}</p>\r\n            <p v-if=\"directApiResults.chart?.error\"><strong>éŒ¯èª¤:</strong> {{ directApiResults.chart.error }}</p>\r\n            <p v-if=\"directApiResults.chart?.dataPoints\"><strong>æ•¸æ“šé»:</strong> {{ directApiResults.chart.dataPoints }}</p>\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"api-test-card\">\r\n          <h4>Quote Summary API (è‚¡ç¥¨è³‡è¨Š)</h4>\r\n          <div class=\"test-result\" :class=\"getStatusClass(directApiResults.quoteSummary?.status)\">\r\n            <p><strong>ç‹€æ…‹:</strong> {{ directApiResults.quoteSummary?.status || 'æœªæ¸¬è©¦' }}</p>\r\n            <p v-if=\"directApiResults.quoteSummary?.error\"><strong>éŒ¯èª¤:</strong> {{ directApiResults.quoteSummary.error }}</p>\r\n            <p v-if=\"directApiResults.quoteSummary?.sector\"><strong>Sector:</strong> {{ directApiResults.quoteSummary.sector }}</p>\r\n            <p v-if=\"directApiResults.quoteSummary?.industry\"><strong>Industry:</strong> {{ directApiResults.quoteSummary.industry }}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- ç¶²è·¯ç’°å¢ƒæª¢æ¸¬ -->\r\n    <div class=\"network-info\">\r\n      <h3>ğŸŒ ç¶²è·¯ç’°å¢ƒè³‡è¨Š</h3>\r\n      <div class=\"network-details\">\r\n        <p><strong>ç”¨æˆ¶ä»£ç†:</strong> {{ networkInfo.userAgent }}</p>\r\n        <p><strong>èªè¨€:</strong> {{ networkInfo.language }}</p>\r\n        <p><strong>æ™‚å€:</strong> {{ networkInfo.timezone }}</p>\r\n        <p><strong>é€£ç·šé¡å‹:</strong> {{ networkInfo.connection }}</p>\r\n        <p><strong>æ˜¯å¦åœ¨ç·š:</strong> {{ networkInfo.online ? 'æ˜¯' : 'å¦' }}</p>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- å»ºè­°å’Œè§£æ±ºæ–¹æ¡ˆ -->\r\n    <div v-if=\"diagnosticComplete\" class=\"recommendations\">\r\n      <h3>ğŸ’¡ è¨ºæ–·çµæœå’Œå»ºè­°</h3>\r\n      <div class=\"recommendation-content\">\r\n        <div v-if=\"workingProxies.length > 0\" class=\"success-recommendation\">\r\n          <h4>âœ… å¯ç”¨çš„ä»£ç†æœå‹™ ({{ workingProxies.length }}/{{ proxyResults.length }})</h4>\r\n          <ul>\r\n            <li v-for=\"proxy in workingProxies\" :key=\"proxy.index\">\r\n              {{ proxy.name }} - éŸ¿æ‡‰æ™‚é–“: {{ proxy.responseTime }}ms\r\n            </li>\r\n          </ul>\r\n        </div>\r\n        \r\n        <div v-if=\"failedProxies.length > 0\" class=\"warning-recommendation\">\r\n          <h4>âŒ å¤±æ•—çš„ä»£ç†æœå‹™ ({{ failedProxies.length }}/{{ proxyResults.length }})</h4>\r\n          <ul>\r\n            <li v-for=\"proxy in failedProxies\" :key=\"proxy.index\">\r\n              {{ proxy.name }} - {{ proxy.errorType }}: {{ proxy.error }}\r\n            </li>\r\n          </ul>\r\n        </div>\r\n\r\n        <div class=\"solution-suggestions\">\r\n          <h4>ğŸ”§ å»ºè­°è§£æ±ºæ–¹æ¡ˆ</h4>\r\n          <div v-if=\"workingProxies.length === 0\" class=\"critical-suggestions\">\r\n            <p><strong>æ‰€æœ‰ä»£ç†éƒ½å¤±æ•—äº†ï¼Œå¯èƒ½çš„åŸå› å’Œè§£æ±ºæ–¹æ¡ˆ:</strong></p>\r\n            <ul>\r\n              <li><strong>CORS æ”¿ç­–:</strong> ç€è¦½å™¨é˜»æ­¢è·¨åŸŸè«‹æ±‚ï¼Œè€ƒæ…®ä½¿ç”¨æœå‹™ç«¯ä»£ç†</li>\r\n              <li><strong>ä»£ç†æœå‹™é™åˆ¶:</strong> å…è²»ä»£ç†æœå‹™å¯èƒ½æœ‰ä½¿ç”¨é™åˆ¶æˆ–éœ€è¦èªè­‰</li>\r\n              <li><strong>Yahoo Finance API è®Šæ›´:</strong> API ç«¯é»æˆ–æ ¼å¼å¯èƒ½å·²è®Šæ›´</li>\r\n              <li><strong>ç¶²è·¯é˜²ç«ç‰†:</strong> å…¬å¸æˆ–å­¸æ ¡ç¶²è·¯å¯èƒ½é˜»æ­¢æŸäº›è«‹æ±‚</li>\r\n            </ul>\r\n          </div>\r\n          \r\n          <div v-else class=\"optimization-suggestions\">\r\n            <p><strong>å„ªåŒ–å»ºè­°:</strong></p>\r\n            <ul>\r\n              <li>å„ªå…ˆä½¿ç”¨éŸ¿æ‡‰æ™‚é–“æœ€å¿«çš„ä»£ç†: {{ fastestProxy?.name }}</li>\r\n              <li>å¯¦æ–½ä»£ç†è¼ªæ›æ©Ÿåˆ¶ä»¥åˆ†æ•£è² è¼‰</li>\r\n              <li>å¢åŠ éŒ¯èª¤é‡è©¦é‚è¼¯</li>\r\n              <li>è€ƒæ…®ç·©å­˜æ©Ÿåˆ¶æ¸›å°‘ API èª¿ç”¨</li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'ProxyDiagnosticTest',\r\n  data() {\r\n    return {\r\n      testSymbol: 'AAPL',\r\n      testing: false,\r\n      currentTest: '',\r\n      diagnosticComplete: false,\r\n      \r\n      // Proxy æ¸¬è©¦çµæœ\r\n      proxyResults: [],\r\n      \r\n      // ç›´æ¥ API æ¸¬è©¦çµæœ\r\n      directApiResults: {\r\n        chart: null,\r\n        quoteSummary: null\r\n      },\r\n      \r\n      // ç¶²è·¯ç’°å¢ƒè³‡è¨Š\r\n      networkInfo: {\r\n        userAgent: navigator.userAgent,\r\n        language: navigator.language,\r\n        timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\r\n        connection: navigator.connection?.effectiveType || 'unknown',\r\n        online: navigator.onLine\r\n      },\r\n      \r\n      // CORS ä»£ç†åˆ—è¡¨ - 2024å¹´12æœˆæ›´æ–°\r\n      corsProxies: [\r\n        {\r\n          name: 'CORS.SH',\r\n          url: 'https://cors.sh/',\r\n          description: 'å°ˆæ¥­çš„ CORS ä»£ç†æœå‹™ï¼Œç›¸å°ç©©å®š',\r\n          type: 'direct'\r\n        },\r\n        {\r\n          name: 'Proxy CORS (isomorphic-git)',\r\n          url: 'https://proxy-cors.isomorphic-git.org/',\r\n          description: 'ç”± isomorphic-git åœ˜éšŠç¶­è­·',\r\n          type: 'direct'\r\n        },\r\n        {\r\n          name: 'ThingProxy',\r\n          url: 'https://thingproxy.freeboard.io/fetch/',\r\n          description: 'ç”± Freeboard.io æä¾›çš„ä»£ç†æœå‹™',\r\n          type: 'direct'\r\n        },\r\n        {\r\n          name: 'CORS Proxy (HTMLDriven)',\r\n          url: 'https://cors-proxy.htmldriven.com/?url=',\r\n          description: 'ç°¡å–®æ˜“ç”¨çš„ä»£ç†æœå‹™',\r\n          type: 'query'\r\n        },\r\n        {\r\n          name: 'AllOrigins',\r\n          url: 'https://api.allorigins.win/raw?url=',\r\n          description: 'å…è²» CORS ä»£ç†æœå‹™ (å¯èƒ½æœ‰ CORS é™åˆ¶)',\r\n          type: 'query'\r\n        },\r\n        {\r\n          name: 'CorsProxy.io',\r\n          url: 'https://corsproxy.io/?',\r\n          description: 'é–‹æº CORS ä»£ç† (å¯èƒ½éœ€è¦èªè­‰)',\r\n          type: 'query'\r\n        },\r\n        {\r\n          name: 'CORS Anywhere',\r\n          url: 'https://cors-anywhere.herokuapp.com/',\r\n          description: 'Heroku è¨—ç®¡çš„ CORS ä»£ç† (å·²é™åˆ¶è¨ªå•)',\r\n          type: 'direct'\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  \r\n  computed: {\r\n    workingProxies() {\r\n      return this.proxyResults.filter(p => p.status === 'SUCCESS')\r\n    },\r\n    \r\n    failedProxies() {\r\n      return this.proxyResults.filter(p => p.status === 'FAILED')\r\n    },\r\n    \r\n    fastestProxy() {\r\n      const working = this.workingProxies\r\n      if (working.length === 0) return null\r\n      return working.reduce((fastest, current) => \r\n        current.responseTime < fastest.responseTime ? current : fastest\r\n      )\r\n    }\r\n  },\r\n  \r\n  methods: {\r\n    async runFullDiagnostic() {\r\n      this.testing = true\r\n      this.diagnosticComplete = false\r\n      this.proxyResults = []\r\n      this.directApiResults = { chart: null, quoteSummary: null }\r\n      \r\n      try {\r\n        // æ¸¬è©¦æ‰€æœ‰ CORS ä»£ç†\r\n        await this.testAllProxies()\r\n        \r\n        // æ¸¬è©¦ç›´æ¥ API è¨ªå•\r\n        await this.testDirectAPI()\r\n        \r\n        this.diagnosticComplete = true\r\n      } catch (error) {\r\n        console.error('è¨ºæ–·éç¨‹å‡ºéŒ¯:', error)\r\n      } finally {\r\n        this.testing = false\r\n        this.currentTest = ''\r\n      }\r\n    },\r\n    \r\n    async testAllProxies() {\r\n      for (let i = 0; i < this.corsProxies.length; i++) {\r\n        const proxy = this.corsProxies[i]\r\n        this.currentTest = `${proxy.name} ä»£ç†æœå‹™`\r\n        \r\n        const result = await this.testSingleProxy(proxy, i)\r\n        this.proxyResults.push(result)\r\n        \r\n        // æ·»åŠ å»¶é²é¿å…éæ–¼é »ç¹çš„è«‹æ±‚\r\n        if (i < this.corsProxies.length - 1) {\r\n          await this.delay(1000)\r\n        }\r\n      }\r\n    },\r\n    \r\n    async testSingleProxy(proxy, index) {\r\n      const startTime = Date.now()\r\n      const result = {\r\n        index,\r\n        name: proxy.name,\r\n        url: proxy.url,\r\n        type: proxy.type,\r\n        status: 'TESTING',\r\n        responseTime: 0,\r\n        httpStatus: null,\r\n        error: null,\r\n        errorType: null,\r\n        data: null,\r\n        dataPoints: 0,\r\n        priceRange: null\r\n      }\r\n      \r\n      try {\r\n        // æ§‹å»ºæ¸¬è©¦ URL - æ ¹æ“šä»£ç†é¡å‹\r\n        const targetUrl = `https://query1.finance.yahoo.com/v8/finance/chart/${this.testSymbol}?interval=1d&range=1mo`\r\n        let testUrl\r\n        \r\n        if (proxy.type === 'query') {\r\n          // æŸ¥è©¢åƒæ•¸é¡å‹: ?url=\r\n          testUrl = `${proxy.url}${encodeURIComponent(targetUrl)}`\r\n        } else {\r\n          // ç›´æ¥æ‹¼æ¥é¡å‹\r\n          testUrl = `${proxy.url}${targetUrl}`\r\n        }\r\n        \r\n        console.log(`Testing ${proxy.name}:`, testUrl.substring(0, 120) + '...')\r\n        \r\n        const response = await fetch(testUrl, {\r\n          method: 'GET',\r\n          headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json',\r\n            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'\r\n          }\r\n        })\r\n        \r\n        result.responseTime = Date.now() - startTime\r\n        result.httpStatus = response.status\r\n        \r\n        if (!response.ok) {\r\n          throw new Error(`HTTP ${response.status}: ${response.statusText}`)\r\n        }\r\n        \r\n        const data = await response.json()\r\n        \r\n        // é©—è­‰æ•¸æ“šçµæ§‹\r\n        if (!data.chart || !data.chart.result || data.chart.result.length === 0) {\r\n          throw new Error('Invalid data structure - no chart results')\r\n        }\r\n        \r\n        const chartResult = data.chart.result[0]\r\n        const quotes = chartResult.indicators?.quote?.[0]\r\n        \r\n        if (!quotes || !quotes.close) {\r\n          throw new Error('Invalid data structure - no price data')\r\n        }\r\n        \r\n        const closes = quotes.close.filter(price => price !== null)\r\n        \r\n        result.status = 'SUCCESS'\r\n        result.data = data\r\n        result.dataPoints = closes.length\r\n        result.priceRange = {\r\n          min: Math.min(...closes).toFixed(2),\r\n          max: Math.max(...closes).toFixed(2)\r\n        }\r\n        \r\n        console.log(`âœ… ${proxy.name} æˆåŠŸ:`, {\r\n          responseTime: result.responseTime,\r\n          dataPoints: result.dataPoints,\r\n          priceRange: result.priceRange\r\n        })\r\n        \r\n      } catch (error) {\r\n        result.status = 'FAILED'\r\n        result.responseTime = Date.now() - startTime\r\n        result.error = error.message\r\n        \r\n        // åˆ†é¡éŒ¯èª¤é¡å‹\r\n        if (error.message.includes('CORS') || error.message.includes('cors')) {\r\n          result.errorType = 'CORS_ERROR'\r\n        } else if (error.message.includes('401')) {\r\n          result.errorType = 'UNAUTHORIZED'\r\n        } else if (error.message.includes('403')) {\r\n          result.errorType = 'FORBIDDEN'\r\n        } else if (error.message.includes('404')) {\r\n          result.errorType = 'NOT_FOUND'\r\n        } else if (error.message.includes('429')) {\r\n          result.errorType = 'RATE_LIMITED'\r\n        } else if (error.message.includes('Failed to fetch') || error.message.includes('fetch')) {\r\n          result.errorType = 'NETWORK_ERROR'\r\n        } else if (error.message.includes('Invalid data structure')) {\r\n          result.errorType = 'DATA_FORMAT_ERROR'\r\n        } else if (error.message.includes('timeout')) {\r\n          result.errorType = 'TIMEOUT_ERROR'\r\n        } else {\r\n          result.errorType = 'UNKNOWN_ERROR'\r\n        }\r\n        \r\n        console.log(`âŒ ${proxy.name} å¤±æ•—:`, {\r\n          errorType: result.errorType,\r\n          error: result.error,\r\n          responseTime: result.responseTime\r\n        })\r\n      }\r\n      \r\n      return result\r\n    },\r\n    \r\n    async testDirectAPI() {\r\n      this.currentTest = 'Yahoo Finance API ç›´æ¥è¨ªå•'\r\n      \r\n      // æ¸¬è©¦ Chart API\r\n      try {\r\n        const chartUrl = `https://query1.finance.yahoo.com/v8/finance/chart/${this.testSymbol}?interval=1d&range=1mo`\r\n        const chartResponse = await fetch(chartUrl)\r\n        \r\n        if (chartResponse.ok) {\r\n          const chartData = await chartResponse.json()\r\n          const dataPoints = chartData.chart?.result?.[0]?.indicators?.quote?.[0]?.close?.filter(p => p !== null)?.length || 0\r\n          \r\n          this.directApiResults.chart = {\r\n            status: 'SUCCESS',\r\n            dataPoints\r\n          }\r\n        } else {\r\n          throw new Error(`HTTP ${chartResponse.status}`)\r\n        }\r\n      } catch (error) {\r\n        this.directApiResults.chart = {\r\n          status: 'FAILED',\r\n          error: error.message\r\n        }\r\n      }\r\n      \r\n      // æ¸¬è©¦ Quote Summary API\r\n      try {\r\n        const quoteUrl = `https://query1.finance.yahoo.com/v10/finance/quoteSummary/${this.testSymbol}?modules=summaryProfile`\r\n        const quoteResponse = await fetch(quoteUrl)\r\n        \r\n        if (quoteResponse.ok) {\r\n          const quoteData = await quoteResponse.json()\r\n          const profile = quoteData.quoteSummary?.result?.[0]?.summaryProfile\r\n          \r\n          this.directApiResults.quoteSummary = {\r\n            status: 'SUCCESS',\r\n            sector: profile?.sector,\r\n            industry: profile?.industry\r\n          }\r\n        } else {\r\n          throw new Error(`HTTP ${quoteResponse.status}`)\r\n        }\r\n      } catch (error) {\r\n        this.directApiResults.quoteSummary = {\r\n          status: 'FAILED',\r\n          error: error.message\r\n        }\r\n      }\r\n    },\r\n    \r\n    getStatusClass(status) {\r\n      switch (status) {\r\n        case 'SUCCESS': return 'success'\r\n        case 'FAILED': return 'failed'\r\n        case 'TESTING': return 'testing'\r\n        default: return 'unknown'\r\n      }\r\n    },\r\n    \r\n    delay(ms) {\r\n      return new Promise(resolve => setTimeout(resolve, ms))\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.proxy-diagnostic {\r\n  max-width: 1600px;\r\n  margin: 0 auto;\r\n  padding: 2rem;\r\n}\r\n\r\n.test-header {\r\n  text-align: center;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.test-header h2 {\r\n  color: #2c3e50;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.test-controls {\r\n  background: #f8f9fa;\r\n  padding: 1.5rem;\r\n  border-radius: 8px;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.symbol-input {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 1rem;\r\n}\r\n\r\n.symbol-input input {\r\n  padding: 0.5rem;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  width: 100px;\r\n}\r\n\r\n.symbol-input button {\r\n  padding: 0.5rem 1rem;\r\n  background: #007bff;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n\r\n.symbol-input button:disabled {\r\n  background: #6c757d;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.loading {\r\n  text-align: center;\r\n  padding: 2rem;\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.spinner {\r\n  width: 40px;\r\n  height: 40px;\r\n  border: 4px solid #e9ecef;\r\n  border-top: 4px solid #007bff;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n  margin: 0 auto 1rem;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n.proxy-results, .direct-api-test, .network-info, .recommendations {\r\n  background: white;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  padding: 2rem;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.proxy-results h3, .direct-api-test h3, .network-info h3, .recommendations h3 {\r\n  margin: 0 0 1.5rem 0;\r\n  color: #495057;\r\n  border-bottom: 2px solid #dee2e6;\r\n  padding-bottom: 0.5rem;\r\n}\r\n\r\n.proxy-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));\r\n  gap: 1.5rem;\r\n}\r\n\r\n.proxy-card {\r\n  border: 2px solid #e9ecef;\r\n  border-radius: 8px;\r\n  padding: 1.5rem;\r\n  transition: all 0.3s;\r\n}\r\n\r\n.proxy-card.success {\r\n  border-color: #28a745;\r\n  background: #f8fff9;\r\n}\r\n\r\n.proxy-card.failed {\r\n  border-color: #dc3545;\r\n  background: #fff8f8;\r\n}\r\n\r\n.proxy-card.testing {\r\n  border-color: #ffc107;\r\n  background: #fffdf5;\r\n}\r\n\r\n.proxy-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.proxy-header h4 {\r\n  margin: 0;\r\n  color: #495057;\r\n}\r\n\r\n.status-badge {\r\n  padding: 0.25rem 0.75rem;\r\n  border-radius: 20px;\r\n  font-size: 0.75rem;\r\n  font-weight: 600;\r\n  text-transform: uppercase;\r\n}\r\n\r\n.status-badge.success {\r\n  background: #d4edda;\r\n  color: #155724;\r\n}\r\n\r\n.status-badge.failed {\r\n  background: #f8d7da;\r\n  color: #721c24;\r\n}\r\n\r\n.status-badge.testing {\r\n  background: #fff3cd;\r\n  color: #856404;\r\n}\r\n\r\n.proxy-details p {\r\n  margin: 0.5rem 0;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.error-details {\r\n  background: #f8d7da;\r\n  padding: 1rem;\r\n  border-radius: 4px;\r\n  margin-top: 1rem;\r\n}\r\n\r\n.success-details {\r\n  background: #d4edda;\r\n  padding: 1rem;\r\n  border-radius: 4px;\r\n  margin-top: 1rem;\r\n}\r\n\r\n.api-test-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\r\n  gap: 1.5rem;\r\n}\r\n\r\n.api-test-card {\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  padding: 1.5rem;\r\n}\r\n\r\n.api-test-card h4 {\r\n  margin: 0 0 1rem 0;\r\n  color: #495057;\r\n}\r\n\r\n.test-result {\r\n  padding: 1rem;\r\n  border-radius: 4px;\r\n}\r\n\r\n.test-result.success {\r\n  background: #d4edda;\r\n  color: #155724;\r\n}\r\n\r\n.test-result.failed {\r\n  background: #f8d7da;\r\n  color: #721c24;\r\n}\r\n\r\n.network-details p {\r\n  margin: 0.5rem 0;\r\n  font-size: 0.9rem;\r\n  color: #6c757d;\r\n}\r\n\r\n.recommendation-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1.5rem;\r\n}\r\n\r\n.success-recommendation {\r\n  background: #d4edda;\r\n  padding: 1.5rem;\r\n  border-radius: 8px;\r\n  color: #155724;\r\n}\r\n\r\n.warning-recommendation {\r\n  background: #f8d7da;\r\n  padding: 1.5rem;\r\n  border-radius: 8px;\r\n  color: #721c24;\r\n}\r\n\r\n.solution-suggestions {\r\n  background: #e2f3ff;\r\n  padding: 1.5rem;\r\n  border-radius: 8px;\r\n  color: #004085;\r\n}\r\n\r\n.critical-suggestions {\r\n  background: #fff3cd;\r\n  padding: 1rem;\r\n  border-radius: 4px;\r\n  margin-top: 1rem;\r\n  color: #856404;\r\n}\r\n\r\n.optimization-suggestions {\r\n  background: #d1ecf1;\r\n  padding: 1rem;\r\n  border-radius: 4px;\r\n  margin-top: 1rem;\r\n  color: #0c5460;\r\n}\r\n\r\nul {\r\n  margin: 0.5rem 0;\r\n  padding-left: 1.5rem;\r\n}\r\n\r\nli {\r\n  margin: 0.25rem 0;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .proxy-diagnostic {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .proxy-grid, .api-test-grid {\r\n    grid-template-columns: 1fr;\r\n  }\r\n  \r\n  .symbol-input {\r\n    flex-direction: column;\r\n    align-items: stretch;\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"indicators-manager\">\r\n    <div class=\"manager-header\">\r\n      <h2>æŠ€è¡“æŒ‡æ¨™ç®¡ç†ä¸­å¿ƒ</h2>\r\n      <p>ç›£æ§å’Œç®¡ç†é è¨ˆç®—æŠ€è¡“æŒ‡æ¨™ç³»çµ±</p>\r\n    </div>\r\n\r\n    <!-- æ•¸æ“šæºç‹€æ…‹ -->\r\n    <div class=\"status-section\">\r\n      <h3>æ•¸æ“šæºç‹€æ…‹</h3>\r\n      \r\n      <div class=\"status-grid\">\r\n        <!-- é è¨ˆç®—æ•¸æ“šç‹€æ…‹ -->\r\n        <div class=\"status-card\" :class=\"{ 'available': dataSourceStatus?.precomputed?.available }\">\r\n          <div class=\"status-header\">\r\n            <h4>é è¨ˆç®—æ•¸æ“š</h4>\r\n            <span class=\"status-badge\" :class=\"dataSourceStatus?.precomputed?.available ? 'success' : 'error'\">\r\n              {{ dataSourceStatus?.precomputed?.available ? 'å¯ç”¨' : 'ä¸å¯ç”¨' }}\r\n            </span>\r\n          </div>\r\n          \r\n          <div v-if=\"dataSourceStatus?.precomputed?.available\" class=\"status-details\">\r\n            <p><strong>è‚¡ç¥¨æ•¸é‡:</strong> {{ dataSourceStatus.precomputed.symbols.length }}</p>\r\n            <p><strong>æˆåŠŸ:</strong> {{ dataSourceStatus.precomputed.successful }}</p>\r\n            <p><strong>å¤±æ•—:</strong> {{ dataSourceStatus.precomputed.failed }}</p>\r\n            <p><strong>æœ€å¾Œæ›´æ–°:</strong> {{ formatDate(dataSourceStatus.precomputed.lastUpdate) }}</p>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- ç·©å­˜ç‹€æ…‹ -->\r\n        <div class=\"status-card available\">\r\n          <div class=\"status-header\">\r\n            <h4>æ¯æ—¥ç·©å­˜</h4>\r\n            <span class=\"status-badge success\">å¯ç”¨</span>\r\n          </div>\r\n          \r\n          <div class=\"status-details\">\r\n            <p><strong>å…§å­˜ç·©å­˜:</strong> {{ dataSourceStatus?.cache?.memoryCache || 0 }} é …ç›®</p>\r\n            <p><strong>æœ¬åœ°å­˜å„²:</strong> {{ dataSourceStatus?.cache?.localStorageCache || 0 }} é …ç›®</p>\r\n            <p><strong>ç¸½å¤§å°:</strong> {{ formatBytes(dataSourceStatus?.cache?.totalSize || 0) }}</p>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- å¯¦æ™‚è¨ˆç®—ç‹€æ…‹ -->\r\n        <div class=\"status-card available\">\r\n          <div class=\"status-header\">\r\n            <h4>å¯¦æ™‚è¨ˆç®—</h4>\r\n            <span class=\"status-badge success\">å¯ç”¨</span>\r\n          </div>\r\n          \r\n          <div class=\"status-details\">\r\n            <p><strong>ä»£ç†æœå‹™:</strong> {{ dataSourceStatus?.realtime?.proxies || 0 }} å€‹</p>\r\n            <p><strong>ç‹€æ…‹:</strong> å‚™ç”¨æ–¹æ¡ˆ</p>\r\n            <p><strong>é æœŸå»¶é²:</strong> 2-20ç§’</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- æ§åˆ¶é¢æ¿ -->\r\n    <div class=\"control-section\">\r\n      <h3>æ§åˆ¶é¢æ¿</h3>\r\n      \r\n      <div class=\"control-grid\">\r\n        <button @click=\"refreshStatus()\" class=\"control-btn primary\" :disabled=\"loading\">\r\n          {{ loading ? 'è¼‰å…¥ä¸­...' : 'åˆ·æ–°ç‹€æ…‹' }}\r\n        </button>\r\n        \r\n        <button @click=\"clearAllCaches()\" class=\"control-btn warning\">\r\n          æ¸…é™¤æ‰€æœ‰ç·©å­˜\r\n        </button>\r\n        \r\n        <button @click=\"testPrecomputed()\" class=\"control-btn info\" :disabled=\"testing\">\r\n          {{ testing ? 'æ¸¬è©¦ä¸­...' : 'æ¸¬è©¦é è¨ˆç®—' }}\r\n        </button>\r\n        \r\n        <button @click=\"showPreferences = !showPreferences\" class=\"control-btn secondary\">\r\n          {{ showPreferences ? 'éš±è—è¨­å®š' : 'é¡¯ç¤ºè¨­å®š' }}\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- åå¥½è¨­å®š -->\r\n    <div v-if=\"showPreferences\" class=\"preferences-section\">\r\n      <h3>ç³»çµ±åå¥½è¨­å®š</h3>\r\n      \r\n      <div class=\"preferences-form\">\r\n        <div class=\"form-group\">\r\n          <label>\r\n            <input \r\n              type=\"checkbox\" \r\n              v-model=\"preferences.preferPrecomputed\"\r\n              @change=\"updatePreferences\"\r\n            />\r\n            å„ªå…ˆä½¿ç”¨é è¨ˆç®—æ•¸æ“š\r\n          </label>\r\n        </div>\r\n        \r\n        <div class=\"form-group\">\r\n          <label>\r\n            <input \r\n              type=\"checkbox\" \r\n              v-model=\"preferences.fallbackToRealtime\"\r\n              @change=\"updatePreferences\"\r\n            />\r\n            å…è¨±å›é€€åˆ°å¯¦æ™‚è¨ˆç®—\r\n          </label>\r\n        </div>\r\n        \r\n        <div class=\"form-group\">\r\n          <label>é è¨ˆç®—æ•¸æ“šæœ€å¤§å¹´é½¡ (å°æ™‚):</label>\r\n          <input \r\n            type=\"number\" \r\n            v-model.number=\"preferences.maxAgeHours\"\r\n            @change=\"updatePreferences\"\r\n            min=\"1\" \r\n            max=\"72\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- æ¸¬è©¦çµæœ -->\r\n    <div v-if=\"testResults.length > 0\" class=\"test-results-section\">\r\n      <h3>æ¸¬è©¦çµæœ</h3>\r\n      \r\n      <div class=\"test-results\">\r\n        <div \r\n          v-for=\"(result, index) in testResults\" \r\n          :key=\"index\"\r\n          class=\"test-result-item\"\r\n          :class=\"{ 'success': result.success, 'error': !result.success }\"\r\n        >\r\n          <div class=\"result-header\">\r\n            <span class=\"symbol\">{{ result.symbol }}</span>\r\n            <span class=\"source\">{{ result.source }}</span>\r\n            <span class=\"load-time\">{{ result.loadTime }}</span>\r\n          </div>\r\n          \r\n          <div v-if=\"result.error\" class=\"error-message\">\r\n            {{ result.error }}\r\n          </div>\r\n          \r\n          <div v-else class=\"indicators-preview\">\r\n            <span>MA5: {{ result.data.ma5?.value || 'N/A' }}</span>\r\n            <span>ADX: {{ result.data.adx14?.value || 'N/A' }}</span>\r\n            <span>MACD: {{ result.data.macd?.signal || 'N/A' }}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- é è¨ˆç®—è‚¡ç¥¨åˆ—è¡¨ -->\r\n    <div v-if=\"dataSourceStatus?.precomputed?.available\" class=\"symbols-section\">\r\n      <h3>é è¨ˆç®—è‚¡ç¥¨åˆ—è¡¨</h3>\r\n      \r\n      <div class=\"symbols-grid\">\r\n        <span \r\n          v-for=\"symbol in dataSourceStatus.precomputed.symbols\" \r\n          :key=\"symbol\"\r\n          class=\"symbol-tag\"\r\n        >\r\n          {{ symbol }}\r\n        </span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport hybridTechnicalIndicatorsAPI from '../utils/hybridTechnicalIndicatorsApi.js'\r\n\r\nexport default {\r\n  name: 'TechnicalIndicatorsManager',\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      testing: false,\r\n      showPreferences: false,\r\n      dataSourceStatus: null,\r\n      testResults: [],\r\n      preferences: {\r\n        preferPrecomputed: true,\r\n        fallbackToRealtime: true,\r\n        maxAgeHours: 24\r\n      }\r\n    }\r\n  },\r\n  async mounted() {\r\n    await this.refreshStatus();\r\n  },\r\n  methods: {\r\n    async refreshStatus() {\r\n      this.loading = true;\r\n      try {\r\n        this.dataSourceStatus = await hybridTechnicalIndicatorsAPI.getDataSourceStatus();\r\n      } catch (error) {\r\n        console.error('Failed to refresh status:', error);\r\n        alert('åˆ·æ–°ç‹€æ…‹å¤±æ•—: ' + error.message);\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n    \r\n    async clearAllCaches() {\r\n      if (!confirm('ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰ç·©å­˜å—ï¼Ÿé€™å°‡å°è‡´ä¸‹æ¬¡è¼‰å…¥æ™‚é–“è¼ƒé•·ã€‚')) {\r\n        return;\r\n      }\r\n      \r\n      try {\r\n        // é€™è£¡éœ€è¦èª¿ç”¨å„å€‹ç·©å­˜æ¸…ç†æ–¹æ³•\r\n        // technicalIndicatorsCache.clearAllCache();\r\n        // precomputedIndicatorsAPI.clearCache();\r\n        alert('æ‰€æœ‰ç·©å­˜å·²æ¸…é™¤');\r\n        await this.refreshStatus();\r\n      } catch (error) {\r\n        alert('æ¸…é™¤ç·©å­˜å¤±æ•—: ' + error.message);\r\n      }\r\n    },\r\n    \r\n    async testPrecomputed() {\r\n      this.testing = true;\r\n      this.testResults = [];\r\n      \r\n      const testSymbols = ['AAPL', 'TSLA', 'MSFT'];\r\n      \r\n      try {\r\n        for (const symbol of testSymbols) {\r\n          const startTime = Date.now();\r\n          \r\n          try {\r\n            const data = await hybridTechnicalIndicatorsAPI.getTechnicalIndicators(symbol);\r\n            const loadTime = Date.now() - startTime;\r\n            \r\n            this.testResults.push({\r\n              symbol,\r\n              success: true,\r\n              data,\r\n              source: data.source,\r\n              loadTime: `${loadTime}ms`\r\n            });\r\n          } catch (error) {\r\n            this.testResults.push({\r\n              symbol,\r\n              success: false,\r\n              error: error.message,\r\n              loadTime: `${Date.now() - startTime}ms`\r\n            });\r\n          }\r\n        }\r\n      } finally {\r\n        this.testing = false;\r\n      }\r\n    },\r\n    \r\n    updatePreferences() {\r\n      const maxAge = this.preferences.maxAgeHours * 60 * 60 * 1000;\r\n      \r\n      hybridTechnicalIndicatorsAPI.setPreferences({\r\n        preferPrecomputed: this.preferences.preferPrecomputed,\r\n        fallbackToRealtime: this.preferences.fallbackToRealtime,\r\n        maxPrecomputedAge: maxAge\r\n      });\r\n      \r\n      console.log('Preferences updated:', this.preferences);\r\n    },\r\n    \r\n    formatDate(dateString) {\r\n      if (!dateString) return 'N/A';\r\n      return new Date(dateString).toLocaleString('zh-TW');\r\n    },\r\n    \r\n    formatBytes(bytes) {\r\n      if (bytes === 0) return '0 B';\r\n      const k = 1024;\r\n      const sizes = ['B', 'KB', 'MB'];\r\n      const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.indicators-manager {\r\n  max-width: 1600px;\r\n  margin: 0 auto;\r\n  padding: 2rem;\r\n}\r\n\r\n.manager-header {\r\n  text-align: center;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.manager-header h2 {\r\n  color: #2c3e50;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.status-section, .control-section, .preferences-section, .test-results-section, .symbols-section {\r\n  background: white;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  padding: 1.5rem;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.status-section h3, .control-section h3, .preferences-section h3, .test-results-section h3, .symbols-section h3 {\r\n  margin: 0 0 1rem 0;\r\n  color: #495057;\r\n}\r\n\r\n.status-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\r\n  gap: 1rem;\r\n}\r\n\r\n.status-card {\r\n  background: #f8f9fa;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  border-left: 4px solid #dc3545;\r\n}\r\n\r\n.status-card.available {\r\n  border-left-color: #28a745;\r\n}\r\n\r\n.status-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.status-header h4 {\r\n  margin: 0;\r\n  color: #495057;\r\n}\r\n\r\n.status-badge {\r\n  padding: 0.25rem 0.5rem;\r\n  border-radius: 4px;\r\n  font-size: 0.8rem;\r\n  font-weight: 600;\r\n}\r\n\r\n.status-badge.success {\r\n  background: #d4edda;\r\n  color: #155724;\r\n}\r\n\r\n.status-badge.error {\r\n  background: #f8d7da;\r\n  color: #721c24;\r\n}\r\n\r\n.status-details p {\r\n  margin: 0.25rem 0;\r\n  font-size: 0.9rem;\r\n  color: #6c757d;\r\n}\r\n\r\n.control-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\r\n  gap: 1rem;\r\n}\r\n\r\n.control-btn {\r\n  padding: 0.75rem 1rem;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.9rem;\r\n  font-weight: 600;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.control-btn.primary {\r\n  background: #007bff;\r\n  color: white;\r\n}\r\n\r\n.control-btn.primary:hover:not(:disabled) {\r\n  background: #0056b3;\r\n}\r\n\r\n.control-btn.warning {\r\n  background: #ffc107;\r\n  color: #212529;\r\n}\r\n\r\n.control-btn.warning:hover {\r\n  background: #e0a800;\r\n}\r\n\r\n.control-btn.info {\r\n  background: #17a2b8;\r\n  color: white;\r\n}\r\n\r\n.control-btn.info:hover:not(:disabled) {\r\n  background: #138496;\r\n}\r\n\r\n.control-btn.secondary {\r\n  background: #6c757d;\r\n  color: white;\r\n}\r\n\r\n.control-btn.secondary:hover {\r\n  background: #545b62;\r\n}\r\n\r\n.control-btn:disabled {\r\n  opacity: 0.6;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.preferences-form {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1rem;\r\n}\r\n\r\n.form-group label {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.form-group input[type=\"number\"] {\r\n  padding: 0.5rem;\r\n  border: 1px solid #ced4da;\r\n  border-radius: 4px;\r\n  width: 100px;\r\n}\r\n\r\n.test-results {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1rem;\r\n}\r\n\r\n.test-result-item {\r\n  background: #f8f9fa;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  border-left: 4px solid #dc3545;\r\n}\r\n\r\n.test-result-item.success {\r\n  border-left-color: #28a745;\r\n}\r\n\r\n.result-header {\r\n  display: flex;\r\n  gap: 1rem;\r\n  margin-bottom: 0.5rem;\r\n  font-weight: 600;\r\n}\r\n\r\n.symbol {\r\n  color: #495057;\r\n}\r\n\r\n.source {\r\n  color: #6c757d;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.load-time {\r\n  margin-left: auto;\r\n  color: #007bff;\r\n}\r\n\r\n.error-message {\r\n  color: #dc3545;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.indicators-preview {\r\n  display: flex;\r\n  gap: 1rem;\r\n  font-size: 0.9rem;\r\n  color: #6c757d;\r\n}\r\n\r\n.symbols-grid {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.symbol-tag {\r\n  background: #e9ecef;\r\n  color: #495057;\r\n  padding: 0.25rem 0.5rem;\r\n  border-radius: 4px;\r\n  font-size: 0.8rem;\r\n  font-weight: 500;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .indicators-manager {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .status-grid, .control-grid {\r\n    grid-template-columns: 1fr;\r\n  }\r\n  \r\n  .result-header {\r\n    flex-direction: column;\r\n    gap: 0.5rem;\r\n  }\r\n  \r\n  .load-time {\r\n    margin-left: 0;\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"auto-update-monitor\">\r\n    <div class=\"monitor-header\">\r\n      <h2>è‡ªå‹•æ›´æ–°ç›£æ§é¢æ¿</h2>\r\n      <div class=\"header-actions\">\r\n        <button @click=\"refreshStatus\" class=\"btn btn-secondary\" :disabled=\"loading\">\r\n          <span v-if=\"loading\">ğŸ”„</span>\r\n          <span v-else>ğŸ”„</span>\r\n          åˆ·æ–°ç‹€æ…‹\r\n        </button>\r\n        <button @click=\"toggleScheduler\" :class=\"schedulerButtonClass\" :disabled=\"loading\">\r\n          {{ schedulerButtonText }}\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"monitor-grid\">\r\n      <!-- èª¿åº¦å™¨ç‹€æ…‹ -->\r\n      <div class=\"status-card\">\r\n        <div class=\"card-header\">\r\n          <h3>èª¿åº¦å™¨ç‹€æ…‹</h3>\r\n          <div class=\"status-indicator\" :class=\"schedulerStatusClass\">\r\n            {{ schedulerStatus }}\r\n          </div>\r\n        </div>\r\n        <div class=\"card-content\">\r\n          <div class=\"status-item\">\r\n            <span class=\"label\">é‹è¡Œç‹€æ…‹:</span>\r\n            <span class=\"value\" :class=\"schedulerStatusClass\">\r\n              {{ status.isRunning ? 'é‹è¡Œä¸­' : 'å·²åœæ­¢' }}\r\n            </span>\r\n          </div>\r\n          <div class=\"status-item\">\r\n            <span class=\"label\">æ´»å‹•ä»»å‹™:</span>\r\n            <span class=\"value\">{{ status.activeIntervals?.length || 0 }} å€‹</span>\r\n          </div>\r\n          <div class=\"status-item\">\r\n            <span class=\"label\">å•Ÿå‹•æ™‚é–“:</span>\r\n            <span class=\"value\">{{ formatTime(startTime) }}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- æŠ€è¡“æŒ‡æ¨™ç‹€æ…‹ -->\r\n      <div class=\"status-card\">\r\n        <div class=\"card-header\">\r\n          <h3>æŠ€è¡“æŒ‡æ¨™</h3>\r\n          <div class=\"status-indicator\" :class=\"technicalIndicatorsStatusClass\">\r\n            {{ technicalIndicatorsStatus }}\r\n          </div>\r\n        </div>\r\n        <div class=\"card-content\">\r\n          <div class=\"status-item\">\r\n            <span class=\"label\">æœ€å¾Œæ›´æ–°:</span>\r\n            <span class=\"value\">{{ formatTime(technicalIndicatorsLastUpdate) }}</span>\r\n          </div>\r\n          <div class=\"status-item\">\r\n            <span class=\"label\">æ•¸æ“šå¹´é½¡:</span>\r\n            <span class=\"value\" :class=\"getDataAgeClass(technicalIndicatorsAge)\">\r\n              {{ formatDataAge(technicalIndicatorsAge) }}\r\n            </span>\r\n          </div>\r\n          <div class=\"status-item\">\r\n            <span class=\"label\">ä¸‹æ¬¡æ›´æ–°:</span>\r\n            <span class=\"value\">{{ formatTime(status.nextUpdates?.technicalIndicators) }}</span>\r\n          </div>\r\n          <div class=\"status-item\">\r\n            <span class=\"label\">æˆåŠŸç‡:</span>\r\n            <span class=\"value\">{{ technicalIndicatorsSuccessRate }}%</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"card-actions\">\r\n          <button @click=\"triggerUpdate('technicalIndicators')\" class=\"btn btn-primary btn-sm\" :disabled=\"loading\">\r\n            æ¸…é™¤ç·©å­˜\r\n          </button>\r\n          <div class=\"update-note\">\r\n            <small>è¨»: å¯¦éš›é è¨ˆç®—éœ€è¦åœ¨æœå‹™å™¨ç«¯åŸ·è¡Œ</small>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- å…ƒæ•¸æ“šç‹€æ…‹ -->\r\n      <div class=\"status-card\">\r\n        <div class=\"card-header\">\r\n          <h3>å…ƒæ•¸æ“š</h3>\r\n          <div class=\"status-indicator\" :class=\"metadataStatusClass\">\r\n            {{ metadataStatus }}\r\n          </div>\r\n        </div>\r\n        <div class=\"card-content\">\r\n          <div class=\"status-item\">\r\n            <span class=\"label\">æœ€å¾Œæ›´æ–°:</span>\r\n            <span class=\"value\">{{ formatTime(metadataLastUpdate) }}</span>\r\n          </div>\r\n          <div class=\"status-item\">\r\n            <span class=\"label\">æ•¸æ“šå¹´é½¡:</span>\r\n            <span class=\"value\" :class=\"getDataAgeClass(metadataAge)\">\r\n              {{ formatDataAge(metadataAge) }}\r\n            </span>\r\n          </div>\r\n          <div class=\"status-item\">\r\n            <span class=\"label\">ä¸‹æ¬¡æ›´æ–°:</span>\r\n            <span class=\"value\">{{ formatTime(status.nextUpdates?.metadata) }}</span>\r\n          </div>\r\n          <div class=\"status-item\">\r\n            <span class=\"label\">è‚¡ç¥¨æ•¸é‡:</span>\r\n            <span class=\"value\">{{ metadataSymbolCount }} æ”¯</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"card-actions\">\r\n          <button @click=\"triggerUpdate('metadata')\" class=\"btn btn-primary btn-sm\" :disabled=\"loading\">\r\n            æ‰‹å‹•æ›´æ–°\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- ç·©å­˜é ç†±ç‹€æ…‹ -->\r\n      <div class=\"status-card\">\r\n        <div class=\"card-header\">\r\n          <h3>ç·©å­˜é ç†±</h3>\r\n          <div class=\"status-indicator\" :class=\"warmupStatusClass\">\r\n            {{ warmupStatus }}\r\n          </div>\r\n        </div>\r\n        <div class=\"card-content\">\r\n          <div class=\"status-item\">\r\n            <span class=\"label\">é ç†±ç‹€æ…‹:</span>\r\n            <span class=\"value\" :class=\"warmupStatusClass\">\r\n              {{ warmupInfo.isWarming ? 'é€²è¡Œä¸­' : 'å¾…æ©Ÿä¸­' }}\r\n            </span>\r\n          </div>\r\n          <div class=\"status-item\">\r\n            <span class=\"label\">é€²åº¦:</span>\r\n            <span class=\"value\">{{ Math.round(warmupInfo.progress) }}%</span>\r\n          </div>\r\n          <div class=\"status-item\">\r\n            <span class=\"label\">è¿½è¹¤è‚¡ç¥¨:</span>\r\n            <span class=\"value\">{{ warmupInfo.trackedSymbols?.length || 0 }} æ”¯</span>\r\n          </div>\r\n          <div class=\"status-item\">\r\n            <span class=\"label\">ä¸Šæ¬¡é ç†±:</span>\r\n            <span class=\"value\">{{ formatTime(warmupInfo.lastWarmupTime) }}</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"card-actions\">\r\n          <button @click=\"triggerWarmup\" class=\"btn btn-info btn-sm\" :disabled=\"loading || warmupInfo.isWarming\">\r\n            {{ warmupInfo.isWarming ? 'é ç†±ä¸­...' : 'æ‰‹å‹•é ç†±' }}\r\n          </button>\r\n          <div class=\"update-note\">\r\n            <small>è¨»: é ç†±æ‰€æœ‰è‚¡ç¥¨çš„æŠ€è¡“æŒ‡æ¨™æ•¸æ“š</small>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- ç·©å­˜ç‹€æ…‹ -->\r\n      <div class=\"status-card\">\r\n        <div class=\"card-header\">\r\n          <h3>ç·©å­˜ç‹€æ…‹</h3>\r\n          <div class=\"status-indicator status-info\">\r\n            {{ cacheStatus }}\r\n          </div>\r\n        </div>\r\n        <div class=\"card-content\">\r\n          <div class=\"status-item\">\r\n            <span class=\"label\">å…§å­˜ç·©å­˜:</span>\r\n            <span class=\"value\">{{ cacheStats.memoryCache }} é …</span>\r\n          </div>\r\n          <div class=\"status-item\">\r\n            <span class=\"label\">æœ¬åœ°å­˜å„²:</span>\r\n            <span class=\"value\">{{ cacheStats.localStorage }} é …</span>\r\n          </div>\r\n          <div class=\"status-item\">\r\n            <span class=\"label\">ç¸½å¤§å°:</span>\r\n            <span class=\"value\">{{ cacheStats.totalSize }} é …</span>\r\n          </div>\r\n          <div class=\"status-item\">\r\n            <span class=\"label\">ä¸‹æ¬¡æ¸…ç†:</span>\r\n            <span class=\"value\">{{ formatTime(status.nextUpdates?.cacheCleanup) }}</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"card-actions\">\r\n          <button @click=\"triggerUpdate('cache')\" class=\"btn btn-warning btn-sm\" :disabled=\"loading\">\r\n            æ¸…ç†ç·©å­˜\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- æ›´æ–°æ—¥èªŒ -->\r\n    <div class=\"update-logs\">\r\n      <div class=\"logs-header\">\r\n        <h3>æ›´æ–°æ—¥èªŒ</h3>\r\n        <button @click=\"clearLogs\" class=\"btn btn-sm btn-outline\">æ¸…é™¤æ—¥èªŒ</button>\r\n      </div>\r\n      <div class=\"logs-content\">\r\n        <div v-if=\"logs.length === 0\" class=\"no-logs\">\r\n          æš«ç„¡æ—¥èªŒè¨˜éŒ„\r\n        </div>\r\n        <div v-else class=\"log-entries\">\r\n          <div \r\n            v-for=\"(log, index) in logs\" \r\n            :key=\"index\" \r\n            class=\"log-entry\" \r\n            :class=\"getLogLevelClass(log.level)\"\r\n          >\r\n            <span class=\"log-time\">{{ formatTime(log.timestamp) }}</span>\r\n            <span class=\"log-level\">{{ log.level }}</span>\r\n            <span class=\"log-message\">{{ log.message }}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- é…ç½®é¢æ¿ -->\r\n    <div class=\"config-panel\">\r\n      <div class=\"config-header\">\r\n        <h3>é…ç½®è¨­å®š</h3>\r\n        <button @click=\"saveConfig\" class=\"btn btn-success btn-sm\" :disabled=\"!configChanged\">\r\n          ä¿å­˜é…ç½®\r\n        </button>\r\n      </div>\r\n      <div class=\"config-content\">\r\n        <div class=\"config-section\">\r\n          <h4>æŠ€è¡“æŒ‡æ¨™æ›´æ–°</h4>\r\n          <div class=\"config-item\">\r\n            <label>\r\n              <input type=\"checkbox\" v-model=\"config.technicalIndicators.enabled\" @change=\"onConfigChange\">\r\n              å•Ÿç”¨è‡ªå‹•æ›´æ–°\r\n            </label>\r\n          </div>\r\n          <div class=\"config-item\">\r\n            <label>æ›´æ–°é–“éš” (å°æ™‚):</label>\r\n            <input \r\n              type=\"number\" \r\n              v-model.number=\"config.technicalIndicators.intervalHours\" \r\n              @change=\"onConfigChange\"\r\n              min=\"1\" \r\n              max=\"24\"\r\n            >\r\n          </div>\r\n          <div class=\"config-item\">\r\n            <label>\r\n              <input type=\"checkbox\" v-model=\"config.technicalIndicators.marketHoursOnly\" @change=\"onConfigChange\">\r\n              åƒ…åœ¨å¸‚å ´æ™‚é–“æ›´æ–°\r\n            </label>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"config-section\">\r\n          <h4>å…ƒæ•¸æ“šæ›´æ–°</h4>\r\n          <div class=\"config-item\">\r\n            <label>\r\n              <input type=\"checkbox\" v-model=\"config.metadata.enabled\" @change=\"onConfigChange\">\r\n              å•Ÿç”¨è‡ªå‹•æ›´æ–°\r\n            </label>\r\n          </div>\r\n          <div class=\"config-item\">\r\n            <label>æ›´æ–°é–“éš” (å°æ™‚):</label>\r\n            <input \r\n              type=\"number\" \r\n              v-model.number=\"config.metadata.intervalHours\" \r\n              @change=\"onConfigChange\"\r\n              min=\"1\" \r\n              max=\"168\"\r\n            >\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { autoUpdateScheduler } from '@/utils/autoUpdateScheduler.js'\r\nimport { performanceCache } from '@/utils/performanceCache.js'\r\nimport { cacheWarmupService } from '@/utils/cacheWarmupService.js'\r\n\r\nexport default {\r\n  name: 'AutoUpdateMonitor',\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      status: {},\r\n      cacheStats: {},\r\n      logs: [],\r\n      config: {\r\n        technicalIndicators: {\r\n          enabled: true,\r\n          intervalHours: 1,\r\n          marketHoursOnly: true\r\n        },\r\n        metadata: {\r\n          enabled: true,\r\n          intervalHours: 24\r\n        }\r\n      },\r\n      configChanged: false,\r\n      startTime: null,\r\n      technicalIndicatorsLastUpdate: null,\r\n      technicalIndicatorsAge: 0,\r\n      technicalIndicatorsSuccessRate: 0,\r\n      metadataLastUpdate: null,\r\n      metadataAge: 0,\r\n      metadataSymbolCount: 0,\r\n      warmupInfo: {\r\n        isWarming: false,\r\n        progress: 0,\r\n        lastWarmupTime: null,\r\n        trackedSymbols: []\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    schedulerStatus() {\r\n      return this.status.isRunning ? 'é‹è¡Œä¸­' : 'å·²åœæ­¢'\r\n    },\r\n    schedulerStatusClass() {\r\n      return this.status.isRunning ? 'status-success' : 'status-error'\r\n    },\r\n    schedulerButtonText() {\r\n      return this.status.isRunning ? 'åœæ­¢èª¿åº¦å™¨' : 'å•Ÿå‹•èª¿åº¦å™¨'\r\n    },\r\n    schedulerButtonClass() {\r\n      return this.status.isRunning ? 'btn btn-danger' : 'btn btn-success'\r\n    },\r\n    technicalIndicatorsStatus() {\r\n      if (this.technicalIndicatorsAge < 1) return 'æœ€æ–°'\r\n      if (this.technicalIndicatorsAge < 12) return 'è¼ƒæ–°'\r\n      if (this.technicalIndicatorsAge < 24) return 'éæ™‚'\r\n      return 'èˆŠæ•¸æ“š'\r\n    },\r\n    technicalIndicatorsStatusClass() {\r\n      if (this.technicalIndicatorsAge < 1) return 'status-success'\r\n      if (this.technicalIndicatorsAge < 12) return 'status-warning'\r\n      return 'status-error'\r\n    },\r\n    metadataStatus() {\r\n      if (this.metadataAge < 24) return 'æœ€æ–°'\r\n      if (this.metadataAge < 72) return 'è¼ƒæ–°'\r\n      return 'éæ™‚'\r\n    },\r\n    metadataStatusClass() {\r\n      if (this.metadataAge < 24) return 'status-success'\r\n      if (this.metadataAge < 72) return 'status-warning'\r\n      return 'status-error'\r\n    },\r\n    cacheStatus() {\r\n      const total = this.cacheStats.totalSize || 0\r\n      if (total > 100) return 'éœ€è¦æ¸…ç†'\r\n      if (total > 50) return 'æ­£å¸¸'\r\n      return 'è‰¯å¥½'\r\n    },\r\n    warmupStatus() {\r\n      if (this.warmupInfo.isWarming) return 'é ç†±ä¸­'\r\n      if (this.warmupInfo.progress === 100) return 'å·²å®Œæˆ'\r\n      if (this.warmupInfo.lastWarmupTime) return 'å¾…æ©Ÿä¸­'\r\n      return 'æœªé ç†±'\r\n    },\r\n    warmupStatusClass() {\r\n      if (this.warmupInfo.isWarming) return 'status-warning'\r\n      if (this.warmupInfo.progress === 100) return 'status-success'\r\n      if (this.warmupInfo.lastWarmupTime) return 'status-info'\r\n      return 'status-error'\r\n    }\r\n  },\r\n  async mounted() {\r\n    await this.initializeMonitor()\r\n    this.startPeriodicRefresh()\r\n  },\r\n  beforeUnmount() {\r\n    if (this.refreshInterval) {\r\n      clearInterval(this.refreshInterval)\r\n    }\r\n  },\r\n  methods: {\r\n    async initializeMonitor() {\r\n      this.loading = true\r\n      try {\r\n        await this.refreshStatus()\r\n        await this.loadTechnicalIndicatorsStatus()\r\n        await this.loadMetadataStatus()\r\n        await this.loadWarmupStatus()\r\n        this.startTime = new Date()\r\n        this.addLog('ç›£æ§é¢æ¿å·²åˆå§‹åŒ–', 'INFO')\r\n      } catch (error) {\r\n        this.addLog(`åˆå§‹åŒ–å¤±æ•—: ${error.message}`, 'ERROR')\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n\r\n    async refreshStatus() {\r\n      try {\r\n        this.status = autoUpdateScheduler.getStatus()\r\n        this.cacheStats = performanceCache.getStats()\r\n      } catch (error) {\r\n        this.addLog(`åˆ·æ–°ç‹€æ…‹å¤±æ•—: ${error.message}`, 'ERROR')\r\n      }\r\n    },\r\n\r\n    async loadTechnicalIndicatorsStatus() {\r\n      try {\r\n        const basePath = window.location.hostname === 'romarin-hsieh.github.io' ? '/investment-dashboard/' : '/';\r\n        const response = await fetch(`${basePath}data/technical-indicators/latest_index.json`)\r\n        if (response.ok) {\r\n          const data = await response.json()\r\n          this.technicalIndicatorsLastUpdate = new Date(data.generatedAt)\r\n          this.technicalIndicatorsAge = (Date.now() - this.technicalIndicatorsLastUpdate) / (1000 * 60 * 60)\r\n          this.technicalIndicatorsSuccessRate = Math.round((data.successfulSymbols / data.totalSymbols) * 100)\r\n        }\r\n      } catch (error) {\r\n        this.addLog(`è¼‰å…¥æŠ€è¡“æŒ‡æ¨™ç‹€æ…‹å¤±æ•—: ${error.message}`, 'ERROR')\r\n      }\r\n    },\r\n\r\n    async loadMetadataStatus() {\r\n      try {\r\n        // é€™è£¡å¯ä»¥æª¢æŸ¥å…ƒæ•¸æ“šçš„ç‹€æ…‹\r\n        this.metadataLastUpdate = new Date() // æš«æ™‚ä½¿ç”¨ç•¶å‰æ™‚é–“\r\n        this.metadataAge = 0\r\n        this.metadataSymbolCount = 24 // æš«æ™‚ç¡¬ç·¨ç¢¼\r\n      } catch (error) {\r\n        this.addLog(`è¼‰å…¥å…ƒæ•¸æ“šç‹€æ…‹å¤±æ•—: ${error.message}`, 'ERROR')\r\n      }\r\n    },\r\n\r\n    async loadWarmupStatus() {\r\n      try {\r\n        this.warmupInfo = cacheWarmupService.getWarmupStatus()\r\n      } catch (error) {\r\n        this.addLog(`è¼‰å…¥é ç†±ç‹€æ…‹å¤±æ•—: ${error.message}`, 'ERROR')\r\n      }\r\n    },\r\n\r\n    async triggerWarmup() {\r\n      this.loading = true\r\n      try {\r\n        this.addLog('æ‰‹å‹•è§¸ç™¼ç·©å­˜é ç†±', 'INFO')\r\n        await cacheWarmupService.triggerManualWarmup()\r\n        this.addLog('ç·©å­˜é ç†±å®Œæˆ', 'SUCCESS')\r\n        await this.loadWarmupStatus()\r\n      } catch (error) {\r\n        this.addLog(`ç·©å­˜é ç†±å¤±æ•—: ${error.message}`, 'ERROR')\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n\r\n    async toggleScheduler() {\r\n      this.loading = true\r\n      try {\r\n        if (this.status.isRunning) {\r\n          autoUpdateScheduler.stop()\r\n          this.addLog('èª¿åº¦å™¨å·²åœæ­¢', 'INFO')\r\n        } else {\r\n          autoUpdateScheduler.start()\r\n          this.addLog('èª¿åº¦å™¨å·²å•Ÿå‹•', 'INFO')\r\n        }\r\n        await this.refreshStatus()\r\n      } catch (error) {\r\n        this.addLog(`åˆ‡æ›èª¿åº¦å™¨å¤±æ•—: ${error.message}`, 'ERROR')\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n\r\n    async triggerUpdate(updateType) {\r\n      this.loading = true\r\n      try {\r\n        this.addLog(`æ‰‹å‹•è§¸ç™¼æ›´æ–°: ${updateType}`, 'INFO')\r\n        await autoUpdateScheduler.triggerManualUpdate(updateType)\r\n        this.addLog(`æ‰‹å‹•æ›´æ–°å®Œæˆ: ${updateType}`, 'SUCCESS')\r\n        await this.refreshStatus()\r\n        \r\n        if (updateType === 'technicalIndicators') {\r\n          await this.loadTechnicalIndicatorsStatus()\r\n        } else if (updateType === 'metadata') {\r\n          await this.loadMetadataStatus()\r\n        }\r\n      } catch (error) {\r\n        this.addLog(`æ‰‹å‹•æ›´æ–°å¤±æ•—: ${error.message}`, 'ERROR')\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n\r\n    startPeriodicRefresh() {\r\n      this.refreshInterval = setInterval(async () => {\r\n        await this.refreshStatus()\r\n        await this.loadTechnicalIndicatorsStatus()\r\n        await this.loadMetadataStatus()\r\n        await this.loadWarmupStatus()\r\n      }, 30000) // æ¯ 30 ç§’åˆ·æ–°ä¸€æ¬¡\r\n    },\r\n\r\n    addLog(message, level = 'INFO') {\r\n      const log = {\r\n        timestamp: new Date(),\r\n        level,\r\n        message\r\n      }\r\n      this.logs.unshift(log)\r\n      \r\n      // ä¿ç•™æœ€è¿‘ 100 æ¢æ—¥èªŒ\r\n      if (this.logs.length > 100) {\r\n        this.logs = this.logs.slice(0, 100)\r\n      }\r\n    },\r\n\r\n    clearLogs() {\r\n      this.logs = []\r\n      this.addLog('æ—¥èªŒå·²æ¸…é™¤', 'INFO')\r\n    },\r\n\r\n    onConfigChange() {\r\n      this.configChanged = true\r\n    },\r\n\r\n    async saveConfig() {\r\n      try {\r\n        // é€™è£¡å¯ä»¥ä¿å­˜é…ç½®åˆ°æœ¬åœ°å­˜å„²æˆ–ç™¼é€åˆ°æœå‹™å™¨\r\n        localStorage.setItem('autoUpdateConfig', JSON.stringify(this.config))\r\n        this.configChanged = false\r\n        this.addLog('é…ç½®å·²ä¿å­˜', 'SUCCESS')\r\n      } catch (error) {\r\n        this.addLog(`ä¿å­˜é…ç½®å¤±æ•—: ${error.message}`, 'ERROR')\r\n      }\r\n    },\r\n\r\n    formatTime(date) {\r\n      if (!date) return 'N/A'\r\n      return new Date(date).toLocaleString('zh-TW')\r\n    },\r\n\r\n    formatDataAge(ageHours) {\r\n      if (ageHours < 1) return '< 1 å°æ™‚'\r\n      if (ageHours < 24) return `${Math.round(ageHours)} å°æ™‚`\r\n      return `${Math.round(ageHours / 24)} å¤©`\r\n    },\r\n\r\n    getDataAgeClass(ageHours) {\r\n      if (ageHours < 1) return 'text-success'\r\n      if (ageHours < 12) return 'text-warning'\r\n      return 'text-danger'\r\n    },\r\n\r\n    getLogLevelClass(level) {\r\n      return {\r\n        'log-info': level === 'INFO',\r\n        'log-success': level === 'SUCCESS',\r\n        'log-warning': level === 'WARN',\r\n        'log-error': level === 'ERROR'\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.auto-update-monitor {\r\n  padding: 1rem;\r\n  max-width: 1600px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.monitor-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 2rem;\r\n  padding-bottom: 1rem;\r\n  border-bottom: 1px solid #e0e0e0;\r\n}\r\n\r\n.monitor-header h2 {\r\n  margin: 0;\r\n  color: #333;\r\n}\r\n\r\n.header-actions {\r\n  display: flex;\r\n  gap: 1rem;\r\n}\r\n\r\n.monitor-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\r\n  gap: 1.5rem;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.status-card {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 1rem;\r\n  background: #f8f9fa;\r\n  border-bottom: 1px solid #e0e0e0;\r\n}\r\n\r\n.card-header h3 {\r\n  margin: 0;\r\n  font-size: 1.1rem;\r\n  color: #333;\r\n}\r\n\r\n.status-indicator {\r\n  padding: 0.25rem 0.75rem;\r\n  border-radius: 12px;\r\n  font-size: 0.8rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.status-success {\r\n  background: #d4edda;\r\n  color: #155724;\r\n}\r\n\r\n.status-warning {\r\n  background: #fff3cd;\r\n  color: #856404;\r\n}\r\n\r\n.status-error {\r\n  background: #f8d7da;\r\n  color: #721c24;\r\n}\r\n\r\n.status-info {\r\n  background: #d1ecf1;\r\n  color: #0c5460;\r\n}\r\n\r\n.card-content {\r\n  padding: 1rem;\r\n}\r\n\r\n.status-item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 0.75rem;\r\n}\r\n\r\n.status-item:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.status-item .label {\r\n  color: #666;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.status-item .value {\r\n  font-weight: 500;\r\n  color: #333;\r\n}\r\n\r\n.text-success {\r\n  color: #28a745;\r\n}\r\n\r\n.text-warning {\r\n  color: #ffc107;\r\n}\r\n\r\n.text-danger {\r\n  color: #dc3545;\r\n}\r\n\r\n.card-actions {\r\n  padding: 0 1rem 1rem;\r\n}\r\n\r\n.update-note {\r\n  margin-top: 0.5rem;\r\n  color: #6c757d;\r\n  font-style: italic;\r\n}\r\n\r\n.btn {\r\n  padding: 0.5rem 1rem;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.9rem;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.btn:disabled {\r\n  opacity: 0.6;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.btn-primary {\r\n  background: #007bff;\r\n  color: white;\r\n}\r\n\r\n.btn-primary:hover:not(:disabled) {\r\n  background: #0056b3;\r\n}\r\n\r\n.btn-secondary {\r\n  background: #6c757d;\r\n  color: white;\r\n}\r\n\r\n.btn-secondary:hover:not(:disabled) {\r\n  background: #545b62;\r\n}\r\n\r\n.btn-success {\r\n  background: #28a745;\r\n  color: white;\r\n}\r\n\r\n.btn-success:hover:not(:disabled) {\r\n  background: #1e7e34;\r\n}\r\n\r\n.btn-danger {\r\n  background: #dc3545;\r\n  color: white;\r\n}\r\n\r\n.btn-danger:hover:not(:disabled) {\r\n  background: #c82333;\r\n}\r\n\r\n.btn-warning {\r\n  background: #ffc107;\r\n  color: #212529;\r\n}\r\n\r\n.btn-warning:hover:not(:disabled) {\r\n  background: #e0a800;\r\n}\r\n\r\n.btn-sm {\r\n  padding: 0.375rem 0.75rem;\r\n  font-size: 0.8rem;\r\n}\r\n\r\n.btn-outline {\r\n  background: transparent;\r\n  border: 1px solid #6c757d;\r\n  color: #6c757d;\r\n}\r\n\r\n.btn-outline:hover:not(:disabled) {\r\n  background: #6c757d;\r\n  color: white;\r\n}\r\n\r\n.update-logs, .config-panel {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.logs-header, .config-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 1rem;\r\n  background: #f8f9fa;\r\n  border-bottom: 1px solid #e0e0e0;\r\n}\r\n\r\n.logs-header h3, .config-header h3 {\r\n  margin: 0;\r\n  font-size: 1.1rem;\r\n  color: #333;\r\n}\r\n\r\n.logs-content {\r\n  max-height: 400px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.no-logs {\r\n  padding: 2rem;\r\n  text-align: center;\r\n  color: #666;\r\n}\r\n\r\n.log-entries {\r\n  padding: 1rem;\r\n}\r\n\r\n.log-entry {\r\n  display: flex;\r\n  gap: 1rem;\r\n  padding: 0.5rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.log-entry:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.log-time {\r\n  color: #666;\r\n  white-space: nowrap;\r\n  min-width: 150px;\r\n}\r\n\r\n.log-level {\r\n  font-weight: 500;\r\n  min-width: 60px;\r\n}\r\n\r\n.log-message {\r\n  flex: 1;\r\n}\r\n\r\n.log-info .log-level {\r\n  color: #17a2b8;\r\n}\r\n\r\n.log-success .log-level {\r\n  color: #28a745;\r\n}\r\n\r\n.log-warning .log-level {\r\n  color: #ffc107;\r\n}\r\n\r\n.log-error .log-level {\r\n  color: #dc3545;\r\n}\r\n\r\n.config-content {\r\n  padding: 1rem;\r\n}\r\n\r\n.config-section {\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.config-section:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.config-section h4 {\r\n  margin: 0 0 1rem 0;\r\n  color: #333;\r\n  font-size: 1rem;\r\n}\r\n\r\n.config-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 1rem;\r\n  margin-bottom: 0.75rem;\r\n}\r\n\r\n.config-item label {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  color: #333;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.config-item input[type=\"number\"] {\r\n  padding: 0.375rem 0.75rem;\r\n  border: 1px solid #ced4da;\r\n  border-radius: 4px;\r\n  width: 80px;\r\n}\r\n\r\n.config-item input[type=\"checkbox\"] {\r\n  margin: 0;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .monitor-header {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 1rem;\r\n  }\r\n\r\n  .header-actions {\r\n    width: 100%;\r\n    justify-content: space-between;\r\n  }\r\n\r\n  .monitor-grid {\r\n    grid-template-columns: 1fr;\r\n  }\r\n\r\n  .status-item {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 0.25rem;\r\n  }\r\n\r\n  .log-entry {\r\n    flex-direction: column;\r\n    gap: 0.25rem;\r\n  }\r\n\r\n  .log-time {\r\n    min-width: auto;\r\n  }\r\n\r\n  .config-item {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"system-manager\">\r\n    <div class=\"manager-header\">\r\n      <h2>Control Panel</h2>\r\n      <p>ç›£æ§å’Œç®¡ç†æŠ•è³‡å„€è¡¨æ¿çš„å„é …ç³»çµ±åŠŸèƒ½</p>\r\n    </div>\r\n\r\n    <!-- ç³»çµ±ç‹€æ…‹ç¸½è¦½ -->\r\n    <div class=\"overview-section\">\r\n      <div class=\"overview-grid\">\r\n        <div class=\"overview-card\" :class=\"{ 'healthy': systemHealth.overall >= 80 }\">\r\n          <div class=\"card-icon\">ğŸ¯</div>\r\n          <div class=\"card-content\">\r\n            <h3>ç³»çµ±å¥åº·åº¦</h3>\r\n            <div class=\"health-score\">{{ systemHealth.overall }}%</div>\r\n            <div class=\"health-status\">{{ getHealthStatus(systemHealth.overall) }}</div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"overview-card\">\r\n          <div class=\"card-icon\">ğŸ“Š</div>\r\n          <div class=\"card-content\">\r\n            <h3>æ•¸æ“šæºç‹€æ…‹</h3>\r\n            <div class=\"data-sources\">\r\n              <span class=\"source-item\" :class=\"{ 'active': dataSourceStatus?.precomputed?.available }\">\r\n                é è¨ˆç®— {{ dataSourceStatus?.precomputed?.available ? 'âœ…' : 'âŒ' }}\r\n              </span>\r\n              <span class=\"source-item active\">å¿«å– âœ…</span>\r\n              <span class=\"source-item active\">å¯¦æ™‚ âœ…</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"overview-card\">\r\n          <div class=\"card-icon\">ğŸ”„</div>\r\n          <div class=\"card-content\">\r\n            <h3>è‡ªå‹•æ›´æ–°</h3>\r\n            <div class=\"update-status\" :class=\"schedulerStatusClass\">\r\n              {{ status.isRunning ? 'é‹è¡Œä¸­' : 'å·²åœæ­¢' }}\r\n            </div>\r\n            <div class=\"update-info\">\r\n              æ´»å‹•ä»»å‹™: {{ status.activeIntervals?.length || 0 }} å€‹\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"overview-card\">\r\n          <div class=\"card-icon\">âš¡</div>\r\n          <div class=\"card-content\">\r\n            <h3>æ•ˆèƒ½ç‹€æ…‹</h3>\r\n            <div class=\"performance-score\">{{ performanceScore }}%</div>\r\n            <div class=\"performance-info\">\r\n              å¿«å–å‘½ä¸­ç‡: {{ cacheHitRate }}%\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- è©³ç´°ç‹€æ…‹å€åŸŸ -->\r\n    <div class=\"details-section\">\r\n      <div class=\"details-grid\">\r\n        <!-- æ•¸æ“šæºè©³æƒ… -->\r\n        <div class=\"detail-card\">\r\n          <div class=\"card-header\">\r\n            <h3>ğŸ“Š æ•¸æ“šæºç®¡ç†</h3>\r\n            <button @click=\"refreshDataSources\" class=\"btn btn-sm\" :disabled=\"loading\">\r\n              {{ loading ? 'ğŸ”„' : 'ğŸ”„' }} åˆ·æ–°\r\n            </button>\r\n          </div>\r\n          \r\n          <div class=\"data-source-list\">\r\n            <!-- é è¨ˆç®—æ•¸æ“š -->\r\n            <div class=\"source-item\" :class=\"{ 'available': dataSourceStatus?.precomputed?.available }\">\r\n              <div class=\"source-header\">\r\n                <h4>é è¨ˆç®—æ•¸æ“š</h4>\r\n                <span class=\"status-badge\" :class=\"dataSourceStatus?.precomputed?.available ? 'success' : 'error'\">\r\n                  {{ dataSourceStatus?.precomputed?.available ? 'å¯ç”¨' : 'ä¸å¯ç”¨' }}\r\n                </span>\r\n              </div>\r\n              <div v-if=\"dataSourceStatus?.precomputed?.available\" class=\"source-details\">\r\n                <div class=\"detail-row\">\r\n                  <span>è‚¡ç¥¨æ•¸é‡:</span>\r\n                  <span>{{ dataSourceStatus.precomputed.symbols?.length || 0 }}</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                  <span>æˆåŠŸ/å¤±æ•—:</span>\r\n                  <span>{{ dataSourceStatus.precomputed.successful || 0 }}/{{ dataSourceStatus.precomputed.failed || 0 }}</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                  <span>æœ€å¾Œæ›´æ–°:</span>\r\n                  <span>{{ formatTime(dataSourceStatus.precomputed.lastUpdate) }}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- å¿«å–ç‹€æ…‹ -->\r\n            <div class=\"source-item available\">\r\n              <div class=\"source-header\">\r\n                <h4>å¿«å–ç³»çµ±</h4>\r\n                <span class=\"status-badge success\">æ­£å¸¸</span>\r\n              </div>\r\n              <div class=\"source-details\">\r\n                <div class=\"detail-row\">\r\n                  <span>å…§å­˜å¿«å–:</span>\r\n                  <span>{{ dataSourceStatus?.cache?.memoryCache || 0 }} é …ç›®</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                  <span>æœ¬åœ°å­˜å„²:</span>\r\n                  <span>{{ dataSourceStatus?.cache?.localStorageCache || 0 }} é …ç›®</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                  <span>å‘½ä¸­ç‡:</span>\r\n                  <span>{{ cacheHitRate }}%</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- è‡ªå‹•æ›´æ–°è©³æƒ… -->\r\n        <div class=\"detail-card\">\r\n          <div class=\"card-header\">\r\n            <h3>ğŸ”„ è‡ªå‹•æ›´æ–°ç®¡ç†</h3>\r\n            <button @click=\"toggleScheduler\" :class=\"schedulerButtonClass\" :disabled=\"loading\">\r\n              {{ schedulerButtonText }}\r\n            </button>\r\n          </div>\r\n          \r\n          <div class=\"update-details\">\r\n            <div class=\"update-item\">\r\n              <div class=\"update-header\">\r\n                <h4>æŠ€è¡“æŒ‡æ¨™</h4>\r\n                <div class=\"status-indicator\" :class=\"technicalIndicatorsStatusClass\">\r\n                  {{ technicalIndicatorsStatus }}\r\n                </div>\r\n              </div>\r\n              <div class=\"update-info\">\r\n                <div class=\"detail-row\">\r\n                  <span>æœ€å¾Œæ›´æ–°:</span>\r\n                  <span>{{ formatTime(technicalIndicatorsLastUpdate) }}</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                  <span>æ•¸æ“šå¹´é½¡:</span>\r\n                  <span :class=\"getDataAgeClass(technicalIndicatorsAge)\">\r\n                    {{ formatDataAge(technicalIndicatorsAge) }}\r\n                  </span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                  <span>æˆåŠŸç‡:</span>\r\n                  <span>{{ technicalIndicatorsSuccessRate }}%</span>\r\n                </div>\r\n              </div>\r\n              <div class=\"update-actions\">\r\n                <button @click=\"triggerUpdate('technicalIndicators')\" class=\"btn btn-sm btn-primary\" :disabled=\"loading\">\r\n                  æ¸…é™¤å¿«å–\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"update-item\">\r\n              <div class=\"update-header\">\r\n                <h4>å…ƒæ•¸æ“š</h4>\r\n                <div class=\"status-indicator\" :class=\"metadataStatusClass\">\r\n                  {{ metadataStatus }}\r\n                </div>\r\n              </div>\r\n              <div class=\"update-info\">\r\n                <div class=\"detail-row\">\r\n                  <span>æœ€å¾Œæ›´æ–°:</span>\r\n                  <span>{{ formatTime(metadataLastUpdate) }}</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                  <span>æ•¸æ“šå¹´é½¡:</span>\r\n                  <span :class=\"getDataAgeClass(metadataAge)\">\r\n                    {{ formatDataAge(metadataAge) }}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <div class=\"update-actions\">\r\n                <button @click=\"triggerUpdate('metadata')\" class=\"btn btn-sm btn-primary\" :disabled=\"loading\">\r\n                  æ¸…é™¤å¿«å–\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- æ§åˆ¶é¢æ¿ -->\r\n    <div class=\"control-section\">\r\n      <div class=\"control-header\">\r\n        <h3>ğŸ›ï¸ ç³»çµ±æ§åˆ¶</h3>\r\n      </div>\r\n      \r\n      <div class=\"control-grid\">\r\n        <button @click=\"refreshAllStatus\" class=\"control-btn primary\" :disabled=\"loading\">\r\n          <span class=\"btn-icon\">ğŸ”„</span>\r\n          {{ loading ? 'åˆ·æ–°ä¸­...' : 'å…¨é¢åˆ·æ–°' }}\r\n        </button>\r\n        \r\n        <button @click=\"clearAllCaches\" class=\"control-btn warning\">\r\n          <span class=\"btn-icon\">ğŸ—‘ï¸</span>\r\n          æ¸…é™¤æ‰€æœ‰å¿«å–\r\n        </button>\r\n        \r\n        <button @click=\"testSystemHealth\" class=\"control-btn info\" :disabled=\"testing\">\r\n          <span class=\"btn-icon\">ğŸ”</span>\r\n          {{ testing ? 'æ¸¬è©¦ä¸­...' : 'ç³»çµ±å¥æª¢' }}\r\n        </button>\r\n        \r\n        <button @click=\"showAdvanced = !showAdvanced\" class=\"control-btn secondary\">\r\n          <span class=\"btn-icon\">âš™ï¸</span>\r\n          {{ showAdvanced ? 'éš±è—é€²éš' : 'é€²éšè¨­å®š' }}\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- é€²éšè¨­å®š -->\r\n    <div v-if=\"showAdvanced\" class=\"advanced-section\">\r\n      <div class=\"advanced-header\">\r\n        <h3>âš™ï¸ é€²éšè¨­å®š</h3>\r\n      </div>\r\n      \r\n      <div class=\"settings-grid\">\r\n        <div class=\"setting-group\">\r\n          <h4>æ•¸æ“šæºåå¥½</h4>\r\n          <div class=\"setting-item\">\r\n            <label>\r\n              <input \r\n                type=\"checkbox\" \r\n                v-model=\"preferences.preferPrecomputed\"\r\n                @change=\"updatePreferences\"\r\n              />\r\n              å„ªå…ˆä½¿ç”¨é è¨ˆç®—æ•¸æ“š\r\n            </label>\r\n          </div>\r\n          <div class=\"setting-item\">\r\n            <label>\r\n              <input \r\n                type=\"checkbox\" \r\n                v-model=\"preferences.fallbackToRealtime\"\r\n                @change=\"updatePreferences\"\r\n              />\r\n              å…è¨±å›é€€åˆ°å¯¦æ™‚è¨ˆç®—\r\n            </label>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"setting-group\">\r\n          <h4>æ›´æ–°é »ç‡</h4>\r\n          <div class=\"setting-item\">\r\n            <label>æŠ€è¡“æŒ‡æ¨™æ›´æ–°é–“éš” (åˆ†é˜):</label>\r\n            <select v-model=\"preferences.technicalIndicatorsInterval\" @change=\"updatePreferences\">\r\n              <option value=\"5\">5 åˆ†é˜</option>\r\n              <option value=\"15\">15 åˆ†é˜</option>\r\n              <option value=\"30\">30 åˆ†é˜</option>\r\n              <option value=\"60\">1 å°æ™‚</option>\r\n            </select>\r\n          </div>\r\n          <div class=\"setting-item\">\r\n            <label>å…ƒæ•¸æ“šæ›´æ–°é–“éš” (å°æ™‚):</label>\r\n            <select v-model=\"preferences.metadataInterval\" @change=\"updatePreferences\">\r\n              <option value=\"6\">6 å°æ™‚</option>\r\n              <option value=\"12\">12 å°æ™‚</option>\r\n              <option value=\"24\">24 å°æ™‚</option>\r\n              <option value=\"168\">1 é€±</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"setting-group\">\r\n          <h4>æ•ˆèƒ½è¨­å®š</h4>\r\n          <div class=\"setting-item\">\r\n            <label>\r\n              <input \r\n                type=\"checkbox\" \r\n                v-model=\"preferences.enablePerformanceMonitoring\"\r\n                @change=\"updatePreferences\"\r\n              />\r\n              å•Ÿç”¨æ•ˆèƒ½ç›£æ§\r\n            </label>\r\n          </div>\r\n          <div class=\"setting-item\">\r\n            <label>\r\n              <input \r\n                type=\"checkbox\" \r\n                v-model=\"preferences.enableCacheWarmup\"\r\n                @change=\"updatePreferences\"\r\n              />\r\n              å•Ÿç”¨å¿«å–é ç†±\r\n            </label>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- ç³»çµ±æ—¥èªŒ -->\r\n    <div class=\"logs-section\">\r\n      <div class=\"logs-header\">\r\n        <h3>ğŸ“‹ ç³»çµ±æ—¥èªŒ</h3>\r\n        <button @click=\"clearLogs\" class=\"btn btn-sm\">æ¸…é™¤æ—¥èªŒ</button>\r\n      </div>\r\n      <div class=\"logs-container\">\r\n        <div v-for=\"log in systemLogs.slice(-10)\" :key=\"log.id\" class=\"log-entry\" :class=\"log.level\">\r\n          <span class=\"log-time\">{{ formatTime(log.timestamp) }}</span>\r\n          <span class=\"log-level\">{{ log.level.toUpperCase() }}</span>\r\n          <span class=\"log-message\">{{ log.message }}</span>\r\n        </div>\r\n        <div v-if=\"systemLogs.length === 0\" class=\"no-logs\">\r\n          æš«ç„¡ç³»çµ±æ—¥èªŒ\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { hybridTechnicalIndicatorsAPI } from '@/utils/hybridTechnicalIndicatorsApi.js'\r\nimport { autoUpdateScheduler } from '@/utils/autoUpdateScheduler.js'\r\nimport { performanceCache } from '@/utils/performanceCache.js'\r\nimport { performanceMonitor } from '@/utils/performanceMonitor.js'\r\n\r\nexport default {\r\n  name: 'SystemManager',\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      testing: false,\r\n      showAdvanced: false,\r\n      \r\n      // ç³»çµ±ç‹€æ…‹\r\n      systemHealth: {\r\n        overall: 85,\r\n        dataSource: 90,\r\n        performance: 80,\r\n        updates: 85\r\n      },\r\n      \r\n      // æ•¸æ“šæºç‹€æ…‹\r\n      dataSourceStatus: null,\r\n      \r\n      // è‡ªå‹•æ›´æ–°ç‹€æ…‹\r\n      status: {\r\n        isRunning: false,\r\n        activeIntervals: [],\r\n        nextUpdates: {}\r\n      },\r\n      startTime: null,\r\n      \r\n      // æ•ˆèƒ½æŒ‡æ¨™\r\n      performanceScore: 85,\r\n      cacheHitRate: 78,\r\n      \r\n      // åå¥½è¨­å®š\r\n      preferences: {\r\n        preferPrecomputed: true,\r\n        fallbackToRealtime: true,\r\n        technicalIndicatorsInterval: 30,\r\n        metadataInterval: 24,\r\n        enablePerformanceMonitoring: true,\r\n        enableCacheWarmup: true\r\n      },\r\n      \r\n      // ç³»çµ±æ—¥èªŒ\r\n      systemLogs: [],\r\n      logIdCounter: 0\r\n    }\r\n  },\r\n  \r\n  computed: {\r\n    schedulerStatus() {\r\n      return this.status.isRunning ? 'é‹è¡Œä¸­' : 'å·²åœæ­¢'\r\n    },\r\n    \r\n    schedulerStatusClass() {\r\n      return this.status.isRunning ? 'success' : 'error'\r\n    },\r\n    \r\n    schedulerButtonClass() {\r\n      return this.status.isRunning ? 'btn btn-warning' : 'btn btn-success'\r\n    },\r\n    \r\n    schedulerButtonText() {\r\n      return this.status.isRunning ? 'åœæ­¢èª¿åº¦å™¨' : 'å•Ÿå‹•èª¿åº¦å™¨'\r\n    },\r\n    \r\n    technicalIndicatorsStatus() {\r\n      return 'æ­£å¸¸'\r\n    },\r\n    \r\n    technicalIndicatorsStatusClass() {\r\n      return 'success'\r\n    },\r\n    \r\n    technicalIndicatorsLastUpdate() {\r\n      return new Date().toISOString()\r\n    },\r\n    \r\n    technicalIndicatorsAge() {\r\n      return 30 * 60 * 1000 // 30 minutes\r\n    },\r\n    \r\n    technicalIndicatorsSuccessRate() {\r\n      return 95\r\n    },\r\n    \r\n    metadataStatus() {\r\n      return 'æ­£å¸¸'\r\n    },\r\n    \r\n    metadataStatusClass() {\r\n      return 'success'\r\n    },\r\n    \r\n    metadataLastUpdate() {\r\n      return new Date().toISOString()\r\n    },\r\n    \r\n    metadataAge() {\r\n      return 2 * 60 * 60 * 1000 // 2 hours\r\n    }\r\n  },\r\n  \r\n  async mounted() {\r\n    await this.initializeSystem()\r\n    this.startStatusUpdates()\r\n  },\r\n  \r\n  methods: {\r\n    async initializeSystem() {\r\n      this.addLog('info', 'ç³»çµ±ç®¡ç†é¢æ¿åˆå§‹åŒ–ä¸­...')\r\n      \r\n      try {\r\n        await this.refreshAllStatus()\r\n        this.addLog('info', 'ç³»çµ±ç®¡ç†é¢æ¿åˆå§‹åŒ–å®Œæˆ')\r\n      } catch (error) {\r\n        this.addLog('error', `ç³»çµ±åˆå§‹åŒ–å¤±æ•—: ${error.message}`)\r\n      }\r\n    },\r\n    \r\n    async refreshAllStatus() {\r\n      this.loading = true\r\n      this.addLog('info', 'é–‹å§‹å…¨é¢ç‹€æ…‹åˆ·æ–°...')\r\n      \r\n      try {\r\n        // åˆ·æ–°æ•¸æ“šæºç‹€æ…‹\r\n        await this.refreshDataSources()\r\n        \r\n        // åˆ·æ–°è‡ªå‹•æ›´æ–°ç‹€æ…‹\r\n        this.refreshSchedulerStatus()\r\n        \r\n        // æ›´æ–°æ•ˆèƒ½æŒ‡æ¨™\r\n        this.updatePerformanceMetrics()\r\n        \r\n        // æ›´æ–°ç³»çµ±å¥åº·åº¦\r\n        this.updateSystemHealth()\r\n        \r\n        this.addLog('info', 'å…¨é¢ç‹€æ…‹åˆ·æ–°å®Œæˆ')\r\n      } catch (error) {\r\n        this.addLog('error', `ç‹€æ…‹åˆ·æ–°å¤±æ•—: ${error.message}`)\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n    \r\n    async refreshDataSources() {\r\n      try {\r\n        this.dataSourceStatus = await hybridTechnicalIndicatorsAPI.getDataSourceStatus()\r\n        this.addLog('info', 'æ•¸æ“šæºç‹€æ…‹å·²æ›´æ–°')\r\n      } catch (error) {\r\n        this.addLog('error', `æ•¸æ“šæºç‹€æ…‹æ›´æ–°å¤±æ•—: ${error.message}`)\r\n      }\r\n    },\r\n    \r\n    refreshSchedulerStatus() {\r\n      this.status = autoUpdateScheduler.getStatus()\r\n      this.startTime = autoUpdateScheduler.getStartTime()\r\n      this.addLog('info', 'èª¿åº¦å™¨ç‹€æ…‹å·²æ›´æ–°')\r\n    },\r\n    \r\n    updatePerformanceMetrics() {\r\n      const cacheStats = performanceCache.getStats()\r\n      const performanceMetrics = performanceMonitor.getAllMetrics()\r\n      \r\n      // æ¨¡æ“¬æ•ˆèƒ½åˆ†æ•¸è¨ˆç®—\r\n      this.performanceScore = Math.min(100, 60 + (cacheStats.totalSize * 2))\r\n      this.cacheHitRate = Math.min(100, 50 + (cacheStats.totalSize * 3))\r\n      \r\n      this.addLog('info', 'æ•ˆèƒ½æŒ‡æ¨™å·²æ›´æ–°')\r\n    },\r\n    \r\n    updateSystemHealth() {\r\n      const dataSourceHealth = this.dataSourceStatus?.precomputed?.available ? 100 : 70\r\n      const schedulerHealth = this.status.isRunning ? 100 : 50\r\n      \r\n      this.systemHealth = {\r\n        overall: Math.round((dataSourceHealth + this.performanceScore + schedulerHealth) / 3),\r\n        dataSource: dataSourceHealth,\r\n        performance: this.performanceScore,\r\n        updates: schedulerHealth\r\n      }\r\n    },\r\n    \r\n    async toggleScheduler() {\r\n      this.loading = true\r\n      \r\n      try {\r\n        if (this.status.isRunning) {\r\n          autoUpdateScheduler.stop()\r\n          this.addLog('info', 'è‡ªå‹•æ›´æ–°èª¿åº¦å™¨å·²åœæ­¢')\r\n        } else {\r\n          autoUpdateScheduler.start()\r\n          this.addLog('info', 'è‡ªå‹•æ›´æ–°èª¿åº¦å™¨å·²å•Ÿå‹•')\r\n        }\r\n        \r\n        this.refreshSchedulerStatus()\r\n      } catch (error) {\r\n        this.addLog('error', `èª¿åº¦å™¨æ“ä½œå¤±æ•—: ${error.message}`)\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n    \r\n    async triggerUpdate(type) {\r\n      this.loading = true\r\n      this.addLog('info', `è§¸ç™¼ ${type} æ›´æ–°...`)\r\n      \r\n      try {\r\n        if (type === 'technicalIndicators') {\r\n          // æ¸…é™¤æŠ€è¡“æŒ‡æ¨™å¿«å–\r\n          performanceCache.clear()\r\n          this.addLog('info', 'æŠ€è¡“æŒ‡æ¨™å¿«å–å·²æ¸…é™¤')\r\n        } else if (type === 'metadata') {\r\n          // æ¸…é™¤å…ƒæ•¸æ“šå¿«å–\r\n          performanceCache.clear()\r\n          this.addLog('info', 'å…ƒæ•¸æ“šå¿«å–å·²æ¸…é™¤')\r\n        }\r\n        \r\n        await this.refreshDataSources()\r\n      } catch (error) {\r\n        this.addLog('error', `${type} æ›´æ–°å¤±æ•—: ${error.message}`)\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n    \r\n    async clearAllCaches() {\r\n      if (!confirm('ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰å¿«å–å—ï¼Ÿé€™å°‡å½±éŸ¿ç³»çµ±æ•ˆèƒ½ã€‚')) {\r\n        return\r\n      }\r\n      \r\n      this.loading = true\r\n      this.addLog('warning', 'é–‹å§‹æ¸…é™¤æ‰€æœ‰å¿«å–...')\r\n      \r\n      try {\r\n        performanceCache.clear()\r\n        localStorage.clear()\r\n        sessionStorage.clear()\r\n        \r\n        this.addLog('info', 'æ‰€æœ‰å¿«å–å·²æ¸…é™¤')\r\n        await this.refreshAllStatus()\r\n      } catch (error) {\r\n        this.addLog('error', `æ¸…é™¤å¿«å–å¤±æ•—: ${error.message}`)\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n    \r\n    async testSystemHealth() {\r\n      this.testing = true\r\n      this.addLog('info', 'é–‹å§‹ç³»çµ±å¥åº·æª¢æŸ¥...')\r\n      \r\n      try {\r\n        // æ¨¡æ“¬ç³»çµ±å¥åº·æª¢æŸ¥\r\n        await new Promise(resolve => setTimeout(resolve, 2000))\r\n        \r\n        const healthScore = Math.floor(Math.random() * 20) + 80 // 80-100\r\n        this.systemHealth.overall = healthScore\r\n        \r\n        this.addLog('info', `ç³»çµ±å¥åº·æª¢æŸ¥å®Œæˆï¼Œå¾—åˆ†: ${healthScore}%`)\r\n      } catch (error) {\r\n        this.addLog('error', `ç³»çµ±å¥åº·æª¢æŸ¥å¤±æ•—: ${error.message}`)\r\n      } finally {\r\n        this.testing = false\r\n      }\r\n    },\r\n    \r\n    updatePreferences() {\r\n      // æ›´æ–°æ··åˆ API åå¥½è¨­å®š\r\n      hybridTechnicalIndicatorsAPI.setPreferences({\r\n        preferPrecomputed: this.preferences.preferPrecomputed,\r\n        fallbackToRealtime: this.preferences.fallbackToRealtime\r\n      })\r\n      \r\n      this.addLog('info', 'ç³»çµ±åå¥½è¨­å®šå·²æ›´æ–°')\r\n    },\r\n    \r\n    startStatusUpdates() {\r\n      // æ¯ 30 ç§’æ›´æ–°ä¸€æ¬¡ç‹€æ…‹\r\n      setInterval(() => {\r\n        if (!this.loading) {\r\n          this.refreshSchedulerStatus()\r\n          this.updatePerformanceMetrics()\r\n          this.updateSystemHealth()\r\n        }\r\n      }, 30000)\r\n    },\r\n    \r\n    // å·¥å…·æ–¹æ³•\r\n    getHealthStatus(score) {\r\n      if (score >= 90) return 'å„ªç§€'\r\n      if (score >= 80) return 'è‰¯å¥½'\r\n      if (score >= 70) return 'ä¸€èˆ¬'\r\n      return 'éœ€è¦é—œæ³¨'\r\n    },\r\n    \r\n    getDataAgeClass(age) {\r\n      const hours = age / (1000 * 60 * 60)\r\n      if (hours < 1) return 'fresh'\r\n      if (hours < 6) return 'stale'\r\n      return 'very-stale'\r\n    },\r\n    \r\n    formatTime(timestamp) {\r\n      if (!timestamp) return 'N/A'\r\n      return new Date(timestamp).toLocaleString('zh-TW')\r\n    },\r\n    \r\n    formatDataAge(age) {\r\n      if (!age) return 'N/A'\r\n      \r\n      const minutes = Math.floor(age / (1000 * 60))\r\n      const hours = Math.floor(minutes / 60)\r\n      const days = Math.floor(hours / 24)\r\n      \r\n      if (days > 0) return `${days} å¤©å‰`\r\n      if (hours > 0) return `${hours} å°æ™‚å‰`\r\n      return `${minutes} åˆ†é˜å‰`\r\n    },\r\n    \r\n    addLog(level, message) {\r\n      this.systemLogs.push({\r\n        id: ++this.logIdCounter,\r\n        timestamp: new Date().toISOString(),\r\n        level,\r\n        message\r\n      })\r\n      \r\n      // ä¿æŒæœ€å¤š 100 æ¢æ—¥èªŒ\r\n      if (this.systemLogs.length > 100) {\r\n        this.systemLogs = this.systemLogs.slice(-100)\r\n      }\r\n    },\r\n    \r\n    clearLogs() {\r\n      this.systemLogs = []\r\n      this.logIdCounter = 0\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.system-manager {\r\n  padding: 1rem;\r\n  max-width: 1400px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.manager-header {\r\n  text-align: center;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.manager-header h2 {\r\n  color: #333;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.manager-header p {\r\n  color: #666;\r\n  font-size: 1.1rem;\r\n}\r\n\r\n/* ç¸½è¦½å€åŸŸ */\r\n.overview-section {\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.overview-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\r\n  gap: 1rem;\r\n}\r\n\r\n.overview-card {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  padding: 1.5rem;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 1rem;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.overview-card.healthy {\r\n  border-color: #28a745;\r\n  background: linear-gradient(135deg, #f8fff9 0%, #ffffff 100%);\r\n}\r\n\r\n.card-icon {\r\n  font-size: 2rem;\r\n  opacity: 0.8;\r\n}\r\n\r\n.card-content h3 {\r\n  margin: 0 0 0.5rem 0;\r\n  color: #333;\r\n  font-size: 1rem;\r\n}\r\n\r\n.health-score, .performance-score {\r\n  font-size: 1.8rem;\r\n  font-weight: bold;\r\n  color: #28a745;\r\n}\r\n\r\n.health-status, .performance-info, .update-info {\r\n  font-size: 0.9rem;\r\n  color: #666;\r\n}\r\n\r\n.data-sources {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.25rem;\r\n}\r\n\r\n.source-item {\r\n  font-size: 0.9rem;\r\n  padding: 0.25rem 0;\r\n}\r\n\r\n.source-item.active {\r\n  color: #28a745;\r\n}\r\n\r\n.update-status {\r\n  font-size: 1.2rem;\r\n  font-weight: bold;\r\n}\r\n\r\n.update-status.success {\r\n  color: #28a745;\r\n}\r\n\r\n.update-status.error {\r\n  color: #dc3545;\r\n}\r\n\r\n/* è©³ç´°å€åŸŸ */\r\n.details-section {\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.details-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));\r\n  gap: 1.5rem;\r\n}\r\n\r\n.detail-card {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  padding: 1.5rem;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 1rem;\r\n  padding-bottom: 0.75rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.card-header h3 {\r\n  margin: 0;\r\n  color: #333;\r\n  font-size: 1.1rem;\r\n}\r\n\r\n.data-source-list, .update-details {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1rem;\r\n}\r\n\r\n.source-item, .update-item {\r\n  border: 1px solid #f0f0f0;\r\n  border-radius: 6px;\r\n  padding: 1rem;\r\n}\r\n\r\n.source-item.available, .update-item {\r\n  border-color: #d4edda;\r\n  background: #f8fff9;\r\n}\r\n\r\n.source-header, .update-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 0.75rem;\r\n}\r\n\r\n.source-header h4, .update-header h4 {\r\n  margin: 0;\r\n  font-size: 1rem;\r\n  color: #333;\r\n}\r\n\r\n.status-badge {\r\n  padding: 0.25rem 0.5rem;\r\n  border-radius: 4px;\r\n  font-size: 0.8rem;\r\n  font-weight: bold;\r\n}\r\n\r\n.status-badge.success {\r\n  background: #d4edda;\r\n  color: #155724;\r\n}\r\n\r\n.status-badge.error {\r\n  background: #f8d7da;\r\n  color: #721c24;\r\n}\r\n\r\n.status-indicator {\r\n  padding: 0.25rem 0.5rem;\r\n  border-radius: 4px;\r\n  font-size: 0.8rem;\r\n  font-weight: bold;\r\n}\r\n\r\n.status-indicator.success {\r\n  background: #d4edda;\r\n  color: #155724;\r\n}\r\n\r\n.source-details, .update-info {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.detail-row {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.detail-row span:first-child {\r\n  color: #666;\r\n}\r\n\r\n.detail-row span:last-child {\r\n  font-weight: 500;\r\n  color: #333;\r\n}\r\n\r\n.detail-row .fresh {\r\n  color: #28a745;\r\n}\r\n\r\n.detail-row .stale {\r\n  color: #ffc107;\r\n}\r\n\r\n.detail-row .very-stale {\r\n  color: #dc3545;\r\n}\r\n\r\n.update-actions {\r\n  margin-top: 0.75rem;\r\n  display: flex;\r\n  gap: 0.5rem;\r\n}\r\n\r\n/* æ§åˆ¶é¢æ¿ */\r\n.control-section {\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.control-header {\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.control-header h3 {\r\n  color: #333;\r\n  margin: 0;\r\n}\r\n\r\n.control-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\r\n  gap: 1rem;\r\n}\r\n\r\n.control-btn {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 0.5rem;\r\n  padding: 1rem;\r\n  border: none;\r\n  border-radius: 6px;\r\n  font-size: 1rem;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.control-btn:disabled {\r\n  opacity: 0.6;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.control-btn.primary {\r\n  background: #007bff;\r\n  color: white;\r\n}\r\n\r\n.control-btn.primary:hover:not(:disabled) {\r\n  background: #0056b3;\r\n}\r\n\r\n.control-btn.warning {\r\n  background: #ffc107;\r\n  color: #212529;\r\n}\r\n\r\n.control-btn.warning:hover:not(:disabled) {\r\n  background: #e0a800;\r\n}\r\n\r\n.control-btn.info {\r\n  background: #17a2b8;\r\n  color: white;\r\n}\r\n\r\n.control-btn.info:hover:not(:disabled) {\r\n  background: #138496;\r\n}\r\n\r\n.control-btn.secondary {\r\n  background: #6c757d;\r\n  color: white;\r\n}\r\n\r\n.control-btn.secondary:hover:not(:disabled) {\r\n  background: #545b62;\r\n}\r\n\r\n.btn-icon {\r\n  font-size: 1.1rem;\r\n}\r\n\r\n/* é€²éšè¨­å®š */\r\n.advanced-section {\r\n  margin-bottom: 2rem;\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  padding: 1.5rem;\r\n}\r\n\r\n.advanced-header {\r\n  margin-bottom: 1rem;\r\n  padding-bottom: 0.75rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.advanced-header h3 {\r\n  margin: 0;\r\n  color: #333;\r\n}\r\n\r\n.settings-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\r\n  gap: 1.5rem;\r\n}\r\n\r\n.setting-group {\r\n  border: 1px solid #f0f0f0;\r\n  border-radius: 6px;\r\n  padding: 1rem;\r\n}\r\n\r\n.setting-group h4 {\r\n  margin: 0 0 1rem 0;\r\n  color: #333;\r\n  font-size: 1rem;\r\n}\r\n\r\n.setting-item {\r\n  margin-bottom: 0.75rem;\r\n}\r\n\r\n.setting-item:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.setting-item label {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  font-size: 0.9rem;\r\n  color: #333;\r\n  cursor: pointer;\r\n}\r\n\r\n.setting-item select {\r\n  padding: 0.25rem 0.5rem;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n/* ç³»çµ±æ—¥èªŒ */\r\n.logs-section {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  padding: 1.5rem;\r\n}\r\n\r\n.logs-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 1rem;\r\n  padding-bottom: 0.75rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.logs-header h3 {\r\n  margin: 0;\r\n  color: #333;\r\n}\r\n\r\n.logs-container {\r\n  max-height: 300px;\r\n  overflow-y: auto;\r\n  background: #f8f9fa;\r\n  border-radius: 4px;\r\n  padding: 1rem;\r\n}\r\n\r\n.log-entry {\r\n  display: flex;\r\n  gap: 1rem;\r\n  padding: 0.5rem 0;\r\n  border-bottom: 1px solid #e9ecef;\r\n  font-size: 0.9rem;\r\n  font-family: 'Courier New', monospace;\r\n}\r\n\r\n.log-entry:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.log-entry.info {\r\n  color: #17a2b8;\r\n}\r\n\r\n.log-entry.warning {\r\n  color: #ffc107;\r\n}\r\n\r\n.log-entry.error {\r\n  color: #dc3545;\r\n}\r\n\r\n.log-time {\r\n  color: #666;\r\n  white-space: nowrap;\r\n}\r\n\r\n.log-level {\r\n  font-weight: bold;\r\n  min-width: 60px;\r\n}\r\n\r\n.log-message {\r\n  flex: 1;\r\n}\r\n\r\n.no-logs {\r\n  text-align: center;\r\n  color: #666;\r\n  font-style: italic;\r\n}\r\n\r\n/* æŒ‰éˆ•æ¨£å¼ */\r\n.btn {\r\n  padding: 0.5rem 1rem;\r\n  border: none;\r\n  border-radius: 4px;\r\n  font-size: 0.9rem;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.btn:disabled {\r\n  opacity: 0.6;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.btn-sm {\r\n  padding: 0.25rem 0.75rem;\r\n  font-size: 0.8rem;\r\n}\r\n\r\n.btn-primary {\r\n  background: #007bff;\r\n  color: white;\r\n}\r\n\r\n.btn-primary:hover:not(:disabled) {\r\n  background: #0056b3;\r\n}\r\n\r\n.btn-success {\r\n  background: #28a745;\r\n  color: white;\r\n}\r\n\r\n.btn-success:hover:not(:disabled) {\r\n  background: #1e7e34;\r\n}\r\n\r\n.btn-warning {\r\n  background: #ffc107;\r\n  color: #212529;\r\n}\r\n\r\n.btn-warning:hover:not(:disabled) {\r\n  background: #e0a800;\r\n}\r\n\r\n/* éŸ¿æ‡‰å¼è¨­è¨ˆ */\r\n@media (max-width: 768px) {\r\n  .overview-grid {\r\n    grid-template-columns: 1fr;\r\n  }\r\n  \r\n  .details-grid {\r\n    grid-template-columns: 1fr;\r\n  }\r\n  \r\n  .control-grid {\r\n    grid-template-columns: 1fr;\r\n  }\r\n  \r\n  .settings-grid {\r\n    grid-template-columns: 1fr;\r\n  }\r\n}\r\n</style>","import { createApp } from 'vue'\nimport { createRouter, createWebHashHistory } from 'vue-router'\nimport App from './App.vue'\nimport './style.css'\n\n// Import performance utilities\nimport '@/utils/widgetPreloader'\n\n// Import and initialize auto-update scheduler\nimport { autoUpdateScheduler } from '@/utils/autoUpdateScheduler.js'\n\n// Import cache warmup service\nimport { cacheWarmupService } from '@/utils/cacheWarmupService.js'\n\n// Import pages\nimport MarketDashboard from './pages/MarketDashboard.vue'\nimport StockDashboard from './pages/StockDashboard.vue'\nimport Settings from './pages/Settings.vue'\nimport StockDetail from './pages/StockDetail.vue'\nimport TopStoriesTest from './pages/TopStoriesTest.vue'\nimport StockMarketInsightTest from './pages/StockMarketInsightTest.vue'\nimport YahooFinanceTest from './pages/YahooFinanceTest.vue'\nimport TechnicalIndicatorsValidation from './pages/TechnicalIndicatorsValidation.vue'\nimport MetadataServiceTest from './pages/MetadataServiceTest.vue'\nimport ProxyDiagnosticTest from './pages/ProxyDiagnosticTest.vue'\n\nimport TechnicalIndicatorsManager from './pages/TechnicalIndicatorsManager.vue'\nimport AutoUpdateMonitor from './pages/AutoUpdateMonitor.vue'\nimport SystemManager from './pages/SystemManager.vue'\n\n// Router configuration\nconst routes = [\n  { path: '/', redirect: '/market-overview' },\n  { path: '/market-overview', component: MarketDashboard, name: 'market-overview' },\n  { path: '/stock-overview', component: StockDashboard, name: 'stock-overview' },\n  { path: '/stock-overview/symbols/:symbol', component: StockDetail, name: 'stock-detail' },\n  // Legacy redirects for backward compatibility\n  { path: '/market-dashboard', redirect: '/market-overview' },\n  { path: '/stock-dashboard', redirect: '/stock-overview' },\n  { path: '/stock-dashboard/symbols/:symbol', redirect: to => `/stock-overview/symbols/${to.params.symbol}` },\n  { path: '/settings', component: Settings, name: 'settings' },\n  // Development/Testing pages\n  { path: '/top-stories-test', component: TopStoriesTest, name: 'top-stories-test' },\n  { path: '/stock-market-insight-test', component: StockMarketInsightTest, name: 'stock-market-insight-test' },\n  { path: '/yahoo-finance-test', component: YahooFinanceTest, name: 'yahoo-finance-test' },\n  { path: '/proxy-diagnostic', component: ProxyDiagnosticTest, name: 'proxy-diagnostic' },\n  { path: '/technical-validation', component: TechnicalIndicatorsValidation, name: 'technical-validation' },\n  { path: '/metadata-test', component: MetadataServiceTest, name: 'metadata-test' },\n  { path: '/technical-manager', component: TechnicalIndicatorsManager, name: 'technical-manager' },\n  { path: '/auto-update-monitor', component: AutoUpdateMonitor, name: 'auto-update-monitor' },\n  { path: '/system-manager', component: SystemManager, name: 'system-manager' },\n  // Catch-all route for 404s\n  { path: '/:pathMatch(.*)*', redirect: '/market-overview' }\n]\n\nconst router = createRouter({\n  history: createWebHashHistory(),\n  routes\n})\n\nconst app = createApp(App)\napp.use(router)\napp.mount('#app')\n\n// Initialize auto-update scheduler after app is mounted\n// Delay startup to avoid interfering with initial page load\nsetTimeout(() => {\n  console.log('ğŸš€ Initializing auto-update scheduler...')\n  autoUpdateScheduler.start()\n}, 10000) // Start after 10 seconds\n\n// Initialize cache warmup service\n// Start earlier to preload data before users navigate\nsetTimeout(() => {\n  console.log('ğŸ”¥ Initializing cache warmup service...')\n  cacheWarmupService.start()\n}, 5000) // Start after 5 seconds\n"],"names":["_sfc_main","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_openBlock","_createElementBlock","_createElementVNode","_createVNode","_component_router_link","_cache","_renderSlot","_ctx","Layout","_component_Layout","_component_router_view","WidgetPreloader","scriptUrl","promise","resolve","reject","link","scripts","script","error","widgetPreloader","PerformanceMonitor$1","label","startTime","duration","asyncFunction","result","metrics","report","sum","time","slowest","name","fastest","warnings","totalTime","performanceMonitor","PerformanceMonitor","PerformanceCache","key","data","ttl","cacheItem","item","stored","memorySize","localStorageSize","dataLoader","items","results","promises","loader","performanceCache","CACHE_KEYS","AutoUpdateScheduler","intervalId","technicalInterval","metadataInterval","cleanupInterval","basePath","response","index","lastUpdate","ageHours","cachedMetadata","keysToRemove","i","stats","statsAfter","updateType","originalError","config","retryError","now","estTime","hour","updateWindow","isInWindow","date","parts","year","p","month","day","minute","second","autoUpdateScheduler","PrecomputedIndicatorsAPI","hostname","pathname","indexResponse","symbol","cacheKey","cached","latestDate","dataUrl","indicators","computedAt","computed","diffMs","diffHours","diffMinutes","value","precomputedIndicatorsAPI","TechnicalIndicatorsCache","today","cachedData","parsed","cacheData","technicalIndicatorsCache","EPSILON","clampRSI","rsi","rollingMax","values","period","max","j","rollingMin","min","sma","nanPolicy","minPeriods","L","t","window","v","validValues","ema","alpha","initMode","firstValidIndex","k","recentWindow","wilderSmoothing","count","validIndices","initIndex","validCount","calculateMA","close","calculateSMA","calculateIchimokuBaseLine","high","low","hh","ll","calculateIchimokuConversionLine","calculateIchimokuLaggingSpan","shift","calculateVWMA","volume","numerator","denominator","calculateRSI","delta","gain","loss","avgGain","avgLoss","avgGainValue","avgLossValue","calculateADX","length","validOHLCCount","upMove","downMove","plusDM","minusDM","tr","tr1","tr2","tr3","smTR","smPlusDM","smMinusDM","plusDI","minusDI","dx","smTRValue","smPlusDMValue","smMinusDMValue","diSum","adx","adxResult","finalValidADX","calculateMACD","fastPeriod","slowPeriod","signalPeriod","emaFast","emaSlow","macd","signal","histogram","calculateAllIndicators","ohlcv","open","macdResult","YahooFinanceAPI","freshData","proxyIndex","proxy","targetUrl","url","quotes","rawData","validDataPoints","coreResults","getLastValue","series","createIndicatorResult","signalThresholds","lastValue","currentPrice","adxValue","macdValue","signalValue","histValue","_a","_b","longCacheTimeout","summaryProfile","price","keyStats","stockInfo","defaultInfo","nasdaqSymbols","nyseSymbols","marketCap","apiCacheStats","yahooFinanceAPI","HybridTechnicalIndicatorsAPI","precomputedData","realtimeData","validADXCount","errorMessage","originalFallback","originalPrecomputed","symbols","maxConcurrent","batches","batch","batchPromises","status","precomputedIndex","options","hybridTechnicalIndicatorsAPI","CacheWarmupService","shouldWarmup","currentVersion","lastWarmupVersion","lastWarmupTime","timeSinceLastWarmup","cacheStats","attempt","batchSize","packageUrl","cachedCount","successful","r","failed","ms","newConfig","cacheWarmupService","WidgetLoadManager","loadFunction","widgetId","priority","task","insertIndex","loadTime","success","taskIndex","cancelledCount","widgetLoadManager","rootMargins","entries","entry","delay","err","container","existingContent","widgetContainer","widgetContent","configJson","timeout","$options","$props","$data","_toDisplayString","args","vixConfig","val","angle","_hoisted_9","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_normalizeClass","_hoisted_8","_hoisted_11","_normalizeStyle","_hoisted_10","_Fragment","_renderList","LazyTradingViewWidget","VixWidget","ZeiiermanFearGreedGauge","MarketOverviewSkeleton","_component_MarketOverviewSkeleton","_component_LazyTradingViewWidget","_component_ZeiiermanFearGreedGauge","_createBlock","_component_VixWidget","StocksConfigService","stock","s","groups","enabledStocks","stocksConfig","WidgetCache","widgetType","exchange","firstKey","widgetCache","loadPromise","baseTimeouts","retryCount","timeoutDuration","maxRetries","backoffDelay","_withDirectives","bullishSignals","bearishSignals","indicatorValue","diff","diffPercent","sign","_c","_d","_f","_e","_h","_g","_j","_i","_l","_k","_n","_m","_p","_o","_r","_q","_t","_s","_v","_u","_x","_w","_z","_y","_B","_A","_D","_C","_F","_E","_H","_G","_J","_I","_L","_K","_N","_M","_P","_O","_R","_Q","_T","_S","_V","_U","_X","_W","_Z","_Y","_$","__","_ba","_aa","_da","_ca","_fa","_ea","_ha","_ga","_ja","_ia","_la","_ka","_na","_ma","_pa","_oa","_ra","_qa","_ta","_sa","_va","_ua","_xa","_wa","_za","_ya","_Ba","_Aa","_Da","_Ca","FastTradingViewWidget","TechnicalAnalysisWidget","TechnicalIndicators","industry","_component_FastTradingViewWidget","_component_TechnicalAnalysisWidget","_component_TechnicalIndicators","sectorNode","total","industryNode","symbolNode","$event","TOCTree","query","filteredSector","filteredIndustry","text","newValue","_component_TOCTree","NavigationService","smooth","targetId","targetElement","prefersReducedMotion","scrollTop","currentScrollTop","scrollDistance","distanceThreshold","shouldUseInstant","shouldUseSmooth","header","lastScrollTop","scrollEndTimer","checkScrollEnd","navigationService","ScrollSpyService","elements","callback","element","visibleElements","activeSymbol","viewportCenter","bestElement","bestScore","score","elementInfo","intersectionRatio","boundingClientRect","elementCenter","centerScore","rect","viewportHeight","visibleTop","visibleBottom","scrollSpyService","StockCard","NavigationPanel","quote","symbolMetadata","m","symbolDailyData","d","sector","sectorPriority","industryPriority","sortedGroups","sectorIndustryPriority","industryGroups","sortedStocks","sortedIndustryStocks","a","b","marketCapA","marketCapB","tree","sectorName","stocks","industryName","industryStocks","map","quotesResponse","quotesData","dailyResponse","metadataResponse","timeString","exchangeCode","str","sectionId","expanded","sectionsArray","saved","focusSymbol","stockCardElements","_component_NavigationPanel","group","_createTextVNode","_component_StockCard","totalBytes","used","hasDebug","event","observer","list","widget","path","blob","StockOverview","_component_PerformanceMonitor","_component_StockOverview","corsProxies","timestamp","diffDays","maxLength","article","DateTimeString","z.string","StaleLevel","z.enum","MarketState","PriceType","BriefSource","QualityFlag","ConfidenceLevel","z.union","z.literal","SystemStatusType","JobStatusType","HoldingDataSchema","z.object","z.number","UserSettingsSchema","z.boolean","ImportResultSchema","DiagnosticsDataSchema","DailySnapshotSchema","z.lazy","DailySnapshotSchemaImpl","QuotesSnapshotSchema","QuotesSnapshotSchemaImpl","MetadataSnapshotSchema","MetadataSnapshotSchemaImpl","CacheDataSchema","UserStateSchema","z.array","z.record","QuoteItemSchema","QuotesMetadataSchema","NewsItemSchema","SymbolDataSchema","MarketsIndicatorSchema","MacroDataSchema","GenerationMetadataSchema","SymbolMetadataSchema","ConfidenceDistributionSchema","RefreshMetadataSchema","JobStatusSchema","FreshnessInfoSchema","QuotaInfoSchema","StorageInfoSchema","ApiLimitInfoSchema","SystemHealthSchema","DegradationStatusSchema","SystemStatusSchema","ValidationRulesSchema","MarketsIndicatorDefinitionSchema","ScrapingSettingsSchema","validateData","schema","z.ZodError","validateUserState","validateQuotesSnapshot","validateDailySnapshot","validateMetadataSnapshot","validateSystemStatus","validateImportData","allowedKeys","unknownKeys","_StateManager","migrated","validation","state","jsonData","dryRun","finalValidation","saveResult","newState","currentState","newWatchlist","avgCost","shares","newHoldings","settings","cache","test","__publicField","StateManager","DataFetcher","baseUrl","cacheBustingEnabled","statusResult","cacheBuster","userState","targetDate","asOfString","asOf","ageMinutes","getBaseUrl","dataFetcher","DynamicMetadataService","metadata","fallbackData","batchResults","metadataMap","sectorGrouping","distribution","confidence","array","dynamicMetadataService","MetadataService","useDynamic","defaultMetadata","fetcherError","crmData","metadataService","DirectMetadataLoader","symbolData","directMetadataLoader","MarketRegimeWidget","TradingStrategyWidget","TradingViewCompanyProfile","TradingViewFundamentalData","StockNews","StockDetailSkeleton","_component_StockDetailSkeleton","_component_MarketRegimeWidget","_component_TradingStrategyWidget","_component_StockNews","_component_TradingViewFundamentalData","_component_TradingViewCompanyProfile","TradingViewTopStories","TopStoriesSkeleton","_component_TopStoriesSkeleton","_component_TradingViewTopStories","dailyConfig","weeklyConfig","StockMarketInsight","StockMarketInsightSkeleton","_component_StockMarketInsightSkeleton","_component_StockMarketInsight","dateString","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_53","_withKeys","_hoisted_42","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_54","comp","working","current","testUrl","closes","chartUrl","chartResponse","dataPoints","quoteUrl","quoteResponse","profile","testSymbols","maxAge","bytes","sizes","_vModelCheckbox","message","level","log","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60","_hoisted_61","_hoisted_62","_hoisted_63","_hoisted_64","_hoisted_65","_hoisted_67","_hoisted_68","_hoisted_69","_hoisted_72","_hoisted_73","_hoisted_74","_hoisted_75","_hoisted_76","_hoisted_78","_hoisted_79","_hoisted_80","_hoisted_81","_hoisted_82","_hoisted_83","_hoisted_84","_hoisted_85","_hoisted_66","_hoisted_70","_hoisted_71","_hoisted_77","dataSourceHealth","schedulerHealth","type","healthScore","age","hours","minutes","days","_vModelSelect","routes","MarketDashboard","StockDashboard","StockDetail","to","Settings","TopStoriesTest","StockMarketInsightTest","YahooFinanceTest","ProxyDiagnosticTest","TechnicalIndicatorsValidation","MetadataServiceTest","TechnicalIndicatorsManager","AutoUpdateMonitor","SystemManager","router","createRouter","createWebHashHistory","app","createApp","App"],"mappings":"yxCAmDKA,GAAU,CACb,KAAM,QACR,EApDOC,GAAA,CAAA,MAAM,QAAQ,EACTC,GAAA,CAAA,MAAM,QAAQ,EACfC,GAAA,CAAA,MAAM,KAAK,EACTC,GAAA,CAAA,MAAM,WAAW,EAIhBC,GAAA,CAAA,MAAM,UAAU,EAmBpBC,GAAA,CAAA,MAAM,cAAc,EACnBC,GAAA,CAAA,MAAM,WAAW,oDA3B1B,OAAAC,EAAA,EAAAC,EA8CM,MA9CNR,GA8CM,CA7CJS,EAuBS,SAvBTR,GAuBS,CAtBPQ,EAqBM,MArBNP,GAqBM,CApBJO,EAmBM,MAnBNN,GAmBM,aAlBJM,EAEM,MAAA,CAFD,MAAM,aAAW,CACpBA,EAA6B,UAAzB,sBAAoB,QAE1BA,EAcK,KAdLL,GAcK,CAbHK,EAEK,KAAA,KAAA,CADHC,EAAiFC,EAAA,CAApE,GAAG,mBAAmB,MAAM,wBAAW,IAAe,CAAA,GAAAC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAAf,kBAAe,EAAA,cAErEH,EAEK,KAAA,KAAA,CADHC,EAA+EC,EAAA,CAAlE,GAAG,kBAAkB,MAAM,wBAAW,IAAc,CAAA,GAAAC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAAd,iBAAc,EAAA,cAMnEH,EAEK,KAAA,KAAA,CADHC,EAA8EC,EAAA,CAAjE,GAAG,kBAAkB,MAAM,wBAAW,IAAa,CAAA,GAAAC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAAb,gBAAa,EAAA,sBAO1EH,EAIO,OAJPJ,GAIO,CAHLI,EAEM,MAFNH,GAEM,CADJO,GAAQC,EAAA,OAAA,UAAA,CAAA,EAAA,MAAA,6jBClBXf,GAAU,CACb,KAAM,MACN,WAAY,CACV,OAAAgB,EACF,CACF,EAfOf,GAAA,CAAA,GAAG,KAAK,kEAAb,OAAAO,EAAA,EAAAC,EAIM,MAJNR,GAIM,CAHJU,EAESM,EAAA,KAAA,YADP,IAAe,CAAfN,EAAeO,CAAA,2CCErB,MAAMC,EAAgB,CACpB,aAAc,CACZ,KAAK,iBAAmB,IAAI,IAC5B,KAAK,eAAiB,IAAI,GAC5B,CAKA,cAAcC,EAAW,CACvB,GAAI,KAAK,iBAAiB,IAAIA,CAAS,EACrC,OAAO,QAAQ,QAAO,EAGxB,GAAI,KAAK,eAAe,IAAIA,CAAS,EACnC,OAAO,KAAK,eAAe,IAAIA,CAAS,EAG1C,MAAMC,EAAU,IAAI,QAAQ,CAACC,EAASC,IAAW,CAC/C,MAAMC,EAAO,SAAS,cAAc,MAAM,EAC1CA,EAAK,IAAM,UACXA,EAAK,GAAK,SACVA,EAAK,KAAOJ,EACZI,EAAK,YAAc,YAEnBA,EAAK,OAAS,IAAM,CAClB,KAAK,iBAAiB,IAAIJ,CAAS,EACnCE,EAAO,CACT,EAEAE,EAAK,QAAU,IAAM,CACnBD,EAAO,IAAI,MAAM,6BAA6BH,CAAS,EAAE,CAAC,CAC5D,EAEA,SAAS,KAAK,YAAYI,CAAI,CAChC,CAAC,EAED,YAAK,eAAe,IAAIJ,EAAWC,CAAO,EACnCA,CACT,CAKA,MAAM,mBAAoB,CACxB,MAAMI,EAAU,CACd,gFACA,kFACN,EAEI,GAAI,CACF,MAAM,QAAQ,IAAIA,EAAQ,IAAIC,GAAU,KAAK,cAAcA,CAAM,CAAC,CAAC,EACnE,QAAQ,IAAI,gDAAgD,CAC9D,OAASC,EAAO,CACd,QAAQ,KAAK,8CAA+CA,CAAK,CACnE,CACF,CAKA,YAAYP,EAAW,CACrB,OAAO,KAAK,iBAAiB,IAAIA,CAAS,CAC5C,CACF,CAGO,MAAMQ,GAAkB,IAAIT,GAG/B,OAAO,OAAW,KACpB,OAAO,iBAAiB,OAAQ,IAAM,CAEpC,WAAW,IAAM,CACfS,GAAgB,kBAAiB,CACnC,EAAG,GAAI,CACT,CAAC,EC9EH,IAAAC,GAAA,KAAyB,CACvB,aAAc,CACZ,KAAK,QAAU,IAAI,IACnB,KAAK,WAAa,IAAI,GACxB,CAGA,MAAMC,EAAO,CACX,KAAK,WAAW,IAAIA,EAAO,YAAY,IAAG,CAAE,EAC5C,QAAQ,IAAI,sBAAsBA,CAAK,EAAE,CAC3C,CAGA,IAAIA,EAAO,CACT,MAAMC,EAAY,KAAK,WAAW,IAAID,CAAK,EAC3C,GAAI,CAACC,EACH,eAAQ,KAAK,4BAA4BD,CAAK,EAAE,EACzC,KAGT,MAAME,EAAW,YAAY,IAAG,EAAKD,EACrC,YAAK,QAAQ,IAAID,EAAOE,CAAQ,EAChC,KAAK,WAAW,OAAOF,CAAK,EAE5B,QAAQ,IAAI,gBAAgBA,CAAK,MAAME,EAAS,QAAQ,CAAC,CAAC,IAAI,EACvDA,CACT,CAGA,UAAUF,EAAO,CACf,OAAO,KAAK,QAAQ,IAAIA,CAAK,CAC/B,CAGA,eAAgB,CACd,OAAO,OAAO,YAAY,KAAK,OAAO,CACxC,CAGA,OAAQ,CACN,KAAK,QAAQ,MAAK,EAClB,KAAK,WAAW,MAAK,CACvB,CAGA,MAAM,aAAaA,EAAOG,EAAe,CACvC,KAAK,MAAMH,CAAK,EAChB,GAAI,CACF,MAAMI,EAAS,MAAMD,EAAa,EAClC,YAAK,IAAIH,CAAK,EACPI,CACT,OAASP,EAAO,CACd,WAAK,IAAIG,CAAK,EACd,QAAQ,MAAM,cAAcA,CAAK,IAAKH,CAAK,EACrCA,CACR,CACF,CAGA,gBAAiB,CACf,MAAMQ,EAAU,KAAK,cAAa,EAC5BC,EAAS,CACb,UAAW,IAAI,KAAI,EAAG,YAAW,EACjC,QAAAD,EACA,QAAS,CACP,gBAAiB,OAAO,KAAKA,CAAO,EAAE,OACtC,UAAW,OAAO,OAAOA,CAAO,EAAE,OAAO,CAACE,EAAKC,IAASD,EAAMC,EAAM,CAAC,EACrE,YAAa,OAAO,OAAOH,CAAO,EAAE,OAAO,CAACE,EAAKC,IAASD,EAAMC,EAAM,CAAC,EAAI,OAAO,KAAKH,CAAO,EAAE,QAAU,EAC1G,iBAAkB,KAAK,oBAAmB,EAC1C,iBAAkB,KAAK,oBAAmB,CAClD,CACA,EAEI,eAAQ,IAAI,yBAA0BC,CAAM,EACrCA,CACT,CAGA,qBAAsB,CACpB,IAAIG,EAAU,CAAE,KAAM,KAAM,KAAM,CAAC,EACnC,SAAW,CAACC,EAAMF,CAAI,IAAK,KAAK,QAC1BA,EAAOC,EAAQ,OACjBA,EAAU,CAAE,KAAAC,EAAM,KAAAF,CAAI,GAG1B,OAAOC,CACT,CAGA,qBAAsB,CACpB,IAAIE,EAAU,CAAE,KAAM,KAAM,KAAM,GAAQ,EAC1C,SAAW,CAACD,EAAMF,CAAI,IAAK,KAAK,QAC1BA,EAAOG,EAAQ,OACjBA,EAAU,CAAE,KAAAD,EAAM,KAAAF,CAAI,GAG1B,OAAOG,EAAQ,OAAS,IAAW,CAAE,KAAM,KAAM,KAAM,CAAC,EAAKA,CAC/D,CAGA,0BAA2B,CACzB,MAAMC,EAAW,CAAA,EACXP,EAAU,KAAK,cAAa,EAGlC,OAAO,QAAQA,CAAO,EAAE,QAAQ,CAAC,CAACK,EAAMF,CAAI,IAAM,CAC5CA,EAAO,KACTI,EAAS,KAAK,CACZ,KAAM,iBACN,UAAWF,EACX,KAAMF,EACN,QAAS,cAAcE,CAAI,UAAUF,EAAK,QAAQ,CAAC,CAAC,UAC9D,CAAS,CAEL,CAAC,EAGD,MAAMK,EAAY,OAAO,OAAOR,CAAO,EAAE,OAAO,CAACE,EAAKC,IAASD,EAAMC,EAAM,CAAC,EAC5E,OAAIK,EAAY,KACdD,EAAS,KAAK,CACZ,KAAM,kBACN,KAAMC,EACN,QAAS,mBAAmBA,EAAU,QAAQ,CAAC,CAAC,WACxD,CAAO,EAGCD,EAAS,OAAS,GACpB,QAAQ,KAAK,2BAA4BA,CAAQ,EAG5CA,CACT,CACF,EAGO,MAAME,GAAqB,IAAIC,GCvItC,MAAMC,EAAiB,CACrB,aAAc,CACZ,KAAK,YAAc,IAAI,IACvB,KAAK,mBAAqB,8BAC1B,KAAK,WAAa,GAAK,GAAK,GAAK,GACnC,CAGA,IAAIC,EAAKC,EAAMC,EAAM,KAAK,WAAY,CACpC,MAAMC,EAAY,CAChB,KAAAF,EACA,UAAW,KAAK,IAAG,EACnB,IAAAC,CACN,EAGI,KAAK,YAAY,IAAIF,EAAKG,CAAS,EAGnC,GAAI,CACF,aAAa,QACX,KAAK,mBAAqBH,EAC1B,KAAK,UAAUG,CAAS,CAChC,CACI,OAASvB,EAAO,CACd,QAAQ,KAAK,kCAAmCA,CAAK,CACvD,CACF,CAGA,IAAIoB,EAAK,CAEP,GAAI,KAAK,YAAY,IAAIA,CAAG,EAAG,CAC7B,MAAMI,EAAO,KAAK,YAAY,IAAIJ,CAAG,EACrC,GAAI,KAAK,QAAQI,CAAI,EACnB,OAAOA,EAAK,KAEZ,KAAK,YAAY,OAAOJ,CAAG,CAE/B,CAGA,GAAI,CACF,MAAMK,EAAS,aAAa,QAAQ,KAAK,mBAAqBL,CAAG,EACjE,GAAIK,EAAQ,CACV,MAAMD,EAAO,KAAK,MAAMC,CAAM,EAC9B,GAAI,KAAK,QAAQD,CAAI,EAEnB,YAAK,YAAY,IAAIJ,EAAKI,CAAI,EACvBA,EAAK,KAEZ,aAAa,WAAW,KAAK,mBAAqBJ,CAAG,CAEzD,CACF,OAASpB,EAAO,CACd,QAAQ,KAAK,oCAAqCA,CAAK,CACzD,CAEA,OAAO,IACT,CAGA,QAAQwB,EAAM,CACZ,MAAI,CAACA,GAAQ,CAACA,EAAK,UAAkB,GAC9B,KAAK,IAAG,EAAKA,EAAK,UAAYA,EAAK,GAC5C,CAGA,IAAIJ,EAAK,CACP,OAAO,KAAK,IAAIA,CAAG,IAAM,IAC3B,CAGA,OAAOA,EAAK,CACV,KAAK,YAAY,OAAOA,CAAG,EAC3B,GAAI,CACF,aAAa,WAAW,KAAK,mBAAqBA,CAAG,CACvD,OAASpB,EAAO,CACd,QAAQ,KAAK,sCAAuCA,CAAK,CAC3D,CACF,CAGA,OAAQ,CACN,KAAK,YAAY,MAAK,EACtB,GAAI,CACW,OAAO,KAAK,YAAY,EAChC,QAAQoB,GAAO,CACdA,EAAI,WAAW,KAAK,kBAAkB,GACxC,aAAa,WAAWA,CAAG,CAE/B,CAAC,CACH,OAASpB,EAAO,CACd,QAAQ,KAAK,gCAAiCA,CAAK,CACrD,CACF,CAGA,UAAW,CACT,MAAM0B,EAAa,KAAK,YAAY,KACpC,IAAIC,EAAmB,EAEvB,GAAI,CAEFA,EADa,OAAO,KAAK,YAAY,EACb,OAAOP,GAC7BA,EAAI,WAAW,KAAK,kBAAkB,CAC9C,EAAQ,MACJ,OAASpB,EAAO,CACd,QAAQ,KAAK,oCAAqCA,CAAK,CACzD,CAEA,MAAO,CACL,YAAa0B,EACb,aAAcC,EACd,UAAWD,EAAaC,CAC9B,CACE,CAGA,MAAM,QAAQP,EAAKQ,EAAYN,EAAM,KAAK,WAAY,CACpD,GAAI,KAAK,IAAIF,CAAG,EACd,OAAO,KAAK,IAAIA,CAAG,EAGrB,GAAI,CACF,MAAMC,EAAO,MAAMO,EAAU,EAC7B,YAAK,IAAIR,EAAKC,EAAMC,CAAG,EAChBD,CACT,OAASrB,EAAO,CACd,cAAQ,MAAM,kCAAkCoB,CAAG,IAAKpB,CAAK,EACvDA,CACR,CACF,CAGA,MAAM,aAAa6B,EAAO,CACxB,MAAMC,EAAU,IAAI,IACdC,EAAWF,EAAM,IAAI,MAAO,CAAE,IAAAT,EAAK,OAAAY,EAAQ,IAAAV,KAAU,CACzD,GAAI,CACF,MAAMD,EAAO,MAAM,KAAK,QAAQD,EAAKY,EAAQV,CAAG,EAChDQ,EAAQ,IAAIV,EAAKC,CAAI,CACvB,OAASrB,EAAO,CACd,QAAQ,MAAM,qBAAqBoB,CAAG,IAAKpB,CAAK,EAChD8B,EAAQ,IAAIV,EAAK,IAAI,CACvB,CACF,CAAC,EAED,aAAM,QAAQ,IAAIW,CAAQ,EACnBD,CACT,CACF,CAGO,MAAMG,EAAmB,IAAId,GAGvBe,GAAa,CACxB,gBAAiB,kBACjB,eAAgB,iBAChB,eAAgB,iBAChB,eAAgB,iBAChB,oBAAqB,qBACvB,EC/JA,MAAMC,EAAoB,CACxB,aAAc,CACZ,KAAK,gBAAkB,IAAI,IAC3B,KAAK,UAAY,GACjB,KAAK,OAAS,CAEZ,oBAAqB,CACnB,QAAS,GACT,SAAU,GAAK,GAAK,GAAK,IACzB,gBAAiB,GACjB,iBAAkB,CAAE,MAAO,KAAM,IAAK,EAAE,EACxC,cAAe,EACf,WAAY,EAAI,GAAK,GAC7B,EAEM,SAAU,CACR,QAAS,GACT,SAAU,GAAK,GAAK,GAAK,IACzB,gBAAiB,GACjB,iBAAkB,CAAE,MAAO,KAAM,IAAK,EAAE,EACxC,cAAe,EACf,WAAY,GAAK,GAAK,GAC9B,EAEM,aAAc,CACZ,QAAS,GACT,SAAU,EAAI,GAAK,GAAK,IACxB,OAAQ,EAAI,GAAK,GAAK,GAAK,GACnC,CACA,EAGI,KAAK,YAAc,CACjB,UAAW,CAAE,MAAO,EAAG,IAAK,GAAG,EAC/B,QAAS,CAAE,MAAO,IAAK,IAAK,EAAE,EAC9B,YAAa,CAAE,MAAO,GAAI,IAAK,EAAE,CACvC,CACE,CAGA,OAAQ,CACN,GAAI,KAAK,UAAW,CAClB,QAAQ,IAAI,6CAA6C,EACzD,MACF,CAEA,QAAQ,IAAI,sCAAsC,EAClD,KAAK,UAAY,GAGjB,KAAK,qBAAoB,EAGzB,KAAK,gBAAe,EAEpB,QAAQ,IAAI,8CAA8C,CAC5D,CAGA,MAAO,CACL,GAAI,CAAC,KAAK,UAAW,CACnB,QAAQ,IAAI,yCAAyC,EACrD,MACF,CAEA,QAAQ,IAAI,sCAAsC,EAGlD,SAAW,CAACtB,EAAMuB,CAAU,IAAK,KAAK,gBACpC,cAAcA,CAAU,EACxB,QAAQ,IAAI,wBAAwBvB,CAAI,EAAE,EAG5C,KAAK,gBAAgB,MAAK,EAC1B,KAAK,UAAY,GAEjB,QAAQ,IAAI,iCAAiC,CAC/C,CAGA,MAAM,sBAAuB,CAC3B,QAAQ,IAAI,uCAAuC,EAEnD,GAAI,CAEE,KAAK,OAAO,oBAAoB,SAClC,MAAM,KAAK,kCAAiC,EAI1C,KAAK,OAAO,SAAS,SACvB,MAAM,KAAK,uBAAsB,EAI/B,KAAK,OAAO,aAAa,SAC3B,MAAM,KAAK,oBAAmB,CAGlC,OAASb,EAAO,CACd,QAAQ,MAAM,2BAA4BA,CAAK,CACjD,CACF,CAGA,iBAAkB,CAEhB,GAAI,KAAK,OAAO,oBAAoB,QAAS,CAC3C,MAAMqC,EAAoB,YACxB,IAAM,KAAK,kCAAiC,EAC5C,KAAK,OAAO,oBAAoB,QACxC,EACM,KAAK,gBAAgB,IAAI,sBAAuBA,CAAiB,EACjE,QAAQ,IAAI,kDAAkD,KAAK,OAAO,oBAAoB,SAAW,GAAK,UAAU,CAC1H,CAGA,GAAI,KAAK,OAAO,SAAS,QAAS,CAChC,MAAMC,EAAmB,YACvB,IAAM,KAAK,uBAAsB,EACjC,KAAK,OAAO,SAAS,QAC7B,EACM,KAAK,gBAAgB,IAAI,WAAYA,CAAgB,EACrD,QAAQ,IAAI,sCAAsC,KAAK,OAAO,SAAS,SAAW,IAAO,QAAQ,CACnG,CAGA,GAAI,KAAK,OAAO,aAAa,QAAS,CACpC,MAAMC,EAAkB,YACtB,IAAM,KAAK,oBAAmB,EAC9B,KAAK,OAAO,aAAa,QACjC,EACM,KAAK,gBAAgB,IAAI,eAAgBA,CAAe,EACxD,QAAQ,IAAI,oCAAoC,KAAK,OAAO,aAAa,SAAW,IAAO,QAAQ,CACrG,CACF,CAGA,MAAM,mCAAoC,CACxC,MAAMpC,EAAQ,mCACdc,GAAmB,MAAMd,CAAK,EAE9B,GAAI,CAIF,GAHA,QAAQ,IAAI,4CAA4C,EAGpD,KAAK,OAAO,oBAAoB,iBAAmB,CAAC,KAAK,qBAAsB,CACjF,QAAQ,IAAI,oEAAoE,EAChF,MACF,CAIA,GAAI,CADgB,MAAM,KAAK,4BAA2B,EACxC,CAChB,QAAQ,IAAI,uCAAuC,EACnD,MACF,CAEA,QAAQ,IAAI,qCAAqC,EAGjD,MAAM,KAAK,8BAA6B,EAGxC,KAAK,8BAA6B,EAElC,QAAQ,IAAI,6CAA6C,CAE3D,OAASH,EAAO,CACd,QAAQ,MAAM,wCAAyCA,CAAK,EAG5D,MAAM,KAAK,YAAY,sBAAuBA,CAAK,CAErD,QAAC,CACCiB,GAAmB,IAAId,CAAK,CAC9B,CACF,CAGA,MAAM,wBAAyB,CAC7B,MAAMA,EAAQ,uBACdc,GAAmB,MAAMd,CAAK,EAE9B,GAAI,CAKF,GAJA,QAAQ,IAAI,gCAAgC,EAIxC,CADgB,MAAM,KAAK,iBAAgB,EAC7B,CAChB,QAAQ,IAAI,0BAA0B,EACtC,MACF,CAEA,QAAQ,IAAI,yBAAyB,EAGrC,MAAM,KAAK,mBAAkB,EAG7B,KAAK,mBAAkB,EAEvB,QAAQ,IAAI,iCAAiC,CAE/C,OAASH,EAAO,CACd,QAAQ,MAAM,4BAA6BA,CAAK,EAGhD,MAAM,KAAK,YAAY,WAAYA,CAAK,CAE1C,QAAC,CACCiB,GAAmB,IAAId,CAAK,CAC9B,CACF,CAGA,MAAM,6BAA8B,CAClC,GAAI,CAEF,MAAMqC,EAAW,OAAO,SAAS,WAAa,0BAA4B,yBAA2B,IAC/FC,EAAW,MAAM,MAAM,GAAGD,CAAQ,6CAA6C,EACrF,GAAI,CAACC,EAAS,GACZ,eAAQ,IAAI,6CAA6C,EAClD,GAGT,MAAMC,EAAQ,MAAMD,EAAS,KAAI,EAC3BE,EAAa,IAAI,KAAKD,EAAM,WAAW,EAEvCE,GADM,IAAI,KACQD,IAAe,IAAO,GAAK,IAEnD,eAAQ,IAAI,gCAAgCC,EAAS,QAAQ,CAAC,CAAC,QAAQ,EAGhEA,EAAW,EAEpB,OAAS5C,EAAO,CACd,eAAQ,MAAM,2CAA4CA,CAAK,EACxD,EACT,CACF,CAGA,MAAM,kBAAmB,CACvB,GAAI,CAGF,MAAM6C,EAAiBZ,EAAiB,IAAIC,GAAW,cAAc,EACrE,GAAI,CAACW,EACH,MAAO,GAKT,MAAMD,GADW,KAAK,IAAG,EAAKC,EAAe,YAChB,IAAO,GAAK,IAEzC,eAAQ,IAAI,0BAA0BD,EAAS,QAAQ,CAAC,CAAC,QAAQ,EAG1DA,EAAW,EAEpB,OAAS5C,EAAO,CACd,eAAQ,MAAM,+BAAgCA,CAAK,EAC5C,EACT,CACF,CAGA,MAAM,+BAAgC,CAGpC,QAAQ,IAAI,0CAA0C,EACtD,QAAQ,IAAI,+DAA+D,EAO3E,GAAI,CAEF,KAAK,8BAA6B,EAGlC,QAAQ,IAAI,2EAA2E,CAEzF,OAASA,EAAO,CACd,cAAQ,MAAM,yCAA0CA,CAAK,EACvDA,CACR,CACF,CAGA,MAAM,oBAAqB,CAGzBiC,EAAiB,OAAOC,GAAW,cAAc,EACjD,QAAQ,IAAI,6CAA6C,CAC3D,CAGA,+BAAgC,CAC9B,GAAI,CAEF,MAAMY,EAAe,CAAA,EACrB,QAASC,EAAI,EAAGA,EAAI,aAAa,OAAQA,IAAK,CAC5C,MAAM3B,EAAM,aAAa,IAAI2B,CAAC,EAC1B3B,IACFA,EAAI,SAAS,uBAAuB,GACpCA,EAAI,SAAS,cAAc,GAC3BA,EAAI,SAAS,sBAAsB,GACnCA,EAAI,SAAS,mBAAmB,IAEhC0B,EAAa,KAAK1B,CAAG,CAEzB,CAEA0B,EAAa,QAAQ1B,GAAO,CAC1B,aAAa,WAAWA,CAAG,EAC3B,QAAQ,IAAI,0BAA0BA,CAAG,EAAE,CAC7C,CAAC,EAGG,OAAOa,EAAqB,KAAeA,EAAiB,OAE9D,QAAQ,IAAI,qCAAqC,EAGnD,QAAQ,IAAI,aAAaa,EAAa,MAAM,qCAAqC,CAEnF,OAAS9C,EAAO,CACd,QAAQ,MAAM,6CAA8CA,CAAK,CACnE,CACF,CAGA,oBAAqB,CACnBiC,EAAiB,OAAOC,GAAW,cAAc,EACjDD,EAAiB,OAAOC,GAAW,mBAAmB,EACtD,QAAQ,IAAI,+CAA+C,CAC7D,CAGA,MAAM,qBAAsB,CAC1B,QAAQ,IAAI,gCAAgC,EAE5C,GAAI,CACF,MAAMc,EAAQf,EAAiB,SAAQ,EACvC,QAAQ,IAAI,iCAAkCe,CAAK,EAKnD,MAAMC,EAAahB,EAAiB,SAAQ,EAC5C,QAAQ,IAAI,gCAAiCgB,CAAU,EAEvD,QAAQ,IAAI,2BAA2B,CAEzC,OAASjD,EAAO,CACd,QAAQ,MAAM,0BAA2BA,CAAK,CAChD,CACF,CAGA,MAAM,YAAYkD,EAAYC,EAAe,CAC3C,MAAMC,EAAS,KAAK,OAAOF,CAAU,EACjC,CAACE,GAAU,CAACA,EAAO,gBAIvB,QAAQ,IAAI,eAAeF,CAAU,cAAcE,EAAO,WAAa,GAAK,aAAa,EAEzF,WAAW,SAAY,CACrB,GAAI,CACEF,IAAe,sBACjB,MAAM,KAAK,kCAAiC,EACnCA,IAAe,YACxB,MAAM,KAAK,uBAAsB,CAErC,OAASG,EAAY,CACnB,QAAQ,MAAM,sBAAsBH,CAAU,IAAKG,CAAU,CAC/D,CACF,EAAGD,EAAO,UAAU,EACtB,CAGA,oBAAqB,CACnB,MAAME,EAAM,IAAI,KACVC,EAAU,KAAK,aAAaD,CAAG,EAC/BE,EAAOD,EAAQ,SAAQ,EAAKA,EAAQ,WAAU,EAAK,GAGnDE,EAAe,KAAK,OAAO,oBAAoB,iBAC/CC,EAAaF,GAAQC,EAAa,OAASD,GAAQC,EAAa,IAEtE,OAAIC,GACF,QAAQ,IAAI,6BAA6BH,EAAQ,mBAAmB,QAAS,CAAE,SAAU,mBAAoB,CAAC,MAAM,EAG/GG,CACT,CAGA,eAAgB,CACd,MAAMJ,EAAM,IAAI,KACVC,EAAU,KAAK,aAAaD,CAAG,EAC/BE,EAAOD,EAAQ,SAAQ,EAAKA,EAAQ,WAAU,EAAK,GAGzD,OACGC,GAAQ,KAAK,YAAY,UAAU,OAASA,GAAQ,KAAK,YAAY,UAAU,KAC/EA,GAAQ,KAAK,YAAY,QAAQ,OAASA,GAAQ,KAAK,YAAY,QAAQ,KAC3EA,GAAQ,KAAK,YAAY,YAAY,OAASA,GAAQ,KAAK,YAAY,YAAY,GAExF,CAGA,aAAaG,EAAM,CAajB,MAAMC,EAXY,IAAI,KAAK,eAAe,QAAS,CACjD,SAAU,mBACV,KAAM,UACN,MAAO,UACP,IAAK,UACL,KAAM,UACN,OAAQ,UACR,OAAQ,UACR,OAAQ,EACd,CAAK,EAEuB,cAAcD,CAAI,EACpCE,EAAO,SAASD,EAAM,KAAKE,GAAKA,EAAE,OAAS,MAAM,EAAE,KAAK,EACxDC,EAAQ,SAASH,EAAM,KAAKE,GAAKA,EAAE,OAAS,OAAO,EAAE,KAAK,EAAI,EAC9DE,EAAM,SAASJ,EAAM,KAAKE,GAAKA,EAAE,OAAS,KAAK,EAAE,KAAK,EACtDN,EAAO,SAASI,EAAM,KAAKE,GAAKA,EAAE,OAAS,MAAM,EAAE,KAAK,EACxDG,EAAS,SAASL,EAAM,KAAKE,GAAKA,EAAE,OAAS,QAAQ,EAAE,KAAK,EAC5DI,EAAS,SAASN,EAAM,KAAKE,GAAKA,EAAE,OAAS,QAAQ,EAAE,KAAK,EAElE,OAAO,IAAI,KAAKD,EAAME,EAAOC,EAAKR,EAAMS,EAAQC,CAAM,CACxD,CAGA,WAAY,CACV,MAAO,CACL,UAAW,KAAK,UAChB,gBAAiB,MAAM,KAAK,KAAK,gBAAgB,KAAI,CAAE,EACvD,OAAQ,KAAK,OACb,YAAa,KAAK,mBAAkB,CAC1C,CACE,CAGA,oBAAqB,CACnB,MAAMZ,EAAM,KAAK,IAAG,EACpB,MAAO,CACL,oBAAqB,IAAI,KAAKA,EAAM,KAAK,OAAO,oBAAoB,QAAQ,EAC5E,SAAU,IAAI,KAAKA,EAAM,KAAK,OAAO,SAAS,QAAQ,EACtD,aAAc,IAAI,KAAKA,EAAM,KAAK,OAAO,aAAa,QAAQ,CACpE,CACE,CAGA,MAAM,oBAAoBJ,EAAa,MAAO,CAC5C,QAAQ,IAAI,+BAA+BA,CAAU,EAAE,EAEvD,GAAI,EACEA,IAAe,OAASA,IAAe,wBACzC,MAAM,KAAK,kCAAiC,GAG1CA,IAAe,OAASA,IAAe,aACzC,MAAM,KAAK,uBAAsB,GAG/BA,IAAe,OAASA,IAAe,UACzC,MAAM,KAAK,oBAAmB,EAGhC,QAAQ,IAAI,2BAA2B,CAEzC,OAASlD,EAAO,CACd,cAAQ,MAAM,0BAA2BA,CAAK,EACxCA,CACR,CACF,CACF,CAGO,MAAMmE,EAAsB,IAAIhC,GAGnC,OAAO,OAAW,KAAe,OAAO,SAAS,WAAa,aAEhE,WAAW,IAAM,CACfgC,EAAoB,MAAK,CAC3B,EAAG,GAAK,EClfV,MAAMC,EAAyB,CAC7B,aAAc,CAEZ,KAAK,QAAU,KAAK,oBACpB,KAAK,MAAQ,IAAI,IACjB,KAAK,aAAe,GAAK,GAAK,IAG9B,KAAK,WAAa,KAClB,KAAK,oBAAsB,KAC3B,KAAK,kBAAoB,GAAK,GAAK,IAGnC,QAAQ,IAAI,wCAAyC,CACnD,SAAU,OAAO,SAAS,SAC1B,SAAU,OAAO,SAAS,SAC1B,QAAS,KAAK,QACd,QAAS,OAAO,SAAS,IAC/B,CAAK,CACH,CAGA,mBAAoB,CAClB,MAAMC,EAAW,OAAO,SAAS,SAC3BC,EAAW,OAAO,SAAS,SAGjC,OAAID,IAAa,2BAEXC,EAAS,SAAS,wBAAwB,EACrC,oDAOJ,6BACT,CAGA,gBAAiB,CACf,OAAO,IAAI,KAAI,EAAG,YAAW,EAAG,MAAM,GAAG,EAAE,CAAC,CAC9C,CAGA,MAAM,gBAAiB,CAErB,GAAI,KAAK,YAAc,KAAK,qBACvB,KAAK,IAAG,EAAK,KAAK,oBAAsB,KAAK,kBAChD,eAAQ,IAAI,4BAA4B,EACjC,KAAK,WAGd,GAAI,CACF,QAAQ,IAAI,iCAAiC,EAC7C,MAAMC,EAAgB,MAAM,MAAM,GAAG,KAAK,OAAO,mBAAmB,EAEpE,GAAIA,EAAc,GAAI,CACpB,MAAM7B,EAAQ,MAAM6B,EAAc,OAGlC,YAAK,WAAa7B,EAClB,KAAK,oBAAsB,KAAK,MAEhC,QAAQ,IAAI,+BAA+BA,EAAM,QAAQ,MAAM,mBAAmBA,EAAM,IAAI,EAAE,EACvFA,CACT,KACE,gBAAQ,KAAK,gDAAgD,EACtD,IAEX,OAAS1C,EAAO,CACd,eAAQ,MAAM,sCAAuCA,CAAK,EACnD,IACT,CACF,CAGA,MAAM,uBAAuBwE,EAAQ,CACnC,MAAMC,EAAW,eAAeD,CAAM,GAGtC,GAAI,KAAK,MAAM,IAAIC,CAAQ,EAAG,CAC5B,MAAMC,EAAS,KAAK,MAAM,IAAID,CAAQ,EACtC,GAAI,KAAK,IAAG,EAAKC,EAAO,UAAY,KAAK,aACvC,eAAQ,IAAI,kCAAkCF,CAAM,EAAE,EAC/CE,EAAO,IAElB,CAEA,GAAI,CAGF,MAAMhC,EAAQ,MAAM,KAAK,iBACzB,IAAIiC,EAAa,KAAK,iBAEtB,GAAIjC,IACFiC,EAAajC,EAAM,KAGf,CAACA,EAAM,QAAQ,SAAS8B,CAAM,GAChC,MAAM,IAAI,MAAM,UAAUA,CAAM,gCAAgC,EAKpE,MAAMI,EAAU,GAAG,KAAK,OAAO,GAAGD,CAAU,IAAIH,CAAM,QAEtD,QAAQ,IAAI,oCAAoCA,CAAM,SAASI,CAAO,EAAE,EAExE,MAAMnC,EAAW,MAAM,MAAMmC,CAAO,EAEpC,GAAI,CAACnC,EAAS,GACZ,MAAM,IAAI,MAAM,kCAAkC+B,CAAM,KAAK/B,EAAS,MAAM,GAAG,EAGjF,MAAMpB,EAAO,MAAMoB,EAAS,OAGtBoC,EAAa,CACjB,GAAGxD,EAAK,WACR,OAAQ,cACR,YAAaA,EAAK,WAClB,QAAS,KAAK,iBAAiBA,EAAK,UAAU,EAC9C,gBAAiBA,EAAK,KACtB,OAAQmD,CAChB,EAGM,YAAK,MAAM,IAAIC,EAAU,CACvB,KAAMI,EACN,UAAW,KAAK,IAAG,CAC3B,CAAO,EAED,QAAQ,IAAI,iCAAiCL,CAAM,WAAWG,CAAU,UAAUE,EAAW,OAAO,GAAG,EAChGA,CAET,OAAS7E,EAAO,CACd,cAAQ,MAAM,yCAAyCwE,CAAM,IAAKxE,CAAK,EACjEA,CACR,CACF,CAGA,iBAAiB8E,EAAY,CAC3B,MAAMxB,EAAM,IAAI,KACVyB,EAAW,IAAI,KAAKD,CAAU,EAC9BE,EAAS1B,EAAMyB,EACfE,EAAY,KAAK,MAAMD,GAAU,IAAO,GAAK,GAAG,EAChDE,EAAc,KAAK,MAAOF,GAAU,IAAO,GAAK,KAAQ,IAAO,GAAG,EAExE,OAAIC,EAAY,EACP,GAAGA,CAAS,KAAKC,CAAW,QAE5B,GAAGA,CAAW,OAEzB,CAGA,MAAM,kBAAmB,CACvB,OAAO,MAAM,KAAK,gBACpB,CAGA,MAAM,2BAA2BV,EAAQ,CACvC,GAAI,CACF,MAAM9B,EAAQ,MAAM,KAAK,iBACzB,OAAOA,GAASA,EAAM,QAAQ,SAAS8B,CAAM,CAC/C,MAAgB,CACd,MAAO,EACT,CACF,CAGA,YAAa,CACX,KAAK,MAAM,QACX,KAAK,WAAa,KAClB,KAAK,oBAAsB,KAC3B,QAAQ,IAAI,oCAAoC,CAClD,CAGA,eAAgB,CACd,MAAMxB,EAAQ,CACZ,KAAM,KAAK,MAAM,KACjB,YAAa,CAAC,CAAC,KAAK,WACpB,SAAU,KAAK,oBAAsB,KAAK,MAAQ,KAAK,oBAAsB,KAC7E,MAAO,CAAA,CACb,EAEI,SAAW,CAAC5B,EAAK+D,CAAK,IAAK,KAAK,MAAM,UACpCnC,EAAM,MAAM,KAAK,CACf,IAAA5B,EACA,IAAK,KAAK,IAAG,EAAK+D,EAAM,UACxB,QAAS,KAAK,IAAG,EAAKA,EAAM,UAAY,KAAK,YACrD,CAAO,EAGH,OAAOnC,CACT,CACF,CAGO,MAAMoC,GAA2B,IAAIhB,GC3M5C,MAAMiB,EAAyB,CAC7B,aAAc,CACZ,KAAK,YAAc,wBACnB,KAAK,aAAe,GAAK,GAAK,GAAK,IACnC,KAAK,YAAc,IAAI,GACzB,CAGA,YAAYb,EAAQ,CAClB,MAAMc,EAAQ,IAAI,OAAO,YAAW,EAAG,MAAM,GAAG,EAAE,CAAC,EACnD,MAAO,GAAG,KAAK,WAAW,GAAGd,CAAM,IAAIc,CAAK,EAC9C,CAGA,MAAM,uBAAuBd,EAAQ,CACnC,MAAMC,EAAW,KAAK,YAAYD,CAAM,EAGxC,GAAI,KAAK,YAAY,IAAIC,CAAQ,EAAG,CAClC,MAAMC,EAAS,KAAK,YAAY,IAAID,CAAQ,EAC5C,GAAI,KAAK,IAAG,EAAKC,EAAO,UAAY,KAAK,aACvC,eAAQ,IAAI,0BAA0BF,CAAM,EAAE,EAEvB,CAAE,GAAGE,EAAO,KAAM,OAAQ,wBAGjD,KAAK,YAAY,OAAOD,CAAQ,CAEpC,CAGA,GAAI,CACF,MAAMc,EAAa,aAAa,QAAQd,CAAQ,EAChD,GAAIc,EAAY,CACd,MAAMC,EAAS,KAAK,MAAMD,CAAU,EACpC,GAAI,KAAK,IAAG,EAAKC,EAAO,UAAY,KAAK,aACvC,eAAQ,IAAI,gCAAgChB,CAAM,EAAE,EAGpD,KAAK,YAAY,IAAIC,EAAUe,CAAM,EAGd,CAAE,GAAGA,EAAO,KAAM,OAAQ,8BAIjD,aAAa,WAAWf,CAAQ,CAEpC,CACF,OAASzE,EAAO,CACd,QAAQ,KAAK,4BAA4BwE,CAAM,IAAKxE,CAAK,CAC3D,CAGA,OAAO,IACT,CAGA,MAAM,uBAAuBwE,EAAQnD,EAAM,CACzC,MAAMoD,EAAW,KAAK,YAAYD,CAAM,EAClCiB,EAAY,CAChB,KAAMpE,EACN,UAAW,KAAK,IAAG,EACnB,OAAQmD,EACR,KAAM,IAAI,OAAO,YAAW,EAAG,MAAM,GAAG,EAAE,CAAC,CACjD,EAEI,GAAI,CAEF,aAAa,QAAQC,EAAU,KAAK,UAAUgB,CAAS,CAAC,EAGxD,KAAK,YAAY,IAAIhB,EAAUgB,CAAS,EAExC,QAAQ,IAAI,mCAAmCjB,CAAM,EAAE,EAGvD,KAAK,gBAAe,CAEtB,OAASxE,EAAO,CACd,QAAQ,KAAK,4CAA4CwE,CAAM,IAAKxE,CAAK,CAC3E,CACF,CAGA,iBAAkB,CAChB,GAAI,CACF,MAAM8C,EAAe,CAAA,EAGrB,QAASC,EAAI,EAAGA,EAAI,aAAa,OAAQA,IAAK,CAC5C,MAAM3B,EAAM,aAAa,IAAI2B,CAAC,EAC9B,GAAI3B,GAAOA,EAAI,WAAW,KAAK,WAAW,EACxC,GAAI,CACF,MAAMsD,EAAS,KAAK,MAAM,aAAa,QAAQtD,CAAG,CAAC,EAC/C,KAAK,IAAG,EAAKsD,EAAO,UAAY,KAAK,cACvC5B,EAAa,KAAK1B,CAAG,CAEzB,MAAgB,CAEd0B,EAAa,KAAK1B,CAAG,CACvB,CAEJ,CAGA0B,EAAa,QAAQ1B,GAAO,CAC1B,aAAa,WAAWA,CAAG,EAC3B,QAAQ,IAAI,0BAA0BA,CAAG,EAAE,CAC7C,CAAC,EAGD,SAAW,CAACA,EAAKsD,CAAM,IAAK,KAAK,YAAY,UACvC,KAAK,IAAG,EAAKA,EAAO,UAAY,KAAK,cACvC,KAAK,YAAY,OAAOtD,CAAG,CAIjC,OAASpB,EAAO,CACd,QAAQ,KAAK,+BAAgCA,CAAK,CACpD,CACF,CAGA,iBAAiBwE,EAAQ,CACvB,MAAMC,EAAW,KAAK,YAAYD,CAAM,EAGxC,aAAa,WAAWC,CAAQ,EAGhC,KAAK,YAAY,OAAOA,CAAQ,EAEhC,QAAQ,IAAI,qBAAqBD,CAAM,EAAE,CAC3C,CAGA,eAAgB,CACd,GAAI,CAEF,MAAM1B,EAAe,CAAA,EACrB,QAASC,EAAI,EAAGA,EAAI,aAAa,OAAQA,IAAK,CAC5C,MAAM3B,EAAM,aAAa,IAAI2B,CAAC,EAC1B3B,GAAOA,EAAI,WAAW,KAAK,WAAW,GACxC0B,EAAa,KAAK1B,CAAG,CAEzB,CAEA0B,EAAa,QAAQ1B,GAAO,aAAa,WAAWA,CAAG,CAAC,EAGxD,KAAK,YAAY,QAEjB,QAAQ,IAAI,2CAA2C0B,EAAa,MAAM,SAAS,CAErF,OAAS9C,EAAO,CACd,QAAQ,KAAK,6BAA8BA,CAAK,CAClD,CACF,CAGA,eAAgB,CACd,MAAMgD,EAAQ,CACZ,YAAa,KAAK,YAAY,KAC9B,kBAAmB,EACnB,UAAW,CACjB,EAEI,GAAI,CACF,QAASD,EAAI,EAAGA,EAAI,aAAa,OAAQA,IAAK,CAC5C,MAAM3B,EAAM,aAAa,IAAI2B,CAAC,EAC9B,GAAI3B,GAAOA,EAAI,WAAW,KAAK,WAAW,EAAG,CAC3C4B,EAAM,oBACN,MAAMmC,EAAQ,aAAa,QAAQ/D,CAAG,EAClC+D,IACFnC,EAAM,WAAamC,EAAM,OAE7B,CACF,CACF,OAASnF,EAAO,CACd,QAAQ,KAAK,6BAA8BA,CAAK,CAClD,CAEA,OAAOgD,CACT,CACF,CAGO,MAAM0C,GAA2B,IAAIL,GC/KtCM,GAAU,MAShB,SAASC,GAASC,EAAK,CACrB,OAAO,KAAK,IAAI,EAAG,KAAK,IAAI,IAAKA,CAAG,CAAC,CACvC,CAKA,SAASC,GAAWC,EAAQC,EAAQ,CAClC,MAAMzF,EAAS,IAAI,MAAMwF,EAAO,MAAM,EAEtC,QAAShD,EAAI,EAAGA,EAAIgD,EAAO,OAAQhD,IACjC,GAAIA,EAAIiD,EAAS,EACfzF,EAAOwC,CAAC,EAAI,QACP,CACL,IAAIkD,EAAM,KACV,QAASC,EAAInD,EAAIiD,EAAS,EAAGE,GAAKnD,EAAGmD,IAC9B,MAAMH,EAAOG,CAAC,CAAC,IAClBD,EAAM,KAAK,IAAIA,EAAKF,EAAOG,CAAC,CAAC,GAGjC3F,EAAOwC,CAAC,EAAIkD,IAAQ,KAAY,IAAMA,CACxC,CAGF,OAAO1F,CACT,CAEA,SAAS4F,GAAWJ,EAAQC,EAAQ,CAClC,MAAMzF,EAAS,IAAI,MAAMwF,EAAO,MAAM,EAEtC,QAAShD,EAAI,EAAGA,EAAIgD,EAAO,OAAQhD,IACjC,GAAIA,EAAIiD,EAAS,EACfzF,EAAOwC,CAAC,EAAI,QACP,CACL,IAAIqD,EAAM,IACV,QAASF,EAAInD,EAAIiD,EAAS,EAAGE,GAAKnD,EAAGmD,IAC9B,MAAMH,EAAOG,CAAC,CAAC,IAClBE,EAAM,KAAK,IAAIA,EAAKL,EAAOG,CAAC,CAAC,GAGjC3F,EAAOwC,CAAC,EAAIqD,IAAQ,IAAW,IAAMA,CACvC,CAGF,OAAO7F,CACT,CAcA,SAAS8F,GAAIN,EAAQC,EAAQM,EAAY,SAAUC,EAAa,KAAM,CACpE,GAAIP,GAAU,EAAG,MAAM,IAAI,MAAM,yBAAyB,EAE1D,MAAMQ,EAAIT,EAAO,OACXxF,EAAS,IAAI,MAAMiG,CAAC,EAAE,KAAK,GAAG,EAGhCD,IAAe,OAAMA,EAAaP,GAEtC,QAASS,EAAI,EAAGA,EAAID,EAAGC,IAAK,CAC1B,GAAIA,EAAIT,EAAS,EAEf,SAIF,MAAMU,EAASX,EAAO,MAAMU,EAAIT,EAAS,EAAGS,EAAI,CAAC,EAEjD,GAAIH,IAAc,SAEZI,EAAO,KAAKC,GAAK,MAAMA,CAAC,CAAC,EAC3BpG,EAAOkG,CAAC,EAAI,IAEZlG,EAAOkG,CAAC,EAAIC,EAAO,OAAO,CAAChG,EAAKiG,IAAMjG,EAAMiG,EAAG,CAAC,EAAID,EAAO,eAEpDJ,IAAc,SAAU,CAEjC,MAAMM,EAAcF,EAAO,OAAOC,GAAK,CAAC,MAAMA,CAAC,CAAC,EAC5CC,EAAY,OAASL,EACvBhG,EAAOkG,CAAC,EAAI,IAEZlG,EAAOkG,CAAC,EAAIG,EAAY,OAAO,CAAClG,EAAKiG,IAAMjG,EAAMiG,EAAG,CAAC,EAAIC,EAAY,MAEzE,CACF,CAEA,OAAOrG,CACT,CAWA,SAASsG,GAAId,EAAQC,EAAQc,EAAQ,KAAMC,EAAW,WAAYT,EAAY,iBAAkB,CAC9F,GAAIN,GAAU,EAAG,MAAM,IAAI,MAAM,yBAAyB,EAE1D,MAAMQ,EAAIT,EAAO,OACXxF,EAAS,IAAI,MAAMiG,CAAC,EAAE,KAAK,GAAG,EAMpC,GAHIM,IAAU,OAAMA,EAAQ,GAAKd,EAAS,IAGtCc,GAAS,GAAKA,EAAQ,EACxB,MAAM,IAAI,MAAM,yBAAyB,EAG3C,GAAIC,IAAa,cAAe,CAE9B,IAAIC,EAAkB,GACtB,QAASC,EAAI,EAAGA,EAAIT,EAAGS,IACrB,GAAI,CAAC,MAAMlB,EAAOkB,CAAC,CAAC,EAAG,CACrBD,EAAkBC,EAClB,KACF,CAGF,GAAID,IAAoB,GAEtB,OAAOzG,EAITA,EAAOyG,CAAe,EAAIjB,EAAOiB,CAAe,EAGhD,QAASP,EAAIO,EAAkB,EAAGP,EAAID,EAAGC,IACnC,MAAMV,EAAOU,CAAC,CAAC,EAEbH,IAAc,YAChB/F,EAAOkG,CAAC,EAAIlG,EAAOkG,EAAI,CAAC,EAExBlG,EAAOkG,CAAC,EAAI,IAIV,MAAMlG,EAAOkG,EAAI,CAAC,CAAC,EACjBH,IAAc,iBAChB/F,EAAOkG,CAAC,EAAI,IAEZlG,EAAOkG,CAAC,EAAI,IAGdlG,EAAOkG,CAAC,EAAIK,EAAQf,EAAOU,CAAC,GAAK,EAAIK,GAASvG,EAAOkG,EAAI,CAAC,CAKlE,SAAWM,IAAa,YAGtB,QAASN,EAAI,EAAGA,EAAID,EAAGC,IACrB,GAAI,EAAAA,EAAIT,EAAS,GAKjB,GAAIS,IAAMT,EAAS,EAAG,CAEpB,MAAMU,EAASX,EAAO,MAAM,EAAGC,CAAM,EACjCU,EAAO,KAAKC,GAAK,MAAMA,CAAC,CAAC,EAC3BpG,EAAOkG,CAAC,EAAI,IAEZlG,EAAOkG,CAAC,EAAIC,EAAO,OAAO,CAAChG,EAAKiG,IAAMjG,EAAMiG,EAAG,CAAC,EAAID,EAAO,MAE/D,SAEM,MAAMX,EAAOU,CAAC,CAAC,EAEbH,IAAc,YAChB/F,EAAOkG,CAAC,EAAIlG,EAAOkG,EAAI,CAAC,EACfH,IAAc,eACvB/F,EAAOkG,CAAC,EAAI,IAEHH,IAAc,mBACvB/F,EAAOkG,CAAC,EAAI,aAIV,MAAMlG,EAAOkG,EAAI,CAAC,CAAC,EACrB,GAAIH,IAAc,iBAAkB,CAElC,MAAMY,EAAenB,EAAO,MAAMU,EAAIT,EAAS,EAAGS,EAAI,CAAC,EACnDS,EAAa,KAAKP,GAAK,MAAMA,CAAC,CAAC,EACjCpG,EAAOkG,CAAC,EAAI,IAGZlG,EAAOkG,CAAC,EAAIS,EAAa,OAAO,CAACxG,EAAKiG,IAAMjG,EAAMiG,EAAG,CAAC,EAAIO,EAAa,MAE3E,MACE3G,EAAOkG,CAAC,EAAI,SAIdlG,EAAOkG,CAAC,EAAIK,EAAQf,EAAOU,CAAC,GAAK,EAAIK,GAASvG,EAAOkG,EAAI,CAAC,EAOpE,OAAOlG,CACT,CAQA,SAAS4G,GAAgBpB,EAAQC,EAAQ,CACvC,GAAIA,GAAU,EAAG,MAAM,IAAI,MAAM,yBAAyB,EAE1D,MAAMzF,EAAS,IAAI,MAAMwF,EAAO,MAAM,EAGtC,QAAShD,EAAI,EAAGA,EAAIiD,EAAS,EAAGjD,IAC9BxC,EAAOwC,CAAC,EAAI,IAGd,GAAIgD,EAAO,OAASC,EAClB,eAAQ,IAAI,oCAAoCD,EAAO,MAAM,MAAMC,CAAM,EAAE,EACpEzF,EAIT,IAAIG,EAAM,EACN0G,EAAQ,EACRC,EAAe,CAAA,EAGnB,QAASnB,EAAI,EAAGA,EAAIH,EAAO,QAAUsB,EAAa,OAASrB,EAAQE,IAC5D,MAAMH,EAAOG,CAAC,CAAC,IAClBmB,EAAa,KAAKnB,CAAC,EACnBxF,GAAOqF,EAAOG,CAAC,EACfkB,KAMJ,GAFA,QAAQ,IAAI,iBAAiBA,CAAK,0BAA0BpB,CAAM,mCAAmC,EAEjGoB,EAAQpB,EACV,eAAQ,KAAK,2DAA2DoB,CAAK,MAAMpB,CAAM,EAAE,EACpFzF,EAIT,MAAM+G,EAAY,KAAK,IAAItB,EAAS,EAAGqB,EAAarB,EAAS,CAAC,CAAC,EAC/DzF,EAAO+G,CAAS,EAAI5G,EAAMsF,EAE1B,QAAQ,IAAI,gCAAgCsB,CAAS,eAAe/G,EAAO+G,CAAS,CAAC,EAAE,EAGvF,QAASvE,EAAIuE,EAAY,EAAGvE,EAAIgD,EAAO,OAAQhD,IACzC,MAAMxC,EAAOwC,EAAI,CAAC,CAAC,GAAK,MAAMgD,EAAOhD,CAAC,CAAC,EACzCxC,EAAOwC,CAAC,EAAI,IAEZxC,EAAOwC,CAAC,GAAKxC,EAAOwC,EAAI,CAAC,GAAKiD,EAAS,GAAKD,EAAOhD,CAAC,GAAKiD,EAI7D,MAAMuB,EAAahH,EAAO,OAAOoG,GAAK,CAAC,MAAMA,CAAC,CAAC,EAAE,OACjD,eAAQ,IAAI,qBAAqBY,CAAU,wBAAwB,EAE5DhH,CACT,CASA,SAASiH,GAAYC,EAAOzB,EAAS,EAAGc,EAAQ,KAAMC,EAAW,WAAYT,EAAY,iBAAkB,CACzG,OAAOO,GAAIY,EAAOzB,EAAQc,EAAOC,EAAUT,CAAS,CACtD,CAKA,SAASoB,GAAaD,EAAOzB,EAAS,EAAGM,EAAY,SAAUC,EAAa,KAAM,CAChF,OAAOF,GAAIoB,EAAOzB,EAAQM,EAAWC,CAAU,CACjD,CAKA,SAASoB,GAA0BC,EAAMC,EAAK7B,EAAS,GAAI,CACzD,MAAM8B,EAAKhC,GAAW8B,EAAM5B,CAAM,EAC5B+B,EAAK5B,GAAW0B,EAAK7B,CAAM,EAE3BzF,EAAS,IAAI,MAAMqH,EAAK,MAAM,EACpC,QAAS7E,EAAI,EAAGA,EAAI6E,EAAK,OAAQ7E,IAC3B,MAAM+E,EAAG/E,CAAC,CAAC,GAAK,MAAMgF,EAAGhF,CAAC,CAAC,EAC7BxC,EAAOwC,CAAC,EAAI,IAEZxC,EAAOwC,CAAC,GAAK+E,EAAG/E,CAAC,EAAIgF,EAAGhF,CAAC,GAAK,EAIlC,OAAOxC,CACT,CAKA,SAASyH,GAAgCJ,EAAMC,EAAK7B,EAAS,EAAG,CAC9D,OAAO2B,GAA0BC,EAAMC,EAAK7B,CAAM,CACpD,CAKA,SAASiC,GAA6BR,EAAOS,EAAQ,GAAI,CACvD,GAAIA,EAAQ,EAAG,MAAM,IAAI,MAAM,4BAA4B,EAE3D,MAAM3H,EAAS,IAAI,MAAMkH,EAAM,MAAM,EAErC,QAAS1E,EAAI,EAAGA,EAAI0E,EAAM,OAAQ1E,IAC5BA,EAAImF,EAAQT,EAAM,OACpBlH,EAAOwC,CAAC,EAAI0E,EAAM1E,CAAC,EAEnBxC,EAAOwC,CAAC,EAAI,IAIhB,OAAOxC,CACT,CAKA,SAAS4H,GAAcV,EAAOW,EAAQpC,EAAS,GAAI,CACjD,MAAMzF,EAAS,IAAI,MAAMkH,EAAM,MAAM,EAErC,QAAS1E,EAAI,EAAGA,EAAI0E,EAAM,OAAQ1E,IAChC,GAAIA,EAAIiD,EAAS,EACfzF,EAAOwC,CAAC,EAAI,QACP,CACL,IAAIsF,EAAY,EACZC,EAAc,EAElB,QAASpC,EAAInD,EAAIiD,EAAS,EAAGE,GAAKnD,EAAGmD,IAC/B,CAAC,MAAMuB,EAAMvB,CAAC,CAAC,GAAK,CAAC,MAAMkC,EAAOlC,CAAC,CAAC,IACtCmC,GAAaZ,EAAMvB,CAAC,EAAIkC,EAAOlC,CAAC,EAChCoC,GAAeF,EAAOlC,CAAC,GAI3B3F,EAAOwC,CAAC,EAAIuF,GAAe3C,GAAU,IAAM0C,EAAYC,CACzD,CAGF,OAAO/H,CACT,CAKA,SAASgI,GAAad,EAAOzB,EAAS,GAAI,CACxC,GAAIyB,EAAM,OAASzB,EAAS,EAC1B,OAAO,IAAI,MAAMyB,EAAM,MAAM,EAAE,KAAK,GAAG,EAIzC,MAAMe,EAAQ,IAAI,MAAMf,EAAM,MAAM,EAC9BgB,EAAO,IAAI,MAAMhB,EAAM,MAAM,EAC7BiB,EAAO,IAAI,MAAMjB,EAAM,MAAM,EAEnCe,EAAM,CAAC,EAAI,IACXC,EAAK,CAAC,EAAI,IACVC,EAAK,CAAC,EAAI,IAEV,QAAS3F,EAAI,EAAGA,EAAI0E,EAAM,OAAQ1E,IAC5B,MAAM0E,EAAM1E,CAAC,CAAC,GAAK,MAAM0E,EAAM1E,EAAI,CAAC,CAAC,GACvCyF,EAAMzF,CAAC,EAAI,IACX0F,EAAK1F,CAAC,EAAI,IACV2F,EAAK3F,CAAC,EAAI,MAEVyF,EAAMzF,CAAC,EAAI0E,EAAM1E,CAAC,EAAI0E,EAAM1E,EAAI,CAAC,EACjC0F,EAAK1F,CAAC,EAAI,KAAK,IAAIyF,EAAMzF,CAAC,EAAG,CAAC,EAC9B2F,EAAK3F,CAAC,EAAI,KAAK,IAAI,CAACyF,EAAMzF,CAAC,EAAG,CAAC,GAKnC,MAAM4F,EAAUxB,GAAgBsB,EAAK,MAAM,CAAC,EAAGzC,CAAM,EAC/C4C,EAAUzB,GAAgBuB,EAAK,MAAM,CAAC,EAAG1C,CAAM,EAG/CzF,EAAS,IAAI,MAAMkH,EAAM,MAAM,EACrClH,EAAO,CAAC,EAAI,IAEZ,QAASwC,EAAI,EAAGA,EAAI0E,EAAM,OAAQ1E,IAAK,CACrC,MAAM8F,EAAeF,EAAQ5F,EAAI,CAAC,EAC5B+F,EAAeF,EAAQ7F,EAAI,CAAC,EAElC,GAAI,MAAM8F,CAAY,GAAK,MAAMC,CAAY,EAC3CvI,EAAOwC,CAAC,EAAI,YACH+F,GAAgBnD,GACzBpF,EAAOwC,CAAC,EAAI,QACP,CAEL,MAAM8C,EAAM,IAAO,KAAO,EADfgD,EAAeC,GAE1BvI,EAAOwC,CAAC,EAAI6C,GAASC,CAAG,CAC1B,CACF,CAEA,OAAOtF,CACT,CAKA,SAASwI,GAAanB,EAAMC,EAAKJ,EAAOzB,EAAS,GAAI,CACnD,MAAMgD,EAAS,KAAK,IAAIpB,EAAK,OAAQC,EAAI,OAAQJ,EAAM,MAAM,EAG7D,GAAIuB,EAAShD,EAAS,EACpB,eAAQ,KAAK,iCAAiCgD,CAAM,MAAMhD,EAAS,CAAC,eAAeA,CAAM,EAAE,EACpF,CACL,IAAK,IAAI,MAAMgD,CAAM,EAAE,KAAK,GAAG,EAC/B,OAAQ,IAAI,MAAMA,CAAM,EAAE,KAAK,GAAG,EAClC,QAAS,IAAI,MAAMA,CAAM,EAAE,KAAK,GAAG,CACzC,EAIE,IAAIC,EAAiB,EACrB,QAASlG,EAAI,EAAGA,EAAIiG,EAAQjG,IACtB,CAAC,MAAM6E,EAAK7E,CAAC,CAAC,GAAK,CAAC,MAAM8E,EAAI9E,CAAC,CAAC,GAAK,CAAC,MAAM0E,EAAM1E,CAAC,CAAC,GACtDkG,IAMJ,GAFA,QAAQ,IAAI,mBAAmBD,CAAM,iBAAiBC,CAAc,oBAAoB,EAEpFA,EAAiBjD,EAAS,EAC5B,eAAQ,KAAK,qCAAqCiD,CAAc,MAAMjD,EAAS,CAAC,EAAE,EAC3E,CACL,IAAK,IAAI,MAAMgD,CAAM,EAAE,KAAK,GAAG,EAC/B,OAAQ,IAAI,MAAMA,CAAM,EAAE,KAAK,GAAG,EAClC,QAAS,IAAI,MAAMA,CAAM,EAAE,KAAK,GAAG,CACzC,EAIE,MAAME,EAAS,IAAI,MAAMF,CAAM,EACzBG,EAAW,IAAI,MAAMH,CAAM,EAC3BI,EAAS,IAAI,MAAMJ,CAAM,EACzBK,EAAU,IAAI,MAAML,CAAM,EAC1BM,EAAK,IAAI,MAAMN,CAAM,EAE3BE,EAAO,CAAC,EAAI,IACZC,EAAS,CAAC,EAAI,IACdC,EAAO,CAAC,EAAI,IACZC,EAAQ,CAAC,EAAI,IACbC,EAAG,CAAC,EAAI,IAER,QAASvG,EAAI,EAAGA,EAAIiG,EAAQjG,IAAK,CAE/B,GAAI,MAAM6E,EAAK7E,CAAC,CAAC,GAAK,MAAM8E,EAAI9E,CAAC,CAAC,GAAK,MAAM0E,EAAM1E,CAAC,CAAC,GACjD,MAAM6E,EAAK7E,EAAE,CAAC,CAAC,GAAK,MAAM8E,EAAI9E,EAAE,CAAC,CAAC,GAAK,MAAM0E,EAAM1E,EAAE,CAAC,CAAC,EAAG,CAC5DmG,EAAOnG,CAAC,EAAI,IACZoG,EAASpG,CAAC,EAAI,IACdqG,EAAOrG,CAAC,EAAI,IACZsG,EAAQtG,CAAC,EAAI,IACbuG,EAAGvG,CAAC,EAAI,IACR,QACF,CAGAmG,EAAOnG,CAAC,EAAI6E,EAAK7E,CAAC,EAAI6E,EAAK7E,EAAI,CAAC,EAChCoG,EAASpG,CAAC,EAAI8E,EAAI9E,EAAI,CAAC,EAAI8E,EAAI9E,CAAC,EAG5BmG,EAAOnG,CAAC,EAAIoG,EAASpG,CAAC,GAAKmG,EAAOnG,CAAC,EAAI,EACzCqG,EAAOrG,CAAC,EAAImG,EAAOnG,CAAC,EAEpBqG,EAAOrG,CAAC,EAAI,EAGVoG,EAASpG,CAAC,EAAImG,EAAOnG,CAAC,GAAKoG,EAASpG,CAAC,EAAI,EAC3CsG,EAAQtG,CAAC,EAAIoG,EAASpG,CAAC,EAEvBsG,EAAQtG,CAAC,EAAI,EAIf,MAAMwG,EAAM3B,EAAK7E,CAAC,EAAI8E,EAAI9E,CAAC,EACrByG,EAAM,KAAK,IAAI5B,EAAK7E,CAAC,EAAI0E,EAAM1E,EAAI,CAAC,CAAC,EACrC0G,EAAM,KAAK,IAAI5B,EAAI9E,CAAC,EAAI0E,EAAM1E,EAAI,CAAC,CAAC,EAC1CuG,EAAGvG,CAAC,EAAI,KAAK,IAAIwG,EAAKC,EAAKC,CAAG,CAChC,CAGA,MAAMC,EAAOvC,GAAgBmC,EAAG,MAAM,CAAC,EAAGtD,CAAM,EAC1C2D,EAAWxC,GAAgBiC,EAAO,MAAM,CAAC,EAAGpD,CAAM,EAClD4D,EAAYzC,GAAgBkC,EAAQ,MAAM,CAAC,EAAGrD,CAAM,EAE1D,QAAQ,IAAI,6CAA6C0D,EAAK,OAAO/C,GAAK,CAAC,MAAMA,CAAC,CAAC,EAAE,MAAM,gBAAgBgD,EAAS,OAAOhD,GAAK,CAAC,MAAMA,CAAC,CAAC,EAAE,MAAM,gBAAgBiD,EAAU,OAAOjD,GAAK,CAAC,MAAMA,CAAC,CAAC,EAAE,MAAM,EAAE,EAG1M,MAAMkD,EAAS,IAAI,MAAMb,CAAM,EACzBc,EAAU,IAAI,MAAMd,CAAM,EAC1Be,EAAK,IAAI,MAAMf,CAAM,EAE3Ba,EAAO,CAAC,EAAI,IACZC,EAAQ,CAAC,EAAI,IACbC,EAAG,CAAC,EAAI,IAER,QAAShH,EAAI,EAAGA,EAAIiG,EAAQjG,IAAK,CAC/B,MAAMiH,EAAYN,EAAK3G,EAAI,CAAC,EACtBkH,EAAgBN,EAAS5G,EAAI,CAAC,EAC9BmH,EAAiBN,EAAU7G,EAAI,CAAC,EAEtC,GAAI,MAAMiH,CAAS,GAAK,MAAMC,CAAa,GAAK,MAAMC,CAAc,GAAKF,GAAarE,GACpFkE,EAAO9G,CAAC,EAAI,IACZ+G,EAAQ/G,CAAC,EAAI,IACbgH,EAAGhH,CAAC,EAAI,QACH,CACL8G,EAAO9G,CAAC,EAAI,IAAMkH,EAAgBD,EAClCF,EAAQ/G,CAAC,EAAI,IAAMmH,EAAiBF,EAEpC,MAAMG,EAAQN,EAAO9G,CAAC,EAAI+G,EAAQ/G,CAAC,EAC/BoH,GAASxE,GACXoE,EAAGhH,CAAC,EAAI,IAERgH,EAAGhH,CAAC,EAAI,IAAM,KAAK,IAAI8G,EAAO9G,CAAC,EAAI+G,EAAQ/G,CAAC,CAAC,EAAIoH,CAErD,CACF,CAGA,MAAMC,EAAMjD,GAAgB4C,EAAG,MAAM,CAAC,EAAG/D,CAAM,EAE/C,QAAQ,IAAI,wCAAwC+D,EAAG,OAAOpD,GAAK,CAAC,MAAMA,CAAC,CAAC,EAAE,MAAM,gBAAgByD,EAAI,OAAOzD,GAAK,CAAC,MAAMA,CAAC,CAAC,EAAE,MAAM,EAAE,EAGvI,MAAM0D,EAAY,IAAI,MAAMrB,CAAM,EAClCqB,EAAU,CAAC,EAAI,IACf,QAAStH,EAAI,EAAGA,EAAIiG,EAAQjG,IAC1BsH,EAAUtH,CAAC,EAAIqH,EAAIrH,EAAI,CAAC,EAI1B,MAAMuH,EAAgBD,EAAU,OAAO1D,GAAK,CAAC,MAAMA,CAAC,CAAC,EAAE,OACvD,eAAQ,IAAI,uBAAuB2D,CAAa,4BAA4BtB,CAAM,QAAQ,EAEnF,CACL,IAAKqB,EACL,OAAQR,EACR,QAASC,CACb,CACA,CAKA,SAASS,GAAc9C,EAAO+C,EAAa,GAAIC,EAAa,GAAIC,EAAe,EAAG,CAC5ED,GAAcD,GAChB,QAAQ,KAAK,gDAAgD,EAG/D,MAAMG,EAAU9D,GAAIY,EAAO+C,CAAU,EAC/BI,EAAU/D,GAAIY,EAAOgD,CAAU,EAG/BI,EAAO,IAAI,MAAMpD,EAAM,MAAM,EACnC,QAAS1E,EAAI,EAAGA,EAAI0E,EAAM,OAAQ1E,IAC5B,MAAM4H,EAAQ5H,CAAC,CAAC,GAAK,MAAM6H,EAAQ7H,CAAC,CAAC,EACvC8H,EAAK9H,CAAC,EAAI,IAEV8H,EAAK9H,CAAC,EAAI4H,EAAQ5H,CAAC,EAAI6H,EAAQ7H,CAAC,EAKpC,MAAM+H,EAASjE,GAAIgE,EAAMH,CAAY,EAG/BK,EAAY,IAAI,MAAMtD,EAAM,MAAM,EACxC,QAAS1E,EAAI,EAAGA,EAAI0E,EAAM,OAAQ1E,IAC5B,MAAM8H,EAAK9H,CAAC,CAAC,GAAK,MAAM+H,EAAO/H,CAAC,CAAC,EACnCgI,EAAUhI,CAAC,EAAI,IAEfgI,EAAUhI,CAAC,EAAI8H,EAAK9H,CAAC,EAAI+H,EAAO/H,CAAC,EAIrC,MAAO,CACL,KAAM8H,EACN,OAAQC,EACR,UAAWC,CACf,CACA,CAWA,SAASC,GAAuBC,EAAO,CACrC,KAAM,CAAE,KAAAC,EAAM,KAAAtD,EAAM,IAAAC,EAAK,MAAAJ,EAAO,OAAAW,CAAM,EAAK6C,EAGrCjC,EAASvB,EAAM,OACrB,GAAIG,EAAK,SAAWoB,GAAUnB,EAAI,SAAWmB,GACzCkC,EAAK,SAAWlC,GAAUZ,EAAO,SAAWY,EAC9C,MAAM,IAAI,MAAM,4CAA4C,EAI9D,MAAMlH,EAAU,CAEd,KAAM0F,GAAYC,EAAO,CAAC,EAC1B,MAAOD,GAAYC,EAAO,EAAE,EAC5B,MAAOD,GAAYC,EAAO,EAAE,EAG5B,MAAOC,GAAaD,EAAO,CAAC,EAC5B,OAAQC,GAAaD,EAAO,EAAE,EAC9B,OAAQC,GAAaD,EAAO,EAAE,EAG9B,qBAAsBE,GAA0BC,EAAMC,EAAK,EAAE,EAC7D,0BAA2BG,GAAgCJ,EAAMC,EAAK,CAAC,EACvE,wBAAyBI,GAA6BR,EAAO,EAAE,EAG/D,QAASU,GAAcV,EAAOW,EAAQ,EAAE,EAGxC,OAAQG,GAAad,EAAO,EAAE,EAG9B,IAAI,IAAM,CACR,MAAM0D,EAAaZ,GAAc9C,EAAO,GAAI,GAAI,CAAC,EACjD,MAAO,CACL,aAAc0D,EAAW,KACzB,cAAeA,EAAW,OAC1B,UAAWA,EAAW,SAC9B,CACI,GAAC,EAGD,IAAI,IAAM,CACR,MAAMd,EAAYtB,GAAanB,EAAMC,EAAKJ,EAAO,EAAE,EACnD,MAAO,CACL,OAAQ4C,EAAU,IAClB,eAAgBA,EAAU,OAC1B,gBAAiBA,EAAU,OACnC,CACI,GAAC,CACL,EAGE,SAAW,CAACjJ,EAAK2E,CAAM,IAAK,OAAO,QAAQjE,CAAO,EAC5CiE,EAAO,SAAWiD,GACpB,QAAQ,MAAM,uBAAuB5H,CAAG,cAAc4H,CAAM,SAASjD,EAAO,MAAM,EAAE,EAIxF,OAAOjE,CACT,CC9rBA,MAAMsJ,EAAgB,CACpB,aAAc,CAGZ,KAAK,YAAc,CAEjB,sCAGA,yBAGA,mBACA,yCACA,yCACA,0CACA,sCACN,EACI,KAAK,QAAU,qDACf,KAAK,MAAQ,IAAI,IACjB,KAAK,aAAe,EAAI,GAAK,IAC7B,KAAK,kBAAoB,CAC3B,CAGA,MAAM,uBAAuB5G,EAAQ,CAEnC,MAAMe,EAAa,MAAMG,GAAyB,uBAAuBlB,CAAM,EAC/E,GAAIe,EACF,OAAOA,EAIT,MAAM8F,EAAY,MAAM,KAAK,gCAAgC7G,CAAM,EAGnE,OAAI6G,GAAa,CAACA,EAAU,OAC1B,MAAM3F,GAAyB,uBAAuBlB,EAAQ6G,CAAS,EAGlEA,CACT,CAGA,MAAM,gCAAgC7G,EAAQ,SAC5C,MAAMC,EAAW,aAAaD,CAAM,GAGpC,GAAI,KAAK,MAAM,IAAIC,CAAQ,EAAG,CAC5B,MAAMC,EAAS,KAAK,MAAM,IAAID,CAAQ,EACtC,GAAI,KAAK,IAAG,EAAKC,EAAO,UAAY,KAAK,aACvC,eAAQ,IAAI,yBAAyBF,CAAM,EAAE,EACtCE,EAAO,IAElB,CAGA,QAAS3B,EAAI,EAAGA,EAAI,KAAK,YAAY,OAAQA,IAC3C,GAAI,CACF,MAAMuI,GAAc,KAAK,kBAAoBvI,GAAK,KAAK,YAAY,OAC7DwI,EAAQ,KAAK,YAAYD,CAAU,EAEzC,QAAQ,IAAI,qBAAqB9G,CAAM,gBAAgB8G,EAAa,CAAC,KAAK,EAG1E,MAAME,EAAY,GAAG,KAAK,OAAO,GAAGhH,CAAM,+DACpCiH,EAAM,GAAGF,CAAK,GAAG,mBAAmBC,CAAS,CAAC,GAEpD,QAAQ,IAAI,gBAAgBC,CAAG,EAAE,EAGjC,MAAMhJ,EAAW,MAAM,MAAMgJ,EAAK,CAChC,OAAQ,MACR,QAAS,CACP,OAAU,mBACV,eAAgB,kBAC5B,CACA,CAAS,EAID,GAFA,QAAQ,IAAI,oBAAoBhJ,EAAS,MAAM,EAAE,EAE7C,CAACA,EAAS,GACZ,MAAM,IAAI,MAAM,uBAAuBA,EAAS,MAAM,EAAE,EAG1D,MAAMpB,EAAO,MAAMoB,EAAS,OAI5B,GAHA,QAAQ,IAAI,sBAAuBpB,CAAI,EAGnC,CAACA,EAAK,OAAS,CAACA,EAAK,MAAM,QAAUA,EAAK,MAAM,OAAO,SAAW,EACpE,MAAM,IAAI,MAAM,yBAAyB,EAG3C,MAAMd,EAASc,EAAK,MAAM,OAAO,CAAC,EAElC,GAAI,CAACd,EAAO,YAAc,CAACA,EAAO,WAAW,OAAS,CAACA,EAAO,WAAW,MAAM,CAAC,EAC9E,MAAM,IAAI,MAAM,6CAA6C,EAG/D,MAAMmL,EAASnL,EAAO,WAAW,MAAM,CAAC,EAGlCoL,EAAU,CACd,KAAMD,EAAO,MAAQ,CAAA,EACrB,KAAMA,EAAO,MAAQ,CAAA,EACrB,IAAKA,EAAO,KAAO,CAAA,EACnB,MAAOA,EAAO,OAAS,CAAA,EACvB,OAAQA,EAAO,QAAU,CAAA,CACnC,EAGc1C,EAAS2C,EAAQ,MAAM,OACvBV,EAAQ,CACZ,KAAM,IAAI,MAAMjC,CAAM,EACtB,KAAM,IAAI,MAAMA,CAAM,EACtB,IAAK,IAAI,MAAMA,CAAM,EACrB,MAAO,IAAI,MAAMA,CAAM,EACvB,OAAQ,IAAI,MAAMA,CAAM,CAClC,EAEQ,IAAI4C,EAAkB,EACtB,QAAS7I,EAAI,EAAGA,EAAIiG,EAAQjG,IAC1BkI,EAAM,KAAKlI,CAAC,EAAI4I,EAAQ,KAAK5I,CAAC,IAAM,KAAO4I,EAAQ,KAAK5I,CAAC,EAAI,IAC7DkI,EAAM,KAAKlI,CAAC,EAAI4I,EAAQ,KAAK5I,CAAC,IAAM,KAAO4I,EAAQ,KAAK5I,CAAC,EAAI,IAC7DkI,EAAM,IAAIlI,CAAC,EAAI4I,EAAQ,IAAI5I,CAAC,IAAM,KAAO4I,EAAQ,IAAI5I,CAAC,EAAI,IAC1DkI,EAAM,MAAMlI,CAAC,EAAI4I,EAAQ,MAAM5I,CAAC,IAAM,KAAO4I,EAAQ,MAAM5I,CAAC,EAAI,IAChEkI,EAAM,OAAOlI,CAAC,EAAI4I,EAAQ,OAAO5I,CAAC,IAAM,KAAO4I,EAAQ,OAAO5I,CAAC,EAAI,IAG/D,CAAC,MAAMkI,EAAM,KAAKlI,CAAC,CAAC,GAAK,CAAC,MAAMkI,EAAM,KAAKlI,CAAC,CAAC,GAC7C,CAAC,MAAMkI,EAAM,IAAIlI,CAAC,CAAC,GAAK,CAAC,MAAMkI,EAAM,MAAMlI,CAAC,CAAC,GAC/C6I,IAWJ,GAPA,QAAQ,IAAI,SAAS5C,CAAM,uBAAuB4C,CAAe,0BAA0BpH,CAAM,EAAE,EAG/FoH,EAAkB,IACpB,QAAQ,KAAK,mDAAmDA,CAAe,OAAO,EAGpF5C,EAAS,GACX,MAAM,IAAI,MAAM,6BAA6BA,CAAM,0BAA0B,EAI/E,MAAM6C,EAAcb,GAAuBC,CAAK,EAG1Ca,EAAgBC,GAAW,CAC/B,GAAI,CAACA,GAAU,CAAC,MAAM,QAAQA,CAAM,EAClC,eAAQ,KAAK,mCAAmC,EACzC,KAGT,QAAShJ,EAAIgJ,EAAO,OAAS,EAAGhJ,GAAK,EAAGA,IAAK,CAC3C,MAAMoC,EAAQ4G,EAAOhJ,CAAC,EACtB,GAAIoC,GAAU,MAA+B,CAAC,MAAMA,CAAK,GAAK,SAASA,CAAK,EAC1E,eAAQ,IAAI,mCAAmCA,CAAK,aAAapC,CAAC,OAAOgJ,EAAO,MAAM,EAAE,EACjF5G,CAEX,CACA,eAAQ,KAAK,2DAA2D4G,EAAO,MAAM,EAAE,EAChF,IACT,EAEMC,EAAwB,CAACD,EAAQE,EAAmB,OAAS,CACjE,MAAMC,EAAYJ,EAAaC,CAAM,EAC/BI,EAAeL,EAAab,EAAM,KAAK,EAE7C,IAAIH,EAAS,UACb,OAAImB,GAAoBC,IAAc,MAAQC,IAAiB,OACzDF,EAAiB,OAAS,mBACxBE,EAAeD,EAAYD,EAAiB,IAAKnB,EAAS,MACrDqB,EAAeD,EAAYD,EAAiB,OAAMnB,EAAS,QAC3DmB,EAAiB,OAAS,MAC/BC,EAAYD,EAAiB,WAAYnB,EAAS,aAC7CoB,EAAYD,EAAiB,WAAUnB,EAAS,YAChDmB,EAAiB,OAAS,QAC/BC,EAAYD,EAAiB,OAAQnB,EAAS,eACzCoB,EAAYD,EAAiB,OAAMnB,EAAS,gBAIlD,CACL,MAAOoB,IAAc,KAAOA,EAAU,QAAQ,CAAC,EAAI,KACnD,OAAQpB,EACR,aAAcqB,IAAiB,KAAOA,EAAa,QAAQ,CAAC,EAAI,IAC5E,CACQ,EAGMtH,EAAa,CAEjB,IAAKmH,EAAsBH,EAAY,KAAM,CAAE,KAAM,mBAAoB,IAAK,KAAM,KAAM,GAAI,CAAE,EAChG,KAAMG,EAAsBH,EAAY,MAAO,CAAE,KAAM,mBAAoB,IAAK,KAAM,KAAM,GAAI,CAAE,EAClG,KAAMG,EAAsBH,EAAY,MAAO,CAAE,KAAM,mBAAoB,IAAK,KAAM,KAAM,GAAI,CAAE,EAClG,MAAOG,EAAsBH,EAAY,OAAQ,CAAE,KAAM,mBAAoB,IAAK,KAAM,KAAM,GAAI,CAAE,EACpG,KAAMG,EAAsBH,EAAY,MAAO,CAAE,KAAM,mBAAoB,IAAK,KAAM,KAAM,GAAI,CAAE,EAClG,MAAOG,EAAsBH,EAAY,OAAQ,CAAE,KAAM,mBAAoB,IAAK,KAAM,KAAM,GAAI,CAAE,EACpG,MAAO,CAAE,MAAO,KAAM,OAAQ,KAAK,EAGnC,iBAAkBG,EAAsBH,EAAY,qBAAsB,CAAE,KAAM,mBAAoB,IAAK,KAAM,KAAM,GAAI,CAAE,EAC7H,uBAAwBG,EAAsBH,EAAY,0BAA2B,CAAE,KAAM,mBAAoB,IAAK,KAAM,KAAM,GAAI,CAAE,EACxI,oBAAqBG,EAAsBH,EAAY,uBAAuB,EAG9E,OAAQG,EAAsBH,EAAY,QAAS,CAAE,KAAM,mBAAoB,IAAK,KAAM,KAAM,GAAI,CAAE,EAGtG,MAAOG,EAAsBH,EAAY,OAAQ,CAAE,KAAM,MAAO,WAAY,GAAI,SAAU,EAAE,CAAE,EAC9F,OAAQ,IAAM,CACZ,QAAQ,IAAI,8BAA8B,EAC1C,QAAQ,IAAI,iBAAkBA,EAAY,MAAM,EAChD,QAAQ,IAAI,yBAA0BA,EAAY,cAAc,EAChE,QAAQ,IAAI,0BAA2BA,EAAY,eAAe,EAElE,MAAMO,EAAWN,EAAaD,EAAY,MAAM,EAC1ChC,EAASiC,EAAaD,EAAY,cAAc,EAChD/B,EAAUgC,EAAaD,EAAY,eAAe,EAExD,QAAQ,IAAI,wBAAyB,CAAE,SAAAO,EAAU,OAAAvC,EAAQ,QAAAC,CAAO,CAAE,EAElE,IAAIgB,EAAS,UACTsB,IAAa,MAAQ,CAAC,MAAMA,CAAQ,IAClCA,EAAW,GAAItB,EAAS,eACnBsB,EAAW,KAAItB,EAAS,eAGnC,MAAMvK,EAAS,CACb,MAAO6L,IAAa,MAAQ,CAAC,MAAMA,CAAQ,EAAIA,EAAS,QAAQ,CAAC,EAAI,KACrE,OAAQtB,EACR,OAAQjB,IAAW,MAAQ,CAAC,MAAMA,CAAM,EAAIA,EAAO,QAAQ,CAAC,EAAI,KAChE,QAASC,IAAY,MAAQ,CAAC,MAAMA,CAAO,EAAIA,EAAQ,QAAQ,CAAC,EAAI,IAClF,EAEY,eAAQ,IAAI,oBAAqBvJ,CAAM,EAChCA,CACT,GAAC,EACD,MAAO,IAAM,CACX,MAAM8L,EAAYP,EAAaD,EAAY,YAAY,EACjDS,EAAcR,EAAaD,EAAY,aAAa,EACpDU,EAAYT,EAAaD,EAAY,SAAS,EAEpD,IAAIf,EAAS,UACb,OAAIuB,IAAc,MAAQC,IAAgB,MAAQC,IAAc,OAC1DF,EAAYC,GAAeC,EAAY,EACzCzB,EAAS,MACAuB,EAAYC,GAAeC,EAAY,IAChDzB,EAAS,SAIN,CACL,MAAOuB,IAAc,KAAOA,EAAU,QAAQ,CAAC,EAAI,KACnD,OAAQvB,EACR,WAAYwB,IAAgB,KAAOA,EAAY,QAAQ,CAAC,EAAI,KAC5D,UAAWC,IAAc,KAAOA,EAAU,QAAQ,CAAC,EAAI,IACrE,CACU,GAAC,EAGD,YAAa,IAAI,KAAI,EAAG,YAAW,EACnC,WAAYvD,EACZ,MAAO,SAASsC,EAAa,CAAC,GAC9B,OAAQ,0CAGR,WAAYO,EAGZ,WAAY,CACV,IAAK,KAAK,IAAI,GAAGZ,EAAM,MAAM,OAAOnH,GAAK,CAAC,MAAMA,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,EAC9D,IAAK,KAAK,IAAI,GAAGmH,EAAM,MAAM,OAAOnH,GAAK,CAAC,MAAMA,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,EAC9D,SAAQ0I,EAAAV,EAAab,EAAM,KAAK,IAAxB,YAAAuB,EAA2B,QAAQ,KAAM,MACjD,QAAOC,EAAAxB,EAAM,MAAM,KAAKnH,GAAK,CAAC,MAAMA,CAAC,CAAC,IAA/B,YAAA2I,EAAkC,QAAQ,KAAM,KACnE,CACA,EAEQ,eAAQ,IAAI,kBAAkBjI,CAAM,IAAK,CACvC,WAAYwE,EACZ,WAAYnE,EAAW,WACvB,aAAcoG,EAAM,MAAM,MAAM,GAAG,EAAE,OAAOnH,GAAK,CAAC,MAAMA,CAAC,CAAC,CACpE,CAAS,EAED,QAAQ,IAAI,6BAA6BU,CAAM,IAAKK,CAAU,EAG9D,KAAK,MAAM,IAAIJ,EAAU,CACvB,KAAMI,EACN,UAAW,KAAK,IAAG,CAC7B,CAAS,EAGD,KAAK,kBAAoByG,EAElBzG,CAET,OAAS7E,EAAO,CAId,GAHA,QAAQ,KAAK,SAAS+C,EAAI,CAAC,eAAeyB,CAAM,IAAKxE,EAAM,OAAO,EAG9D+C,IAAM,KAAK,YAAY,OAAS,EAClC,eAAQ,MAAM,0BAA0ByB,CAAM,IAAKxE,CAAK,EAGjD,CACL,IAAK,CAAE,MAAO,KAAM,OAAQ,KAAK,EACjC,KAAM,CAAE,MAAO,KAAM,OAAQ,KAAK,EAClC,KAAM,CAAE,MAAO,KAAM,OAAQ,KAAK,EAClC,MAAO,CAAE,MAAO,KAAM,OAAQ,KAAK,EACnC,KAAM,CAAE,MAAO,KAAM,OAAQ,KAAK,EAClC,MAAO,CAAE,MAAO,KAAM,OAAQ,KAAK,EACnC,MAAO,CAAE,MAAO,KAAM,OAAQ,KAAK,EACnC,iBAAkB,CAAE,MAAO,KAAM,OAAQ,KAAK,EAC9C,uBAAwB,CAAE,MAAO,KAAM,OAAQ,KAAK,EACpD,oBAAqB,CAAE,MAAO,KAAM,OAAQ,KAAK,EACjD,OAAQ,CAAE,MAAO,KAAM,OAAQ,KAAK,EACpC,MAAO,CAAE,MAAO,KAAM,OAAQ,KAAK,EACnC,MAAO,CAAE,MAAO,KAAM,OAAQ,KAAK,EACnC,KAAM,CAAE,MAAO,KAAM,OAAQ,KAAK,EAClC,YAAa,IAAI,KAAI,EAAG,YAAW,EACnC,MAAO,uBAAuBA,EAAM,OAAO,GAC3C,OAAQ,OACpB,CAEM,CAEJ,CAGA,YAAa,CACX,KAAK,MAAM,OACb,CAGA,MAAM,aAAawE,EAAQ,CACzB,MAAMC,EAAW,QAAQD,CAAM,GAGzBkI,EAAmB,GAAK,GAAK,GAAK,IACxC,GAAI,KAAK,MAAM,IAAIjI,CAAQ,EAAG,CAC5B,MAAMC,EAAS,KAAK,MAAM,IAAID,CAAQ,EACtC,GAAI,KAAK,IAAG,EAAKC,EAAO,UAAYgI,EAClC,eAAQ,IAAI,+BAA+BlI,CAAM,EAAE,EAC5CE,EAAO,IAElB,CAGA,QAAS3B,EAAI,EAAGA,EAAI,KAAK,YAAY,OAAQA,IAC3C,GAAI,CACF,MAAMuI,GAAc,KAAK,kBAAoBvI,GAAK,KAAK,YAAY,OAC7DwI,EAAQ,KAAK,YAAYD,CAAU,EAEzC,QAAQ,IAAI,2BAA2B9G,CAAM,gBAAgB8G,EAAa,CAAC,KAAK,EAGhF,MAAME,EAAY,6DAA6DhH,CAAM,qDAC/EiH,EAAM,GAAGF,CAAK,GAAG,mBAAmBC,CAAS,CAAC,GAE9C/I,EAAW,MAAM,MAAMgJ,EAAK,CAChC,OAAQ,MACR,QAAS,CACP,OAAU,mBACV,eAAgB,kBAC5B,CACA,CAAS,EAED,GAAI,CAAChJ,EAAS,GACZ,MAAM,IAAI,MAAM,uBAAuBA,EAAS,MAAM,EAAE,EAG1D,MAAMpB,EAAO,MAAMoB,EAAS,OAG5B,GAAI,CAACpB,EAAK,cAAgB,CAACA,EAAK,aAAa,QAAUA,EAAK,aAAa,OAAO,SAAW,EACzF,MAAM,IAAI,MAAM,gCAAgC,EAGlD,MAAMd,EAASc,EAAK,aAAa,OAAO,CAAC,EACnCsL,EAAiBpM,EAAO,gBAAkB,GAC1CqM,EAAQrM,EAAO,OAAS,GACxBsM,EAAWtM,EAAO,sBAAwB,GAG1CuM,EAAY,CAChB,OAAQtI,EACR,OAAQmI,EAAe,QAAU,UACjC,SAAUA,EAAe,UAAY,mBACrC,SAAUC,EAAM,cAAgBA,EAAM,UAAY,KAAK,mBAAmBpI,CAAM,EAChF,UAAWoI,EAAM,UAAYA,EAAM,UAAU,IAAM,KACnD,mBAAoBA,EAAM,UAAYA,EAAM,UAAU,IAAM,MAC5D,SAAUA,EAAM,UAAY,MAC5B,QAASD,EAAe,SAAW,UACnC,QAASA,EAAe,SAAW,KACnC,UAAWA,EAAe,mBAAqB,KAC/C,gBAAiBA,EAAe,qBAAuB,KAGvD,kBAAmB,KAAK,qBAAqBC,EAAM,UAAYA,EAAM,UAAU,IAAM,IAAI,EAGzF,YAAa,IAAI,KAAI,EAAG,YAAW,EACnC,OAAQ,2BACR,MAAO,SAAStB,EAAa,CAAC,GAC9B,WAAY,GACtB,EAEQ,eAAQ,IAAI,kBAAkB9G,CAAM,IAAKsI,CAAS,EAGlD,KAAK,MAAM,IAAIrI,EAAU,CACvB,KAAMqI,EACN,UAAW,KAAK,IAAG,CAC7B,CAAS,EAGD,KAAK,kBAAoBxB,EAElBwB,CAET,OAAS9M,EAAO,CAId,GAHA,QAAQ,KAAK,SAAS+C,EAAI,CAAC,0BAA0ByB,CAAM,IAAKxE,EAAM,OAAO,EAGzE+C,IAAM,KAAK,YAAY,OAAS,EAAG,CACrC,QAAQ,MAAM,qCAAqCyB,CAAM,IAAKxE,CAAK,EAEnE,MAAM+M,EAAc,CAClB,OAAQvI,EACR,OAAQ,UACR,SAAU,mBACV,SAAU,KAAK,mBAAmBA,CAAM,EACxC,UAAW,KACX,mBAAoB,MACpB,SAAU,MACV,QAAS,UACT,QAAS,KACT,UAAW,KACX,gBAAiB,KACjB,kBAAmB,UACnB,YAAa,IAAI,KAAI,EAAG,YAAW,EACnC,OAAQ,uBACR,MAAO,uBAAuBxE,EAAM,OAAO,GAC3C,WAAY,CACxB,EAGU,YAAK,MAAM,IAAIyE,EAAU,CACvB,KAAMsI,EACN,UAAW,KAAK,IAAG,CAC/B,CAAW,EAEMA,CACT,CACF,CAEJ,CAGA,mBAAmBvI,EAAQ,CACzB,MAAMwI,EAAgB,CAAC,OAAQ,OAAQ,QAAS,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,MAAO,OAAQ,KAAM,OAAQ,MAAO,OAAQ,MAAO,MAAO,OAAQ,OAAQ,OAAQ,MAAM,EAC1MC,EAAc,CAAC,MAAO,OAAQ,KAAK,EAEzC,OAAID,EAAc,SAASxI,CAAM,EACxB,SACEyI,EAAY,SAASzI,CAAM,EAC7B,OAGF,QACT,CAGA,qBAAqB0I,EAAW,CAC9B,MAAI,CAACA,GAAaA,GAAa,EACtB,UAILA,GAAa,KACR,WACEA,GAAa,KACf,YACEA,GAAa,IACf,UACEA,GAAa,IACf,YAEA,WAEX,CAGA,iBAAkB,CAChBxH,GAAyB,cAAa,CACxC,CAGA,eAAgB,CACd,MAAMyH,EAAgB,CAAA,EACtB,SAAW,CAAC/L,EAAK+D,CAAK,IAAK,KAAK,MAAM,UACpCgI,EAAc/L,CAAG,EAAI,CACnB,IAAK,KAAK,IAAG,EAAK+D,EAAM,UACxB,QAAS,KAAK,IAAG,EAAKA,EAAM,UAAY,KAAK,YACrD,EAGI,MAAO,CACL,SAAUgI,EACV,WAAYzH,GAAyB,cAAa,CACxD,CACE,CACF,CAGO,MAAM0H,GAAkB,IAAIhC,GCtgBnC,MAAMiC,EAA6B,CACjC,aAAc,CACZ,KAAK,kBAAoB,GACzB,KAAK,kBAAoB,GAAK,GAAK,GAAK,IACxC,KAAK,mBAAqB,EAC5B,CAGA,MAAM,uBAAuB7I,EAAQ,CACnC,QAAQ,IAAI,uCAAuCA,CAAM,EAAE,EAE3D,GAAI,CAEF,GAAI,KAAK,kBAAmB,CAC1B,MAAM8I,EAAkB,MAAM,KAAK,mBAAmB9I,CAAM,EAC5D,GAAI8I,GAAmB,KAAK,WAAWA,CAAe,EACpD,eAAQ,IAAI,+CAA+C9I,CAAM,EAAE,EAC5D8I,EACEA,GACT,QAAQ,IAAI,2CAA2C9I,CAAM,6BAA6B,CAE9F,CAGA,MAAMe,EAAa,MAAMG,GAAyB,uBAAuBlB,CAAM,EAC/E,GAAIe,GAAc,KAAK,WAAWA,CAAU,EAC1C,eAAQ,IAAI,2CAA2Cf,CAAM,EAAE,EACxDe,EAMT,GALWA,GACT,QAAQ,IAAI,sCAAsCf,CAAM,6BAA6B,EAInF,KAAK,mBAAoB,CAC3B,QAAQ,IAAI,qCAAqCA,CAAM,EAAE,EACzD,MAAM+I,EAAe,MAAMH,GAAgB,gCAAgC5I,CAAM,EAEjF,GAAI+I,GAAgB,CAACA,EAAa,MAEhC,aAAM7H,GAAyB,uBAAuBlB,EAAQ+I,CAAY,EACnEA,CAEX,CAGA,MAAM,IAAI,MAAM,yBAAyB,CAE3C,OAASvN,EAAO,CACd,eAAQ,MAAM,4CAA4CwE,CAAM,IAAKxE,CAAK,EAGnE,KAAK,oBAAoBwE,EAAQxE,EAAM,OAAO,CACvD,CACF,CAGA,WAAWqB,EAAM,CACf,GAAI,CAACA,GAAQ,CAACA,EAAK,MACjB,MAAO,GAIT,MAAM+K,EAAW/K,EAAK,MAAM,MAC5B,GAAI+K,GAAa,MAAkCA,IAAa,MAC9D,MAAO,GAIT,GAAI/K,EAAK,YAAcA,EAAK,WAAW,OAAQ,CAE7C,MAAMmM,EADYnM,EAAK,WAAW,OACF,OAAOsF,GAAKA,GAAM,MAA2B,CAAC,MAAMA,CAAC,CAAC,EAAE,OAGxF,GAAI6G,EAAgB,EAClB,eAAQ,IAAI,+BAA+BA,CAAa,eAAe,EAChE,EAEX,CAEA,MAAO,EACT,CAGA,MAAM,mBAAmBhJ,EAAQ,CAC/B,GAAI,CACF,QAAQ,IAAI,kCAAkCA,CAAM,EAAE,EAEtD,MAAMnD,EAAO,MAAM+D,GAAyB,uBAAuBZ,CAAM,EAGnEM,EAAa,IAAI,KAAKzD,EAAK,WAAW,EAG5C,OAFY,KAAK,IAAG,EAAKyD,EAAW,QAAO,GAEhC,KAAK,mBACd,QAAQ,IAAI,gCAAgCN,CAAM,KAAKnD,EAAK,OAAO,GAAG,EAC/D,CACL,GAAGA,EACH,OAAQ,gBAAgBA,EAAK,OAAO,IACpC,SAAU,OACpB,IAEQ,QAAQ,IAAI,kCAAkCmD,CAAM,KAAKnD,EAAK,OAAO,GAAG,EACjE,KAGX,OAASrB,EAAO,CACd,eAAQ,IAAI,wCAAwCwE,CAAM,KAAKxE,EAAM,OAAO,EAAE,EACvE,IACT,CACF,CAGA,oBAAoBwE,EAAQiJ,EAAc,CACxC,MAAO,CACL,IAAK,CAAE,MAAO,KAAM,OAAQ,KAAK,EACjC,KAAM,CAAE,MAAO,KAAM,OAAQ,KAAK,EAClC,KAAM,CAAE,MAAO,KAAM,OAAQ,KAAK,EAClC,MAAO,CAAE,MAAO,KAAM,OAAQ,KAAK,EACnC,KAAM,CAAE,MAAO,KAAM,OAAQ,KAAK,EAClC,MAAO,CAAE,MAAO,KAAM,OAAQ,KAAK,EACnC,MAAO,CAAE,MAAO,KAAM,OAAQ,KAAK,EACnC,iBAAkB,CAAE,MAAO,KAAM,OAAQ,KAAK,EAC9C,uBAAwB,CAAE,MAAO,KAAM,OAAQ,KAAK,EACpD,oBAAqB,CAAE,MAAO,KAAM,OAAQ,KAAK,EACjD,OAAQ,CAAE,MAAO,KAAM,OAAQ,KAAK,EACpC,MAAO,CAAE,MAAO,KAAM,OAAQ,KAAK,EACnC,MAAO,CAAE,MAAO,KAAM,OAAQ,KAAK,EACnC,KAAM,CAAE,MAAO,KAAM,OAAQ,KAAK,EAClC,YAAa,IAAI,KAAI,EAAG,YAAW,EACnC,MAAOA,EACP,OAAQ,QACR,OAAQjJ,CACd,CACE,CAGA,MAAM,2BAA2BA,EAAQ,CACvC,QAAQ,IAAI,gCAAgCA,CAAM,EAAE,EAGpDkB,GAAyB,iBAAiBlB,CAAM,EAChDY,GAAyB,WAAU,EAGnC,MAAMsI,EAAmB,KAAK,mBACxBC,EAAsB,KAAK,kBAEjC,KAAK,mBAAqB,GAC1B,KAAK,kBAAoB,GAEzB,GAAI,CAEF,OADa,MAAM,KAAK,uBAAuBnJ,CAAM,CAEvD,QAAC,CAEC,KAAK,mBAAqBkJ,EAC1B,KAAK,kBAAoBC,CAC3B,CACF,CAGA,MAAM,4BAA4BC,EAASC,EAAgB,EAAG,CAC5D,MAAM/L,EAAU,IAAI,IACdgM,EAAU,CAAA,EAGhB,QAAS/K,EAAI,EAAGA,EAAI6K,EAAQ,OAAQ7K,GAAK8K,EACvCC,EAAQ,KAAKF,EAAQ,MAAM7K,EAAGA,EAAI8K,CAAa,CAAC,EAGlD,QAAQ,IAAI,iBAAiBD,EAAQ,MAAM,eAAeE,EAAQ,MAAM,UAAU,EAElF,UAAWC,KAASD,EAAS,CAC3B,MAAME,EAAgBD,EAAM,IAAI,MAAMvJ,GAAU,CAC9C,GAAI,CACF,MAAMnD,EAAO,MAAM,KAAK,uBAAuBmD,CAAM,EACrD,MAAO,CAAE,OAAAA,EAAQ,QAAS,GAAM,KAAAnD,CAAI,CACtC,OAASrB,EAAO,CACd,MAAO,CAAE,OAAAwE,EAAQ,QAAS,GAAO,MAAOxE,EAAM,QAChD,CACF,CAAC,GAEoB,MAAM,QAAQ,IAAIgO,CAAa,GAEvC,QAAQzN,GAAU,CAC7BuB,EAAQ,IAAIvB,EAAO,OAAQA,CAAM,CACnC,CAAC,EAGGuN,EAAQ,QAAQC,CAAK,EAAID,EAAQ,OAAS,GAC5C,MAAM,IAAI,QAAQnO,GAAW,WAAWA,EAAS,GAAG,CAAC,CAEzD,CAEA,OAAOmC,CACT,CAGA,MAAM,qBAAsB,CAC1B,MAAMmM,EAAS,CACb,YAAa,CACX,UAAW,GACX,QAAS,CAAA,EACT,WAAY,IACpB,EACM,MAAOvI,GAAyB,cAAa,EAC7C,SAAU,CACR,UAAW,GACX,QAAS0H,GAAgB,YAAY,MAC7C,CACA,EAEI,GAAI,CACF,MAAMc,EAAmB,MAAM9I,GAAyB,mBACpD8I,IACFD,EAAO,YAAc,CACnB,UAAW,GACX,QAASC,EAAiB,QAC1B,WAAYA,EAAiB,YAC7B,WAAYA,EAAiB,WAC7B,OAAQA,EAAiB,MACnC,EAEI,OAASlO,EAAO,CACd,QAAQ,KAAK,oCAAqCA,CAAK,CACzD,CAEA,OAAOiO,CACT,CAGA,eAAeE,EAAS,CAClBA,EAAQ,oBAAsB,SAChC,KAAK,kBAAoBA,EAAQ,mBAE/BA,EAAQ,qBAAuB,SACjC,KAAK,mBAAqBA,EAAQ,oBAEhCA,EAAQ,oBAAsB,SAChC,KAAK,kBAAoBA,EAAQ,mBAGnC,QAAQ,IAAI,uBAAwB,CAClC,kBAAmB,KAAK,kBACxB,mBAAoB,KAAK,mBACzB,kBAAmB,KAAK,iBAC9B,CAAK,CACH,CACF,CAGO,MAAMC,GAA+B,IAAIf,GC3PhD,MAAMgB,EAAmB,CACvB,aAAc,CACZ,KAAK,UAAY,GACjB,KAAK,eAAiB,EACtB,KAAK,cAAgB,IAAI,IACzB,KAAK,gBAAkB,KACvB,KAAK,cAAgB,KAGrB,KAAK,OAAS,CACZ,cAAe,EACf,WAAY,IACZ,cAAe,EACf,WAAY,IACZ,iBAAkB,KAAK,wBAAuB,EAC9C,sBAAuB,GACvB,kBAAmB,GACnB,eAAgB,GAAK,GAAK,GAAK,IAC/B,iBAAkB,GACxB,EAGI,KAAK,eAAiB,CACpB,OAAQ,OAAQ,KAAM,OAAQ,MAAO,OAAQ,MAAO,OAAQ,MAAO,OACnE,MAAO,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,MAAO,MAAO,OACrE,OAAQ,OAAQ,OAAQ,MAC9B,CACE,CAGA,MAAM,OAAQ,CAIZ,GAHA,QAAQ,IAAI,qCAAqC,EAG7C,CAAC,KAAK,0BAA2B,CACnC,QAAQ,IAAI,qDAAqD,EACjE,MACF,CAEA,GAAI,CAEF,MAAMC,EAAe,MAAM,KAAK,oBAAmB,EAE/CA,EAAa,QACf,QAAQ,IAAI,qBAAqBA,EAAa,MAAM,EAAE,EACtD,MAAM,KAAK,cAAa,GAExB,QAAQ,IAAI,2BAA2B,EAIrC,KAAK,OAAO,kBACd,KAAK,uBAAsB,CAG/B,OAAStO,EAAO,CACd,QAAQ,MAAM,0CAA2CA,CAAK,CAChE,CACF,CAGA,MAAM,qBAAsB,CAC1B,GAAI,CAEF,MAAMuO,EAAiB,MAAM,KAAK,kBAAiB,EAC7CC,EAAoB,KAAK,qBAAoB,EAEnD,GAAI,KAAK,OAAO,uBAAyBD,IAAmBC,EAC1D,MAAO,CACL,OAAQ,GACR,OAAQ,wBAAwBA,CAAiB,OAAOD,CAAc,EAChF,EAIM,MAAME,EAAiB,KAAK,kBAAiB,EAC7C,GAAI,KAAK,OAAO,mBAAqB,CAACA,EACpC,MAAO,CACL,OAAQ,GACR,OAAQ,uCAClB,EAIM,GAAIA,EAAgB,CAClB,MAAMC,EAAsB,KAAK,IAAG,EAAKD,EACzC,GAAIC,EAAsB,KAAK,OAAO,eACpC,MAAO,CACL,OAAQ,GACR,OAAQ,2BAA2B,KAAK,MAAMA,EAAsB,IAAO,CAAC,QACxF,CAEM,CAGA,MAAMC,EAAa,MAAM,KAAK,cAAa,EAC3C,OAAIA,EAAW,SAAW,KAAK,OAAO,iBAC7B,CACL,OAAQ,GACR,OAAQ,uBAAuB,KAAK,MAAMA,EAAW,SAAW,GAAG,CAAC,IAC9E,EAGa,CAAE,OAAQ,GAAO,OAAQ,6BAA6B,CAE/D,OAAS3O,EAAO,CACd,eAAQ,MAAM,8BAA+BA,CAAK,EAC3C,CAAE,OAAQ,GAAM,OAAQ,gDAAgD,CACjF,CACF,CAGA,MAAM,eAAgB,CACpB,GAAI,KAAK,UACP,eAAQ,IAAI,+BAA+B,EACpC,KAAK,cAGd,QAAQ,IAAI,gCAAgC,KAAK,eAAe,MAAM,aAAa,EAEnF,KAAK,UAAY,GACjB,KAAK,eAAiB,EACtB,KAAK,cAAc,MAAK,EACxB,KAAK,gBAAkB,KAAK,IAAG,EAE/B,MAAMG,EAAQ,qBACdc,GAAmB,MAAMd,CAAK,EAE9B,GAAI,CAEF,MAAM2N,EAAU,KAAK,cAAc,KAAK,eAAgB,KAAK,OAAO,aAAa,EAEjF,QAAS/K,EAAI,EAAGA,EAAI+K,EAAQ,OAAQ/K,IAAK,CACvC,MAAMgL,EAAQD,EAAQ/K,CAAC,EACvB,QAAQ,IAAI,uBAAuBA,EAAI,CAAC,IAAI+K,EAAQ,MAAM,KAAKC,EAAM,KAAK,IAAI,CAAC,EAAE,EAGjF,MAAMC,EAAgBD,EAAM,IAAIvJ,GAAU,KAAK,aAAaA,CAAM,CAAC,GAC9C,MAAM,QAAQ,IAAIwJ,CAAa,GAGvC,QAAQ,CAACzN,EAAQmC,IAAU,CACtC,KAAK,cAAc,IAAIqL,EAAMrL,CAAK,EAAGnC,CAAM,CAC7C,CAAC,EAGD,KAAK,gBAAmBwC,EAAI,GAAK+K,EAAQ,OAAU,IACnD,QAAQ,IAAI,uBAAuB,KAAK,MAAM,KAAK,cAAc,CAAC,GAAG,EAGjE/K,EAAI+K,EAAQ,OAAS,IACvB,QAAQ,IAAI,aAAa,KAAK,OAAO,UAAU,yBAAyB,EACxE,MAAM,KAAK,MAAM,KAAK,OAAO,UAAU,EAE3C,CAEA,KAAK,cAAgB,KAAK,IAAG,EAC7B,MAAMzN,EAAW,KAAK,cAAgB,KAAK,gBAGrC2C,EAAQ,KAAK,eAAc,EAEjC,eAAQ,IAAI,gCAAgC,KAAK,MAAM3C,EAAW,GAAI,CAAC,GAAG,EAC1E,QAAQ,IAAI,eAAe2C,EAAM,UAAU,IAAIA,EAAM,KAAK,gBAAgBA,EAAM,WAAW,IAAI,EAG/F,KAAK,iBAAiBA,CAAK,EAEpB,KAAK,aAEd,OAAShD,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACR,QAAC,CACC,KAAK,UAAY,GACjBiB,GAAmB,IAAId,CAAK,CAC9B,CACF,CAGA,MAAM,aAAaqE,EAAQoK,EAAU,EAAG,CACtC,MAAMxO,EAAY,KAAK,IAAG,EAE1B,GAAI,CACF,QAAQ,IAAI,iBAAiBoE,CAAM,aAAaoK,CAAO,IAAI,KAAK,OAAO,cAAgB,CAAC,GAAG,EAG3F,MAAMvN,EAAO,MAAM+M,GAA6B,uBAAuB5J,CAAM,EAEvEnE,EAAW,KAAK,IAAG,EAAKD,EAE9B,GAAIiB,GAAQ,CAACA,EAAK,MAChB,eAAQ,IAAI,KAAKmD,CAAM,8BAA8BnE,CAAQ,OAAOgB,EAAK,MAAM,GAAG,EAC3E,CACL,QAAS,GACT,SAAAhB,EACA,OAAQgB,EAAK,OACb,UAAW,IAAI,KAAI,EAAG,YAAW,CAC3C,EAEQ,MAAM,IAAI,OAAMA,GAAA,YAAAA,EAAM,QAAS,eAAe,CAGlD,OAASrB,EAAO,CAId,OAHA,QAAQ,MAAM,uBAAuBwE,CAAM,aAAaoK,CAAO,MAAM5O,EAAM,OAAO,EAAE,EAGhF4O,GAAW,KAAK,OAAO,eACzB,QAAQ,IAAI,eAAepK,CAAM,OAAO,KAAK,OAAO,UAAU,OAAO,EACrE,MAAM,KAAK,MAAM,KAAK,OAAO,UAAU,EAChC,KAAK,aAAaA,EAAQoK,EAAU,CAAC,GAErC,CACL,QAAS,GACT,MAAO5O,EAAM,QACb,SAAU,KAAK,IAAG,EAAKI,EACvB,UAAW,IAAI,KAAI,EAAG,YAAW,CAC3C,CAEI,CACF,CAGA,cAAcyB,EAAOgN,EAAW,CAC9B,MAAMf,EAAU,CAAA,EAChB,QAAS/K,EAAI,EAAGA,EAAIlB,EAAM,OAAQkB,GAAK8L,EACrCf,EAAQ,KAAKjM,EAAM,MAAMkB,EAAGA,EAAI8L,CAAS,CAAC,EAE5C,OAAOf,CACT,CAGA,MAAM,mBAAoB,CACxB,GAAI,CAEF,MAAMgB,EAAa,KAAK,kBAAiB,EAEnCrM,EAAW,MAAM,MAAMqM,CAAU,EACvC,GAAIrM,EAAS,GAEX,OADY,MAAMA,EAAS,KAAI,GACpB,SAAW,OAE1B,OAASzC,EAAO,CACd,eAAQ,KAAK,gCAAiCA,CAAK,EAE5C,KAAK,IAAG,EAAG,SAAQ,CAC5B,CAEA,MAAO,OACT,CAGA,mBAAoB,CAClB,MAAMqE,EAAW,OAAO,SAAS,SAC3BC,EAAW,OAAO,SAAS,SAGjC,OAAID,IAAa,2BAEXC,EAAS,SAAS,wBAAwB,EACrC,sCAOJ,eACT,CAGA,sBAAuB,CACrB,OAAO,aAAa,QAAQ,sBAAsB,GAAK,IACzD,CAGA,mBAAoB,CAClB,MAAM3D,EAAO,aAAa,QAAQ,mBAAmB,EACrD,OAAOA,EAAO,SAASA,CAAI,EAAI,IACjC,CAGA,MAAM,eAAgB,CACpB,IAAIoO,EAAc,EAElB,UAAWvK,KAAU,KAAK,eACxB,GAAI,CAEavC,EAAiB,IAAI,wBAAwBuC,CAAM,EAAE,GAElEuK,GAEJ,MAAgB,CAEhB,CAGF,MAAO,CACL,MAAO,KAAK,eAAe,OAC3B,OAAQA,EACR,SAAUA,EAAc,KAAK,eAAe,MAClD,CACE,CAGA,gBAAiB,CACf,MAAMjN,EAAU,MAAM,KAAK,KAAK,cAAc,QAAQ,EAChDkN,EAAalN,EAAQ,OAAOmN,GAAKA,EAAE,OAAO,EAAE,OAC5CC,EAASpN,EAAQ,OAAOmN,GAAK,CAACA,EAAE,OAAO,EAAE,OAE/C,MAAO,CACL,MAAOnN,EAAQ,OACf,WAAAkN,EACA,OAAAE,EACA,YAAa,KAAK,MAAOF,EAAalN,EAAQ,OAAU,GAAG,EAC3D,SAAU,KAAK,cAAgB,KAAK,gBACpC,gBAAiBA,EAAQ,OAAO,CAACpB,EAAKuO,IAAMvO,EAAMuO,EAAE,SAAU,CAAC,EAAInN,EAAQ,MACjF,CACE,CAGA,iBAAiBkB,EAAO,CACtB,MAAMuL,EAAiB,KAAK,kBAAiB,EAE7C,aAAa,QAAQ,uBAAwBA,CAAc,EAC3D,aAAa,QAAQ,oBAAqB,KAAK,IAAG,EAAG,UAAU,EAC/D,aAAa,QAAQ,qBAAsB,KAAK,UAAUvL,CAAK,CAAC,EAEhE,QAAQ,IAAI,wBAAwB,CACtC,CAGA,wBAAyB,CACvB,QAAQ,IAAI,qCAAqC,KAAK,OAAO,eAAiB,IAAO,QAAQ,EAE7F,YAAY,SAAY,CACtB,QAAQ,IAAI,6BAA6B,EACzC,GAAI,CACF,MAAM,KAAK,cAAa,CAC1B,OAAShD,EAAO,CACd,QAAQ,MAAM,4BAA6BA,CAAK,CAClD,CACF,EAAG,KAAK,OAAO,cAAc,CAC/B,CAGA,MAAM,qBAAsB,CAC1B,eAAQ,IAAI,4BAA4B,EACjC,KAAK,cAAa,CAC3B,CAGA,iBAAkB,CAChB,MAAO,CACL,UAAW,KAAK,UAChB,SAAU,KAAK,eACf,QAAS,OAAO,YAAY,KAAK,aAAa,EAC9C,eAAgB,KAAK,kBAAiB,EACtC,kBAAmB,KAAK,qBAAoB,EAC5C,eAAgB,KAAK,eACrB,OAAQ,KAAK,MACnB,CACE,CAGA,MAAMmP,EAAI,CACR,OAAO,IAAI,QAAQxP,GAAW,WAAWA,EAASwP,CAAE,CAAC,CACvD,CAGA,yBAA0B,CACxB,MAAM9K,EAAW,OAAO,SAAS,SAC3BC,EAAW,OAAO,SAAS,SAQjC,MALI,GAAAD,IAAa,2BAA6BC,EAAS,SAAS,wBAAwB,GAKpFD,IAAa,aAAeA,IAAa,aAAe,CAACA,EAAS,SAAS,OAAO,EAKxF,CAGA,aAAa+K,EAAW,CACtB,KAAK,OAAS,CAAE,GAAG,KAAK,OAAQ,GAAGA,CAAS,EAC5C,QAAQ,IAAI,kCAAmC,KAAK,MAAM,CAC5D,CAGA,iBAAiB5K,EAAQ,CAClB,KAAK,eAAe,SAASA,CAAM,IACtC,KAAK,eAAe,KAAKA,CAAM,EAC/B,QAAQ,IAAI,WAAWA,CAAM,qBAAqB,EAEtD,CAGA,oBAAoBA,EAAQ,CAC1B,MAAM9B,EAAQ,KAAK,eAAe,QAAQ8B,CAAM,EAC5C9B,EAAQ,KACV,KAAK,eAAe,OAAOA,EAAO,CAAC,EACnC,QAAQ,IAAI,aAAa8B,CAAM,uBAAuB,EAE1D,CACF,CAGO,MAAM6K,GAAqB,IAAIhB,GC/ZtC,MAAMiB,EAAkB,CACtB,aAAc,CACZ,KAAK,cAAgB,EACrB,KAAK,eAAiB,EACtB,KAAK,MAAQ,CAAA,EACb,KAAK,mBAAqB,IAC1B,KAAK,MAAQ,CACX,cAAe,EACf,kBAAmB,EACnB,eAAgB,EAChB,gBAAiB,EACjB,UAAW,CAAA,CAAC,CAEhB,CASA,MAAM,WAAWC,EAAcC,EAAUC,EAAW,EAAG,CACrD,OAAO,IAAI,QAAQ,CAAC9P,EAASC,IAAW,CACtC,MAAM8P,EAAO,CACX,GAAIF,EACJ,aAAAD,EACA,SAAAE,EACA,QAAA9P,EACA,OAAAC,EACA,UAAW,KAAK,IAAA,CAAI,EAItB,GAAI,KAAK,eAAe,IAAI4P,CAAQ,EAAG,CACrC,QAAQ,KAAK,UAAUA,CAAQ,iDAAiD,EAChF5P,EAAO,IAAI,MAAM,wBAAwB,CAAC,EAC1C,MACF,CAGA,KAAK,iBAAiB8P,CAAI,EAC1B,KAAK,MAAM,gBAEX,QAAQ,IAAI,4BAA4BF,CAAQ,wBAAwBC,CAAQ,iBAAiB,KAAK,MAAM,MAAM,GAAG,EAGrH,KAAK,aAAA,CACP,CAAC,CACH,CAKA,iBAAiBC,EAAM,CACrB,IAAIC,EAAc,KAAK,MAAM,OAG7B,QAAS5M,EAAI,EAAGA,EAAI,KAAK,MAAM,OAAQA,IACrC,GAAI2M,EAAK,SAAW,KAAK,MAAM3M,CAAC,EAAE,SAAU,CAC1C4M,EAAc5M,EACd,KACF,CAGF,KAAK,MAAM,OAAO4M,EAAa,EAAGD,CAAI,CACxC,CAKA,MAAM,cAAe,CAEnB,GAAI,KAAK,gBAAkB,KAAK,eAAiB,KAAK,MAAM,SAAW,EACrE,OAIF,MAAMA,EAAO,KAAK,MAAM,MAAA,EACxB,KAAK,iBACL,KAAK,eAAe,IAAIA,EAAK,EAAE,EAE/B,MAAMtP,EAAY,KAAK,IAAA,EAEvB,QAAQ,IAAI,wCAAwCsP,EAAK,EAAE,KAAK,KAAK,cAAc,IAAI,KAAK,aAAa,cAAc,EAEvH,GAAI,CAEF,MAAMA,EAAK,aAAA,EAEX,MAAME,EAAW,KAAK,IAAA,EAAQxP,EAC9B,KAAK,YAAYwP,EAAU,EAAI,EAE/B,QAAQ,IAAI,0CAA0CF,EAAK,EAAE,OAAOE,CAAQ,IAAI,EAChFF,EAAK,QAAA,CAEP,OAAS1P,EAAO,CACd,MAAM4P,EAAW,KAAK,IAAA,EAAQxP,EAC9B,KAAK,YAAYwP,EAAU,EAAK,EAEhC,QAAQ,MAAM,qCAAqCF,EAAK,EAAE,UAAUE,CAAQ,MAAO5P,CAAK,EACxF0P,EAAK,OAAO1P,CAAK,CAEnB,QAAA,CAEE,KAAK,iBACL,KAAK,eAAe,OAAO0P,EAAK,EAAE,EAGlC,WAAW,IAAM,KAAK,aAAA,EAAgB,GAAG,CAC3C,CACF,CAKA,YAAYE,EAAUC,EAAS,CACzBA,EACF,KAAK,MAAM,oBAEX,KAAK,MAAM,iBAGb,KAAK,MAAM,UAAU,KAAKD,CAAQ,EAG9B,KAAK,MAAM,UAAU,OAAS,KAChC,KAAK,MAAM,UAAU,MAAA,EAIvB,KAAK,MAAM,gBAAkB,KAAK,MAAM,UAAU,OAAO,CAAClP,EAAKC,IAASD,EAAMC,EAAM,CAAC,EAAI,KAAK,MAAM,UAAU,MAChH,CAKA,aAAa6O,EAAU,CAErB,MAAMM,EAAY,KAAK,MAAM,UAAUJ,GAAQA,EAAK,KAAOF,CAAQ,EACnE,OAAIM,IAAc,IACH,KAAK,MAAM,OAAOA,EAAW,CAAC,EAAE,CAAC,EACzC,OAAO,IAAI,MAAM,uBAAuB,CAAC,EAC9C,QAAQ,IAAI,8CAA8CN,CAAQ,EAAE,EAC7D,IAGF,EACT,CAKA,YAAa,CACX,MAAMO,EAAiB,KAAK,MAAM,OAClC,KAAK,MAAM,QAAQL,GAAQ,CACzBA,EAAK,OAAO,IAAI,MAAM,eAAe,CAAC,CACxC,CAAC,EACD,KAAK,MAAQ,CAAA,EACb,QAAQ,IAAI,+CAA+CK,CAAc,QAAQ,CACnF,CAKA,WAAY,CACV,MAAO,CACL,eAAgB,KAAK,eACrB,UAAW,KAAK,MAAM,OACtB,cAAe,KAAK,cACpB,MAAO,CAAE,GAAG,KAAK,KAAA,CAAM,CAE3B,CAKA,iBAAiB9J,EAAK,CACpB,KAAK,cAAgB,KAAK,IAAI,EAAG,KAAK,IAAI,GAAIA,CAAG,CAAC,EAClD,QAAQ,IAAI,4CAA4C,KAAK,aAAa,EAAE,EAGxE,KAAK,eAAiB,KAAK,eAC7B,KAAK,aAAA,CAET,CAKA,YAAa,CACX,KAAK,MAAQ,CACX,cAAe,EACf,kBAAmB,EACnB,eAAgB,EAChB,gBAAiB,EACjB,UAAW,CAAA,CAAC,EAEd,QAAQ,IAAI,gCAAgC,CAC9C,CACF,CAGO,MAAM+J,GAAoB,IAAIV,GC9KhCjR,GAAU,CACb,KAAM,wBACN,MAAO,CACL,WAAY,CACV,KAAM,OACN,SAAU,IAEZ,OAAQ,CACN,KAAM,OACN,SAAU,IAEZ,UAAW,CACT,KAAM,OACN,SAAU,IAEZ,OAAQ,CACN,KAAM,OACN,QAAS,SAEX,SAAU,CACR,KAAM,OACN,QAAS,CACX,GAEF,MAAO,CACL,MAAO,CACL,UAAW,GACX,OAAQ,GACR,MAAO,GACP,SAAU,KACV,cAAe,CACjB,CACF,EACA,SAAU,CACR,aAAc,CACZ,MAAO,eAAe,KAAK,UAAU,IAAI,KAAK,IAAG,CAAE,EACrD,GAEF,SAAU,CACR,KAAK,0BAAyB,CAChC,EACA,eAAgB,CACV,KAAK,UACP,KAAK,SAAS,WAAU,CAE5B,EACA,QAAS,CACP,2BAA4B,CAE1B,MAAM4R,EAAc,CAClB,EAAG,QACH,EAAG,QACH,EAAG,MACL,EAEA,KAAK,SAAW,IAAI,qBACjBC,GAAY,CACXA,EAAQ,QAASC,GAAU,CACrBA,EAAM,gBAAkB,CAAC,KAAK,QAAU,CAAC,KAAK,QAChD,KAAK,UAAY,GACjB,KAAK,WAAU,EACf,KAAK,SAAS,WAAU,EAE5B,CAAC,CACH,EACA,CACE,WAAYF,EAAY,KAAK,QAAQ,GAAK,QAC1C,UAAW,EACb,CACF,EAEA,KAAK,SAAS,QAAQ,KAAK,MAAM,SAAS,CAC5C,EAEA,MAAM,YAAa,CACjB,KAAK,cAAgB,YAAY,IAAG,EAEpC,GAAI,CAQF,MAAMG,EANS,CACb,EAAG,EACH,EAAG,IACH,EAAG,GACL,EAEqB,KAAK,QAAQ,GAAK,EACnCA,EAAQ,GACV,MAAM,IAAI,QAAQzQ,GAAW,WAAWA,EAASyQ,CAAK,CAAC,EAIzD,MAAMZ,EAAW,QAAQ,KAAK,UAAU,IAAI,KAAK,WAAW,GAC5D,MAAMQ,GAAkB,WACtB,IAAM,KAAK,aAAY,EACvBR,EACA,KAAK,QACP,CACF,OAASa,EAAK,CACZ,QAAQ,MAAM,yBAA0BA,CAAG,EAC3C,KAAK,MAAQ,EACf,CACF,EAEA,MAAM,cAAe,CACnB,OAAO,IAAI,QAAQ,CAAC1Q,EAASC,IAAW,CACtC,KAAK,UAAU,IAAM,CACnB,MAAM0Q,EAAY,KAAK,MAAM,UAC7B,GAAI,CAACA,EAAW,CACd1Q,EAAO,IAAI,MAAM,qBAAqB,CAAC,EACvC,MACF,CAGA,MAAM2Q,EAAkBD,EAAU,cAAc,sCAAsC,EAClFC,IACFA,EAAgB,MAAM,QAAU,QAGlC,GAAI,CAEF,MAAMC,EAAkB,SAAS,cAAc,KAAK,EACpDA,EAAgB,UAAY,+BAC5BA,EAAgB,MAAM,OAAS,OAC/BA,EAAgB,MAAM,MAAQ,OAE9B,MAAMC,EAAgB,SAAS,cAAc,KAAK,EAClDA,EAAc,UAAY,uCAC1BA,EAAc,MAAM,OAAS,OAC7BA,EAAc,MAAM,MAAQ,OAE5BD,EAAgB,YAAYC,CAAa,EAGzC,MAAM1Q,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,KAAO,kBACdA,EAAO,IAAM,KAAK,UAClBA,EAAO,MAAQ,GAGf,MAAM2Q,EAAa,KAAK,UAAU,KAAK,MAAM,EAC7C3Q,EAAO,UAAY2Q,EAGnB,QAAQ,IAAI,eAAe,KAAK,UAAU,uBAAwB,KAAK,MAAM,EAC7E,QAAQ,IAAI,kBAAmBA,CAAU,EASzC,MAAMC,EAAU,WAAW,IAAM,CAC/B,QAAQ,KAAK,GAAG,KAAK,UAAU,sBAAsB,EACrD,KAAK,MAAQ,GACb/Q,EAAO,IAAI,MAAM,qBAAqB,CAAC,CACzC,EAViB,CACf,EAAG,IACH,EAAG,IACH,EAAG,IACL,EAMY,KAAK,QAAQ,GAAK,GAAK,EAEnCG,EAAO,OAAS,IAAM,CACpB,aAAa4Q,CAAO,EACpB,KAAK,OAAS,GAEd,MAAMf,EAAW,YAAY,IAAG,EAAK,KAAK,cAC1C,QAAQ,IAAI,KAAK,KAAK,UAAU,qBAAqBA,EAAS,QAAQ,CAAC,CAAC,iBAAiB,KAAK,QAAQ,GAAG,EAEzGjQ,EAAO,CACT,EAEAI,EAAO,QAAWC,GAAU,CAC1B,aAAa2Q,CAAO,EACpB,QAAQ,MAAM,KAAK,KAAK,UAAU,uBAAwB3Q,CAAK,EAC/D,KAAK,MAAQ,GACbJ,EAAO,IAAI,MAAM,oBAAoB,CAAC,CACxC,EAGA6Q,EAAc,YAAY1Q,CAAM,EAChCuQ,EAAU,YAAYE,CAAe,CAEvC,OAASxQ,EAAO,CACd,QAAQ,MAAM,KAAK,KAAK,UAAU,2BAA4BA,CAAK,EACnE,KAAK,MAAQ,GACbJ,EAAOI,CAAK,CACd,CACF,CAAC,CACH,CAAC,CACH,EAEA,MAAM,OAAQ,CACZ,KAAK,MAAQ,GACb,KAAK,OAAS,GACd,MAAM,KAAK,WAAU,CACvB,CACF,CACF,sBA5NsC,MAAM,sBACjCxB,GAAA,CAAA,MAAM,qBAAqB,EAEzBC,GAAA,CAAA,MAAM,kBAAkB,YAMU,MAAM,4BAM/B,MAAM,oDAtB1BK,EA0BM,MAAA,CAzBJ,MAAM,cACL,GAAI8R,EAAA,YACL,IAAI,YACH,gBAAiBC,EAAA,MAAM,CAAA,IAGZ,CAAAC,EAAA,YAAcA,EAAA,QAA1BjS,IAAAC,EAMM,MANNP,GAMM,CALJQ,EAIM,MAJNP,GAIM,CAHJU,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAsC,MAAA,CAAjC,MAAM,kBAAkB,EAAC,KAAE,EAAA,GAChCA,EAA2D,MAA3DN,GAA2DsS,EAA1BF,EAAA,UAAU,EAAG,UAAO,CAAA,EACrD3R,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAqD,MAAA,CAAhD,MAAM,uBAAsB,iBAAc,EAAA,iBAKxC+R,EAAA,WAAS,CAAKA,EAAA,QAAM,CAAKA,EAAA,OAApCjS,IAAAC,EAGM,MAHNJ,GAGM,aAFJK,EAAmC,MAAA,CAA9B,MAAM,iBAAiB,EAAA,KAAA,EAAA,GAC5BA,EAAwC,OAAA,KAAlC,WAAQgS,EAAGF,EAAA,UAAU,EAAG,MAAG,CAAA,cAIxBC,EAAA,OAAXjS,IAAAC,EAGM,MAHNH,GAGM,CAFJO,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAA8B,YAAxB,oBAAiB,EAAA,GACvBA,EAAuD,SAAA,CAA9C,4BAAO6R,EAAA,OAAAA,EAAA,MAAA,GAAAI,CAAA,GAAO,MAAM,aAAY,OAAK,qFCX/C3S,GAAU,CACb,KAAM,YACN,MAAO,CACL,MAAO,CACL,QAAS,GACT,MAAO,GACP,SAAU,cAAc,KAAK,IAAG,CAAE,EACpC,CACF,EACA,SAAU,CACR,KAAK,cAAa,CACpB,EACA,QAAS,CACP,MAAM,eAAgB,CACpB,KAAK,QAAU,GACf,KAAK,MAAQ,GAEb,GAAI,CAEF,MAAMiS,EAAY,KAAK,MAAM,aAC7B,GAAI,CAACA,EAAW,OAGhB,KAAOA,EAAU,YACfA,EAAU,YAAYA,EAAU,UAAU,EAG5C,QAAQ,IAAI,qDAAqD,EAGjE,MAAM,KAAK,aAAY,CAEzB,OAAStQ,EAAO,CACd,QAAQ,MAAM,gCAAiCA,CAAK,EACpD,KAAK,MAAQ,GACb,KAAK,QAAU,EACjB,CACF,EAEA,MAAM,cAAe,CACnB,OAAO,IAAI,QAAQ,CAACL,EAASC,IAAW,CACtC,KAAK,UAAU,IAAM,CACnB,MAAM0Q,EAAY,KAAK,MAAM,aAC7B,GAAI,CAACA,EAAW,CACd1Q,EAAO,IAAI,MAAM,qBAAqB,CAAC,EACvC,MACF,CAEA,GAAI,CAEF,MAAM4Q,EAAkB,SAAS,cAAc,KAAK,EACpDA,EAAgB,UAAY,+BAC5BA,EAAgB,MAAM,OAAS,OAC/BA,EAAgB,MAAM,MAAQ,OAE9B,MAAMC,EAAgB,SAAS,cAAc,KAAK,EAClDA,EAAc,UAAY,uCAC1BA,EAAc,MAAM,OAAS,OAC7BA,EAAc,MAAM,MAAQ,OAE5BD,EAAgB,YAAYC,CAAa,EAGzC,MAAM1Q,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,KAAO,kBACdA,EAAO,IAAM,gFACbA,EAAO,MAAQ,GAGf,MAAMkR,EAAY,CAChB,UAAa,EACb,SAAY,EACZ,UAAa,OACb,WAAc,GACd,UAAa,qBACb,cAAiB,yBACjB,cAAiB,0BACjB,gBAAmB,yBACnB,gBAAmB,UACnB,gBAAmB,UACnB,QAAW,UACX,UAAa,UACb,cAAiB,UACjB,gBAAmB,UACnB,YAAe,UACf,cAAiB,UACjB,WAAc,QACd,cAAiB,GACjB,OAAU,KACV,UAAa,GACb,cAAiB,QACjB,UAAa,SACb,WAAc,8EACd,eAAkB,IAClB,WAAc,oBACd,QAAW,CAAC,CAAC,iBAAiB,CAAC,EAC/B,WAAc,CAAC,SAAU,SAAU,QAAQ,EAC3C,SAAY,KACZ,eAAkB,SAClB,SAAY,GACZ,MAAS,OACT,OAAU,OACV,YAAe,GACf,eAAkB,GAClB,iBAAoB,GACpB,eAAkB,EACpB,EAGMP,EAAa,KAAK,UAAUO,CAAS,EAC3ClR,EAAO,UAAY2Q,EAEnB,QAAQ,IAAI,yBAA0BO,CAAS,EAC/C,QAAQ,IAAI,kBAAmBP,CAAU,EAGzC,MAAMC,EAAU,WAAW,IAAM,CAC/B,QAAQ,KAAK,2BAA2B,EACxC,KAAK,MAAQ,GACb,KAAK,QAAU,GACf/Q,EAAO,IAAI,MAAM,qBAAqB,CAAC,CACzC,EAAG,GAAI,EAGPG,EAAO,OAAS,IAAM,CACpB,aAAa4Q,CAAO,EACpB,QAAQ,IAAI,oCAAoC,EAChD,KAAK,QAAU,GACfhR,EAAO,CACT,EAEAI,EAAO,QAAWC,GAAU,CAC1B,aAAa2Q,CAAO,EACpB,QAAQ,MAAM,8BAA+B3Q,CAAK,EAClD,KAAK,MAAQ,GACb,KAAK,QAAU,GACfJ,EAAO,IAAI,MAAM,oBAAoB,CAAC,CACxC,EAGA6Q,EAAc,YAAY1Q,CAAM,EAChCuQ,EAAU,YAAYE,CAAe,CAEvC,OAASxQ,EAAO,CACd,QAAQ,MAAM,gCAAiCA,CAAK,EACpD,KAAK,MAAQ,GACb,KAAK,QAAU,GACfJ,EAAOI,CAAK,CACd,CACF,CAAC,CACH,CAAC,CACH,CACF,CACF,MAtKO,MAAM,uBAAuB,IAAI,eAAgB,MAAO,CAAA,OAAA,OAAA,aACvC,MAAM,2BAIR,MAAM,wCAL1B,OAAAnB,EAAA,EAAAC,EASM,MATNR,GASM,CAROwS,EAAA,SAAXjS,IAAAC,EAGM,MAHNP,GAGM,CAAA,GAAAW,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAFJH,EAAmC,MAAA,CAA9B,MAAM,iBAAiB,EAAA,KAAA,EAAA,EAC5BA,EAAiC,YAA3B,uBAAoB,EAAA,gBAEjB+R,EAAA,OAAXjS,IAAAC,EAGM,MAHNN,GAGM,CAFJU,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAkC,YAA5B,wBAAqB,EAAA,GAC3BA,EAA+D,SAAA,CAAtD,4BAAO6R,EAAA,eAAAA,EAAA,cAAA,GAAAI,CAAA,GAAe,MAAM,aAAY,OAAK,mFC8JvD3S,GAAU,CACb,KAAM,0BACN,MAAO,CACL,MAAO,CAEL,WAAY,CACV,MAAO,GACP,KAAM,GACN,KAAM,GACN,QAAS,GACT,MAAO,GACP,KAAM,GACN,YAAa,IAEf,WAAY,IAAI,IAClB,CACF,EACA,SAAU,CACR,gBAAiB,CAEf,MAAM0H,EAAS,OAAO,OAAO,KAAK,UAAU,EAE5C,OADgBA,EAAO,OAAO,CAACrF,EAAKwQ,IAAQxQ,EAAMwQ,EAAK,CAAC,EAAInL,EAAO,MAErE,EAEA,aAAc,CAEZ,OAAQ,KAAK,eAAiB,IAAM,GACtC,EAEA,SAAU,CACR,MAAMoL,EAAQ,KAAK,aAAe,KAAK,GAAK,KAC5C,MAAO,KAAM,IAAM,KAAK,IAAIA,CAAK,CACnC,EAEA,SAAU,CACR,MAAMA,EAAQ,KAAK,aAAe,KAAK,GAAK,KAC5C,MAAO,KAAM,IAAM,KAAK,IAAIA,CAAK,CACnC,EAEA,kBAAmB,CACjB,OAAI,KAAK,gBAAkB,GAAW,eAClC,KAAK,gBAAkB,GAAW,OAClC,KAAK,gBAAkB,GAAW,UAClC,KAAK,gBAAkB,GAAW,QAC/B,eACT,EAEA,gBAAiB,CACf,OAAI,KAAK,gBAAkB,GAAW,eAClC,KAAK,gBAAkB,GAAW,OAClC,KAAK,gBAAkB,GAAW,UAClC,KAAK,gBAAkB,GAAW,QAC/B,eACT,EAEA,sBAAuB,CACrB,OAAI,KAAK,gBAAkB,GAAW,gEAClC,KAAK,gBAAkB,GAAW,8DAClC,KAAK,gBAAkB,GAAW,wDAClC,KAAK,gBAAkB,GAAW,4DAC/B,8DACT,GAEF,SAAU,CAER,QAAQ,IAAI,wDAAyD,KAAK,cAAc,CAC1F,EACA,QAAS,CAEP,kBAAmB,CAEjB,KAAK,WAAa,IAAI,KACtB,QAAQ,IAAI,gCAAiC,KAAK,cAAc,CAClE,CACF,CACF,EAjPO7S,GAAA,CAAA,MAAM,4BAA4B,EAQhCC,GAAA,CAAA,MAAM,mCAAmC,EAEvCC,GAAA,CAAA,MAAM,WAAW,EAGbC,GAAA,CAAA,MAAM,qBAAqB,EAExBC,GAAA,CAAA,MAAM,gBAAgB,EAEzBC,GAAA,CAAA,MAAM,uBAAuB,EAI/BC,GAAA,CAAA,MAAM,eAAe,MACrB,MAAM,YAAY,QAAQ,cAAc,MAAM,8BAqC9CwS,GAAA,CAAA,MAAM,cAAc,qBAiBjB,EAAE,MAAM,EAAE,MAAM,cAAY,SAAS,MAAM,eA8BhDC,GAAA,CAAA,MAAM,oBAAoB,EAExBC,GAAA,CAAA,MAAM,iBAAiB,EACrBC,GAAA,CAAA,MAAM,gBAAgB,EAEpBC,GAAA,CAAA,MAAM,eAAe,EAElBC,GAAA,CAAA,MAAM,iBAAiB,EAG5BC,GAAA,CAAA,MAAM,gBAAgB,EAEpBC,GAAA,CAAA,MAAM,eAAe,EAElBC,GAAA,CAAA,MAAM,iBAAiB,EAG5BC,GAAA,CAAA,MAAM,gBAAgB,EAEpBC,GAAA,CAAA,MAAM,eAAe,EAElBC,GAAA,CAAA,MAAM,iBAAiB,EAG5BC,GAAA,CAAA,MAAM,gBAAgB,EAEpBC,GAAA,CAAA,MAAM,eAAe,EAElBC,GAAA,CAAA,MAAM,iBAAiB,EAG5BC,GAAA,CAAA,MAAM,gBAAgB,EAEpBC,GAAA,CAAA,MAAM,eAAe,EAElBC,GAAA,CAAA,MAAM,iBAAiB,EAG5BC,GAAA,CAAA,MAAM,gBAAgB,EAEpBC,GAAA,CAAA,MAAM,eAAe,EAElBC,GAAA,CAAA,MAAM,iBAAiB,EAG5BC,GAAA,CAAA,MAAM,gBAAgB,EAEpBC,GAAA,CAAA,MAAM,eAAe,EAElBC,GAAA,CAAA,MAAM,iBAAiB,2BA3JzC,OAAA9T,EAAA,EAAAC,EAiKM,MAjKNR,GAiKM,eAhKJS,EAKM,MAAA,CALD,MAAM,iBAAe,CACxBA,EAAiC,UAA7B,0BAAwB,EAC5BA,EAEM,MAAA,CAFD,MAAM,YAAY,EAAA,CACrBA,EAAqE,OAAA,CAA/D,MAAM,mBAAmB,EAAC,gCAA8B,UAIlEA,EAwJM,MAxJNR,GAwJM,CAtJJQ,EA6FM,MA7FNP,GA6FM,CA3FJO,EAMM,MAAA,CAND,MAAK6T,EAAA,CAAC,oBAA4BhC,EAAA,cAAc,CAAA,IACnD7R,EAGM,MAHNN,GAGM,aAFJM,EAAiC,MAAA,CAA5B,MAAM,eAAe,EAAA,KAAA,EAAA,GAC1BA,EAA0D,OAA1DL,GAA0DqS,EAA1BH,EAAA,gBAAgB,EAAA,CAAA,IAElD7R,EAAmE,MAAnEJ,GAAmEoS,EAA7BH,EAAA,oBAAoB,EAAA,CAAA,MAI5D7R,EAiFI,MAjFJH,GAiFI,EAhFJC,IAAAC,EAuDM,MAvDN+T,GAuDM,wtCAlBJ9T,EAcI,IAdJqS,GAcI,CAbFrS,EASE,OAAA,CARC,GAAI,IACJ,GAAI,IACJ,GAAI6R,EAAA,QACJ,GAAIA,EAAA,QACL,OAAO,OACP,eAAa,IACb,iBAAe,QACf,MAAM,uCAGR7R,EAA8C,SAAA,CAAtC,GAAG,MAAM,GAAG,MAAM,EAAE,IAAI,KAAK,8BACrCA,EAA8C,SAAA,CAAtC,GAAG,MAAM,GAAG,MAAM,EAAE,IAAI,KAAK,oBAIvCA,EAAqG,OAArG+T,GAAqG/B,EAAnCH,EAAA,eAAe,QAAO,CAAA,CAAA,EAAA,CAAA,y4BA8B5F7R,EAqDM,MArDNsS,GAqDM,CApDJnS,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAyB,UAArB,mBAAgB,EAAA,GACpBA,EAkDM,MAlDNuS,GAkDM,CAjDJvS,EAMM,MANNwS,GAMM,CALJrS,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAyD,OAAA,CAAnD,MAAM,gBAAgB,EAAC,wBAAqB,EAAA,GAClDA,EAGM,MAHNyS,GAGM,CAFJzS,EAA6E,MAAA,CAAxE,MAAM,iBAAkB,MAAKgU,EAAA,CAAA,MAAWjC,EAAA,WAAW,MAAK,GAAA,CAAA,WAC7D/R,EAA2D,OAA3D0S,GAA2DV,EAA1BD,EAAA,WAAW,KAAK,EAAA,CAAA,MAGrD/R,EAMM,MANN2S,GAMM,CALJxS,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAA6D,OAAA,CAAvD,MAAM,gBAAgB,EAAC,4BAAyB,EAAA,GACtDA,EAGM,MAHN4S,GAGM,CAFJ5S,EAA4E,MAAA,CAAvE,MAAM,iBAAkB,MAAKgU,EAAA,CAAA,MAAWjC,EAAA,WAAW,KAAI,GAAA,CAAA,WAC5D/R,EAA0D,OAA1D6S,GAA0Db,EAAzBD,EAAA,WAAW,IAAI,EAAA,CAAA,MAGpD/R,EAMM,MANN8S,GAMM,CALJ3S,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAA8D,OAAA,CAAxD,MAAM,gBAAgB,EAAC,6BAA0B,EAAA,GACvDA,EAGM,MAHN+S,GAGM,CAFJ/S,EAA4E,MAAA,CAAvE,MAAM,iBAAkB,MAAKgU,EAAA,CAAA,MAAWjC,EAAA,WAAW,KAAI,GAAA,CAAA,WAC5D/R,EAA0D,OAA1DgT,GAA0DhB,EAAzBD,EAAA,WAAW,IAAI,EAAA,CAAA,MAGpD/R,EAMM,MANNiT,GAMM,CALJ9S,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAkD,OAAA,CAA5C,MAAM,gBAAgB,EAAC,iBAAc,EAAA,GAC3CA,EAGM,MAHNkT,GAGM,CAFJlT,EAA+E,MAAA,CAA1E,MAAM,iBAAkB,MAAKgU,EAAA,CAAA,MAAWjC,EAAA,WAAW,QAAO,GAAA,CAAA,WAC/D/R,EAA6D,OAA7DmT,GAA6DnB,EAA5BD,EAAA,WAAW,OAAO,EAAA,CAAA,MAGvD/R,EAMM,MANNoT,GAMM,CALJjT,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAoD,OAAA,CAA9C,MAAM,gBAAgB,EAAC,mBAAgB,EAAA,GAC7CA,EAGM,MAHNqT,GAGM,CAFJrT,EAA6E,MAAA,CAAxE,MAAM,iBAAkB,MAAKgU,EAAA,CAAA,MAAWjC,EAAA,WAAW,MAAK,GAAA,CAAA,WAC7D/R,EAA2D,OAA3DsT,GAA2DtB,EAA1BD,EAAA,WAAW,KAAK,EAAA,CAAA,MAGrD/R,EAMM,MANNuT,GAMM,CALJpT,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAqD,OAAA,CAA/C,MAAM,gBAAgB,EAAC,oBAAiB,EAAA,GAC9CA,EAGM,MAHNwT,GAGM,CAFJxT,EAA4E,MAAA,CAAvE,MAAM,iBAAkB,MAAKgU,EAAA,CAAA,MAAWjC,EAAA,WAAW,KAAI,GAAA,CAAA,WAC5D/R,EAA0D,OAA1DyT,GAA0DzB,EAAzBD,EAAA,WAAW,IAAI,EAAA,CAAA,MAGpD/R,EAMM,MANN0T,GAMM,CALJvT,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAoD,OAAA,CAA9C,MAAM,gBAAgB,EAAC,mBAAgB,EAAA,GAC7CA,EAGM,MAHN2T,GAGM,CAFJ3T,EAAmF,MAAA,CAA9E,MAAM,iBAAkB,MAAKgU,EAAA,CAAA,MAAWjC,EAAA,WAAW,YAAW,GAAA,CAAA,WACnE/R,EAAiE,OAAjE4T,GAAiE5B,EAAhCD,EAAA,WAAW,WAAW,EAAA,CAAA,6EC/DhEzS,GAAU,CACb,KAAM,wBACR,EA9FOC,GAAA,CAAA,MAAM,0BAA0B,EAE9BC,GAAA,CAAA,MAAM,2BAA2B,EAI/BC,GAAA,CAAA,MAAM,sBAAsB,EAoB9BC,GAAA,CAAA,MAAM,iCAAiC,EAIrCC,GAAA,CAAA,MAAM,uBAAuB,EAmC/BC,GAAA,CAAA,MAAM,2BAA2B,EAI/BC,GAAA,CAAA,MAAM,uBAAuB,EAC3BiU,GAAA,CAAA,MAAM,uBAAuB,EAOjCzB,GAAA,CAAA,MAAM,2BAA2B,EAI/B4B,GAAA,CAAA,MAAM,2BAA2B,2BAjF1C,OAAAnU,EAAA,EAAAC,EAwFM,MAxFNR,GAwFM,CAtFJS,EAOM,MAPNR,GAOM,aANJQ,EAEM,MAAA,CAFD,MAAM,0BAAwB,CACjCA,EAAkC,MAAA,CAA7B,MAAM,gBAAgB,CAAA,QAE7BA,EAEM,MAFNP,GAEM,MADJM,EAAgEmU,EAAA,KAAAC,EAAlB,EAALnQ,GAAzChE,EAAgE,MAAA,CAA3D,MAAM,uBAAuC,IAAKgE,meAmB3DhE,EAWM,MAXNN,GAWM,aAVJM,EAEM,MAAA,CAFD,MAAM,0BAAwB,CACjCA,EAAkC,MAAA,CAA7B,MAAM,gBAAgB,CAAA,QAE7BA,EAMM,MANNL,GAMM,MALJI,EAIMmU,EAAA,KAAAC,EAJuC,EAALnQ,GAAxChE,EAIM,MAAA,CAJD,MAAM,sBAAsC,IAAKgE,oBACpDhE,EAAuC,MAAA,CAAlC,MAAM,qBAAqB,EAAA,KAAA,EAAA,EAChCA,EAAwC,MAAA,CAAnC,MAAM,sBAAsB,EAAA,KAAA,EAAA,EACjCA,EAA0C,MAAA,CAArC,MAAM,wBAAwB,EAAA,KAAA,EAAA,i0BA+BzCA,EASM,MATNJ,GASM,aARJI,EAEM,MAAA,CAFD,MAAM,0BAAwB,CACjCA,EAAkC,MAAA,CAA7B,MAAM,gBAAgB,CAAA,QAE7BA,EAIM,MAJNH,GAIM,CAHJG,EAEM,MAFN8T,GAEM,MADJ/T,EAAkEmU,EAAA,KAAAC,EAAnB,GAALnQ,GAA1ChE,EAAkE,MAAA,CAA7D,MAAM,wBAAyC,IAAKgE,gBAM/DhE,EAUM,MAVNqS,GAUM,aATJrS,EAEM,MAAA,CAFD,MAAM,0BAAwB,CACjCA,EAAkC,MAAA,CAA7B,MAAM,gBAAgB,CAAA,QAE7BA,EAKM,MALNiU,GAKM,MAJJlU,EAGMmU,EAAA,KAAAC,EAH6C,EAALnQ,GAA9ChE,EAGM,MAAA,CAHD,MAAM,4BAA4C,IAAKgE,oBAC1DhE,EAA8C,MAAA,CAAzC,MAAM,4BAA4B,EAAA,KAAA,EAAA,EACvCA,EAA8C,MAAA,CAAzC,MAAM,4BAA4B,EAAA,KAAA,EAAA,iFCmC5CV,GAAU,CACb,KAAM,kBACN,WAAY,CACV,sBAAA8U,GACA,UAAAC,GACA,wBAAAC,GACA,uBAAAC,IAEF,MAAO,CACL,MAAO,CACL,QAAS,GACT,MAAO,KACP,OAAQ,KAAK,IAAG,CAClB,CACF,EACA,SAAU,CAER,KAAK,YAAW,EAChB,KAAK,eAAc,CACrB,EACA,MAAO,CACL,QAAS,CAEP,KAAK,YAAW,CAClB,GAEF,QAAS,CACP,MAAM,gBAAiB,CACrB,GAAI,CAEF,MAAM,IAAI,QAAQ3T,GAAW,WAAWA,EAAS,GAAG,CAAC,EACrD,KAAK,QAAU,EACjB,OAAS0Q,EAAK,CACZ,KAAK,MAAQ,OAAOA,CAAG,EACvB,KAAK,QAAU,EACjB,CACF,EACA,MAAM,SAAU,CACd,KAAK,QAAU,GACf,KAAK,MAAQ,KACb,KAAK,OAAS,KAAK,IAAG,EACtB,MAAM,KAAK,eAAc,CAC3B,EAGA,aAAc,CAEZ,KAAK,UAAU,IAAM,CACnB,OAAO,SAAS,CACd,IAAK,EACL,KAAM,EACN,SAAU,SACX,EAGD,WAAW,IAAM,CACf,OAAO,SAAS,EAAG,CAAC,CACtB,EAAG,GAAG,CACR,CAAC,CACH,EAGA,kBAAmB,CACjB,KAAK,OAAS,KAAK,IAAG,EACtB,QAAQ,IAAI,iCAAkC,KAAK,MAAM,CAC3D,GAEF,SAAU,CACR,eAAgB,CACd,MAAO,CACL,QAAW,CACT,CAAC,QAAW,kBAAkB,MAAS,eAAe,EACtD,CAAC,QAAW,aAAa,MAAS,kBAAkB,EACpD,CAAC,QAAW,oBAAoB,MAAS,gBAAgB,EACzD,CAAC,QAAW,iBAAiB,MAAS,gBAAgB,EACtD,CAAC,QAAW,eAAe,MAAS,KAAK,EACzC,CAAC,QAAW,WAAW,MAAS,MAAM,GAExC,WAAc,QACd,OAAU,KACV,cAAiB,GACjB,cAAiB,GACjB,eAAkB,EACpB,CACF,EAEA,kBAAmB,CACjB,MAAO,CACL,YAAe,UACf,SAAY,SACZ,WAAc,QACd,cAAiB,GACjB,OAAU,KACV,OAAU,QACV,MAAS,OACT,OAAU,MACZ,CACF,EAEA,aAAc,CACZ,MAAO,CACL,UAAa,EACb,SAAY,EACZ,UAAa,eACb,WAAc,GACd,UAAa,qBACb,cAAiB,yBACjB,cAAiB,0BACjB,gBAAmB,yBACnB,gBAAmB,UACnB,gBAAmB,UACnB,QAAW,UACX,UAAa,UACb,cAAiB,UACjB,gBAAmB,UACnB,YAAe,UACf,cAAiB,UACjB,WAAc,QACd,cAAiB,GACjB,OAAU,KACV,UAAa,GACb,cAAiB,QACjB,UAAa,SACb,WAAc,8EACd,eAAkB,IAClB,WAAc,oBACd,QAAW,CAAC,CAAC,kBAAkB,EAAE,CAAC,eAAe,EAAE,CAAC,sBAAsB,EAAE,CAAC,mBAAmB,EAAE,CAAC,iBAAiB,EAAE,CAAC,aAAa,CAAC,EACrI,WAAc,CAAC,OAAO,EACtB,SAAY,KACZ,eAAkB,SAClB,SAAY,GACZ,MAAS,OACT,OAAU,OACV,YAAe,GACf,eAAkB,GAClB,OAAU,GACV,SAAY,IACZ,YAAe,UACf,YAAe,EACf,iBAAoB,GACpB,eAAkB,EACpB,CACF,EAEA,cAAe,CACb,MAAO,CACL,UAAa,EACb,SAAY,EACZ,UAAa,eACb,WAAc,GACd,UAAa,qBACb,cAAiB,yBACjB,cAAiB,0BACjB,gBAAmB,yBACnB,gBAAmB,UACnB,gBAAmB,UACnB,QAAW,UACX,UAAa,UACb,cAAiB,UACjB,gBAAmB,UACnB,YAAe,UACf,cAAiB,UACjB,WAAc,QACd,cAAiB,GACjB,OAAU,KACV,UAAa,GACb,cAAiB,QACjB,UAAa,SACb,WAAc,8EACd,eAAkB,IAClB,WAAc,oBACd,QAAW,CAAC,CAAC,kBAAkB,EAAE,CAAC,eAAe,EAAE,CAAC,sBAAsB,EAAE,CAAC,mBAAmB,EAAE,CAAC,iBAAiB,EAAE,CAAC,aAAa,CAAC,EACrI,WAAc,CAAC,OAAO,EACtB,SAAY,KACZ,eAAkB,SAClB,SAAY,GACZ,MAAS,OACT,OAAU,OACV,YAAe,GACf,eAAkB,GAClB,OAAU,GACV,SAAY,IACZ,YAAe,UACf,YAAe,EACf,iBAAoB,GACpB,eAAkB,EACpB,CACF,EAEA,eAAgB,CACd,MAAO,CACL,UAAa,CAAA,EACb,WAAc,SACd,SAAY,SACZ,UAAa,mBACb,WAAc,SACd,OAAU,KACV,UAAa,GACb,WAAc,QACd,UAAa,GACb,iBAAoB,GACpB,cAAiB,GACjB,iBAAoB,GACpB,MAAS,OACT,OAAU,MACZ,CACF,CACF,CACF,EAvUO/R,GAAA,CAAA,MAAM,kBAAkB,YAKP,MAAM,mCAKH,MAAM,SACxBG,GAAA,CAAA,MAAM,aAAa,aAOjBE,GAAA,CAAA,MAAM,yBAAyB,EAc/BC,GAAA,CAAA,MAAM,kBAAkB,EAiBxBiU,GAAA,CAAA,MAAM,gCAAgC,EACpCzB,GAAA,CAAA,MAAM,eAAe,EAUvB4B,GAAA,CAAA,MAAM,kBAAkB,EAKtBF,GAAA,CAAA,MAAM,cAAc,EAClBzB,GAAA,CAAA,MAAM,iBAAiB,EAavBC,GAAA,CAAA,MAAM,gCAAgC,EAgB1CC,GAAA,CAAA,MAAM,kBAAkB,4IA/FjC,OAAA1S,EAAA,EAAAC,EA8GM,MA9GNR,GA8GM,CA7GJY,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAwB,UAApB,kBAAe,EAAA,GACnBG,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAA2E,IAAA,CAAxE,MAAM,iBAAiB,EAAC,+CAA4C,EAAA,GAG5D+R,EAAA,SAAXjS,IAAAC,EAEM,MAFNP,GAEM,CADJS,EAA0BuU,CAAA,KAIZzC,EAAA,OAAhBjS,IAAAC,EAGM,MAHNN,GAGM,CAFJO,EAAsC,IAAtCN,GAAsCsS,EAAZD,EAAA,KAAK,EAAA,CAAA,EAC/B/R,EAAiE,SAAA,CAAxD,4BAAO6R,EAAA,SAAAA,EAAA,QAAA,GAAAI,CAAA,GAAS,MAAM,qBAAoB,OAAK,UAI1DlS,EA6FM,MAAAJ,GAAA,CA3FJK,EAWM,MAXNJ,GAWM,aAVJI,EAEM,MAAA,CAFD,MAAM,iBAAe,CACxBA,EAAqB,UAAjB,cAAY,QAElBC,EAMEwU,EAAA,CALA,cAAY,eACX,OAAQ5C,EAAA,cACT,aAAW,wEACX,OAAO,QACN,SAAU,wBAKf7R,EAWM,MAXNH,GAWM,aAVJG,EAEM,MAAA,CAFD,MAAM,iBAAe,CACxBA,EAAoB,UAAhB,aAAW,QAEjBC,EAMEwU,EAAA,CALA,cAAY,cACX,OAAQ5C,EAAA,iBACT,aAAW,yEACX,OAAO,QACN,SAAU,wBAKf5R,EAA2ByU,CAAA,EAG3B1U,EAQM,MARN8T,GAQM,CAPJ9T,EAKM,MALNqS,GAKM,CAJJlS,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAqC,UAAjC,+BAA4B,EAAA,GAChCA,EAES,SAAA,CAFA,4BAAO6R,EAAA,kBAAAA,EAAA,iBAAA,GAAAI,CAAA,GAAkB,MAAM,4BAA2B,kBAEnE,SAEF0C,GAAoCC,EAAA,CAAxB,WAAY7C,EAAA,MAAM,QAIhC/R,EAgCM,MAhCNiU,GAgCM,aA/BJjU,EAEM,MAAA,CAFD,MAAM,iBAAe,CACxBA,EAAuB,UAAnB,gBAAc,QAGpBA,EA0BM,MA1BN+T,GA0BM,CAzBJ/T,EAWM,MAXNsS,GAWM,aAVJtS,EAEM,MAAA,CAFD,MAAM,kBAAgB,CACzBA,EAAmC,UAA/B,4BAA0B,QAEhCC,EAMEwU,EAAA,CALA,cAAY,uBACX,OAAQ5C,EAAA,YACT,aAAW,gFACX,OAAO,QACN,SAAU,wBAIf7R,EAWM,MAXNuS,GAWM,aAVJvS,EAEM,MAAA,CAFD,MAAM,kBAAgB,CACzBA,EAAoC,UAAhC,6BAA2B,QAEjCC,EAMEwU,EAAA,CALA,cAAY,wBACX,OAAQ5C,EAAA,aACT,aAAW,gFACX,OAAO,QACN,SAAU,4BAOnB7R,EAWM,MAXNwS,GAWM,aAVJxS,EAEM,MAAA,CAFD,MAAM,iBAAe,CACxBA,EAAsB,UAAlB,eAAa,QAEnBC,EAMEwU,EAAA,CALA,cAAY,gBACX,OAAQ5C,EAAA,cACT,aAAW,8EACX,OAAO,QACN,SAAU,4FCpGrB,MAAMgD,EAAoB,CACxB,aAAc,CACZ,KAAK,MAAQ,KACb,KAAK,WAAa,KAClB,KAAK,aAAe,EAAI,GAAK,GAC/B,CAKA,cAAe,CAGb,MAAO,0CACT,CAKA,MAAM,YAAa,CACjB,GAAI,CAEF,GAAI,KAAK,OAAS,KAAK,YAClB,KAAK,MAAQ,KAAK,WAAc,KAAK,aACxC,OAAO,KAAK,MAGd,MAAMnI,EAAM,KAAK,aAAA,EACXhJ,EAAW,MAAM,MAAM,GAAGgJ,CAAG,MAAM,KAAK,IAAA,CAAK,EAAE,EAErD,GAAI,CAAChJ,EAAS,GACZ,MAAM,IAAI,MAAM,QAAQA,EAAS,MAAM,EAAE,EAG3C,MAAMW,EAAS,MAAMX,EAAS,KAAA,EAG9B,GAAI,CAACW,EAAO,QAAU,CAAC,MAAM,QAAQA,EAAO,MAAM,EAChD,MAAM,IAAI,MAAM,6CAA6C,EAI/D,YAAK,MAAQA,EACb,KAAK,WAAa,KAAK,IAAA,EAEvB,QAAQ,IAAI,YAAYA,EAAO,OAAO,MAAM,iCAAiC,EACtEA,CAET,OAASpD,EAAO,CAId,OAHA,QAAQ,MAAM,kCAAmCA,CAAK,EAGlD,KAAK,OACP,QAAQ,KAAK,4CAA4C,EAClD,KAAK,OAIP,KAAK,kBAAA,CACd,CACF,CAKA,MAAM,mBAAoB,CAExB,OADe,MAAM,KAAK,WAAA,GACZ,OACX,OAAO6T,GAASA,EAAM,OAAO,EAC7B,IAAIA,GAASA,EAAM,MAAM,CAC9B,CAKA,MAAM,qBAAqBpE,EAAW,EAAG,CAEvC,OADe,MAAM,KAAK,WAAA,GACZ,OACX,OAAOoE,GAASA,EAAM,SAAWA,EAAM,WAAapE,CAAQ,EAC5D,IAAIoE,GAASA,EAAM,MAAM,CAC9B,CAKA,MAAM,iBAAiBrP,EAAQ,CAE7B,MAAMqP,GADS,MAAM,KAAK,WAAA,GACL,OAAO,KAAK,GAAK,EAAE,SAAWrP,CAAM,EACzD,OAAOqP,EAAQA,EAAM,SAAW,QAClC,CAKA,MAAM,eAAerP,EAAQ,CAE3B,MAAMqP,GADS,MAAM,KAAK,WAAA,GACL,OAAO,KAAK,GAAK,EAAE,SAAWrP,CAAM,EACzD,OAAOqP,EAAQA,EAAM,OAAS,SAChC,CAKA,MAAM,iBAAiBrP,EAAQ,CAE7B,MAAMqP,GADS,MAAM,KAAK,WAAA,GACL,OAAO,KAAK,GAAK,EAAE,SAAWrP,CAAM,EACzD,OAAOqP,EAAQA,EAAM,SAAW,SAClC,CAKA,MAAM,aAAarP,EAAQ,CAEzB,OADe,MAAM,KAAK,WAAA,GACZ,OAAO,QAAUsP,EAAE,SAAWtP,CAAM,GAAK,IACzD,CAKA,MAAM,cAAe,OAEnB,QAAOgI,GADQ,MAAM,KAAK,WAAA,GACZ,WAAP,YAAAA,EAAiB,YAAa,CAAC,OAAQ,SAAU,MAAM,CAChE,CAKA,MAAM,YAAa,OAEjB,QAAOA,GADQ,MAAM,KAAK,WAAA,GACZ,WAAP,YAAAA,EAAiB,UAAW,CAAA,CACrC,CAKA,MAAM,qBAAsB,CAC1B,MAAMpJ,EAAS,MAAM,KAAK,WAAA,EACpB2Q,EAAS,CAAA,EAEf,OAAA3Q,EAAO,OACJ,OAAOyQ,GAASA,EAAM,OAAO,EAC7B,QAAQA,GAAS,CACXE,EAAOF,EAAM,QAAQ,IACxBE,EAAOF,EAAM,QAAQ,EAAI,CAAA,GAE3BE,EAAOF,EAAM,QAAQ,EAAE,KAAKA,EAAM,MAAM,CAC1C,CAAC,EAEIE,CACT,CAKA,MAAM,mBAAoB,CACxB,MAAM3Q,EAAS,MAAM,KAAK,WAAA,EACpB2Q,EAAS,CAAA,EAEf,OAAA3Q,EAAO,OACJ,OAAOyQ,GAASA,EAAM,OAAO,EAC7B,QAAQA,GAAS,CACXE,EAAOF,EAAM,MAAM,IACtBE,EAAOF,EAAM,MAAM,EAAI,CAAA,GAEzBE,EAAOF,EAAM,MAAM,EAAE,KAAKA,EAAM,MAAM,CACxC,CAAC,EAEIE,CACT,CAKA,MAAM,UAAW,CACf,MAAM3Q,EAAS,MAAM,KAAK,WAAA,EACpB4Q,EAAgB5Q,EAAO,OAAO,OAAO0Q,GAAKA,EAAE,OAAO,EAEzD,MAAO,CACL,MAAO1Q,EAAO,OAAO,OACrB,QAAS4Q,EAAc,OACvB,SAAU5Q,EAAO,OAAO,OAAS4Q,EAAc,OAC/C,UAAW,CAAC,GAAG,IAAI,IAAIA,EAAc,IAAIF,GAAKA,EAAE,QAAQ,CAAC,CAAC,EAC1D,QAAS,CAAC,GAAG,IAAI,IAAIE,EAAc,IAAIF,GAAKA,EAAE,MAAM,CAAC,CAAC,EACtD,QAAS1Q,EAAO,QAChB,YAAaA,EAAO,YAAA,CAExB,CAKA,YAAa,CACX,KAAK,MAAQ,KACb,KAAK,WAAa,KAClB,QAAQ,IAAI,uCAAuC,CACrD,CAKA,MAAM,SAAU,CACd,YAAK,WAAA,EACE,MAAM,KAAK,WAAA,CACpB,CAKA,mBAAoB,CAClB,eAAQ,KAAK,oCAAoC,EAC1C,CACL,QAAS,iBACT,OAAQ,CACN,CAAE,OAAQ,OAAQ,SAAU,SAAU,OAAQ,aAAc,SAAU,0BAA2B,QAAS,GAAM,SAAU,CAAA,EAC1H,CAAE,OAAQ,OAAQ,SAAU,SAAU,OAAQ,oBAAqB,SAAU,qBAAsB,QAAS,GAAM,SAAU,CAAA,EAC5H,CAAE,OAAQ,KAAM,SAAU,OAAQ,OAAQ,cAAe,SAAU,sBAAuB,QAAS,GAAM,SAAU,CAAA,EACnH,CAAE,OAAQ,MAAO,SAAU,OAAQ,OAAQ,aAAc,SAAU,yBAA0B,QAAS,GAAM,SAAU,CAAA,EACtH,CAAE,OAAQ,OAAQ,SAAU,SAAU,OAAQ,aAAc,SAAU,iBAAkB,QAAS,GAAM,SAAU,CAAA,EACjH,CAAE,OAAQ,OAAQ,SAAU,SAAU,OAAQ,oBAAqB,SAAU,qBAAsB,QAAS,GAAM,SAAU,CAAA,EAC5H,CAAE,OAAQ,KAAM,SAAU,SAAU,OAAQ,aAAc,SAAU,yBAA0B,QAAS,GAAM,SAAU,CAAA,CAAE,EAE3H,SAAU,CACR,aAAc,EACd,eAAgB,EAChB,UAAW,CAAC,OAAQ,QAAQ,EAC5B,QAAS,CAAC,aAAc,oBAAqB,aAAa,CAAA,CAC5D,CAEJ,CAKA,MAAM,cAAcoB,EAAQ,CAE1B,OADe,MAAM,KAAK,WAAA,GACZ,OAAO,KAAKqP,GAASA,EAAM,SAAWrP,GAAUqP,EAAM,OAAO,CAC7E,CAKA,MAAM,gBAAiB,CACrB,OAAO,MAAM,KAAK,kBAAA,CACpB,CAKA,iBAAkB,CAChB,OAAO,KAAK,MAAQ,cAAgB,UACtC,CAKA,cAAe,CACb,MAAO,CACL,OAAQ,CAAC,CAAC,KAAK,MACf,WAAY,KAAK,WACjB,SAAU,KAAK,WAAa,KAAK,MAAQ,KAAK,WAAa,EAC3D,aAAc,KAAK,YAAA,CAEvB,CACF,CAGO,MAAMI,GAAe,IAAIL,GC3QhC,MAAMM,EAAY,CAChB,aAAc,CACZ,KAAK,MAAQ,IAAI,IACjB,KAAK,gBAAkB,IAAI,IAC3B,KAAK,aAAe,GACpB,KAAK,aAAe,EAAI,GAAK,GAC/B,CAKA,YAAYC,EAAY3P,EAAQ4P,EAAU,CACxC,MAAO,GAAGD,CAAU,IAAI3P,CAAM,IAAI4P,CAAQ,EAC5C,CAKA,IAAID,EAAY3P,EAAQ4P,EAAU,CAChC,MAAMhT,EAAM,KAAK,YAAY+S,EAAY3P,EAAQ4P,CAAQ,EACnD1P,EAAS,KAAK,MAAM,IAAItD,CAAG,EAEjC,OAAKsD,EAGD,KAAK,IAAG,EAAKA,EAAO,UAAY,KAAK,cACvC,KAAK,MAAM,OAAOtD,CAAG,EACd,IAGF,GARa,EAStB,CAKA,IAAI+S,EAAY3P,EAAQ4P,EAAU,CAChC,MAAMhT,EAAM,KAAK,YAAY+S,EAAY3P,EAAQ4P,CAAQ,EACnD1P,EAAS,KAAK,MAAM,IAAItD,CAAG,EAEjC,OAAIsD,GAAU,KAAK,IAAG,EAAKA,EAAO,WAAa,KAAK,aAC3CA,EAAO,KAGT,IACT,CAKA,IAAIyP,EAAY3P,EAAQ4P,EAAU/S,EAAM,CACtC,MAAMD,EAAM,KAAK,YAAY+S,EAAY3P,EAAQ4P,CAAQ,EAGzD,GAAI,KAAK,MAAM,MAAQ,KAAK,aAAc,CACxC,MAAMC,EAAW,KAAK,MAAM,KAAI,EAAG,KAAI,EAAG,MAC1C,KAAK,MAAM,OAAOA,CAAQ,CAC5B,CAEA,KAAK,MAAM,IAAIjT,EAAK,CAClB,KAAAC,EACA,UAAW,KAAK,IAAG,CACzB,CAAK,CACH,CAKA,UAAU8S,EAAY3P,EAAQ4P,EAAU,CACtC,MAAMhT,EAAM,KAAK,YAAY+S,EAAY3P,EAAQ4P,CAAQ,EACzD,OAAO,KAAK,gBAAgB,IAAIhT,CAAG,CACrC,CAKA,WAAW+S,EAAY3P,EAAQ4P,EAAU1U,EAAS,CAChD,MAAM0B,EAAM,KAAK,YAAY+S,EAAY3P,EAAQ4P,CAAQ,EACzD,YAAK,gBAAgB,IAAIhT,EAAK1B,CAAO,EAGrCA,EAAQ,QAAQ,IAAM,CACpB,KAAK,gBAAgB,OAAO0B,CAAG,CACjC,CAAC,EAEM1B,CACT,CAKA,kBAAkByU,EAAY3P,EAAQ4P,EAAU,CAC9C,MAAMhT,EAAM,KAAK,YAAY+S,EAAY3P,EAAQ4P,CAAQ,EACzD,OAAO,KAAK,gBAAgB,IAAIhT,CAAG,CACrC,CAKA,OAAQ,CACN,KAAK,MAAM,MAAK,EAChB,KAAK,gBAAgB,MAAK,CAC5B,CAKA,cAAe,CACb,MAAMkC,EAAM,KAAK,IAAG,EACpB,SAAW,CAAClC,EAAKsD,CAAM,IAAK,KAAK,MAAM,UACjCpB,EAAMoB,EAAO,UAAY,KAAK,cAChC,KAAK,MAAM,OAAOtD,CAAG,CAG3B,CAKA,UAAW,CACT,MAAO,CACL,UAAW,KAAK,MAAM,KACtB,aAAc,KAAK,gBAAgB,KACnC,aAAc,KAAK,YACzB,CACE,CACF,CAGO,MAAMkT,GAAc,IAAIJ,GAG/B,YAAY,IAAM,CAChBI,GAAY,aAAY,CAC1B,EAAG,GAAK,ECvHR,MAAKjW,GAAU,CACb,KAAM,wBACN,MAAO,CACL,WAAY,CACV,KAAM,OACN,SAAU,GACV,UAAY8G,GAAU,CAAC,WAAY,WAAW,EAAE,SAASA,CAAK,GAEhE,OAAQ,CACN,KAAM,OACN,SAAU,IAEZ,SAAU,CACR,KAAM,OACN,QAAS,UAEX,SAAU,CACR,KAAM,OACN,QAAS,CACX,GAEF,MAAO,CACL,MAAO,CACL,OAAQ,GACR,MAAO,GACP,cAAe,EACf,UAAW,GACX,SAAU,IACZ,CACF,EACA,SAAU,CACR,aAAc,CACZ,MAAO,eAAe,KAAK,UAAU,IAAI,KAAK,MAAM,IAAI,KAAK,IAAG,CAAE,EACpE,EAEA,UAAW,CACT,MAAO,GAAG,KAAK,UAAU,IAAI,KAAK,MAAM,IAAI,KAAK,QAAQ,EAC3D,GAEF,MAAM,SAAU,CACd,KAAK,0BAAyB,CAChC,EACA,eAAgB,CACV,KAAK,UACP,KAAK,SAAS,WAAU,CAE5B,EACA,QAAS,CACP,2BAA4B,CAE1B,MAAM8K,EAAc,CAClB,EAAG,QACH,EAAG,QACH,EAAG,MACL,EAEA,KAAK,SAAW,IAAI,qBACjBC,GAAY,CACXA,EAAQ,QAASC,GAAU,CACrBA,EAAM,gBAAkB,CAAC,KAAK,QAAU,CAAC,KAAK,QAChD,KAAK,UAAY,GACjB,KAAK,WAAU,EACf,KAAK,SAAS,WAAU,EAE5B,CAAC,CACH,EACA,CACE,WAAYF,EAAY,KAAK,QAAQ,GAAK,QAC1C,UAAW,EACb,CACF,EAEA,KAAK,SAAS,QAAQ,KAAK,MAAM,SAAS,CAC5C,EAEA,MAAM,YAAa,CACjB,KAAK,cAAgB,YAAY,IAAG,EACpC,KAAK,OAAS,GACd,KAAK,MAAQ,GAEb,GAAI,CAQF,MAAMG,EANS,CACb,EAAG,EACH,EAAG,IACH,EAAG,GACL,EAEqB,KAAK,QAAQ,GAAK,EAMvC,GALIA,EAAQ,GACV,MAAM,IAAI,QAAQzQ,GAAW,WAAWA,EAASyQ,CAAK,CAAC,EAIrDkE,GAAY,IAAI,KAAK,WAAY,KAAK,OAAQ,KAAK,QAAQ,EAAG,CAChE,MAAM5P,EAAS4P,GAAY,IAAI,KAAK,WAAY,KAAK,OAAQ,KAAK,QAAQ,EAC1E,GAAI5P,EAAQ,CACV,KAAK,mBAAmBA,CAAM,EAC9B,MACF,CACF,CAGA,GAAI4P,GAAY,UAAU,KAAK,WAAY,KAAK,OAAQ,KAAK,QAAQ,EAAG,CAEtE,MADuBA,GAAY,kBAAkB,KAAK,WAAY,KAAK,OAAQ,KAAK,QAAQ,EAEhG,MACF,CAGA,MAAM9E,EAAW,QAAQ,KAAK,UAAU,IAAI,KAAK,MAAM,IAAI,KAAK,WAAW,GACrE+E,EAAcvE,GAAkB,WACpC,IAAM,KAAK,aAAY,EACvBR,EACA,KAAK,QACP,EACA8E,GAAY,WAAW,KAAK,WAAY,KAAK,OAAQ,KAAK,SAAUC,CAAW,EAE/E,MAAMA,CAER,OAASlE,EAAK,CACZ,QAAQ,MAAM,yBAA0BA,CAAG,EAC3C,KAAK,MAAQ,EACf,CACF,EAEA,MAAM,cAAe,CACnB,OAAO,IAAI,QAAQ,CAAC1Q,EAASC,IAAW,CACtC,KAAK,UAAU,SAAY,CACzB,MAAM0Q,EAAY,KAAK,MAAM,UAC7B,GAAI,CAACA,EAAW,CACd1Q,EAAO,IAAI,MAAM,qBAAqB,CAAC,EACvC,MACF,CAEA,MAAMwD,EAAS,KAAK,gBAAe,EAC7B3D,EAAY,KAAK,aAAY,EAGnC,GAAI,CAACQ,GAAgB,YAAYR,CAAS,EACxC,GAAI,CACF,MAAMQ,GAAgB,cAAcR,CAAS,CAC/C,OAASO,EAAO,CACd,QAAQ,KAAK,sDAAuDA,CAAK,CAC3E,CAGF,MAAMD,EAAS,SAAS,cAAc,QAAQ,EAE9CA,EAAO,KAAO,kBACdA,EAAO,IAAMN,EACbM,EAAO,MAAQ,GACfA,EAAO,UAAY,KAAK,UAAUqD,CAAM,EASxC,MAAMuN,EAAU,WAAW,IAAM,CAC/B,KAAK,MAAQ,GACb/Q,EAAO,IAAI,MAAM,qBAAqB,CAAC,CACzC,EATiB,CACf,EAAG,IACH,EAAG,IACH,EAAG,GACL,EAKY,KAAK,QAAQ,GAAK,GAAI,EAElCG,EAAO,OAAS,IAAM,CACpB,aAAa4Q,CAAO,EACpB,KAAK,OAAS,GAEd,MAAMf,EAAW,YAAY,IAAG,EAAK,KAAK,cAC1C,QAAQ,IAAI,UAAU,KAAK,QAAQ,cAAcA,EAAS,QAAQ,CAAC,CAAC,iBAAiB,KAAK,QAAQ,GAAG,EAGrG0E,GAAY,IAAI,KAAK,WAAY,KAAK,OAAQ,KAAK,SAAU,CAC3D,OAAAlR,EACA,UAAA3D,EACD,EAEDE,EAAO,CACT,EAEAI,EAAO,QAAU,IAAM,CACrB,aAAa4Q,CAAO,EACpB,KAAK,MAAQ,GACb/Q,EAAO,IAAI,MAAM,oBAAoB,CAAC,CACxC,EAEA0Q,EAAU,YAAYvQ,CAAM,CAC9B,CAAC,CACH,CAAC,CACH,EAEA,iBAAkB,CAChB,GAAI,KAAK,aAAe,WACtB,MAAO,CACL,UAAa,EACb,SAAY,EACZ,UAAa,eACb,WAAc,GACd,UAAa,qBACb,cAAiB,yBACjB,cAAiB,0BACjB,gBAAmB,yBACnB,gBAAmB,UACnB,gBAAmB,UACnB,QAAW,UACX,UAAa,UACb,cAAiB,UACjB,gBAAmB,UACnB,YAAe,UACf,cAAiB,UACjB,WAAc,QACd,cAAiB,GACjB,OAAU,KACV,UAAa,GACb,cAAiB,QACjB,UAAa,SACb,WAAc,8EACd,eAAkB,IAClB,WAAc,oBACd,QAAW,CAAC,CAAC,KAAK,OAAQ,GAAG,KAAK,QAAQ,IAAI,KAAK,MAAM,KAAK,CAAC,EAC/D,WAAc,CAAC,OAAQ,QAAS,QAAS,SAAU,SAAU,QAAQ,EACrE,SAAY,KACZ,eAAkB,SAClB,SAAY,GACZ,MAAS,OACT,OAAU,OACV,YAAe,GACf,eAAkB,GAClB,OAAU,GACV,SAAY,EACZ,YAAe,UACf,YAAe,EACf,iBAAoB,GACpB,eAAkB,EACpB,EACK,GAAI,KAAK,aAAe,YAC7B,MAAO,CACL,SAAY,KACZ,MAAS,OACT,OAAU,OACV,cAAiB,GACjB,OAAU,GAAG,KAAK,QAAQ,IAAI,KAAK,MAAM,GACzC,iBAAoB,GACpB,OAAU,KACV,WAAc,OAChB,CAEJ,EAEA,cAAe,CACb,GAAI,KAAK,aAAe,WACtB,MAAO,gFACF,GAAI,KAAK,aAAe,YAC7B,MAAO,kFAEX,EAEA,mBAAmB2E,EAAQ,CACzB,KAAK,UAAU,IAAM,CACnB,MAAM4L,EAAY,KAAK,MAAM,UAC7B,GAAI,CAACA,EAAW,OAEhB,MAAMvQ,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,KAAO,kBACdA,EAAO,IAAM2E,EAAO,UACpB3E,EAAO,MAAQ,GACfA,EAAO,UAAY,KAAK,UAAU2E,EAAO,MAAM,EAE/C3E,EAAO,OAAS,IAAM,CACpB,KAAK,OAAS,GACd,MAAM6P,EAAW,YAAY,IAAG,EAAK,KAAK,cAC1C,QAAQ,IAAI,iBAAiB,KAAK,QAAQ,cAAcA,EAAS,QAAQ,CAAC,CAAC,IAAI,CACjF,EAEAU,EAAU,YAAYvQ,CAAM,CAC9B,CAAC,CACH,EAEA,MAAM,OAAQ,CACZ,KAAK,0BAAyB,CAChC,CACF,CACF,sBA9SkC,MAAM,0BAKlB,MAAM,kDAN1BjB,EAUM,MAAA,CAVD,MAAK8T,EAAA,CAAC,cAAa,CAAA,kBAA8B/B,EAAA,aAAU,UAAA,CAAA,CAAA,EAAoB,GAAID,EAAA,YAAa,IAAI,cAC3F,CAAAE,EAAA,SAAWA,EAAA,OAAvBjS,IAAAC,EAGM,MAHNP,GAGM,aAFJQ,EAAmC,MAAA,CAA9B,MAAM,iBAAiB,EAAA,KAAA,EAAA,GAC5BA,EAAwC,OAAA,KAAlC,WAAQgS,EAAGF,EAAA,UAAU,EAAG,MAAG,CAAA,cAGxBC,EAAA,OAAXjS,IAAAC,EAGM,MAHNN,GAGM,CAFJU,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAA8B,YAAxB,oBAAiB,EAAA,GACvBA,EAAuD,SAAA,CAA9C,4BAAO6R,EAAA,OAAAA,EAAA,MAAA,GAAAI,CAAA,GAAO,MAAM,aAAY,OAAK,qFCa/C3S,GAAU,CACb,KAAM,0BACN,MAAO,CACL,OAAQ,CACN,KAAM,OACN,SAAU,IAEZ,SAAU,CACR,KAAM,OACN,QAAS,UAEX,SAAU,CACR,KAAM,OACN,QAAS,CACX,GAEF,MAAO,CACL,MAAO,CACL,OAAQ,GACR,MAAO,GACP,cAAe,EACf,UAAW,GACX,SAAU,KACV,WAAY,CACd,CACF,EACA,SAAU,CACR,aAAc,CACZ,MAAO,sBAAsB,KAAK,MAAM,IAAI,KAAK,IAAG,CAAE,EACxD,GAEF,MAAM,SAAU,CACd,KAAK,0BAAyB,CAChC,EACA,eAAgB,CACV,KAAK,UACP,KAAK,SAAS,WAAU,CAE5B,EACA,QAAS,CACP,2BAA4B,CAE1B,MAAM4R,EAAc,CAClB,EAAG,QACH,EAAG,QACH,EAAG,MACL,EAEA,KAAK,SAAW,IAAI,qBACjBC,GAAY,CACXA,EAAQ,QAASC,GAAU,CACrBA,EAAM,gBAAkB,CAAC,KAAK,QAAU,CAAC,KAAK,QAChD,KAAK,UAAY,GACjB,KAAK,WAAU,EACf,KAAK,SAAS,WAAU,EAE5B,CAAC,CACH,EACA,CACE,WAAYF,EAAY,KAAK,QAAQ,GAAK,QAC1C,UAAW,EACb,CACF,EAEA,KAAK,SAAS,QAAQ,KAAK,MAAM,SAAS,CAC5C,EAEA,MAAM,YAAa,CACjB,KAAK,cAAgB,YAAY,IAAG,EACpC,KAAK,OAAS,GACd,KAAK,MAAQ,GAEb,GAAI,CAQF,MAAMG,EANS,CACb,EAAG,EACH,EAAG,IACH,EAAG,GACL,EAEqB,KAAK,QAAQ,GAAK,EACnCA,EAAQ,GACV,MAAM,IAAI,QAAQzQ,GAAW,WAAWA,EAASyQ,CAAK,CAAC,EAIzD,MAAMZ,EAAW,sBAAsB,KAAK,MAAM,IAAI,KAAK,WAAW,GACtE,MAAMQ,GAAkB,WACtB,IAAM,KAAK,aAAY,EACvBR,EACA,KAAK,QACP,CAEF,OAASa,EAAK,CACZ,QAAQ,MAAM,4CAA6CA,CAAG,EAC9D,KAAK,MAAQ,EACf,CACF,EAEA,MAAM,cAAe,CACnB,OAAO,IAAI,QAAQ,CAAC1Q,EAASC,IAAW,CACtC,KAAK,UAAU,SAAY,CACzB,MAAM0Q,EAAY,KAAK,MAAM,UAC7B,GAAI,CAACA,EAAW,CACd1Q,EAAO,IAAI,MAAM,qBAAqB,CAAC,EACvC,MACF,CAEA,MAAMwD,EAAS,KAAK,gBAAe,EAC7B3D,EAAY,mFAEZM,EAAS,SAAS,cAAc,QAAQ,EAE9CA,EAAO,KAAO,kBACdA,EAAO,IAAMN,EACbM,EAAO,MAAQ,GACfA,EAAO,UAAY,KAAK,UAAUqD,CAAM,EAGxC,MAAMoR,EAAe,CACnB,EAAG,IACH,EAAG,KACH,EAAG,IACL,EAEMC,EAAa,KAAK,YAAc,EAChCC,EAAkBF,EAAa,KAAK,QAAQ,EAAKC,EAAa,IAE9D9D,EAAU,WAAW,IAAM,CAC/B,KAAK,MAAQ,GACb/Q,EAAO,IAAI,MAAM,6BAA6B8U,CAAe,cAAcD,CAAU,GAAG,CAAC,CAC3F,EAAGC,CAAe,EAElB3U,EAAO,OAAS,IAAM,CACpB,aAAa4Q,CAAO,EACpB,KAAK,OAAS,GAEd,MAAMf,EAAW,YAAY,IAAG,EAAK,KAAK,cAC1C,QAAQ,IAAI,6BAA6B,KAAK,MAAM,cAAcA,EAAS,QAAQ,CAAC,CAAC,cAAc6E,CAAU,GAAG,EAEhH9U,EAAO,CACT,EAEAI,EAAO,QAAU,IAAM,CACrB,aAAa4Q,CAAO,EACpB,KAAK,MAAQ,GACb/Q,EAAO,IAAI,MAAM,oBAAoB,CAAC,CACxC,EAGA,MAAM4Q,EAAkBF,EAAU,cAAc,uCAAuC,EACnFE,EACFA,EAAgB,YAAYzQ,CAAM,EAElCuQ,EAAU,YAAYvQ,CAAM,CAEhC,CAAC,CACH,CAAC,CACH,EAEA,iBAAkB,CAChB,MAAO,CACL,WAAc,QACd,YAAe,SACf,cAAiB,GACjB,OAAU,KACV,SAAY,KACZ,gBAAmB,GACnB,MAAS,OACT,OAAU,OACV,OAAU,GAAG,KAAK,QAAQ,IAAI,KAAK,MAAM,GACzC,iBAAoB,EACtB,CACF,EAEA,MAAM,OAAQ,CAEZ,KAAK,YAAc,KAAK,YAAc,GAAK,EAC3C,MAAM4U,EAAa,EAEnB,GAAI,KAAK,WAAaA,EAAY,CAChC,QAAQ,MAAM,6BAA6B,KAAK,MAAM,0BAA0BA,CAAU,GAAG,EAC7F,MACF,CAGA,MAAMC,EAAe,KAAK,IAAI,IAAO,KAAK,IAAI,EAAG,KAAK,WAAa,CAAC,EAAG,GAAI,EAC3E,QAAQ,IAAI,6BAA6B,KAAK,MAAM,gBAAgBA,CAAY,eAAe,KAAK,UAAU,IAAID,CAAU,GAAG,EAE/H,MAAM,IAAI,QAAQhV,GAAW,WAAWA,EAASiV,CAAY,CAAC,EAE9D,KAAK,0BAAyB,CAChC,CACF,CACF,sBAtNkC,MAAM,0BAKlB,MAAM,cAMHnW,GAAA,CAAA,MAAM,8BAA8B,sCAZ3DK,EAeM,MAAA,CAfD,MAAM,8BAA+B,GAAI8R,EAAA,YAAa,IAAI,cACjD,CAAAE,EAAA,SAAWA,EAAA,OAAvBjS,IAAAC,EAGM,MAHNP,GAGM,CAAA,GAAAW,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAFJH,EAAmC,MAAA,CAA9B,MAAM,iBAAiB,EAAA,KAAA,EAAA,EAC5BA,EAA0C,YAApC,gCAA6B,EAAA,gBAG1B+R,EAAA,OAAXjS,IAAAC,EAGM,MAHNN,GAGM,CAFJU,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAA8B,YAAxB,oBAAiB,EAAA,GACvBA,EAAuD,SAAA,CAA9C,4BAAO6R,EAAA,OAAAA,EAAA,MAAA,GAAAI,CAAA,GAAO,MAAM,aAAY,OAAK,cAIhD6D,EAAA9V,EAEM,MAFNN,GAEM,CAAA,GAAAS,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CADJH,EAAwD,MAAA,CAAnD,MAAM,sCAAsC,EAAA,KAAA,EAAA,eADtC+R,EAAA,MAAM,0ECqJlBzS,GAAU,CACb,KAAM,sBACN,MAAO,CACL,OAAQ,CACN,KAAM,OACN,SAAU,IAEZ,SAAU,CACR,KAAM,OACN,QAAS,QACX,GAEF,MAAO,CACL,MAAO,CACL,QAAS,GACT,MAAO,KACP,cAAe,KACf,UAAW,IACb,CACF,EACA,SAAU,CACR,KAAK,kBAAiB,CACxB,EACA,MAAO,CACL,QAAS,CACP,KAAK,kBAAiB,CACxB,GAEF,QAAS,CACP,MAAM,mBAAoB,OACxB,KAAK,QAAU,GACf,KAAK,MAAQ,KACb,KAAK,UAAY,KAEjB,GAAI,CACF,QAAQ,IAAI,iCAAiC,KAAK,MAAM,KAAK,EAE7D,MAAM+B,EAAY,KAAK,MAIvB,KAAK,cAAgB,MAAMgO,GAA6B,uBAAuB,KAAK,MAAM,EAE1F,MAAMwB,EAAW,KAAK,IAAG,EAAKxP,EAE9B,GAAI,KAAK,cAAc,MACrB,MAAM,IAAI,MAAM,KAAK,cAAc,KAAK,EAItC,KAAK,cAAc,OACjB,KAAK,cAAc,OAAO,SAAS,OAAO,EAC5C,KAAK,UAAY,GAAG,KAAK,cAAc,MAAM,KAAKwP,CAAQ,MACjD,KAAK,cAAc,OAAO,SAAS,aAAa,EACzD,KAAK,UAAY,GAAG,KAAK,cAAc,MAAM,KAAKA,CAAQ,MAE1D,KAAK,UAAY,eAAeA,CAAQ,MAG1C,KAAK,UAAY,aAAaA,CAAQ,KAGxC,QAAQ,IAAI,+BAA+B,KAAK,MAAM,IAAK,CACzD,OAAQ,KAAK,cAAc,OAC3B,SAAU,GAAGA,CAAQ,KACrB,OAAQ,CAAC,GAACpD,EAAA,KAAK,cAAc,QAAnB,MAAAA,EAA0B,MACtC,CAAC,EAGG,KAAK,cAAc,OAAS,KAAK,cAAc,MAAM,QAAU,MAAQ,KAAK,cAAc,MAAM,QAAU,MAC5G,QAAQ,IAAI,2BAA2B,KAAK,MAAM,KAAK,KAAK,cAAc,MAAM,KAAK,EAAE,EAEvF,QAAQ,KAAK,kCAAkC,KAAK,MAAM,IAAK,KAAK,cAAc,KAAK,EAIrF,OAAO,OAAW,KACpB,OAAO,cAAc,IAAI,YAAY,gBAAiB,CACpD,OAAQ,CACN,KAAM,uBAAuB,KAAK,MAAM,GACxC,KAAMoD,EACN,SAAU,CACZ,CACF,CAAC,CAAC,CAGN,OAAS5P,EAAO,CACd,QAAQ,MAAM,uCAAuC,KAAK,MAAM,IAAKA,CAAK,EAC1E,KAAK,MAAQA,EAAM,SAGfA,EAAM,QAAQ,SAAS,OAAO,GAAKA,EAAM,QAAQ,SAAS,SAAS,GAAKA,EAAM,QAAQ,SAAS,OAAO,KACxG,KAAK,MAAQ,kCAAkC,KAAK,MAAM,oBAE9D,QAAA,CACE,KAAK,QAAU,EACjB,CACF,EAGA,MAAM,WAAY,CAChB,MAAM,KAAK,mBACb,EAEA,eAAe8K,EAAQ,CACrB,GAAI,CAACA,EAAQ,MAAO,UAEpB,MAAMgK,EAAiB,CAAC,MAAO,WAAY,cAAc,EACnDC,EAAiB,CAAC,OAAQ,YAAY,EAE5C,OAAID,EAAe,SAAShK,CAAM,EAAU,UACxCiK,EAAe,SAASjK,CAAM,EAAU,UACrC,SACT,EAEA,YAAY3F,EAAO,CACjB,OAAIA,GAAU,KAAoC,MAC9C,OAAOA,GAAU,SAAiBA,EAClC,OAAOA,GAAU,SAAiBA,EAAM,QAAQ,CAAC,EAC9C,KACT,EAGA,gBAAgB6P,EAAgB,CAC9B,GAAI,CAACA,GAAkB,CAAC,KAAK,cAAe,MAAO,GAGnD,MAAM7I,EAAe,KAAK,kBAC1B,GAAI,CAACA,EAAc,MAAO,GAE1B,MAAM8I,EAAO9I,EAAe,WAAW6I,CAAc,EAC/CE,EAAeD,EAAO,WAAWD,CAAc,EAAK,IAE1D,GAAI,KAAK,IAAIC,CAAI,EAAI,IAAM,MAAO,QAElC,MAAME,EAAOF,EAAO,EAAI,IAAM,GAC9B,MAAO,GAAGE,CAAI,GAAGF,EAAK,QAAQ,CAAC,CAAC,KAAKE,CAAI,GAAGD,EAAY,QAAQ,CAAC,CAAC,IACpE,EAGA,iBAAkB,WAChB,OAAK,KAAK,eAGN1I,EAAA,KAAK,cAAc,OAAnB,MAAAA,EAAyB,aACpB,WAAW,KAAK,cAAc,KAAK,YAAY,GAEpDC,EAAA,KAAK,cAAc,MAAnB,MAAAA,EAAwB,aACnB,WAAW,KAAK,cAAc,IAAI,YAAY,GAEnD2I,EAAA,KAAK,cAAc,QAAnB,MAAAA,EAA0B,aACrB,WAAW,KAAK,cAAc,MAAM,YAAY,EAGlD,KAbyB,IAclC,EAGA,kBAAkBJ,EAAgB,CAChC,GAAI,CAACA,EAAgB,MAAO,UAE5B,MAAM7I,EAAe,KAAK,kBAC1B,GAAI,CAACA,EAAc,MAAO,UAE1B,MAAM8I,EAAO9I,EAAe,WAAW6I,CAAc,EAErD,OAAI,KAAK,IAAIC,CAAI,EAAI,IAAa,UAC3BA,EAAO,EAAI,WAAa,UACjC,CACF,CACF,EA3UO3W,GAAA,CAAA,MAAM,sBAAsB,EAC1BC,GAAA,CAAA,MAAM,mBAAmB,YAEN,MAAM,wBAKV,MAAM,2BAKH,MAAM,yCAQjB,MAAM,mBAEXsU,GAAA,CAAA,MAAM,gBAAgB,EAEpBzB,GAAA,CAAA,MAAM,qBAAqB,EAU7B4B,GAAA,CAAA,MAAM,gBAAgB,EAEpBF,GAAA,CAAA,MAAM,qBAAqB,EAU7BzB,GAAA,CAAA,MAAM,gBAAgB,EAEpBC,GAAA,CAAA,MAAM,qBAAqB,EAW7BC,GAAA,CAAA,MAAM,gBAAgB,EAEpBC,GAAA,CAAA,MAAM,qBAAqB,EAU7BC,GAAA,CAAA,MAAM,gBAAgB,EAEpBC,GAAA,CAAA,MAAM,qBAAqB,EAU7BC,GAAA,CAAA,MAAM,gBAAgB,EAEpBC,GAAA,CAAA,MAAM,qBAAqB,EAW7BC,GAAA,CAAA,MAAM,gBAAgB,EAEpBC,GAAA,CAAA,MAAM,qBAAqB,EAU7BC,GAAA,CAAA,MAAM,gBAAgB,EAEpBC,GAAA,CAAA,MAAM,qBAAqB,EAU7BC,GAAA,CAAA,MAAM,gBAAgB,EAEpBC,GAAA,CAAA,MAAM,qBAAqB,EAW7BC,GAAA,CAAA,MAAM,gBAAgB,EAOtBC,GAAA,CAAA,MAAM,gBAAgB,EAOtBC,GAAA,CAAA,MAAM,gBAAgB,qQApJ/B,OAAAxT,EAAA,EAAAC,EA2JM,MA3JNR,GA2JM,CA1JJS,EAKM,MALNR,GAKM,CAJJW,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAA6B,UAAzB,uBAAoB,EAAA,GACb+R,EAAA,WAAXjS,IAAAC,EAEM,MAFNN,GAEM,CADJO,EAA8B,eAApB+R,EAAA,SAAS,EAAA,CAAA,gBAIZA,EAAA,SAAXjS,IAAAC,EAGM,MAHNL,GAGM,CAAA,GAAAS,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAFJH,EAAmC,MAAA,CAA9B,MAAM,iBAAiB,EAAA,KAAA,EAAA,EAC5BA,EAAsC,YAAhC,4BAAyB,EAAA,OAGjB+R,EAAA,OAAhBjS,IAAAC,EAMM,MANNJ,GAMM,CALJQ,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAkC,OAAA,CAA5B,MAAM,YAAY,EAAC,KAAE,EAAA,GAC3BA,EAAwB,cAAf+R,EAAA,KAAK,EAAA,CAAA,EACd/R,EAES,SAAA,CAFA,6BAAO6R,EAAA,WAAAA,EAAA,UAAA,GAAAI,EAAA,GAAW,MAAM,eAAgB,SAAUF,EAAA,WACtDA,EAAA,QAAO,aAAA,OAAA,EAAA,EAAAnS,EAAA,MAIdE,IAAAC,EAqIM,MArINF,GAqIM,CAnIJG,EAUM,MAVN8T,GAUM,CATJ3T,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAwC,OAAA,CAAlC,MAAM,iBAAiB,EAAC,MAAG,EAAA,GACjCA,EAOM,MAPNqS,GAOM,CANJrS,EAEO,OAAA,CAFD,MAAK6T,EAAA,CAAC,kBAA0BhC,EAAA,gBAAenE,GAAAD,EAAAsE,EAAA,gBAAA,YAAAtE,EAAe,MAAf,YAAAC,EAAoB,MAAM,CAAA,CAAA,CAC1E,EAAAsE,EAAAH,EAAA,aAAYyE,GAAAD,EAAAtE,EAAA,gBAAA,YAAAsE,EAAe,MAAf,YAAAC,EAAoB,KAAK,CAAA,EAAA,CAAA,EAE1CtW,EAEO,OAAA,CAFD,MAAK6T,EAAA,CAAC,aAAqBhC,EAAA,mBAAkB0E,GAAAC,EAAAzE,EAAA,gBAAA,YAAAyE,EAAe,MAAf,YAAAD,EAAoB,KAAK,CAAA,CAAA,CACvE,EAAAvE,EAAAH,EAAA,iBAAgB4E,GAAAC,EAAA3E,EAAA,gBAAA,YAAA2E,EAAe,MAAf,YAAAD,EAAoB,KAAK,CAAA,EAAA,CAAA,MAKlDzW,EAUM,MAVNiU,GAUM,CATJ9T,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAyC,OAAA,CAAnC,MAAM,iBAAiB,EAAC,OAAI,EAAA,GAClCA,EAOM,MAPN+T,GAOM,CANJ/T,EAEO,OAAA,CAFD,MAAK6T,EAAA,CAAC,kBAA0BhC,EAAA,gBAAe8E,GAAAC,EAAA7E,EAAA,gBAAA,YAAA6E,EAAe,OAAf,YAAAD,EAAqB,MAAM,CAAA,CAAA,CAC3E,EAAA3E,EAAAH,EAAA,aAAYgF,GAAAC,EAAA/E,EAAA,gBAAA,YAAA+E,EAAe,OAAf,YAAAD,EAAqB,KAAK,CAAA,EAAA,CAAA,EAE3C7W,EAEO,OAAA,CAFD,MAAK6T,EAAA,CAAC,aAAqBhC,EAAA,mBAAkBkF,GAAAC,EAAAjF,EAAA,gBAAA,YAAAiF,EAAe,OAAf,YAAAD,EAAqB,KAAK,CAAA,CAAA,CACxE,EAAA/E,EAAAH,EAAA,iBAAgBoF,GAAAC,EAAAnF,EAAA,gBAAA,YAAAmF,EAAe,OAAf,YAAAD,EAAqB,KAAK,CAAA,EAAA,CAAA,MAKnDjX,EAUM,MAVNsS,GAUM,CATJnS,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAyC,OAAA,CAAnC,MAAM,iBAAiB,EAAC,OAAI,EAAA,GAClCA,EAOM,MAPNuS,GAOM,CANJvS,EAEO,OAAA,CAFD,MAAK6T,EAAA,CAAC,kBAA0BhC,EAAA,gBAAesF,GAAAC,EAAArF,EAAA,gBAAA,YAAAqF,EAAe,OAAf,YAAAD,EAAqB,MAAM,CAAA,CAAA,CAC3E,EAAAnF,EAAAH,EAAA,aAAYwF,GAAAC,EAAAvF,EAAA,gBAAA,YAAAuF,EAAe,OAAf,YAAAD,EAAqB,KAAK,CAAA,EAAA,CAAA,EAE3CrX,EAEO,OAAA,CAFD,MAAK6T,EAAA,CAAC,aAAqBhC,EAAA,mBAAkB0F,IAAAC,EAAAzF,EAAA,gBAAA,YAAAyF,EAAe,OAAf,YAAAD,GAAqB,KAAK,CAAA,CAAA,CACxE,EAAAvF,EAAAH,EAAA,iBAAgB4F,IAAAC,GAAA3F,EAAA,gBAAA,YAAA2F,GAAe,OAAf,YAAAD,GAAqB,KAAK,CAAA,EAAA,CAAA,MAMnDzX,EAUM,MAVNwS,GAUM,CATJrS,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAyC,OAAA,CAAnC,MAAM,iBAAiB,EAAC,OAAI,EAAA,GAClCA,EAOM,MAPNyS,GAOM,CANJzS,EAEO,OAAA,CAFD,MAAK6T,EAAA,CAAC,kBAA0BhC,EAAA,gBAAe8F,IAAAC,GAAA7F,EAAA,gBAAA,YAAA6F,GAAe,OAAf,YAAAD,GAAqB,MAAM,CAAA,CAAA,CAC3E,EAAA3F,EAAAH,EAAA,aAAYgG,IAAAC,GAAA/F,EAAA,gBAAA,YAAA+F,GAAe,OAAf,YAAAD,GAAqB,KAAK,CAAA,EAAA,CAAA,EAE3C7X,EAEO,OAAA,CAFD,MAAK6T,EAAA,CAAC,aAAqBhC,EAAA,mBAAkBkG,IAAAC,GAAAjG,EAAA,gBAAA,YAAAiG,GAAe,OAAf,YAAAD,GAAqB,KAAK,CAAA,CAAA,CACxE,EAAA/F,EAAAH,EAAA,iBAAgBoG,IAAAC,GAAAnG,EAAA,gBAAA,YAAAmG,GAAe,OAAf,YAAAD,GAAqB,KAAK,CAAA,EAAA,CAAA,MAKnDjY,EAUM,MAVN0S,GAUM,CATJvS,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAA0C,OAAA,CAApC,MAAM,iBAAiB,EAAC,QAAK,EAAA,GACnCA,EAOM,MAPN2S,GAOM,CANJ3S,EAEO,OAAA,CAFD,MAAK6T,EAAA,CAAC,kBAA0BhC,EAAA,gBAAesG,IAAAC,GAAArG,EAAA,gBAAA,YAAAqG,GAAe,QAAf,YAAAD,GAAsB,MAAM,CAAA,CAAA,CAC5E,EAAAnG,EAAAH,EAAA,aAAYwG,IAAAC,GAAAvG,EAAA,gBAAA,YAAAuG,GAAe,QAAf,YAAAD,GAAsB,KAAK,CAAA,EAAA,CAAA,EAE5CrY,EAEO,OAAA,CAFD,MAAK6T,EAAA,CAAC,aAAqBhC,EAAA,mBAAkB0G,IAAAC,GAAAzG,EAAA,gBAAA,YAAAyG,GAAe,QAAf,YAAAD,GAAsB,KAAK,CAAA,CAAA,CACzE,EAAAvG,EAAAH,EAAA,iBAAgB4G,IAAAC,GAAA3G,EAAA,gBAAA,YAAA2G,GAAe,QAAf,YAAAD,GAAsB,KAAK,CAAA,EAAA,CAAA,MAKpDzY,EAUM,MAVN4S,GAUM,CATJzS,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAA0C,OAAA,CAApC,MAAM,iBAAiB,EAAC,QAAK,EAAA,GACnCA,EAOM,MAPN6S,GAOM,CANJ7S,EAEO,OAAA,CAFD,MAAK6T,EAAA,CAAC,kBAA0BhC,EAAA,gBAAe8G,IAAAC,GAAA7G,EAAA,gBAAA,YAAA6G,GAAe,QAAf,YAAAD,GAAsB,MAAM,CAAA,CAAA,CAC5E,EAAA3G,EAAAH,EAAA,aAAYgH,IAAAC,GAAA/G,EAAA,gBAAA,YAAA+G,GAAe,QAAf,YAAAD,GAAsB,KAAK,CAAA,EAAA,CAAA,EAE5C7Y,EAEO,OAAA,CAFD,MAAK6T,EAAA,CAAC,aAAqBhC,EAAA,mBAAkBkH,IAAAC,GAAAjH,EAAA,gBAAA,YAAAiH,GAAe,QAAf,YAAAD,GAAsB,KAAK,CAAA,CAAA,CACzE,EAAA/G,EAAAH,EAAA,iBAAgBoH,IAAAC,GAAAnH,EAAA,gBAAA,YAAAmH,GAAe,QAAf,YAAAD,GAAsB,KAAK,CAAA,EAAA,CAAA,MAMpDjZ,EAUM,MAVN8S,GAUM,CATJ3S,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAA4D,OAAA,CAAtD,MAAM,iBAAiB,EAAC,0BAAuB,EAAA,GACrDA,EAOM,MAPN+S,GAOM,CANJ/S,EAEO,OAAA,CAFD,MAAK6T,EAAA,CAAC,kBAA0BhC,EAAA,gBAAesH,IAAAC,GAAArH,EAAA,gBAAA,YAAAqH,GAAe,yBAAf,YAAAD,GAAuC,MAAM,CAAA,CAAA,CAC7F,EAAAnH,EAAAH,EAAA,aAAYwH,IAAAC,GAAAvH,EAAA,gBAAA,YAAAuH,GAAe,yBAAf,YAAAD,GAAuC,KAAK,CAAA,EAAA,CAAA,EAE7DrZ,EAEO,OAAA,CAFD,MAAK6T,EAAA,CAAC,aAAqBhC,EAAA,mBAAkB0H,IAAAC,GAAAzH,EAAA,gBAAA,YAAAyH,GAAe,yBAAf,YAAAD,GAAuC,KAAK,CAAA,CAAA,CAC1F,EAAAvH,EAAAH,EAAA,iBAAgB4H,IAAAC,GAAA3H,EAAA,gBAAA,YAAA2H,GAAe,yBAAf,YAAAD,GAAuC,KAAK,CAAA,EAAA,CAAA,MAKrEzZ,EAUM,MAVNgT,GAUM,CATJ7S,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAuD,OAAA,CAAjD,MAAM,iBAAiB,EAAC,qBAAkB,EAAA,GAChDA,EAOM,MAPNiT,GAOM,CANJjT,EAEO,OAAA,CAFD,MAAK6T,EAAA,CAAC,kBAA0BhC,EAAA,gBAAe8H,IAAAC,GAAA7H,EAAA,gBAAA,YAAA6H,GAAe,mBAAf,YAAAD,GAAiC,MAAM,CAAA,CAAA,CACvF,EAAA3H,EAAAH,EAAA,aAAYgI,GAAAC,GAAA/H,EAAA,gBAAA,YAAA+H,GAAe,mBAAf,YAAAD,EAAiC,KAAK,CAAA,EAAA,CAAA,EAEvD7Z,EAEO,OAAA,CAFD,MAAK6T,EAAA,CAAC,aAAqBhC,EAAA,mBAAkBkI,IAAAC,GAAAjI,EAAA,gBAAA,YAAAiI,GAAe,mBAAf,YAAAD,GAAiC,KAAK,CAAA,CAAA,CACpF,EAAA/H,EAAAH,EAAA,iBAAgBoI,IAAAC,GAAAnI,EAAA,gBAAA,YAAAmI,GAAe,mBAAf,YAAAD,GAAiC,KAAK,CAAA,EAAA,CAAA,MAK/Dja,EAUM,MAVNkT,GAUM,CATJ/S,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAA0D,OAAA,CAApD,MAAM,iBAAiB,EAAC,wBAAqB,EAAA,GACnDA,EAOM,MAPNmT,GAOM,CANJnT,EAEO,OAAA,CAFD,MAAK6T,EAAA,CAAC,kBAA0BhC,EAAA,gBAAesI,IAAAC,GAAArI,EAAA,gBAAA,YAAAqI,GAAe,sBAAf,YAAAD,GAAoC,MAAM,CAAA,CAAA,CAC1F,EAAAnI,EAAAH,EAAA,aAAYwI,IAAAC,GAAAvI,EAAA,gBAAA,YAAAuI,GAAe,sBAAf,YAAAD,GAAoC,KAAK,CAAA,EAAA,CAAA,EAE1Dra,EAEO,OAAA,CAFD,MAAK6T,EAAA,CAAC,aAAqBhC,EAAA,mBAAkB0I,IAAAC,GAAAzI,EAAA,gBAAA,YAAAyI,GAAe,sBAAf,YAAAD,GAAoC,KAAK,CAAA,CAAA,CACvF,EAAAvI,EAAAH,EAAA,iBAAgB4I,IAAAC,GAAA3I,EAAA,gBAAA,YAAA2I,GAAe,sBAAf,YAAAD,GAAoC,KAAK,CAAA,EAAA,CAAA,MAMlEza,EAKM,MALNoT,GAKM,CAJJjT,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAA6C,OAAA,CAAvC,MAAM,iBAAiB,EAAC,WAAQ,EAAA,GACtCA,EAEO,OAAA,CAFD,MAAK6T,EAAA,CAAC,kBAA0BhC,EAAA,gBAAe8I,IAAAC,GAAA7I,EAAA,gBAAA,YAAA6I,GAAe,QAAf,YAAAD,GAAsB,MAAM,CAAA,CAAA,CAC5E,EAAA3I,EAAAH,EAAA,aAAYgJ,IAAAC,GAAA/I,EAAA,gBAAA,YAAA+I,GAAe,QAAf,YAAAD,GAAsB,KAAK,CAAA,EAAA,CAAA,IAI9C7a,EAKM,MALNqT,GAKM,CAJJlT,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAiD,OAAA,CAA3C,MAAM,iBAAiB,EAAC,eAAY,EAAA,GAC1CA,EAEO,OAAA,CAFD,MAAK6T,EAAA,CAAC,kBAA0BhC,EAAA,gBAAekJ,IAAAC,GAAAjJ,EAAA,gBAAA,YAAAiJ,GAAe,OAAf,YAAAD,GAAqB,MAAM,CAAA,CAAA,CAC3E,EAAA/I,EAAAH,EAAA,aAAYoJ,IAAAC,GAAAnJ,EAAA,gBAAA,YAAAmJ,GAAe,OAAf,YAAAD,GAAqB,KAAK,CAAA,EAAA,CAAA,IAI7Cjb,EAKM,MALNsT,GAKM,CAJJnT,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAA8C,OAAA,CAAxC,MAAM,iBAAiB,EAAC,YAAS,EAAA,GACvCA,EAEO,OAAA,CAFD,MAAK6T,EAAA,CAAC,kBAA0BhC,EAAA,gBAAesJ,IAAAC,GAAArJ,EAAA,gBAAA,YAAAqJ,GAAe,SAAf,YAAAD,GAAuB,MAAM,CAAA,CAAA,CAC7E,EAAAnJ,EAAAH,EAAA,aAAYwJ,IAAAC,GAAAvJ,EAAA,gBAAA,YAAAuJ,GAAe,SAAf,YAAAD,GAAuB,KAAK,CAAA,EAAA,CAAA,wEClEhD/b,GAAU,CACb,KAAM,YACN,WAAY,CACV,sBAAAic,GACA,wBAAAC,GACA,oBAAAC,IAEF,MAAO,CACL,MAAO,CACL,KAAM,OACN,SAAU,IAEZ,UAAW,CACT,KAAM,OACN,QAAS,MAEX,SAAU,CACR,KAAM,OACN,QAAS,IACX,GAEF,SAAU,CACR,SAAU,CACR,OAAO,KAAK,MAAM,cAAgB,OACpC,EAEA,OAAQ,CACN,MAAO,OAAO,KAAK,eAAe,KAAK,MAAM,MAAM,CAAC,EACtD,GAEF,QAAS,CACP,WAAY,CAIV,MAHI,CAAC,KAAK,UAGN,KAAK,SAAS,WAAa,GACtB,UAGF,KAAK,SAAS,QAAU,SACjC,EAEA,aAAc,CAKZ,MAJI,CAAC,KAAK,UAIN,KAAK,SAAS,WAAa,GACtB,mBAGF,KAAK,SAAS,UAAY,KAAK,SAAS,QAAU,kBAC3D,EAEA,qBAAsB,CACpB,MAAMC,EAAW,KAAK,YAAW,EAgBjC,MAb2B,CACzB,2BAA4B,WAC5B,gCAAiC,iBACjC,oBAAqB,gBACrB,sBAAuB,gBACvB,eAAkB,gBAClB,sBAAuB,uBACvB,uBAAwB,mBACxB,2BAA4B,iBAC5B,oBAAqB,aACrB,mBAAoB,SACtB,EAE0BA,CAAQ,GAAK,OACzC,EAEA,aAAc,CACZ,GAAI,KAAK,UAAY,KAAK,SAAS,SASjC,MAPoB,CAClB,IAAO,OACP,IAAO,SACP,IAAO,SACP,IAAO,SACP,IAAO,MACT,EACmB,KAAK,SAAS,QAAQ,GAAK,KAAK,SAAS,SAI9D,MAAMjW,EAAS,KAAK,MAAM,OAG1B,MAAI,CAAC,OAAQ,MAAO,MAAO,MAAO,KAAM,MAAO,MAAO,OAAQ,MAAM,EAAE,SAASA,CAAM,EAC5E,QAGA,CAAC,OAAQ,OAAQ,OAAQ,OAAQ,MAAO,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,MAAM,EAAE,SAASA,CAAM,EACvI,SAIX,EAEA,cAAe,CACb,OAAQ,KAAK,MAAM,YAAW,CAC5B,IAAK,QAAS,MAAO,gBACrB,IAAK,aAAc,MAAO,gBAC1B,QAAS,MAAO,EAClB,CACF,EAEA,YAAa,CAEX,QAAQ,IAAI,kCAAmC,KAAK,MAAM,MAAM,EAChE,KAAK,QAAQ,KAAK,CAChB,KAAM,eACN,OAAQ,CAAE,OAAQ,KAAK,MAAM,MAAK,CACpC,CAAC,EAAE,MAAM6L,GAAO,CACd,QAAQ,MAAM,oBAAqBA,CAAG,CACxC,CAAC,CACH,EAEA,eAAe7L,EAAQ,CAGrB,OAAOA,EAAO,QAAQ,gBAAiB,GAAG,CAC5C,CACF,CACF,0BA7MSjG,GAAA,CAAA,MAAM,mBAAmB,EACvBC,GAAA,CAAA,MAAM,aAAa,EAClBC,GAAA,CAAA,MAAM,QAAQ,EACbC,GAAA,CAAA,MAAM,aAAa,EAChBC,GAAA,CAAA,MAAM,cAAc,EAIzBC,GAAA,CAAA,MAAM,gBAAgB,eAaxBwS,GAAA,CAAA,MAAM,mBAAmB,EAEvB4B,GAAA,CAAA,MAAM,iBAAiB,EAavBF,GAAA,CAAA,MAAM,iBAAiB,YAaR,MAAM,mBACrBxB,GAAA,CAAA,MAAM,eAAe,EAErBC,GAAA,CAAA,MAAM,YAAY,YAaL,MAAM,oJAxE5BzS,EA6EM,MAAA,CA5EJ,MAAM,kBACL,GAAI8R,EAAA,MACJ,cAAaC,EAAA,MAAM,OACpB,SAAS,OAGT9R,EAkBM,MAlBNR,GAkBM,CAjBJQ,EAMM,MANNP,GAMM,CALJO,EAA0C,KAA1CN,GAA0CsS,EAApBF,EAAA,MAAM,MAAM,EAAA,CAAA,EAClC9R,EAGM,MAHNL,GAGM,CAFJK,EAAqD,OAArDJ,GAAqDoS,EAAvBH,EAAA,YAAW,CAAA,EAAA,CAAA,EACzC7R,EAAkG,OAAA,CAA5F,MAAK6T,EAAA,CAAC,eAAc,YAAqBhC,EAAA,oBAAmB,CAAA,EAAA,CAAA,KAASA,EAAA,YAAW,CAAA,EAAA,CAAA,MAG1F7R,EASM,MATNH,GASM,CARJG,EAOS,SAAA,CANN,4BAAO6R,EAAA,YAAAA,EAAA,WAAA,GAAAI,CAAA,GACR,MAAM,aACL,MAAK,8BAAgCH,EAAA,MAAM,MAAM,uBACnD,WAEC,EAAA,EAAA9R,EAA+B,OAAA,CAAzB,MAAM,UAAU,EAAC,IAAC,EAAA,eAM9BA,EAyBM,MAzBNqS,GAyBM,CAvBJrS,EAUM,MAVNiU,GAUM,aATJjU,EAEM,MAAA,CAFD,MAAM,iBAAe,CACxBA,EAAwB,UAApB,iBAAe,QAErBC,EAKE0b,EAAA,CAJA,cAAY,WACX,OAAQ7J,EAAA,MAAM,OACd,SAAUD,EAAA,YAAW,EACrB,SAAU,mCAKf7R,EASM,MATN+T,GASM,aARJ/T,EAEM,MAAA,CAFD,MAAM,iBAAe,CACxBA,EAA2B,UAAvB,oBAAkB,QAExBC,EAIE2b,EAAA,CAHC,OAAQ9J,EAAA,MAAM,OACd,SAAUD,EAAA,YAAW,EACrB,SAAU,qCAMNC,EAAA,WAAXhS,IAAAC,EAKM,MALNuS,GAKM,CAJJtS,EAGM,MAHNuS,GAGM,CAFJpS,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAoB,UAAhB,cAAW,EAAA,GACfA,EAAwD,IAAxDwS,GAAwDR,EAA/BF,EAAA,UAAU,cAAc,EAAA,CAAA,gBAKrD7R,EAGE4b,EAAA,CAFC,OAAQ/J,EAAA,MAAM,OACd,SAAUD,EAAA,YAAW,iCAMbA,EAAA,SAAX/R,IAAAC,EAIM,MAJN0S,GAIM,CAHJzS,EAEO,OAAA,CAFD,MAAK6T,EAAA,CAAC,cAAa,SAAkB/B,EAAA,MAAM,WAAW,EAAA,CAAA,KACvDD,EAAA,aAAY,CAAA,EAAA,CAAA,oFC1BlBvS,GAAU,CACb,KAAM,UACN,MAAO,CACL,MAAO,CACL,KAAM,MACN,QAAS,IAAM,CAAA,GAEjB,aAAc,CACZ,KAAM,OACN,QAAS,IAEX,YAAa,CACX,KAAM,OACN,QAAS,EACX,GAGF,MAAO,CAAC,cAAc,EACtB,QAAS,CACP,cAAcmG,EAAQ,CACpB,KAAK,MAAM,eAAgBA,CAAM,CACnC,EAEA,oBAAoBqW,EAAY,CAC9B,OAAOA,EAAW,SAAS,OAAO,CAACC,EAAOC,IACjCD,EAAQC,EAAa,SAAS,OACpC,CAAC,CACN,CAEF,CACF,EA9EOzc,GAAA,CAAA,MAAM,UAAU,EAOZC,GAAA,CAAA,MAAM,yBAAyB,eAE5BE,GAAA,CAAA,MAAM,YAAY,EAIrBC,GAAA,CAAA,MAAM,eAAe,EAOjBC,GAAA,CAAA,MAAM,2BAA2B,eAE9BkU,GAAA,CAAA,MAAM,YAAY,EAIrBzB,GAAA,CAAA,MAAM,eAAe,yDAYhBC,GAAA,CAAA,MAAM,gBAAgB,2BAtCxC,OAAAxS,EAAA,EAAAC,EA4CM,MA5CNR,GA4CM,QA3CJQ,EA0CMmU,EAAA,KAAAC,EAzCiBrC,EAAA,MAAdgK,QADT/b,EA0CM,MAAA,CAxCH,IAAK+b,EAAW,GACjB,MAAM,0BAGN9b,EAGM,MAHNR,GAGM,CAFJQ,EAAgF,OAAA,CAA1E,MAAM,aAAc,MAAO8b,EAAW,KAAU,EAAA9J,EAAA8J,EAAW,KAAK,EAAA,EAAArc,EAAA,EACtEO,EAAuE,OAAvEN,GAAyB,MAAImS,EAAA,oBAAoBiK,CAAU,CAAA,EAAI,IAAC,CAAA,IAIlE9b,EA6BM,MA7BNL,GA6BM,EA5BJG,EAAA,EAAA,EAAAC,EA2BMmU,EAAA,KAAAC,EA1BmB2H,EAAW,SAA3BE,QADTjc,EA2BM,MAAA,CAzBH,IAAKic,EAAa,GACnB,MAAM,4BAGNhc,EAGM,MAHNJ,GAGM,CAFJI,EAAoF,OAAA,CAA9E,MAAM,aAAc,MAAOgc,EAAa,KAAU,EAAAhK,EAAAgK,EAAa,KAAK,EAAA,EAAAnc,EAAA,EAC1EG,EAAoE,OAApE8T,GAAyB,IAAC9B,EAAGgK,EAAa,SAAS,MAAM,EAAG,IAAC,CAAA,IAI/Dhc,EAcM,MAdNqS,GAcM,EAbJvS,EAAA,EAAA,EAAAC,EAYSmU,EAAA,KAAAC,EAXc6H,EAAa,SAA3BC,QADTlc,EAYS,SAAA,CAVN,IAAKkc,EAAW,GACjB,SAAM,wBAAuB,CAAA,YACNA,EAAW,SAAWnK,EAAA,YAAY,CAAA,CAAA,EACxD,eAAcmK,EAAW,SAAWnK,EAAA,aAAY,WAAA,KAChD,QAAKoK,GAAErK,EAAA,cAAcoK,EAAW,MAAM,EACtC,UAAO,OAAQpK,EAAA,cAAcoK,EAAW,MAAM,EAAA,CAAA,OAAA,CAAA,WACvBpK,EAAA,cAAcoK,EAAW,MAAM,EAAA,CAAA,SAAA,CAAA,EAAA,CAAA,OAAA,CAAA,KAEvDjc,EAAiF,OAAA,CAA3E,MAAM,cAAe,MAAOic,EAAW,KAAU,EAAAjK,EAAAiK,EAAW,KAAK,EAAA,EAAAlI,EAAA,EACvE/T,EAAsE,OAAtEsS,GAAsEN,EAAtCiK,EAAW,SAAS,QAAQ,EAAA,CAAA,2GCRrE3c,GAAU,CACb,KAAM,kBACN,WAAY,CACV,QAAA6c,IAEF,MAAO,CACL,QAAS,CACP,KAAM,MACN,QAAS,IAAM,CAAA,GAEjB,aAAc,CACZ,KAAM,OACN,QAAS,IAEX,YAAa,CACX,KAAM,OACN,QAAS,IAEX,UAAW,CACT,KAAM,QACN,QAAS,EACX,GAGF,MAAO,CAAC,eAAgB,eAAe,EACvC,MAAO,CACL,MAAO,CACL,iBAAkB,KAAK,WACzB,CACF,EACA,SAAU,CACR,iBAAkB,CAChB,GAAI,CAAC,KAAK,iBAAiB,OACzB,OAAO,KAAK,QAGd,MAAMC,EAAQ,KAAK,iBAAiB,YAAW,EAAG,KAAI,EAEtD,OAAO,KAAK,QAAQ,IAAIN,GAAc,CACpC,MAAMO,EAAiB,CAAE,GAAGP,EAAY,SAAU,CAAA,CAAC,EAEnD,OAAAA,EAAW,SAAS,QAAQE,GAAgB,CAC1C,MAAMM,EAAmB,CAAE,GAAGN,EAAc,SAAU,CAAA,CAAC,EAEvDA,EAAa,SAAS,QAAQC,GAAc,CAE1B,CACdH,EAAW,MACXE,EAAa,MACbC,EAAW,MACXA,EAAW,QACX,KAAKM,GAAQA,EAAK,YAAW,EAAG,SAASH,CAAK,CAAC,GAG/CE,EAAiB,SAAS,KAAKL,CAAU,CAE7C,CAAC,EAEGK,EAAiB,SAAS,OAAS,GACrCD,EAAe,SAAS,KAAKC,CAAgB,CAEjD,CAAC,EAEMD,EAAe,SAAS,OAAS,EAAIA,EAAiB,IAC/D,CAAC,EAAE,OAAO,OAAO,CACnB,GAEF,MAAO,CACL,YAAYG,EAAU,CACpB,KAAK,iBAAmBA,CAC1B,GAEF,QAAS,CACP,cAAc/W,EAAQ,CACpB,KAAK,MAAM,eAAgBA,CAAM,CACnC,EAEA,gBAAiB,CACf,KAAK,MAAM,gBAAiB,KAAK,gBAAgB,CACnD,CAEF,CACF,EA/GSlG,GAAA,CAAA,MAAM,cAAc,EAElBC,GAAA,CAAA,MAAM,kBAAkB,EAa1BC,GAAA,CAAA,MAAM,eAAe,2DAhB5BM,EAwBM,MAAA,CAxBD,MAAK8T,EAAA,CAAC,mBAAkB,CAAA,aAAyB/B,EAAA,UAAS,CAAA,IAC7D9R,EAaM,MAbNT,GAaM,CAZJY,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAyB,UAArB,mBAAgB,EAAA,GACpBA,EAUM,MAVNR,GAUM,GATJQ,EAOE,QAAA,sCANS+R,EAAA,iBAAgBmK,GACzB,KAAK,OACL,YAAY,wCACZ,MAAM,eACN,aAAW,gBACV,4BAAOrK,EAAA,gBAAAA,EAAA,eAAA,GAAAI,CAAA,mBALCF,EAAA,gBAAgB,IAO3B5R,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAmC,OAAA,CAA7B,MAAM,eAAc,KAAE,EAAA,OAIhCA,EAOM,MAPNP,GAOM,CANJQ,EAKEwc,EAAA,CAJC,MAAO5K,EAAA,gBACP,gBAAeC,EAAA,aACf,eAAcC,EAAA,iBACd,cAAcF,EAAA,qJClBhB,MAAM6K,EAAkB,CAC7B,aAAc,CACZ,KAAK,aAAe,EACtB,CAQA,MAAM,eAAejX,EAAQkX,EAAS,GAAM,CAC1C,GAAI,CAEF,MAAMC,EAAW,OADO,KAAK,eAAenX,CAAM,CACX,GACjCoX,EAAgB,SAAS,eAAeD,CAAQ,EAEtD,GAAI,CAACC,EAAe,CAClB,QAAQ,KAAK,uCAAuCD,CAAQ,2BAA2BnX,CAAM,GAAG,EAChG,MACF,CAGA,MAAMqX,EAAuB,OAAO,WAAW,kCAAkC,EAAE,QAI7EC,EADaF,EAAc,UACF,KAAK,gBAAe,EAC7CG,EAAmB,OAAO,YAC1BC,EAAiB,KAAK,IAAIF,EAAYC,CAAgB,EAItDE,EADiB,OAAO,YACa,EACrCC,EAAmBF,EAAiBC,GAAqBJ,EACzDM,EAAkBT,GAAU,CAACQ,EAEnC,QAAQ,IAAI,sCAAsCF,CAAc,iBAAiBC,CAAiB,aAAaE,EAAkB,SAAW,SAAS,SAAS,EAG9J,OAAO,SAAS,CACd,IAAK,KAAK,IAAI,EAAGL,CAAS,EAC1B,SAAUK,EAAkB,SAAW,SAC/C,CAAO,EAGGA,GAEF,MAAM,KAAK,sBAAqB,EAIlCP,EAAc,MAAM,CAAE,cAAe,EAAI,CAAE,EAE3C,QAAQ,IAAI,0CAA0CpX,CAAM,UAAUmX,CAAQ,WAAWQ,EAAkB,SAAW,SAAS,WAAW,CAC5I,OAASnc,EAAO,CACd,QAAQ,MAAM,gDAAiDA,CAAK,CACtE,CACF,CAOA,eAAewE,EAAQ,CACrB,OAAOA,EAAO,QAAQ,gBAAiB,GAAG,CAC5C,CAMA,iBAAiBA,EAAQ,CACvB,GAAI,CACF,MAAMiH,EAAM,IAAI,IAAI,OAAO,QAAQ,EAE/BjH,EACFiH,EAAI,aAAa,IAAI,QAASjH,CAAM,EAEpCiH,EAAI,aAAa,OAAO,OAAO,EAIjC,OAAO,QAAQ,aAAa,KAAM,GAAIA,EAAI,UAAU,EAEpD,QAAQ,IAAI,uDAAuDjH,CAAM,EAAE,CAC7E,OAASxE,EAAO,CACd,QAAQ,MAAM,iDAAkDA,CAAK,CACvE,CACF,CAMA,yBAA0B,CACxB,GAAI,CAEF,OADY,IAAI,IAAI,OAAO,QAAQ,EACxB,aAAa,IAAI,OAAO,CACrC,OAASA,EAAO,CACd,eAAQ,MAAM,gDAAiDA,CAAK,EAC7D,IACT,CACF,CAMA,iBAAkB,CAChB,GAAI,CAEF,MAAMoc,EAAS,SAAS,cAAc,uCAAuC,EAC7E,GAAIA,EAEF,OADaA,EAAO,sBAAqB,EAC7B,OAAS,EAEzB,OAASpc,EAAO,CACd,QAAQ,KAAK,wDAAyDA,CAAK,CAC7E,CAEA,OAAO,KAAK,YACd,CAMA,uBAAwB,CACtB,OAAO,IAAI,QAAQL,GAAW,CAC5B,IAAI0c,EAAgB,OAAO,YACvBC,EAAiB,KAErB,MAAMC,EAAiB,IAAM,CAC3B,MAAMR,EAAmB,OAAO,YAE5B,KAAK,IAAIA,EAAmBM,CAAa,EAAI,GAE/C,aAAaC,CAAc,EAC3B3c,EAAO,IAGP0c,EAAgBN,EAChBO,EAAiB,WAAWC,EAAgB,EAAE,EAElD,EAGAD,EAAiB,WAAWC,EAAgB,EAAE,EAG9C,WAAW5c,EAAS,GAAI,CAC1B,CAAC,CACH,CAOA,cAAc6E,EAAQ,CAEpB,MAAMmX,EAAW,OADO,KAAK,eAAenX,CAAM,CACX,GACvC,OAAO,SAAS,eAAemX,CAAQ,IAAM,IAC/C,CACF,CAGO,MAAMa,GAAoB,IAAIf,GCzK9B,MAAMgB,EAAiB,CAC5B,aAAc,CACZ,KAAK,SAAW,KAChB,KAAK,SAAW,KAChB,KAAK,iBAAmB,IAAI,IAC5B,KAAK,SAAW,GAGhB,KAAK,gBAAkB,CACrB,KAAM,KACN,WAAY,qBACZ,UAAW,CAAC,EAAG,GAAK,IAAM,GAAK,IAAM,CAAG,CAC9C,CACE,CAOA,MAAMC,EAAUC,EAAU,CACxB,GAAI,CACF,KAAK,QAAO,EAEZ,KAAK,SAAWA,EAChB,KAAK,iBAAiB,MAAK,EAG3B,KAAK,SAAW,IAAI,qBAClB,KAAK,mBAAmB,KAAK,IAAI,EACjC,KAAK,eACb,EAGMD,EAAS,QAAQE,GAAW,CAC1B,MAAMpY,EAASoY,EAAQ,QAAQ,OAC3BpY,IACF,KAAK,iBAAiB,IAAIoY,EAASpY,CAAM,EACzC,KAAK,SAAS,QAAQoY,CAAO,EAEjC,CAAC,EAED,KAAK,SAAW,GAChB,QAAQ,IAAI,uCAAuCF,EAAS,MAAM,WAAW,CAC/E,OAAS1c,EAAO,CACd,QAAQ,MAAM,+CAAgDA,CAAK,CACrE,CACF,CAMA,mBAAmBkQ,EAAS,CAC1B,GAAI,GAAC,KAAK,UAAY,CAAC,KAAK,UAE5B,GAAI,CAEF,MAAM2M,EAAkB,CAAA,EAexB,GAbA3M,EAAQ,QAAQC,GAAS,CACvB,MAAM3L,EAAS,KAAK,iBAAiB,IAAI2L,EAAM,MAAM,EACjD3L,GAAU2L,EAAM,gBAClB0M,EAAgB,KAAK,CACnB,QAAS1M,EAAM,OACf,OAAQ3L,EACR,kBAAmB2L,EAAM,kBACzB,mBAAoBA,EAAM,kBACtC,CAAW,CAEL,CAAC,EAGG0M,EAAgB,SAAW,EAAG,OAGlC,MAAMC,EAAe,KAAK,sBAAsBD,CAAe,EAE3DC,GAEF,KAAK,kBAAkBA,CAAY,CAEvC,OAAS9c,EAAO,CACd,QAAQ,MAAM,iDAAkDA,CAAK,CACvE,CACF,CAOA,sBAAsB6c,EAAiB,CACrC,GAAIA,EAAgB,SAAW,EAAG,OAAO,KACzC,GAAIA,EAAgB,SAAW,EAAG,OAAOA,EAAgB,CAAC,EAAE,OAK5D,MAAME,EADiB,OAAO,YACU,EAExC,IAAIC,EAAcH,EAAgB,CAAC,EAC/BI,EAAY,KAAK,sBAAsBD,EAAaD,CAAc,EAEtE,QAASha,EAAI,EAAGA,EAAI8Z,EAAgB,OAAQ9Z,IAAK,CAC/C,MAAM6Z,EAAUC,EAAgB9Z,CAAC,EAC3Bma,EAAQ,KAAK,sBAAsBN,EAASG,CAAc,EAE5DG,EAAQD,IACVD,EAAcJ,EACdK,EAAYC,EAEhB,CAEA,OAAOF,EAAY,MACrB,CAQA,sBAAsBG,EAAaJ,EAAgB,CACjD,KAAM,CAAE,kBAAAK,EAAmB,mBAAAC,CAAkB,EAAKF,EAG5CG,EAAgBD,EAAmB,IAAOA,EAAmB,OAAS,EAKtEE,EAAc,EAFO,KAAK,IAAID,EAAgBP,CAAc,EAC9CA,EAIpB,OAAQK,EAAoB,GAAQG,EAAc,EACpD,CAMA,kBAAkB/Y,EAAQ,CACpB,KAAK,eACP,aAAa,KAAK,aAAa,EAGjC,KAAK,cAAgB,WAAW,IAAM,CAChC,KAAK,UAAY,KAAK,UACxB,KAAK,SAASA,CAAM,CAExB,EAAG,GAAG,CACR,CAMA,mBAAmBA,EAAQ,CACrB,KAAK,UAAY,KAAK,UACxB,KAAK,SAASA,CAAM,CAExB,CAKA,SAAU,CACR,GAAI,GAAC,KAAK,UAAY,CAAC,KAAK,UAE5B,GAAI,CAEF,MAAMkY,EAAW,MAAM,KAAK,KAAK,iBAAiB,MAAM,EAClDG,EAAkB,CAAA,EAExBH,EAAS,QAAQE,GAAW,CAC1B,MAAMY,EAAOZ,EAAQ,sBAAqB,EACpCpY,EAAS,KAAK,iBAAiB,IAAIoY,CAAO,EAGhD,GAAIY,EAAK,IAAM,OAAO,aAAeA,EAAK,OAAS,GAAKhZ,EAAQ,CAC9D,MAAM4Y,EAAoB,KAAK,2BAA2BI,CAAI,EAC1DJ,EAAoB,GACtBP,EAAgB,KAAK,CACnB,QAAAD,EACA,OAAApY,EACA,kBAAA4Y,EACA,mBAAoBI,CAClC,CAAa,CAEL,CACF,CAAC,EAED,MAAMV,EAAe,KAAK,sBAAsBD,CAAe,EAC3DC,GACF,KAAK,mBAAmBA,CAAY,CAExC,OAAS9c,EAAO,CACd,QAAQ,MAAM,sCAAuCA,CAAK,CAC5D,CACF,CAOA,2BAA2Bwd,EAAM,CAC/B,MAAMC,EAAiB,OAAO,YAGxBC,EAAa,KAAK,IAAIF,EAAK,IAFZ,EAE6B,EAC5CG,EAAgB,KAAK,IAAIH,EAAK,OAAQC,CAAc,EAG1D,OAFsB,KAAK,IAAI,EAAGE,EAAgBD,CAAU,EAErCF,EAAK,MAC9B,CAKA,SAAU,CACR,GAAI,CACE,KAAK,WACP,KAAK,SAAS,WAAU,EACxB,KAAK,SAAW,MAGd,KAAK,gBACP,aAAa,KAAK,aAAa,EAC/B,KAAK,cAAgB,MAGvB,KAAK,iBAAiB,MAAK,EAC3B,KAAK,SAAW,KAChB,KAAK,SAAW,GAEhB,QAAQ,IAAI,8BAA8B,CAC5C,OAASxd,EAAO,CACd,QAAQ,MAAM,0CAA2CA,CAAK,CAChE,CACF,CAKA,OAAQ,CACN,KAAK,SAAW,EAClB,CAKA,QAAS,CACP,KAAK,SAAW,GAChB,KAAK,QAAO,CACd,CACF,CAGO,MAAM4d,GAAmB,IAAInB,GC7K/Bpe,GAAU,CACb,KAAM,gBACN,WAAY,CACV,UAAAwf,GACA,sBAAA1K,GACA,gBAAA2K,EAAA,EAEF,MAAO,CACL,MAAO,CACL,OAAQ,CAAA,EACR,UAAW,KACX,SAAU,KACV,QAAS,GACT,MAAO,KACP,WAAY,KACZ,kBAAmB,CAAA,EAEnB,aAAc,GACd,YAAa,EAAA,CAGjB,EACA,SAAU,CACR,eAAgB,CACd,MAAO,CACL,QAAW,CACT,CAAC,QAAW,kBAAkB,MAAS,eAAA,EACvC,CAAC,QAAW,aAAa,MAAS,kBAAA,EAClC,CAAC,QAAW,oBAAoB,MAAS,gBAAA,EACzC,CAAC,QAAW,iBAAiB,MAAS,gBAAA,EACtC,CAAC,QAAW,eAAe,MAAS,KAAA,EACpC,CAAC,QAAW,WAAW,MAAS,MAAA,CAAM,EAExC,WAAc,QACd,OAAU,KACV,cAAiB,GACjB,cAAiB,GACjB,eAAkB,EAAA,CAEtB,EAEA,eAAgB,CACd,GAAI,CAAC,KAAK,OAAO,QAAU,CAAC,KAAK,SAC/B,MAAO,CAAA,EAGT,MAAM/J,EAAS,CAAA,EAEf,KAAK,OAAO,QAAQgK,GAAS,SAC3B,MAAMC,EAAiB,KAAK,SAAS,MAAM,KAAKC,GAAKA,EAAE,SAAWF,EAAM,MAAM,EACxEG,GAAkBzR,GAAAD,EAAA,KAAK,YAAL,YAAAA,EAAgB,aAAhB,YAAAC,EAA4B,KAAK0R,GAAKA,EAAE,SAAWJ,EAAM,QAEjF,IAAIK,EAAS,UACTJ,GAAkBA,EAAe,YAAc,KACjDI,EAASJ,EAAe,QAAU,WAG/BjK,EAAOqK,CAAM,IAChBrK,EAAOqK,CAAM,EAAI,CAAA,GAGnBrK,EAAOqK,CAAM,EAAE,KAAK,CAClB,MAAAL,EACA,UAAWG,EACX,SAAUF,CAAA,CACX,CACH,CAAC,EAGD,MAAMK,EAAiB,CACrB,aACA,qBACA,oBACA,yBACA,aACA,cACA,qBACA,SACA,kBACA,cACA,WAAA,EAIIC,EAAmB,CACvB,WAAc,CACZ,iBACA,4BACA,uBACA,yBACA,kCACA,sCACA,0BACA,oBACA,wBACA,qCACA,QACA,qCAAA,EAEF,qBAAsB,CACpB,sBACA,kBACA,mBACA,kBACA,0BACA,mBACA,mCACA,kCACA,oBACA,mBACA,wBACA,mBACA,0BACA,0BACA,iBAAA,EAEF,oBAAqB,CACnB,kBACA,qBACA,cACA,0BACA,kBACA,iBACA,aACA,mBACA,UACA,2BACA,2BACA,yBACA,yBACA,oBACA,WACA,UACA,wBACA,qCACA,oBACA,eACA,wBACA,oBACA,+BAAA,EAEF,yBAA0B,CACxB,iCACA,mBACA,gBACA,uBACA,iCACA,aACA,cAAA,EAEF,WAAc,CACZ,+BACA,gBACA,kBACA,yBACA,mBACA,iCACA,uBACA,0BACA,2CACA,8BACA,0BAAA,EAEF,YAAe,CACb,sBACA,iCACA,sCACA,YACA,6BACA,gCACA,8BACA,mBACA,0BACA,gBACA,iCACA,+BACA,4BACA,WACA,WACA,sBACA,sBACA,oBACA,iCACA,iCACA,kBACA,0BACA,iCACA,gCACA,2BAAA,EAEF,qBAAsB,CACpB,kBACA,4BACA,gCACA,UACA,iBACA,gBACA,gBACA,oBACA,iBACA,gCACA,sBACA,qCAAA,EAEF,OAAU,CACR,uBACA,sBACA,gBACA,iCACA,iCACA,UACA,qBACA,eACA,yCAAA,EAEF,kBAAmB,CACjB,OACA,sBACA,qBACA,SACA,QACA,sBACA,mCACA,YACA,iCACA,WACA,2BACA,SACA,cACA,wBAAA,EAEF,cAAe,CACb,mBACA,oBACA,+BACA,gBACA,qBACA,uBACA,kBACA,gBACA,qBACA,uBACA,4BACA,2BAAA,EAEF,UAAa,CACX,iCACA,0CACA,4BACA,0BACA,wBACA,6BAAA,CACF,EAIIC,EAAe,CAAA,EAGrB,OAAAF,EAAe,QAAQD,GAAU,CAC/B,GAAIrK,EAAOqK,CAAM,GAAKrK,EAAOqK,CAAM,EAAE,OAAS,EAAG,CAE/C,MAAMI,EAAyBF,EAAiBF,CAAM,GAAK,CAAA,EAGrDK,EAAiB,CAAA,EACvB1K,EAAOqK,CAAM,EAAE,QAAQvK,GAAS,OAC9B,MAAM4G,IAAWjO,EAAAqH,EAAM,WAAN,YAAArH,EAAgB,WAAY,mBACxCiS,EAAehE,CAAQ,IAC1BgE,EAAehE,CAAQ,EAAI,CAAA,GAE7BgE,EAAehE,CAAQ,EAAE,KAAK5G,CAAK,CACrC,CAAC,EAGD,MAAM6K,EAAe,CAAA,EAGrBF,EAAuB,QAAQ/D,GAAY,CACzC,GAAIgE,EAAehE,CAAQ,EAAG,CAE5B,MAAMkE,EAAuBF,EAAehE,CAAQ,EAAE,KAAK,CAACmE,EAAGC,IAAM,SACnE,MAAMC,IAAatS,EAAAoS,EAAE,WAAF,YAAApS,EAAY,aAAc,EACvCuS,IAAatS,EAAAoS,EAAE,WAAF,YAAApS,EAAY,aAAc,EAG7C,OAAIqS,IAAeC,EACVH,EAAE,MAAM,OAAO,cAAcC,EAAE,MAAM,MAAM,EAI7CE,EAAaD,CACtB,CAAC,EACDJ,EAAa,KAAK,GAAGC,CAAoB,CAC3C,CACF,CAAC,EAGD,OAAO,KAAKF,CAAc,EAAE,QAAQhE,GAAY,CAC9C,GAAI,CAAC+D,EAAuB,SAAS/D,CAAQ,EAAG,CAC9C,MAAMkE,EAAuBF,EAAehE,CAAQ,EAAE,KAAK,CAACmE,EAAGC,IAAM,SACnE,MAAMC,IAAatS,EAAAoS,EAAE,WAAF,YAAApS,EAAY,aAAc,EACvCuS,IAAatS,EAAAoS,EAAE,WAAF,YAAApS,EAAY,aAAc,EAG7C,OAAIqS,IAAeC,EACVH,EAAE,MAAM,OAAO,cAAcC,EAAE,MAAM,MAAM,EAI7CE,EAAaD,CACtB,CAAC,EACDJ,EAAa,KAAK,GAAGC,CAAoB,CAC3C,CACF,CAAC,EAEDJ,EAAaH,CAAM,EAAIM,CACzB,CACF,CAAC,EAGD,OAAO,KAAK3K,CAAM,EAAE,QAAQqK,GAAU,CAChC,CAACC,EAAe,SAASD,CAAM,GAAKrK,EAAOqK,CAAM,EAAE,OAAS,IAC9DG,EAAaH,CAAM,EAAIrK,EAAOqK,CAAM,EAAE,KAAK,CAACQ,EAAGC,IACtCD,EAAE,MAAM,OAAO,cAAcC,EAAE,MAAM,MAAM,CACnD,EAEL,CAAC,EAEMN,CACT,EAEA,SAAU,CACR,GAAI,CAAC,KAAK,OAAO,QAAU,CAAC,KAAK,SAC/B,MAAO,CAAA,EAGT,MAAMS,EAAO,CAAA,EAGb,cAAO,QAAQ,KAAK,aAAa,EAAE,QAAQ,CAAC,CAACC,EAAYC,CAAM,IAAM,CACnE,MAAMrE,EAAa,CACjB,GAAI,UAAU,KAAK,WAAWoE,CAAU,CAAC,GACzC,KAAM,SACN,MAAOA,EACP,SAAU,CAAA,CAAC,EAIPR,EAAiB,CAAA,EACvBS,EAAO,QAAQrL,GAAS,OACtB,MAAM4G,IAAWjO,EAAAqH,EAAM,WAAN,YAAArH,EAAgB,WAAY,mBACxCiS,EAAehE,CAAQ,IAC1BgE,EAAehE,CAAQ,EAAI,CAAA,GAE7BgE,EAAehE,CAAQ,EAAE,KAAK5G,CAAK,CACrC,CAAC,EAGD,OAAO,QAAQ4K,CAAc,EAAE,QAAQ,CAAC,CAACU,EAAcC,CAAc,IAAM,CACzE,MAAMrE,EAAe,CACnB,GAAI,YAAY,KAAK,WAAWkE,CAAU,CAAC,IAAI,KAAK,WAAWE,CAAY,CAAC,GAC5E,KAAM,WACN,MAAOA,EACP,SAAU,CAAA,CAAC,EAIbC,EAAe,QAAQvL,GAAS,SAC9B,MAAMmH,EAAa,CACjB,GAAI,UAAU,KAAK,WAAWnH,EAAM,MAAM,MAAM,CAAC,GACjD,KAAM,SACN,MAAOA,EAAM,MAAM,OACnB,OAAQA,EAAM,MAAM,OACpB,SAAU,CACR,OAAQoL,EACR,SAAUE,EACV,SAAU,KAAK,iBAAgB3S,EAAAqH,EAAM,WAAN,YAAArH,EAAgB,QAAQ,EACvD,YAAWC,EAAAoH,EAAM,WAAN,YAAApH,EAAgB,aAAc,CAAA,CAC3C,EAEFsO,EAAa,SAAS,KAAKC,CAAU,CACvC,CAAC,EAEDH,EAAW,SAAS,KAAKE,CAAY,CACvC,CAAC,EAEDiE,EAAK,KAAKnE,CAAU,CACtB,CAAC,EAEMmE,CACT,EAGA,aAAc,OACZ,GAAI,GAACxS,EAAA,KAAK,WAAL,MAAAA,EAAe,OAAO,WAAW,IAEtC,MAAM6S,MAAU,IAChB,YAAK,SAAS,MAAM,QAAQ7d,GAAQ,CAClC6d,EAAI,IAAI7d,EAAK,OAAQA,CAAI,CAC3B,CAAC,EACM6d,CACT,EAEA,cAAe,OACb,GAAI,GAAC7S,EAAA,KAAK,YAAL,MAAAA,EAAgB,YAAY,WAAW,IAE5C,MAAM6S,MAAU,IAChB,YAAK,UAAU,WAAW,QAAQ7d,GAAQ,CACxC6d,EAAI,IAAI7d,EAAK,OAAQA,CAAI,CAC3B,CAAC,EACM6d,CACT,CAAA,EAEF,MAAM,SAAU,CACd,MAAM,KAAK,cAAA,EACX,KAAK,qBAAA,CACP,EAEA,eAAgB,CACd,KAAK,kBAAA,CACP,EACA,QAAS,CACP,MAAM,eAAgB,CACpB,KAAK,QAAU,GACf,KAAK,MAAQ,KAEb,GAAI,CACF,QAAQ,IAAI,uCAAuC,EAGnD,MAAM7c,EAAkC,wBAGxC,KAAK,kBAAoB,MAAMyR,GAAa,kBAAA,EAC5C,QAAQ,IAAI,YAAY,KAAK,kBAAkB,MAAM,sBAAsB,EAG3E,MAAMqL,EAAiB,MAAM,MAAM,GAAG9c,CAAQ,8BAAgC,KAAK,KAAK,EACxF,GAAI,CAAC8c,EAAe,GAClB,MAAM,IAAI,MAAM,+BAA+BA,EAAe,MAAM,EAAE,EAGxE,MAAMC,EAAa,MAAMD,EAAe,KAAA,EACpCC,EAAW,QACb,KAAK,OAASA,EAAW,MAAM,OAAOxB,GACpC,KAAK,kBAAkB,SAASA,EAAM,MAAM,CAAA,EAE9C,KAAK,WAAawB,EAAW,MAC7B,QAAQ,IAAI,YAAY,KAAK,OAAO,MAAM,SAAS,GAIrD,MAAMC,EAAgB,MAAM,MAAM,GAAGhd,CAAQ,iCAAmC,KAAK,KAAK,EACtFgd,EAAc,KAChB,KAAK,UAAY,MAAMA,EAAc,KAAA,EACrC,QAAQ,IAAI,qBAAqB,GAInC,MAAMC,EAAmB,MAAM,MAAM,GAAGjd,CAAQ,iCAAmC,KAAK,KAAK,EACzFid,EAAiB,KACnB,KAAK,SAAW,MAAMA,EAAiB,KAAA,EACvC,QAAQ,IAAI,yBAAyB,KAAK,SAAS,MAAM,MAAM,UAAU,GAG3E,QAAQ,IAAI,kDAAkD,CAEhE,OAASpP,EAAK,CACZ,KAAK,MAAQ,OAAOA,CAAG,EACvB,QAAQ,MAAM,mCAAoCA,CAAG,CACvD,QAAA,CACE,KAAK,QAAU,EACjB,CACF,EAEA,MAAM,SAAU,CACd,MAAM,KAAK,cAAA,CACb,EAEA,WAAWqP,EAAY,CACrB,GAAI,CAACA,EAAY,MAAO,GAExB,GAAI,CAEF,OADa,IAAI,KAAKA,CAAU,EACpB,eAAe,QAAS,CAClC,MAAO,QACP,IAAK,UACL,KAAM,UACN,OAAQ,SAAA,CACT,CACH,MAAQ,CACN,OAAOA,CACT,CACF,EAGA,gBAAgBC,EAAc,CAC5B,OAAKA,EAEe,CAClB,IAAO,OACP,IAAO,SACP,IAAO,SACP,IAAO,SACP,IAAO,MAAA,EAGUA,CAAY,GAAKA,EAVV,SAW5B,EAEA,WAAWC,EAAK,CAEd,OAAOA,EAAI,QAAQ,gBAAiB,GAAG,CACzC,EACA,MAAM,cAAcpb,EAAQ,CAC1B,QAAQ,IAAI,8BAA+BA,CAAM,EAGjDoZ,GAAiB,MAAA,EAEjB,GAAI,CAEFpB,GAAkB,iBAAiBhY,CAAM,EAGzC,MAAMgY,GAAkB,eAAehY,CAAM,EAG7C,KAAK,aAAeA,EAGpB,KAAK,oBAAoBA,CAAM,CACjC,QAAA,CAEE,WAAW,IAAM,CACfoZ,GAAiB,OAAA,CACnB,EAAG,GAAG,CACR,CACF,EAEA,eAAezC,EAAO,CACpB,KAAK,YAAcA,CACrB,EAEA,gBAAgB0E,EAAWC,EAAU,CAC/BA,EACF,KAAK,iBAAiB,IAAID,CAAS,EAEnC,KAAK,iBAAiB,OAAOA,CAAS,EAIxC,KAAK,qBAAA,CACP,EAEA,oBAAoBrb,EAAQ,CAE1B,UAAWqW,KAAc,KAAK,QAC5B,UAAWE,KAAgBF,EAAW,SAEpC,GADmBE,EAAa,SAAS,KAAK,GAAK,EAAE,SAAWvW,CAAM,EACtD,CACd,KAAK,iBAAiB,IAAIqW,EAAW,EAAE,EACvC,KAAK,iBAAiB,IAAIE,EAAa,EAAE,EACzC,KAAK,qBAAA,EACL,MACF,CAGN,EAEA,sBAAuB,CACrB,GAAI,CACF,MAAMgF,EAAgB,MAAM,KAAK,KAAK,gBAAgB,EACtD,aAAa,QAAQ,mCAAoC,KAAK,UAAUA,CAAa,CAAC,CACxF,OAAS/f,EAAO,CACd,QAAQ,KAAK,oCAAqCA,CAAK,CACzD,CACF,EAEA,sBAAuB,CACrB,GAAI,CACF,MAAMggB,EAAQ,aAAa,QAAQ,kCAAkC,EACrE,GAAIA,EAAO,CACT,MAAMD,EAAgB,KAAK,MAAMC,CAAK,EACtC,KAAK,iBAAmB,IAAI,IAAID,CAAa,CAC/C,CACF,OAAS/f,EAAO,CACd,QAAQ,KAAK,oCAAqCA,CAAK,EACvD,KAAK,qBAAuB,GAC9B,CACF,EAEA,sBAAuB,CAErB,KAAK,qBAAA,EAGD,KAAK,iBAAiB,OAAS,GACjC,KAAK,kBAAA,EAIP,MAAMigB,EAAczD,GAAkB,wBAAA,EAClCyD,GAAe,KAAK,cAAcA,CAAW,IAC/C,QAAQ,IAAI,yCAA0CA,CAAW,EAGjE,KAAK,UAAU,IAAM,CACnB,WAAW,IAAM,CACf,KAAK,cAAcA,CAAW,CAChC,EAAG,GAAG,CACR,CAAC,GAIH,KAAK,UAAU,IAAM,CACnB,KAAK,eAAA,CACP,CAAC,CACH,EAEA,gBAAiB,CACf,GAAI,CAEF,MAAMC,EAAoB,SAAS,iBAAiB,eAAe,EAEnE,GAAIA,EAAkB,SAAW,EAAG,CAClC,QAAQ,KAAK,yCAAyC,EACtD,MACF,CAGAtC,GAAiB,MACf,MAAM,KAAKsC,CAAiB,EAC3BpD,GAAiB,CAChB,QAAQ,IAAI,uCAAwCA,CAAY,EAChE,KAAK,aAAeA,EACpB,KAAK,oBAAoBA,CAAY,CACvC,CAAA,EAGF,QAAQ,IAAI,+BAA+BoD,EAAkB,MAAM,WAAW,CAChF,OAASlgB,EAAO,CACd,QAAQ,MAAM,6BAA8BA,CAAK,CACnD,CACF,EAEA,mBAAoB,CAClB4d,GAAiB,QAAA,CACnB,EAEA,cAAcpZ,EAAQ,CACpB,OAAOgY,GAAkB,cAAchY,CAAM,CAC/C,EAEA,mBAAoB,CAElB,KAAK,QAAQ,QAAQqW,GAAc,CACjC,KAAK,iBAAiB,IAAIA,EAAW,EAAE,EACvCA,EAAW,SAAS,QAAQE,GAAgB,CAC1C,KAAK,iBAAiB,IAAIA,EAAa,EAAE,CAC3C,CAAC,CACH,CAAC,EACD,KAAK,qBAAA,EACL,QAAQ,IAAI,8CAA8C,CAC5D,CAAA,CAEJ,EArvBOzc,GAAA,CAAA,MAAM,gBAAA,EACJC,GAAA,CAAA,MAAM,cAAA,EAEJC,GAAA,CAAA,MAAM,cAAA,YACJ,MAAM,eACHE,GAAA,CAAA,MAAM,YAAA,YAOE,MAAM,qBAKH,MAAM,SACxBmU,GAAA,CAAA,MAAM,aAAA,YAIC,MAAM,eAaXG,GAAA,CAAA,MAAM,cAAA,EAEJF,GAAA,CAAA,MAAM,yBAAA,EAcNzB,GAAA,CAAA,MAAM,eAAA,EAMHC,GAAA,CAAA,MAAM,cAAA,EAEFC,GAAA,CAAA,MAAM,aAAA,EAGTC,GAAA,CAAA,MAAM,iBAAA,YAc6C,MAAM,+GA5ExE,OAAA3S,EAAA,EAAAC,EA+EM,MA/ENR,GA+EM,CA9EJS,EAOM,MAPNR,GAOM,CANJW,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAuB,UAAnB,iBAAc,EAAA,GAClBA,EAIM,MAJNP,GAIM,CAH2BsS,EAAA,YAA/BjS,EAAA,EAAAC,EAEM,MAFNL,GAEM,CADJM,EAA0E,OAA1EL,GAAyB,iBAAcqS,EAAGH,EAAA,WAAWE,EAAA,UAAU,CAAA,EAAA,CAAA,CAAA,iBAKrE5R,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAmE,IAAA,CAAhE,MAAM,iBAAA,EAAkB,uCAAoC,EAAA,GAEpD+R,EAAA,SAAXjS,IAAAC,EAGM,MAHNH,GAGM,CAAA,GAAAO,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAFJH,EAA2B,MAAA,CAAtB,MAAM,SAAA,EAAS,KAAA,EAAA,EACpBA,EAA4B,SAAzB,wBAAqB,EAAA,CAAA,MAGV+R,EAAA,OAAhBjS,EAAA,EAAAC,EAGM,MAHNF,GAGM,CAFJG,EAAsC,IAAtC8T,GAAsC9B,EAAZD,EAAA,KAAK,EAAA,CAAA,EAC/B/R,EAAiE,SAAA,CAAxD,4BAAO6R,EAAA,SAAAA,EAAA,QAAA,GAAAI,CAAA,GAAS,MAAM,mBAAA,EAAoB,OAAK,CAAA,KAG1DnS,EAAA,EAAAC,EAoDM,MApDNsS,GAoDM,CAlDJpS,EAQEmhB,EAAA,CAPC,WAAUvP,EAAA,QACV,gBAAeE,EAAA,aACf,eAAcA,EAAA,YACd,aAAY,GACZ,cAAcF,EAAA,cACd,eAAeA,EAAA,eAChB,MAAM,oBAAA,uFAIR7R,EAsCM,MAtCNiU,GAsCM,CApCJjU,EAWM,MAXN+T,GAWM,aAVJ/T,EAEM,MAAA,CAFD,MAAM,iBAAe,CACxBA,EAAqB,UAAjB,cAAY,CAAA,OAElBC,EAMEwU,EAAA,CALA,cAAY,eACX,OAAQ5C,EAAA,cACT,aAAW,wEACX,OAAO,QACN,SAAU,CAAA,uBAKf7R,EAqBM,MArBNsS,GAqBM,EApBJxS,EAAA,EAAA,EAAAC,EAmBMmU,EAAA,KAAAC,EAlBsBtC,EAAA,cAAa,CAA/BwP,EAAOhC,SADjBtf,EAmBM,MAAA,CAjBH,IAAKsf,EACN,MAAM,cAAA,GAENrf,EAGK,KAHLuS,GAGK,CAFA+O,EAAAtP,EAAAqN,CAAM,EAAG,IACZ,CAAA,EAAArf,EAAqD,OAArDwS,GAA0B,MAAI6O,EAAM,MAAM,EAAG,IAAC,CAAA,CAAA,GAGhDrhB,EAQM,MARNyS,GAQM,QAPJ1S,EAMEmU,EAAA,KAAAC,EALgBkN,EAATvM,QADTH,GAME4M,EAAA,CAJC,IAAKzM,EAAM,MAAM,OACjB,MAAOA,EAAM,MACb,aAAYA,EAAM,UAClB,SAAUA,EAAM,QAAA,uEAQjB,CAAA/C,EAAA,SAAW,OAAO,KAAKF,EAAA,aAAa,EAAE,SAAM,GAAxD/R,EAAA,EAAAC,EAEM,MAFN2S,GAEM,CAAA,GAAAvS,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CADJH,EAA8B,SAA3B,0BAAuB,EAAA,CAAA,gFC1B3BV,GAAU,CACb,KAAM,qBACN,MAAO,CACL,MAAO,CACL,YAAa,GACb,SAAU,GACV,aAAc,EACd,cAAe,EACf,aAAc,EACd,YAAa,CAAA,EACb,UAAW,CAAA,CAEf,EACA,SAAU,CACR,WAAY,CACV,GAAI,OAAO,YAAgB,KAAe,YAAY,iBAAkB,CAEtE,MAAMkiB,EADU,YAAY,iBAAiB,UAAU,EAC5B,OAAO,CAAC7f,EAAKyP,IAC/BzP,GAAOyP,EAAM,cAAgB,GACnC,CAAC,EAEJ,OAAIoQ,EAAa,KAAO,KACf,IAAIA,GAAc,KAAO,OAAO,QAAQ,CAAC,CAAC,KACxCA,EAAa,KACf,IAAIA,EAAa,MAAM,QAAQ,CAAC,CAAC,KAEnC,GAAGA,CAAU,GACtB,CACA,MAAO,KACT,EAEA,aAAc,CACZ,GAAI,OAAO,YAAgB,KAAe,YAAY,OAAQ,CAC5D,MAAMC,EAAO,YAAY,OAAO,eAChC,OAAIA,EAAO,KAAO,KACT,IAAIA,GAAQ,KAAO,OAAO,QAAQ,CAAC,CAAC,KAEtC,IAAIA,EAAO,MAAM,QAAQ,CAAC,CAAC,IACpC,CACA,MAAO,KACT,CAAA,EAEF,SAAU,CACR,KAAK,UAAY,YAAY,IAAA,EAC7B,KAAK,yBAAA,EAIL,MAAMC,EAAW,IAAI,gBAAgB,OAAO,SAAS,MAAM,EAAE,IAAI,OAAO,EACxE,KAAK,YAAuBA,EAGxB,SAAS,aAAe,WAC1B,KAAK,sBAAA,EAEL,OAAO,iBAAiB,OAAQ,KAAK,qBAAqB,CAE9D,EACA,eAAgB,CACd,OAAO,oBAAoB,OAAQ,KAAK,qBAAqB,CAC/D,EACA,QAAS,CACP,0BAA2B,CAgBzB,GAXA,OAAO,iBAAiB,gBAAkBC,GAAU,CAC9CA,EAAM,QACR,KAAK,cAAc,CACjB,KAAMA,EAAM,OAAO,KACnB,KAAMA,EAAM,OAAO,KACnB,SAAUA,EAAM,OAAO,UAAY,CAAA,CACpC,CAEL,CAAC,EAGG,OAAO,oBAAwB,IACjC,GAAI,CACF,MAAMC,EAAW,IAAI,oBAAqBC,GAAS,CACjD,UAAWzQ,KAASyQ,EAAK,cAEnBzQ,EAAM,KAAK,SAAS,aAAa,GAAKA,EAAM,KAAK,SAAS,QAAQ,IACpE,KAAK,cAAc,CACjB,KAAMA,EAAM,KAAK,MAAM,GAAG,EAAE,OAAS,iBACrC,KAAM,KAAK,MAAMA,EAAM,QAAQ,EAC/B,SAAU,CAAA,CACX,CAGP,CAAC,EAEDwQ,EAAS,QAAQ,CAAE,WAAY,CAAC,WAAY,YAAY,EAAG,EAG3D,KAAK,MAAM,qBAAsB,IAAM,CACrCA,EAAS,WAAA,CACX,CAAC,CACH,OAAS3gB,EAAO,CACd,QAAQ,KAAK,qCAAsCA,CAAK,CAC1D,CAEJ,EAEA,uBAAwB,CACtB,KAAK,aAAe,KAAK,MAAM,YAAY,IAAA,EAAQ,KAAK,SAAS,CACnE,EAEA,cAAc6gB,EAAQ,OAQpB,GAPA,KAAK,YAAY,KAAK,CACpB,GAAI,KAAK,MAAQ,KAAK,OAAA,EACtB,GAAGA,CAAA,CACJ,EACD,KAAK,gBAGD,KAAK,eAAiB,EAAG,CAE3B,MAAMC,IAAOtU,EAAA,KAAK,SAAL,YAAAA,EAAa,OAAQ,OAAO,SAAS,SAC9CsU,EAAK,SAAS,kBAAkB,EAClC,KAAK,aAAe,EACXA,EAAK,SAAS,iBAAiB,EACxC,KAAK,aAAe,GAEpB,KAAK,aAAe,KAAK,cAAgB,CAE7C,CACF,EAEA,aAAangB,EAAM,CACjB,OAAIA,EAAO,IAAa,YACpBA,EAAO,IAAa,UACjB,WACT,EAEA,eAAgB,CACd,KAAK,SAAW,CAAC,KAAK,QACxB,EAEA,cAAe,CACb,KAAK,YAAc,CAAA,EACnB,KAAK,cAAgB,EACrB,KAAK,aAAe,EACpB,KAAK,UAAY,YAAY,IAAA,CAC/B,EAEA,eAAgB,CACd,MAAMU,EAAO,CACX,aAAc,KAAK,aACnB,cAAe,KAAK,cACpB,aAAc,KAAK,aACnB,UAAW,KAAK,UAChB,YAAa,KAAK,YAClB,YAAa,KAAK,YAClB,UAAW,IAAI,KAAA,EAAO,YAAA,EACtB,IAAK,OAAO,SAAS,IAAA,EAGjB0f,EAAO,IAAI,KAAK,CAAC,KAAK,UAAU1f,EAAM,KAAM,CAAC,CAAC,EAAG,CAAE,KAAM,mBAAoB,EAC7EoK,EAAM,IAAI,gBAAgBsV,CAAI,EAC9BnC,EAAI,SAAS,cAAc,GAAG,EACpCA,EAAE,KAAOnT,EACTmT,EAAE,SAAW,eAAe,KAAK,IAAA,CAAK,QACtCA,EAAE,MAAA,EACF,IAAI,gBAAgBnT,CAAG,CACzB,CAAA,CAEJ,YA3NO,MAAM,uBACJlN,GAAA,CAAA,MAAM,gBAAA,YAOU,MAAM,mBACpBE,GAAA,CAAA,MAAM,cAAA,EACJC,GAAA,CAAA,MAAM,aAAA,EAEJC,GAAA,CAAA,MAAM,cAAA,EAGRC,GAAA,CAAA,MAAM,aAAA,EAEJiU,GAAA,CAAA,MAAM,cAAA,EAGRzB,GAAA,CAAA,MAAM,aAAA,EAEJ4B,GAAA,CAAA,MAAM,cAAA,EAGRF,GAAA,CAAA,MAAM,aAAA,EAEJzB,GAAA,CAAA,MAAM,cAAA,EAIVC,GAAA,CAAA,MAAM,cAAA,EAGDC,GAAA,CAAA,MAAM,aAAA,EAINC,GAAA,CAAA,MAAM,iBAAA,EAIXC,GAAA,CAAA,MAAM,SAAA,kCA1CwBX,EAAA,aAAvCjS,EAAA,EAAAC,EA+CM,MA/CNR,GA+CM,CA9CJS,EAKM,MALNR,GAKM,CAJJW,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAA4B,UAAxB,sBAAmB,EAAA,GACvBA,EAES,SAAA,CAFA,4BAAO6R,EAAA,eAAAA,EAAA,cAAA,GAAAI,CAAA,GAAe,MAAM,YAAA,IAChCF,EAAA,SAAQ,IAAA,GAAA,EAAA,CAAA,CAAA,GAIJA,EAAA,UAAXjS,EAAA,EAAAC,EAsCM,MAtCNN,GAsCM,CArCJO,EAoBM,MApBNN,GAoBM,CAnBJM,EAGM,MAHNL,GAGM,CAFJQ,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAyC,MAAA,CAApC,MAAM,cAAA,EAAe,YAAS,EAAA,GACnCA,EAAoD,MAApDJ,GAAoDoS,EAAvBD,EAAA,YAAY,EAAG,KAAE,CAAA,CAAA,GAGhD/R,EAGM,MAHNH,GAGM,CAFJM,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAA8C,MAAA,CAAzC,MAAM,cAAA,EAAe,iBAAc,EAAA,GACxCA,EAAsE,MAAtE8T,GAAsE9B,EAAzCD,eAAa,EAAG,MAAIA,EAAA,YAAY,EAAA,CAAA,CAAA,GAG/D/R,EAGM,MAHNqS,GAGM,CAFJlS,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAA0C,MAAA,CAArC,MAAM,cAAA,EAAe,aAAU,EAAA,GACpCA,EAA+C,MAA/CiU,GAA+CjC,EAAlBH,EAAA,SAAS,EAAA,CAAA,CAAA,GAGxC7R,EAGM,MAHN+T,GAGM,CAFJ5T,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAA4C,MAAA,CAAvC,MAAM,cAAA,EAAe,eAAY,EAAA,GACtCA,EAAiD,MAAjDsS,GAAiDN,EAApBH,EAAA,WAAW,EAAA,CAAA,CAAA,KAI5C7R,EASM,MATNuS,GASM,CARJpS,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAA0B,UAAtB,oBAAiB,EAAA,UACrBD,EAMMmU,EAAA,KAAAC,EANgBpC,EAAA,YAAV+P,QAAZ/hB,EAMM,MAAA,CAN8B,IAAK+hB,EAAO,GAAI,MAAM,aAAA,GACxD9hB,EAAkD,OAAlDwS,GAAkDR,EAArB8P,EAAO,IAAI,EAAA,CAAA,EACxC9hB,EAEO,OAAA,CAFD,SAAM,cAAsB6R,eAAaiQ,EAAO,IAAI,CAAA,CAAA,CAAA,IACrDA,EAAO,IAAI,EAAG,MACnB,CAAA,EACA9hB,EAA2D,OAA3DyS,GAA8B,IAACT,EAAG8P,EAAO,QAAQ,EAAA,CAAA,CAAA,aAIrD9hB,EAGM,MAHN0S,GAGM,CAFJ1S,EAA8D,SAAA,CAArD,4BAAO6R,EAAA,cAAAA,EAAA,aAAA,GAAAI,CAAA,GAAc,MAAM,WAAA,EAAY,OAAK,EACrDjS,EAAiE,SAAA,CAAxD,4BAAO6R,EAAA,eAAAA,EAAA,cAAA,GAAAI,CAAA,GAAe,MAAM,YAAA,EAAa,QAAM,CAAA,0FC/B3D3S,GAAU,CACb,KAAM,iBACN,WAAY,CACV,cAAA2iB,GACA,mBAAA9f,EACF,CACF,EAnBO5C,GAAA,CAAA,MAAM,iBAAiB,gFAA5B,OAAAO,EAAA,EAAAC,EAMM,MANNR,GAMM,CAJJU,EAAsBiiB,CAAA,EAGtBjiB,EAAiBkiB,CAAA,mECoBhB7iB,GAAU,CACb,KAAM,UACR,EA3BOC,GAAA,CAAA,MAAM,UAAU,2BAArB,OAAAO,EAAA,EAAAC,EAqBM,MArBNR,GAqBM,CAAA,GAAAY,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,seCIHb,GAAU,CACb,KAAM,qBACN,MAAO,CACL,OAAQ,CACN,KAAM,OACN,SAAU,IAEZ,SAAU,CACR,KAAM,OACN,QAAS,UAEX,SAAU,CACR,KAAM,OACN,QAAS,CACX,GAEF,MAAO,CACL,MAAO,CACL,OAAQ,GACR,MAAO,GACP,cAAe,EACf,UAAW,GACX,SAAU,IACZ,CACF,EACA,SAAU,CACR,aAAc,CACZ,MAAO,iBAAiB,KAAK,MAAM,IAAI,KAAK,IAAG,CAAE,EACnD,GAEF,MAAM,SAAU,CACd,KAAK,0BAAyB,CAChC,EACA,eAAgB,CACV,KAAK,UACP,KAAK,SAAS,WAAU,CAE5B,EACA,QAAS,CACP,2BAA4B,CAC1B,MAAM4R,EAAc,CAClB,EAAG,QACH,EAAG,QACH,EAAG,MACL,EAEA,KAAK,SAAW,IAAI,qBACjBC,GAAY,CACXA,EAAQ,QAASC,GAAU,CACrBA,EAAM,gBAAkB,CAAC,KAAK,QAAU,CAAC,KAAK,QAChD,KAAK,UAAY,GACjB,KAAK,WAAU,EACf,KAAK,SAAS,WAAU,EAE5B,CAAC,CACH,EACA,CACE,WAAYF,EAAY,KAAK,QAAQ,GAAK,OAC1C,UAAW,EACb,CACF,EAEA,KAAK,SAAS,QAAQ,KAAK,MAAM,SAAS,CAC5C,EAEA,MAAM,YAAa,CACjB,KAAK,cAAgB,YAAY,IAAG,EACpC,KAAK,OAAS,GACd,KAAK,MAAQ,GAEb,GAAI,CAOF,MAAMG,EANS,CACb,EAAG,EACH,EAAG,IACH,EAAG,GACL,EAEqB,KAAK,QAAQ,GAAK,EACnCA,EAAQ,GACV,MAAM,IAAI,QAAQzQ,GAAW,WAAWA,EAASyQ,CAAK,CAAC,EAGzD,MAAM,KAAK,aAAY,CAEzB,OAASC,EAAK,CACZ,QAAQ,MAAM,uCAAwCA,CAAG,EACzD,KAAK,MAAQ,EACf,CACF,EAEA,MAAM,cAAe,CACnB,OAAO,IAAI,QAAQ,CAAC1Q,EAASC,IAAW,CACtC,KAAK,UAAU,SAAY,CACzB,MAAM0Q,EAAY,KAAK,MAAM,UAC7B,GAAI,CAACA,EAAW,CACd1Q,EAAO,IAAI,MAAM,qBAAqB,CAAC,EACvC,MACF,CAEA,MAAMwD,EAAS,KAAK,gBAAe,EAC7B3D,EAAY,+EAEZM,EAAS,SAAS,cAAc,QAAQ,EAE9CA,EAAO,KAAO,kBACdA,EAAO,IAAMN,EACbM,EAAO,MAAQ,GACfA,EAAO,UAAY,KAAK,UAAUqD,CAAM,EAExC,MAAMuN,EAAU,WAAW,IAAM,CAC/B,KAAK,MAAQ,GACb/Q,EAAO,IAAI,MAAM,qBAAqB,CAAC,CACzC,EAAG,GAAI,EAEPG,EAAO,OAAS,IAAM,CACpB,aAAa4Q,CAAO,EACpB,KAAK,OAAS,GAEd,MAAMf,EAAW,YAAY,IAAG,EAAK,KAAK,cAC1C,QAAQ,IAAI,wBAAwB,KAAK,MAAM,cAAcA,EAAS,QAAQ,CAAC,CAAC,IAAI,EAEpFjQ,EAAO,CACT,EAEAI,EAAO,QAAU,IAAM,CACrB,aAAa4Q,CAAO,EACpB,KAAK,MAAQ,GACb/Q,EAAO,IAAI,MAAM,oBAAoB,CAAC,CACxC,EAEA,MAAM4Q,EAAkBF,EAAU,cAAc,uCAAuC,EACnFE,EACFA,EAAgB,YAAYzQ,CAAM,EAElCuQ,EAAU,YAAYvQ,CAAM,CAEhC,CAAC,CACH,CAAC,CACH,EAEA,iBAAkB,CAChB,MAAO,CACL,oBAAuB,GACvB,SAAY,GACZ,QAAW,GACX,kBAAqB,GACrB,iBAAoB,GACpB,YAAe,GACf,YAAe,GACf,QAAW,GACX,SAAY,IACZ,OAAU,KACV,WAAc,GACd,MAAS,IACT,OAAU,GAAG,KAAK,QAAQ,IAAI,KAAK,MAAM,GACzC,MAAS,QACT,SAAY,UACZ,gBAAmB,UACnB,UAAa,yBACb,UAAa,CAAA,EACb,eAAkB,GAClB,MAAS,KACT,eAAkB,CAAA,EAClB,QAAW,CACT,sBACA,cACA,WACA,yBACA,mCAEF,SAAY,EACd,CACF,EAEA,MAAM,OAAQ,CACZ,KAAK,0BAAyB,CAChC,CACF,CACF,sBA1MkC,MAAM,2BAKlB,MAAM,mBAMH,MAAM,+BAA+B,MAAA,CAAA,OAAA,OAAA,MAAA,MAAA,GAEnDrB,GAAA,CAAA,MAAM,8BAA8B,cAE/BE,GAAA,CAAA,MAAM,WAAW,sCAhB/BE,EAqBM,MAAA,CArBD,MAAM,wBAAyB,GAAI8R,EAAA,YAAa,IAAI,cAC3C,CAAAE,EAAA,SAAWA,EAAA,OAAvBjS,IAAAC,EAGM,MAHNP,GAGM,CAAA,GAAAW,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAFJH,EAAmC,MAAA,CAA9B,MAAM,iBAAiB,EAAA,KAAA,EAAA,EAC5BA,EAAqC,YAA/B,2BAAwB,EAAA,gBAGrB+R,EAAA,OAAXjS,IAAAC,EAGM,MAHNN,GAGM,CAFJU,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAA8B,YAAxB,oBAAiB,EAAA,GACvBA,EAAuD,SAAA,CAA9C,4BAAO6R,EAAA,OAAAA,EAAA,MAAA,GAAAI,CAAA,GAAO,MAAM,aAAY,OAAK,cAIhD6D,EAAA9V,EAQM,MARNN,GAQM,aAPJM,EAAoG,MAAA,CAA/F,MAAM,uCAAuC,MAAA,CAAA,OAAA,oBAAA,MAAA,MAAA,aAClDA,EAKM,MALNL,GAKM,CAJJK,EAEI,IAAA,CAFA,KAAI,uCAAyC8R,EAAA,QAAQ,IAAIA,EAAA,MAAM,IAAK,IAAI,oBAAoB,OAAO,WACrG9R,EAAuD,OAAvDH,GAAuDmS,EAA5BF,EAAA,MAAM,EAAG,eAAY,CAAA,SAElD3R,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAA8C,OAAA,CAAxC,MAAM,aAAY,kBAAe,EAAA,gBAN9B+R,EAAA,MAAM,0ECalBzS,GAAU,CACb,KAAM,wBACN,MAAO,CACL,OAAQ,CACN,KAAM,OACN,SAAU,IAEZ,SAAU,CACR,KAAM,OACN,QAAS,UAEX,SAAU,CACR,KAAM,OACN,QAAS,CACX,GAEF,MAAO,CACL,MAAO,CACL,OAAQ,GACR,MAAO,GACP,cAAe,EACf,UAAW,GACX,SAAU,IACZ,CACF,EACA,SAAU,CACR,aAAc,CACZ,MAAO,oBAAoB,KAAK,MAAM,IAAI,KAAK,IAAG,CAAE,EACtD,GAEF,MAAM,SAAU,CACd,KAAK,0BAAyB,CAChC,EACA,eAAgB,CACV,KAAK,UACP,KAAK,SAAS,WAAU,CAE5B,EACA,QAAS,CACP,2BAA4B,CAC1B,MAAM4R,EAAc,CAClB,EAAG,QACH,EAAG,QACH,EAAG,OACH,EAAG,MACL,EAEA,KAAK,SAAW,IAAI,qBACjBC,GAAY,CACXA,EAAQ,QAASC,GAAU,CACrBA,EAAM,gBAAkB,CAAC,KAAK,QAAU,CAAC,KAAK,QAChD,KAAK,UAAY,GACjB,KAAK,WAAU,EACf,KAAK,SAAS,WAAU,EAE5B,CAAC,CACH,EACA,CACE,WAAYF,EAAY,KAAK,QAAQ,GAAK,OAC1C,UAAW,EACb,CACF,EAEA,KAAK,SAAS,QAAQ,KAAK,MAAM,SAAS,CAC5C,EAEA,MAAM,YAAa,CACjB,KAAK,cAAgB,YAAY,IAAG,EACpC,KAAK,OAAS,GACd,KAAK,MAAQ,GAEb,GAAI,CAQF,MAAMG,EAPS,CACb,EAAG,EACH,EAAG,IACH,EAAG,IACH,EAAG,GACL,EAEqB,KAAK,QAAQ,GAAK,EACnCA,EAAQ,GACV,MAAM,IAAI,QAAQzQ,GAAW,WAAWA,EAASyQ,CAAK,CAAC,EAGzD,MAAM,KAAK,aAAY,CAEzB,OAASC,EAAK,CACZ,QAAQ,MAAM,0CAA2CA,CAAG,EAC5D,KAAK,MAAQ,EACf,CACF,EAEA,MAAM,cAAe,CACnB,OAAO,IAAI,QAAQ,CAAC1Q,EAASC,IAAW,CACtC,KAAK,UAAU,SAAY,CACzB,MAAM0Q,EAAY,KAAK,MAAM,UAC7B,GAAI,CAACA,EAAW,CACd1Q,EAAO,IAAI,MAAM,qBAAqB,CAAC,EACvC,MACF,CAEA,MAAMwD,EAAS,KAAK,gBAAe,EAC7B3D,EAAY,+EAEZM,EAAS,SAAS,cAAc,QAAQ,EAE9CA,EAAO,KAAO,kBACdA,EAAO,IAAMN,EACbM,EAAO,MAAQ,GACfA,EAAO,UAAY,KAAK,UAAUqD,CAAM,EAExC,MAAMuN,EAAU,WAAW,IAAM,CAC/B,KAAK,MAAQ,GACb/Q,EAAO,IAAI,MAAM,qBAAqB,CAAC,CACzC,EAAG,GAAI,EAEPG,EAAO,OAAS,IAAM,CACpB,aAAa4Q,CAAO,EACpB,KAAK,OAAS,GAEd,MAAMf,EAAW,YAAY,IAAG,EAAK,KAAK,cAC1C,QAAQ,IAAI,2BAA2B,KAAK,MAAM,cAAcA,EAAS,QAAQ,CAAC,CAAC,IAAI,EAEvFjQ,EAAO,CACT,EAEAI,EAAO,QAAU,IAAM,CACrB,aAAa4Q,CAAO,EACpB,KAAK,MAAQ,GACb/Q,EAAO,IAAI,MAAM,oBAAoB,CAAC,CACxC,EAEA,MAAM4Q,EAAkBF,EAAU,cAAc,uCAAuC,EACnFE,EACFA,EAAgB,YAAYzQ,CAAM,EAElCuQ,EAAU,YAAYvQ,CAAM,CAEhC,CAAC,CACH,CAAC,CACH,EAEA,iBAAkB,CAChB,MAAO,CACL,oBAAuB,GACvB,SAAY,GACZ,QAAW,GACX,kBAAqB,GACrB,iBAAoB,GACpB,YAAe,GACf,YAAe,GACf,QAAW,GACX,SAAY,IACZ,OAAU,KACV,WAAc,GACd,MAAS,IACT,OAAU,GAAG,KAAK,QAAQ,IAAI,KAAK,MAAM,GACzC,MAAS,QACT,SAAY,UACZ,gBAAmB,UACnB,UAAa,yBACb,UAAa,CAAA,EACb,eAAkB,GAClB,MAAS,KACT,eAAkB,CAAA,EAClB,QAAW,CACT,WACA,wBACA,WACA,WAEF,SAAY,EACd,CACF,EAEA,MAAM,OAAQ,CACZ,KAAK,0BAAyB,CAChC,CACF,CACF,sBA3MkC,MAAM,2BAKlB,MAAM,mBAMH,MAAM,+BAA+B,MAAA,CAAA,OAAA,OAAA,MAAA,MAAA,GAEnDrB,GAAA,CAAA,MAAM,8BAA8B,cAE/BE,GAAA,CAAA,MAAM,WAAW,sCAhB/BE,EAqBM,MAAA,CArBD,MAAM,wBAAyB,GAAI8R,EAAA,YAAa,IAAI,cAC3C,CAAAE,EAAA,SAAWA,EAAA,OAAvBjS,IAAAC,EAGM,MAHNP,GAGM,CAAA,GAAAW,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAFJH,EAAmC,MAAA,CAA9B,MAAM,iBAAiB,EAAA,KAAA,EAAA,EAC5BA,EAAwC,YAAlC,8BAA2B,EAAA,gBAGxB+R,EAAA,OAAXjS,IAAAC,EAGM,MAHNN,GAGM,CAFJU,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAA8B,YAAxB,oBAAiB,EAAA,GACvBA,EAAuD,SAAA,CAA9C,4BAAO6R,EAAA,OAAAA,EAAA,MAAA,GAAAI,CAAA,GAAO,MAAM,aAAY,OAAK,cAIhD6D,EAAA9V,EAQM,MARNN,GAQM,aAPJM,EAAoG,MAAA,CAA/F,MAAM,uCAAuC,MAAA,CAAA,OAAA,oBAAA,MAAA,MAAA,aAClDA,EAKM,MALNL,GAKM,CAJJK,EAEI,IAAA,CAFA,KAAI,uCAAyC8R,EAAA,QAAQ,IAAIA,EAAA,MAAM,IAAK,IAAI,oBAAoB,OAAO,WACrG9R,EAAuD,OAAvDH,GAAuDmS,EAA5BF,EAAA,MAAM,EAAG,eAAY,CAAA,SAElD3R,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAA8C,OAAA,CAAxC,MAAM,aAAY,kBAAe,EAAA,gBAN9B+R,EAAA,MAAM,0ECIlBzS,GAAU,CACb,KAAM,4BACN,MAAO,CACL,OAAQ,CACN,KAAM,OACN,SAAU,IAEZ,SAAU,CACR,KAAM,OACN,QAAS,UAEX,WAAY,CACV,KAAM,OACN,QAAS,SAEX,cAAe,CACb,KAAM,QACN,QAAS,IAEX,OAAQ,CACN,KAAM,OACN,QAAS,IACX,GAEF,MAAO,CACL,MAAO,CACL,OAAQ,GACR,MAAO,GACP,SAAU,mBAAmB,KAAK,IAAG,CAAE,EACzC,CACF,EACA,SAAU,CACR,YAAa,CACX,MAAO,GAAG,KAAK,QAAQ,IAAI,KAAK,MAAM,EACxC,GAEF,SAAU,CACR,KAAK,mBAAkB,CACzB,EACA,MAAO,CACL,QAAS,CACP,KAAK,mBAAkB,CACzB,EACA,UAAW,CACT,KAAK,mBAAkB,CACzB,GAEF,QAAS,CACP,MAAM,oBAAqB,CACzB,KAAK,OAAS,GACd,KAAK,MAAQ,GAEb,GAAI,CACF,MAAM,KAAK,UAAS,EACpB,KAAK,qBAAoB,CAC3B,OAASgS,EAAK,CACZ,QAAQ,MAAM,kCAAmCA,CAAG,EACpD,KAAK,MAAQ,EACf,CACF,EAEA,sBAAuB,CACrB,MAAMC,EAAY,KAAK,MAAM,UAC7B,GAAI,CAACA,EAAW,OAGhBA,EAAU,UAAY,GAGtB,MAAME,EAAkB,SAAS,cAAc,KAAK,EACpDA,EAAgB,UAAY,+BAC5BA,EAAgB,MAAM,OAAS,OAC/BA,EAAgB,MAAM,MAAQ,OAE9B,MAAMC,EAAgB,SAAS,cAAc,KAAK,EAClDA,EAAc,UAAY,uCAE1BD,EAAgB,YAAYC,CAAa,EACzCH,EAAU,YAAYE,CAAe,EAGrC,MAAMpN,EAAS,CACb,OAAU,KAAK,WACf,WAAc,KAAK,WACnB,cAAiB,KAAK,cACtB,OAAU,KAAK,OACf,MAAS,OACT,OAAU,MACZ,EAEA,QAAQ,IAAI,0CAA0C,KAAK,UAAU,GAAIA,CAAM,EAG/E,MAAMrD,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,KAAO,kBACdA,EAAO,IAAM,+EACbA,EAAO,MAAQ,GACfA,EAAO,UAAY,KAAK,UAAUqD,CAAM,EAGxCrD,EAAO,OAAS,IAAM,CACpB,KAAK,OAAS,GACd,QAAQ,IAAI,iDAAiD,CAC/D,EAEAA,EAAO,QAAU,IAAM,CACrB,KAAK,MAAQ,GACb,QAAQ,MAAM,4CAA4C,CAC5D,EAGA0Q,EAAc,YAAY1Q,CAAM,EAGhC,WAAW,IAAM,CACX,CAAC,KAAK,QAAU,CAAC,KAAK,QACxB,KAAK,OAAS,GAElB,EAAG,GAAI,CACT,EAEA,MAAM,OAAQ,CACZ,MAAM,KAAK,mBAAkB,CAC/B,CACF,CACF,EA7IOzB,GAAA,CAAA,MAAM,2BAA2B,sBAEJ,MAAM,6BAKlB,MAAM,0CAP5B,OAAAO,EAAA,EAAAC,EAYM,MAZNR,GAYM,CAXJS,EAUM,MAAA,CAVD,MAAM,yBAA0B,GAAI+R,EAAA,SAAU,IAAI,cACzC,CAAAA,EAAA,SAAWA,EAAA,OAAvBjS,IAAAC,EAGM,MAHNN,GAGM,CAAA,GAAAU,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAFJH,EAAmC,MAAA,CAA9B,MAAM,iBAAiB,EAAA,KAAA,EAAA,EAC5BA,EAAuC,YAAjC,6BAA0B,EAAA,gBAGvB+R,EAAA,OAAXjS,IAAAC,EAGM,MAHNL,GAGM,CAFJS,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAA8C,YAAxC,oCAAiC,EAAA,GACvCA,EAAuD,SAAA,CAA9C,4BAAO6R,EAAA,OAAAA,EAAA,MAAA,GAAAI,CAAA,GAAO,MAAM,aAAY,OAAK,sFCOjD3S,GAAU,CACb,KAAM,6BACN,MAAO,CACL,OAAQ,CACN,KAAM,OACN,SAAU,IAEZ,SAAU,CACR,KAAM,OACN,QAAS,UAEX,WAAY,CACV,KAAM,OACN,QAAS,QAEX,YAAa,CACX,KAAM,OACN,QAAS,WAEX,cAAe,CACb,KAAM,QACN,QAAS,IAEX,OAAQ,CACN,KAAM,OACN,QAAS,OACX,GAEF,MAAO,CACL,MAAO,CACL,OAAQ,GACR,MAAO,GACP,SAAU,oBAAoB,KAAK,IAAG,CAAE,EAC1C,CACF,EACA,SAAU,CACR,YAAa,CACX,MAAO,GAAG,KAAK,QAAQ,IAAI,KAAK,MAAM,EACxC,GAEF,SAAU,CACR,KAAK,oBAAmB,CAC1B,EACA,MAAO,CACL,QAAS,CACP,KAAK,oBAAmB,CAC1B,EACA,UAAW,CACT,KAAK,oBAAmB,CAC1B,GAEF,QAAS,CACP,MAAM,qBAAsB,CAC1B,KAAK,OAAS,GACd,KAAK,MAAQ,GAEb,GAAI,CACF,MAAM,KAAK,UAAS,EACpB,KAAK,sBAAqB,CAC5B,OAASgS,EAAK,CACZ,QAAQ,MAAM,mCAAoCA,CAAG,EACrD,KAAK,MAAQ,EACf,CACF,EAEA,uBAAwB,CACtB,MAAMC,EAAY,KAAK,MAAM,UAC7B,GAAI,CAACA,EAAW,OAGhBA,EAAU,UAAY,GAGtB,MAAME,EAAkB,SAAS,cAAc,KAAK,EACpDA,EAAgB,UAAY,+BAC5BA,EAAgB,MAAM,OAAS,OAC/BA,EAAgB,MAAM,MAAQ,OAE9B,MAAMC,EAAgB,SAAS,cAAc,KAAK,EAClDA,EAAc,UAAY,uCAE1BD,EAAgB,YAAYC,CAAa,EACzCH,EAAU,YAAYE,CAAe,EAGrC,MAAMpN,EAAS,CACb,OAAU,KAAK,WACf,WAAc,QACd,YAAe,UACf,cAAiB,GACjB,OAAU,QACV,MAAS,OACT,OAAU,MACZ,EAGMrD,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,KAAO,kBACdA,EAAO,IAAM,2EACbA,EAAO,MAAQ,GACfA,EAAO,UAAY,KAAK,UAAUqD,CAAM,EAGxCrD,EAAO,OAAS,IAAM,CACpB,KAAK,OAAS,GACd,QAAQ,IAAI,kDAAkD,CAChE,EAEAA,EAAO,QAAU,IAAM,CACrB,KAAK,MAAQ,GACb,QAAQ,MAAM,6CAA6C,CAC7D,EAGA0Q,EAAc,YAAY1Q,CAAM,EAGhC,WAAW,IAAM,CACX,CAAC,KAAK,QAAU,CAAC,KAAK,QACxB,KAAK,OAAS,GAElB,EAAG,GAAI,CACT,EAEA,MAAM,OAAQ,CACZ,MAAM,KAAK,oBAAmB,CAChC,CACF,CACF,EAhJOzB,GAAA,CAAA,MAAM,4BAA4B,sBAEL,MAAM,iCAKlB,MAAM,8CAP5B,OAAAO,EAAA,EAAAC,EAYM,MAZNR,GAYM,CAXJS,EAUM,MAAA,CAVD,MAAM,0BAA2B,GAAI+R,EAAA,SAAU,IAAI,cAC1C,CAAAA,EAAA,SAAWA,EAAA,OAAvBjS,IAAAC,EAGM,MAHNN,GAGM,CAAA,GAAAU,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAFJH,EAAmC,MAAA,CAA9B,MAAM,iBAAiB,EAAA,KAAA,EAAA,EAC5BA,EAAwC,YAAlC,8BAA2B,EAAA,gBAGxB+R,EAAA,OAAXjS,IAAAC,EAGM,MAHNL,GAGM,CAFJS,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAA+C,YAAzC,qCAAkC,EAAA,GACxCA,EAAuD,SAAA,CAA9C,4BAAO6R,EAAA,OAAAA,EAAA,MAAA,GAAAI,CAAA,GAAO,MAAM,aAAY,OAAK,sFC8CjD3S,GAAU,CACb,KAAM,YACN,MAAO,CACL,OAAQ,CACN,KAAM,OACN,SAAU,IAEZ,UAAW,CACT,KAAM,OACN,QAAS,CACX,GAEF,MAAO,CACL,MAAO,CACL,QAAS,GACT,MAAO,KACP,KAAM,CAAA,CACR,CACF,EACA,SAAU,CACR,KAAK,SAAQ,CACf,EACA,MAAO,CACL,QAAS,CACP,KAAK,SAAQ,CACf,GAEF,QAAS,CACP,MAAM,UAAW,CACf,KAAK,QAAU,GACf,KAAK,MAAQ,KACb,KAAK,KAAO,GAEZ,GAAI,CACF,QAAQ,IAAI,oBAAoB,KAAK,MAAM,KAAK,EAGhD,MAAMoE,EAAW,MAAM,KAAK,eAAe,KAAK,MAAM,EAElDA,GAAYA,EAAS,OAAS,GAChC,KAAK,KAAOA,EAAS,MAAM,EAAG,KAAK,SAAS,EAC5C,QAAQ,IAAI,UAAU,KAAK,KAAK,MAAM,sBAAsB,KAAK,MAAM,EAAE,GAEzE,KAAK,KAAO,EAGhB,OAASzC,EAAO,CACd,QAAQ,MAAM,2BAA2B,KAAK,MAAM,IAAKA,CAAK,EAC9D,KAAK,MAAQA,EAAM,OACrB,QAAA,CACE,KAAK,QAAU,EACjB,CACF,EAEA,MAAM,eAAewE,EAAQ,CAE3B,MAAM2c,EAAc,CAClB,sCACA,0BAGF,UAAW5V,KAAS4V,EAClB,GAAI,CACF,MAAM3V,EAAY,wDAAwDhH,CAAM,iDAAiD,KAAK,SAAS,6MACzIiH,EAAM,GAAGF,CAAK,GAAG,mBAAmBC,CAAS,CAAC,GAEpD,QAAQ,IAAI,uBAAuBC,CAAG,EAAE,EAExC,MAAMhJ,EAAW,MAAM,MAAMgJ,CAAG,EAEhC,GAAI,CAAChJ,EAAS,GACZ,MAAM,IAAI,MAAM,uBAAuBA,EAAS,MAAM,EAAE,EAG1D,MAAMpB,EAAO,MAAMoB,EAAS,OAE5B,GAAIpB,GAAQA,EAAK,MAAQA,EAAK,KAAK,OAAS,EAC1C,OAAOA,EAAK,IAGhB,OAASrB,EAAO,CACd,QAAQ,KAAK,yBAA0BA,EAAM,OAAO,EACpD,QACF,CAGF,MAAM,IAAI,MAAM,yBAAyB,CAC3C,EAEA,WAAWohB,EAAW,CACpB,GAAI,CAACA,EAAW,MAAO,eAEvB,MAAMzd,EAAO,IAAI,KAAKyd,EAAY,GAAI,EAChC9d,EAAM,IAAI,KACV0B,EAAS1B,EAAMK,EACfsB,EAAY,KAAK,MAAMD,GAAU,IAAO,GAAK,GAAG,EAChDqc,EAAW,KAAK,MAAMpc,EAAY,EAAE,EAE1C,OAAIA,EAAY,EAEP,GADa,KAAK,MAAMD,EAAU,GAAU,CAC9B,QACZC,EAAY,GACd,GAAGA,CAAS,QACVoc,EAAW,EACb,GAAGA,CAAQ,QAEX1d,EAAK,mBAAmB,QAAS,CACtC,MAAO,QACP,IAAK,UACL,KAAMA,EAAK,YAAW,IAAOL,EAAI,YAAW,EAAK,UAAY,MAC/D,CAAC,CAEL,EAEA,aAAagY,EAAMgG,EAAW,CAC5B,OAAKhG,EACDA,EAAK,QAAUgG,EAAkBhG,EAC9BA,EAAK,UAAU,EAAGgG,CAAS,EAAE,KAAI,EAAK,MAF3B,EAGpB,EAEA,YAAYzhB,EAAM,CACZA,GACF,OAAO,KAAKA,EAAM,SAAU,qBAAqB,CAErD,EAEA,iBAAiB6gB,EAAO,CACtBA,EAAM,OAAO,MAAM,QAAU,MAC/B,CACF,CACF,EAzLOpiB,GAAA,CAAA,MAAM,YAAY,YACD,MAAM,2BAKH,MAAM,yBAKM,MAAM,2BAK7B,MAAM,4BAOTM,GAAA,CAAA,MAAM,aAAa,EAClBiU,GAAA,CAAA,MAAM,YAAY,EAChBzB,GAAA,CAAA,MAAM,WAAW,EAGpB4B,GAAA,CAAA,MAAM,cAAc,EAClBF,GAAA,CAAA,MAAM,WAAW,EACjBzB,GAAA,CAAA,MAAM,cAAc,EAClBC,GAAA,CAAA,MAAM,WAAW,EACdC,GAAA,CAAA,MAAM,gBAAgB,YACF,MAAM,uBAIN,MAAM,4DArC5C,OAAA1S,EAAA,EAAAC,EAmDM,MAnDNR,GAmDM,CAlDOwS,EAAA,SAAXjS,IAAAC,EAGM,MAHNP,GAGM,aAFJQ,EAAmC,MAAA,CAA9B,MAAM,iBAAiB,EAAA,KAAA,EAAA,GAC5BA,EAAoD,OAAA,KAA9C,2BAAwBgS,EAAGF,EAAA,MAAM,EAAG,MAAG,CAAA,KAG/BC,EAAA,OAAhBjS,IAAAC,EAGM,MAHNN,GAGM,CAFJU,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAkC,OAAA,CAA5B,MAAM,YAAY,EAAC,KAAE,EAAA,GAC3BA,EAAwB,cAAf+R,EAAA,KAAK,EAAA,CAAA,KAGAA,EAAA,KAAK,SAAM,GAA3BjS,IAAAC,EAGM,MAHNL,GAGM,CAFJS,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAiC,OAAA,CAA3B,MAAM,WAAW,EAAC,KAAE,EAAA,GAC1BA,EAAsD,OAAA,KAAhD,gCAA6BgS,EAAGF,EAAA,MAAM,EAAA,CAAA,MAG9ChS,IAAAC,EAkCM,MAlCNJ,GAkCM,EAjCJG,EAAA,EAAA,EAAAC,EAgCUmU,EAAA,KAAAC,EA/BmBpC,EAAA,KAAI,CAAvByQ,EAAS7e,IAAK,kBADxB5D,EAgCU,UAAA,CA9BP,IAAK4D,EACN,MAAM,YACL,QAAKuY,GAAErK,EAAA,YAAY2Q,EAAQ,IAAI,IAEhCxiB,EAGM,MAHNH,GAGM,CAFJG,EAA+C,KAA/C8T,GAA+C9B,EAArBwQ,EAAQ,KAAK,EAAA,CAAA,EACvCxiB,EAA4E,OAA5EqS,GAA4EL,EAAjDH,aAAW2Q,EAAQ,mBAAmB,CAAA,EAAA,CAAA,IAGnExiB,EAgBM,MAhBNiU,GAgBM,CAfJjU,EAMM,MANN+T,GAMM,CALJ/T,EAAoE,IAApEsS,GAAoEN,EAAzCH,eAAa2Q,EAAQ,QAAO,GAAA,CAAA,EAAA,CAAA,EACvDxiB,EAGM,MAHNuS,GAGM,CAFJvS,EAA2D,OAA3DwS,GAA2DR,EAA3BwQ,EAAQ,SAAS,EAAA,CAAA,EACrCA,EAAQ,MAApB1iB,EAAA,EAAAC,EAAqE,OAArE0S,GAAqET,EAAtBwQ,EAAQ,IAAI,EAAA,CAAA,gBAIpDA,EAAQ,WAAnB1iB,IAAAC,EAMM,MANN2S,GAMM,CALJ1S,EAIE,MAAA,CAHC,KAAKyN,EAAA+U,EAAQ,UAAU,iBAAlB,YAAA/U,EAAkC,IACvC,IAAK+U,EAAQ,MACb,4BAAO3Q,EAAA,kBAAAA,EAAA,iBAAA,GAAAI,CAAA,0CAKdjS,EAEM,MAAA,CAFD,MAAM,eAAa,CACtBA,EAA0C,OAAA,CAApC,MAAM,WAAW,EAAC,aAAW,2FC4FxCV,GAAU,CACb,KAAM,qBACR,EA7IOC,GAAA,CAAA,MAAM,uBAAuB,EA+D3BC,GAAA,CAAA,MAAM,2BAA2B,EAI/BC,GAAA,CAAA,MAAM,+BAA+B,EAUvCC,GAAA,CAAA,MAAM,2BAA2B,EAI/BC,GAAA,CAAA,MAAM,2BAA2B,EASnCC,GAAA,CAAA,MAAM,yBAAyB,EAE7BC,GAAA,CAAA,MAAM,mBAAmB,EAIvBiU,GAAA,CAAA,MAAM,uBAAuB,EAU/BzB,GAAA,CAAA,MAAM,0BAA0B,EAI9B4B,GAAA,CAAA,MAAM,8BAA8B,EAClCF,GAAA,CAAA,MAAM,2BAA2B,EAUrCzB,GAAA,CAAA,MAAM,sBAAsB,EAI1BC,GAAA,CAAA,MAAM,0BAA0B,EAC9BC,GAAA,CAAA,MAAM,uBAAuB,2BA9H1C,OAAA1S,EAAA,EAAAC,EAuIM,MAvINR,GAuIM,wvDAxEJS,EAWM,MAXNR,GAWM,aAVJQ,EAEM,MAAA,CAFD,MAAM,0BAAwB,CACjCA,EAAkC,MAAA,CAA7B,MAAM,gBAAgB,CAAA,QAE7BA,EAMM,MANNP,GAMM,MALJM,EAIMmU,EAAA,KAAAC,EAJ2C,EAALnQ,GAA5ChE,EAIM,MAAA,CAJD,MAAM,0BAA0C,IAAKgE,oBACxDhE,EAA2C,MAAA,CAAtC,MAAM,yBAAyB,EAAA,KAAA,EAAA,EACpCA,EAA4C,MAAA,CAAvC,MAAM,0BAA0B,EAAA,KAAA,EAAA,EACrCA,EAA6C,MAAA,CAAxC,MAAM,2BAA2B,EAAA,KAAA,EAAA,gBAM5CA,EAUM,MAVNN,GAUM,aATJM,EAEM,MAAA,CAFD,MAAM,0BAAwB,CACjCA,EAAkC,MAAA,CAA7B,MAAM,gBAAgB,CAAA,QAE7BA,EAKM,MALNL,GAKM,MAJJI,EAGMmU,EAAA,KAAAC,EAH6C,EAALnQ,GAA9ChE,EAGM,MAAA,CAHD,MAAM,4BAA4C,IAAKgE,oBAC1DhE,EAA8C,MAAA,CAAzC,MAAM,4BAA4B,EAAA,KAAA,EAAA,EACvCA,EAA8C,MAAA,CAAzC,MAAM,4BAA4B,EAAA,KAAA,EAAA,gBAM7CA,EA4CM,MA5CNJ,GA4CM,CA1CJI,EAWM,MAXNH,GAWM,aAVJG,EAEM,MAAA,CAFD,MAAM,0BAAwB,CACjCA,EAAkC,MAAA,CAA7B,MAAM,gBAAgB,CAAA,QAE7BA,EAMM,MANN8T,GAMM,MALJ/T,EAIMmU,EAAA,KAAAC,EAJsC,EAALnQ,GAAvChE,EAIM,MAAA,CAJD,MAAM,qBAAqC,IAAKgE,oBACnDhE,EAAuC,MAAA,CAAlC,MAAM,qBAAqB,EAAA,KAAA,EAAA,EAChCA,EAAyC,MAAA,CAApC,MAAM,uBAAuB,EAAA,KAAA,EAAA,EAClCA,EAAsC,MAAA,CAAjC,MAAM,oBAAoB,EAAA,KAAA,EAAA,gBAMrCA,EAYM,MAZNqS,GAYM,aAXJrS,EAEM,MAAA,CAFD,MAAM,0BAAwB,CACjCA,EAAkC,MAAA,CAA7B,MAAM,gBAAgB,CAAA,QAE7BA,EAOM,MAPNiU,GAOM,CANJjU,EAKM,MALN+T,GAKM,MAJJhU,EAGMmU,EAAA,KAAAC,EAH6C,EAALnQ,GAA9ChE,EAGM,MAAA,CAHD,MAAM,4BAA4C,IAAKgE,oBAC1DhE,EAA8C,MAAA,CAAzC,MAAM,4BAA4B,EAAA,KAAA,EAAA,EACvCA,EAA8C,MAAA,CAAzC,MAAM,4BAA4B,EAAA,KAAA,EAAA,kBAO/CA,EAYM,MAZNsS,GAYM,aAXJtS,EAEM,MAAA,CAFD,MAAM,0BAAwB,CACjCA,EAAkC,MAAA,CAA7B,MAAM,gBAAgB,CAAA,QAE7BA,EAOM,MAPNuS,GAOM,CANJvS,EAKM,MALNwS,GAKM,MAJJzS,EAGMmU,EAAA,KAAAC,EAHyC,EAALnQ,GAA1ChE,EAGM,MAAA,CAHD,MAAM,wBAAwC,IAAKgE,oBACtDhE,EAA0C,MAAA,CAArC,MAAM,wBAAwB,EAAA,KAAA,EAAA,EACnCA,EAA0C,MAAA,CAArC,MAAM,wBAAwB,EAAA,KAAA,EAAA,qFC5G3CyiB,EAAiBC,EAAE,EAAS,OAC/BvQ,GAAQ,CACP,GAAI,CACF,MAAMvN,EAAO,IAAI,KAAKuN,CAAG,EACzB,MAAO,CAAC,MAAMvN,EAAK,QAAA,CAAS,GAAKuN,EAAI,SAAS,GAAG,CACnD,MAAQ,CACN,MAAO,EACT,CACF,EACA,CAAE,QAAS,yBAAA,CACb,EAGMwQ,GAAaC,GAAO,CAAC,QAAS,QAAS,YAAY,CAAC,EACpDC,GAAcD,GAAO,CAAC,OAAQ,SAAU,MAAO,MAAM,CAAC,EAAE,SAAA,EACxDE,GAAYF,GAAO,CAAC,SAAU,QAAS,YAAY,CAAC,EACpDG,GAAcH,GAAO,CAAC,MAAO,UAAU,CAAC,EACxCI,GAAcJ,GAAO,CAAC,OAAQ,QAAS,WAAY,iBAAiB,CAAC,EACrEK,GAAkBC,GAAQ,CAACC,GAAU,EAAI,EAAGA,GAAU,GAAI,EAAGA,GAAU,EAAI,CAAC,CAAC,EAC7EC,GAAmBR,GAAO,CAAC,cAAe,WAAY,cAAe,QAAQ,CAAC,EAC9ES,GAAgBT,GAAO,CAAC,UAAW,SAAU,UAAW,SAAS,CAAC,EAMlEU,GAAoBC,EAAS,CACjC,aAAcC,EAAE,EAAS,SAAA,EAAW,OAAA,EACpC,OAAQA,EAAE,EAAS,WAAW,OAAA,EAAS,SAAA,CACzC,CAAC,EAEKC,GAAqBF,EAAS,CAClC,iBAAkBG,EAAE,EACpB,oBAAqBA,EAAE,EACvB,WAAYA,EAAE,EACd,gBAAiBA,EAAE,CACrB,CAAC,EAEKC,GAAqBJ,EAAS,CAClC,UAAWd,EACX,QAASiB,EAAE,EACX,MAAOhB,EAAE,EAAS,SAAA,EAClB,gBAAiBc,EAAE,EAAS,YAAA,EAC5B,QAASE,EAAE,CACb,CAAC,EAEKE,GAAwBL,EAAS,CACrC,mBAAoBI,GAAmB,SAAA,CACzC,CAAC,EAGKE,GAAgDC,GAAO,IAAMC,EAAuB,EACpFC,GAAkDF,GAAO,IAAMG,EAAwB,EACvFC,GAAsDJ,GAAO,IAAMK,EAA0B,EAE7FC,GAAkBb,EAAS,CAC/B,oBAAqBM,GAAoB,SAAA,EACzC,qBAAsBG,GAAqB,SAAA,EAC3C,cAAeE,GAAuB,SAAA,CACxC,CAAC,EAEYG,GAAkBd,EAAS,CACtC,eAAgBb,EAAE,EAClB,UAAW4B,EAAQ5B,IAAW,IAAI,EAAE,EAAE,MAAM,eAAe,CAAC,EAC5D,SAAU6B,GAAS7B,EAAE,EAAUY,EAAiB,EAChD,SAAUG,GACV,MAAOW,GACP,YAAaR,EACf,CAAC,EAMKY,GAAkBjB,EAAS,CAC/B,OAAQb,EAAE,EAAS,IAAI,EAAE,EAAE,MAAM,eAAe,EAChD,UAAWc,EAAE,EAAS,SAAA,EACtB,WAAYV,GACZ,aAAcD,GACd,WAAYa,EAAE,EACd,YAAaf,GACb,MAAOD,EAAE,EAAS,SAAA,EAClB,eAAgBc,EAAE,EAAS,SAAA,EAC3B,OAAQA,EAAE,EAAS,YAAA,EAAc,SAAA,CACnC,CAAC,EAEKiB,GAAuBlB,EAAS,CACpC,cAAeC,EAAE,EAAS,YAAA,EAC1B,mBAAoBA,EAAE,EAAS,YAAA,EAC/B,eAAgBA,EAAE,EAAS,YAAA,EAC3B,sBAAuBA,EAAE,EAAS,YAAA,EAAc,SAAA,EAChD,YAAaf,EAAe,SAAA,CAC9B,CAAC,EAEKwB,GAA2BV,EAAS,CACxC,MAAOd,EACP,SAAUC,EAAE,EACZ,eAAgBA,EAAE,EAAS,SAAA,EAC3B,MAAO4B,EAAQE,EAAe,EAC9B,SAAUC,GAAqB,SAAA,CACjC,CAAC,EAMKC,GAAiBnB,EAAS,CAC9B,MAAOb,EAAE,EAAS,IAAI,CAAC,EACvB,IAAKA,EAAE,EAAS,IAAA,EAChB,aAAcD,EACd,OAAQC,EAAE,EAAS,IAAI,CAAC,EACxB,QAASA,EAAE,EAAS,SAAA,CACtB,CAAC,EAEKiC,GAAmBpB,EAAS,CAChC,OAAQb,EAAE,EAAS,IAAI,EAAE,EAAE,MAAM,eAAe,EAChD,eAAgBA,EAAE,EAClB,gBAAiBgB,EAAE,EACnB,aAAcX,GACd,WAAYuB,EAAQI,EAAc,EAClC,kBAAmBhB,EAAE,EACrB,KAAMY,EAAQ5B,GAAU,CAC1B,CAAC,EAEKkC,GAAyBrB,EAAS,CACtC,GAAIb,EAAE,EAAS,IAAI,CAAC,EACpB,MAAOc,EAAE,EAAS,SAAA,EAClB,MAAOf,EACP,YAAaC,EAAE,EAAS,IAAI,CAAC,EAC7B,aAAcM,EAChB,CAAC,EAEK6B,GAAkBtB,EAAS,CAC/B,MAAOe,EAAQM,EAAsB,EAAE,OAAO,GAAI,yCAAyC,CAC7F,CAAC,EAEKE,GAA2BvB,EAAS,CACxC,yBAA0BC,EAAE,EAAS,YAAA,EACrC,uBAAwBA,EAAE,EAAS,YAAA,EACnC,wBAAyBA,EAAE,EAAS,YAAA,EACpC,yBAA0BA,EAAE,EAAS,YAAA,EACrC,6BAA8BA,EAAE,EAAS,YAAA,EACzC,kCAAmCA,EAAE,EAAS,IAAI,CAAC,EAAE,IAAI,CAAC,EAC1D,yBAA0BA,EAAE,EAAS,YAAA,EACrC,wBAAyBA,EAAE,EAAS,YAAA,CACtC,CAAC,EAEKO,GAA0BR,EAAS,CACvC,kBAAmBb,EAAE,EAAS,MAAM,qBAAqB,EACzD,iBAAkBD,EAClB,SAAU6B,EAAQ5B,GAAU,EAAE,OAAO,GAAI,uCAAuC,EAChF,WAAY4B,EAAQK,EAAgB,EAAE,OAAO,GAAI,uCAAuC,EACxF,MAAOE,GACP,oBAAqBC,GAAyB,SAAA,CAChD,CAAC,EAMKC,GAAuBxB,EAAS,CACpC,OAAQb,EAAE,EAAS,IAAI,EAAE,EAAE,MAAM,eAAe,EAChD,OAAQA,EAAE,EAAS,SAAA,EACnB,SAAUA,EAAE,EAAS,SAAA,EACrB,WAAYO,GACZ,QAASqB,EAAQ5B,GAAU,EAAE,IAAI,CAAC,EAClC,iBAAkBD,EAClB,oBAAqBC,EAAE,EAAS,SAAA,EAChC,SAAUA,EAAE,EAAS,SAAA,CACvB,CAAC,EAEKsC,GAA+BzB,EAAS,CAC5C,qBAAsBC,EAAE,EAAS,YAAA,EACjC,uBAAwBA,EAAE,EAAS,YAAA,EACnC,oBAAqBA,EAAE,EAAS,YAAA,CAClC,CAAC,EAEKyB,GAAwB1B,EAAS,CACrC,yBAA0BC,EAAE,EAAS,YAAA,EACrC,gBAAiBA,EAAE,EAAS,YAAA,EAC5B,eAAgBA,EAAE,EAAS,YAAA,EAC3B,wBAAyBA,EAAE,EAAS,YAAA,EACpC,kBAAmBA,EAAE,EAAS,YAAA,CAChC,CAAC,EAEKW,GAA6BZ,EAAS,CAC1C,SAAUC,EAAE,EAAS,SAAA,EACrB,MAAOf,EACP,aAAcA,EAAe,SAAA,EAC7B,MAAO6B,EAAQS,EAAoB,EAAE,OAAO,GAAI,2CAA2C,EAC3F,kBAAmBR,GAAS7B,EAAE,EAAU4B,EAAQ5B,EAAE,CAAQ,CAAC,EAAE,SAAA,EAC7D,wBAAyBsC,GAA6B,SAAA,EACtD,aAAcT,GAAS7B,EAAE,EAAUc,EAAE,EAAS,YAAA,CAAa,EAAE,SAAA,EAC7D,iBAAkByB,GAAsB,SAAA,CAC1C,CAAC,EAMKC,GAAkB3B,EAAS,CAC/B,SAAUd,EACV,SAAUA,EACV,OAAQY,GACR,YAAaG,EAAE,EAAS,YAAA,EACxB,gBAAiBA,EAAE,EAAS,YAAA,EAAc,SAAA,EAC1C,kBAAmBA,EAAE,EAAS,YAAA,EAAc,SAAA,EAC5C,OAAQc,EAAQ5B,GAAU,EAC1B,SAAUA,EAAE,EAAS,SAAA,CACvB,CAAC,EAEKyC,GAAsB5B,EAAS,CACnC,YAAaC,EAAE,EAAS,YAAA,EAAc,SAAA,EACtC,UAAWA,EAAE,EAAS,YAAA,EAAc,SAAA,EACpC,SAAUA,EAAE,EAAS,YAAA,EAAc,SAAA,EACnC,UAAWb,EACb,CAAC,EAEKyC,GAAkB7B,EAAS,CAC/B,aAAcC,EAAE,EAAS,YAAA,EACzB,cAAeA,EAAE,EAAS,YAAA,EAC1B,WAAYd,EAAE,CAChB,CAAC,EAEK2C,GAAoB9B,EAAS,CACjC,cAAeC,EAAE,EAAS,YAAA,EAC1B,cAAeA,EAAE,EAAS,YAAA,CAC5B,CAAC,EAEK8B,GAAqB/B,EAAS,CAClC,YAAaC,EAAE,EAAS,YAAA,EACxB,YAAaA,EAAE,EAAS,YAAA,EACxB,WAAYf,CACd,CAAC,EAEK8C,GAAqBhC,EAAS,CAClC,qBAAsB6B,GAAgB,SAAA,EACtC,cAAeC,GAAkB,SAAA,EACjC,WAAYd,GAAS7B,IAAY4C,EAAkB,EAAE,SAAA,CACvD,CAAC,EAEKE,GAA0BjC,EAAS,CACvC,QAASG,EAAE,EACX,iBAAkBY,EAAQ5B,GAAU,EACpC,qBAAsBc,EAAE,EAAS,YAAA,CACnC,CAAC,EAEYiC,GAAqBlC,EAAS,CACzC,YAAab,EAAE,EACf,aAAcD,EACd,cAAeW,GACf,KAAMmB,GAAS7B,EAAE,EAAUwC,EAAe,EAC1C,eAAgBX,GAAS7B,EAAE,EAAUyC,EAAmB,EACxD,cAAeI,GACf,mBAAoBC,EACtB,CAAC,EAMKE,GAAwBnC,EAAS,CACrC,WAAYC,EAAE,EAAS,SAAA,EACvB,cAAed,EAAE,EACjB,eAAgBgB,EAAE,CACpB,CAAC,EAEmCH,EAAS,CAC3C,YAAab,EAAE,EACf,QAASA,EAAE,EACX,aAAcA,EAAE,EAChB,QAAS4B,EAAQ5B,IAAW,IAAI,EAAE,EAAE,MAAM,eAAe,CAAC,EAAE,OAAO,GAAI,uCAAuC,EAC9G,WAAYgD,EACd,CAAC,EAED,MAAMC,GAAmCpC,EAAS,CAChD,GAAIb,EAAE,EAAS,IAAI,CAAC,EACpB,KAAMA,EAAE,EAAS,IAAI,CAAC,EACtB,YAAaA,EAAE,EAAS,IAAI,CAAC,EAC7B,YAAagB,EAAE,EACf,YAAahB,EAAE,EAAS,IAAI,CAAC,EAC7B,iBAAkBA,EAAE,EAAS,IAAI,CAAC,EAClC,KAAMA,IAAW,IAAI,CAAC,CACxB,CAAC,EAEKkD,GAAyBrC,EAAS,CACtC,gBAAiBG,EAAE,EACnB,gBAAiBF,EAAE,EAAS,SAAA,EAC5B,eAAgBA,EAAE,EAAS,YAAA,EAC3B,WAAYd,IAAW,IAAI,CAAC,CAC9B,CAAC,EAE2Ca,EAAS,CACnD,YAAab,EAAE,EACf,QAASA,EAAE,EACX,aAAcA,EAAE,EAChB,WAAY4B,EAAQqB,EAAgC,EAAE,OAAO,GAAI,yCAAyC,EAC1G,kBAAmBC,EACrB,CAAC,EAMM,SAASC,GACdC,EACAxjB,EACqB,CACrB,GAAI,CAEF,MAAO,CACL,QAAS,GACT,KAHoBwjB,EAAO,MAAMxjB,CAAI,CAG/B,CAEV,OAASrB,EAAO,CACd,OAAIA,aAAiB8kB,GACZ,CACL,QAAS,GACT,MAAO,CACL,QAAS,oBACT,QAAS9kB,EAAM,MAAA,CACjB,EAGG,CACL,QAAS,GACT,MAAO,CACL,QAAS,2BACT,QAAS,CAAE,MAAO,OAAOA,CAAK,CAAA,CAAE,CAClC,CAEJ,CACF,CAEO,SAAS+kB,GAAkB1jB,EAA4C,CAC5E,OAAOujB,GAAaxB,GAAiB/hB,CAAI,CAC3C,CAEO,SAAS2jB,GAAuB3jB,EAAiD,CACtF,OAAOujB,GAAa7B,GAAsB1hB,CAAI,CAChD,CAEO,SAAS4jB,GAAsB5jB,EAAgD,CACpF,OAAOujB,GAAahC,GAAqBvhB,CAAI,CAC/C,CAEO,SAAS6jB,GAAyB7jB,EAAmD,CAC1F,OAAOujB,GAAa3B,GAAwB5hB,CAAI,CAClD,CAEO,SAAS8jB,GAAqB9jB,EAA+C,CAClF,OAAOujB,GAAaJ,GAAoBnjB,CAAI,CAC9C,CAkEO,SAAS+jB,GAAmB/jB,EAA4C,CAE7E,MAAMgkB,EAAc,CAAC,iBAAkB,YAAa,WAAY,WAAY,QAAS,aAAa,EAElG,GAAI,OAAOhkB,GAAS,UAAYA,IAAS,KACvC,MAAO,CACL,QAAS,GACT,MAAO,CACL,QAAS,0CACT,KAAM,gBAAA,CACR,EAKJ,MAAMikB,EADW,OAAO,KAAKjkB,CAAc,EACd,OAAOD,GAAO,CAACikB,EAAY,SAASjkB,CAAG,CAAC,EAErE,OAAIkkB,EAAY,OAAS,EAChB,CACL,QAAS,GACT,MAAO,CACL,QAAS,uBAAuBA,EAAY,KAAK,IAAI,CAAC,GACtD,KAAM,eACN,QAAS,CAAE,YAAAA,CAAA,CAAY,CACzB,EAKGP,GAAkB1jB,CAAI,CAC/B,CC9cO,MAAMkkB,EAAN,MAAMA,CAAa,CAqBxB,OAAO,WAAuB,CAC5B,GAAI,CACF,MAAM9jB,EAAS,aAAa,QAAQ8jB,EAAa,WAAW,EAC5D,GAAI,CAAC9jB,EACH,MAAO,CAAE,GAAG8jB,EAAa,aAAA,EAG3B,MAAM/f,EAAS,KAAK,MAAM/D,CAAM,EAC1B+jB,EAAWD,EAAa,aAAa/f,CAAM,EAC3CigB,EAAaV,GAAkBS,CAAQ,EAE7C,OAAIC,EAAW,SAAWA,EAAW,KAC5BA,EAAW,MAElB,QAAQ,KAAK,iDAAkDA,EAAW,KAAK,EACxE,CAAE,GAAGF,EAAa,aAAA,EAE7B,OAASvlB,EAAO,CACd,eAAQ,MAAM,0CAA2CA,CAAK,EACvD,CAAE,GAAGulB,EAAa,aAAA,CAC3B,CACF,CAKA,OAAO,UAAUG,EAA+C,CAC9D,MAAMD,EAAaV,GAAkBW,CAAK,EAC1C,GAAI,CAACD,EAAW,QACd,OAAOA,EAGT,GAAI,CACF,oBAAa,QAAQF,EAAa,YAAa,KAAK,UAAUG,CAAK,CAAC,EAC7D,CAAE,QAAS,GAAM,KAAMA,CAAA,CAChC,OAAS1lB,EAAO,CACd,MAAO,CACL,QAAS,GACT,MAAO,CACL,QAAS,uCACT,QAAS,CAAE,MAAO,OAAOA,CAAK,CAAA,CAAE,CAClC,CAEJ,CACF,CAKA,OAAO,YAAmB,CACxB,aAAa,WAAWulB,EAAa,WAAW,CAClD,CAKA,OAAO,aAAsB,CAC3B,MAAMG,EAAQH,EAAa,UAAA,EAC3B,OAAO,KAAK,UAAUG,EAAO,KAAM,CAAC,CACtC,CAKA,OAAO,YAAYC,EAAkBC,EAAkB,GAAoC,CACzF,GAAI,CACF,MAAMpgB,EAAS,KAAK,MAAMmgB,CAAQ,EAC5BF,EAAaL,GAAmB5f,CAAM,EAE5C,GAAI,CAACigB,EAAW,QACd,OAAOA,EAGT,MAAMD,EAAWD,EAAa,aAAaE,EAAW,IAAK,EACrDI,EAAkBd,GAAkBS,CAAQ,EAElD,GAAI,CAACK,EAAgB,QACnB,OAAOA,EAGT,GAAI,CAACD,EAAQ,CACX,MAAME,EAAaP,EAAa,UAAUM,EAAgB,IAAK,EAC/D,GAAI,CAACC,EAAW,QACd,OAAOA,CAEX,CAEA,MAAO,CAAE,QAAS,GAAM,KAAMD,EAAgB,IAAA,CAChD,OAAS7lB,EAAO,CACd,MAAO,CACL,QAAS,GACT,MAAO,CACL,QAAS,sBACT,QAAS,CAAE,MAAO,OAAOA,CAAK,CAAA,CAAE,CAClC,CAEJ,CACF,CAKA,OAAO,gBAAgB4N,EAAgD,CAErE,MAAMmY,EAAsB,CAC1B,GAFmBR,EAAa,UAAA,EAGhC,UAAW3X,CAAA,EAEb,OAAO2X,EAAa,UAAUQ,CAAQ,CACxC,CAKA,OAAO,eAAevhB,EAA6C,CACjE,MAAMwhB,EAAeT,EAAa,UAAA,EAClC,GAAIS,EAAa,UAAU,SAASxhB,EAAO,YAAA,CAAa,EACtD,MAAO,CACL,QAAS,GACT,MAAO,CACL,QAAS,8BACT,KAAM,kBAAA,CACR,EAIJ,MAAMyhB,EAAe,CAAC,GAAGD,EAAa,UAAWxhB,EAAO,aAAa,EACrE,OAAO+gB,EAAa,gBAAgBU,CAAY,CAClD,CAKA,OAAO,oBAAoBzhB,EAA6C,CAEtE,MAAMyhB,EADeV,EAAa,UAAA,EACA,UAAU,UAAY,IAAM/gB,EAAO,aAAa,EAClF,OAAO+gB,EAAa,gBAAgBU,CAAY,CAClD,CAKA,OAAO,cAAczhB,EAAgB0hB,EAAiBC,EAA8C,CAClG,MAAMH,EAAeT,EAAa,UAAA,EAC5BQ,EAAsB,CAC1B,GAAGC,EACH,SAAU,CACR,GAAGA,EAAa,SAChB,CAACxhB,EAAO,aAAa,EAAG,CACtB,aAAc0hB,EACd,GAAIC,IAAW,QAAa,CAAE,OAAAA,CAAA,CAAO,CACvC,CACF,EAEF,OAAOZ,EAAa,UAAUQ,CAAQ,CACxC,CAKA,OAAO,cAAcvhB,EAA6C,CAChE,MAAMwhB,EAAeT,EAAa,UAAA,EAC5Ba,EAAc,CAAE,GAAGJ,EAAa,QAAA,EACtC,OAAOI,EAAY5hB,EAAO,aAAa,EAEvC,MAAMuhB,EAAsB,CAC1B,GAAGC,EACH,SAAUI,CAAA,EAEZ,OAAOb,EAAa,UAAUQ,CAAQ,CACxC,CAKA,OAAO,eAAeM,EAAuE,CAC3F,MAAML,EAAeT,EAAa,UAAA,EAC5BQ,EAAsB,CAC1B,GAAGC,EACH,SAAU,CACR,GAAGA,EAAa,SAChB,GAAGK,CAAA,CACL,EAEF,OAAOd,EAAa,UAAUQ,CAAQ,CACxC,CAKA,OAAO,YAAYO,EAAiE,CAClF,MAAMN,EAAeT,EAAa,UAAA,EAC5BQ,EAAsB,CAC1B,GAAGC,EACH,MAAO,CACL,GAAGA,EAAa,MAChB,GAAGM,CAAA,CACL,EAEF,OAAOf,EAAa,UAAUQ,CAAQ,CACxC,CAKA,OAAO,mBAAmBxlB,EAAqF,CAC7G,MAAMylB,EAAeT,EAAa,UAAA,EAC5BQ,EAAsB,CAC1B,GAAGC,EACH,YAAa,CACX,GAAGA,EAAa,YAChB,mBAAoBzlB,CAAA,CACtB,EAEF,OAAOglB,EAAa,UAAUQ,CAAQ,CACxC,CAKA,OAAe,aAAaL,EAAuB,aAEjD,OAAKA,EAAM,iBACTA,EAAM,eAAiB,SAWG,CAC1B,eAAgBH,EAAa,uBAC7B,UAAWG,EAAM,WAAa,CAAA,EAC9B,SAAUA,EAAM,UAAY,CAAA,EAC5B,SAAU,CACR,mBAAkBlZ,EAAAkZ,EAAM,WAAN,YAAAlZ,EAAgB,mBAAoB,GACtD,sBAAqBC,EAAAiZ,EAAM,WAAN,YAAAjZ,EAAgB,sBAAuB,GAC5D,aAAY2I,EAAAsQ,EAAM,WAAN,YAAAtQ,EAAgB,aAAc,GAC1C,kBAAiBC,EAAAqQ,EAAM,WAAN,YAAArQ,EAAgB,kBAAmB,EAAA,EAEtD,MAAOqQ,EAAM,OAAS,CAAA,EACtB,YAAaA,EAAM,aAAe,CAAA,CAAC,CAIvC,CAKA,OAAO,yBAAkC,CACvC,OAAOH,EAAa,sBACtB,CAKA,OAAO,oBAA8B,CACnC,GAAI,CACF,MAAMgB,EAAO,mBACb,oBAAa,QAAQA,EAAMA,CAAI,EAC/B,aAAa,WAAWA,CAAI,EACrB,EACT,MAAQ,CACN,MAAO,EACT,CACF,CACF,EAnSEC,GADWjB,EACa,cAAc,8BACtCiB,GAFWjB,EAEa,yBAAyB,SAEjDiB,GAJWjB,EAIa,gBAA2B,CACjD,eAAgBA,EAAa,uBAC7B,UAAW,CAAA,EACX,SAAU,CAAA,EACV,SAAU,CACR,iBAAkB,GAClB,oBAAqB,GACrB,WAAY,GACZ,gBAAiB,EAAA,EAEnB,MAAO,CAAA,EACP,YAAa,CAAA,CAAC,GAfX,IAAMkB,EAANlB,ECwBA,MAAMmB,EAAY,CAIvB,YAAYC,EAAkB,GAAIC,EAA+B,GAAM,CAH/DJ,GAAA,gBACAA,GAAA,4BAGN,KAAK,QAAUG,EACf,KAAK,oBAAsBC,CAC7B,CAKA,MAAM,mBAAwD,OAC5D,GAAI,CACF,MAAMnkB,EAAW,MAAM,MAAM,GAAG,KAAK,OAAO,mBAAmB,EAC/D,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAM,QAAQA,EAAS,MAAM,EAAE,EAG3C,MAAMpB,EAAO,MAAMoB,EAAS,KAAA,EACtBgjB,EAAaN,GAAqB9jB,CAAI,EAE5C,GAAI,CAACokB,EAAW,QACd,MAAM,IAAI,MAAM,yBAAwBjZ,EAAAiZ,EAAW,QAAX,YAAAjZ,EAAkB,OAAO,EAAE,EAGrE,MAAO,CACL,KAAMiZ,EAAW,KACjB,OAAQ,UACR,YAAa,QACb,MAAOA,EAAW,KAAM,YAAA,CAE5B,OAASzlB,EAAO,CAKd,OAJA,QAAQ,KAAK,iCAAkCA,CAAK,EAGtCymB,EAAa,UAAA,EACjB,MAAM,oBACP,CACL,KAAM,KACN,OAAQ,WACR,YAAa,aACb,MAAO,OAAOzmB,CAAK,CAAA,EAIhB,CACL,KAAM,KACN,OAAQ,WACR,YAAa,aACb,MAAO,OAAOA,CAAK,CAAA,CAEvB,CACF,CAKA,MAAM,qBAA4D,SAChE,GAAI,CAEF,MAAM6mB,EAAe,MAAM,KAAK,kBAAA,EAChC,IAAIC,EAAc,GAEd,KAAK,uBAAuBta,EAAAqa,EAAa,OAAb,MAAAra,EAAmB,gBAEjDsa,EAAc,MADI,IAAI,KAAKD,EAAa,KAAK,YAAY,EAAE,QAAA,CAC9B,IAI/B,MAAMpkB,EAAW,MAAM,MAAM,GAAG,KAAK,OAAO,2BAA2BqkB,CAAW,EAAE,EACpF,GAAI,CAACrkB,EAAS,GACZ,MAAM,IAAI,MAAM,QAAQA,EAAS,MAAM,EAAE,EAG3C,MAAMpB,EAAO,MAAMoB,EAAS,KAAA,EACtBgjB,EAAaT,GAAuB3jB,CAAI,EAE9C,GAAI,CAACokB,EAAW,QACd,MAAM,IAAI,MAAM,6BAA4BhZ,EAAAgZ,EAAW,QAAX,YAAAhZ,EAAkB,OAAO,EAAE,EAIzE,MAAMsa,EAAYN,EAAa,UAAA,EAC/B,OAAAA,EAAa,YAAY,CACvB,qBAAsBhB,EAAW,IAAA,CAClC,EAEM,CACL,KAAMA,EAAW,KACjB,OAAQ,UACR,YAAa,KAAK,mBAAmBA,EAAW,KAAM,KAAK,EAC3D,MAAOA,EAAW,KAAM,KAAA,CAG5B,OAASzlB,EAAO,CACd,QAAQ,KAAK,mCAAoCA,CAAK,EAGtD,MAAM+mB,EAAYN,EAAa,UAAA,EAC/B,OAAIM,EAAU,MAAM,qBACX,CACL,KAAMA,EAAU,MAAM,qBACtB,OAAQ,QACR,YAAa,KAAK,mBAAmBA,EAAU,MAAM,qBAAqB,KAAK,EAC/E,MAAOA,EAAU,MAAM,qBAAqB,MAC5C,MAAO,OAAO/mB,CAAK,CAAA,EAKhB,CACL,KAAM,KACN,OAAQ,WACR,YAAa,aACb,MAAO,OAAOA,CAAK,CAAA,CAEvB,CACF,CAKA,MAAM,mBAAmB2D,EAAoD,SAC3E,GAAI,CAEF,MAAMqjB,EAAarjB,GAAQ,KAAK,oBAAA,EAE1BkjB,EAAe,MAAM,KAAK,kBAAA,EAChC,IAAIC,EAAc,GAEd,KAAK,uBAAuBta,EAAAqa,EAAa,OAAb,MAAAra,EAAmB,gBAEjDsa,EAAc,MADI,IAAI,KAAKD,EAAa,KAAK,YAAY,EAAE,QAAA,CAC9B,IAG/B,MAAMpkB,EAAW,MAAM,MAAM,GAAG,KAAK,OAAO,eAAeukB,CAAU,QAAQF,CAAW,EAAE,EAC1F,GAAI,CAACrkB,EAAS,GACZ,MAAM,IAAI,MAAM,QAAQA,EAAS,MAAM,EAAE,EAG3C,MAAMpB,EAAO,MAAMoB,EAAS,KAAA,EACtBgjB,EAAaR,GAAsB5jB,CAAI,EAE7C,GAAI,CAACokB,EAAW,QACd,MAAM,IAAI,MAAM,4BAA2BhZ,EAAAgZ,EAAW,QAAX,YAAAhZ,EAAkB,OAAO,EAAE,EAIxE,OAAAga,EAAa,YAAY,CACvB,oBAAqBhB,EAAW,IAAA,CACjC,EAEM,CACL,KAAMA,EAAW,KACjB,OAAQ,UACR,YAAa,KAAK,mBAAmBA,EAAW,KAAM,gBAAgB,EACtE,MAAOA,EAAW,KAAM,gBAAA,CAG5B,OAASzlB,EAAO,CACd,QAAQ,KAAK,kCAAmCA,CAAK,EAGrD,MAAM+mB,EAAYN,EAAa,UAAA,EAC/B,OAAIM,EAAU,MAAM,oBACX,CACL,KAAMA,EAAU,MAAM,oBACtB,OAAQ,QACR,YAAa,KAAK,mBAAmBA,EAAU,MAAM,oBAAoB,gBAAgB,EACzF,MAAOA,EAAU,MAAM,oBAAoB,iBAC3C,MAAO,OAAO/mB,CAAK,CAAA,EAIhB,CACL,KAAM,KACN,OAAQ,WACR,YAAa,aACb,MAAO,OAAOA,CAAK,CAAA,CAEvB,CACF,CAKA,MAAM,uBAAgE,SACpE,GAAI,CACF,MAAM6mB,EAAe,MAAM,KAAK,kBAAA,EAChC,IAAIC,EAAc,GAEd,KAAK,uBAAuBta,EAAAqa,EAAa,OAAb,MAAAra,EAAmB,gBAEjDsa,EAAc,MADI,IAAI,KAAKD,EAAa,KAAK,YAAY,EAAE,QAAA,CAC9B,IAG/B,MAAMpkB,EAAW,MAAM,MAAM,GAAG,KAAK,OAAO,8BAA8BqkB,CAAW,EAAE,EACvF,GAAI,CAACrkB,EAAS,GACZ,MAAM,IAAI,MAAM,QAAQA,EAAS,MAAM,EAAE,EAG3C,MAAMpB,EAAO,MAAMoB,EAAS,KAAA,EACtBgjB,EAAaP,GAAyB7jB,CAAI,EAEhD,GAAI,CAACokB,EAAW,QACd,MAAM,IAAI,MAAM,+BAA8BhZ,EAAAgZ,EAAW,QAAX,YAAAhZ,EAAkB,OAAO,EAAE,EAI3E,OAAAga,EAAa,YAAY,CACvB,cAAehB,EAAW,IAAA,CAC3B,EAEM,CACL,KAAMA,EAAW,KACjB,OAAQ,UACR,YAAa,KAAK,mBAAmBA,EAAW,KAAM,KAAK,EAC3D,MAAOA,EAAW,KAAM,KAAA,CAG5B,OAASzlB,EAAO,CACd,QAAQ,KAAK,qCAAsCA,CAAK,EAGxD,MAAM+mB,EAAYN,EAAa,UAAA,EAC/B,OAAIM,EAAU,MAAM,cACX,CACL,KAAMA,EAAU,MAAM,cACtB,OAAQ,QACR,YAAa,KAAK,mBAAmBA,EAAU,MAAM,cAAc,KAAK,EACxE,MAAOA,EAAU,MAAM,cAAc,MACrC,MAAO,OAAO/mB,CAAK,CAAA,EAIhB,CACL,KAAM,KACN,OAAQ,WACR,YAAa,aACb,MAAO,OAAOA,CAAK,CAAA,CAEvB,CACF,CAKQ,mBAAmBinB,EAAsD,CAC/E,GAAI,CACF,MAAMC,EAAO,IAAI,KAAKD,CAAU,EAE1BE,OADU,KAAA,EACQ,QAAA,EAAYD,EAAK,QAAA,IAAc,IAAO,IAE9D,OAAIC,GAAc,GAAW,QACzBA,GAAc,GAAK,GAAW,QAC3B,YACT,MAAQ,CACN,MAAO,YACT,CACF,CAKQ,qBAA8B,CACpC,MAAM7jB,MAAU,KAGhB,OADmB,IAAI,KAAKA,EAAI,UAAa,EAAI,GAAK,GAAK,GAAK,EAC9C,YAAA,EAAc,MAAM,GAAG,EAAE,CAAC,CAC9C,CACF,CAGA,MAAM8jB,GAAa,IAAM,CACvB,GAAI,OAAO,OAAW,IAAa,CAEjC,MAAM/iB,EAAW,OAAO,SAAS,SAC3BC,EAAW,OAAO,SAAS,SAEjC,GAAID,IAAa,2BAA6BC,EAAS,WAAW,uBAAuB,EACvF,MAAO,uBAEX,CAGA,MAAO,EACT,EAEa+iB,GAAc,IAAIX,GAAYU,IAAY,EC9TvD,MAAME,EAAuB,CAC3B,aAAc,CACZ,KAAK,MAAQ,IAAI,IACjB,KAAK,YAAc,GAAK,GAAK,GAAK,IAClC,KAAK,UAAY,EACjB,KAAK,aAAe,GACtB,CAGA,MAAM,kBAAkB9iB,EAAQ,CAC9B,GAAI,CAEF,GAAI,KAAK,MAAM,IAAIA,CAAM,EAAG,CAC1B,MAAME,EAAS,KAAK,MAAM,IAAIF,CAAM,EACpC,GAAI,KAAK,IAAG,EAAKE,EAAO,UAAY,KAAK,YACvC,eAAQ,IAAI,6BAA6BF,CAAM,EAAE,EAC1CE,EAAO,IAElB,CAEA,QAAQ,IAAI,+BAA+BF,CAAM,4BAA4B,EAG7E,MAAMsI,EAAY,MAAMM,GAAgB,aAAa5I,CAAM,EAE3D,GAAIsI,GAAa,CAACA,EAAU,OAASA,EAAU,SAAW,UAAW,CAEnE,MAAMya,EAAW,CACf,OAAQ/iB,EACR,OAAQsI,EAAU,QAAU,UAC5B,SAAUA,EAAU,UAAY,mBAChC,SAAUA,EAAU,UAAY,KAAK,mBAAmBtI,CAAM,EAC9D,UAAWsI,EAAU,UACrB,mBAAoBA,EAAU,mBAC9B,kBAAmBA,EAAU,mBAAqB,UAClD,SAAUA,EAAU,UAAY,MAChC,QAASA,EAAU,SAAW,UAC9B,QAASA,EAAU,QACnB,UAAWA,EAAU,UACrB,gBAAiBA,EAAU,gBAC3B,WAAYA,EAAU,YAAc,IACpC,OAAQ,2BACR,YAAaA,EAAU,aAAe,IAAI,KAAI,EAAG,YAAW,EAC5D,OAAQ,EAClB,EAGQ,YAAK,MAAM,IAAItI,EAAQ,CACrB,KAAM+iB,EACN,UAAW,KAAK,IAAG,CAC7B,CAAS,EAED,QAAQ,IAAI,qCAAqC/iB,CAAM,IAAK,CAC1D,OAAQ+iB,EAAS,OACjB,SAAUA,EAAS,SACnB,WAAYA,EAAS,UAC/B,CAAS,EAEMA,CACT,KAEE,gBAAQ,KAAK,gCAAgC/iB,CAAM,8BAA8B,EAC1E,KAAK,0BAA0BA,CAAM,CAEhD,OAASxE,EAAO,CACd,eAAQ,MAAM,+BAA+BwE,CAAM,IAAKxE,CAAK,EACtD,KAAK,0BAA0BwE,CAAM,CAC9C,CACF,CAGA,0BAA0BA,EAAQ,CA4BhC,MAAMgjB,EA3Ba,CACjB,KAAQ,CAAE,OAAQ,yBAA0B,SAAU,2BAA4B,WAAY,GAAI,EAClG,KAAQ,CAAE,OAAQ,oBAAqB,SAAU,oBAAqB,WAAY,EAAI,EACtF,GAAM,CAAE,OAAQ,aAAc,SAAU,gCAAiC,WAAY,EAAI,EACzF,KAAQ,CAAE,OAAQ,aAAc,SAAU,2BAA4B,WAAY,GAAI,EACtF,IAAO,CAAE,OAAQ,cAAe,SAAU,uBAAwB,WAAY,GAAI,EAClF,KAAQ,CAAE,OAAQ,cAAe,SAAU,sBAAuB,WAAY,GAAI,EAClF,IAAO,CAAE,OAAQ,aAAc,SAAU,oBAAqB,WAAY,EAAI,EAC9E,KAAQ,CAAE,OAAQ,aAAc,SAAU,sBAAuB,WAAY,EAAI,EACjF,IAAO,CAAE,OAAQ,aAAc,SAAU,iBAAkB,WAAY,EAAI,EAC3E,KAAQ,CAAE,OAAQ,cAAe,SAAU,sBAAuB,WAAY,EAAI,EAClF,IAAO,CAAE,OAAQ,aAAc,SAAU,sBAAuB,WAAY,EAAI,EAChF,KAAQ,CAAE,OAAQ,aAAc,SAAU,iBAAkB,WAAY,EAAI,EAC5E,KAAQ,CAAE,OAAQ,aAAc,SAAU,iBAAkB,WAAY,EAAI,EAC5E,KAAQ,CAAE,OAAQ,oBAAqB,SAAU,kBAAmB,WAAY,EAAI,EACpF,KAAQ,CAAE,OAAQ,yBAA0B,SAAU,iCAAkC,WAAY,EAAI,EACxG,KAAQ,CAAE,OAAQ,yBAA0B,SAAU,iCAAkC,WAAY,EAAI,EACxG,KAAQ,CAAE,OAAQ,yBAA0B,SAAU,gBAAiB,WAAY,EAAI,EACvF,IAAO,CAAE,OAAQ,SAAU,SAAU,UAAW,WAAY,GAAI,EAChE,IAAO,CAAE,OAAQ,SAAU,SAAU,iBAAkB,WAAY,GAAI,EACvE,KAAQ,CAAE,OAAQ,aAAc,SAAU,yBAA0B,WAAY,GAAI,EACpF,KAAQ,CAAE,OAAQ,aAAc,SAAU,oBAAqB,WAAY,GAAI,EAC/E,KAAQ,CAAE,OAAQ,aAAc,SAAU,4BAA6B,WAAY,EAAI,EACvF,KAAQ,CAAE,OAAQ,aAAc,SAAU,8BAA+B,WAAY,GAAI,EACzF,KAAQ,CAAE,OAAQ,oBAAqB,SAAU,qBAAsB,WAAY,EAAI,CAC7F,EAEoChjB,CAAM,GAAK,CACzC,OAAQ,UACR,SAAU,mBACV,WAAY,CAClB,EAEU+iB,EAAW,CACf,OAAQ/iB,EACR,OAAQgjB,EAAa,OACrB,SAAUA,EAAa,SACvB,SAAU,KAAK,mBAAmBhjB,CAAM,EACxC,UAAW,KACX,mBAAoB,MACpB,kBAAmB,UACnB,SAAU,MACV,QAAS,UACT,QAAS,KACT,UAAW,KACX,gBAAiB,KACjB,WAAYgjB,EAAa,WACzB,OAAQ,uBACR,YAAa,IAAI,KAAI,EAAG,YAAW,EACnC,OAAQ,EACd,EAGI,YAAK,MAAM,IAAIhjB,EAAQ,CACrB,KAAM+iB,EACN,UAAW,KAAK,IAAG,CACzB,CAAK,EAED,QAAQ,IAAI,6BAA6B/iB,CAAM,IAAK,CAClD,OAAQ+iB,EAAS,OACjB,SAAUA,EAAS,SACnB,WAAYA,EAAS,UAC3B,CAAK,EAEMA,CACT,CAGA,MAAM,iBAAiB3Z,EAAS,CAC9B,MAAM9L,EAAU,IAAI,IACdgM,EAAU,KAAK,cAAcF,EAAS,KAAK,SAAS,EAE1D,QAAQ,IAAI,yBAAyBA,EAAQ,MAAM,eAAeE,EAAQ,MAAM,aAAa,EAE7F,QAAS/K,EAAI,EAAGA,EAAI+K,EAAQ,OAAQ/K,IAAK,CACvC,MAAMgL,EAAQD,EAAQ/K,CAAC,EACvB,QAAQ,IAAI,oBAAoBA,EAAI,CAAC,IAAI+K,EAAQ,MAAM,KAAKC,EAAM,MAAM,WAAW,EAGnF,MAAMC,EAAgBD,EAAM,IAAIvJ,GAC9B,KAAK,kBAAkBA,CAAM,EAAE,MAAMxE,IACnC,QAAQ,MAAM,gCAAgCwE,CAAM,IAAKxE,CAAK,EACvD,KAAK,mBAAmBwE,CAAM,EACtC,CACT,EAEYijB,EAAe,MAAM,QAAQ,IAAIzZ,CAAa,EAGpDD,EAAM,QAAQ,CAACvJ,EAAQ9B,IAAU,CAC/BZ,EAAQ,IAAI0C,EAAQijB,EAAa/kB,CAAK,CAAC,CACzC,CAAC,EAGGK,EAAI+K,EAAQ,OAAS,IACvB,QAAQ,IAAI,WAAW,KAAK,YAAY,yBAAyB,EACjE,MAAM,KAAK,MAAM,KAAK,YAAY,EAEtC,CAEA,eAAQ,IAAI,mCAAmChM,EAAQ,IAAI,UAAU,EAC9DA,CACT,CAGA,mBAAmB0C,EAAQ,CACzB,MAAO,CACL,OAAQA,EACR,OAAQ,UACR,SAAU,mBACV,SAAU,KAAK,mBAAmBA,CAAM,EACxC,UAAW,KACX,mBAAoB,MACpB,kBAAmB,UACnB,SAAU,MACV,QAAS,UACT,QAAS,KACT,UAAW,KACX,gBAAiB,KACjB,WAAY,EACZ,OAAQ,uBACR,YAAa,IAAI,KAAI,EAAG,YAAW,EACnC,OAAQ,EACd,CACE,CAGA,mBAAmBA,EAAQ,CACzB,MAAMwI,EAAgB,CAAC,OAAQ,OAAQ,QAAS,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,MAAO,OAAQ,KAAM,OAAQ,MAAO,OAAQ,MAAO,MAAO,OAAQ,OAAQ,OAAQ,MAAM,EAC1MC,EAAc,CAAC,MAAO,OAAQ,KAAK,EAEzC,OAAID,EAAc,SAASxI,CAAM,EACxB,SACEyI,EAAY,SAASzI,CAAM,EAC7B,OAGF,QACT,CAGA,mBAAmB+iB,EAAU,CAC3B,MAAI,CAACA,GAAYA,EAAS,WAAa,GAC9B,mBAGFA,EAAS,UAAYA,EAAS,QAAU,kBACjD,CAGA,oBAAoBA,EAAU,CAC5B,MAAM9M,EAAW,KAAK,mBAAmB8M,CAAQ,EA0CjD,MAxC2B,CAEzB,yBAA0B,gBAC1B,4BAA6B,gBAC7B,oBAAqB,gBACrB,sBAAuB,gBACvB,iCAAkC,gBAClC,eAAkB,gBAClB,oBAAqB,eAGrB,sBAAuB,uBACvB,uBAAwB,mBACxB,2BAA4B,WAG5B,2BAA4B,iBAC5B,gCAAiC,iBAGjC,qBAAsB,aACtB,oBAAqB,aAGrB,kBAAmB,SAGnB,cAAiB,gBAGjB,QAAW,iBACX,iBAAkB,iBAGlB,8BAA+B,aAG/B,mBAAoB,SAC1B,EAE8B9M,CAAQ,GAAK,OACzC,CAGA,uBAAuBiN,EAAa,CAClC,MAAMC,EAAiB,CAAA,EAEvB,SAAW,CAACnjB,EAAQ+iB,CAAQ,IAAKG,EAAa,CAC5C,MAAMtJ,EAASmJ,EAAS,QAAU,UAE7BI,EAAevJ,CAAM,IACxBuJ,EAAevJ,CAAM,EAAI,CAAA,GAG3BuJ,EAAevJ,CAAM,EAAE,KAAK5Z,CAAM,CACpC,CAEA,OAAOmjB,CACT,CAGA,+BAA+BD,EAAa,CAC1C,MAAME,EAAe,CACnB,qBAAsB,EACtB,uBAAwB,EACxB,oBAAqB,EACrB,mBAAoB,CAC1B,EAEI,SAAW,CAACpjB,EAAQ+iB,CAAQ,IAAKG,EAAa,CAC5C,MAAMG,EAAaN,EAAS,YAAc,EAEtCM,GAAc,GAChBD,EAAa,uBACJC,GAAc,IACvBD,EAAa,yBACJC,GAAc,GACvBD,EAAa,sBAEbA,EAAa,oBAEjB,CAEA,OAAOA,CACT,CAGA,cAAcE,EAAOjZ,EAAW,CAC9B,MAAMf,EAAU,CAAA,EAChB,QAAS/K,EAAI,EAAGA,EAAI+kB,EAAM,OAAQ/kB,GAAK8L,EACrCf,EAAQ,KAAKga,EAAM,MAAM/kB,EAAGA,EAAI8L,CAAS,CAAC,EAE5C,OAAOf,CACT,CAGA,MAAMqB,EAAI,CACR,OAAO,IAAI,QAAQxP,GAAW,WAAWA,EAASwP,CAAE,CAAC,CACvD,CAGA,YAAa,CACX,KAAK,MAAM,MAAK,EAChB,QAAQ,IAAI,gCAAgC,CAC9C,CAGA,eAAgB,CACd,MAAMnM,EAAQ,CACZ,YAAa,KAAK,MAAM,KACxB,aAAc,CAAA,CACpB,EAEI,SAAW,CAACwB,EAAQE,CAAM,IAAK,KAAK,MAAM,UACxC1B,EAAM,aAAawB,CAAM,EAAI,CAC3B,IAAK,KAAK,IAAG,EAAKE,EAAO,UACzB,QAAS,KAAK,IAAG,EAAKA,EAAO,UAAY,KAAK,YAC9C,OAAQA,EAAO,KAAK,OACpB,SAAUA,EAAO,KAAK,SACtB,WAAYA,EAAO,KAAK,UAChC,EAGI,OAAO1B,CACT,CAGA,MAAM,YAAY4K,EAAS,CACzB,QAAQ,IAAI,iCAAiCA,EAAQ,MAAM,aAAa,EAExE,MAAMxN,EAAY,KAAK,IAAG,EACpB0B,EAAU,MAAM,KAAK,iBAAiB8L,CAAO,EAC7CvN,EAAW,KAAK,IAAG,EAAKD,EAE9B,eAAQ,IAAI,6BAA6BC,CAAQ,UAAUyB,EAAQ,IAAI,UAAU,EAE1E,CACL,SAAAzB,EACA,iBAAkByB,EAAQ,KAC1B,aAAcA,EAAQ,KAAO8L,EAAQ,OAAS,KAAK,QAAQ,CAAC,EAAI,GACtE,CACE,CACF,CAGO,MAAMma,GAAyB,IAAIT,GChX1C,MAAMU,EAAgB,CACpB,aAAc,CACZ,KAAK,MAAQ,IAAI,IACjB,KAAK,YAAc,GAAK,GAAK,GAAK,IAClC,KAAK,UAAY,KACjB,KAAK,SAAW,KAChB,KAAK,cAAgB,EACvB,CAGA,iBAAiBC,EAAY,CAC3B,KAAK,cAAgBA,EACrB,QAAQ,IAAI,0BAA0BA,EAAa,cAAgB,aAAa,EAAE,CACpF,CAGA,MAAM,kBAAkBzjB,EAAQ,CAC9B,OAAI,KAAK,cAEA,MAAMujB,GAAuB,kBAAkBvjB,CAAM,EAGrD,MAAM,KAAK,wBAAwBA,CAAM,CAEpD,CAGA,MAAM,wBAAwBA,EAAQ,CAEpC,GAAI,KAAK,MAAM,IAAIA,CAAM,EAAG,CAC1B,MAAME,EAAS,KAAK,MAAM,IAAIF,CAAM,EACpC,GAAI,KAAK,IAAG,EAAKE,EAAO,UAAY,KAAK,YACvC,OAAOA,EAAO,IAElB,CAMA,GAHA,MAAM,KAAK,gBAAe,EAGtB,KAAK,UAAY,KAAK,SAAS,MAAO,CACxC,MAAMsZ,EAAiB,KAAK,SAAS,MAAM,KAAKC,GAAKA,EAAE,SAAWzZ,CAAM,EACxE,GAAIwZ,EACF,eAAQ,IAAI,+BAA+BxZ,CAAM,IAAKwZ,CAAc,EAEpE,KAAK,MAAM,IAAIxZ,EAAQ,CACrB,KAAMwZ,EACN,UAAW,KAAK,IAAG,CAC7B,CAAS,EACMA,CAEX,CAEA,QAAQ,KAAK,2BAA2BxZ,CAAM,iBAAiB,EAE/D,MAAM0jB,EAAkB,CACtB,OAAA1jB,EACA,OAAQ,UACR,SAAU,mBACV,SAAU,KAAK,mBAAmBA,CAAM,EACxC,WAAY,EACZ,OAAQ,wBACR,OAAQ,EACd,EAEI,YAAK,MAAM,IAAIA,EAAQ,CACrB,KAAM0jB,EACN,UAAW,KAAK,IAAG,CACzB,CAAK,EAEMA,CACT,CAGA,MAAM,iBAAiBta,EAAS,CAC9B,GAAI,KAAK,cACP,OAAO,MAAMma,GAAuB,iBAAiBna,CAAO,EACvD,CAEL,QAAQ,IAAI,yCAAyCA,EAAQ,MAAM,YAAaA,CAAO,EACvF,MAAM9L,EAAU,IAAI,IAGpB,MAAM,KAAK,gBAAe,EAE1B,UAAW0C,KAAUoJ,EAAS,CAC5B,MAAM2Z,EAAW,MAAM,KAAK,wBAAwB/iB,CAAM,EAC1D1C,EAAQ,IAAI0C,EAAQ+iB,CAAQ,EAGxB,CAAC,MAAO,MAAM,EAAE,SAAS/iB,CAAM,GACjC,QAAQ,IAAI,kCAAkCA,CAAM,IAAK+iB,CAAQ,CAErE,CAEA,eAAQ,IAAI,iCAAiCzlB,EAAQ,IAAI,UAAU,EAC5DA,CACT,CACF,CAGA,gBAAiB,CAEf,MAAMuC,EAAW,OAAO,SAAS,SAC3BC,EAAW,OAAO,SAAS,SAQjC,OALID,IAAa,2BAKbC,EAAS,SAAS,wBAAwB,EACrC,mDAIF,6BACT,CAGA,MAAM,iBAAkB,OACtB,GAAI,CACF,QAAQ,IAAI,4CAA4C,EAGxD,IAAI/D,EACJ,GAAI,CACFA,EAAS,MAAM8mB,GAAY,sBAAqB,CAClD,OAASc,EAAc,CACrB,QAAQ,KAAK,6CAA8CA,CAAY,EAGvE,MAAM1c,EAAM,KAAK,eAAc,EAC/B,QAAQ,IAAI,oCAAqCA,CAAG,EAEpD,MAAMhJ,EAAW,MAAM,MAAMgJ,CAAG,EAChC,GAAI,CAAChJ,EAAS,GACZ,MAAM,IAAI,MAAM,QAAQA,EAAS,MAAM,KAAKA,EAAS,UAAU,EAAE,EAGnElC,EAAS,CAAE,KADE,MAAMkC,EAAS,KAAI,CACjB,CACjB,CAEA,GAAIlC,EAAO,MAMT,GALA,KAAK,SAAWA,EAAO,KACvB,KAAK,UAAY,KAAK,IAAG,EACzB,QAAQ,IAAI,wCAAsCiM,EAAA,KAAK,SAAS,QAAd,YAAAA,EAAqB,SAAU,CAAC,eAAe,EAG7F,KAAK,SAAS,MAAO,CACvB,MAAM4b,EAAU,KAAK,SAAS,MAAM,KAAK5mB,GAAQA,EAAK,SAAW,KAAK,EAClE4mB,EACF,QAAQ,IAAI,qCAAsCA,CAAO,GAEzD,QAAQ,KAAK,uCAAuC,EACpD,QAAQ,IAAI,qBAAsB,KAAK,SAAS,MAAM,IAAI5mB,GAAQA,EAAK,MAAM,EAAE,MAAM,EAAG,EAAE,CAAC,EAE/F,OAEA,QAAQ,KAAK,+CAA+C,CAEhE,OAASxB,EAAO,CACd,QAAQ,KAAK,gCAAiCA,CAAK,CACrD,CACF,CAGA,mBAAmBwE,EAAQ,CACzB,MAAMwI,EAAgB,CAAC,OAAQ,OAAQ,QAAS,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,MAAO,OAAQ,KAAM,OAAQ,MAAO,OAAQ,MAAO,MAAO,OAAQ,OAAQ,OAAQ,MAAM,EAC1MC,EAAc,CAAC,MAAO,OAAQ,KAAK,EAEzC,OAAID,EAAc,SAASxI,CAAM,EACxB,SACEyI,EAAY,SAASzI,CAAM,EAC7B,OAGF,QACT,CAGA,mBAAmB+iB,EAAU,CAC3B,OAAI,KAAK,cACAQ,GAAuB,mBAAmBR,CAAQ,EAIvD,CAACA,GAAYA,EAAS,WAAa,GAC9B,mBAGFA,EAAS,UAAYA,EAAS,QAAU,kBACjD,CAGA,oBAAoBA,EAAU,CAC5B,GAAI,KAAK,cACP,OAAOQ,GAAuB,oBAAoBR,CAAQ,EAI5D,MAAM9M,EAAW,KAAK,mBAAmB8M,CAAQ,EAejD,MAb2B,CACzB,2BAA4B,WAC5B,gCAAiC,iBACjC,oBAAqB,gBACrB,sBAAuB,gBACvB,eAAkB,gBAClB,sBAAuB,uBACvB,uBAAwB,mBACxB,2BAA4B,iBAC5B,oBAAqB,aACrB,mBAAoB,SAC1B,EAE8B9M,CAAQ,GAAK,OACzC,CAGA,MAAM,YAAY7M,EAAS,CACzB,GAAI,KAAK,cACP,OAAO,MAAMma,GAAuB,YAAYna,CAAO,EAClD,CAEL,QAAQ,IAAI,wCAAwCA,EAAQ,MAAM,aAAa,EAC/E,MAAMxN,EAAY,KAAK,IAAG,EAE1B,MAAM,KAAK,gBAAe,EAE1B,UAAWoE,KAAUoJ,EACnB,MAAM,KAAK,wBAAwBpJ,CAAM,EAG3C,MAAMnE,EAAW,KAAK,IAAG,EAAKD,EAC9B,eAAQ,IAAI,oCAAoCC,CAAQ,IAAI,EAErD,CACL,SAAAA,EACA,iBAAkBuN,EAAQ,OAC1B,KAAM,QACd,CACI,CACF,CAGA,YAAa,CACX,KAAK,MAAM,MAAK,EAChB,KAAK,SAAW,KAChB,KAAK,UAAY,KAEb,KAAK,eACPma,GAAuB,WAAU,CAErC,CAGA,eAAgB,CACd,OAAI,KAAK,cACA,CACL,KAAM,UACN,GAAGA,GAAuB,cAAa,CAC/C,EAEa,CACL,KAAM,SACN,YAAa,KAAK,MAAM,KACxB,UAAW,KAAK,UAChB,eAAgB,CAAC,CAAC,KAAK,QAC/B,CAEE,CAGA,gBAAiB,CACf,OAAO,KAAK,cAAgB,UAAY,QAC1C,CACF,CAGO,MAAMM,GAAkB,IAAIL,GC3RnC,MAAMM,EAAqB,CACzB,aAAc,CACZ,KAAK,MAAQ,KACb,KAAK,QAAU,EACjB,CAEA,gBAAiB,CAEf,MAAMjkB,EAAW,OAAO,SAAS,SAC3BC,EAAW,OAAO,SAAS,SAQjC,OALID,IAAa,2BAKbC,EAAS,SAAS,wBAAwB,EACrC,mDAIF,6BACT,CAEA,MAAM,cAAe,OACnB,GAAI,KAAK,MACP,OAAO,KAAK,MAGd,GAAI,KAAK,QAAS,CAEhB,KAAO,KAAK,SACV,MAAM,IAAI,QAAQ3E,GAAW,WAAWA,EAAS,GAAG,CAAC,EAEvD,OAAO,KAAK,KACd,CAEA,KAAK,QAAU,GAEf,GAAI,CACF,MAAM8L,EAAM,KAAK,eAAc,EAC/B,QAAQ,IAAI,yCAA0CA,CAAG,EAEzD,MAAMhJ,EAAW,MAAM,MAAMgJ,CAAG,EAChC,GAAI,CAAChJ,EAAS,GACZ,MAAM,IAAI,MAAM,QAAQA,EAAS,MAAM,KAAKA,EAAS,UAAU,EAAE,EAGnE,MAAMpB,EAAO,MAAMoB,EAAS,KAAI,EAChC,YAAK,MAAQpB,EAEb,QAAQ,IAAI,+CAA+CmL,EAAAnL,EAAK,QAAL,YAAAmL,EAAY,OAAQ,OAAO,EAC/E,KAAK,KAEd,OAASxM,EAAO,CACd,eAAQ,MAAM,iCAAkCA,CAAK,EAC9C,IACT,QAAC,CACC,KAAK,QAAU,EACjB,CACF,CAEA,MAAM,kBAAkBwE,EAAQ,CAC9B,MAAMnD,EAAO,MAAM,KAAK,aAAY,EACpC,GAAI,CAACA,GAAQ,CAACA,EAAK,MACjB,MAAO,CACL,OAAAmD,EACA,OAAQ,UACR,SAAU,mBACV,SAAU,SACV,WAAY,EACZ,OAAQ,uBAChB,EAGI,MAAM+jB,EAAalnB,EAAK,MAAM,KAAKG,GAAQA,EAAK,SAAWgD,CAAM,EACjE,OAAI+jB,EACK,CACL,GAAGA,EACH,OAAQ,wBAChB,EAGW,CACL,OAAA/jB,EACA,OAAQ,UACR,SAAU,mBACV,SAAU,SACV,WAAY,EACZ,OAAQ,0BACd,CACE,CAEA,MAAM,iBAAiBoJ,EAAS,CAC9B,MAAM9L,EAAU,IAAI,IAEpB,UAAW0C,KAAUoJ,EAAS,CAC5B,MAAM2Z,EAAW,MAAM,KAAK,kBAAkB/iB,CAAM,EACpD1C,EAAQ,IAAI0C,EAAQ+iB,CAAQ,CAC9B,CAEA,OAAOzlB,CACT,CACF,CAEO,MAAM0mB,GAAuB,IAAIF,GCkFnCjqB,GAAU,CACb,KAAM,cACN,WAAY,CACV,sBAAAic,GACA,sBAAAnH,GACA,mBAAAsV,GACA,sBAAAC,GACA,0BAAAC,GACA,2BAAAC,GACA,oBAAApO,GACA,mBAAAtZ,GACA,UAAA2nB,GACA,oBAAAC,IAEF,MAAO,CACL,MAAO,CACL,QAAS,GACT,MAAO,KACP,SAAU,IACZ,CACF,EACA,SAAU,CACR,QAAS,CACP,OAAO,KAAK,OAAO,OAAO,QAAU,MACtC,EACA,UAAW,CAET,GAAI,KAAK,UAAY,KAAK,SAAS,SAWjC,MAToB,CAClB,IAAO,OACP,IAAO,SACP,IAAO,SACP,IAAO,SACP,IAAO,OACP,KAAQ,OACR,OAAU,QACZ,EACmB,KAAK,SAAS,QAAQ,GAAK,KAAK,SAAS,SAI9D,MAAMtkB,EAAS,KAAK,OAGpB,MAAI,CAAC,OAAQ,MAAO,MAAO,MAAO,KAAM,MAAO,MAAO,OAAQ,MAAM,EAAE,SAASA,CAAM,EAC5E,QAGA,CAAC,OAAQ,OAAQ,OAAQ,OAAQ,MAAO,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,MAAM,EAAE,SAASA,CAAM,EACvI,SAIX,EAEA,oBAAqB,CACnB,MAAO,CACL,UAAa,EACb,SAAY,EACZ,UAAa,eACb,WAAc,GACd,UAAa,qBACb,cAAiB,yBACjB,cAAiB,0BACjB,gBAAmB,yBACnB,gBAAmB,UACnB,gBAAmB,UACnB,QAAW,UACX,UAAa,UACb,cAAiB,UACjB,gBAAmB,UACnB,YAAe,UACf,cAAiB,UACjB,WAAc,QACd,cAAiB,GACjB,OAAU,KACV,UAAa,GACb,cAAiB,QACjB,UAAa,SACb,WAAc,8EACd,eAAkB,IAClB,WAAc,oBACd,QAAW,CAAC,CAAC,GAAG,KAAK,QAAQ,IAAI,KAAK,MAAM,KAAK,CAAC,EAClD,WAAc,CAAC,OAAO,EACtB,SAAY,KACZ,eAAkB,SAClB,SAAY,GACZ,MAAS,OACT,OAAU,OACV,YAAe,GACf,eAAkB,GAClB,OAAU,GACV,SAAY,IACZ,YAAe,UACf,YAAe,EACf,iBAAoB,GACpB,eAAkB,EACpB,CACF,EAEA,qBAAsB,CACpB,MAAO,CACL,UAAa,EACb,SAAY,EACZ,UAAa,eACb,WAAc,GACd,UAAa,qBACb,cAAiB,yBACjB,cAAiB,0BACjB,gBAAmB,yBACnB,gBAAmB,UACnB,gBAAmB,UACnB,QAAW,UACX,UAAa,UACb,cAAiB,UACjB,gBAAmB,UACnB,YAAe,UACf,cAAiB,UACjB,WAAc,QACd,cAAiB,GACjB,OAAU,KACV,UAAa,GACb,cAAiB,QACjB,UAAa,SACb,WAAc,8EACd,eAAkB,IAClB,WAAc,oBACd,QAAW,CAAC,CAAC,GAAG,KAAK,QAAQ,IAAI,KAAK,MAAM,KAAK,CAAC,EAClD,WAAc,CAAC,OAAO,EACtB,SAAY,KACZ,eAAkB,SAClB,SAAY,GACZ,MAAS,OACT,OAAU,OACV,YAAe,GACf,eAAkB,GAClB,OAAU,GACV,SAAY,IACZ,YAAe,UACf,YAAe,EACf,iBAAoB,GACpB,eAAkB,EACpB,CACF,GAEF,MAAO,CACL,QAAS,CAEP,KAAK,YAAW,EAChB,KAAK,aAAY,CACnB,EACA,QAAS,CAEP,KAAK,YAAW,CAClB,GAEA,SAAU,CAEV,KAAK,YAAW,EAGhB6jB,GAAgB,iBAAiB,EAAI,EAErC,KAAK,aAAY,EACjB,KAAK,eAAc,CACrB,EACA,QAAS,CACP,MAAM,gBAAiB,CACrB,GAAI,CAEF,MAAM,IAAI,QAAQ1oB,GAAW,WAAWA,EAAS,GAAI,CAAC,EACtD,KAAK,QAAU,EACjB,OAAS0Q,EAAK,CACZ,KAAK,MAAQ,OAAOA,CAAG,EACvB,KAAK,QAAU,EACjB,CACF,EACA,MAAM,SAAU,CACd,KAAK,QAAU,GACf,KAAK,MAAQ,KACb,MAAM,KAAK,eAAc,CAC3B,EACA,MAAM,cAAe,CACnB,GAAI,CAEF,KAAK,SAAW,MAAMmY,GAAqB,kBAAkB,KAAK,MAAM,EACxE,QAAQ,IAAI,sCAAsC,KAAK,MAAM,IAAK,KAAK,QAAQ,CACjF,OAASxoB,EAAO,CACd,QAAQ,KAAK,+BAA+B,KAAK,MAAM,IAAKA,CAAK,EACjE,KAAK,SAAW,IAClB,CACF,EAEA,WAAY,CACV,MAAI,CAAC,KAAK,UAAY,KAAK,SAAS,WAAa,GACxC,UAEF,KAAK,SAAS,QAAU,SACjC,EAEA,aAAc,CAMZ,MALI,CAAC,KAAK,UAKN,KAAK,SAAS,WAAa,GACtB,mBAGF,KAAK,SAAS,UAAY,KAAK,SAAS,QAAU,kBAC3D,EAEA,qBAAsB,CACpB,MAAMya,EAAW,KAAK,YAAW,EAiBjC,MAd2B,CACzB,yBAA0B,gBAC1B,oBAAqB,gBACrB,0BAA2B,iBAC3B,oBAAqB,gBACrB,sBAAuB,gBACvB,eAAkB,gBAClB,sBAAuB,uBACvB,uBAAwB,mBACxB,2BAA4B,iBAC5B,qBAAsB,aACtB,mBAAoB,SACtB,EAE0BA,CAAQ,GAAK,OACzC,EAEA,QAAS,CACP,QAAQ,IAAI,mCAAmC,EAC/C,KAAK,QAAQ,KAAK,CAAE,KAAM,iBAAkB,EAAE,MAAMpK,GAAO,CACzD,QAAQ,MAAM,oBAAqBA,CAAG,CACxC,CAAC,CACH,EAGA,aAAc,CAEZ,KAAK,UAAU,IAAM,CACnB,OAAO,SAAS,CACd,IAAK,EACL,KAAM,EACN,SAAU,SACX,EAGD,WAAW,IAAM,CACf,OAAO,SAAS,EAAG,CAAC,CACtB,EAAG,GAAG,CACR,CAAC,CACH,CACF,CACF,EAjcO/R,GAAA,CAAA,MAAM,cAAc,EAElBC,GAAA,CAAA,MAAM,YAAY,EAGfC,GAAA,CAAA,MAAM,oBAAoB,YAId,MAAM,mCAKH,MAAM,SACxBG,GAAA,CAAA,MAAM,aAAa,aAOjBkU,GAAA,CAAA,MAAM,cAAc,EAClBzB,GAAA,CAAA,MAAM,mBAAmB,EACvB4B,GAAA,CAAA,MAAM,aAAa,EAClBF,GAAA,CAAA,MAAM,QAAQ,EACbzB,GAAA,CAAA,MAAM,aAAa,EAChBC,GAAA,CAAA,MAAM,cAAc,EAIzBC,GAAA,CAAA,MAAM,gBAAgB,EASxBC,GAAA,CAAA,MAAM,mBAAmB,EAEvBC,GAAA,CAAA,MAAM,iBAAiB,EAYvBC,GAAA,CAAA,MAAM,kBAAkB,EAe5BC,GAAA,CAAA,MAAM,sBAAsB,EAM1BC,GAAA,CAAA,MAAM,mCAAmC,EAYzCC,GAAA,CAAA,MAAM,sCAAsC,EAY5CC,GAAA,CAAA,MAAM,2BAA2B,EAE/BC,GAAA,CAAA,MAAM,8BAA8B,EAcpCC,GAAA,CAAA,MAAM,+BAA+B,EAgBzCC,GAAA,CAAA,MAAM,kBAAkB,EAWxBC,GAAA,CAAA,MAAM,gBAAgB,EAEpBC,GAAA,CAAA,MAAM,kBAAkB,EAQxBC,GAAA,CAAA,MAAM,kBAAkB,EAQxBC,GAAA,CAAA,MAAM,kBAAkB,yUAhKnC,OAAAxT,EAAA,EAAAC,EA6KM,MA7KNR,GA6KM,CA3KJS,EAIM,MAJNR,GAIM,CAHJS,EAAsFC,EAAA,CAAzE,GAAG,kBAAkB,MAAM,+BAAkB,IAAc,CAAA,GAAAC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,GAAd,iBAAc,EAAA,YACxEA,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAA2C,OAAA,CAArC,MAAM,sBAAsB,EAAC,IAAC,EAAA,GACpCA,EAA6D,OAA7DP,GAA6DuS,EAAzBH,EAAA,MAAM,EAAG,YAAS,CAAA,IAI7CE,EAAA,SAAXjS,IAAAC,EAEM,MAFNL,GAEM,CADJO,EAAuB+pB,CAAA,KAITjY,EAAA,OAAhBjS,IAAAC,EAGM,MAHNJ,GAGM,CAFJK,EAAsC,IAAtCJ,GAAsCoS,EAAZD,EAAA,KAAK,EAAA,CAAA,EAC/B/R,EAAiE,SAAA,CAAxD,4BAAO6R,EAAA,SAAAA,EAAA,QAAA,GAAAI,CAAA,GAAS,MAAM,qBAAoB,OAAK,UAI1DlS,EAwJM,MAAAF,GAAA,CAtJJG,EA4CM,MA5CN8T,GA4CM,CA3CJ9T,EAcM,MAdNqS,GAcM,CAbJrS,EAMM,MANNiU,GAMM,CALJjU,EAAoC,KAApC+T,GAAoC/B,EAAdH,EAAA,MAAM,EAAA,CAAA,EAC5B7R,EAGM,MAHNsS,GAGM,CAFJtS,EAAgD,OAAhDuS,GAAgDP,EAAlBH,EAAA,QAAQ,EAAA,CAAA,EACtC7R,EAAkG,OAAA,CAA5F,MAAK6T,EAAA,CAAC,eAAc,YAAqBhC,EAAA,oBAAmB,CAAA,EAAA,CAAA,KAASA,EAAA,YAAW,CAAA,EAAA,CAAA,MAG1F7R,EAKM,MALNwS,GAKM,CAJJxS,EAGS,SAAA,CAHA,4BAAO6R,EAAA,QAAAA,EAAA,OAAA,GAAAI,CAAA,GAAQ,MAAM,+BAC5BjS,EAA+B,OAAA,CAAzB,MAAM,UAAU,EAAC,IAAC,EAAA,IAAO,2BAEjC,EAAA,UAKJA,EAyBM,MAzBNyS,GAyBM,CAvBJzS,EASM,MATN0S,GASM,aARJ1S,EAEM,MAAA,CAFD,MAAM,iBAAe,CACxBA,EAAwB,UAApB,iBAAe,QAErBC,EAIE0b,EAAA,CAHA,cAAY,WACX,OAAQ9J,EAAA,OACR,SAAUA,EAAA,0CAKf7R,EAUM,MAVN2S,GAUM,aATJ3S,EAEM,MAAA,CAFD,MAAM,iBAAe,CACxBA,EAA2B,UAAvB,oBAAkB,QAExBC,EAKE0b,EAAA,CAJA,cAAY,YACX,OAAQ9J,EAAA,OACR,SAAUA,EAAA,SACX,MAAM,gEAOd7R,EA2DM,MA3DN4S,GA2DM,eA1DJ5S,EAEM,MAAA,CAFD,MAAM,kBAAgB,CACzBA,EAAuB,UAAnB,gBAAc,QAIpBA,EASM,MATN6S,GASM,aARJ7S,EAEM,MAAA,CAFD,MAAM,iBAAe,CACxBA,EAAsB,UAAlB,eAAa,QAEnBC,EAIEgqB,EAAA,CAHC,OAAQpY,EAAA,OACR,SAAUA,EAAA,SACV,SAAU,mCAKf7R,EASM,MATN8S,GASM,aARJ9S,EAEM,MAAA,CAFD,MAAM,iBAAe,CACxBA,EAAyB,UAArB,kBAAgB,QAEtBC,EAIEiqB,EAAA,CAHC,OAAQrY,EAAA,OACR,SAAUA,EAAA,SACV,SAAU,mCAKf7R,EA4BM,MA5BN+S,GA4BM,CA1BJ/S,EAWM,MAXNgT,GAWM,aAVJhT,EAEM,MAAA,CAFD,MAAM,iBAAe,CACxBA,EAA4B,UAAxB,qBAAmB,QAEzBC,EAMEwU,EAAA,CALA,cAAY,gBACX,OAAQ5C,EAAA,mBACT,aAAW,gFACX,OAAO,QACN,SAAU,wBAKf7R,EAWM,MAXNiT,GAWM,eAVJjT,EAEM,MAAA,CAFD,MAAM,iBAAe,CACxBA,EAA6B,UAAzB,sBAAoB,QAE1BC,EAMEwU,EAAA,CALA,cAAY,iBACX,OAAQ5C,EAAA,oBACT,aAAW,gFACX,OAAO,QACN,SAAU,4BAOnB7R,EAKM,MALNkT,GAKM,eAJJlT,EAEM,MAAA,CAFD,MAAM,iBAAe,CACxBA,EAA6B,UAAzB,sBAAoB,QAE1BC,EAA6D4b,EAAA,CAAvC,OAAQhK,EAAA,OAAS,SAAUA,EAAA,0CAInD5R,EAAsBiiB,CAAA,EAGtBliB,EA6BM,MA7BNmT,GA6BM,CA3BJnT,EAKM,MALNoT,GAKM,eAJJpT,EAEM,MAAA,CAFD,MAAM,iBAAe,CACxBA,EAAoB,UAAhB,aAAW,QAEjBC,EAA8BkqB,EAAA,CAAlB,OAAQtY,EAAA,MAAM,EAAA,KAAA,EAAA,CAAA,QAAA,CAAA,IAI5B7R,EAKM,MALNqT,GAKM,eAJJrT,EAEM,MAAA,CAFD,MAAM,iBAAe,CACxBA,EAAyB,UAArB,kBAAgB,QAEtBC,EAAoEmqB,EAAA,CAAvC,OAAQvY,EAAA,OAAS,SAAUA,EAAA,0CAI1D7R,EAUM,MAVNsT,GAUM,eATJtT,EAEM,MAAA,CAFD,MAAM,iBAAe,CACxBA,EAAwB,UAApB,iBAAe,QAErBC,EAKEoqB,EAAA,CAJC,OAAQxY,EAAA,OACR,SAAUA,EAAA,SACX,cAAY,QACX,iBAAgB,0GCpJxBvS,GAAU,CACb,KAAM,wBACN,MAAO,CACL,YAAa,CACX,KAAM,OACN,QAAS,WAEX,SAAU,CACR,KAAM,OACN,QAAS,UAEX,WAAY,CACV,KAAM,OACN,QAAS,SAEX,cAAe,CACb,KAAM,QACN,QAAS,IAEX,OAAQ,CACN,KAAM,OACN,QAAS,MAEX,OAAQ,CACN,KAAM,OACN,QAAS,SAEX,OAAQ,CACN,KAAM,OACN,QAAS,OACX,GAEF,MAAO,CACL,MAAO,CACL,OAAQ,GACR,MAAO,GACP,SAAU,eAAe,KAAK,IAAG,CAAE,EACrC,CACF,EACA,SAAU,CACR,KAAK,eAAc,CACrB,EACA,QAAS,CACP,MAAM,gBAAiB,CACrB,KAAK,OAAS,GACd,KAAK,MAAQ,GAEb,GAAI,CACF,MAAM,KAAK,UAAS,EACpB,KAAK,iBAAgB,CACvB,OAASgS,EAAK,CACZ,QAAQ,MAAM,8BAA+BA,CAAG,EAChD,KAAK,MAAQ,EACf,CACF,EAEA,kBAAmB,CACjB,MAAMC,EAAY,KAAK,MAAM,UAC7B,GAAI,CAACA,EAAW,OAGhBA,EAAU,UAAY,GAGtB,MAAME,EAAkB,SAAS,cAAc,KAAK,EACpDA,EAAgB,UAAY,+BAC5BA,EAAgB,MAAM,OAAS,OAC/BA,EAAgB,MAAM,MAAQ,OAE9B,MAAMC,EAAgB,SAAS,cAAc,KAAK,EAClDA,EAAc,UAAY,uCAE1BD,EAAgB,YAAYC,CAAa,EACzCH,EAAU,YAAYE,CAAe,EAGrC,MAAMpN,EAAS,CACb,YAAe,KAAK,YACpB,SAAY,KAAK,SACjB,WAAc,KAAK,WACnB,cAAiB,KAAK,cACtB,OAAU,KAAK,OACf,OAAU,KAAK,OACf,MAAS,OACT,OAAU,MACZ,EAGMrD,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,KAAO,kBACdA,EAAO,IAAM,yEACbA,EAAO,MAAQ,GACfA,EAAO,UAAY,KAAK,UAAUqD,CAAM,EAGxCrD,EAAO,OAAS,IAAM,CACpB,KAAK,OAAS,GACd,QAAQ,IAAI,6CAA6C,CAC3D,EAEAA,EAAO,QAAU,IAAM,CACrB,KAAK,MAAQ,GACb,QAAQ,MAAM,wCAAwC,CACxD,EAGA0Q,EAAc,YAAY1Q,CAAM,EAGhC,WAAW,IAAM,CACX,CAAC,KAAK,QAAU,CAAC,KAAK,QACxB,KAAK,OAAS,GAElB,EAAG,GAAI,CACT,EAEA,MAAM,OAAQ,CACZ,MAAM,KAAK,eAAc,CAC3B,CACF,CACF,EA5IOzB,GAAA,CAAA,MAAM,uBAAuB,sBAMA,MAAM,6BAKlB,MAAM,0CAX5B,OAAAO,EAAA,EAAAC,EAgBM,MAhBNR,GAgBM,aAfJS,EAEM,MAAA,CAFD,MAAM,iBAAe,CACxBA,EAAoB,UAAhB,aAAW,QAGjBA,EAUM,MAAA,CAVD,MAAM,qBAAsB,GAAI+R,EAAA,SAAU,IAAI,cACrC,CAAAA,EAAA,SAAWA,EAAA,OAAvBjS,IAAAC,EAGM,MAHNN,GAGM,CAAA,GAAAU,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAFJH,EAAmC,MAAA,CAA9B,MAAM,iBAAiB,EAAA,KAAA,EAAA,EAC5BA,EAAmC,YAA7B,yBAAsB,EAAA,gBAGnB+R,EAAA,OAAXjS,IAAAC,EAGM,MAHNL,GAGM,CAFJS,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAA0C,YAApC,gCAA6B,EAAA,GACnCA,EAAuD,SAAA,CAA9C,4BAAO6R,EAAA,OAAAA,EAAA,MAAA,GAAAI,CAAA,GAAO,MAAM,aAAY,OAAK,sFCsBjD3S,GAAU,CACb,KAAM,oBACR,EArCOC,GAAA,CAAA,MAAM,sBAAsB,EAQ1BC,GAAA,CAAA,MAAM,2BAA2B,EAC/BC,GAAA,CAAA,MAAM,uBAAuB,EAKzBC,GAAA,CAAA,MAAM,qBAAqB,EAQjCC,GAAA,CAAA,MAAM,sBAAsB,EAE1BC,GAAA,CAAA,MAAM,sBAAsB,2BAxBrC,OAAAE,EAAA,EAAAC,EA+BM,MA/BNR,GA+BM,aA7BJS,EAGM,MAAA,CAHD,MAAM,wBAAsB,CAC/BA,EAAuC,MAAA,CAAlC,MAAM,qBAAqB,CAAA,EAChCA,EAA6C,MAAA,CAAxC,MAAM,2BAA2B,CAAA,QAIxCA,EAWM,MAXNR,GAWM,CAVJQ,EASM,MATNP,GASM,MARJM,EAOMmU,EAAA,KAAAC,EAPuC,GAALnQ,GAAxChE,EAOM,MAAA,CAPD,MAAM,sBAAuC,IAAKgE,gBACrDhE,EAAuC,MAAA,CAAlC,MAAM,qBAAqB,EAAA,KAAA,EAAA,eAChCA,EAAwC,MAAA,CAAnC,MAAM,sBAAsB,EAAA,KAAA,EAAA,eACjCA,EAA0C,MAAA,CAArC,MAAM,wBAAwB,EAAA,KAAA,EAAA,GACnCA,EAEM,MAFNN,GAEM,MADJK,EAA8DmU,EAAA,KAAAC,EAAlB,EAALhN,GAAvCnH,EAA8D,MAAA,CAAzD,MAAM,qBAAqC,IAAKmH,wBAO7DnH,EAQM,MARNL,GAQM,aAPJK,EAAyC,MAAA,CAApC,MAAM,uBAAuB,EAAA,KAAA,EAAA,GAClCA,EAKM,MALNJ,GAKM,MAJJG,EAGMmU,EAAA,KAAAC,EAHwC,EAALnQ,GAAzChE,EAGM,MAAA,CAHD,MAAM,uBAAuC,IAAKgE,oBACrDhE,EAAyC,MAAA,CAApC,MAAM,uBAAuB,EAAA,KAAA,EAAA,EAClCA,EAAyC,MAAA,CAApC,MAAM,uBAAuB,EAAA,KAAA,EAAA,iFCoBvCV,GAAU,CACb,KAAM,iBACN,WAAY,CACV,sBAAAgrB,GACA,mBAAAC,IAEF,MAAO,CACL,MAAO,CACL,QAAS,GACT,MAAO,IACT,CACF,EACA,SAAU,CACR,KAAK,eAAc,CACrB,EACA,QAAS,CACP,MAAM,gBAAiB,CACrB,GAAI,CAEF,MAAM,IAAI,QAAQ3pB,GAAW,WAAWA,EAAS,GAAG,CAAC,EACrD,KAAK,QAAU,EACjB,OAAS0Q,EAAK,CACZ,KAAK,MAAQ,OAAOA,CAAG,EACvB,KAAK,QAAU,EACjB,CACF,EACA,MAAM,SAAU,CACd,KAAK,QAAU,GACf,KAAK,MAAQ,KACb,MAAM,KAAK,eAAc,CAC3B,CACF,CACF,EA/EO/R,GAAA,CAAA,MAAM,kBAAkB,YAKP,MAAM,mCAKH,MAAM,SACxBG,GAAA,CAAA,MAAM,aAAa,mGAX1B,OAAAI,EAAA,EAAAC,EAwCM,MAxCNR,GAwCM,CAvCJY,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAgC,UAA5B,0BAAuB,EAAA,GAC3BG,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAwE,IAAA,CAArE,MAAM,iBAAiB,EAAC,4CAAyC,EAAA,GAGzD+R,EAAA,SAAXjS,IAAAC,EAEM,MAFNP,GAEM,CADJS,EAAsBuqB,CAAA,KAIRzY,EAAA,OAAhBjS,IAAAC,EAGM,MAHNN,GAGM,CAFJO,EAAsC,IAAtCN,GAAsCsS,EAAZD,EAAA,KAAK,EAAA,CAAA,EAC/B/R,EAAiE,SAAA,CAAxD,4BAAO6R,EAAA,SAAAA,EAAA,QAAA,GAAAI,CAAA,GAAS,MAAM,qBAAoB,OAAK,UAI1DlS,EAuBM,MAAAJ,GAAA,CArBJM,EAQEwqB,EAAA,CAPA,eAAa,UACb,YAAU,SACV,cAAY,QACX,iBAAgB,GACjB,OAAO,KACP,OAAO,QACP,OAAO,4kBCqBVnrB,GAAU,CACb,KAAM,qBACN,MAAO,CACL,WAAY,CACV,KAAM,OACN,QAAS,SAEX,cAAe,CACb,KAAM,QACN,QAAS,IAEX,OAAQ,CACN,KAAM,OACN,QAAS,MAEX,OAAQ,CACN,KAAM,OACN,QAAS,QACX,GAEF,MAAO,CACL,MAAO,CACL,YAAa,GACb,WAAY,GACZ,aAAc,GACd,YAAa,GACb,cAAe,gBAAgB,KAAK,IAAG,CAAE,GACzC,eAAgB,iBAAiB,KAAK,IAAG,CAAE,EAC7C,CACF,EACA,SAAU,CACR,KAAK,YAAW,CAClB,EACA,QAAS,CACP,MAAM,aAAc,CAClB,MAAM,KAAK,UAAS,EACpB,KAAK,kBAAiB,EACtB,KAAK,mBAAkB,CACzB,EAEA,mBAAoB,CAClB,MAAMiS,EAAY,KAAK,MAAM,eAC7B,GAAI,CAACA,EAAW,OAGhBA,EAAU,UAAY,GAGtB,MAAME,EAAkB,SAAS,cAAc,KAAK,EACpDA,EAAgB,UAAY,+BAC5BA,EAAgB,MAAM,OAAS,OAC/BA,EAAgB,MAAM,MAAQ,OAE9B,MAAMC,EAAgB,SAAS,cAAc,KAAK,EAClDA,EAAc,UAAY,uCAE1BD,EAAgB,YAAYC,CAAa,EACzCH,EAAU,YAAYE,CAAe,EAGrC,MAAMiZ,EAAc,CAClB,UAAa,EACb,SAAY,EACZ,UAAa,eACb,WAAc,GACd,UAAa,UACb,cAAiB,yBACjB,cAAiB,0BACjB,gBAAmB,yBACnB,gBAAmB,UACnB,gBAAmB,UACnB,QAAW,UACX,UAAa,UACb,cAAiB,UACjB,gBAAmB,UACnB,YAAe,UACf,cAAiB,UACjB,WAAc,KAAK,WACnB,cAAiB,KAAK,cACtB,OAAU,KAAK,OACf,UAAa,GACb,cAAiB,QACjB,UAAa,SACb,WAAc,8EACd,eAAkB,IAClB,WAAc,oBACd,QAAW,CAAC,CAAC,cAAc,EAAG,CAAC,sBAAsB,CAAC,EACtD,WAAc,CAAC,OAAO,EACtB,SAAY,KACZ,eAAkB,SAClB,SAAY,GACZ,MAAS,OACT,OAAU,OACV,YAAe,GACf,eAAkB,GAClB,OAAU,GACV,SAAY,IACZ,YAAe,UACf,YAAe,EACf,iBAAoB,GACpB,eAAkB,EACpB,EAGM1pB,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,KAAO,kBACdA,EAAO,IAAM,gFACbA,EAAO,MAAQ,GACfA,EAAO,UAAY,KAAK,UAAU0pB,CAAW,EAG7C1pB,EAAO,OAAS,IAAM,CACpB,KAAK,YAAc,GACnB,QAAQ,IAAI,yCAAyC,CACvD,EAEAA,EAAO,QAAU,IAAM,CACrB,KAAK,WAAa,GAClB,QAAQ,MAAM,oCAAoC,CACpD,EAGA0Q,EAAc,YAAY1Q,CAAM,EAGhC,WAAW,IAAM,CACX,CAAC,KAAK,aAAe,CAAC,KAAK,aAC7B,KAAK,YAAc,GAEvB,EAAG,GAAI,CACT,EAEA,oBAAqB,CACnB,MAAMuQ,EAAY,KAAK,MAAM,gBAC7B,GAAI,CAACA,EAAW,OAGhBA,EAAU,UAAY,GAGtB,MAAME,EAAkB,SAAS,cAAc,KAAK,EACpDA,EAAgB,UAAY,+BAC5BA,EAAgB,MAAM,OAAS,OAC/BA,EAAgB,MAAM,MAAQ,OAE9B,MAAMC,EAAgB,SAAS,cAAc,KAAK,EAClDA,EAAc,UAAY,uCAE1BD,EAAgB,YAAYC,CAAa,EACzCH,EAAU,YAAYE,CAAe,EAGrC,MAAMkZ,EAAe,CACnB,UAAa,EACb,SAAY,EACZ,UAAa,eACb,WAAc,GACd,UAAa,UACb,cAAiB,yBACjB,cAAiB,0BACjB,gBAAmB,yBACnB,gBAAmB,UACnB,gBAAmB,UACnB,QAAW,UACX,UAAa,UACb,cAAiB,UACjB,gBAAmB,UACnB,YAAe,UACf,cAAiB,UACjB,WAAc,KAAK,WACnB,cAAiB,KAAK,cACtB,OAAU,KAAK,OACf,UAAa,GACb,cAAiB,QACjB,UAAa,SACb,WAAc,8EACd,eAAkB,IAClB,WAAc,oBACd,QAAW,CAAC,CAAC,cAAc,EAAG,CAAC,sBAAsB,CAAC,EACtD,WAAc,CAAC,OAAO,EACtB,SAAY,KACZ,eAAkB,SAClB,SAAY,GACZ,MAAS,OACT,OAAU,OACV,YAAe,GACf,eAAkB,GAClB,OAAU,GACV,SAAY,IACZ,YAAe,UACf,YAAe,EACf,iBAAoB,GACpB,eAAkB,EACpB,EAGM3pB,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,KAAO,kBACdA,EAAO,IAAM,gFACbA,EAAO,MAAQ,GACfA,EAAO,UAAY,KAAK,UAAU2pB,CAAY,EAG9C3pB,EAAO,OAAS,IAAM,CACpB,KAAK,aAAe,GACpB,QAAQ,IAAI,0CAA0C,CACxD,EAEAA,EAAO,QAAU,IAAM,CACrB,KAAK,YAAc,GACnB,QAAQ,MAAM,qCAAqC,CACrD,EAGA0Q,EAAc,YAAY1Q,CAAM,EAGhC,WAAW,IAAM,CACX,CAAC,KAAK,cAAgB,CAAC,KAAK,cAC9B,KAAK,aAAe,GAExB,EAAG,GAAI,CACT,EAEA,MAAM,YAAa,CACjB,KAAK,YAAc,GACnB,KAAK,WAAa,GAClB,MAAM,KAAK,UAAS,EACpB,KAAK,kBAAiB,CACxB,EAEA,MAAM,aAAc,CAClB,KAAK,aAAe,GACpB,KAAK,YAAc,GACnB,MAAM,KAAK,UAAS,EACpB,KAAK,mBAAkB,CACzB,CACF,CACF,EA5ROzB,GAAA,CAAA,MAAM,gCAAgC,EAKpCC,GAAA,CAAA,MAAM,cAAc,EAElBC,GAAA,CAAA,MAAM,iBAAiB,sBAKgB,MAAM,4BAKvB,MAAM,gBAQ5BI,GAAA,CAAA,MAAM,iBAAiB,sBAKkB,MAAM,4BAKxB,MAAM,yCAnCtC,OAAAC,EAAA,EAAAC,EA0CM,MA1CNR,GA0CM,aAzCJS,EAEM,MAAA,CAFD,MAAM,iBAAe,CACxBA,EAA6B,UAAzB,sBAAoB,QAG1BA,EAoCM,MApCNR,GAoCM,CAlCJQ,EAeM,MAfNP,GAeM,aAdJO,EAEM,MAAA,CAFD,MAAM,kBAAgB,CACzBA,EAA2B,UAAvB,oBAAkB,QAExBA,EAUM,MAAA,CAVD,MAAM,eAAgB,GAAI+R,EAAA,cAAe,IAAI,mBACpC,CAAAA,EAAA,cAAgBA,EAAA,YAA5BjS,IAAAC,EAGM,MAHNJ,GAGM,CAAA,GAAAQ,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAFJH,EAAmC,MAAA,CAA9B,MAAM,iBAAiB,EAAA,KAAA,EAAA,EAC5BA,EAAyC,YAAnC,+BAA4B,EAAA,gBAGzB+R,EAAA,YAAXjS,IAAAC,EAGM,MAHNH,GAGM,CAFJO,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAyC,YAAnC,+BAA4B,EAAA,GAClCA,EAA4D,SAAA,CAAnD,4BAAO6R,EAAA,YAAAA,EAAA,WAAA,GAAAI,CAAA,GAAY,MAAM,aAAY,OAAK,uBAMzDjS,EAeM,MAfNH,GAeM,aAdJG,EAEM,MAAA,CAFD,MAAM,kBAAgB,CACzBA,EAA4B,UAAxB,qBAAmB,QAEzBA,EAUM,MAAA,CAVD,MAAM,gBAAiB,GAAI+R,EAAA,eAAgB,IAAI,oBACtC,CAAAA,EAAA,eAAiBA,EAAA,aAA7BjS,IAAAC,EAGM,MAHNsS,GAGM,CAAA,GAAAlS,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAFJH,EAAmC,MAAA,CAA9B,MAAM,iBAAiB,EAAA,KAAA,EAAA,EAC5BA,EAA0C,YAApC,gCAA6B,EAAA,gBAG1B+R,EAAA,aAAXjS,IAAAC,EAGM,MAHNkU,GAGM,CAFJ9T,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAA0C,YAApC,gCAA6B,EAAA,GACnCA,EAA6D,SAAA,CAApD,4BAAO6R,EAAA,aAAAA,EAAA,YAAA,GAAAI,CAAA,GAAa,MAAM,aAAY,OAAK,0FCuB3D3S,GAAU,CACb,KAAM,4BACR,EA9DOC,GAAA,CAAA,MAAM,+BAA+B,EAiCnCC,GAAA,CAAA,MAAM,sBAAsB,EAE1BC,GAAA,CAAA,MAAM,sBAAsB,EAC1BC,GAAA,CAAA,MAAM,yBAAyB,EAE7BC,GAAA,CAAA,MAAM,sBAAsB,EAO9BC,GAAA,CAAA,MAAM,yBAAyB,EAE7BC,GAAA,CAAA,MAAM,sBAAsB,2BA/CzC,OAAAC,EAAA,EAAAC,EAwDM,MAxDNR,GAwDM,k3BAvBJS,EAsBM,MAtBNR,GAsBM,aArBJQ,EAAyC,MAAA,CAApC,MAAM,uBAAuB,EAAA,KAAA,EAAA,GAClCA,EAmBM,MAnBNP,GAmBM,CAlBJO,EAQM,MARNN,GAQM,aAPJM,EAAiD,MAAA,CAA5C,MAAM,+BAA+B,EAAA,KAAA,EAAA,GAC1CA,EAKM,MALNL,GAKM,MAJJI,EAGMmU,EAAA,KAAAC,EAHwC,EAALnQ,GAAzChE,EAGM,MAAA,CAHD,MAAM,uBAAuC,IAAKgE,oBACrDhE,EAAyC,MAAA,CAApC,MAAM,uBAAuB,EAAA,KAAA,EAAA,EAClCA,EAAyC,MAAA,CAApC,MAAM,uBAAuB,EAAA,KAAA,EAAA,gBAIxCA,EAQM,MARNJ,GAQM,aAPJI,EAAiD,MAAA,CAA5C,MAAM,+BAA+B,EAAA,KAAA,EAAA,GAC1CA,EAKM,MALNH,GAKM,MAJJE,EAGMmU,EAAA,KAAAC,EAHwC,EAALnQ,GAAzChE,EAGM,MAAA,CAHD,MAAM,uBAAuC,IAAKgE,oBACrDhE,EAAyC,MAAA,CAApC,MAAM,uBAAuB,EAAA,KAAA,EAAA,EAClCA,EAAyC,MAAA,CAApC,MAAM,uBAAuB,EAAA,KAAA,EAAA,qFCS3CV,GAAU,CACb,KAAM,yBACN,WAAY,CACV,mBAAAsrB,GACA,2BAAAC,IAEF,MAAO,CACL,MAAO,CACL,QAAS,GACT,MAAO,IACT,CACF,EACA,SAAU,CACR,KAAK,eAAc,CACrB,EACA,QAAS,CACP,MAAM,gBAAiB,CACrB,GAAI,CAEF,MAAM,IAAI,QAAQjqB,GAAW,WAAWA,EAAS,GAAI,CAAC,EACtD,KAAK,QAAU,EACjB,OAAS0Q,EAAK,CACZ,KAAK,MAAQ,OAAOA,CAAG,EACvB,KAAK,QAAU,EACjB,CACF,EACA,MAAM,SAAU,CACd,KAAK,QAAU,GACf,KAAK,MAAQ,KACb,MAAM,KAAK,eAAc,CAC3B,CACF,CACF,EA3FO/R,GAAA,CAAA,MAAM,2BAA2B,YAKhB,MAAM,mCAKH,MAAM,SACxBG,GAAA,CAAA,MAAM,aAAa,wGAX1B,OAAAI,EAAA,EAAAC,EAoDM,MApDNR,GAoDM,CAnDJY,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAkC,UAA9B,4BAAyB,EAAA,GAC7BG,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAiG,IAAA,CAA9F,MAAM,iBAAiB,EAAC,qEAAkE,EAAA,GAGlF+R,EAAA,SAAXjS,IAAAC,EAEM,MAFNP,GAEM,CADJS,EAA8B6qB,CAAA,KAIhB/Y,EAAA,OAAhBjS,IAAAC,EAGM,MAHNN,GAGM,CAFJO,EAAsC,IAAtCN,GAAsCsS,EAAZD,EAAA,KAAK,EAAA,CAAA,EAC/B/R,EAAiE,SAAA,CAAxD,4BAAO6R,EAAA,SAAAA,EAAA,QAAA,GAAAI,CAAA,GAAS,MAAM,qBAAoB,OAAK,UAI1DlS,EAmCM,MAAAJ,GAAA,CAjCJM,EAKE8qB,EAAA,CAJA,cAAY,QACX,iBAAgB,GACjB,OAAO,KACP,OAAO,qxCCiQVzrB,GAAU,CACb,KAAM,mBACN,MAAO,CACL,MAAO,CACL,WAAY,OACZ,QAAS,GACT,MAAO,KACP,SAAU,KACV,YAAa,KACb,cAAe,CAAC,OAAQ,OAAQ,OAAQ,QAAS,OAAQ,KAAK,CAChE,CACF,EACA,QAAS,CACP,MAAM,cAAe,CACnB,GAAK,KAAK,WAEV,MAAK,QAAU,GACf,KAAK,MAAQ,KACb,KAAK,SAAW,KAEhB,GAAI,CACF,QAAQ,IAAI,iCAAiC,KAAK,UAAU,KAAK,EACjE,KAAK,SAAW,MAAM+O,GAAgB,uBAAuB,KAAK,UAAU,EAExE,KAAK,SAAS,QAChB,KAAK,MAAQ,KAAK,SAAS,MAG/B,OAASiD,EAAK,CACZ,KAAK,MAAQA,EAAI,QACjB,QAAQ,MAAM,eAAgBA,CAAG,CACnC,QAAA,CACE,KAAK,QAAU,EACjB,EACF,EAEA,eAAevF,EAAQ,CACrB,GAAI,CAACA,EAAQ,MAAO,UAEpB,MAAMgK,EAAiB,CAAC,MAAO,WAAY,cAAc,EACnDC,EAAiB,CAAC,OAAQ,YAAY,EAG5C,OAAID,EAAe,SAAShK,CAAM,EAAU,UACxCiK,EAAe,SAASjK,CAAM,EAAU,UACrC,SACT,EAEA,WAAWif,EAAY,CACrB,OAAKA,EACE,IAAI,KAAKA,CAAU,EAAE,eAAe,OAAO,EAD1B,KAE1B,EAEA,MAAM,iBAAkB,CACtB,KAAK,YAAc3c,GAAgB,eACrC,EAEA,YAAa,CACXA,GAAgB,WAAU,EAC1BA,GAAgB,gBAAe,EAC/B,KAAK,YAAc,KACnB,MAAM,yBAAyB,CACjC,GAGF,SAAU,CAER,KAAK,aAAY,CACnB,CACF,EA5VO9O,GAAA,CAAA,MAAM,oBAAoB,EAMxBC,GAAA,CAAA,MAAM,eAAe,EACnBC,GAAA,CAAA,MAAM,cAAc,kBAkBpBE,GAAA,CAAA,MAAM,gBAAgB,sCAcT,MAAM,6BAKR,MAAM,2BAKS,MAAM,mBAGhCsU,GAAA,CAAA,MAAM,iBAAiB,EAErBF,GAAA,CAAA,MAAM,mBAAmB,EAEvBzB,GAAA,CAAA,MAAM,SAAS,EAEbC,GAAA,CAAA,MAAM,wBAAwB,EAE5BC,GAAA,CAAA,MAAM,mBAAmB,EAW3BC,GAAA,CAAA,MAAM,wBAAwB,EAE5BC,GAAA,CAAA,MAAM,mBAAmB,EAW3BC,GAAA,CAAA,MAAM,wBAAwB,EAE5BC,GAAA,CAAA,MAAM,mBAAmB,EAW3BC,GAAA,CAAA,MAAM,wBAAwB,EAE5BC,GAAA,CAAA,MAAM,mBAAmB,EAOvBC,GAAA,CAAA,MAAM,iBAAiB,EAS/BC,GAAA,CAAA,MAAM,mBAAmB,EAEvBC,GAAA,CAAA,MAAM,eAAe,EAEnBC,GAAA,CAAA,MAAM,wBAAwB,EAE5BC,GAAA,CAAA,MAAM,mBAAmB,EAOvBC,GAAA,CAAA,MAAM,iBAAiB,EAQ3BC,GAAA,CAAA,MAAM,wBAAwB,EAE5BC,GAAA,CAAA,MAAM,mBAAmB,EAOvBC,GAAA,CAAA,MAAM,iBAAiB,EAQ3BC,GAAA,CAAA,MAAM,wBAAwB,EAE5BC,GAAA,CAAA,MAAM,mBAAmB,EAOvBC,GAAA,CAAA,MAAM,iBAAiB,EAS/BC,GAAA,CAAA,MAAM,mBAAmB,EAEvBC,GAAA,CAAA,MAAM,WAAW,EACfqX,GAAA,CAAA,MAAM,gBAAgB,EAEpBC,GAAA,CAAA,MAAM,mBAAmB,EAOvBC,GAAA,CAAA,MAAM,iBAAiB,EAU/BC,GAAA,CAAA,MAAM,mBAAmB,EAEvBC,GAAA,CAAA,MAAM,gBAAgB,EAEpBC,GAAA,CAAA,MAAM,gBAAgB,EAEpBC,GAAA,CAAA,MAAM,mBAAmB,YAOvB,MAAM,WAOVC,GAAA,CAAA,MAAM,gBAAgB,EAEpBC,GAAA,CAAA,MAAM,mBAAmB,EAOvBC,GAAA,CAAA,MAAM,iBAAiB,EAQ3BC,GAAA,CAAA,MAAM,gBAAgB,EAEpBC,GAAA,CAAA,MAAM,mBAAmB,EAOvBC,GAAA,CAAA,MAAM,iBAAiB,EAYjCC,GAAA,CAAA,MAAM,UAAU,kCAKM,MAAM,cAI9BC,GAAA,CAAA,MAAM,eAAe,YAKA,MAAM,uMAzQlC,OAAAjsB,EAAA,EAAAC,EAiRM,MAjRNR,GAiRM,eAhRJS,EAGM,MAAA,CAHD,MAAM,eAAa,CACtBA,EAA6B,UAAzB,sBAAoB,EACxBA,EAAuC,SAApC,kCAAgC,QAGrCA,EA+BM,MA/BNR,GA+BM,CA9BJQ,EAgBM,MAhBNP,GAgBM,CAfJU,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAiC,QAAA,CAA1B,IAAI,QAAQ,EAAC,QAAK,EAAA,KACzBA,EAME,QAAA,CALA,GAAG,8CACM+R,EAAA,WAAUmK,GACnB,KAAK,OACL,YAAY,uBACX,QAAK/b,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA6rB,GAAA9P,GAAQnK,EAAA,YAAcF,EAAA,aAAY,EAAA,CAAA,OAAA,CAAA,mBAH/BE,EAAA,UAAU,IAKrB/R,EAMS,SAAA,CALN,uBAAO6R,EAAA,aAAY,GACnB,SAAQ,CAAGE,EAAA,YAAcA,EAAA,QAC1B,MAAM,cAEHA,EAAA,QAAO,SAAA,IAAA,EAAA,EAAArS,EAAA,IAIdM,EAWM,MAXNL,GAWM,CAVJQ,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAkB,YAAZ,QAAK,EAAA,UACXD,EAQSmU,EAAA,KAAAC,EAPUpC,EAAA,cAAVtM,QADT1F,EAQS,SAAA,CANN,IAAK0F,EACL,QAAKyW,IAAA,CAAEnK,EAAA,WAAatM,EAAQoM,EAAA,cAAY,EACxC,SAAUE,EAAA,QACX,MAAM,gBAEHtM,CAAM,EAAA,EAAA7F,EAAA,cAKJmS,EAAA,SAAXjS,IAAAC,EAGM,MAHNF,GAGM,aAFJG,EAAmC,MAAA,CAA9B,MAAM,iBAAiB,EAAA,KAAA,EAAA,GAC5BA,EAAuD,IAAA,KAApD,wBAAqBgS,EAAGD,EAAA,UAAU,EAAG,cAAW,CAAA,cAG1CA,EAAA,OAAXjS,IAAAC,EAGM,MAHN+T,GAGM,CAFJ3T,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAa,UAAT,OAAI,EAAA,GACRA,EAAkB,WAAZ+R,EAAA,KAAK,EAAA,CAAA,cAGFA,EAAA,WAAaA,EAAA,SAAxBjS,IAAAC,EAiNM,MAjNNsS,GAiNM,CAhNJrS,EAAkC,KAAA,KAA9B,KAAEgS,EAAGD,EAAA,UAAU,EAAG,UAAO,CAAA,EAE7B/R,EAqMM,MArMNiU,GAqMM,CAnMJjU,EA0DM,MA1DN+T,GA0DM,CAzDJ5T,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAgC,UAA5B,0BAAuB,EAAA,GAC3BA,EAuDM,MAvDNsS,GAuDM,CArDJtS,EAUM,MAVNuS,GAUM,CATJpS,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAmB,UAAf,aAAU,EAAA,GACdA,EAOM,MAPNwS,GAOM,CANJxS,EAEM,MAAA,CAFD,MAAK6T,EAAA,CAAC,aAAqBhC,EAAA,gBAAepE,EAAAsE,EAAA,SAAS,MAAT,YAAAtE,EAAc,MAAM,CAAA,CAAA,OAC9DC,EAAAqE,EAAA,SAAS,MAAT,YAAArE,EAAc,QAAK,KAAA,EAAA,CAAA,EAExB1N,EAEM,MAAA,CAFD,MAAK6T,EAAA,CAAC,eAAuBhC,EAAA,gBAAewE,EAAAtE,EAAA,SAAS,MAAT,YAAAsE,EAAc,MAAM,CAAA,CAAA,OAChEC,EAAAvE,EAAA,SAAS,MAAT,YAAAuE,EAAc,SAAM,KAAA,EAAA,CAAA,MAM7BtW,EAUM,MAVNyS,GAUM,CATJtS,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAqB,UAAjB,eAAY,EAAA,GAChBA,EAOM,MAPN0S,GAOM,CANJ1S,EAEM,MAAA,CAFD,MAAK6T,EAAA,CAAC,aAAqBhC,EAAA,gBAAe2E,EAAAzE,EAAA,SAAS,OAAT,YAAAyE,EAAe,MAAM,CAAA,CAAA,OAC/DD,EAAAxE,EAAA,SAAS,OAAT,YAAAwE,EAAe,QAAK,KAAA,EAAA,CAAA,EAEzBvW,EAEM,MAAA,CAFD,MAAK6T,EAAA,CAAC,eAAuBhC,EAAA,gBAAe6E,EAAA3E,EAAA,SAAS,OAAT,YAAA2E,EAAe,MAAM,CAAA,CAAA,OACjED,EAAA1E,EAAA,SAAS,OAAT,YAAA0E,EAAe,SAAM,KAAA,EAAA,CAAA,MAM9BzW,EAUM,MAVN2S,GAUM,CATJxS,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAqB,UAAjB,eAAY,EAAA,GAChBA,EAOM,MAPN4S,GAOM,CANJ5S,EAEM,MAAA,CAFD,MAAK6T,EAAA,CAAC,aAAqBhC,EAAA,gBAAe+E,EAAA7E,EAAA,SAAS,OAAT,YAAA6E,EAAe,MAAM,CAAA,CAAA,OAC/DD,EAAA5E,EAAA,SAAS,OAAT,YAAA4E,EAAe,QAAK,KAAA,EAAA,CAAA,EAEzB3W,EAEM,MAAA,CAFD,MAAK6T,EAAA,CAAC,eAAuBhC,EAAA,gBAAeiF,EAAA/E,EAAA,SAAS,OAAT,YAAA+E,EAAe,MAAM,CAAA,CAAA,OACjED,EAAA9E,EAAA,SAAS,OAAT,YAAA8E,EAAe,SAAM,KAAA,EAAA,CAAA,MAM9B7W,EAaM,MAbN6S,GAaM,CAZJ1S,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAc,UAAV,QAAK,EAAA,GACTA,EAUM,MAVN8S,GAUM,CATJ9S,EAEM,MAAA,CAFD,MAAK6T,EAAA,CAAC,aAAqBhC,EAAA,gBAAemF,EAAAjF,EAAA,SAAS,QAAT,YAAAiF,EAAgB,MAAM,CAAA,CAAA,OAChED,EAAAhF,EAAA,SAAS,QAAT,YAAAgF,EAAgB,QAAK,KAAA,EAAA,CAAA,EAE1B/W,EAEM,MAAA,CAFD,MAAK6T,EAAA,CAAC,eAAuBhC,EAAA,gBAAeqF,EAAAnF,EAAA,SAAS,QAAT,YAAAmF,EAAgB,MAAM,CAAA,CAAA,OAClED,EAAAlF,EAAA,SAAS,QAAT,YAAAkF,EAAgB,SAAM,KAAA,EAAA,CAAA,EAE3BjX,EAEM,MAFN+S,GAEM,CADJ/S,EAAiE,aAA1D,UAAOgS,IAAGoF,EAAArF,WAAS,QAAT,YAAAqF,EAAgB,eAAY,KAAA,EAAA,CAAA,YAQvDpX,EAqDM,MArDNgT,GAqDM,CApDJ7S,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAA+B,UAA3B,yBAAsB,EAAA,GAC1BA,EAkDM,MAlDNiT,GAkDM,CAhDJjT,EAcM,MAdNkT,GAcM,CAbJ/S,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAgB,UAAZ,UAAO,EAAA,GACXA,EAWM,MAXNmT,GAWM,CAVJnT,EAEM,MAAA,CAFD,MAAK6T,EAAA,CAAC,aAAqBhC,EAAA,gBAAesF,EAAApF,EAAA,SAAS,yBAAT,YAAAoF,EAAiC,MAAM,CAAA,CAAA,OACjFG,EAAAvF,EAAA,SAAS,yBAAT,YAAAuF,EAAiC,QAAK,KAAA,EAAA,CAAA,EAE3CtX,EAEM,MAAA,CAFD,MAAK6T,EAAA,CAAC,eAAuBhC,EAAA,gBAAewF,EAAAtF,EAAA,SAAS,yBAAT,YAAAsF,EAAiC,MAAM,CAAA,CAAA,OACnFG,EAAAzF,EAAA,SAAS,yBAAT,YAAAyF,EAAiC,SAAM,KAAA,EAAA,CAAA,EAE5CxX,EAGM,MAHNoT,GAGM,CAFJpT,EAA8E,aAAvE,OAAIgS,IAAGuF,GAAAxF,WAAS,yBAAT,YAAAwF,GAAiC,cAAW,KAAA,EAAA,CAAA,EAC1DvX,EAA4E,aAArE,OAAIgS,IAAG0F,GAAA3F,WAAS,yBAAT,YAAA2F,GAAiC,YAAS,KAAA,EAAA,CAAA,QAM9D1X,EAcM,MAdNqT,GAcM,CAbJlT,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAiB,UAAb,WAAQ,EAAA,GACZA,EAWM,MAXNsT,GAWM,CAVJtT,EAEM,MAAA,CAFD,MAAK6T,EAAA,CAAC,aAAqBhC,EAAA,gBAAe4F,GAAA1F,EAAA,SAAS,mBAAT,YAAA0F,GAA2B,MAAM,CAAA,CAAA,OAC3EG,GAAA7F,EAAA,SAAS,mBAAT,YAAA6F,GAA2B,QAAK,KAAA,EAAA,CAAA,EAErC5X,EAEM,MAAA,CAFD,MAAK6T,EAAA,CAAC,eAAuBhC,EAAA,gBAAe8F,GAAA5F,EAAA,SAAS,mBAAT,YAAA4F,GAA2B,MAAM,CAAA,CAAA,OAC7EG,GAAA/F,EAAA,SAAS,mBAAT,YAAA+F,GAA2B,SAAM,KAAA,EAAA,CAAA,EAEtC9X,EAGM,MAHNuT,GAGM,CAFJvT,EAAwE,aAAjE,OAAIgS,IAAG6F,GAAA9F,WAAS,mBAAT,YAAA8F,GAA2B,cAAW,KAAA,EAAA,CAAA,EACpD7X,EAAsE,aAA/D,OAAIgS,IAAGgG,GAAAjG,WAAS,mBAAT,YAAAiG,GAA2B,YAAS,KAAA,EAAA,CAAA,QAMxDhY,EAaM,MAbNwT,GAaM,CAZJrT,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAiB,UAAb,WAAQ,EAAA,GACZA,EAUM,MAVNyT,GAUM,CATJzT,EAEM,MAAA,CAFD,MAAK6T,EAAA,CAAC,aAAqBhC,EAAA,gBAAekG,GAAAhG,EAAA,SAAS,sBAAT,YAAAgG,GAA8B,MAAM,CAAA,CAAA,OAC9EG,GAAAnG,EAAA,SAAS,sBAAT,YAAAmG,GAA8B,QAAK,KAAA,EAAA,CAAA,EAExClY,EAEM,MAAA,CAFD,MAAK6T,EAAA,CAAC,eAAuBhC,EAAA,gBAAeoG,GAAAlG,EAAA,SAAS,sBAAT,YAAAkG,GAA8B,MAAM,CAAA,CAAA,OAChFG,GAAArG,EAAA,SAAS,sBAAT,YAAAqG,GAA8B,SAAM,KAAA,EAAA,CAAA,EAEzCpY,EAEM,MAFN0T,GAEM,CADJ1T,EAAiF,aAA1E,QAAKgS,IAAGmG,GAAApG,WAAS,sBAAT,YAAAoG,GAA8B,mBAAgB,KAAA,EAAA,CAAA,YAQvEnY,EAmBM,MAnBN2T,GAmBM,CAlBJxT,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAA0B,UAAtB,oBAAiB,EAAA,GACrBA,EAgBM,MAhBN4T,GAgBM,CAfJ5T,EAcM,MAdNirB,GAcM,CAbJ9qB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAkB,UAAd,YAAS,EAAA,GACbA,EAWM,MAXNkrB,GAWM,CAVJlrB,EAEM,MAAA,CAFD,MAAK6T,EAAA,CAAC,aAAqBhC,EAAA,gBAAeyG,GAAAvG,EAAA,SAAS,SAAT,YAAAuG,GAAiB,MAAM,CAAA,CAAA,OACjED,GAAAtG,EAAA,SAAS,SAAT,YAAAsG,GAAiB,QAAK,KAAA,EAAA,CAAA,EAE3BrY,EAEM,MAAA,CAFD,MAAK6T,EAAA,CAAC,eAAuBhC,EAAA,gBAAe2G,GAAAzG,EAAA,SAAS,SAAT,YAAAyG,GAAiB,MAAM,CAAA,CAAA,OACnED,GAAAxG,EAAA,SAAS,SAAT,YAAAwG,GAAiB,SAAM,KAAA,EAAA,CAAA,EAE5BvY,EAGM,MAHNmrB,GAGM,CAFJnrB,EAAkE,aAA3D,UAAOgS,IAAG0G,GAAA3G,WAAS,SAAT,YAAA2G,GAAiB,eAAY,KAAA,EAAA,CAAA,EAC9C1Y,EAAgE,aAAzD,SAAMgS,IAAGyG,GAAA1G,WAAS,SAAT,YAAA0G,GAAiB,cAAW,KAAA,EAAA,CAAA,YAQtDzY,EAuDM,MAvDNorB,GAuDM,CAtDJjrB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAoC,UAAhC,8BAA2B,EAAA,GAC/BA,EAoDM,MApDNqrB,GAoDM,CAlDJrrB,EAaM,MAbNsrB,GAaM,CAZJnrB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAqC,UAAjC,+BAA4B,EAAA,GAChCA,EAUM,MAVNurB,GAUM,CATJvrB,EAEM,MAAA,CAFD,MAAK6T,EAAA,CAAC,aAAqBhC,EAAA,gBAAe+G,GAAA7G,EAAA,SAAS,QAAT,YAAA6G,GAAgB,MAAM,CAAA,CAAA,OAChED,GAAA5G,EAAA,SAAS,QAAT,YAAA4G,GAAgB,QAAK,KAAA,EAAA,CAAA,EAE1B3Y,EAEM,MAAA,CAFD,MAAK6T,EAAA,CAAC,eAAuBhC,EAAA,gBAAeiH,GAAA/G,EAAA,SAAS,QAAT,YAAA+G,GAAgB,MAAM,CAAA,CAAA,OAClED,GAAA9G,EAAA,SAAS,QAAT,YAAA8G,GAAgB,SAAM,KAAA,EAAA,CAAA,GAEAG,GAAAjH,EAAA,SAAS,QAAT,MAAAiH,GAAgB,OAA3ClZ,IAAAC,EAEM,MAFNksB,GAEM,CADJjsB,EAA2E,MAAA,CAAtE,MAAM,WAAY,MAAKgU,EAAA,CAAA,MAAWjC,EAAA,SAAS,MAAM,MAAK,GAAA,CAAA,2BAMjE/R,EAcM,MAdNwrB,GAcM,CAbJrrB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAuC,UAAnC,iCAA8B,EAAA,GAClCA,EAWM,MAXNyrB,GAWM,CAVJzrB,EAEM,MAAA,CAFD,MAAK6T,EAAA,CAAC,aAAqBhC,EAAA,gBAAekH,GAAAhH,EAAA,SAAS,QAAT,YAAAgH,GAAgB,MAAM,CAAA,CAAA,OAChEG,GAAAnH,EAAA,SAAS,QAAT,YAAAmH,GAAgB,QAAK,KAAA,EAAA,CAAA,EAE1BlZ,EAEM,MAAA,CAFD,MAAK6T,EAAA,CAAC,eAAuBhC,EAAA,gBAAeoH,GAAAlH,EAAA,SAAS,QAAT,YAAAkH,GAAgB,MAAM,CAAA,CAAA,OAClEG,GAAArH,EAAA,SAAS,QAAT,YAAAqH,GAAgB,SAAM,KAAA,EAAA,CAAA,EAE3BpZ,EAGM,MAHN0rB,GAGM,CAFJ1rB,EAAyD,aAAlD,QAAKgS,IAAGmH,GAAApH,WAAS,QAAT,YAAAoH,GAAgB,SAAM,KAAA,EAAA,CAAA,EACrCnZ,EAA0D,aAAnD,QAAKgS,IAAGsH,GAAAvH,WAAS,QAAT,YAAAuH,GAAgB,UAAO,KAAA,EAAA,CAAA,QAM5CtZ,EAgBM,MAhBN2rB,GAgBM,CAfJxrB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAA4B,UAAxB,sBAAmB,EAAA,GACvBA,EAaM,MAbN4rB,GAaM,CAZJ5rB,EAEM,MAAA,CAFD,MAAK6T,EAAA,CAAC,aAAqBhC,EAAA,gBAAewH,GAAAtH,EAAA,SAAS,OAAT,YAAAsH,GAAe,MAAM,CAAA,CAAA,OAC/DG,GAAAzH,EAAA,SAAS,OAAT,YAAAyH,GAAe,QAAK,KAAA,EAAA,CAAA,EAEzBxZ,EAEM,MAAA,CAFD,MAAK6T,EAAA,CAAC,eAAuBhC,EAAA,gBAAe0H,GAAAxH,EAAA,SAAS,OAAT,YAAAwH,GAAe,MAAM,CAAA,CAAA,OACjEG,GAAA3H,EAAA,SAAS,OAAT,YAAA2H,GAAe,SAAM,KAAA,EAAA,CAAA,EAE1B1Z,EAKM,MALN6rB,GAKM,CAJJ7rB,EAA4D,aAArD,QAAKgS,IAAGyH,GAAA1H,WAAS,OAAT,YAAA0H,GAAe,aAAU,KAAA,EAAA,CAAA,EACxCzZ,EAA2D,aAApD,QAAKgS,IAAG4H,GAAA7H,WAAS,OAAT,YAAA6H,GAAe,YAAS,KAAA,EAAA,CAAA,EACvC5Z,EAAyD,aAAlD,UAAOgS,IAAG2H,GAAA5H,WAAS,OAAT,YAAA4H,GAAe,QAAK,KAAA,EAAA,CAAA,EACrC3Z,EAAyD,aAAlD,UAAOgS,IAAG8H,GAAA/H,WAAS,OAAT,YAAA+H,GAAe,QAAK,KAAA,EAAA,CAAA,cAQjD9Z,EAMM,MANN8rB,GAMM,CALJ9rB,EAAoE,IAAA,KAAA,CAAjEG,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAsB,cAAd,QAAK,EAAA,GAASshB,EAAA,IAACtP,EAAGH,EAAA,WAAWE,EAAA,SAAS,WAAW,CAAA,EAAA,CAAA,IAC5D/R,EAAsE,IAAA,KAAA,CAAnEG,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAsB,cAAd,QAAK,EAAA,KAAS,IAACgS,EAAGD,EAAA,SAAS,QAAM,eAAA,EAAA,CAAA,IACnCA,EAAA,SAAS,WAAlBhS,EAAwE,IAAAmsB,GAAA,CAA/C/rB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAsB,cAAd,QAAK,EAAA,KAAS,IAACgS,EAAGD,EAAA,SAAS,KAAK,EAAA,CAAA,cACxDA,EAAA,SAAS,gBAAlBhS,EAAmF,IAAAosB,GAAA,CAArDhsB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAuB,cAAf,SAAM,EAAA,KAAS,IAACgS,EAAGD,EAAA,SAAS,UAAU,EAAA,CAAA,cACnEA,EAAA,SAAS,OAAlBjS,IAAAC,EAAyF,IAAzFqsB,GAAyF,CAA7CjsB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAoB,cAAZ,MAAG,EAAA,KAAS,IAACgS,EAAGD,EAAA,SAAS,KAAK,EAAA,CAAA,4BAItF/R,EAYM,MAZN+rB,GAYM,CAXJ5rB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAa,UAAT,OAAI,EAAA,GACRA,EAAkE,SAAA,CAAzD,uBAAO6R,EAAA,gBAAe,GAAI,MAAM,aAAY,MAAI,EACzD7R,EAA+D,SAAA,CAAtD,uBAAO6R,EAAA,WAAU,GAAI,MAAM,aAAY,QAAM,EAE3CE,EAAA,aAAXjS,IAAAC,EAMM,MANNssB,GAMM,CALJlsB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAuB,UAAnB,iBAAc,EAAA,GAClBA,EAA8D,aAAtD,KAAK,UAAU+R,EAAA,YAAY,SAAQ,KAAA,CAAA,CAAA,EAAA,CAAA,EAE3C5R,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAwB,UAApB,kBAAe,EAAA,GACnBA,EAAgE,aAAxD,KAAK,UAAU+R,EAAA,YAAY,WAAU,KAAA,CAAA,CAAA,EAAA,CAAA,iFCvJhDzS,GAAU,CACb,KAAM,gCACN,MAAO,CACL,MAAO,CACL,WAAY,OACZ,QAAS,GACT,QAAS,KACT,kBAAmB,IACrB,CACF,EACA,QAAS,CACP,MAAM,UAAW,CACf,GAAK,KAAK,WAEV,MAAK,QAAU,GACf,KAAK,QAAU,KAEf,GAAI,CAEF+O,GAAgB,YAAY,EAAK,EAGjC,KAAK,QAAU,MAAMA,GAAgB,uBAAuB,KAAK,UAAU,EAG3E,KAAK,sBAAqB,CAE5B,OAASpN,EAAO,CACd,QAAQ,MAAM,uBAAwBA,CAAK,CAC7C,QAAA,CACE,KAAK,QAAU,EACjB,EACF,EAEA,uBAAwB,CAEtB,GAAI,KAAK,kBAAmB,CAC1B,MAAMsQ,EAAY,SAAS,eAAe,sBAAsB,KAAK,UAAU,EAAE,EAC7EA,IACFA,EAAU,UAAY,GAE1B,CAGA,WAAW,IAAM,CACf,MAAMvQ,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,KAAO,kBACdA,EAAO,IAAM,mFACbA,EAAO,MAAQ,GACfA,EAAO,UAAY,KAAK,UAAU,CAChC,SAAY,KACZ,MAAS,OACT,OAAU,MACV,cAAiB,GACjB,OAAU,UAAU,KAAK,UAAU,GACnC,iBAAoB,GACpB,OAAU,KACV,WAAc,OAChB,CAAC,EAED,MAAMuQ,EAAY,SAAS,eAAe,sBAAsB,KAAK,UAAU,EAAE,EAC7EA,GACFA,EAAU,YAAYvQ,CAAM,CAEhC,EAAG,GAAG,CACR,EAEA,eAAe+K,EAAQ,CACrB,GAAI,CAACA,EAAQ,MAAO,UAEpB,MAAMgK,EAAiB,CAAC,MAAO,UAAU,EACnCC,EAAiB,CAAC,OAAQ,YAAY,EAE5C,OAAID,EAAe,SAAShK,CAAM,EAAU,UACxCiK,EAAe,SAASjK,CAAM,EAAU,UACrC,SACT,GAGF,SAAU,CACR,KAAK,SAAQ,CACf,CACF,EAzMOxM,GAAA,CAAA,MAAM,iBAAiB,EAMrBC,GAAA,CAAA,MAAM,qBAAqB,EACzBC,GAAA,CAAA,MAAM,cAAc,4BAcP,MAAM,6BAKM,MAAM,sBAG/BI,GAAA,CAAA,MAAM,iBAAiB,EAErBiU,GAAA,CAAA,MAAM,aAAa,EAEjBzB,GAAA,CAAA,MAAM,gBAAgB,EACpB4B,GAAA,CAAA,MAAM,gBAAgB,EAMtBF,GAAA,CAAA,MAAM,gBAAgB,EAMtBzB,GAAA,CAAA,MAAM,gBAAgB,EAQxBC,GAAA,CAAA,MAAM,YAAY,EAUpBC,GAAA,CAAA,MAAM,qBAAqB,EAEzBC,GAAA,CAAA,MAAM,8BAA8B,YAOxCE,GAAA,CAAA,MAAM,qBAAqB,EAEzBC,GAAA,CAAA,MAAM,kBAAkB,qEA3EnC,OAAA9S,EAAA,EAAAC,EAiHM,MAjHNR,GAiHM,eAhHJS,EAGM,MAAA,CAHD,MAAM,qBAAmB,CAC5BA,EAAe,UAAX,QAAM,EACVA,EAAiC,SAA9B,4BAA0B,QAG/BA,EAaM,MAbNR,GAaM,CAZJQ,EAWM,MAXNP,GAWM,CAVJU,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAoB,aAAb,QAAK,EAAA,KACZA,EAKE,QAAA,sCAJS+R,EAAA,WAAUmK,GACnB,KAAK,OACL,YAAY,WACX,0BAAarK,EAAA,SAAQ,EAAA,CAAA,OAAA,CAAA,mBAHbE,EAAA,UAAU,IAKrB/R,EAES,SAAA,CAFA,uBAAO6R,EAAA,SAAQ,GAAK,SAAUE,EAAA,WAClCA,EAAA,QAAO,SAAA,MAAA,EAAA,EAAArS,EAAA,MAKLqS,EAAA,SAAXjS,IAAAC,EAGM,MAHNJ,GAGM,CAAA,GAAAQ,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAFJH,EAAmC,MAAA,CAA9B,MAAM,iBAAiB,EAAA,KAAA,EAAA,EAC5BA,EAAgB,SAAb,YAAS,EAAA,gBAGH+R,EAAA,UAAYA,EAAA,SAAvBjS,IAAAC,EAsFM,MAtFNH,GAsFM,CArFJI,EAAgC,KAAA,KAAAgS,EAAzBD,EAAA,UAAU,EAAG,UAAO,CAAA,EAE3B/R,EAyCM,MAzCNH,GAyCM,CAvCJG,EA8BM,MA9BN8T,GA8BM,CA7BJ3T,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAgB,UAAZ,UAAO,EAAA,GACXA,EAmBM,MAnBNqS,GAmBM,CAlBJrS,EAKM,MALNiU,GAKM,CAJJ9T,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAyB,cAAjB,WAAQ,EAAA,GAASshB,EAAA,QAAI7T,EAAAsE,EAAA,QAAQ,QAAR,YAAAtE,EAAe,eAAiB,IAC7D,CAAA,EAAAzN,EAEO,OAAA,CAFD,MAAK6T,EAAA,CAAC,SAAiBhC,EAAA,gBAAenE,EAAAqE,EAAA,QAAQ,QAAR,YAAArE,EAAe,MAAM,CAAA,CAAA,MAC5D2I,EAAAtE,EAAA,QAAQ,QAAR,YAAAsE,EAAe,MAAM,EAAA,CAAA,IAG5BrW,EAKM,MALN+T,GAKM,CAJJ5T,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAyB,cAAjB,WAAQ,EAAA,GAASshB,EAAA,QAAIhL,EAAAvE,EAAA,QAAQ,QAAR,YAAAuE,EAAe,eAAiB,IAC7D,CAAA,EAAAtW,EAEO,OAAA,CAFD,MAAK6T,EAAA,CAAC,SAAiBhC,EAAA,gBAAe2E,EAAAzE,EAAA,QAAQ,QAAR,YAAAyE,EAAe,MAAM,CAAA,CAAA,MAC5DD,EAAAxE,EAAA,QAAQ,QAAR,YAAAwE,EAAe,MAAM,EAAA,CAAA,IAG5BvW,EAKM,MALNsS,GAKM,CAJJnS,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAsB,cAAd,QAAK,EAAA,GAASshB,EAAA,QAAI5K,EAAA3E,EAAA,QAAQ,OAAR,YAAA2E,EAAc,eAAiB,IACzD,CAAA,EAAA1W,EAEO,OAAA,CAFD,MAAK6T,EAAA,CAAC,SAAiBhC,EAAA,gBAAe4E,EAAA1E,EAAA,QAAQ,OAAR,YAAA0E,EAAc,MAAM,CAAA,CAAA,MAC3DG,EAAA7E,EAAA,QAAQ,OAAR,YAAA6E,EAAc,MAAM,EAAA,CAAA,MAK7B5W,EAMM,MANNuS,GAMM,CALJpS,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAa,UAAT,OAAI,EAAA,GACRA,EAAqD,IAAA,KAAA,CAAlDG,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAqB,cAAb,OAAI,EAAA,KAAS,IAACgS,EAAGD,EAAA,QAAQ,UAAU,EAAA,CAAA,IAC9C/R,EAA6F,IAAA,KAAA,CAA1FG,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAsB,cAAd,QAAK,EAAA,GAASshB,EAAA,KAAEtP,GAAG2E,EAAA5E,EAAA,QAAQ,aAAR,YAAA4E,EAAoB,GAAG,EAAG,OAAI3E,GAAG8E,EAAA/E,EAAA,QAAQ,aAAR,YAAA+E,EAAoB,GAAG,EAAA,CAAA,IACtF9W,EAA+D,IAAA,KAAA,CAA5DG,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAsB,cAAd,QAAK,EAAA,GAASshB,EAAA,KAAEtP,GAAG6E,EAAA9E,EAAA,QAAQ,aAAR,YAAA8E,EAAoB,MAAM,EAAA,CAAA,IACxD7W,EAAgE,IAAA,KAAA,CAA7DG,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAsB,cAAd,QAAK,EAAA,GAASshB,EAAA,KAAEtP,GAAGgF,EAAAjF,EAAA,QAAQ,QAAR,YAAAiF,EAAe,YAAY,EAAA,CAAA,QAK7DhX,EAKM,MALNwS,GAKM,CAJJrS,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAyB,UAArB,mBAAgB,EAAA,GACpBA,EAEM,MAFNyS,GAEM,CADJzS,EAA+E,MAAA,CAA1E,MAAM,qBAAsB,yBAA0B+R,EAAA,UAAU,qBAM3E/R,EAsCM,MAtCN2S,GAsCM,CArCJxS,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAe,UAAX,SAAM,EAAA,GACVA,EAmCM,MAnCN4S,GAmCM,CAlCJ5S,EAiCQ,QAAA,KAAA,eAhCNA,EAQQ,QAAA,KAAA,CAPNA,EAMK,KAAA,KAAA,CALHA,EAAW,UAAP,IAAE,EACNA,EAAc,UAAV,OAAK,EACTA,EAAoB,UAAhB,aAAW,EACfA,EAAW,UAAP,IAAE,EACNA,EAAW,UAAP,IAAE,UAGVA,EAsBQ,QAAA,KAAA,CArBNA,EAMK,KAAA,KAAA,CALHG,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAgB,UAAZ,UAAO,EAAA,GACXA,EAA6C,UAAzC,IAACgS,IAAG+E,EAAAhF,UAAQ,QAAR,YAAAgF,EAAe,QAAK,KAAA,EAAA,CAAA,EAC5B5W,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAqB,UAAjB,eAAY,EAAA,GAChBG,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAU,UAAN,IAAC,EAAA,GACLA,EAAoC,KAAA,KAAAgS,GAA7BkF,EAAAnF,EAAA,QAAQ,QAAR,YAAAmF,EAAe,MAAM,EAAA,CAAA,IAE9BlX,EAMK,KAAA,KAAA,CALHG,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAgB,UAAZ,UAAO,EAAA,GACXA,EAA4C,KAAA,KAAAgS,IAArCiF,EAAAlF,EAAA,QAAQ,QAAR,YAAAkF,EAAe,QAAK,KAAA,EAAA,CAAA,EAC3B9W,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAqB,UAAjB,eAAY,EAAA,GAChBG,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAU,UAAN,IAAC,EAAA,GACLA,EAAoC,KAAA,KAAAgS,GAA7BoF,EAAArF,EAAA,QAAQ,QAAR,YAAAqF,EAAe,MAAM,EAAA,CAAA,IAE9BpX,EAMK,KAAA,KAAA,CALHG,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAa,UAAT,OAAI,EAAA,GACRA,EAA2C,KAAA,KAAAgS,IAApCmF,EAAApF,EAAA,QAAQ,OAAR,YAAAoF,EAAc,QAAK,KAAA,EAAA,CAAA,EAC1BhX,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAqB,UAAjB,eAAY,EAAA,GAChBG,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAU,UAAN,IAAC,EAAA,GACLA,EAAmC,KAAA,KAAAgS,GAA5BsF,EAAAvF,EAAA,QAAQ,OAAR,YAAAuF,EAAc,MAAM,EAAA,CAAA,yFCsEtChY,GAAU,CACb,KAAM,sBACN,MAAO,CACL,MAAO,CACL,cAAe,GACf,QAAS,GACT,eAAgB,GAChB,MAAO,KACP,eAAgB,KAChB,WAAY,OACZ,YAAa,CAAA,EACb,kBAAmB,CAAA,EACnB,WAAY,KAGZ,YAAa,CAAC,OAAQ,OAAQ,QAAS,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,MAAM,CAC/F,CACF,EAEA,MAAM,SAAU,CACd,MAAM,KAAK,iBAAgB,CAC7B,EAEA,QAAS,CACP,MAAM,YAAa,CACjB,GAAI,CACFgqB,GAAgB,iBAAiB,KAAK,aAAa,EACnD,MAAM,KAAK,iBAAgB,EAC3B,KAAK,eAAiB,OAAO,KAAK,cAAgB,SAAW,MAAM,KACnE,WAAW,IAAM,CAAE,KAAK,eAAiB,IAAK,EAAG,GAAI,CACvD,OAASroB,EAAO,CACd,KAAK,MAAQ,WAAWA,EAAM,OAAO,GACrC,WAAW,IAAM,CAAE,KAAK,MAAQ,IAAK,EAAG,GAAI,CAC9C,CACF,EAEA,MAAM,kBAAmB,CACvB,GAAI,CAAC,KAAK,WAAW,OAAQ,CAC3B,KAAK,MAAQ,UACb,WAAW,IAAM,CAAE,KAAK,MAAQ,IAAK,EAAG,GAAI,EAC5C,MACF,CAEA,KAAK,QAAU,GACf,KAAK,eAAiB,QAAQ,KAAK,UAAU,WAC7C,KAAK,MAAQ,KAEb,GAAI,CACF,MAAMI,EAAY,KAAK,IAAG,EACpBmnB,EAAW,MAAMc,GAAgB,kBAAkB,KAAK,WAAW,aAAa,EAChFhoB,EAAW,KAAK,IAAG,EAAKD,EAGxBG,EAAS,CACb,GAAGgnB,EACH,SAAAlnB,EACA,UAAW,IAAI,KAAI,EAAG,YAAW,CACnC,EAGA,KAAK,YAAc,CAACE,EAAQ,GAAG,KAAK,YAAY,OAAO0O,GAAKA,EAAE,SAAW1O,EAAO,MAAM,CAAC,EAEvF,KAAK,eAAiB,QAAQA,EAAO,MAAM,UAAUF,CAAQ,MAC7D,WAAW,IAAM,CAAE,KAAK,eAAiB,IAAK,EAAG,GAAI,EAErD,MAAM,KAAK,iBAAgB,CAC7B,OAASL,EAAO,CACd,KAAK,MAAQ,YAAYA,EAAM,OAAO,GACtC,WAAW,IAAM,CAAE,KAAK,MAAQ,IAAK,EAAG,GAAI,CAC9C,QAAA,CACE,KAAK,QAAU,GACf,KAAK,eAAiB,EACxB,CACF,EAEA,MAAM,kBAAmB,CACvB,KAAK,QAAU,GACf,KAAK,eAAiB,UAAU,KAAK,YAAY,MAAM,cACvD,KAAK,MAAQ,KAEb,GAAI,CACF,MAAMI,EAAY,KAAK,IAAG,EACpBsnB,EAAc,MAAMW,GAAgB,iBAAiB,KAAK,WAAW,EACrEhoB,EAAW,KAAK,IAAG,EAAKD,EAGxB0B,EAAU,CAAA,EAChB,SAAW,CAAC0C,EAAQ+iB,CAAQ,IAAKG,EAC/B5lB,EAAQ,KAAK,CACX,GAAGylB,EACH,SAAUlnB,EAAWqnB,EAAY,KACjC,UAAW,IAAI,KAAI,EAAG,YAAW,EAClC,EAGH,KAAK,YAAc5lB,EACnB,KAAK,eAAiB,UAAUA,EAAQ,MAAM,aAAazB,CAAQ,MACnE,WAAW,IAAM,CAAE,KAAK,eAAiB,IAAK,EAAG,GAAI,EAErD,MAAM,KAAK,iBAAgB,CAC7B,OAASL,EAAO,CACd,KAAK,MAAQ,WAAWA,EAAM,OAAO,GACrC,WAAW,IAAM,CAAE,KAAK,MAAQ,IAAK,EAAG,GAAI,CAC9C,QAAA,CACE,KAAK,QAAU,GACf,KAAK,eAAiB,EACxB,CACF,EAEA,MAAM,YAAa,CACjB,KAAK,QAAU,GACf,KAAK,eAAiB,YAEtB,GAAI,CACFqoB,GAAgB,WAAU,EAC1B,MAAM,KAAK,iBAAgB,EAC3B,KAAK,eAAiB,QACtB,WAAW,IAAM,CAAE,KAAK,eAAiB,IAAK,EAAG,GAAI,CACvD,OAASroB,EAAO,CACd,KAAK,MAAQ,WAAWA,EAAM,OAAO,GACrC,WAAW,IAAM,CAAE,KAAK,MAAQ,IAAK,EAAG,GAAI,CAC9C,QAAA,CACE,KAAK,QAAU,GACf,KAAK,eAAiB,EACxB,CACF,EAEA,MAAM,aAAc,CAClB,KAAK,QAAU,GACf,KAAK,eAAiB,YAEtB,GAAI,CACF,MAAMO,EAAS,MAAM8nB,GAAgB,YAAY,KAAK,WAAW,EACjE,MAAM,KAAK,iBAAgB,EAE3B,KAAK,eAAiB,WAAW9nB,EAAO,gBAAgB,SAASA,EAAO,QAAQ,KAChF,WAAW,IAAM,CAAE,KAAK,eAAiB,IAAK,EAAG,GAAI,CACvD,OAASP,EAAO,CACd,KAAK,MAAQ,WAAWA,EAAM,OAAO,GACrC,WAAW,IAAM,CAAE,KAAK,MAAQ,IAAK,EAAG,GAAI,CAC9C,QAAA,CACE,KAAK,QAAU,GACf,KAAK,eAAiB,EACxB,CACF,EAEA,MAAM,kBAAmB,CACvB,GAAI,CACF,KAAK,WAAaqoB,GAAgB,cAAa,CACjD,OAASroB,EAAO,CACd,QAAQ,KAAK,6BAA8BA,CAAK,CAClD,CACF,EAEA,mBAAmBO,EAAQ,CACzB,OAAIA,EAAO,YAAc,GAAY,kBACjCA,EAAO,YAAc,GAAY,oBACjCA,EAAO,YAAc,GAAY,iBAC9B,eACT,EAEA,wBAAwBsnB,EAAY,CAClC,OAAIA,GAAc,GAAY,OAC1BA,GAAc,GAAY,SAC1BA,GAAc,GAAY,MACvB,MACT,EAEA,gBAAgBzG,EAAW,CACzB,OAAKA,EACE,IAAI,KAAKA,CAAS,EAAE,eAAe,OAAO,EAD1B,KAEzB,CACF,CACF,EA7VO9iB,GAAA,CAAA,MAAM,yBAAyB,EAO7BC,GAAA,CAAA,MAAM,eAAe,EACnBC,GAAA,CAAA,MAAM,eAAe,EAqBrBC,GAAA,CAAA,MAAM,eAAe,kEAerB2S,GAAA,CAAA,MAAM,cAAc,YAUtB,MAAM,0BACW,MAAM,qBAIR,MAAM,mBAGG,MAAM,qBAM9B,MAAM,eAEJI,GAAA,CAAA,MAAM,YAAY,EAChBC,GAAA,CAAA,MAAM,WAAW,EAIjBC,GAAA,CAAA,MAAM,WAAW,YAIjB,MAAM,uBAQV,MAAM,mBAEJG,GAAA,CAAA,MAAM,cAAc,EAOhBC,GAAA,CAAA,MAAM,eAAe,EAOrBC,GAAA,CAAA,MAAM,gBAAgB,EACpBC,GAAA,CAAA,MAAM,cAAc,EAIpBC,GAAA,CAAA,MAAM,cAAc,EAIpBC,GAAA,CAAA,MAAM,cAAc,YAIpB,MAAM,0BAIN,MAAM,gBAMRG,GAAA,CAAA,MAAM,eAAe,EACnBC,GAAA,CAAA,MAAM,aAAa,EAGnBC,GAAA,CAAA,MAAM,WAAW,YASzB,MAAM,sBAEJE,GAAA,CAAA,MAAM,kBAAkB,2BA7IjC,OAAA5T,EAAA,EAAAC,EA0KM,MA1KNR,GA0KM,eAzKJS,EAGM,MAAA,CAHD,MAAM,UAAQ,CACjBA,EAAgB,UAAZ,SAAO,EACXA,EAAyD,SAAtD,oDAAkD,QAIvDA,EA4CM,MA5CNR,GA4CM,CA3CJQ,EAmBM,MAnBNP,GAmBM,CAlBJO,EAQQ,QAAA,KAAA,GAPNA,EAKE,QAAA,CAJA,KAAK,QACJ,MAAO,wCACC+R,EAAA,cAAamK,GACrB,6BAAQrK,EAAA,YAAAA,EAAA,WAAA,GAAAI,CAAA,mBADAF,EAAA,aAAa,oBAEtB,2BAEJ,EAAA,KACA/R,EAQQ,QAAA,KAAA,GAPNA,EAKE,QAAA,CAJA,KAAK,QACJ,MAAO,wCACC+R,EAAA,cAAamK,GACrB,6BAAQrK,EAAA,YAAAA,EAAA,WAAA,GAAAI,CAAA,mBADAF,EAAA,aAAa,oBAEtB,iCAEJ,EAAA,OAGF/R,EAaM,MAbNN,GAaM,CAZJM,EAES,SAAA,CAFA,4BAAO6R,EAAA,kBAAAA,EAAA,iBAAA,GAAAI,CAAA,GAAmB,SAAUF,EAAA,SAAS,WAEtD,EAAApS,EAAA,EACAK,EAES,SAAA,CAFA,4BAAO6R,EAAA,kBAAAA,EAAA,iBAAA,GAAAI,CAAA,GAAmB,SAAUF,EAAA,SAAS,SAEtD,EAAAnS,EAAA,EACAI,EAES,SAAA,CAFA,4BAAO6R,EAAA,YAAAA,EAAA,WAAA,GAAAI,CAAA,GAAa,SAAUF,EAAA,SAAS,SAEhD,EAAAlS,EAAA,EACAG,EAES,SAAA,CAFA,4BAAO6R,EAAA,aAAAA,EAAA,YAAA,GAAAI,CAAA,GAAc,SAAUF,EAAA,SAAS,SAEjD,EAAA+B,EAAA,IAGF9T,EAMM,MANNqS,GAMM,GALJrS,EAIE,QAAA,sCAHS+R,EAAA,WAAUmK,GACnB,YAAY,oBACX,+BAAarK,EAAA,kBAAAA,EAAA,iBAAA,GAAAI,CAAA,EAAgB,CAAA,OAAA,CAAA,mBAFrBF,EAAA,UAAU,QAQOA,EAAA,SAAWA,EAAA,OAASA,EAAA,gBAApDjS,IAAAC,EAWM,MAXNkU,GAWM,CAVOlC,EAAA,SAAXjS,IAAAC,EAGM,MAHNgU,GAGM,eAFJ/T,EAA6B,OAAA,CAAvB,MAAM,SAAS,EAAA,KAAA,EAAA,GAAQshB,EAAA,MAC1BvP,EAAA,cAAc,EAAA,CAAA,cAERA,EAAA,OAAXjS,EAAA,EAAAC,EAEM,MAFNuS,GAAgC,QACzBP,EAAA,KAAK,EAAA,CAAA,YAEDA,EAAA,gBAAXjS,EAAA,EAAAC,EAEM,MAFNwS,GAA2C,QACpCR,EAAA,cAAc,EAAA,CAAA,wBAKQA,EAAA,YAA/BjS,IAAAC,EAgBM,MAhBNyS,GAgBM,CAfJrS,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAa,UAAT,OAAI,EAAA,GACRA,EAaM,MAbNyS,GAaM,CAZJzS,EAGM,MAHN0S,GAGM,CAFJvS,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAkB,aAAX,MAAG,EAAA,GACVA,EAAoE,OAAA,KAAAgS,EAA3DD,EAAA,WAAW,OAAI,UAAA,SAAA,MAAA,EAAA,CAAA,IAE1B/R,EAGM,MAHN2S,GAGM,CAFJxS,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAoB,aAAb,QAAK,EAAA,GACZA,EAA8C,OAAA,KAAAgS,EAArCD,EAAA,WAAW,aAAW,CAAA,EAAA,CAAA,IAEJA,EAAA,WAAW,OAAI,UAA5CjS,IAAAC,EAGM,MAHN6S,GAGM,CAFJzS,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAsB,aAAf,UAAO,EAAA,GACdA,EAAwD,OAAA,KAAAgS,EAA/CD,EAAA,WAAW,eAAc,IAAA,GAAA,EAAA,CAAA,4BAMLA,EAAA,YAAY,OAAM,GAArDjS,IAAAC,EAiDM,MAjDN8S,GAiDM,CAhDJ1S,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAa,UAAT,OAAI,EAAA,GACRA,EA8CM,MA9CN8S,GA8CM,QA7CJ/S,EA4CMmU,EAAA,KAAAC,EA3CapC,EAAA,YAAVvQ,QADTzB,EA4CM,MAAA,CA1CH,IAAKyB,EAAO,OACb,MAAKqS,EAAA,CAAC,cACEhC,EAAA,mBAAmBrQ,CAAM,CAAA,CAAA,IAEjCxB,EAKM,MALN+S,GAKM,CAJJ/S,EAA4B,KAAA,KAAAgS,EAArBxQ,EAAO,MAAM,EAAA,CAAA,EACpBxB,EAEO,OAAA,CAFD,SAAM,mBAA2B6R,0BAAwBrQ,EAAO,UAAU,CAAA,CAAA,CAC1E,EAAAwQ,GAAAxQ,EAAO,WAAU,KAAQ,YAAa,KAC5C,CAAA,IAGFxB,EAqBM,MArBNgT,GAqBM,CApBJhT,EAGM,MAHNiT,GAGM,CAFJ9S,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAsB,aAAf,UAAO,EAAA,GACdA,EAAgC,OAAA,KAAAgS,EAAvBxQ,EAAO,MAAM,EAAA,CAAA,IAExBxB,EAGM,MAHNkT,GAGM,CAFJ/S,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAwB,aAAjB,YAAS,EAAA,GAChBA,EAAkC,OAAA,KAAAgS,EAAzBxQ,EAAO,QAAQ,EAAA,CAAA,IAE1BxB,EAGM,MAHNmT,GAGM,CAFJhT,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAwB,aAAjB,YAAS,EAAA,GAChBA,EAAkC,OAAA,KAAAgS,EAAzBxQ,EAAO,QAAQ,EAAA,CAAA,IAEMA,EAAO,oBAAvC1B,IAAAC,EAGM,MAHNqT,GAGM,CAFJjT,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAA0B,aAAnB,cAAW,EAAA,GAClBA,EAA4C,OAAA,KAAAgS,EAAnCxQ,EAAO,kBAAkB,EAAA,CAAA,cAEJA,EAAO,SAAvC1B,IAAAC,EAGM,MAHNsT,GAGM,CAFJlT,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAuB,aAAhB,WAAQ,EAAA,GACfA,EAAiC,OAAA,KAAAgS,EAAxBxQ,EAAO,OAAO,EAAA,CAAA,gBAI3BxB,EAOM,MAPNsT,GAOM,CANJtT,EAEM,MAFNuT,GAEM,CADJvT,EAAkC,QAAA,KAAAgS,EAAxBxQ,EAAO,MAAM,EAAA,CAAA,IAEzBxB,EAEM,MAFNwT,GAEM,CADJxT,EAAwD,QAAA,KAAAgS,EAA9CH,EAAA,gBAAgBrQ,EAAO,WAAW,CAAA,EAAA,CAAA,gCAQhBuQ,EAAA,kBAAkB,OAAM,GAA9DjS,IAAAC,EA8BM,MA9BN0T,GA8BM,CA7BJtT,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAmB,UAAf,aAAU,EAAA,GACdA,EA2BM,MA3BN0T,GA2BM,CA1BJ1T,EAyBQ,QAAA,KAAA,eAxBNA,EASQ,QAAA,KAAA,CARNA,EAOK,KAAA,KAAA,CANHA,EAAe,UAAX,QAAM,EACVA,EAAwB,UAApB,iBAAe,EACnBA,EAAsB,UAAlB,eAAa,EACjBA,EAA0B,UAAtB,mBAAiB,EACrBA,EAAwB,UAApB,iBAAe,EACnBA,EAAY,UAAR,KAAG,UAGXA,EAaQ,QAAA,KAAA,QAZND,EAWKmU,EAAA,KAAAC,EAXcpC,EAAA,kBAARua,QAAXvsB,EAWK,KAAA,CAXkC,IAAKusB,EAAK,SAC/CtsB,EAA0B,KAAA,KAAAgS,EAAnBsa,EAAK,MAAM,EAAA,CAAA,EAClBtsB,EAAkC,KAAA,KAAAgS,EAA3Bsa,EAAK,QAAQ,MAAM,EAAA,CAAA,EAC1BtsB,EAAiC,KAAA,KAAAgS,EAA1Bsa,EAAK,OAAO,MAAM,EAAA,CAAA,EACzBtsB,EAAoC,KAAA,KAAAgS,EAA7Bsa,EAAK,QAAQ,QAAQ,EAAA,CAAA,EAC5BtsB,EAAmC,KAAA,KAAAgS,EAA5Bsa,EAAK,OAAO,QAAQ,EAAA,CAAA,EAC3BtsB,EAIK,KAAA,KAAA,CAHHA,EAEO,OAAA,CAFD,MAAK6T,EAAA,CAAC,kBAA0ByY,EAAK,UAAU,CAAA,KAChDA,EAAK,UAAU,EAAG,KACvB,CAAA,iGCnBXhtB,GAAU,CACb,KAAM,sBACN,MAAO,OACL,MAAO,CACL,WAAY,OACZ,QAAS,GACT,YAAa,GACb,mBAAoB,GAGpB,aAAc,CAAA,EAGd,iBAAkB,CAChB,MAAO,KACP,aAAc,MAIhB,YAAa,CACX,UAAW,UAAU,UACrB,SAAU,UAAU,SACpB,SAAU,KAAK,iBAAiB,gBAAe,EAAG,SAClD,aAAYmO,EAAA,UAAU,aAAV,YAAAA,EAAsB,gBAAiB,UACnD,OAAQ,UAAU,QAIpB,YAAa,CACX,CACE,KAAM,UACN,IAAK,mBACL,YAAa,qBACb,KAAM,UAER,CACE,KAAM,8BACN,IAAK,yCACL,YAAa,wBACb,KAAM,UAER,CACE,KAAM,aACN,IAAK,yCACL,YAAa,yBACb,KAAM,UAER,CACE,KAAM,0BACN,IAAK,0CACL,YAAa,YACb,KAAM,SAER,CACE,KAAM,aACN,IAAK,sCACL,YAAa,6BACb,KAAM,SAER,CACE,KAAM,eACN,IAAK,yBACL,YAAa,sBACb,KAAM,SAER,CACE,KAAM,gBACN,IAAK,uCACL,YAAa,6BACb,KAAM,QACR,CACF,CACF,CACF,EAEA,SAAU,CACR,gBAAiB,CACf,OAAO,KAAK,aAAa,OAAO1I,GAAKA,EAAE,SAAW,SAAS,CAC7D,EAEA,eAAgB,CACd,OAAO,KAAK,aAAa,OAAOA,GAAKA,EAAE,SAAW,QAAQ,CAC5D,EAEA,cAAe,CACb,MAAMwnB,EAAU,KAAK,eACrB,OAAIA,EAAQ,SAAW,EAAU,KAC1BA,EAAQ,OAAO,CAACxqB,EAASyqB,IAC9BA,EAAQ,aAAezqB,EAAQ,aAAeyqB,EAAUzqB,CAC1D,CACF,GAGF,QAAS,CACP,MAAM,mBAAoB,CACxB,KAAK,QAAU,GACf,KAAK,mBAAqB,GAC1B,KAAK,aAAe,CAAA,EACpB,KAAK,iBAAmB,CAAE,MAAO,KAAM,aAAc,IAAG,EAExD,GAAI,CAEF,MAAM,KAAK,eAAc,EAGzB,MAAM,KAAK,cAAa,EAExB,KAAK,mBAAqB,EAC5B,OAASd,EAAO,CACd,QAAQ,MAAM,UAAWA,CAAK,CAChC,QAAA,CACE,KAAK,QAAU,GACf,KAAK,YAAc,EACrB,CACF,EAEA,MAAM,gBAAiB,CACrB,QAAS,EAAI,EAAG,EAAI,KAAK,YAAY,OAAQ,IAAK,CAChD,MAAMuL,EAAQ,KAAK,YAAY,CAAC,EAChC,KAAK,YAAc,GAAGA,EAAM,IAAI,QAEhC,MAAMhL,EAAS,MAAM,KAAK,gBAAgBgL,EAAO,CAAC,EAClD,KAAK,aAAa,KAAKhL,CAAM,EAGzB,EAAI,KAAK,YAAY,OAAS,GAChC,MAAM,KAAK,MAAM,GAAI,CAEzB,CACF,EAEA,MAAM,gBAAgBgL,EAAO7I,EAAO,SAClC,MAAMtC,EAAY,KAAK,IAAG,EACpBG,EAAS,CACb,MAAAmC,EACA,KAAM6I,EAAM,KACZ,IAAKA,EAAM,IACX,KAAMA,EAAM,KACZ,OAAQ,UACR,aAAc,EACd,WAAY,KACZ,MAAO,KACP,UAAW,KACX,KAAM,KACN,WAAY,EACZ,WAAY,IACd,EAEA,GAAI,CAEF,MAAMC,EAAY,qDAAqD,KAAK,UAAU,yBACtF,IAAIggB,EAEAjgB,EAAM,OAAS,QAEjBigB,EAAU,GAAGjgB,EAAM,GAAG,GAAG,mBAAmBC,CAAS,CAAC,GAGtDggB,EAAU,GAAGjgB,EAAM,GAAG,GAAGC,CAAS,GAGpC,QAAQ,IAAI,WAAWD,EAAM,IAAI,IAAKigB,EAAQ,UAAU,EAAG,GAAG,EAAI,KAAK,EAEvE,MAAM/oB,EAAW,MAAM,MAAM+oB,EAAS,CACpC,OAAQ,MACR,QAAS,CACP,OAAU,mBACV,eAAgB,mBAChB,aAAc,8DAChB,EACD,EAKD,GAHAjrB,EAAO,aAAe,KAAK,IAAG,EAAKH,EACnCG,EAAO,WAAakC,EAAS,OAEzB,CAACA,EAAS,GACZ,MAAM,IAAI,MAAM,QAAQA,EAAS,MAAM,KAAKA,EAAS,UAAU,EAAE,EAGnE,MAAMpB,EAAO,MAAMoB,EAAS,KAAI,EAGhC,GAAI,CAACpB,EAAK,OAAS,CAACA,EAAK,MAAM,QAAUA,EAAK,MAAM,OAAO,SAAW,EACpE,MAAM,IAAI,MAAM,2CAA2C,EAI7D,MAAMqK,GAASe,GAAAD,EADKnL,EAAK,MAAM,OAAO,CAAC,EACZ,aAAZ,YAAAmL,EAAwB,QAAxB,YAAAC,EAAgC,GAE/C,GAAI,CAACf,GAAU,CAACA,EAAO,MACrB,MAAM,IAAI,MAAM,wCAAwC,EAG1D,MAAM+f,EAAS/f,EAAO,MAAM,OAAOkB,GAASA,IAAU,IAAI,EAE1DrM,EAAO,OAAS,UAChBA,EAAO,KAAOc,EACdd,EAAO,WAAakrB,EAAO,OAC3BlrB,EAAO,WAAa,CAClB,IAAK,KAAK,IAAI,GAAGkrB,CAAM,EAAE,QAAQ,CAAC,EAClC,IAAK,KAAK,IAAI,GAAGA,CAAM,EAAE,QAAQ,CAAC,CACpC,EAEA,QAAQ,IAAI,KAAKlgB,EAAM,IAAI,OAAQ,CACjC,aAAchL,EAAO,aACrB,WAAYA,EAAO,WACnB,WAAYA,EAAO,WACpB,CAEH,OAASP,EAAO,CACdO,EAAO,OAAS,SAChBA,EAAO,aAAe,KAAK,IAAG,EAAKH,EACnCG,EAAO,MAAQP,EAAM,QAGjBA,EAAM,QAAQ,SAAS,MAAM,GAAKA,EAAM,QAAQ,SAAS,MAAM,EACjEO,EAAO,UAAY,aACVP,EAAM,QAAQ,SAAS,KAAK,EACrCO,EAAO,UAAY,eACVP,EAAM,QAAQ,SAAS,KAAK,EACrCO,EAAO,UAAY,YACVP,EAAM,QAAQ,SAAS,KAAK,EACrCO,EAAO,UAAY,YACVP,EAAM,QAAQ,SAAS,KAAK,EACrCO,EAAO,UAAY,eACVP,EAAM,QAAQ,SAAS,iBAAiB,GAAKA,EAAM,QAAQ,SAAS,OAAO,EACpFO,EAAO,UAAY,gBACVP,EAAM,QAAQ,SAAS,wBAAwB,EACxDO,EAAO,UAAY,oBACVP,EAAM,QAAQ,SAAS,SAAS,EACzCO,EAAO,UAAY,gBAEnBA,EAAO,UAAY,gBAGrB,QAAQ,IAAI,KAAKgL,EAAM,IAAI,OAAQ,CACjC,UAAWhL,EAAO,UAClB,MAAOA,EAAO,MACd,aAAcA,EAAO,aACtB,CACH,CAEA,OAAOA,CACT,EAEA,MAAM,eAAgB,2BACpB,KAAK,YAAc,yBAGnB,GAAI,CACF,MAAMmrB,EAAW,qDAAqD,KAAK,UAAU,yBAC/EC,EAAgB,MAAM,MAAMD,CAAQ,EAE1C,GAAIC,EAAc,GAAI,CAEpB,MAAMC,IAAapW,GAAAC,GAAAH,GAAAC,GAAAF,GAAAD,GAAA3I,GAAAD,GADD,MAAMmf,EAAc,KAAI,GACb,QAAV,YAAAnf,EAAiB,SAAjB,YAAAC,EAA0B,KAA1B,YAAA2I,EAA8B,aAA9B,YAAAC,EAA0C,QAA1C,YAAAE,EAAkD,KAAlD,YAAAD,EAAsD,QAAtD,YAAAG,EAA6D,OAAO3R,GAAKA,IAAM,QAA/E,YAAA0R,EAAsF,SAAU,EAEnH,KAAK,iBAAiB,MAAQ,CAC5B,OAAQ,UACR,WAAAoW,CACF,CACF,KACE,OAAM,IAAI,MAAM,QAAQD,EAAc,MAAM,EAAE,CAElD,OAAS3rB,EAAO,CACd,KAAK,iBAAiB,MAAQ,CAC5B,OAAQ,SACR,MAAOA,EAAM,OACf,CACF,CAGA,GAAI,CACF,MAAM6rB,EAAW,6DAA6D,KAAK,UAAU,0BACvFC,EAAgB,MAAM,MAAMD,CAAQ,EAE1C,GAAIC,EAAc,GAAI,CAEpB,MAAMC,GAAUlW,GAAAH,GAAAC,GADE,MAAMmW,EAAc,KAAI,GAChB,eAAV,YAAAnW,EAAwB,SAAxB,YAAAD,EAAiC,KAAjC,YAAAG,EAAqC,eAErD,KAAK,iBAAiB,aAAe,CACnC,OAAQ,UACR,OAAQkW,GAAA,YAAAA,EAAS,OACjB,SAAUA,GAAA,YAAAA,EAAS,QACrB,CACF,KACE,OAAM,IAAI,MAAM,QAAQD,EAAc,MAAM,EAAE,CAElD,OAAS9rB,EAAO,CACd,KAAK,iBAAiB,aAAe,CACnC,OAAQ,SACR,MAAOA,EAAM,OACf,CACF,CACF,EAEA,eAAeiO,EAAQ,CACrB,OAAQA,EAAM,CACZ,IAAK,UAAW,MAAO,UACvB,IAAK,SAAU,MAAO,SACtB,IAAK,UAAW,MAAO,UACvB,QAAS,MAAO,SAClB,CACF,EAEA,MAAMkB,EAAI,CACR,OAAO,IAAI,QAAQxP,GAAW,WAAWA,EAASwP,CAAE,CAAC,CACvD,CACF,CACF,EArcO7Q,GAAA,CAAA,MAAM,kBAAkB,EAMtBC,GAAA,CAAA,MAAM,eAAe,EACnBC,GAAA,CAAA,MAAM,cAAc,4BASP,MAAM,WAMrBG,GAAA,CAAA,MAAM,eAAe,EAEnBC,GAAA,CAAA,MAAM,YAAY,EAOdiU,GAAA,CAAA,MAAM,cAAc,EAOpBzB,GAAA,CAAA,MAAM,eAAe,YAKC,MAAM,2BAKP,MAAM,mBAUjCC,GAAA,CAAA,MAAM,iBAAiB,EAErBC,GAAA,CAAA,MAAM,eAAe,EACnBC,GAAA,CAAA,MAAM,eAAe,wBASrBG,GAAA,CAAA,MAAM,eAAe,mCAazBI,GAAA,CAAA,MAAM,cAAc,EAElBC,GAAA,CAAA,MAAM,iBAAiB,YAUC,MAAM,mBAE9BE,GAAA,CAAA,MAAM,wBAAwB,YACK,MAAM,oCASP,MAAM,0BAStCG,GAAA,CAAA,MAAM,sBAAsB,YAES,MAAM,kCAUlC,MAAM,6EAhI1B,OAAAvT,EAAA,EAAAC,EA4IM,MA5INR,GA4IM,eA3IJS,EAGM,MAAA,CAHD,MAAM,eAAa,CACtBA,EAAwC,UAApC,iCAA+B,EACnCA,EAAgD,SAA7C,2CAAyC,QAG9CA,EAQM,MARNR,GAQM,CAPJQ,EAMM,MANNP,GAMM,CALJU,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAoB,aAAb,QAAK,EAAA,KACZA,EAAiD,QAAA,sCAAjC+R,EAAA,WAAUmK,GAAE,YAAY,uBAAxBnK,EAAA,UAAU,IAC1B/R,EAES,SAAA,CAFA,4BAAO6R,EAAA,mBAAAA,EAAA,kBAAA,GAAAI,CAAA,GAAoB,SAAUF,EAAA,WACzCA,EAAA,QAAO,SAAA,QAAA,EAAA,EAAArS,EAAA,MAKLqS,EAAA,SAAXjS,IAAAC,EAGM,MAHNJ,GAGM,aAFJK,EAA2B,MAAA,CAAtB,MAAM,SAAS,EAAA,KAAA,EAAA,GACpBA,EAAgC,IAAA,KAA7B,QAAKgS,EAAGD,EAAA,WAAW,EAAG,MAAG,CAAA,cAI9B/R,EAiCM,MAjCNJ,GAiCM,CAhCJO,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAA2B,UAAvB,qBAAkB,EAAA,GACtBA,EA8BM,MA9BNH,GA8BM,EA7BJC,EAAA,EAAA,EAAAC,EA4BMmU,EAAA,KAAAC,EA3BsBpC,EAAA,aAAY,CAA9BvQ,EAAQmC,IAAK,oBADvB5D,EA4BM,MAAA,CA1BH,IAAK4D,EACN,SAAM,aACEkO,iBAAerQ,EAAO,MAAM,CAAA,CAAA,IAEpCxB,EAKM,MALN8T,GAKM,CAJJ9T,EAAiD,KAAA,KAA7C,SAAMgS,EAAGrO,KAAY,KAAEqO,EAAGxQ,EAAO,IAAI,EAAA,CAAA,EACzCxB,EAEO,OAAA,CAFD,SAAM,eAAuB6R,iBAAerQ,EAAO,MAAM,CAAA,CAAA,CAC1D,EAAAwQ,EAAAxQ,EAAO,MAAM,EAAA,CAAA,IAIpBxB,EAcM,MAdNqS,GAcM,CAbJrS,EAA6C,IAAA,KAAA,CAA1CG,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAqB,cAAb,OAAI,EAAA,KAAS,IAACgS,EAAGxQ,EAAO,GAAG,EAAA,CAAA,IACtCxB,EAAyD,IAAA,KAAA,CAAtDG,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAsB,cAAd,QAAK,EAAA,GAASshB,EAAA,IAACtP,EAAGxQ,EAAO,YAAY,EAAG,KAAE,CAAA,IACrDxB,EAAwD,IAAA,KAAA,CAArDG,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAyB,cAAjB,WAAQ,EAAA,KAAS,IAACgS,EAAGxQ,EAAO,UAAU,EAAA,CAAA,IAEtCA,EAAO,OAAlB1B,IAAAC,EAGM,MAHNkU,GAGM,CAFJjU,EAAoD,IAAA,KAAA,CAAjDG,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAsB,cAAd,QAAK,EAAA,KAAS,IAACgS,EAAGxQ,EAAO,SAAS,EAAA,CAAA,IAC7CxB,EAAgD,IAAA,KAAA,CAA7CG,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAsB,cAAd,QAAK,EAAA,KAAS,IAACgS,EAAGxQ,EAAO,KAAK,EAAA,CAAA,gBAGhCA,EAAO,MAAlB1B,IAAAC,EAGM,MAHNgU,GAGM,CAFJ/T,EAAoD,IAAA,KAAA,CAAjDG,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAH,EAAqB,cAAb,OAAI,EAAA,KAAS,IAACgS,EAAGxQ,EAAO,UAAU,EAAA,CAAA,IAC7CxB,EAA2F,IAAA,KAAA,CAAxFG,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAsB,cAAd,QAAK,EAAA,GAASshB,EAAA,KAAEtP,GAAGvE,EAAAjM,EAAO,aAAP,YAAAiM,EAAmB,GAAG,EAAG,OAAIuE,GAAGtE,EAAAlM,EAAO,aAAP,YAAAkM,EAAmB,GAAG,EAAA,CAAA,kCAQ9F1N,EAsBM,MAtBNsS,GAsBM,CArBJnS,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAkC,UAA9B,4BAAyB,EAAA,GAC7BA,EAmBM,MAnBNuS,GAmBM,CAlBJvS,EAOM,MAPNwS,GAOM,CANJrS,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAA2B,UAAvB,qBAAkB,EAAA,GACtBA,EAIM,MAAA,CAJD,MAAK6T,EAAA,CAAC,cAAsBhC,EAAA,gBAAepE,EAAAsE,EAAA,iBAAiB,QAAjB,YAAAtE,EAAwB,MAAM,CAAA,CAAA,IAC5EzN,EAAyE,IAAA,KAAA,CAAtEG,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAoB,cAAZ,MAAG,EAAA,GAASshB,EAAA,IAACtP,IAAGtE,EAAAqE,EAAA,iBAAiB,QAAjB,YAAArE,EAAwB,SAAM,KAAA,EAAA,CAAA,KAChD2I,EAAAtE,EAAA,iBAAiB,QAAjB,MAAAsE,EAAwB,WAAjCtW,EAAmG,IAAA0S,GAAA,CAA3DtS,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAoB,cAAZ,MAAG,EAAA,GAASshB,EAAA,IAACtP,EAAGD,EAAA,iBAAiB,MAAM,KAAK,EAAA,CAAA,eACnFuE,EAAAvE,EAAA,iBAAiB,QAAjB,MAAAuE,EAAwB,gBAAjCvW,EAA8G,IAAA2S,GAAA,CAAjEvS,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAqB,cAAb,OAAI,EAAA,GAASshB,EAAA,IAACtP,EAAGD,EAAA,iBAAiB,MAAM,UAAU,EAAA,CAAA,oBAI3G/R,EAQM,MARN2S,GAQM,CAPJxS,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAiC,UAA7B,2BAAwB,EAAA,GAC5BA,EAKM,MAAA,CALD,MAAK6T,EAAA,CAAC,cAAsBhC,EAAA,gBAAe2E,EAAAzE,EAAA,iBAAiB,eAAjB,YAAAyE,EAA+B,MAAM,CAAA,CAAA,IACnFxW,EAAgF,IAAA,KAAA,CAA7EG,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAoB,cAAZ,MAAG,EAAA,GAASshB,EAAA,IAACtP,IAAGuE,EAAAxE,EAAA,iBAAiB,eAAjB,YAAAwE,EAA+B,SAAM,KAAA,EAAA,CAAA,KACvDG,EAAA3E,EAAA,iBAAiB,eAAjB,MAAA2E,EAA+B,WAAxC3W,EAAiH,IAAA6S,GAAA,CAAlEzS,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAoB,cAAZ,MAAG,EAAA,GAASshB,EAAA,IAACtP,EAAGD,EAAA,iBAAiB,aAAa,KAAK,EAAA,CAAA,eACjG0E,EAAA1E,EAAA,iBAAiB,eAAjB,MAAA0E,EAA+B,YAAxC1W,EAAuH,IAAA8S,GAAA,CAAvE1S,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAwB,cAAhB,UAAO,EAAA,GAASshB,EAAA,IAACtP,EAAGD,EAAA,iBAAiB,aAAa,MAAM,EAAA,CAAA,eACvG6E,EAAA7E,EAAA,iBAAiB,eAAjB,MAAA6E,EAA+B,cAAxC7W,EAA6H,IAAA+S,GAAA,CAA3E3S,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAA0B,cAAlB,YAAS,EAAA,GAASshB,EAAA,IAACtP,EAAGD,EAAA,iBAAiB,aAAa,QAAQ,EAAA,CAAA,wBAO9H/R,EASM,MATN+S,GASM,CARJ5S,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAkB,UAAd,YAAS,EAAA,GACbA,EAMM,MANNgT,GAMM,CALJhT,EAAyD,IAAA,KAAA,CAAtDG,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAsB,cAAd,QAAK,EAAA,KAAS,IAACgS,EAAGD,EAAA,YAAY,SAAS,EAAA,CAAA,IAClD/R,EAAsD,IAAA,KAAA,CAAnDG,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAoB,cAAZ,MAAG,EAAA,KAAS,IAACgS,EAAGD,EAAA,YAAY,QAAQ,EAAA,CAAA,IAC/C/R,EAAsD,IAAA,KAAA,CAAnDG,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAoB,cAAZ,MAAG,EAAA,KAAS,IAACgS,EAAGD,EAAA,YAAY,QAAQ,EAAA,CAAA,IAC/C/R,EAA0D,IAAA,KAAA,CAAvDG,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAsB,cAAd,QAAK,EAAA,KAAS,IAACgS,EAAGD,EAAA,YAAY,UAAU,EAAA,CAAA,IACnD/R,EAAkE,IAAA,KAAA,CAA/DG,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAsB,cAAd,QAAK,EAAA,KAAS,IAACgS,EAAGD,EAAA,YAAY,OAAM,IAAA,GAAA,EAAA,CAAA,QAKxCA,EAAA,oBAAXjS,IAAAC,EA4CM,MA5CNkT,GA4CM,CA3CJ9S,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAmB,UAAf,aAAU,EAAA,GACdA,EAyCM,MAzCNkT,GAyCM,CAxCOrB,EAAA,eAAe,OAAM,GAAhC/R,IAAAC,EAOM,MAPNoT,GAOM,CANJnT,EAA0E,KAAA,KAAtE,cAAWgS,EAAGH,EAAA,eAAe,MAAM,EAAG,IAACG,EAAGD,EAAA,aAAa,MAAM,EAAG,IAAC,CAAA,EACrE/R,EAIK,KAAA,KAAA,QAHHD,EAEKmU,EAAA,KAAAC,EAFetC,EAAA,eAATrF,QAAXzM,EAEK,KAAA,CAFgC,IAAKyM,EAAM,SAC3CA,EAAM,IAAI,EAAG,cAAYA,EAAM,YAAY,EAAG,MACnD,CAAA,wBAIOqF,EAAA,cAAc,OAAM,GAA/B/R,IAAAC,EAOM,MAPNqT,GAOM,CANJpT,EAAyE,KAAA,KAArE,cAAWgS,EAAGH,EAAA,cAAc,MAAM,EAAG,IAACG,EAAGD,EAAA,aAAa,MAAM,EAAG,IAAC,CAAA,EACpE/R,EAIK,KAAA,KAAA,QAHHD,EAEKmU,EAAA,KAAAC,EAFetC,EAAA,cAATrF,QAAXzM,EAEK,KAAA,CAF+B,IAAKyM,EAAM,KAC1C,EAAAwF,EAAAxF,EAAM,IAAI,EAAG,MAAGwF,EAAGxF,EAAM,SAAS,EAAG,KAAEwF,EAAGxF,EAAM,KAAK,EAAA,CAAA,wBAK9DxM,EAqBM,MArBNqT,GAqBM,CApBJlT,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAkB,UAAd,YAAS,EAAA,GACF6R,EAAA,eAAe,SAAM,GAAhC/R,IAAAC,EAQM,MARNuT,GAQM,CAAA,GAAAnT,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAA,4cAENL,IAAAC,EAQM,MARNwT,GAQM,eAPJvT,EAA6B,IAAA,KAAA,CAA1BA,EAAsB,cAAd,OAAK,QAChBA,EAKK,KAAA,KAAA,CAJHA,EAAgD,KAAA,KAA5C,kBAAegS,GAAG2E,EAAA9E,EAAA,eAAA,YAAA8E,EAAc,IAAI,EAAA,CAAA,EACxCxW,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAsB,UAAlB,gBAAa,EAAA,GACjBG,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAiB,UAAb,WAAQ,EAAA,GACZG,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAwB,UAApB,kBAAe,EAAA,yFCqC5BV,GAAU,CACb,KAAM,6BACN,MAAO,CACL,MAAO,CACL,QAAS,GACT,QAAS,GACT,gBAAiB,GACjB,iBAAkB,KAClB,YAAa,CAAA,EACb,YAAa,CACX,kBAAmB,GACnB,mBAAoB,GACpB,YAAa,EACf,CACF,CACF,EACA,MAAM,SAAU,CACd,MAAM,KAAK,eACb,EACA,QAAS,CACP,MAAM,eAAgB,CACpB,KAAK,QAAU,GACf,GAAI,CACF,KAAK,iBAAmB,MAAM+P,GAA6B,oBAAmB,CAChF,OAASpO,EAAO,CACd,QAAQ,MAAM,4BAA6BA,CAAK,EAChD,MAAM,WAAaA,EAAM,OAAO,CAClC,QAAA,CACE,KAAK,QAAU,EACjB,CACF,EAEA,MAAM,gBAAiB,CACrB,GAAK,QAAQ,0BAA0B,EAIvC,GAAI,CAIF,MAAM,SAAS,EACf,MAAM,KAAK,eACb,OAASA,EAAO,CACd,MAAM,WAAaA,EAAM,OAAO,CAClC,CACF,EAEA,MAAM,iBAAkB,CACtB,KAAK,QAAU,GACf,KAAK,YAAc,GAEnB,MAAMgsB,EAAc,CAAC,OAAQ,OAAQ,MAAM,EAE3C,GAAI,CACF,UAAWxnB,KAAUwnB,EAAa,CAChC,MAAM5rB,EAAY,KAAK,MAEvB,GAAI,CACF,MAAMiB,EAAO,MAAM+M,GAA6B,uBAAuB5J,CAAM,EACvEoL,EAAW,KAAK,IAAG,EAAKxP,EAE9B,KAAK,YAAY,KAAK,CACpB,OAAAoE,EACA,QAAS,GACT,KAAAnD,EACA,OAAQA,EAAK,OACb,SAAU,GAAGuO,CAAQ,IACvB,CAAC,CACH,OAAS5P,EAAO,CACd,KAAK,YAAY,KAAK,CACpB,OAAAwE,EACA,QAAS,GACT,MAAOxE,EAAM,QACb,SAAU,GAAG,KAAK,IAAG,EAAKI,CAAS,IACrC,CAAC,CACH,CACF,CACF,QAAA,CACE,KAAK,QAAU,EACjB,CACF,EAEA,mBAAoB,CAClB,MAAM6rB,EAAS,KAAK,YAAY,YAAc,GAAK,GAAK,IAExD7d,GAA6B,eAAe,CAC1C,kBAAmB,KAAK,YAAY,kBACpC,mBAAoB,KAAK,YAAY,mBACrC,kBAAmB6d,CACrB,CAAC,EAED,QAAQ,IAAI,uBAAwB,KAAK,WAAW,CACtD,EAEA,WAAWlC,EAAY,CACrB,OAAKA,EACE,IAAI,KAAKA,CAAU,EAAE,eAAe,OAAO,EAD1B,KAE1B,EAEA,YAAYmC,EAAO,CACjB,GAAIA,IAAU,EAAG,MAAO,MACxB,MAAMjlB,EAAI,KACJklB,EAAQ,CAAC,IAAK,KAAM,IAAI,EACxBppB,EAAI,KAAK,MAAM,KAAK,IAAImpB,CAAK,EAAI,KAAK,IAAIjlB,CAAC,CAAC,EAClD,OAAO,YAAYilB,EAAQ,KAAK,IAAIjlB,EAAGlE,CAAC,GAAG,QAAQ,CAAC,CAAC,EAAI,IAAMopB,EAAMppB,CAAC,CACxE,CACF,CACF,EAvROzE,GAAA,CAAA,MAAM,oBAAoB,EAOxBC,GAAA,CAAA,MAAM,gBAAgB,EAGpBC,GAAA,CAAA,MAAM,aAAa,EAGfC,GAAA,CAAA,MAAM,eAAe,YAO2B,MAAM,kBASxDE,GAAA,CAAA,MAAM,uBAAuB,EAM3BC,GAAA,CAAA,MAAM,gBAAgB,EAQxBiU,GAAA,CAAA,MAAM,uBAAuB,EAM3BzB,GAAA,CAAA,MAAM,gBAAgB,EAU5B4B,GAAA,CAAA,MAAM,iBAAiB,EAGrBF,GAAA,CAAA,MAAM,cAAc,4CAoBC,MAAM,uBAG3BtB,GAAA,CAAA,MAAM,kBAAkB,EACtBC,GAAA,CAAA,MAAM,YAAY,EAWlBC,GAAA,CAAA,MAAM,YAAY,EAWlBC,GAAA,CAAA,MAAM,YAAY,YAcQ,MAAM,wBAGlCE,GAAA,CAAA,MAAM,cAAc,EAOhBC,GAAA,CAAA,MAAM,eAAe,EAClBC,GAAA,CAAA,MAAM,QAAQ,EACdC,GAAA,CAAA,MAAM,QAAQ,EACdC,GAAA,CAAA,MAAM,WAAW,YAGA,MAAM,2BAInB,MAAM,gCAU6B,MAAM,mBAGpDI,GAAA,CAAA,MAAM,cAAc,mEA3J7B,OAAAxT,EAAA,EAAAC,EAqKM,MArKNR,GAqKM,eApKJS,EAGM,MAAA,CAHD,MAAM,kBAAgB,CACzBA,EAAiB,UAAb,UAAQ,EACZA,EAAqB,SAAlB,gBAAc,QAInBA,EAiDM,MAjDNR,GAiDM,CAhDJW,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAc,UAAV,QAAK,EAAA,GAETA,EA6CM,MA7CNP,GA6CM,CA3CJO,EAcM,MAAA,CAdD,SAAM,cAAa,CAAA,WAAwB0N,GAAAD,EAAAsE,qBAAA,YAAAtE,EAAkB,cAAlB,YAAAC,EAA+B,UAAS,CAAA,IACtF1N,EAKM,MALNN,GAKM,CAJJS,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAc,UAAV,QAAK,EAAA,GACTA,EAEO,OAAA,CAFD,SAAM,gBAAuBsW,GAAAD,EAAAtE,qBAAA,YAAAsE,EAAkB,cAAlB,MAAAC,EAA+B,UAAS,UAAA,OAAA,CAAA,MACtEC,GAAAC,EAAAzE,EAAA,mBAAA,YAAAyE,EAAkB,cAAlB,MAAAD,EAA+B,UAAS,KAAA,KAAA,EAAA,CAAA,KAIpCE,GAAAC,EAAA3E,EAAA,mBAAA,YAAA2E,EAAkB,cAAlB,MAAAD,EAA+B,WAA1C3W,IAAAC,EAKM,MALNJ,GAKM,CAJJK,EAA+E,IAAA,KAAA,CAA5EG,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAsB,cAAd,QAAK,EAAA,GAASshB,EAAA,MAAIvP,EAAA,iBAAiB,YAAY,QAAQ,MAAM,EAAA,CAAA,IACxE/R,EAAyE,IAAA,KAAA,CAAtEG,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAoB,cAAZ,MAAG,EAAA,GAASshB,EAAA,IAACtP,EAAGD,EAAA,iBAAiB,YAAY,UAAU,EAAA,CAAA,IAClE/R,EAAqE,IAAA,KAAA,CAAlEG,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAoB,cAAZ,MAAG,EAAA,GAASshB,EAAA,IAACtP,EAAGD,EAAA,iBAAiB,YAAY,MAAM,EAAA,CAAA,IAC9D/R,EAAuF,IAAA,KAAA,CAApFG,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAsB,cAAd,QAAK,EAAA,GAASshB,EAAA,MAAIzP,EAAA,WAAWE,mBAAiB,YAAY,UAAU,CAAA,EAAA,CAAA,oBAKnF/R,EAWM,MAXNJ,GAWM,eAVJI,EAGM,MAAA,CAHD,MAAM,iBAAe,CACxBA,EAAa,UAAT,MAAI,EACRA,EAA4C,OAAA,CAAtC,MAAM,sBAAsB,EAAC,IAAE,QAGvCA,EAIM,MAJNH,GAIM,CAHJG,EAAgF,IAAA,KAAA,CAA7EG,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAsB,cAAd,QAAK,EAAA,GAASshB,EAAA,QAAI3K,GAAAC,EAAA7E,EAAA,mBAAA,YAAA6E,EAAkB,QAAlB,YAAAD,EAAyB,iBAAmB,MAAG,CAAA,IAC5E3W,EAAsF,IAAA,KAAA,CAAnFG,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAsB,cAAd,QAAK,EAAA,GAASshB,EAAA,QAAIzK,GAAAC,EAAA/E,EAAA,mBAAA,YAAA+E,EAAkB,QAAlB,YAAAD,EAAyB,uBAAyB,MAAG,CAAA,IAClF7W,EAAuF,IAAA,KAAA,CAApFG,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAqB,cAAb,OAAI,EAAA,GAASshB,EAAA,MAAIzP,EAAA,cAAYkF,GAAAC,EAAAjF,qBAAA,YAAAiF,EAAkB,QAAlB,YAAAD,EAAyB,YAAS,CAAA,CAAA,EAAA,CAAA,QAK9E/W,EAWM,MAXN8T,GAWM,eAVJ9T,EAGM,MAAA,CAHD,MAAM,iBAAe,CACxBA,EAAa,UAAT,MAAI,EACRA,EAA4C,OAAA,CAAtC,MAAM,sBAAsB,EAAC,IAAE,QAGvCA,EAIM,MAJNqS,GAIM,CAHJrS,EAA8E,IAAA,KAAA,CAA3EG,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAsB,cAAd,QAAK,EAAA,GAASshB,EAAA,QAAIrK,GAAAC,EAAAnF,EAAA,mBAAA,YAAAmF,EAAkB,WAAlB,YAAAD,EAA4B,aAAe,KAAE,CAAA,kBAC1EjX,EAAgC,IAAA,KAAA,CAA7BA,EAAoB,cAAZ,KAAG,IAAS,OAAK,sBAC5BA,EAAmC,IAAA,KAAA,CAAhCA,EAAsB,cAAd,OAAK,IAAS,QAAM,gBAOvCA,EAoBM,MApBNiU,GAoBM,CAnBJ9T,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAa,UAAT,OAAI,EAAA,GAERA,EAgBM,MAhBN+T,GAgBM,CAfJ/T,EAES,SAAA,CAFA,uBAAO6R,EAAA,cAAa,GAAI,MAAM,sBAAuB,SAAUE,EAAA,WACnEA,EAAA,QAAO,SAAA,MAAA,EAAA,EAAAO,EAAA,EAGZtS,EAES,SAAA,CAFA,uBAAO6R,EAAA,eAAc,GAAI,MAAM,uBAAsB,UAE9D,EAEA7R,EAES,SAAA,CAFA,uBAAO6R,EAAA,gBAAe,GAAI,MAAM,mBAAoB,SAAUE,EAAA,WAClEA,EAAA,QAAO,SAAA,OAAA,EAAA,EAAAQ,EAAA,EAGZvS,EAES,SAAA,CAFA,QAAKG,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA+b,GAAEnK,EAAA,gBAAe,CAAIA,EAAA,iBAAiB,MAAM,2BACrDA,EAAA,gBAAe,OAAA,MAAA,EAAA,CAAA,MAMbA,EAAA,iBAAXjS,IAAAC,EAqCM,MArCNyS,GAqCM,CApCJrS,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAe,UAAX,SAAM,EAAA,GAEVA,EAiCM,MAjCNyS,GAiCM,CAhCJzS,EASM,MATN0S,GASM,CARJ1S,EAOQ,QAAA,KAAA,GANNA,EAIE,QAAA,CAHA,KAAK,WACI,sBAAAG,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA+b,GAAAnK,EAAA,YAAY,kBAAiBmK,GACrC,6BAAQrK,EAAA,mBAAAA,EAAA,kBAAA,GAAAI,CAAA,eADA,CAAAob,EAAAtb,EAAA,YAAY,iBAAiB,oBAEtC,cAEJ,EAAA,OAGF/R,EASM,MATN2S,GASM,CARJ3S,EAOQ,QAAA,KAAA,GANNA,EAIE,QAAA,CAHA,KAAK,WACI,sBAAAG,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA+b,GAAAnK,EAAA,YAAY,mBAAkBmK,GACtC,6BAAQrK,EAAA,mBAAAA,EAAA,kBAAA,GAAAI,CAAA,eADA,CAAAob,EAAAtb,EAAA,YAAY,kBAAkB,oBAEvC,cAEJ,EAAA,OAGF/R,EASM,MATN4S,GASM,CARJzS,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAA8B,aAAvB,kBAAe,EAAA,KACtBA,EAME,QAAA,CALA,KAAK,SACW,sBAAAG,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA+b,GAAAnK,EAAA,YAAY,YAAWmK,GACtC,6BAAQrK,EAAA,mBAAAA,EAAA,kBAAA,GAAAI,CAAA,GACT,IAAI,IACJ,IAAI,qBAHYF,EAAA,YAAY,mBAApB,CAAA,OAAR,EAAwC,qBAUrCA,EAAA,YAAY,OAAM,GAA7BjS,IAAAC,EA2BM,MA3BN8S,GA2BM,CA1BJ1S,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAa,UAAT,OAAI,EAAA,GAERA,EAuBM,MAvBN8S,GAuBM,EAtBJhT,EAAA,EAAA,EAAAC,EAqBMmU,EAAA,KAAAC,EApBsBpC,EAAA,YAAW,CAA7BvQ,EAAQmC,IAAK,wBADvB5D,EAqBM,MAAA,CAnBH,IAAK4D,EACN,MAAKkQ,EAAA,CAAC,mBAAkB,CAAA,QACHrS,EAAO,QAAO,MAAA,CAAYA,EAAO,OAAO,CAAA,CAAA,IAE7DxB,EAIM,MAJN+S,GAIM,CAHJ/S,EAA+C,OAA/CgT,GAA+ChB,EAAvBxQ,EAAO,MAAM,EAAA,CAAA,EACrCxB,EAA+C,OAA/CiT,GAA+CjB,EAAvBxQ,EAAO,MAAM,EAAA,CAAA,EACrCxB,EAAoD,OAApDkT,GAAoDlB,EAAzBxQ,EAAO,QAAQ,EAAA,CAAA,IAGjCA,EAAO,OAAlB1B,EAAA,EAAAC,EAEM,MAFNoT,GAEMnB,EADDxQ,EAAO,KAAK,EAAA,CAAA,IAGjB1B,IAAAC,EAIM,MAJNqT,GAIM,CAHJpT,EAAuD,OAAA,KAAjD,QAAKgS,IAAGvE,EAAAjM,EAAO,KAAK,MAAZ,YAAAiM,EAAiB,QAAK,KAAA,EAAA,CAAA,EACpCzN,EAAyD,OAAA,KAAnD,QAAKgS,IAAGtE,GAAAlM,EAAO,KAAK,QAAZ,YAAAkM,GAAmB,QAAK,KAAA,EAAA,CAAA,EACtC1N,EAA0D,OAAA,KAApD,SAAMgS,IAAGqE,GAAA7U,EAAO,KAAK,OAAZ,YAAA6U,GAAkB,SAAM,KAAA,EAAA,CAAA,gCAOpCc,GAAAC,EAAArF,EAAA,mBAAA,YAAAqF,EAAkB,cAAlB,MAAAD,EAA+B,WAA1CrX,IAAAC,EAYM,MAZNsT,GAYM,CAXJlT,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAgB,UAAZ,UAAO,EAAA,GAEXA,EAQM,MARNsT,GAQM,EAPJxT,EAAA,EAAA,EAAAC,EAMOmU,SALYnC,EAAA,iBAAiB,YAAY,QAAvCtM,QADT1F,EAMO,OAAA,CAJJ,IAAK0F,EACN,MAAM,gBAEHA,CAAM,EAAA,CAAA,yFCmHdnG,GAAU,CACb,KAAM,oBACN,MAAO,CACL,MAAO,CACL,QAAS,GACT,OAAQ,CAAA,EACR,WAAY,CAAA,EACZ,KAAM,CAAA,EACN,OAAQ,CACN,oBAAqB,CACnB,QAAS,GACT,cAAe,EACf,gBAAiB,IAEnB,SAAU,CACR,QAAS,GACT,cAAe,EACjB,GAEF,cAAe,GACf,UAAW,KACX,8BAA+B,KAC/B,uBAAwB,EACxB,+BAAgC,EAChC,mBAAoB,KACpB,YAAa,EACb,oBAAqB,EACrB,WAAY,CACV,UAAW,GACX,SAAU,EACV,eAAgB,KAChB,eAAgB,CAAA,CAClB,CACF,CACF,EACA,SAAU,CACR,iBAAkB,CAChB,OAAO,KAAK,OAAO,UAAY,MAAQ,KACzC,EACA,sBAAuB,CACrB,OAAO,KAAK,OAAO,UAAY,iBAAmB,cACpD,EACA,qBAAsB,CACpB,OAAO,KAAK,OAAO,UAAY,QAAU,OAC3C,EACA,sBAAuB,CACrB,OAAO,KAAK,OAAO,UAAY,iBAAmB,iBACpD,EACA,2BAA4B,CAC1B,OAAI,KAAK,uBAAyB,EAAU,KACxC,KAAK,uBAAyB,GAAW,KACzC,KAAK,uBAAyB,GAAW,KACtC,KACT,EACA,gCAAiC,CAC/B,OAAI,KAAK,uBAAyB,EAAU,iBACxC,KAAK,uBAAyB,GAAW,iBACtC,cACT,EACA,gBAAiB,CACf,OAAI,KAAK,YAAc,GAAW,KAC9B,KAAK,YAAc,GAAW,KAC3B,IACT,EACA,qBAAsB,CACpB,OAAI,KAAK,YAAc,GAAW,iBAC9B,KAAK,YAAc,GAAW,iBAC3B,cACT,EACA,aAAc,CACZ,MAAMyc,EAAQ,KAAK,WAAW,WAAa,EAC3C,OAAIA,EAAQ,IAAY,OACpBA,EAAQ,GAAW,KAChB,IACT,EACA,cAAe,CACb,OAAI,KAAK,WAAW,UAAkB,MAClC,KAAK,WAAW,WAAa,IAAY,MACzC,KAAK,WAAW,eAAuB,MACpC,KACT,EACA,mBAAoB,CAClB,OAAI,KAAK,WAAW,UAAkB,iBAClC,KAAK,WAAW,WAAa,IAAY,iBACzC,KAAK,WAAW,eAAuB,cACpC,cACT,GAEF,MAAM,SAAU,CACd,MAAM,KAAK,kBAAiB,EAC5B,KAAK,qBAAoB,CAC3B,EACA,eAAgB,CACV,KAAK,iBACP,cAAc,KAAK,eAAe,CAEtC,EACA,QAAS,CACP,MAAM,mBAAoB,CACxB,KAAK,QAAU,GACf,GAAI,CACF,MAAM,KAAK,cAAa,EACxB,MAAM,KAAK,8BAA6B,EACxC,MAAM,KAAK,mBAAkB,EAC7B,MAAM,KAAK,iBAAgB,EAC3B,KAAK,UAAY,IAAI,KACrB,KAAK,OAAO,WAAY,MAAM,CAChC,OAAS9a,EAAO,CACd,KAAK,OAAO,UAAUA,EAAM,OAAO,GAAI,OAAO,CAChD,QAAA,CACE,KAAK,QAAU,EACjB,CACF,EAEA,MAAM,eAAgB,CACpB,GAAI,CACF,KAAK,OAASmE,EAAoB,UAAS,EAC3C,KAAK,WAAalC,EAAiB,SAAQ,CAC7C,OAASjC,EAAO,CACd,KAAK,OAAO,WAAWA,EAAM,OAAO,GAAI,OAAO,CACjD,CACF,EAEA,MAAM,+BAAgC,CACpC,GAAI,CACF,MAAMwC,EAAW,OAAO,SAAS,WAAa,0BAA4B,yBAA2B,IAC/FC,EAAW,MAAM,MAAM,GAAGD,CAAQ,6CAA6C,EACrF,GAAIC,EAAS,GAAI,CACf,MAAMpB,EAAO,MAAMoB,EAAS,KAAI,EAChC,KAAK,8BAAgC,IAAI,KAAKpB,EAAK,WAAW,EAC9D,KAAK,wBAA0B,KAAK,IAAG,EAAK,KAAK,gCAAkC,IAAO,GAAK,IAC/F,KAAK,+BAAiC,KAAK,MAAOA,EAAK,kBAAoBA,EAAK,aAAgB,GAAG,CACrG,CACF,OAASrB,EAAO,CACd,KAAK,OAAO,eAAeA,EAAM,OAAO,GAAI,OAAO,CACrD,CACF,EAEA,MAAM,oBAAqB,CACzB,GAAI,CAEF,KAAK,mBAAqB,IAAI,KAC9B,KAAK,YAAc,EACnB,KAAK,oBAAsB,EAC7B,OAASA,EAAO,CACd,KAAK,OAAO,cAAcA,EAAM,OAAO,GAAI,OAAO,CACpD,CACF,EAEA,MAAM,kBAAmB,CACvB,GAAI,CACF,KAAK,WAAaqP,GAAmB,gBAAe,CACtD,OAASrP,EAAO,CACd,KAAK,OAAO,aAAaA,EAAM,OAAO,GAAI,OAAO,CACnD,CACF,EAEA,MAAM,eAAgB,CACpB,KAAK,QAAU,GACf,GAAI,CACF,KAAK,OAAO,WAAY,MAAM,EAC9B,MAAMqP,GAAmB,oBAAmB,EAC5C,KAAK,OAAO,SAAU,SAAS,EAC/B,MAAM,KAAK,iBAAgB,CAC7B,OAASrP,EAAO,CACd,KAAK,OAAO,WAAWA,EAAM,OAAO,GAAI,OAAO,CACjD,QAAA,CACE,KAAK,QAAU,EACjB,CACF,EAEA,MAAM,iBAAkB,CACtB,KAAK,QAAU,GACf,GAAI,CACE,KAAK,OAAO,WACdmE,EAAoB,KAAI,EACxB,KAAK,OAAO,SAAU,MAAM,IAE5BA,EAAoB,MAAK,EACzB,KAAK,OAAO,SAAU,MAAM,GAE9B,MAAM,KAAK,cAAa,CAC1B,OAASnE,EAAO,CACd,KAAK,OAAO,YAAYA,EAAM,OAAO,GAAI,OAAO,CAClD,QAAA,CACE,KAAK,QAAU,EACjB,CACF,EAEA,MAAM,cAAckD,EAAY,CAC9B,KAAK,QAAU,GACf,GAAI,CACF,KAAK,OAAO,WAAWA,CAAU,GAAI,MAAM,EAC3C,MAAMiB,EAAoB,oBAAoBjB,CAAU,EACxD,KAAK,OAAO,WAAWA,CAAU,GAAI,SAAS,EAC9C,MAAM,KAAK,cAAa,EAEpBA,IAAe,sBACjB,MAAM,KAAK,8BAA6B,EAC/BA,IAAe,YACxB,MAAM,KAAK,mBAAkB,CAEjC,OAASlD,EAAO,CACd,KAAK,OAAO,WAAWA,EAAM,OAAO,GAAI,OAAO,CACjD,QAAA,CACE,KAAK,QAAU,EACjB,CACF,EAEA,sBAAuB,CACrB,KAAK,gBAAkB,YAAY,SAAY,CAC7C,MAAM,KAAK,cAAa,EACxB,MAAM,KAAK,8BAA6B,EACxC,MAAM,KAAK,mBAAkB,EAC7B,MAAM,KAAK,iBAAgB,CAC7B,EAAG,GAAK,CACV,EAEA,OAAOqsB,EAASC,EAAQ,OAAQ,CAC9B,MAAMC,EAAM,CACV,UAAW,IAAI,KACf,MAAAD,EACA,QAAAD,CACF,EACA,KAAK,KAAK,QAAQE,CAAG,EAGjB,KAAK,KAAK,OAAS,MACrB,KAAK,KAAO,KAAK,KAAK,MAAM,EAAG,GAAG,EAEtC,EAEA,WAAY,CACV,KAAK,KAAO,CAAA,EACZ,KAAK,OAAO,QAAS,MAAM,CAC7B,EAEA,gBAAiB,CACf,KAAK,cAAgB,EACvB,EAEA,MAAM,YAAa,CACjB,GAAI,CAEF,aAAa,QAAQ,mBAAoB,KAAK,UAAU,KAAK,MAAM,CAAC,EACpE,KAAK,cAAgB,GACrB,KAAK,OAAO,QAAS,SAAS,CAChC,OAASvsB,EAAO,CACd,KAAK,OAAO,WAAWA,EAAM,OAAO,GAAI,OAAO,CACjD,CACF,EAEA,WAAW2D,EAAM,CACf,OAAKA,EACE,IAAI,KAAKA,CAAI,EAAE,eAAe,OAAO,EAD1B,KAEpB,EAEA,cAAcf,EAAU,CACtB,OAAIA,EAAW,EAAU,SACrBA,EAAW,GAAW,GAAG,KAAK,MAAMA,CAAQ,CAAC,MAC1C,GAAG,KAAK,MAAMA,EAAW,EAAE,CAAC,IACrC,EAEA,gBAAgBA,EAAU,CACxB,OAAIA,EAAW,EAAU,eACrBA,EAAW,GAAW,eACnB,aACT,EAEA,iBAAiB0pB,EAAO,CACtB,MAAO,CACL,WAAYA,IAAU,OACtB,cAAeA,IAAU,UACzB,cAAeA,IAAU,OACzB,YAAaA,IAAU,OACzB,CACF,CACF,CACF,EA1iBOhuB,GAAA,CAAA,MAAM,qBAAqB,EACzBC,GAAA,CAAA,MAAM,gBAAgB,EAEpBC,GAAA,CAAA,MAAM,gBAAgB,wDAYxBqU,GAAA,CAAA,MAAM,cAAc,EAElBzB,GAAA,CAAA,MAAM,aAAa,EACjB4B,GAAA,CAAA,MAAM,aAAa,EAMnBF,GAAA,CAAA,MAAM,cAAc,EAClBzB,GAAA,CAAA,MAAM,aAAa,EAMnBC,GAAA,CAAA,MAAM,aAAa,EAEhBC,GAAA,CAAA,MAAM,OAAO,EAEhBC,GAAA,CAAA,MAAM,aAAa,EAEhBC,GAAA,CAAA,MAAM,OAAO,EAMpBC,GAAA,CAAA,MAAM,aAAa,EACjBC,GAAA,CAAA,MAAM,aAAa,EAMnBC,GAAA,CAAA,MAAM,cAAc,EAClBC,GAAA,CAAA,MAAM,aAAa,EAEhBC,GAAA,CAAA,MAAM,OAAO,EAEhBC,GAAA,CAAA,MAAM,aAAa,EAMnBC,GAAA,CAAA,MAAM,aAAa,EAEhBC,GAAA,CAAA,MAAM,OAAO,EAEhBC,GAAA,CAAA,MAAM,aAAa,EAEhBC,GAAA,CAAA,MAAM,OAAO,EAGlBC,GAAA,CAAA,MAAM,cAAc,kBAWtBE,GAAA,CAAA,MAAM,aAAa,EACjBC,GAAA,CAAA,MAAM,aAAa,EAMnBC,GAAA,CAAA,MAAM,cAAc,EAClBC,GAAA,CAAA,MAAM,aAAa,EAEhBC,GAAA,CAAA,MAAM,OAAO,EAEhBC,GAAA,CAAA,MAAM,aAAa,EAMnBqX,GAAA,CAAA,MAAM,aAAa,EAEhBC,GAAA,CAAA,MAAM,OAAO,EAEhBC,GAAA,CAAA,MAAM,aAAa,EAEhBC,GAAA,CAAA,MAAM,OAAO,EAGlBC,GAAA,CAAA,MAAM,cAAc,kBAQtBE,GAAA,CAAA,MAAM,aAAa,EACjBU,GAAA,CAAA,MAAM,aAAa,EAMnBT,GAAA,CAAA,MAAM,cAAc,EAClBC,GAAA,CAAA,MAAM,aAAa,EAMnBC,GAAA,CAAA,MAAM,aAAa,EAEhBC,GAAA,CAAA,MAAM,OAAO,EAEhBC,GAAA,CAAA,MAAM,aAAa,EAEhBC,GAAA,CAAA,MAAM,OAAO,EAEhBC,GAAA,CAAA,MAAM,aAAa,EAEhBI,GAAA,CAAA,MAAM,OAAO,EAGlBC,GAAA,CAAA,MAAM,cAAc,kBAWtBJ,GAAA,CAAA,MAAM,aAAa,EACjBM,GAAA,CAAA,MAAM,aAAa,EAEjBoB,GAAA,CAAA,MAAM,8BAA8B,EAItCC,GAAA,CAAA,MAAM,cAAc,EAClBC,GAAA,CAAA,MAAM,aAAa,EAEhBC,GAAA,CAAA,MAAM,OAAO,EAEhBC,GAAA,CAAA,MAAM,aAAa,EAEhBC,GAAA,CAAA,MAAM,OAAO,EAEhBC,GAAA,CAAA,MAAM,aAAa,EAEhBC,GAAA,CAAA,MAAM,OAAO,EAEhBC,GAAA,CAAA,MAAM,aAAa,EAEhBC,GAAA,CAAA,MAAM,OAAO,EAGlBC,GAAA,CAAA,MAAM,cAAc,kBASxBC,GAAA,CAAA,MAAM,aAAa,EACjBC,GAAA,CAAA,MAAM,aAAa,EAInBC,GAAA,CAAA,MAAM,cAAc,YACO,MAAM,qBAGxB,MAAM,eAORC,GAAA,CAAA,MAAM,UAAU,EAChBC,GAAA,CAAA,MAAM,WAAW,EACjBC,GAAA,CAAA,MAAM,aAAa,EAO5BC,GAAA,CAAA,MAAM,cAAc,EAClBC,GAAA,CAAA,MAAM,eAAe,kBAMrBC,GAAA,CAAA,MAAM,gBAAgB,EACpBC,GAAA,CAAA,MAAM,gBAAgB,EAEpBC,GAAA,CAAA,MAAM,aAAa,EAMnBC,GAAA,CAAA,MAAM,aAAa,EAUnBC,GAAA,CAAA,MAAM,aAAa,EAQrBC,GAAA,CAAA,MAAM,gBAAgB,EAEpBC,GAAA,CAAA,MAAM,aAAa,EAMnBC,GAAA,CAAA,MAAM,aAAa,yCA/PhC,OAAArvB,EAAA,EAAAC,EA4QM,MA5QNR,GA4QM,CA3QJS,EAYM,MAZNR,GAYM,CAXJW,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAiB,UAAb,WAAQ,EAAA,GACZA,EASM,MATNP,GASM,CARJO,EAIS,SAAA,CAJA,4BAAO6R,EAAA,eAAAA,EAAA,cAAA,GAAAI,CAAA,GAAe,MAAM,oBAAqB,SAAUF,EAAA,UACtDA,EAAA,SAAZjS,EAAA,EAAAC,EAA8B,UAAT,IAAE,IACvBD,EAAA,EAAAC,EAAsB,UAAT,IAAE,mBAAO,SAExB,EAAA,UACAC,EAES,SAAA,CAFA,4BAAO6R,EAAA,iBAAAA,EAAA,gBAAA,GAAAI,CAAA,GAAkB,QAAOJ,EAAA,oBAAoB,EAAG,SAAUE,EAAA,WACrEF,EAAA,mBAAmB,EAAA,GAAAhS,EAAA,MAK5BG,EA0KM,MA1KN8T,GA0KM,CAxKJ9T,EAuBM,MAvBNqS,GAuBM,CAtBJrS,EAKM,MALNiU,GAKM,CAJJ9T,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAc,UAAV,QAAK,EAAA,GACTA,EAEM,MAAA,CAFD,MAAK6T,EAAA,CAAC,mBAA2BhC,EAAA,oBAAoB,CAAA,KACrDA,EAAA,eAAe,EAAA,CAAA,IAGtB7R,EAeM,MAfN+T,GAeM,CAdJ/T,EAKM,MALNsS,GAKM,CAJJnS,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAgC,OAAA,CAA1B,MAAM,OAAO,EAAC,QAAK,EAAA,GACzBA,EAEO,OAAA,CAFD,MAAK6T,EAAA,CAAC,QAAgBhC,EAAA,oBAAoB,CAAA,CAC3C,EAAAG,EAAAD,EAAA,OAAO,UAAS,MAAA,KAAA,EAAA,CAAA,IAGvB/R,EAGM,MAHNuS,GAGM,CAFJpS,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAgC,OAAA,CAA1B,MAAM,OAAO,EAAC,QAAK,EAAA,GACzBA,EAAsE,OAAtEwS,GAAsER,IAA/CvE,EAAAsE,EAAA,OAAO,kBAAP,YAAAtE,EAAwB,SAAM,CAAA,EAAQ,KAAE,CAAA,IAEjEzN,EAGM,MAHNyS,GAGM,CAFJtS,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAgC,OAAA,CAA1B,MAAM,OAAO,EAAC,QAAK,EAAA,GACzBA,EAAsD,OAAtD0S,GAAsDV,EAA/BH,EAAA,WAAWE,EAAA,SAAS,CAAA,EAAA,CAAA,QAMjD/R,EAmCM,MAnCN2S,GAmCM,CAlCJ3S,EAKM,MALN4S,GAKM,CAJJzS,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAa,UAAT,OAAI,EAAA,GACRA,EAEM,MAAA,CAFD,MAAK6T,EAAA,CAAC,mBAA2BhC,EAAA,8BAA8B,CAAA,KAC/DA,EAAA,yBAAyB,EAAA,CAAA,IAGhC7R,EAmBM,MAnBN6S,GAmBM,CAlBJ7S,EAGM,MAHN8S,GAGM,CAFJ3S,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAgC,OAAA,CAA1B,MAAM,OAAO,EAAC,QAAK,EAAA,GACzBA,EAA0E,OAA1E+S,GAA0Ef,EAAnDH,EAAA,WAAWE,EAAA,6BAA6B,CAAA,EAAA,CAAA,IAEjE/R,EAKM,MALNgT,GAKM,CAJJ7S,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAgC,OAAA,CAA1B,MAAM,OAAO,EAAC,QAAK,EAAA,GACzBA,EAEO,OAAA,CAFD,MAAK6T,EAAA,CAAC,QAAgBhC,EAAA,gBAAgBE,EAAA,sBAAsB,CAAA,CAAA,CAC7D,EAAAC,EAAAH,EAAA,cAAcE,EAAA,sBAAsB,CAAA,EAAA,CAAA,IAG3C/R,EAGM,MAHNiT,GAGM,CAFJ9S,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAgC,OAAA,CAA1B,MAAM,OAAO,EAAC,QAAK,EAAA,GACzBA,EAAoF,OAApFkT,GAAoFlB,EAA7DH,EAAA,YAAWnE,EAAAqE,EAAA,OAAO,cAAP,YAAArE,EAAoB,mBAAmB,CAAA,EAAA,CAAA,IAE3E1N,EAGM,MAHNmT,GAGM,CAFJhT,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAA+B,OAAA,CAAzB,MAAM,OAAO,EAAC,OAAI,EAAA,GACxBA,EAAgE,OAAhEoT,GAAgEpB,EAAzCD,EAAA,8BAA8B,EAAG,IAAC,CAAA,MAG7D/R,EAOM,MAPNqT,GAOM,CANJrT,EAES,SAAA,CAFA,uBAAO6R,EAAA,cAAa,qBAAA,GAAyB,MAAM,yBAA0B,SAAUE,EAAA,SAAS,SAEzG,EAAAuB,EAAA,gBACAtT,EAEM,MAAA,CAFD,MAAM,eAAa,CACtBA,EAAgC,aAAzB,mBAAiB,YAM9BA,EAgCM,MAhCNuT,GAgCM,CA/BJvT,EAKM,MALNwT,GAKM,CAJJrT,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAY,UAAR,MAAG,EAAA,GACPA,EAEM,MAAA,CAFD,MAAK6T,EAAA,CAAC,mBAA2BhC,EAAA,mBAAmB,CAAA,KACpDA,EAAA,cAAc,EAAA,CAAA,IAGrB7R,EAmBM,MAnBNyT,GAmBM,CAlBJzT,EAGM,MAHN0T,GAGM,CAFJvT,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAgC,OAAA,CAA1B,MAAM,OAAO,EAAC,QAAK,EAAA,GACzBA,EAA+D,OAA/D2T,GAA+D3B,EAAxCH,EAAA,WAAWE,EAAA,kBAAkB,CAAA,EAAA,CAAA,IAEtD/R,EAKM,MALN4T,GAKM,CAJJzT,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAgC,OAAA,CAA1B,MAAM,OAAO,EAAC,QAAK,EAAA,GACzBA,EAEO,OAAA,CAFD,MAAK6T,EAAA,CAAC,QAAgBhC,EAAA,gBAAgBE,EAAA,WAAW,CAAA,CAAA,CAClD,EAAAC,EAAAH,EAAA,cAAcE,EAAA,WAAW,CAAA,EAAA,CAAA,IAGhC/R,EAGM,MAHNirB,GAGM,CAFJ9qB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAgC,OAAA,CAA1B,MAAM,OAAO,EAAC,QAAK,EAAA,GACzBA,EAAyE,OAAzEkrB,GAAyElZ,EAAlDH,EAAA,YAAWwE,EAAAtE,EAAA,OAAO,cAAP,YAAAsE,EAAoB,QAAQ,CAAA,EAAA,CAAA,IAEhErW,EAGM,MAHNmrB,GAGM,CAFJhrB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAgC,OAAA,CAA1B,MAAM,OAAO,EAAC,QAAK,EAAA,GACzBA,EAAsD,OAAtDorB,GAAsDpZ,EAA/BD,EAAA,mBAAmB,EAAG,KAAE,CAAA,MAGnD/R,EAIM,MAJNqrB,GAIM,CAHJrrB,EAES,SAAA,CAFA,uBAAO6R,EAAA,cAAa,UAAA,GAAc,MAAM,yBAA0B,SAAUE,EAAA,SAAS,SAE9F,EAAAuZ,EAAA,MAKJtrB,EAmCM,MAnCNurB,GAmCM,CAlCJvrB,EAKM,MALNisB,GAKM,CAJJ9rB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAa,UAAT,OAAI,EAAA,GACRA,EAEM,MAAA,CAFD,MAAK6T,EAAA,CAAC,mBAA2BhC,EAAA,iBAAiB,CAAA,KAClDA,EAAA,YAAY,EAAA,CAAA,IAGnB7R,EAmBM,MAnBNwrB,GAmBM,CAlBJxrB,EAKM,MALNyrB,GAKM,CAJJtrB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAgC,OAAA,CAA1B,MAAM,OAAO,EAAC,QAAK,EAAA,GACzBA,EAEO,OAAA,CAFD,MAAK6T,EAAA,CAAC,QAAgBhC,EAAA,iBAAiB,CAAA,CACxC,EAAAG,EAAAD,EAAA,WAAW,UAAS,MAAA,KAAA,EAAA,CAAA,IAG3B/R,EAGM,MAHN0rB,GAGM,CAFJvrB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAA8B,OAAA,CAAxB,MAAM,OAAO,EAAC,MAAG,EAAA,GACvBA,EAAiE,OAAjE2rB,GAAiE3Z,EAA1C,KAAK,MAAMD,EAAA,WAAW,QAAQ,CAAA,EAAI,IAAC,CAAA,IAE5D/R,EAGM,MAHN4rB,GAGM,CAFJzrB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAgC,OAAA,CAA1B,MAAM,OAAO,EAAC,QAAK,EAAA,GACzBA,EAAyE,OAAzE6rB,GAAyE7Z,IAAlDsE,EAAAvE,EAAA,WAAW,iBAAX,YAAAuE,EAA2B,SAAM,CAAA,EAAQ,KAAE,CAAA,IAEpEtW,EAGM,MAHN8rB,GAGM,CAFJ3rB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAgC,OAAA,CAA1B,MAAM,OAAO,EAAC,QAAK,EAAA,GACzBA,EAAsE,OAAtEksB,GAAsEla,EAA/CH,aAAWE,EAAA,WAAW,cAAc,CAAA,EAAA,CAAA,MAG/D/R,EAOM,MAPNmsB,GAOM,CANJnsB,EAES,SAAA,CAFA,4BAAO6R,EAAA,eAAAA,EAAA,cAAA,GAAAI,CAAA,GAAe,MAAM,sBAAuB,SAAUF,EAAA,SAAWA,EAAA,WAAW,SACvF,EAAAC,EAAAD,EAAA,WAAW,UAAS,SAAA,MAAA,EAAA,EAAAqa,EAAA,gBAEzBpsB,EAEM,MAAA,CAFD,MAAM,eAAa,CACtBA,EAA+B,aAAxB,kBAAgB,YAM7BA,EA8BM,MA9BN+rB,GA8BM,CA7BJ/rB,EAKM,MALNqsB,GAKM,CAJJlsB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAa,UAAT,OAAI,EAAA,GACRA,EAEM,MAFNytB,GAEMzb,EADDH,EAAA,WAAW,EAAA,CAAA,IAGlB7R,EAiBM,MAjBN0tB,GAiBM,CAhBJ1tB,EAGM,MAHN2tB,GAGM,CAFJxtB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAgC,OAAA,CAA1B,MAAM,OAAO,EAAC,QAAK,EAAA,GACzBA,EAAyD,OAAzD4tB,GAAyD5b,EAAlCD,aAAW,WAAW,EAAG,KAAE,CAAA,IAEpD/R,EAGM,MAHN6tB,GAGM,CAFJ1tB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAgC,OAAA,CAA1B,MAAM,OAAO,EAAC,QAAK,EAAA,GACzBA,EAA0D,OAA1D8tB,GAA0D9b,EAAnCD,aAAW,YAAY,EAAG,KAAE,CAAA,IAErD/R,EAGM,MAHN+tB,GAGM,CAFJ5tB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAA+B,OAAA,CAAzB,MAAM,OAAO,EAAC,OAAI,EAAA,GACxBA,EAAuD,OAAvDguB,GAAuDhc,EAAhCD,aAAW,SAAS,EAAG,KAAE,CAAA,IAElD/R,EAGM,MAHNiuB,GAGM,CAFJ9tB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAgC,OAAA,CAA1B,MAAM,OAAO,EAAC,QAAK,EAAA,GACzBA,EAA6E,OAA7EkuB,GAA6Elc,EAAtDH,EAAA,YAAW2E,EAAAzE,EAAA,OAAO,cAAP,YAAAyE,EAAoB,YAAY,CAAA,EAAA,CAAA,MAGtExW,EAIM,MAJNmuB,GAIM,CAHJnuB,EAES,SAAA,CAFA,uBAAO6R,EAAA,cAAa,OAAA,GAAW,MAAM,yBAA0B,SAAUE,EAAA,SAAS,SAE3F,EAAAqd,EAAA,QAMNpvB,EAsBM,MAtBNouB,GAsBM,CArBJpuB,EAGM,MAHNquB,GAGM,CAFJluB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAa,UAAT,OAAI,EAAA,GACRA,EAAuE,SAAA,CAA9D,4BAAO6R,EAAA,WAAAA,EAAA,UAAA,GAAAI,CAAA,GAAW,MAAM,0BAAyB,MAAI,IAEhEjS,EAgBM,MAhBNsuB,GAgBM,CAfOvc,EAAA,KAAK,SAAM,OAAtBhS,EAEM,MAFNsvB,GAA8C,UAE9C,IACAvvB,IAAAC,EAWM,MAXNuvB,GAWM,EAVJxvB,EAAA,EAAA,EAAAC,EASMmU,EAAA,KAAAC,EARmBpC,EAAA,KAAI,CAAnByb,EAAK7pB,SADf5D,EASM,MAAA,CAPH,IAAK4D,EACN,SAAM,YACEkO,mBAAiB2b,EAAI,KAAK,CAAA,CAAA,IAElCxtB,EAA6D,OAA7DuuB,GAA6Dvc,EAAnCH,aAAW2b,EAAI,SAAS,CAAA,EAAA,CAAA,EAClDxtB,EAA8C,OAA9CwuB,GAA8Cxc,EAAnBwb,EAAI,KAAK,EAAA,CAAA,EACpCxtB,EAAkD,OAAlDyuB,GAAkDzc,EAArBwb,EAAI,OAAO,EAAA,CAAA,qBAOhDxtB,EAsDM,MAtDN0uB,GAsDM,CArDJ1uB,EAKM,MALN2uB,GAKM,CAJJxuB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAa,UAAT,OAAI,EAAA,GACRA,EAES,SAAA,CAFA,4BAAO6R,EAAA,YAAAA,EAAA,WAAA,GAAAI,CAAA,GAAY,MAAM,yBAA0B,UAAWF,EAAA,eAAe,SAEtF,EAAAwd,EAAA,IAEFvvB,EA8CM,MA9CN4uB,GA8CM,CA7CJ5uB,EAwBM,MAxBN6uB,GAwBM,CAvBJ1uB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAe,UAAX,SAAM,EAAA,GACVA,EAKM,MALN8uB,GAKM,CAJJ9uB,EAGQ,QAAA,KAAA,GAFNA,EAA6F,QAAA,CAAtF,KAAK,gDAAoB+R,EAAA,OAAO,oBAAoB,QAAOmK,GAAG,6BAAQrK,EAAA,gBAAAA,EAAA,eAAA,GAAAI,CAAA,kBAA7CF,EAAA,OAAO,oBAAoB,OAAO,oBAA2B,WAE/F,EAAA,OAEF/R,EASM,MATN+uB,GASM,CARJ5uB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAyB,aAAlB,aAAU,EAAA,KACjBA,EAMC,QAAA,CALC,KAAK,gDACW+R,EAAA,OAAO,oBAAoB,cAAamK,GACvD,+BAAQrK,EAAA,gBAAAA,EAAA,eAAA,GAAAI,CAAA,GACT,IAAI,IACJ,IAAI,qBAHYF,EAAA,OAAO,oBAAoB,qBAAnC,CAAA,OAAR,EAAyD,OAM7D/R,EAKM,MALNgvB,GAKM,CAJJhvB,EAGQ,QAAA,KAAA,GAFNA,EAAqG,QAAA,CAA9F,KAAK,kDAAoB+R,EAAA,OAAO,oBAAoB,gBAAemK,GAAG,+BAAQrK,EAAA,gBAAAA,EAAA,eAAA,GAAAI,CAAA,kBAArDF,EAAA,OAAO,oBAAoB,eAAe,oBAA2B,aAEvG,EAAA,SAIJ/R,EAkBM,MAlBNivB,GAkBM,CAjBJ9uB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAc,UAAV,QAAK,EAAA,GACTA,EAKM,MALNkvB,GAKM,CAJJlvB,EAGQ,QAAA,KAAA,GAFNA,EAAkF,QAAA,CAA3E,KAAK,kDAAoB+R,EAAA,OAAO,SAAS,QAAOmK,GAAG,+BAAQrK,EAAA,gBAAAA,EAAA,eAAA,GAAAI,CAAA,kBAAlCF,EAAA,OAAO,SAAS,OAAO,oBAA2B,WAEpF,EAAA,OAEF/R,EASM,MATNmvB,GASM,CARJhvB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAyB,aAAlB,aAAU,EAAA,KACjBA,EAMC,QAAA,CALC,KAAK,gDACW+R,EAAA,OAAO,SAAS,cAAamK,GAC5C,+BAAQrK,EAAA,gBAAAA,EAAA,eAAA,GAAAI,CAAA,GACT,IAAI,IACJ,IAAI,sBAHYF,EAAA,OAAO,SAAS,qBAAxB,CAAA,OAAR,EAA8C,8ECgEvDzS,GAAU,CACb,KAAM,gBACN,MAAO,CACL,MAAO,CACL,QAAS,GACT,QAAS,GACT,aAAc,GAGd,aAAc,CACZ,QAAS,GACT,WAAY,GACZ,YAAa,GACb,QAAS,IAIX,iBAAkB,KAGlB,OAAQ,CACN,UAAW,GACX,gBAAiB,CAAA,EACjB,YAAa,CAAA,GAEf,UAAW,KAGX,iBAAkB,GAClB,aAAc,GAGd,YAAa,CACX,kBAAmB,GACnB,mBAAoB,GACpB,4BAA6B,GAC7B,iBAAkB,GAClB,4BAA6B,GAC7B,kBAAmB,IAIrB,WAAY,CAAA,EACZ,aAAc,CAChB,CACF,EAEA,SAAU,CACR,iBAAkB,CAChB,OAAO,KAAK,OAAO,UAAY,MAAQ,KACzC,EAEA,sBAAuB,CACrB,OAAO,KAAK,OAAO,UAAY,UAAY,OAC7C,EAEA,sBAAuB,CACrB,OAAO,KAAK,OAAO,UAAY,kBAAoB,iBACrD,EAEA,qBAAsB,CACpB,OAAO,KAAK,OAAO,UAAY,QAAU,OAC3C,EAEA,2BAA4B,CAC1B,MAAO,IACT,EAEA,gCAAiC,CAC/B,MAAO,SACT,EAEA,+BAAgC,CAC9B,OAAO,IAAI,KAAI,EAAG,YAAW,CAC/B,EAEA,wBAAyB,CACvB,MAAO,IAAK,GAAK,GACnB,EAEA,gCAAiC,CAC/B,MAAO,GACT,EAEA,gBAAiB,CACf,MAAO,IACT,EAEA,qBAAsB,CACpB,MAAO,SACT,EAEA,oBAAqB,CACnB,OAAO,IAAI,KAAI,EAAG,YAAW,CAC/B,EAEA,aAAc,CACZ,MAAO,GAAI,GAAK,GAAK,GACvB,GAGF,MAAM,SAAU,CACd,MAAM,KAAK,iBAAgB,EAC3B,KAAK,mBAAkB,CACzB,EAEA,QAAS,CACP,MAAM,kBAAmB,CACvB,KAAK,OAAO,OAAQ,eAAe,EAEnC,GAAI,CACF,MAAM,KAAK,iBAAgB,EAC3B,KAAK,OAAO,OAAQ,aAAa,CACnC,OAAS2B,EAAO,CACd,KAAK,OAAO,QAAS,YAAYA,EAAM,OAAO,EAAE,CAClD,CACF,EAEA,MAAM,kBAAmB,CACvB,KAAK,QAAU,GACf,KAAK,OAAO,OAAQ,aAAa,EAEjC,GAAI,CAEF,MAAM,KAAK,mBAAkB,EAG7B,KAAK,uBAAsB,EAG3B,KAAK,yBAAwB,EAG7B,KAAK,mBAAkB,EAEvB,KAAK,OAAO,OAAQ,UAAU,CAChC,OAASA,EAAO,CACd,KAAK,OAAO,QAAS,WAAWA,EAAM,OAAO,EAAE,CACjD,QAAA,CACE,KAAK,QAAU,EACjB,CACF,EAEA,MAAM,oBAAqB,CACzB,GAAI,CACF,KAAK,iBAAmB,MAAMoO,GAA6B,oBAAmB,EAC9E,KAAK,OAAO,OAAQ,UAAU,CAChC,OAASpO,EAAO,CACd,KAAK,OAAO,QAAS,cAAcA,EAAM,OAAO,EAAE,CACpD,CACF,EAEA,wBAAyB,CACvB,KAAK,OAASmE,EAAoB,UAAS,EAC3C,KAAK,UAAYA,EAAoB,aAAY,EACjD,KAAK,OAAO,OAAQ,UAAU,CAChC,EAEA,0BAA2B,CACzB,MAAMwK,EAAa1M,EAAiB,SAAQ,EACjBhB,GAAmB,cAAa,EAG3D,KAAK,iBAAmB,KAAK,IAAI,IAAK,GAAM0N,EAAW,UAAY,CAAE,EACrE,KAAK,aAAe,KAAK,IAAI,IAAK,GAAMA,EAAW,UAAY,CAAE,EAEjE,KAAK,OAAO,OAAQ,SAAS,CAC/B,EAEA,oBAAqB,SACnB,MAAM4f,GAAmB9hB,GAAAD,EAAA,KAAK,mBAAL,YAAAA,EAAuB,cAAvB,MAAAC,EAAoC,UAAY,IAAM,GACzE+hB,EAAkB,KAAK,OAAO,UAAY,IAAM,GAEtD,KAAK,aAAe,CAClB,QAAS,KAAK,OAAOD,EAAmB,KAAK,iBAAmBC,GAAmB,CAAC,EACpF,WAAYD,EACZ,YAAa,KAAK,iBAClB,QAASC,CACX,CACF,EAEA,MAAM,iBAAkB,CACtB,KAAK,QAAU,GAEf,GAAI,CACE,KAAK,OAAO,WACdrqB,EAAoB,KAAI,EACxB,KAAK,OAAO,OAAQ,YAAY,IAEhCA,EAAoB,MAAK,EACzB,KAAK,OAAO,OAAQ,YAAY,GAGlC,KAAK,uBAAsB,CAC7B,OAASnE,EAAO,CACd,KAAK,OAAO,QAAS,YAAYA,EAAM,OAAO,EAAE,CAClD,QAAA,CACE,KAAK,QAAU,EACjB,CACF,EAEA,MAAM,cAAcyuB,EAAM,CACxB,KAAK,QAAU,GACf,KAAK,OAAO,OAAQ,MAAMA,CAAI,QAAQ,EAEtC,GAAI,CACEA,IAAS,uBAEXxsB,EAAiB,MAAK,EACtB,KAAK,OAAO,OAAQ,WAAW,GACtBwsB,IAAS,aAElBxsB,EAAiB,MAAK,EACtB,KAAK,OAAO,OAAQ,UAAU,GAGhC,MAAM,KAAK,mBAAkB,CAC/B,OAASjC,EAAO,CACd,KAAK,OAAO,QAAS,GAAGyuB,CAAI,UAAUzuB,EAAM,OAAO,EAAE,CACvD,QAAA,CACE,KAAK,QAAU,EACjB,CACF,EAEA,MAAM,gBAAiB,CACrB,GAAK,QAAQ,sBAAsB,EAInC,MAAK,QAAU,GACf,KAAK,OAAO,UAAW,aAAa,EAEpC,GAAI,CACFiC,EAAiB,MAAK,EACtB,aAAa,MAAK,EAClB,eAAe,MAAK,EAEpB,KAAK,OAAO,OAAQ,SAAS,EAC7B,MAAM,KAAK,iBAAgB,CAC7B,OAASjC,EAAO,CACd,KAAK,OAAO,QAAS,WAAWA,EAAM,OAAO,EAAE,CACjD,QAAA,CACE,KAAK,QAAU,EACjB,EACF,EAEA,MAAM,kBAAmB,CACvB,KAAK,QAAU,GACf,KAAK,OAAO,OAAQ,aAAa,EAEjC,GAAI,CAEF,MAAM,IAAI,QAAQL,GAAW,WAAWA,EAAS,GAAI,CAAC,EAEtD,MAAM+uB,EAAc,KAAK,MAAM,KAAK,OAAM,EAAK,EAAE,EAAI,GACrD,KAAK,aAAa,QAAUA,EAE5B,KAAK,OAAO,OAAQ,gBAAgBA,CAAW,GAAG,CACpD,OAAS1uB,EAAO,CACd,KAAK,OAAO,QAAS,aAAaA,EAAM,OAAO,EAAE,CACnD,QAAA,CACE,KAAK,QAAU,EACjB,CACF,EAEA,mBAAoB,CAElBoO,GAA6B,eAAe,CAC1C,kBAAmB,KAAK,YAAY,kBACpC,mBAAoB,KAAK,YAAY,mBACtC,EAED,KAAK,OAAO,OAAQ,WAAW,CACjC,EAEA,oBAAqB,CAEnB,YAAY,IAAM,CACX,KAAK,UACR,KAAK,uBAAsB,EAC3B,KAAK,yBAAwB,EAC7B,KAAK,mBAAkB,EAE3B,EAAG,GAAK,CACV,EAGA,gBAAgB8O,EAAO,CACrB,OAAIA,GAAS,GAAW,KACpBA,GAAS,GAAW,KACpBA,GAAS,GAAW,KACjB,MACT,EAEA,gBAAgByR,EAAK,CACnB,MAAMC,EAAQD,EAAO,KACrB,OAAIC,EAAQ,EAAU,QAClBA,EAAQ,EAAU,QACf,YACT,EAEA,WAAWxN,EAAW,CACpB,OAAKA,EACE,IAAI,KAAKA,CAAS,EAAE,eAAe,OAAO,EAD1B,KAEzB,EAEA,cAAcuN,EAAK,CACjB,GAAI,CAACA,EAAK,MAAO,MAEjB,MAAME,EAAU,KAAK,MAAMF,GAAO,IAAO,GAAG,EACtCC,EAAQ,KAAK,MAAMC,EAAU,EAAE,EAC/BC,EAAO,KAAK,MAAMF,EAAQ,EAAE,EAElC,OAAIE,EAAO,EAAU,GAAGA,CAAI,MACxBF,EAAQ,EAAU,GAAGA,CAAK,OACvB,GAAGC,CAAO,MACnB,EAEA,OAAOvC,EAAOD,EAAS,CACrB,KAAK,WAAW,KAAK,CACnB,GAAI,EAAE,KAAK,aACX,UAAW,IAAI,KAAI,EAAG,YAAW,EACjC,MAAAC,EACA,QAAAD,EACD,EAGG,KAAK,WAAW,OAAS,MAC3B,KAAK,WAAa,KAAK,WAAW,MAAM,IAAI,EAEhD,EAEA,WAAY,CACV,KAAK,WAAa,CAAA,EAClB,KAAK,aAAe,CACtB,CACF,CACF,EAppBO/tB,GAAA,CAAA,MAAM,gBAAgB,EAOpBC,GAAA,CAAA,MAAM,kBAAkB,EACtBC,GAAA,CAAA,MAAM,eAAe,EAGjBC,GAAA,CAAA,MAAM,cAAc,EAElBC,GAAA,CAAA,MAAM,cAAc,EACpBC,GAAA,CAAA,MAAM,eAAe,EAIzBC,GAAA,CAAA,MAAM,eAAe,EAEnBiU,GAAA,CAAA,MAAM,cAAc,EAElBzB,GAAA,CAAA,MAAM,cAAc,EAUxB4B,GAAA,CAAA,MAAM,eAAe,EAEnBF,GAAA,CAAA,MAAM,cAAc,EAKlBzB,GAAA,CAAA,MAAM,aAAa,EAMvBC,GAAA,CAAA,MAAM,eAAe,EAEnBC,GAAA,CAAA,MAAM,cAAc,EAElBC,GAAA,CAAA,MAAM,mBAAmB,EACzBC,GAAA,CAAA,MAAM,kBAAkB,EAShCC,GAAA,CAAA,MAAM,iBAAiB,EACrBC,GAAA,CAAA,MAAM,cAAc,EAElBC,GAAA,CAAA,MAAM,aAAa,EACjBC,GAAA,CAAA,MAAM,aAAa,kBAOnBE,GAAA,CAAA,MAAM,kBAAkB,EAGpBC,GAAA,CAAA,MAAM,eAAe,YAM2B,MAAM,kBACpDE,GAAA,CAAA,MAAM,YAAY,EAIlBC,GAAA,CAAA,MAAM,YAAY,EAIlBC,GAAA,CAAA,MAAM,YAAY,EAQtBC,GAAA,CAAA,MAAM,uBAAuB,EAK3BC,GAAA,CAAA,MAAM,gBAAgB,EACpBC,GAAA,CAAA,MAAM,YAAY,EAIlBC,GAAA,CAAA,MAAM,YAAY,EAIlBC,GAAA,CAAA,MAAM,YAAY,EAU1BC,GAAA,CAAA,MAAM,aAAa,EACjBC,GAAA,CAAA,MAAM,aAAa,kBAOnBsX,GAAA,CAAA,MAAM,gBAAgB,EACpBC,GAAA,CAAA,MAAM,aAAa,EACjBC,GAAA,CAAA,MAAM,eAAe,EAMrBC,GAAA,CAAA,MAAM,aAAa,EACjBC,GAAA,CAAA,MAAM,YAAY,EAIlBC,GAAA,CAAA,MAAM,YAAY,EAMlBU,GAAA,CAAA,MAAM,YAAY,EAKpBT,GAAA,CAAA,MAAM,gBAAgB,kBAOxBE,GAAA,CAAA,MAAM,aAAa,EACjBC,GAAA,CAAA,MAAM,eAAe,EAMrBC,GAAA,CAAA,MAAM,aAAa,EACjBC,GAAA,CAAA,MAAM,YAAY,EAIlBC,GAAA,CAAA,MAAM,YAAY,EAOpBI,GAAA,CAAA,MAAM,gBAAgB,kBAYhCE,GAAA,CAAA,MAAM,iBAAiB,EAKrBL,GAAA,CAAA,MAAM,cAAc,4CAwBF,MAAM,oBAKxB4B,GAAA,CAAA,MAAM,eAAe,EACnBC,GAAA,CAAA,MAAM,eAAe,EAEnBC,GAAA,CAAA,MAAM,cAAc,EAUpBC,GAAA,CAAA,MAAM,cAAc,EAYtBC,GAAA,CAAA,MAAM,eAAe,EAEnBC,GAAA,CAAA,MAAM,cAAc,EASpBC,GAAA,CAAA,MAAM,cAAc,EAWtBC,GAAA,CAAA,MAAM,eAAe,EAEnBC,GAAA,CAAA,MAAM,cAAc,EAUpBiB,GAAA,CAAA,MAAM,cAAc,EAe1BhB,GAAA,CAAA,MAAM,cAAc,EAClBC,GAAA,CAAA,MAAM,aAAa,EAInBC,GAAA,CAAA,MAAM,gBAAgB,EAEjBe,GAAA,CAAA,MAAM,UAAU,EAChBC,GAAA,CAAA,MAAM,WAAW,EACjBf,GAAA,CAAA,MAAM,aAAa,YAES,MAAM,4EArThD,OAAAzuB,EAAA,EAAAC,EA0TM,MA1TNR,GA0TM,eAzTJS,EAGM,MAAA,CAHD,MAAM,kBAAgB,CACzBA,EAAsB,UAAlB,eAAa,EACjBA,EAAwB,SAArB,mBAAiB,QAItBA,EAiDM,MAjDNR,GAiDM,CAhDJQ,EA+CM,MA/CNP,GA+CM,CA9CJO,EAOM,MAAA,CAPD,MAAK6T,EAAA,CAAC,gBAAe,CAAA,QAAsB9B,EAAA,aAAa,SAAO,GAAA,CAAA,IAClE5R,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAA+B,MAAA,CAA1B,MAAM,WAAW,EAAC,KAAE,EAAA,GACzBA,EAIM,MAJNN,GAIM,CAHJS,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAc,UAAV,QAAK,EAAA,GACTA,EAA2D,MAA3DL,GAA2DqS,EAA9BD,eAAa,OAAO,EAAG,IAAC,CAAA,EACrD/R,EAA4E,MAA5EJ,GAA4EoS,EAA9CH,kBAAgBE,EAAA,aAAa,OAAO,CAAA,EAAA,CAAA,QAItE/R,EAYM,MAZNH,GAYM,CAXJM,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAA+B,MAAA,CAA1B,MAAM,WAAW,EAAC,KAAE,EAAA,GACzBA,EASM,MATN8T,GASM,CARJ3T,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAc,UAAV,QAAK,EAAA,GACTA,EAMM,MANNqS,GAMM,CALJrS,EAEO,OAAA,CAFD,SAAM,cAAa,CAAA,QAAqB0N,GAAAD,EAAAsE,qBAAA,YAAAtE,EAAkB,cAAlB,YAAAC,EAA+B,UAAS,CAAA,CAAI,EAAA,QACpFsE,GAAGsE,GAAAD,EAAAtE,EAAA,mBAAA,YAAAsE,EAAkB,cAAlB,MAAAC,EAA+B,UAAS,IAAA,GAAA,EAAA,CAAA,EAEjDnW,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAA4C,OAAA,CAAtC,MAAM,oBAAoB,EAAC,OAAI,EAAA,GACrCG,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAA4C,OAAA,CAAtC,MAAM,sBAAqB,OAAI,EAAA,SAK3CA,EAWM,MAXNiU,GAWM,CAVJ9T,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAA+B,MAAA,CAA1B,MAAM,WAAW,EAAC,KAAE,EAAA,GACzBA,EAQM,MARN+T,GAQM,CAPJ5T,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAa,UAAT,OAAI,EAAA,GACRA,EAEM,MAAA,CAFD,MAAK6T,EAAA,CAAC,gBAAwBhC,EAAA,oBAAoB,CAAA,CAClD,EAAAG,EAAAD,EAAA,OAAO,UAAS,MAAA,KAAA,EAAA,CAAA,EAErB/R,EAEM,MAFNsS,GAAyB,UACjBN,IAAGwE,EAAAzE,EAAA,OAAO,kBAAP,YAAAyE,EAAwB,SAAM,CAAA,EAAQ,MACjD,CAAA,MAIJxW,EASM,MATNuS,GASM,CARJpS,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAA8B,MAAA,CAAzB,MAAM,WAAW,EAAC,IAAC,EAAA,GACxBA,EAMM,MANNwS,GAMM,CALJrS,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAa,UAAT,OAAI,EAAA,GACRA,EAA4D,MAA5DyS,GAA4DT,EAA1BD,EAAA,gBAAgB,EAAG,IAAC,CAAA,EACtD/R,EAEM,MAFN0S,GAA8B,WACrBV,EAAGD,EAAA,YAAY,EAAG,KAC3B,CAAA,UAOR/R,EAgIM,MAhIN2S,GAgIM,CA/HJ3S,EA8HM,MA9HN4S,GA8HM,CA5HJ5S,EAuDM,MAvDN6S,GAuDM,CAtDJ7S,EAKM,MALN8S,GAKM,CAJJ3S,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAiB,UAAb,WAAQ,EAAA,GACZA,EAES,SAAA,CAFA,4BAAO6R,EAAA,oBAAAA,EAAA,mBAAA,GAAAI,CAAA,GAAoB,MAAM,aAAc,SAAUF,EAAA,OAC7D,EAAAC,GAAAD,EAAA,eAAwB,OAC7B,EAAAgB,EAAA,IAGF/S,EA8CM,MA9CNgT,GA8CM,CA5CJhT,EAqBM,MAAA,CArBD,SAAM,cAAa,CAAA,WAAwB0W,GAAAH,EAAAxE,qBAAA,YAAAwE,EAAkB,cAAlB,YAAAG,EAA+B,UAAS,CAAA,IACtF1W,EAKM,MALNiT,GAKM,CAJJ9S,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAc,UAAV,QAAK,EAAA,GACTA,EAEO,OAAA,CAFD,SAAM,gBAAuB4W,GAAAH,EAAA1E,qBAAA,YAAA0E,EAAkB,cAAlB,MAAAG,EAA+B,UAAS,UAAA,OAAA,CAAA,MACtEE,GAAAH,EAAA5E,EAAA,mBAAA,YAAA4E,EAAkB,cAAlB,MAAAG,EAA+B,UAAS,KAAA,KAAA,EAAA,CAAA,KAGpCE,GAAAH,EAAA9E,EAAA,mBAAA,YAAA8E,EAAkB,cAAlB,MAAAG,EAA+B,WAA1ClX,IAAAC,EAaM,MAbNmT,GAaM,CAZJlT,EAGM,MAHNmT,GAGM,CAFJhT,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAkB,YAAZ,QAAK,EAAA,GACXA,EAAoE,gBAA3D+W,EAAAhF,EAAA,iBAAiB,YAAY,UAA7B,YAAAgF,EAAsC,SAAM,CAAA,EAAA,CAAA,IAEvD/W,EAGM,MAHNoT,GAGM,CAFJjT,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAmB,YAAb,SAAM,EAAA,GACZA,EAA8G,OAAA,KAAAgS,EAArGD,EAAA,iBAAiB,YAAY,YAAU,CAAA,EAAQ,IAACC,EAAGD,EAAA,iBAAiB,YAAY,QAAM,CAAA,EAAA,CAAA,IAEjG/R,EAGM,MAHNqT,GAGM,CAFJlT,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAkB,YAAZ,QAAK,EAAA,GACXA,EAAsE,cAA7D6R,EAAA,WAAWE,mBAAiB,YAAY,UAAU,CAAA,EAAA,CAAA,oBAMjE/R,EAmBM,MAnBNsT,GAmBM,eAlBJtT,EAGM,MAAA,CAHD,MAAM,iBAAe,CACxBA,EAAa,UAAT,MAAI,EACRA,EAA4C,OAAA,CAAtC,MAAM,sBAAsB,EAAC,IAAE,QAEvCA,EAaM,MAbNuT,GAaM,CAZJvT,EAGM,MAHNwT,GAGM,CAFJrT,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAkB,YAAZ,QAAK,EAAA,GACXA,EAA+D,gBAAtDiX,GAAAC,EAAAnF,EAAA,mBAAA,YAAAmF,EAAkB,QAAlB,YAAAD,EAAyB,iBAAmB,MAAG,CAAA,IAE1DjX,EAGM,MAHNyT,GAGM,CAFJtT,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAkB,YAAZ,QAAK,EAAA,GACXA,EAAqE,gBAA5DmX,GAAAC,EAAArF,EAAA,mBAAA,YAAAqF,EAAkB,QAAlB,YAAAD,EAAyB,uBAAyB,MAAG,CAAA,IAEhEnX,EAGM,MAHN0T,GAGM,CAFJvT,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAiB,YAAX,OAAI,EAAA,GACVA,EAAgC,OAAA,KAAAgS,EAAvBD,EAAA,YAAY,EAAG,IAAC,CAAA,YAQnC/R,EAiEM,MAjEN2T,GAiEM,CAhEJ3T,EAKM,MALN4T,GAKM,CAJJzT,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAkB,UAAd,YAAS,EAAA,GACbA,EAES,SAAA,CAFA,4BAAO6R,EAAA,iBAAAA,EAAA,gBAAA,GAAAI,CAAA,GAAkB,QAAOJ,EAAA,oBAAoB,EAAG,SAAUE,EAAA,WACrEF,EAAA,mBAAmB,EAAA,GAAAoZ,EAAA,IAI1BjrB,EAwDM,MAxDNkrB,GAwDM,CAvDJlrB,EA4BM,MA5BNmrB,GA4BM,CA3BJnrB,EAKM,MALNorB,GAKM,CAJJjrB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAa,UAAT,OAAI,EAAA,GACRA,EAEM,MAAA,CAFD,MAAK6T,EAAA,CAAC,mBAA2BhC,EAAA,8BAA8B,CAAA,KAC/DA,EAAA,yBAAyB,EAAA,CAAA,IAGhC7R,EAeM,MAfNqrB,GAeM,CAdJrrB,EAGM,MAHNsrB,GAGM,CAFJnrB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAkB,YAAZ,QAAK,EAAA,GACXA,EAA4D,OAAA,KAAAgS,EAAnDH,EAAA,WAAWA,EAAA,6BAA6B,CAAA,EAAA,CAAA,IAEnD7R,EAKM,MALNurB,GAKM,CAJJprB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAkB,YAAZ,QAAK,EAAA,GACXA,EAEO,OAAA,CAFA,MAAK6T,EAAEhC,EAAA,gBAAgBA,EAAA,sBAAsB,CAAA,CAC/C,EAAAG,EAAAH,EAAA,cAAcA,EAAA,sBAAsB,CAAA,EAAA,CAAA,IAG3C7R,EAGM,MAHNisB,GAGM,CAFJ9rB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAiB,YAAX,OAAI,EAAA,GACVA,EAAkD,OAAA,KAAAgS,EAAzCH,EAAA,8BAA8B,EAAG,IAAC,CAAA,MAG/C7R,EAIM,MAJNwrB,GAIM,CAHJxrB,EAES,SAAA,CAFA,uBAAO6R,EAAA,cAAa,qBAAA,GAAyB,MAAM,yBAA0B,SAAUE,EAAA,SAAS,SAEzG,EAAA0Z,EAAA,MAIJzrB,EAwBM,MAxBN0rB,GAwBM,CAvBJ1rB,EAKM,MALN2rB,GAKM,CAJJxrB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAY,UAAR,MAAG,EAAA,GACPA,EAEM,MAAA,CAFD,MAAK6T,EAAA,CAAC,mBAA2BhC,EAAA,mBAAmB,CAAA,KACpDA,EAAA,cAAc,EAAA,CAAA,IAGrB7R,EAWM,MAXN4rB,GAWM,CAVJ5rB,EAGM,MAHN6rB,GAGM,CAFJ1rB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAkB,YAAZ,QAAK,EAAA,GACXA,EAAiD,OAAA,KAAAgS,EAAxCH,EAAA,WAAWA,EAAA,kBAAkB,CAAA,EAAA,CAAA,IAExC7R,EAKM,MALN8rB,GAKM,CAJJ3rB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAkB,YAAZ,QAAK,EAAA,GACXA,EAEO,OAAA,CAFA,MAAK6T,EAAEhC,EAAA,gBAAgBA,EAAA,WAAW,CAAA,CACpC,EAAAG,EAAAH,EAAA,cAAcA,EAAA,WAAW,CAAA,EAAA,CAAA,MAIlC7R,EAIM,MAJNksB,GAIM,CAHJlsB,EAES,SAAA,CAFA,uBAAO6R,EAAA,cAAa,UAAA,GAAc,MAAM,yBAA0B,SAAUE,EAAA,SAAS,SAE9F,EAAAoa,EAAA,cASZnsB,EA0BM,MA1BNosB,GA0BM,eAzBJpsB,EAEM,MAAA,CAFD,MAAM,kBAAgB,CACzBA,EAAiB,UAAb,UAAQ,QAGdA,EAoBM,MApBN+rB,GAoBM,CAnBJ/rB,EAGS,SAAA,CAHA,4BAAO6R,EAAA,kBAAAA,EAAA,iBAAA,GAAAI,CAAA,GAAkB,MAAM,sBAAuB,SAAUF,EAAA,UACvE5R,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAgC,OAAA,CAA1B,MAAM,UAAU,EAAC,KAAE,EAAA,GAAOshB,EAAA,MAC7BvP,EAAA,QAAO,SAAA,MAAA,EAAA,CAAA,SAGZ/R,EAGS,SAAA,CAHA,4BAAO6R,EAAA,gBAAAA,EAAA,eAAA,GAAAI,CAAA,GAAgB,MAAM,0CACpCjS,EAAiC,OAAA,CAA3B,MAAM,UAAU,EAAC,MAAG,EAAA,IAAO,WAEnC,EAAA,MAEAA,EAGS,SAAA,CAHA,4BAAO6R,EAAA,kBAAAA,EAAA,iBAAA,GAAAI,CAAA,GAAkB,MAAM,mBAAoB,SAAUF,EAAA,UACpE5R,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAgC,OAAA,CAA1B,MAAM,UAAU,EAAC,KAAE,EAAA,GAAOshB,EAAA,MAC7BvP,EAAA,QAAO,SAAA,MAAA,EAAA,CAAA,SAGZ/R,EAGS,SAAA,CAHA,QAAKG,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA+b,GAAEnK,EAAA,aAAY,CAAIA,EAAA,cAAc,MAAM,0BAClD5R,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAgC,OAAA,CAA1B,MAAM,UAAU,EAAC,KAAE,EAAA,GAAOshB,EAAA,MAC7BvP,EAAA,aAAY,OAAA,MAAA,EAAA,CAAA,QAMVA,EAAA,cAAXjS,IAAAC,EA4EM,MA5EN2tB,GA4EM,eA3EJ1tB,EAEM,MAAA,CAFD,MAAM,mBAAiB,CAC1BA,EAAgB,UAAZ,SAAO,QAGbA,EAsEM,MAtEN2tB,GAsEM,CArEJ3tB,EAsBM,MAtBN4tB,GAsBM,CArBJztB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAc,UAAV,QAAK,EAAA,GACTA,EASM,MATN6tB,GASM,CARJ7tB,EAOQ,QAAA,KAAA,GANNA,EAIE,QAAA,CAHA,KAAK,WACI,sBAAAG,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA+b,GAAAnK,EAAA,YAAY,kBAAiBmK,GACrC,6BAAQrK,EAAA,mBAAAA,EAAA,kBAAA,GAAAI,CAAA,eADA,CAAAob,EAAAtb,EAAA,YAAY,iBAAiB,oBAEtC,cAEJ,EAAA,OAEF/R,EASM,MATN8tB,GASM,CARJ9tB,EAOQ,QAAA,KAAA,GANNA,EAIE,QAAA,CAHA,KAAK,WACI,sBAAAG,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAA+b,GAAAnK,EAAA,YAAY,mBAAkBmK,GACtC,+BAAQrK,EAAA,mBAAAA,EAAA,kBAAA,GAAAI,CAAA,eADA,CAAAob,EAAAtb,EAAA,YAAY,kBAAkB,oBAEvC,cAEJ,EAAA,SAIJ/R,EAoBM,MApBN+tB,GAoBM,CAnBJ5tB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAa,UAAT,OAAI,EAAA,GACRA,EAQM,MARNguB,GAQM,CAPJ7tB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAA6B,aAAtB,iBAAc,EAAA,KACrBA,EAKS,SAAA,CALQ,sBAAAG,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAA+b,GAAAnK,EAAA,YAAY,4BAA2BmK,GAAG,+BAAQrK,EAAA,mBAAAA,EAAA,kBAAA,GAAAI,CAAA,uBACjEjS,EAA+B,SAAA,CAAvB,MAAM,GAAG,EAAC,OAAI,EAAA,EACtBA,EAAiC,SAAA,CAAzB,MAAM,IAAI,EAAC,QAAK,EAAA,EACxBA,EAAiC,SAAA,CAAzB,MAAM,IAAI,EAAC,QAAK,EAAA,EACxBA,EAAgC,SAAA,CAAxB,MAAM,IAAI,EAAC,OAAI,EAAA,WAJR,CAAAgwB,GAAAje,EAAA,YAAY,2BAA2B,MAO1D/R,EAQM,MARNiuB,GAQM,CAPJ9tB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAA4B,aAArB,gBAAa,EAAA,KACpBA,EAKS,SAAA,CALQ,sBAAAG,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAA+b,GAAAnK,EAAA,YAAY,iBAAgBmK,GAAG,+BAAQrK,EAAA,mBAAAA,EAAA,kBAAA,GAAAI,CAAA,uBACtDjS,EAA+B,SAAA,CAAvB,MAAM,GAAG,EAAC,OAAI,EAAA,EACtBA,EAAiC,SAAA,CAAzB,MAAM,IAAI,EAAC,QAAK,EAAA,EACxBA,EAAiC,SAAA,CAAzB,MAAM,IAAI,EAAC,QAAK,EAAA,EACxBA,EAAgC,SAAA,CAAxB,MAAM,KAAK,EAAC,MAAG,EAAA,WAJR,CAAAgwB,GAAAje,EAAA,YAAY,gBAAgB,QASjD/R,EAsBM,MAtBNkuB,GAsBM,CArBJ/tB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAa,UAAT,OAAI,EAAA,GACRA,EASM,MATNmuB,GASM,CARJnuB,EAOQ,QAAA,KAAA,GANNA,EAIE,QAAA,CAHA,KAAK,WACI,sBAAAG,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAA+b,GAAAnK,EAAA,YAAY,4BAA2BmK,GAC/C,+BAAQrK,EAAA,mBAAAA,EAAA,kBAAA,GAAAI,CAAA,eADA,CAAAob,EAAAtb,EAAA,YAAY,2BAA2B,oBAEhD,WAEJ,EAAA,OAEF/R,EASM,MATNovB,GASM,CARJpvB,EAOQ,QAAA,KAAA,GANNA,EAIE,QAAA,CAHA,KAAK,WACI,sBAAAG,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAA+b,GAAAnK,EAAA,YAAY,kBAAiBmK,GACrC,+BAAQrK,EAAA,mBAAAA,EAAA,kBAAA,GAAAI,CAAA,eADA,CAAAob,EAAAtb,EAAA,YAAY,iBAAiB,oBAEtC,WAEJ,EAAA,uBAOR/R,EAeM,MAfNouB,GAeM,CAdJpuB,EAGM,MAHNquB,GAGM,CAFJluB,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAH,EAAgB,UAAZ,UAAO,EAAA,GACXA,EAA2D,SAAA,CAAlD,8BAAO6R,EAAA,WAAAA,EAAA,UAAA,GAAAI,CAAA,GAAW,MAAM,cAAa,MAAI,IAEpDjS,EASM,MATNsuB,GASM,EARJxuB,EAAA,EAAA,EAAAC,EAIMmU,EAAA,KAAAC,EAJapC,EAAA,WAAW,WAAlByb,QAAZztB,EAIM,MAAA,CAJqC,IAAKytB,EAAI,GAAI,MAAK3Z,EAAA,CAAC,YAAoB2Z,EAAI,KAAK,CAAA,IACzFxtB,EAA6D,OAA7DqvB,GAA6Drd,EAAnCH,aAAW2b,EAAI,SAAS,CAAA,EAAA,CAAA,EAClDxtB,EAA4D,OAA5DsvB,GAA4Dtd,EAAjCwb,EAAI,MAAM,aAAW,EAAA,CAAA,EAChDxtB,EAAkD,OAAlDuuB,GAAkDvc,EAArBwb,EAAI,OAAO,EAAA,CAAA,cAE/Bzb,EAAA,WAAW,SAAM,OAA5BhS,EAEM,MAFNyuB,GAAoD,UAEpD,iFCzRFyB,GAAS,CACb,CAAE,KAAM,IAAK,SAAU,kBAAkB,EACzC,CAAE,KAAM,mBAAoB,UAAWC,GAAiB,KAAM,iBAAiB,EAC/E,CAAE,KAAM,kBAAmB,UAAWC,GAAgB,KAAM,gBAAgB,EAC5E,CAAE,KAAM,kCAAmC,UAAWC,GAAa,KAAM,cAAc,EAEvF,CAAE,KAAM,oBAAqB,SAAU,kBAAkB,EACzD,CAAE,KAAM,mBAAoB,SAAU,iBAAiB,EACvD,CAAE,KAAM,mCAAoC,SAAUC,GAAM,2BAA2BA,EAAG,OAAO,MAAM,EAAE,EACzG,CAAE,KAAM,YAAa,UAAWC,GAAU,KAAM,UAAU,EAE1D,CAAE,KAAM,oBAAqB,UAAWC,GAAgB,KAAM,kBAAkB,EAChF,CAAE,KAAM,6BAA8B,UAAWC,GAAwB,KAAM,2BAA2B,EAC1G,CAAE,KAAM,sBAAuB,UAAWC,GAAkB,KAAM,oBAAoB,EACtF,CAAE,KAAM,oBAAqB,UAAWC,GAAqB,KAAM,kBAAkB,EACrF,CAAE,KAAM,wBAAyB,UAAWC,GAA+B,KAAM,sBAAsB,EACvG,CAAE,KAAM,iBAAkB,UAAWC,GAAqB,KAAM,eAAe,EAC/E,CAAE,KAAM,qBAAsB,UAAWC,GAA4B,KAAM,mBAAmB,EAC9F,CAAE,KAAM,uBAAwB,UAAWC,GAAmB,KAAM,qBAAqB,EACzF,CAAE,KAAM,kBAAmB,UAAWC,GAAe,KAAM,gBAAgB,EAE3E,CAAE,KAAM,mBAAoB,SAAU,kBAAkB,CAC1D,EAEMC,GAASC,GAAa,CAC1B,QAASC,GAAoB,EAC7B,OAAAjB,EACF,CAAC,EAEKkB,GAAMC,GAAUC,EAAG,EACzBF,GAAI,IAAIH,EAAM,EACdG,GAAI,MAAM,MAAM,EAIhB,WAAW,IAAM,CACf,QAAQ,IAAI,0CAA0C,EACtD/rB,EAAoB,MAAK,CAC3B,EAAG,GAAK,EAIR,WAAW,IAAM,CACf,QAAQ,IAAI,yCAAyC,EACrDkL,GAAmB,MAAK,CAC1B,EAAG,GAAI"}