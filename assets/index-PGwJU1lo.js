var Jt=Object.defineProperty;var Zt=(i,e,a)=>e in i?Jt(i,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[e]=a;var ue=(i,e,a)=>Zt(i,typeof e!="symbol"?e+"":e,a);import{c as h,a as t,b as X,d as N,w as Ke,r as es,e as E,o as u,f as _,g as S,t as l,n as J,h as v,F as $,i as U,j as Vt,k as q,v as ht,l as Ye,m as ts,p as ne,q as Ot,s as Z,u as Wt,x as ss,y as as,z as ns}from"./vendor-DdL5cyMo.js";import{s as T,e as de,u as is,l as ot,o as R,n as x,b as G,a as gt,r as ge,c as z,Z as os}from"./utils-C6BRd-cb.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function a(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(s){if(s.ep)return;s.ep=!0;const n=a(s);fetch(s.href,n)}})();const P=(i,e)=>{const a=i.__vccOpts||i;for(const[o,s]of e)a[o]=s;return a},rs={name:"Layout"},ls={class:"layout"},cs={class:"header"},ds={class:"nav"},us={class:"container"},hs={class:"nav-list"},gs={class:"main-content"},ms={class:"container"};function fs(i,e,a,o,s,n){const r=E("router-link");return u(),h("div",ls,[t("header",cs,[t("nav",ds,[t("div",us,[e[3]||(e[3]=t("div",{class:"nav-brand"},[t("h1",null,"Investment Dashboard")],-1)),t("ul",hs,[t("li",null,[N(r,{to:"/market-overview",class:"nav-link"},{default:Ke(()=>[...e[0]||(e[0]=[_("Market Overview",-1)])]),_:1})]),t("li",null,[N(r,{to:"/stock-overview",class:"nav-link"},{default:Ke(()=>[...e[1]||(e[1]=[_("Stock Overview",-1)])]),_:1})]),t("li",null,[N(r,{to:"/system-manager",class:"nav-link"},{default:Ke(()=>[...e[2]||(e[2]=[_("Control Panel",-1)])]),_:1})])])])])]),t("main",gs,[t("div",ms,[es(i.$slots,"default",{},void 0)])]),e[4]||(e[4]=X('<footer class="footer" data-v-4a6f8141><div class="container" data-v-4a6f8141><div class="footer-content" data-v-4a6f8141><span class="copyright" data-v-4a6f8141>¬© 2025 Investment Dashboard POC</span><span class="separator" data-v-4a6f8141>‚Ä¢</span><span class="attribution" data-v-4a6f8141> Market data powered by <a href="https://www.tradingview.com/" target="_blank" rel="noopener noreferrer" class="tradingview-link" data-v-4a6f8141> TradingView </a></span></div></div></footer>',1))])}const ps=P(rs,[["render",fs],["__scopeId","data-v-4a6f8141"]]),ys={name:"App",components:{Layout:ps}},vs={id:"app"};function ws(i,e,a,o,s,n){const r=E("router-view"),d=E("Layout");return u(),h("div",vs,[N(d,null,{default:Ke(()=>[N(r)]),_:1})])}const Ss=P(ys,[["render",ws]]);class bs{constructor(){this.preloadedScripts=new Set,this.scriptPromises=new Map}preloadScript(e){if(this.preloadedScripts.has(e))return Promise.resolve();if(this.scriptPromises.has(e))return this.scriptPromises.get(e);const a=new Promise((o,s)=>{const n=document.createElement("link");n.rel="preload",n.as="script",n.href=e,n.crossOrigin="anonymous",n.onload=()=>{this.preloadedScripts.add(e),o()},n.onerror=()=>{s(new Error(`Failed to preload script: ${e}`))},document.head.appendChild(n)});return this.scriptPromises.set(e,a),a}async preloadAllScripts(){const e=["https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js","https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js"];try{await Promise.all(e.map(a=>this.preloadScript(a))),console.log("All TradingView scripts preloaded successfully")}catch(a){console.warn("Some TradingView scripts failed to preload:",a)}}isPreloaded(e){return this.preloadedScripts.has(e)}}const dt=new bs;typeof window<"u"&&window.addEventListener("load",()=>{setTimeout(()=>{dt.preloadAllScripts()},1e3)});let _s=class{constructor(){this.metrics=new Map,this.startTimes=new Map}start(e){this.startTimes.set(e,performance.now()),console.log(`‚è±Ô∏è Started timing: ${e}`)}end(e){const a=this.startTimes.get(e);if(!a)return console.warn(`No start time found for: ${e}`),null;const o=performance.now()-a;return this.metrics.set(e,o),this.startTimes.delete(e),console.log(`‚úÖ Completed: ${e} - ${o.toFixed(2)}ms`),o}getMetric(e){return this.metrics.get(e)}getAllMetrics(){return Object.fromEntries(this.metrics)}clear(){this.metrics.clear(),this.startTimes.clear()}async measureAsync(e,a){this.start(e);try{const o=await a();return this.end(e),o}catch(o){throw this.end(e),console.error(`‚ùå Error in ${e}:`,o),o}}generateReport(){const e=this.getAllMetrics(),a={timestamp:new Date().toISOString(),metrics:e,summary:{totalOperations:Object.keys(e).length,totalTime:Object.values(e).reduce((o,s)=>o+s,0),averageTime:Object.values(e).reduce((o,s)=>o+s,0)/Object.keys(e).length||0,slowestOperation:this.getSlowestOperation(),fastestOperation:this.getFastestOperation()}};return console.log("üìä Performance Report:",a),a}getSlowestOperation(){let e={name:null,time:0};for(const[a,o]of this.metrics)o>e.time&&(e={name:a,time:o});return e}getFastestOperation(){let e={name:null,time:1/0};for(const[a,o]of this.metrics)o<e.time&&(e={name:a,time:o});return e.time===1/0?{name:null,time:0}:e}checkPerformanceWarnings(){const e=[],a=this.getAllMetrics();Object.entries(a).forEach(([s,n])=>{n>5e3&&e.push({type:"SLOW_OPERATION",operation:s,time:n,message:`Operation "${s}" took ${n.toFixed(2)}ms (>5s)`})});const o=Object.values(a).reduce((s,n)=>s+n,0);return o>1e4&&e.push({type:"SLOW_TOTAL_LOAD",time:o,message:`Total load time ${o.toFixed(2)}ms (>10s)`}),e.length>0&&console.warn("‚ö†Ô∏è Performance Warnings:",e),e}};const le=new _s;class ks{constructor(){this.memoryCache=new Map,this.localStoragePrefix="investment_dashboard_cache_",this.defaultTTL=24*60*60*1e3}set(e,a,o=this.defaultTTL){const s={data:a,timestamp:Date.now(),ttl:o};this.memoryCache.set(e,s);try{localStorage.setItem(this.localStoragePrefix+e,JSON.stringify(s))}catch(n){console.warn("Failed to save to localStorage:",n)}}get(e){if(this.memoryCache.has(e)){const a=this.memoryCache.get(e);if(this.isValid(a))return a.data;this.memoryCache.delete(e)}try{const a=localStorage.getItem(this.localStoragePrefix+e);if(a){const o=JSON.parse(a);if(this.isValid(o))return this.memoryCache.set(e,o),o.data;localStorage.removeItem(this.localStoragePrefix+e)}}catch(a){console.warn("Failed to read from localStorage:",a)}return null}isValid(e){return!e||!e.timestamp?!1:Date.now()-e.timestamp<e.ttl}has(e){return this.get(e)!==null}delete(e){this.memoryCache.delete(e);try{localStorage.removeItem(this.localStoragePrefix+e)}catch(a){console.warn("Failed to remove from localStorage:",a)}}clear(){this.memoryCache.clear();try{Object.keys(localStorage).forEach(a=>{a.startsWith(this.localStoragePrefix)&&localStorage.removeItem(a)})}catch(e){console.warn("Failed to clear localStorage:",e)}}getStats(){const e=this.memoryCache.size;let a=0;try{a=Object.keys(localStorage).filter(s=>s.startsWith(this.localStoragePrefix)).length}catch(o){console.warn("Failed to get localStorage stats:",o)}return{memoryCache:e,localStorage:a,totalSize:e+a}}async preload(e,a,o=this.defaultTTL){if(this.has(e))return this.get(e);try{const s=await a();return this.set(e,s,o),s}catch(s){throw console.error(`Failed to preload data for key ${e}:`,s),s}}async batchPreload(e){const a=new Map,o=e.map(async({key:s,loader:n,ttl:r})=>{try{const d=await this.preload(s,n,r);a.set(s,d)}catch(d){console.error(`Failed to preload ${s}:`,d),a.set(s,null)}});return await Promise.all(o),a}}const H=new ks,Ze={QUOTES_SNAPSHOT:"quotes_snapshot",DAILY_SNAPSHOT:"daily_snapshot",METADATA_BATCH:"metadata_batch",SYMBOLS_CONFIG:"symbols_config",STOCK_OVERVIEW_DATA:"stock_overview_data"};class Cs{constructor(){this.updateIntervals=new Map,this.isRunning=!1,this.config={technicalIndicators:{enabled:!0,interval:24*60*60*1e3,marketHoursOnly:!0,updateTimeWindow:{start:16.5,end:17},retryAttempts:3,retryDelay:5*60*1e3},metadata:{enabled:!0,interval:24*60*60*1e3,marketHoursOnly:!0,updateTimeWindow:{start:16.5,end:17},retryAttempts:2,retryDelay:30*60*1e3},cacheCleanup:{enabled:!0,interval:6*60*60*1e3,maxAge:7*24*60*60*1e3}},this.marketHours={preMarket:{start:4,end:9.5},regular:{start:9.5,end:16},afterMarket:{start:16,end:20}}}start(){if(this.isRunning){console.log("‚ö†Ô∏è Auto update scheduler is already running");return}console.log("üöÄ Starting auto update scheduler..."),this.isRunning=!0,this.performInitialUpdate(),this.scheduleUpdates(),console.log("‚úÖ Auto update scheduler started successfully")}stop(){if(!this.isRunning){console.log("‚ö†Ô∏è Auto update scheduler is not running");return}console.log("üõë Stopping auto update scheduler...");for(const[e,a]of this.updateIntervals)clearInterval(a),console.log(`   Cleared interval: ${e}`);this.updateIntervals.clear(),this.isRunning=!1,console.log("‚úÖ Auto update scheduler stopped")}async performInitialUpdate(){console.log("üîÑ Performing initial update check...");try{this.config.technicalIndicators.enabled&&await this.checkAndUpdateTechnicalIndicators(),this.config.metadata.enabled&&await this.checkAndUpdateMetadata(),this.config.cacheCleanup.enabled&&await this.performCacheCleanup()}catch(e){console.error("‚ùå Initial update failed:",e)}}scheduleUpdates(){if(this.config.technicalIndicators.enabled){const e=setInterval(()=>this.checkAndUpdateTechnicalIndicators(),this.config.technicalIndicators.interval);this.updateIntervals.set("technicalIndicators",e),console.log(`üìä Scheduled technical indicators update every ${this.config.technicalIndicators.interval/6e4} minutes`)}if(this.config.metadata.enabled){const e=setInterval(()=>this.checkAndUpdateMetadata(),this.config.metadata.interval);this.updateIntervals.set("metadata",e),console.log(`üìã Scheduled metadata update every ${this.config.metadata.interval/36e5} hours`)}if(this.config.cacheCleanup.enabled){const e=setInterval(()=>this.performCacheCleanup(),this.config.cacheCleanup.interval);this.updateIntervals.set("cacheCleanup",e),console.log(`üßπ Scheduled cache cleanup every ${this.config.cacheCleanup.interval/36e5} hours`)}}async checkAndUpdateTechnicalIndicators(){const e="auto_update_technical_indicators";le.start(e);try{if(console.log("üîç Checking technical indicators update..."),this.config.technicalIndicators.marketHoursOnly&&!this.isUpdateTimeWindow()){console.log("‚è∞ Outside update time window, skipping technical indicators update");return}if(!await this.checkTechnicalIndicatorsAge()){console.log("‚úÖ Technical indicators are up to date");return}console.log("üîÑ Updating technical indicators..."),await this.updateTechnicalIndicatorsData(),this.clearTechnicalIndicatorsCache(),console.log("‚úÖ Technical indicators updated successfully")}catch(a){console.error("‚ùå Technical indicators update failed:",a),await this.retryUpdate("technicalIndicators",a)}finally{le.end(e)}}async checkAndUpdateMetadata(){const e="auto_update_metadata";le.start(e);try{if(console.log("üîç Checking metadata update..."),!await this.checkMetadataAge()){console.log("‚úÖ Metadata is up to date");return}console.log("üîÑ Updating metadata..."),await this.updateMetadataData(),this.clearMetadataCache(),console.log("‚úÖ Metadata updated successfully")}catch(a){console.error("‚ùå Metadata update failed:",a),await this.retryUpdate("metadata",a)}finally{le.end(e)}}async checkTechnicalIndicatorsAge(){try{const e=window.location.hostname==="romarin-hsieh.github.io"?"/investment-dashboard/":"/",a=await fetch(`${e}data/technical-indicators/latest_index.json`);if(!a.ok)return console.log("üìä No precomputed data found, update needed"),!0;const o=await a.json(),s=new Date(o.generatedAt),r=(new Date-s)/(1e3*60*60);return console.log(`üìä Technical indicators age: ${r.toFixed(1)} hours`),r>24}catch(e){return console.error("Error checking technical indicators age:",e),!0}}async checkMetadataAge(){try{const e=H.get(Ze.METADATA_BATCH);if(!e)return!0;const o=(Date.now()-e.timestamp)/(1e3*60*60);return console.log(`üìã Metadata cache age: ${o.toFixed(1)} hours`),o>24}catch(e){return console.error("Error checking metadata age:",e),!0}}async updateTechnicalIndicatorsData(){console.log("üîÑ Technical indicators update requested"),console.log("‚ö†Ô∏è Note: Actual precomputation requires server-side execution");try{this.clearTechnicalIndicatorsCache(),console.log("‚úÖ Technical indicators cache cleared, data will be refreshed on next load")}catch(e){throw console.error("Failed to update technical indicators:",e),e}}async updateMetadataData(){H.delete(Ze.METADATA_BATCH),console.log("üóëÔ∏è Cleared metadata cache to force refresh")}clearTechnicalIndicatorsCache(){try{const e=[];for(let a=0;a<localStorage.length;a++){const o=localStorage.key(a);o&&(o.includes("technical_indicators_")||o.includes("precomputed_")||o.includes("TECHNICAL_INDICATORS")||o.includes("hybrid_technical_"))&&e.push(o)}e.forEach(a=>{localStorage.removeItem(a),console.log(`üóëÔ∏è Cleared cache key: ${a}`)}),typeof H<"u"&&H.clear&&console.log("üóëÔ∏è Cleared performance cache items"),console.log(`‚úÖ Cleared ${e.length} technical indicators cache entries`)}catch(e){console.error("Error clearing technical indicators cache:",e)}}clearMetadataCache(){H.delete(Ze.METADATA_BATCH),H.delete(Ze.STOCK_OVERVIEW_DATA),console.log("üóëÔ∏è Cleared metadata and stock overview cache")}async performCacheCleanup(){console.log("üßπ Performing cache cleanup...");try{const e=H.getStats();console.log("üìä Cache stats before cleanup:",e);const a=H.getStats();console.log("üìä Cache stats after cleanup:",a),console.log("‚úÖ Cache cleanup completed")}catch(e){console.error("‚ùå Cache cleanup failed:",e)}}async retryUpdate(e,a){const o=this.config[e];!o||!o.retryAttempts||(console.log(`üîÑ Retrying ${e} update in ${o.retryDelay/6e4} minutes...`),setTimeout(async()=>{try{e==="technicalIndicators"?await this.checkAndUpdateTechnicalIndicators():e==="metadata"&&await this.checkAndUpdateMetadata()}catch(s){console.error(`‚ùå Retry failed for ${e}:`,s)}},o.retryDelay))}isUpdateTimeWindow(){const e=new Date,a=this.convertToEST(e),o=a.getHours()+a.getMinutes()/60,s=this.config.technicalIndicators.updateTimeWindow,n=o>=s.start&&o<=s.end;return n&&console.log(`üìÖ In update time window: ${a.toLocaleTimeString("en-US",{timeZone:"America/New_York"})} EST`),n}isMarketHours(){const e=new Date,a=this.convertToEST(e),o=a.getHours()+a.getMinutes()/60;return o>=this.marketHours.preMarket.start&&o<=this.marketHours.preMarket.end||o>=this.marketHours.regular.start&&o<=this.marketHours.regular.end||o>=this.marketHours.afterMarket.start&&o<=this.marketHours.afterMarket.end}convertToEST(e){const o=new Intl.DateTimeFormat("en-US",{timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).formatToParts(e),s=parseInt(o.find(y=>y.type==="year").value),n=parseInt(o.find(y=>y.type==="month").value)-1,r=parseInt(o.find(y=>y.type==="day").value),d=parseInt(o.find(y=>y.type==="hour").value),c=parseInt(o.find(y=>y.type==="minute").value),g=parseInt(o.find(y=>y.type==="second").value);return new Date(s,n,r,d,c,g)}getStatus(){return{isRunning:this.isRunning,activeIntervals:Array.from(this.updateIntervals.keys()),config:this.config,nextUpdates:this.getNextUpdateTimes()}}getNextUpdateTimes(){const e=Date.now();return{technicalIndicators:new Date(e+this.config.technicalIndicators.interval),metadata:new Date(e+this.config.metadata.interval),cacheCleanup:new Date(e+this.config.cacheCleanup.interval)}}async triggerManualUpdate(e="all"){console.log(`üîÑ Manual update triggered: ${e}`);try{(e==="all"||e==="technicalIndicators")&&await this.checkAndUpdateTechnicalIndicators(),(e==="all"||e==="metadata")&&await this.checkAndUpdateMetadata(),(e==="all"||e==="cache")&&await this.performCacheCleanup(),console.log("‚úÖ Manual update completed")}catch(a){throw console.error("‚ùå Manual update failed:",a),a}}}const Y=new Cs;typeof window<"u"&&window.location.hostname!=="localhost"&&setTimeout(()=>{Y.start()},3e4);class Ts{constructor(){this.baseUrl=this.getCorrectBaseUrl(),this.cache=new Map,this.cacheTimeout=60*60*1e3,this.indexCache=null,this.indexCacheTimestamp=null,this.indexCacheTimeout=10*60*1e3,console.log("PrecomputedIndicatorsAPI initialized:",{hostname:window.location.hostname,pathname:window.location.pathname,baseUrl:this.baseUrl,fullUrl:window.location.href})}getCorrectBaseUrl(){const e=window.location.hostname,a=window.location.pathname;return e==="romarin-hsieh.github.io"?(a.includes("/investment-dashboard/"),"/investment-dashboard/data/technical-indicators/"):"/data/technical-indicators/"}getTodayString(){return new Date().toISOString().split("T")[0]}async getCachedIndex(){if(this.indexCache&&this.indexCacheTimestamp&&Date.now()-this.indexCacheTimestamp<this.indexCacheTimeout)return console.log("üì¶ Using cached index data"),this.indexCache;try{console.log("üîÑ Loading latest_index.json...");const e=await fetch(`${this.baseUrl}latest_index.json`);if(e.ok){const a=await e.json();return this.indexCache=a,this.indexCacheTimestamp=Date.now(),console.log(`‚úÖ Loaded latest_index.json: ${a.symbols.length} symbols, date: ${a.date}`),a}else return console.warn("‚ö†Ô∏è latest_index.json not found, using fallback"),null}catch(e){return console.error("‚ùå Failed to load latest_index.json:",e),null}}async getTechnicalIndicators(e){const a=`precomputed_${e}`;if(this.cache.has(a)){const o=this.cache.get(a);if(Date.now()-o.timestamp<this.cacheTimeout)return console.log(`üì¶ Using precomputed cache for ${e}`),o.data}try{const o=await this.getCachedIndex();let s=this.getTodayString();if(o&&(s=o.date,!o.symbols.includes(e)))throw new Error(`Symbol ${e} not found in precomputed data`);const n=`${this.baseUrl}${s}_${e}.json`;console.log(`üîç Fetching precomputed data for ${e} from ${n}`);const r=await fetch(n);if(!r.ok)throw new Error(`Precomputed data not found for ${e} (${r.status})`);const d=await r.json(),c={...d.indicators,source:"Precomputed",lastUpdated:d.computedAt,dataAge:this.calculateDataAge(d.computedAt),precomputedDate:d.date,symbol:e};return this.cache.set(a,{data:c,timestamp:Date.now()}),console.log(`‚úÖ Loaded precomputed data for ${e} (date: ${s}, age: ${c.dataAge})`),c}catch(o){throw console.error(`‚ùå Failed to load precomputed data for ${e}:`,o),o}}calculateDataAge(e){const a=new Date,o=new Date(e),s=a-o,n=Math.floor(s/(1e3*60*60)),r=Math.floor(s%(1e3*60*60)/(1e3*60));return n>0?`${n}h ${r}m ago`:`${r}m ago`}async getAvailableData(){return await this.getCachedIndex()}async isPrecomputedDataAvailable(e){try{const a=await this.getCachedIndex();return a&&a.symbols.includes(e)}catch{return!1}}clearCache(){this.cache.clear(),this.indexCache=null,this.indexCacheTimestamp=null,console.log("üóëÔ∏è Cleared all precomputed caches")}getCacheStats(){const e={size:this.cache.size,indexCached:!!this.indexCache,indexAge:this.indexCacheTimestamp?Date.now()-this.indexCacheTimestamp:null,items:[]};for(const[a,o]of this.cache.entries())e.items.push({key:a,age:Date.now()-o.timestamp,expired:Date.now()-o.timestamp>this.cacheTimeout});return e}}const rt=new Ts;class Ds{constructor(){this.cachePrefix="technical_indicators_",this.cacheTimeout=24*60*60*1e3,this.memoryCache=new Map}getCacheKey(e){const a=new Date().toISOString().split("T")[0];return`${this.cachePrefix}${e}_${a}`}async getTechnicalIndicators(e){const a=this.getCacheKey(e);if(this.memoryCache.has(a)){const o=this.memoryCache.get(a);if(Date.now()-o.timestamp<this.cacheTimeout)return console.log(`Using memory cache for ${e}`),{...o.data,source:"Daily Cache (Memory)"};this.memoryCache.delete(a)}try{const o=localStorage.getItem(a);if(o){const s=JSON.parse(o);if(Date.now()-s.timestamp<this.cacheTimeout)return console.log(`Using localStorage cache for ${e}`),this.memoryCache.set(a,s),{...s.data,source:"Daily Cache (LocalStorage)"};localStorage.removeItem(a)}}catch(o){console.warn(`Failed to read cache for ${e}:`,o)}return null}async setTechnicalIndicators(e,a){const o=this.getCacheKey(e),s={data:a,timestamp:Date.now(),symbol:e,date:new Date().toISOString().split("T")[0]};try{localStorage.setItem(o,JSON.stringify(s)),this.memoryCache.set(o,s),console.log(`Cached technical indicators for ${e}`),this.cleanupOldCache()}catch(n){console.warn(`Failed to cache technical indicators for ${e}:`,n)}}cleanupOldCache(){try{const e=[];for(let a=0;a<localStorage.length;a++){const o=localStorage.key(a);if(o&&o.startsWith(this.cachePrefix))try{const s=JSON.parse(localStorage.getItem(o));Date.now()-s.timestamp>this.cacheTimeout&&e.push(o)}catch{e.push(o)}}e.forEach(a=>{localStorage.removeItem(a),console.log(`Removed expired cache: ${a}`)});for(const[a,o]of this.memoryCache.entries())Date.now()-o.timestamp>this.cacheTimeout&&this.memoryCache.delete(a)}catch(e){console.warn("Failed to cleanup old cache:",e)}}clearSymbolCache(e){const a=this.getCacheKey(e);localStorage.removeItem(a),this.memoryCache.delete(a),console.log(`Cleared cache for ${e}`)}clearAllCache(){try{const e=[];for(let a=0;a<localStorage.length;a++){const o=localStorage.key(a);o&&o.startsWith(this.cachePrefix)&&e.push(o)}e.forEach(a=>localStorage.removeItem(a)),this.memoryCache.clear(),console.log(`Cleared all technical indicators cache (${e.length} items)`)}catch(e){console.warn("Failed to clear all cache:",e)}}getCacheStats(){const e={memoryCache:this.memoryCache.size,localStorageCache:0,totalSize:0};try{for(let a=0;a<localStorage.length;a++){const o=localStorage.key(a);if(o&&o.startsWith(this.cachePrefix)){e.localStorageCache++;const s=localStorage.getItem(o);s&&(e.totalSize+=s.length)}}}catch(a){console.warn("Failed to get cache stats:",a)}return e}}const ae=new Ds,nt=1e-12;function As(i){return Math.max(0,Math.min(100,i))}function Is(i,e){const a=new Array(i.length);for(let o=0;o<i.length;o++)if(o<e-1)a[o]=NaN;else{let s=-1/0;for(let n=o-e+1;n<=o;n++)isNaN(i[n])||(s=Math.max(s,i[n]));a[o]=s===-1/0?NaN:s}return a}function xs(i,e){const a=new Array(i.length);for(let o=0;o<i.length;o++)if(o<e-1)a[o]=NaN;else{let s=1/0;for(let n=o-e+1;n<=o;n++)isNaN(i[n])||(s=Math.min(s,i[n]));a[o]=s===1/0?NaN:s}return a}function Ms(i,e,a="strict",o=null){if(e<=0)throw new Error("Period must be positive");const s=i.length,n=new Array(s).fill(NaN);o===null&&(o=e);for(let r=0;r<s;r++){if(r<e-1)continue;const d=i.slice(r-e+1,r+1);if(a==="strict")d.some(c=>isNaN(c))?n[r]=NaN:n[r]=d.reduce((c,g)=>c+g,0)/d.length;else if(a==="skipna"){const c=d.filter(g=>!isNaN(g));c.length<o?n[r]=NaN:n[r]=c.reduce((g,y)=>g+y,0)/c.length}}return n}function st(i,e,a=null,o="sma_seed",s="strict_recover"){if(e<=0)throw new Error("Period must be positive");const n=i.length,r=new Array(n).fill(NaN);if(a===null&&(a=2/(e+1)),a<=0||a>1)throw new Error("Alpha must be in (0, 1]");if(o==="first_value"){let d=-1;for(let c=0;c<n;c++)if(!isNaN(i[c])){d=c;break}if(d===-1)return r;r[d]=i[d];for(let c=d+1;c<n;c++)isNaN(i[c])?s==="hold_last"?r[c]=r[c-1]:r[c]=NaN:isNaN(r[c-1])?s==="strict_recover"?r[c]=NaN:r[c]=NaN:r[c]=a*i[c]+(1-a)*r[c-1]}else if(o==="sma_seed"){for(let d=0;d<n;d++)if(!(d<e-1))if(d===e-1){const c=i.slice(0,e);c.some(g=>isNaN(g))?r[d]=NaN:r[d]=c.reduce((g,y)=>g+y,0)/c.length}else if(isNaN(i[d]))s==="hold_last"?r[d]=r[d-1]:s==="strict_break"?r[d]=NaN:s==="strict_recover"&&(r[d]=NaN);else if(isNaN(r[d-1]))if(s==="strict_recover"){const c=i.slice(d-e+1,d+1);c.some(g=>isNaN(g))?r[d]=NaN:r[d]=c.reduce((g,y)=>g+y,0)/c.length}else r[d]=NaN;else r[d]=a*i[d]+(1-a)*r[d-1]}return r}function he(i,e){if(e<=0)throw new Error("Period must be positive");const a=new Array(i.length);for(let c=0;c<e-1;c++)a[c]=NaN;if(i.length<e)return console.log(`Wilder: Insufficient data length ${i.length} < ${e}`),a;let o=0,s=0,n=[];for(let c=0;c<i.length&&n.length<e;c++)isNaN(i[c])||(n.push(c),o+=i[c],s++);if(console.log(`Wilder: Found ${s} valid values in first ${e} positions for SMA initialization`),s<e)return console.warn(`Wilder: Insufficient valid data for SMA initialization: ${s} < ${e}`),a;const r=Math.max(e-1,n[e-1]);a[r]=o/e,console.log(`Wilder: Initialized at index ${r} with value ${a[r]}`);for(let c=r+1;c<i.length;c++)isNaN(a[c-1])||isNaN(i[c])?a[c]=NaN:a[c]=(a[c-1]*(e-1)+i[c])/e;const d=a.filter(c=>!isNaN(c)).length;return console.log(`Wilder: Generated ${d} valid smoothed values`),a}function lt(i,e=5,a=null,o="sma_seed",s="strict_recover"){return st(i,e,a,o,s)}function ct(i,e=5,a="strict",o=null){return Ms(i,e,a,o)}function qt(i,e,a=26){const o=Is(i,a),s=xs(e,a),n=new Array(i.length);for(let r=0;r<i.length;r++)isNaN(o[r])||isNaN(s[r])?n[r]=NaN:n[r]=(o[r]+s[r])/2;return n}function Ns(i,e,a=9){return qt(i,e,a)}function Ps(i,e=26){if(e<0)throw new Error("Shift must be non-negative");const a=new Array(i.length);for(let o=0;o<i.length;o++)o+e<i.length?a[o]=i[o]:a[o]=NaN;return a}function Ls(i,e,a=20){const o=new Array(i.length);for(let s=0;s<i.length;s++)if(s<a-1)o[s]=NaN;else{let n=0,r=0;for(let d=s-a+1;d<=s;d++)!isNaN(i[d])&&!isNaN(e[d])&&(n+=i[d]*e[d],r+=e[d]);o[s]=r<=nt?NaN:n/r}return o}function Rs(i,e=14){if(i.length<e+1)return new Array(i.length).fill(NaN);const a=new Array(i.length),o=new Array(i.length),s=new Array(i.length);a[0]=NaN,o[0]=NaN,s[0]=NaN;for(let c=1;c<i.length;c++)isNaN(i[c])||isNaN(i[c-1])?(a[c]=NaN,o[c]=NaN,s[c]=NaN):(a[c]=i[c]-i[c-1],o[c]=Math.max(a[c],0),s[c]=Math.max(-a[c],0));const n=he(o.slice(1),e),r=he(s.slice(1),e),d=new Array(i.length);d[0]=NaN;for(let c=1;c<i.length;c++){const g=n[c-1],y=r[c-1];if(isNaN(g)||isNaN(y))d[c]=NaN;else if(y<=nt)d[c]=100;else{const k=100-100/(1+g/y);d[c]=As(k)}}return d}function Es(i,e,a,o=14){const s=Math.min(i.length,e.length,a.length);if(s<o*2)return console.warn(`ADX: Insufficient data length ${s} < ${o*2} for period ${o}`),{adx:new Array(s).fill(NaN),plusDI:new Array(s).fill(NaN),minusDI:new Array(s).fill(NaN)};let n=0;for(let f=0;f<s;f++)!isNaN(i[f])&&!isNaN(e[f])&&!isNaN(a[f])&&n++;if(console.log(`ADX: Processing ${s} data points, ${n} valid OHLC points`),n<o*2)return console.warn(`ADX: Insufficient valid OHLC data ${n} < ${o*2}`),{adx:new Array(s).fill(NaN),plusDI:new Array(s).fill(NaN),minusDI:new Array(s).fill(NaN)};const r=new Array(s),d=new Array(s),c=new Array(s),g=new Array(s),y=new Array(s);r[0]=NaN,d[0]=NaN,c[0]=NaN,g[0]=NaN,y[0]=NaN;for(let f=1;f<s;f++){if(isNaN(i[f])||isNaN(e[f])||isNaN(a[f])||isNaN(i[f-1])||isNaN(e[f-1])||isNaN(a[f-1])){r[f]=NaN,d[f]=NaN,c[f]=NaN,g[f]=NaN,y[f]=NaN;continue}r[f]=i[f]-i[f-1],d[f]=e[f-1]-e[f],r[f]>d[f]&&r[f]>0?c[f]=r[f]:c[f]=0,d[f]>r[f]&&d[f]>0?g[f]=d[f]:g[f]=0;const W=i[f]-e[f],w=Math.abs(i[f]-a[f-1]),I=Math.abs(e[f]-a[f-1]);y[f]=Math.max(W,w,I)}const p=he(y.slice(1),o),k=he(c.slice(1),o),D=he(g.slice(1),o);console.log(`ADX: Wilder smoothing results - TR valid: ${p.filter(f=>!isNaN(f)).length}, +DM valid: ${k.filter(f=>!isNaN(f)).length}, -DM valid: ${D.filter(f=>!isNaN(f)).length}`);const C=new Array(s),A=new Array(s),b=new Array(s);C[0]=NaN,A[0]=NaN,b[0]=NaN;for(let f=1;f<s;f++){const W=p[f-1],w=k[f-1],I=D[f-1];if(isNaN(W)||isNaN(w)||isNaN(I)||W<=nt)C[f]=NaN,A[f]=NaN,b[f]=NaN;else{C[f]=100*w/W,A[f]=100*I/W;const m=C[f]+A[f];m<=nt?b[f]=NaN:b[f]=100*Math.abs(C[f]-A[f])/m}}const F=he(b.slice(1),o);console.log(`ADX: Final ADX smoothing - DX valid: ${b.filter(f=>!isNaN(f)).length}, ADX valid: ${F.filter(f=>!isNaN(f)).length}`);const M=new Array(s);M[0]=NaN;for(let f=1;f<s;f++)M[f]=F[f-1];const O=M.filter(f=>!isNaN(f)).length;return console.log(`ADX: Final result - ${O} valid ADX values out of ${s} total`),{adx:M,plusDI:C,minusDI:A}}function $s(i,e=12,a=26,o=9){a<=e&&console.warn("Slow period should be greater than fast period");const s=st(i,e),n=st(i,a),r=new Array(i.length);for(let g=0;g<i.length;g++)isNaN(s[g])||isNaN(n[g])?r[g]=NaN:r[g]=s[g]-n[g];const d=st(r,o),c=new Array(i.length);for(let g=0;g<i.length;g++)isNaN(r[g])||isNaN(d[g])?c[g]=NaN:c[g]=r[g]-d[g];return{macd:r,signal:d,histogram:c}}function Us(i){const{open:e,high:a,low:o,close:s,volume:n}=i,r=s.length;if(a.length!==r||o.length!==r||e.length!==r||n.length!==r)throw new Error("All OHLCV arrays must have the same length");const d={MA_5:lt(s,5),MA_10:lt(s,10),MA_30:lt(s,30),SMA_5:ct(s,5),SMA_10:ct(s,10),SMA_30:ct(s,30),ICHIMOKU_BASELINE_26:qt(a,o,26),ICHIMOKU_CONVERSIONLINE_9:Ns(a,o,9),ICHIMOKU_LAGGINGSPAN_26:Ps(s,26),VWMA_20:Ls(s,n,20),RSI_14:Rs(s,14),...(()=>{const c=$s(s,12,26,9);return{MACD_12_26_9:c.macd,MACD_SIGNAL_9:c.signal,MACD_HIST:c.histogram}})(),...(()=>{const c=Es(a,o,s,14);return{ADX_14:c.adx,ADX_14_PLUS_DI:c.plusDI,ADX_14_MINUS_DI:c.minusDI}})()};for(const[c,g]of Object.entries(d))g.length!==r&&console.error(`Length mismatch for ${c}: expected ${r}, got ${g.length}`);return d}class Fs{constructor(){this.corsProxies=["https://api.allorigins.win/raw?url=","https://corsproxy.io/?","https://cors.sh/","https://proxy-cors.isomorphic-git.org/","https://thingproxy.freeboard.io/fetch/","https://cors-proxy.htmldriven.com/?url=","https://cors-anywhere.herokuapp.com/"],this.baseUrl="https://query1.finance.yahoo.com/v8/finance/chart/",this.cache=new Map,this.cacheTimeout=5*60*1e3,this.currentProxyIndex=0}async getTechnicalIndicators(e){const a=await ae.getTechnicalIndicators(e);if(a)return a;const o=await this.fetchTechnicalIndicatorsFromAPI(e);return o&&!o.error&&await ae.setTechnicalIndicators(e,o),o}async fetchTechnicalIndicatorsFromAPI(e){var o,s;const a=`technical_${e}`;if(this.cache.has(a)){const n=this.cache.get(a);if(Date.now()-n.timestamp<this.cacheTimeout)return console.log(`Using cached data for ${e}`),n.data}for(let n=0;n<this.corsProxies.length;n++)try{const r=(this.currentProxyIndex+n)%this.corsProxies.length,d=this.corsProxies[r];console.log(`Fetching data for ${e} using proxy ${r+1}...`);const c=`${this.baseUrl}${e}?interval=1d&range=6mo&indicators=quote&includePrePost=false`,g=`${d}${encodeURIComponent(c)}`;console.log(`Request URL: ${g}`);const y=await fetch(g,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(console.log(`Response status: ${y.status}`),!y.ok)throw new Error(`HTTP error! status: ${y.status}`);const p=await y.json();if(console.log("Raw data structure:",p),!p.chart||!p.chart.result||p.chart.result.length===0)throw new Error("No chart data available");const k=p.chart.result[0];if(!k.indicators||!k.indicators.quote||!k.indicators.quote[0])throw new Error("Invalid data structure - missing indicators");const D=k.indicators.quote[0],C={open:D.open||[],high:D.high||[],low:D.low||[],close:D.close||[],volume:D.volume||[]},A=C.close.length,b={open:new Array(A),high:new Array(A),low:new Array(A),close:new Array(A),volume:new Array(A)};let F=0;for(let w=0;w<A;w++)b.open[w]=C.open[w]!==null?C.open[w]:NaN,b.high[w]=C.high[w]!==null?C.high[w]:NaN,b.low[w]=C.low[w]!==null?C.low[w]:NaN,b.close[w]=C.close[w]!==null?C.close[w]:NaN,b.volume[w]=C.volume[w]!==null?C.volume[w]:NaN,!isNaN(b.open[w])&&!isNaN(b.high[w])&&!isNaN(b.low[w])&&!isNaN(b.close[w])&&F++;if(console.log(`Found ${A} total data points, ${F} valid OHLC points for ${e}`),F<28&&console.warn(`‚ö†Ô∏è Insufficient valid data for ADX calculation: ${F} < 28`),A<50)throw new Error(`Insufficient data points (${A}) for technical analysis`);const M=Us(b),O=w=>{if(!w||!Array.isArray(w))return console.warn("getLastValue: Invalid series data"),null;for(let I=w.length-1;I>=0;I--){const m=w[I];if(m!=null&&!isNaN(m)&&isFinite(m))return console.log(`getLastValue: Found valid value ${m} at index ${I} of ${w.length}`),m}return console.warn(`getLastValue: No valid values found in series of length ${w.length}`),null},f=(w,I=null)=>{const m=O(w),V=O(b.close);let B="NEUTRAL";return I&&m!==null&&V!==null&&(I.type==="price_comparison"?V>m*I.buy?B="BUY":V<m*I.sell&&(B="SELL"):I.type==="rsi"?m>I.overbought?B="OVERBOUGHT":m<I.oversold&&(B="OVERSOLD"):I.type==="adx"&&(m>I.strong?B="STRONG_TREND":m<I.weak&&(B="WEAK_TREND"))),{value:m!==null?m.toFixed(2):null,signal:B,currentPrice:V!==null?V.toFixed(2):null}},W={ma5:f(M.MA_5,{type:"price_comparison",buy:1.02,sell:.98}),sma5:f(M.SMA_5,{type:"price_comparison",buy:1.02,sell:.98}),ma10:f(M.MA_10,{type:"price_comparison",buy:1.02,sell:.98}),sma10:f(M.SMA_10,{type:"price_comparison",buy:1.02,sell:.98}),ma30:f(M.MA_30,{type:"price_comparison",buy:1.02,sell:.98}),sma30:f(M.SMA_30,{type:"price_comparison",buy:1.02,sell:.98}),sma50:{value:null,signal:"N/A"},ichimokuBaseLine:f(M.ICHIMOKU_BASELINE_26,{type:"price_comparison",buy:1.01,sell:.99}),ichimokuConversionLine:f(M.ICHIMOKU_CONVERSIONLINE_9,{type:"price_comparison",buy:1.01,sell:.99}),ichimokuLaggingSpan:f(M.ICHIMOKU_LAGGINGSPAN_26),vwma20:f(M.VWMA_20,{type:"price_comparison",buy:1.02,sell:.98}),rsi14:f(M.RSI_14,{type:"rsi",overbought:70,oversold:30}),adx14:(()=>{console.log("üîç Processing ADX results..."),console.log("ADX_14 series:",M.ADX_14),console.log("ADX_14_PLUS_DI series:",M.ADX_14_PLUS_DI),console.log("ADX_14_MINUS_DI series:",M.ADX_14_MINUS_DI);const w=O(M.ADX_14),I=O(M.ADX_14_PLUS_DI),m=O(M.ADX_14_MINUS_DI);console.log("ADX extracted values:",{adxValue:w,plusDI:I,minusDI:m});let V="NEUTRAL";w!==null&&!isNaN(w)&&(w>25?V="STRONG_TREND":w<20&&(V="WEAK_TREND"));const B={value:w!==null&&!isNaN(w)?w.toFixed(2):null,signal:V,plusDI:I!==null&&!isNaN(I)?I.toFixed(2):null,minusDI:m!==null&&!isNaN(m)?m.toFixed(2):null};return console.log("ADX final result:",B),B})(),macd:(()=>{const w=O(M.MACD_12_26_9),I=O(M.MACD_SIGNAL_9),m=O(M.MACD_HIST);let V="NEUTRAL";return w!==null&&I!==null&&m!==null&&(w>I&&m>0?V="BUY":w<I&&m<0&&(V="SELL")),{value:w!==null?w.toFixed(2):null,signal:V,signalLine:I!==null?I.toFixed(2):null,histogram:m!==null?m.toFixed(2):null}})(),lastUpdated:new Date().toISOString(),dataPoints:A,proxy:`Proxy ${r+1}`,source:"Yahoo Finance API (Fresh) - Core v1.0.0",fullSeries:M,priceRange:{min:Math.min(...b.close.filter(w=>!isNaN(w))).toFixed(2),max:Math.max(...b.close.filter(w=>!isNaN(w))).toFixed(2),latest:((o=O(b.close))==null?void 0:o.toFixed(2))||"N/A",first:((s=b.close.find(w=>!isNaN(w)))==null?void 0:s.toFixed(2))||"N/A"}};return console.log(`Price data for ${e}:`,{dataPoints:A,priceRange:W.priceRange,samplePrices:b.close.slice(-10).filter(w=>!isNaN(w))}),console.log(`Calculated indicators for ${e}:`,W),this.cache.set(a,{data:W,timestamp:Date.now()}),this.currentProxyIndex=r,W}catch(r){if(console.warn(`Proxy ${n+1} failed for ${e}:`,r.message),n===this.corsProxies.length-1)return console.error(`All proxies failed for ${e}:`,r),{ma5:{value:null,signal:"N/A"},sma5:{value:null,signal:"N/A"},ma10:{value:null,signal:"N/A"},sma10:{value:null,signal:"N/A"},ma30:{value:null,signal:"N/A"},sma30:{value:null,signal:"N/A"},sma50:{value:null,signal:"N/A"},ichimokuBaseLine:{value:null,signal:"N/A"},ichimokuConversionLine:{value:null,signal:"N/A"},ichimokuLaggingSpan:{value:null,signal:"N/A"},vwma20:{value:null,signal:"N/A"},rsi14:{value:null,signal:"N/A"},adx14:{value:null,signal:"N/A"},macd:{value:null,signal:"N/A"},lastUpdated:new Date().toISOString(),error:`All proxies failed: ${r.message}`,source:"Error"}}}clearCache(){this.cache.clear()}async getStockInfo(e){const a=`info_${e}`,o=24*60*60*1e3;if(this.cache.has(a)){const s=this.cache.get(a);if(Date.now()-s.timestamp<o)return console.log(`Using cached stock info for ${e}`),s.data}for(let s=0;s<this.corsProxies.length;s++)try{const n=(this.currentProxyIndex+s)%this.corsProxies.length,r=this.corsProxies[n];console.log(`Fetching stock info for ${e} using proxy ${n+1}...`);const d=`https://query1.finance.yahoo.com/v10/finance/quoteSummary/${e}?modules=summaryProfile,price,defaultKeyStatistics`,c=`${r}${encodeURIComponent(d)}`,g=await fetch(c,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(!g.ok)throw new Error(`HTTP error! status: ${g.status}`);const y=await g.json();if(!y.quoteSummary||!y.quoteSummary.result||y.quoteSummary.result.length===0)throw new Error("No quoteSummary data available");const p=y.quoteSummary.result[0],k=p.summaryProfile||{},D=p.price||{},C=p.defaultKeyStatistics||{},A={symbol:e,sector:k.sector||"Unknown",industry:k.industry||"Unknown Industry",exchange:D.exchangeName||D.exchange||this.getDefaultExchange(e),marketCap:D.marketCap?D.marketCap.raw:null,marketCapFormatted:D.marketCap?D.marketCap.fmt:"N/A",currency:D.currency||"USD",country:k.country||"Unknown",website:k.website||null,employees:k.fullTimeEmployees||null,businessSummary:k.longBusinessSummary||null,marketCapCategory:this.getMarketCapCategory(D.marketCap?D.marketCap.raw:null),lastUpdated:new Date().toISOString(),source:"Yahoo Finance API (Live)",proxy:`Proxy ${n+1}`,confidence:.95};return console.log(`Stock info for ${e}:`,A),this.cache.set(a,{data:A,timestamp:Date.now()}),this.currentProxyIndex=n,A}catch(n){if(console.warn(`Proxy ${s+1} failed for stock info ${e}:`,n.message),s===this.corsProxies.length-1){console.error(`All proxies failed for stock info ${e}:`,n);const r={symbol:e,sector:"Unknown",industry:"Unknown Industry",exchange:this.getDefaultExchange(e),marketCap:null,marketCapFormatted:"N/A",currency:"USD",country:"Unknown",website:null,employees:null,businessSummary:null,marketCapCategory:"unknown",lastUpdated:new Date().toISOString(),source:"Default (API Failed)",error:`All proxies failed: ${n.message}`,confidence:0};return this.cache.set(a,{data:r,timestamp:Date.now()}),r}}}getDefaultExchange(e){const a=["AAPL","MSFT","GOOGL","GOOG","AMZN","TSLA","NVDA","META","NFLX","RKLB","ASTS","RIVN","MDB","ONDS","PL","AVAV","CRM","AVGO","LEU","SMR","CRWV","IONQ","PLTR","HIMS"],o=["TSM","ORCL","RDW"];return a.includes(e)?"NASDAQ":o.includes(e)?"NYSE":"NASDAQ"}getMarketCapCategory(e){return!e||e<=0?"unknown":e>=2e11?"mega_cap":e>=1e10?"large_cap":e>=2e9?"mid_cap":e>=3e8?"small_cap":"micro_cap"}clearDailyCache(){ae.clearAllCache()}getCacheStats(){const e={};for(const[a,o]of this.cache.entries())e[a]={age:Date.now()-o.timestamp,expired:Date.now()-o.timestamp>this.cacheTimeout};return{apiCache:e,dailyCache:ae.getCacheStats()}}}const ee=new Fs;class Os{constructor(){this.preferPrecomputed=!0,this.maxPrecomputedAge=24*60*60*1e3,this.fallbackToRealtime=!0}async getTechnicalIndicators(e){console.log(`üîç Getting technical indicators for ${e}`);try{if(this.preferPrecomputed){const o=await this.tryPrecomputedData(e);if(o&&this.isADXValid(o))return console.log(`‚úÖ Using precomputed data with valid ADX for ${e}`),o;o&&console.log(`‚ö†Ô∏è Precomputed data has invalid ADX for ${e}, falling back to real-time`)}const a=await ae.getTechnicalIndicators(e);if(a&&this.isADXValid(a))return console.log(`üì¶ Using daily cache with valid ADX for ${e}`),a;if(a&&console.log(`‚ö†Ô∏è Cached data has invalid ADX for ${e}, falling back to real-time`),this.fallbackToRealtime){console.log(`‚ö° Using real-time calculation for ${e}`);const o=await ee.fetchTechnicalIndicatorsFromAPI(e);if(o&&!o.error)return await ae.setTechnicalIndicators(e,o),o}throw new Error("All data sources failed")}catch(a){return console.error(`‚ùå Failed to get technical indicators for ${e}:`,a),this.createErrorResponse(e,a.message)}}isADXValid(e){if(!e||!e.adx14)return!1;const a=e.adx14.value;if(a==null||a==="N/A")return!1;if(e.fullSeries&&e.fullSeries.ADX_14){const s=e.fullSeries.ADX_14.filter(n=>n!=null&&!isNaN(n)).length;if(s<5)return console.log(`ADX validation failed: only ${s} valid values`),!1}return!0}async tryPrecomputedData(e){try{console.log(`üîÑ Trying precomputed data for ${e}`);const a=await rt.getTechnicalIndicators(e),o=new Date(a.lastUpdated);return Date.now()-o.getTime()<=this.maxPrecomputedAge?(console.log(`‚úÖ Using precomputed data for ${e} (${a.dataAge})`),{...a,source:`Precomputed (${a.dataAge})`,loadTime:"<50ms"}):(console.log(`‚è∞ Precomputed data too old for ${e} (${a.dataAge})`),null)}catch(a){return console.log(`‚ùå Precomputed data not available for ${e}: ${a.message}`),null}}createErrorResponse(e,a){return{ma5:{value:null,signal:"N/A"},sma5:{value:null,signal:"N/A"},ma10:{value:null,signal:"N/A"},sma10:{value:null,signal:"N/A"},ma30:{value:null,signal:"N/A"},sma30:{value:null,signal:"N/A"},sma50:{value:null,signal:"N/A"},ichimokuBaseLine:{value:null,signal:"N/A"},ichimokuConversionLine:{value:null,signal:"N/A"},ichimokuLaggingSpan:{value:null,signal:"N/A"},vwma20:{value:null,signal:"N/A"},rsi14:{value:null,signal:"N/A"},adx14:{value:null,signal:"N/A"},macd:{value:null,signal:"N/A"},lastUpdated:new Date().toISOString(),error:a,source:"Error",symbol:e}}async refreshTechnicalIndicators(e){console.log(`üîÑ Force refreshing data for ${e}`),ae.clearSymbolCache(e),rt.clearCache();const a=this.fallbackToRealtime,o=this.preferPrecomputed;this.fallbackToRealtime=!0,this.preferPrecomputed=!1;try{return await this.getTechnicalIndicators(e)}finally{this.fallbackToRealtime=a,this.preferPrecomputed=o}}async getBatchTechnicalIndicators(e,a=3){const o=new Map,s=[];for(let n=0;n<e.length;n+=a)s.push(e.slice(n,n+a));console.log(`üì¶ Processing ${e.length} symbols in ${s.length} batches`);for(const n of s){const r=n.map(async c=>{try{const g=await this.getTechnicalIndicators(c);return{symbol:c,success:!0,data:g}}catch(g){return{symbol:c,success:!1,error:g.message}}});(await Promise.all(r)).forEach(c=>{o.set(c.symbol,c)}),s.indexOf(n)<s.length-1&&await new Promise(c=>setTimeout(c,100))}return o}async getDataSourceStatus(){const e={precomputed:{available:!1,symbols:[],lastUpdate:null},cache:ae.getCacheStats(),realtime:{available:!0,proxies:ee.corsProxies.length}};try{const a=await rt.getAvailableData();a&&(e.precomputed={available:!0,symbols:a.symbols,lastUpdate:a.generatedAt,successful:a.successful,failed:a.failed})}catch(a){console.warn("Failed to get precomputed status:",a)}return e}setPreferences(e){e.preferPrecomputed!==void 0&&(this.preferPrecomputed=e.preferPrecomputed),e.fallbackToRealtime!==void 0&&(this.fallbackToRealtime=e.fallbackToRealtime),e.maxPrecomputedAge!==void 0&&(this.maxPrecomputedAge=e.maxPrecomputedAge),console.log("Updated preferences:",{preferPrecomputed:this.preferPrecomputed,fallbackToRealtime:this.fallbackToRealtime,maxPrecomputedAge:this.maxPrecomputedAge})}}const ce=new Os;class Ws{constructor(){this.isWarming=!1,this.warmupProgress=0,this.warmupResults=new Map,this.warmupStartTime=null,this.warmupEndTime=null,this.config={maxConcurrent:2,batchDelay:2e3,retryAttempts:2,retryDelay:5e3,enableAutoWarmup:this.isProductionEnvironment(),warmupOnVersionChange:!1,warmupOnFirstLoad:!1,warmupInterval:24*60*60*1e3,minCacheCoverage:.95},this.trackedSymbols=["ASTS","RIVN","PL","ONDS","RDW","AVAV","MDB","ORCL","TSM","RKLB","CRM","NVDA","AVGO","AMZN","GOOG","META","NFLX","LEU","SMR","CRWV","IONQ","PLTR","HIMS","TSLA"]}async start(){if(console.log("üî• Starting Cache Warmup Service..."),!this.isProductionEnvironment()){console.log("üö´ Cache warmup disabled in development environment");return}try{const e=await this.shouldPerformWarmup();e.needed?(console.log(`üî• Warmup needed: ${e.reason}`),await this.performWarmup()):console.log("‚úÖ Cache warmup not needed"),this.config.enableAutoWarmup&&this.schedulePeriodicWarmup()}catch(e){console.error("‚ùå Failed to start cache warmup service:",e)}}async shouldPerformWarmup(){try{const e=await this.getCurrentVersion(),a=this.getLastWarmupVersion();if(this.config.warmupOnVersionChange&&e!==a)return{needed:!0,reason:`Version changed from ${a} to ${e}`};const o=this.getLastWarmupTime();if(this.config.warmupOnFirstLoad&&!o)return{needed:!0,reason:"First load - no previous warmup found"};if(o){const n=Date.now()-o;if(n>this.config.warmupInterval)return{needed:!0,reason:`Time interval exceeded (${Math.round(n/36e5)}h ago)`}}const s=await this.getCacheStats();return s.coverage<this.config.minCacheCoverage?{needed:!0,reason:`Low cache coverage (${Math.round(s.coverage*100)}%)`}:{needed:!1,reason:"Cache is fresh and complete"}}catch(e){return console.error("Error checking warmup need:",e),{needed:!0,reason:"Error checking - performing warmup as fallback"}}}async performWarmup(){if(this.isWarming)return console.log("‚ö†Ô∏è Warmup already in progress"),this.warmupResults;console.log(`üî• Starting cache warmup for ${this.trackedSymbols.length} symbols...`),this.isWarming=!0,this.warmupProgress=0,this.warmupResults.clear(),this.warmupStartTime=Date.now();const e="cache_warmup_total";le.start(e);try{const a=this.createBatches(this.trackedSymbols,this.config.maxConcurrent);for(let n=0;n<a.length;n++){const r=a[n];console.log(`üî• Processing batch ${n+1}/${a.length}: ${r.join(", ")}`);const d=r.map(g=>this.warmupSymbol(g));(await Promise.all(d)).forEach((g,y)=>{this.warmupResults.set(r[y],g)}),this.warmupProgress=(n+1)/a.length*100,console.log(`üìä Warmup progress: ${Math.round(this.warmupProgress)}%`),n<a.length-1&&(console.log(`‚è≥ Waiting ${this.config.batchDelay}ms before next batch...`),await this.sleep(this.config.batchDelay))}this.warmupEndTime=Date.now();const o=this.warmupEndTime-this.warmupStartTime,s=this.getWarmupStats();return console.log(`üéâ Cache warmup completed in ${Math.round(o/1e3)}s`),console.log(`üìä Results: ${s.successful}/${s.total} successful (${s.successRate}%)`),this.saveWarmupRecord(s),this.warmupResults}catch(a){throw console.error("‚ùå Cache warmup failed:",a),a}finally{this.isWarming=!1,le.end(e)}}async warmupSymbol(e,a=1){const o=Date.now();try{console.log(`üî• Warming up ${e} (attempt ${a}/${this.config.retryAttempts+1})`);const s=await ce.getTechnicalIndicators(e),n=Date.now()-o;if(s&&!s.error)return console.log(`‚úÖ ${e} warmed up successfully in ${n}ms (${s.source})`),{success:!0,duration:n,source:s.source,timestamp:new Date().toISOString()};throw new Error((s==null?void 0:s.error)||"Unknown error")}catch(s){return console.error(`‚ùå Failed to warm up ${e} (attempt ${a}): ${s.message}`),a<=this.config.retryAttempts?(console.log(`üîÑ Retrying ${e} in ${this.config.retryDelay}ms...`),await this.sleep(this.config.retryDelay),this.warmupSymbol(e,a+1)):{success:!1,error:s.message,duration:Date.now()-o,timestamp:new Date().toISOString()}}}createBatches(e,a){const o=[];for(let s=0;s<e.length;s+=a)o.push(e.slice(s,s+a));return o}async getCurrentVersion(){try{const e=this.getPackageJsonUrl(),a=await fetch(e);if(a.ok)return(await a.json()).version||"1.0.0"}catch(e){return console.warn("Failed to fetch package.json:",e),Date.now().toString()}return"1.0.0"}getPackageJsonUrl(){const e=window.location.hostname,a=window.location.pathname;return e==="romarin-hsieh.github.io"?(a.includes("/investment-dashboard/"),"/investment-dashboard/package.json"):"/package.json"}getLastWarmupVersion(){return localStorage.getItem("cache_warmup_version")||null}getLastWarmupTime(){const e=localStorage.getItem("cache_warmup_time");return e?parseInt(e):null}async getCacheStats(){let e=0;for(const a of this.trackedSymbols)try{H.get(`technical_indicators_${a}`)&&e++}catch{}return{total:this.trackedSymbols.length,cached:e,coverage:e/this.trackedSymbols.length}}getWarmupStats(){const e=Array.from(this.warmupResults.values()),a=e.filter(s=>s.success).length,o=e.filter(s=>!s.success).length;return{total:e.length,successful:a,failed:o,successRate:Math.round(a/e.length*100),duration:this.warmupEndTime-this.warmupStartTime,averageDuration:e.reduce((s,n)=>s+n.duration,0)/e.length}}saveWarmupRecord(e){const a=this.getCurrentVersion();localStorage.setItem("cache_warmup_version",a),localStorage.setItem("cache_warmup_time",Date.now().toString()),localStorage.setItem("cache_warmup_stats",JSON.stringify(e)),console.log("üíæ Warmup record saved")}schedulePeriodicWarmup(){console.log(`‚è∞ Scheduled periodic warmup every ${this.config.warmupInterval/36e5} hours`),setInterval(async()=>{console.log("‚è∞ Periodic warmup triggered");try{await this.performWarmup()}catch(e){console.error("‚ùå Periodic warmup failed:",e)}},this.config.warmupInterval)}async triggerManualWarmup(){return console.log("üî• Manual warmup triggered"),this.performWarmup()}getWarmupStatus(){return{isWarming:this.isWarming,progress:this.warmupProgress,results:Object.fromEntries(this.warmupResults),lastWarmupTime:this.getLastWarmupTime(),lastWarmupVersion:this.getLastWarmupVersion(),trackedSymbols:this.trackedSymbols,config:this.config}}sleep(e){return new Promise(a=>setTimeout(a,e))}isProductionEnvironment(){const e=window.location.hostname,a=window.location.pathname;return!!(e==="romarin-hsieh.github.io"&&a.includes("/investment-dashboard/")||e!=="localhost"&&e!=="127.0.0.1"&&!e.includes("local"))}updateConfig(e){this.config={...this.config,...e},console.log("üîß Cache warmup config updated:",this.config)}addTrackedSymbol(e){this.trackedSymbols.includes(e)||(this.trackedSymbols.push(e),console.log(`‚ûï Added ${e} to tracked symbols`))}removeTrackedSymbol(e){const a=this.trackedSymbols.indexOf(e);a>-1&&(this.trackedSymbols.splice(a,1),console.log(`‚ûñ Removed ${e} from tracked symbols`))}}const ut=new Ws;class Vs{constructor(){this.maxConcurrent=3,this.currentLoading=0,this.queue=[],this.loadingWidgets=new Set,this.stats={totalRequests:0,completedRequests:0,failedRequests:0,averageLoadTime:0,loadTimes:[]}}async addToQueue(e,a,o=2){return new Promise((s,n)=>{const r={id:a,loadFunction:e,priority:o,resolve:s,reject:n,createdAt:Date.now()};if(this.loadingWidgets.has(a)){console.warn(`Widget ${a} is already loading, skipping duplicate request`),n(new Error("Widget already loading"));return}this.insertByPriority(r),this.stats.totalRequests++,console.log(`WidgetLoadManager: Added ${a} to queue (priority: ${o}, queue size: ${this.queue.length})`),this.processQueue()})}insertByPriority(e){let a=this.queue.length;for(let o=0;o<this.queue.length;o++)if(e.priority<this.queue[o].priority){a=o;break}this.queue.splice(a,0,e)}async processQueue(){if(this.currentLoading>=this.maxConcurrent||this.queue.length===0)return;const e=this.queue.shift();this.currentLoading++,this.loadingWidgets.add(e.id);const a=Date.now();console.log(`WidgetLoadManager: Starting load for ${e.id} (${this.currentLoading}/${this.maxConcurrent} slots used)`);try{await e.loadFunction();const o=Date.now()-a;this.updateStats(o,!0),console.log(`WidgetLoadManager: Successfully loaded ${e.id} in ${o}ms`),e.resolve()}catch(o){const s=Date.now()-a;this.updateStats(s,!1),console.error(`WidgetLoadManager: Failed to load ${e.id} after ${s}ms:`,o),e.reject(o)}finally{this.currentLoading--,this.loadingWidgets.delete(e.id),setTimeout(()=>this.processQueue(),100)}}updateStats(e,a){a?this.stats.completedRequests++:this.stats.failedRequests++,this.stats.loadTimes.push(e),this.stats.loadTimes.length>100&&this.stats.loadTimes.shift(),this.stats.averageLoadTime=this.stats.loadTimes.reduce((o,s)=>o+s,0)/this.stats.loadTimes.length}cancelWidget(e){const a=this.queue.findIndex(o=>o.id===e);return a!==-1?(this.queue.splice(a,1)[0].reject(new Error("Widget load cancelled")),console.log(`WidgetLoadManager: Cancelled queued widget ${e}`),!0):!1}clearQueue(){const e=this.queue.length;this.queue.forEach(a=>{a.reject(new Error("Queue cleared"))}),this.queue=[],console.log(`WidgetLoadManager: Cleared queue, cancelled ${e} tasks`)}getStatus(){return{currentLoading:this.currentLoading,queueSize:this.queue.length,maxConcurrent:this.maxConcurrent,stats:{...this.stats}}}setMaxConcurrent(e){this.maxConcurrent=Math.max(1,Math.min(10,e)),console.log(`WidgetLoadManager: Max concurrent set to ${this.maxConcurrent}`),this.currentLoading<this.maxConcurrent&&this.processQueue()}resetStats(){this.stats={totalRequests:0,completedRequests:0,failedRequests:0,averageLoadTime:0,loadTimes:[]},console.log("WidgetLoadManager: Stats reset")}}const mt=new Vs,qs={name:"LazyTradingViewWidget",props:{widgetType:{type:String,required:!0},config:{type:Object,required:!0},scriptUrl:{type:String,required:!0},height:{type:String,default:"400px"},priority:{type:Number,default:1}},data(){return{isVisible:!1,loaded:!1,error:!1,observer:null,loadStartTime:0}},computed:{containerId(){return`lazy-widget-${this.widgetType}-${Date.now()}`}},mounted(){this.setupIntersectionObserver()},beforeUnmount(){this.observer&&this.observer.disconnect()},methods:{setupIntersectionObserver(){const i={1:"200px",2:"100px",3:"50px"};this.observer=new IntersectionObserver(e=>{e.forEach(a=>{a.isIntersecting&&!this.loaded&&!this.error&&(this.isVisible=!0,this.loadWidget(),this.observer.disconnect())})},{rootMargin:i[this.priority]||"100px",threshold:.1}),this.observer.observe(this.$refs.container)},async loadWidget(){this.loadStartTime=performance.now();try{const e={1:0,2:500,3:1e3}[this.priority]||0;e>0&&await new Promise(o=>setTimeout(o,e));const a=`lazy-${this.widgetType}-${this.containerId}`;await mt.addToQueue(()=>this.createWidget(),a,this.priority)}catch(i){console.error("Failed to load widget:",i),this.error=!0}},async createWidget(){return new Promise((i,e)=>{this.$nextTick(()=>{const a=this.$refs.container;if(!a){e(new Error("Container not found"));return}const o=a.querySelector(".widget-placeholder, .widget-loading");o&&(o.style.display="none");try{const s=document.createElement("div");s.className="tradingview-widget-container",s.style.height="100%",s.style.width="100%";const n=document.createElement("div");n.className="tradingview-widget-container__widget",n.style.height="100%",n.style.width="100%",s.appendChild(n);const r=document.createElement("script");r.type="text/javascript",r.src=this.scriptUrl,r.async=!0;const d=JSON.stringify(this.config);r.innerHTML=d,console.log(`üîß Creating ${this.widgetType} widget with config:`,this.config),console.log("üìù Config JSON:",d);const g=setTimeout(()=>{console.warn(`${this.widgetType} widget load timeout`),this.error=!0,e(new Error("Widget load timeout"))},{1:8e3,2:1e4,3:12e3}[this.priority]||1e4);r.onload=()=>{clearTimeout(g),this.loaded=!0;const y=performance.now()-this.loadStartTime;console.log(`‚úÖ ${this.widgetType} widget loaded in ${y.toFixed(2)}ms (Priority: ${this.priority})`),i()},r.onerror=y=>{clearTimeout(g),console.error(`‚ùå ${this.widgetType} script load failed:`,y),this.error=!0,e(new Error("Script load failed"))},n.appendChild(r),a.appendChild(s)}catch(s){console.error(`‚ùå ${this.widgetType} widget creation failed:`,s),this.error=!0,e(s)}})})},async retry(){this.error=!1,this.loaded=!1,await this.loadWidget()}}},Bs=["id"],Hs={key:0,class:"widget-placeholder"},zs={class:"placeholder-content"},Gs={class:"placeholder-text"},js={key:1,class:"widget-loading"},Qs={key:2,class:"widget-error"};function Xs(i,e,a,o,s,n){return u(),h("div",{class:"lazy-widget",id:n.containerId,ref:"container",style:J({height:a.height})},[!s.isVisible&&!s.loaded?(u(),h("div",Hs,[t("div",zs,[e[1]||(e[1]=t("div",{class:"placeholder-icon"},"üìä",-1)),t("div",Gs,l(a.widgetType)+" Widget",1),e[2]||(e[2]=t("div",{class:"placeholder-subtext"},"Scroll to load",-1))])])):S("",!0),s.isVisible&&!s.loaded&&!s.error?(u(),h("div",js,[e[3]||(e[3]=t("div",{class:"loading-spinner"},null,-1)),t("span",null,"Loading "+l(a.widgetType)+"...",1)])):S("",!0),s.error?(u(),h("div",Qs,[e[4]||(e[4]=t("span",null,"‚ö†Ô∏è Failed to load",-1)),t("button",{onClick:e[0]||(e[0]=(...r)=>n.retry&&n.retry(...r)),class:"retry-btn"},"Retry")])):S("",!0)],12,Bs)}const ft=P(qs,[["render",Xs],["__scopeId","data-v-f6167f96"]]),Ks={name:"VixWidget",data(){return{loading:!0,error:!1,widgetId:`vix-widget-${Date.now()}`}},mounted(){this.loadVixWidget()},methods:{async loadVixWidget(){this.loading=!0,this.error=!1;try{const i=this.$refs.vixContainer;if(!i)return;for(;i.firstChild;)i.removeChild(i.firstChild);console.log("üîß Starting VIX widget creation with FRED:VIXCLS..."),await this.createWidget()}catch(i){console.error("‚ùå VIX widget creation failed:",i),this.error=!0,this.loading=!1}},async createWidget(){return new Promise((i,e)=>{this.$nextTick(()=>{const a=this.$refs.vixContainer;if(!a){e(new Error("Container not found"));return}try{const o=document.createElement("div");o.className="tradingview-widget-container",o.style.height="100%",o.style.width="100%";const s=document.createElement("div");s.className="tradingview-widget-container__widget",s.style.height="100%",s.style.width="100%",o.appendChild(s);const n=document.createElement("script");n.type="text/javascript",n.src="https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js",n.async=!0;const r={lineWidth:2,lineType:2,chartType:"line",showVolume:!1,fontColor:"rgb(106, 109, 120)",gridLineColor:"rgba(46, 46, 46, 0.06)",volumeUpColor:"rgba(34, 171, 148, 0.5)",volumeDownColor:"rgba(247, 82, 95, 0.5)",backgroundColor:"#ffffff",widgetFontColor:"#0F0F0F",upColor:"#22ab94",downColor:"#f7525f",borderUpColor:"#22ab94",borderDownColor:"#f7525f",wickUpColor:"#22ab94",wickDownColor:"#f7525f",colorTheme:"light",isTransparent:!0,locale:"en",chartOnly:!1,scalePosition:"right",scaleMode:"Normal",fontFamily:"-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif",valuesTracking:"1",changeMode:"price-and-percent",symbols:[["FRED:VIXCLS|12M"]],dateRanges:["12m|1D","60m|1W","all|1M"],fontSize:"10",headerFontSize:"medium",autosize:!0,width:"100%",height:"100%",noTimeScale:!1,hideDateRanges:!1,hideMarketStatus:!1,hideSymbolLogo:!1},d=JSON.stringify(r);n.innerHTML=d,console.log("üîß FRED:VIXCLS Config:",r),console.log("üìù Config JSON:",d);const c=setTimeout(()=>{console.warn("‚è∞ VIX widget load timeout"),this.error=!0,this.loading=!1,e(new Error("Widget load timeout"))},8e3);n.onload=()=>{clearTimeout(c),console.log("‚úÖ FRED:VIXCLS widget script loaded"),this.loading=!1,i()},n.onerror=g=>{clearTimeout(c),console.error("‚ùå VIX widget script failed:",g),this.error=!0,this.loading=!1,e(new Error("Script load failed"))},s.appendChild(n),a.appendChild(o)}catch(o){console.error("‚ùå VIX widget creation failed:",o),this.error=!0,this.loading=!1,e(o)}})})}}},Ys={class:"vix-widget-container",ref:"vixContainer",style:{height:"600px"}},Js={key:0,class:"loading-state"},Zs={key:1,class:"error-state"};function ea(i,e,a,o,s,n){return u(),h("div",Ys,[s.loading?(u(),h("div",Js,[...e[1]||(e[1]=[t("div",{class:"loading-spinner"},null,-1),t("span",null,"Loading VIX Index...",-1)])])):S("",!0),s.error?(u(),h("div",Zs,[e[2]||(e[2]=t("span",null,"‚ö†Ô∏è Failed to load VIX",-1)),t("button",{onClick:e[0]||(e[0]=(...r)=>n.loadVixWidget&&n.loadVixWidget(...r)),class:"retry-btn"},"Retry")])):S("",!0)],512)}const ta=P(Ks,[["render",ea],["__scopeId","data-v-d1b725d9"]]),sa={name:"ZeiiermanFearGreedGauge",data(){return{components:{sp125:65,hl52:52,mcsi:60,putCall:45,vix50:55,safe:62,yieldSpread:67},lastUpdate:new Date}},computed:{fearGreedValue(){const i=Object.values(this.components);return i.reduce((a,o)=>a+o,0)/i.length},needleAngle(){return(this.fearGreedValue-50)*1.8},needleX(){const i=this.needleAngle*(Math.PI/180);return 200+140*Math.sin(i)},needleY(){const i=this.needleAngle*(Math.PI/180);return 200-140*Math.cos(i)},currentSentiment(){return this.fearGreedValue<=25?"Extreme Fear":this.fearGreedValue<=45?"Fear":this.fearGreedValue<=55?"Neutral":this.fearGreedValue<=75?"Greed":"Extreme Greed"},sentimentClass(){return this.fearGreedValue<=25?"extreme-fear":this.fearGreedValue<=45?"fear":this.fearGreedValue<=55?"neutral":this.fearGreedValue<=75?"greed":"extreme-greed"},sentimentDescription(){return this.fearGreedValue<=25?"Market showing extreme pessimism and panic selling conditions":this.fearGreedValue<=45?"Elevated market anxiety with defensive investor positioning":this.fearGreedValue<=55?"Balanced market sentiment with mixed investor signals":this.fearGreedValue<=75?"Optimistic market conditions with increased risk appetite":"Excessive market euphoria indicating potential overvaluation"}},mounted(){console.log("Zeiierman Fear & Greed Index loaded with fixed value:",this.fearGreedValue)},methods:{updateComponents(){this.lastUpdate=new Date,console.log("Zeiierman Fear & Greed Index:",this.fearGreedValue)}}},aa={class:"fear-greed-gauge-container"},na={class:"market-fng-gauge__meter-container"},ia={class:"left-side"},oa={class:"sentiment-indicator"},ra={class:"sentiment-text"},la={class:"sentiment-description"},ca={class:"gauge-wrapper"},da={class:"gauge-svg",viewBox:"0 0 400 240",xmlns:"http://www.w3.org/2000/svg"},ua={class:"needle-group"},ha=["x2","y2"],ga={x:"200",y:"230","text-anchor":"middle",class:"gauge-value"},ma={class:"components-section"},fa={class:"components-grid"},pa={class:"component-item"},ya={class:"component-bar"},va={class:"component-value"},wa={class:"component-item"},Sa={class:"component-bar"},ba={class:"component-value"},_a={class:"component-item"},ka={class:"component-bar"},Ca={class:"component-value"},Ta={class:"component-item"},Da={class:"component-bar"},Aa={class:"component-value"},Ia={class:"component-item"},xa={class:"component-bar"},Ma={class:"component-value"},Na={class:"component-item"},Pa={class:"component-bar"},La={class:"component-value"},Ra={class:"component-item"},Ea={class:"component-bar"},$a={class:"component-value"};function Ua(i,e,a,o,s,n){return u(),h("div",aa,[e[13]||(e[13]=t("div",{class:"widget-header"},[t("h3",null,"Fear & Greed Index Gauge"),t("div",{class:"chart-info"},[t("span",{class:"chart-description"},"Based on Zeiierman's Algorithm")])],-1)),t("div",na,[t("div",ia,[t("div",{class:v(["current-sentiment",n.sentimentClass])},[t("div",oa,[e[0]||(e[0]=t("div",{class:"sentiment-dot"},null,-1)),t("span",ra,l(n.currentSentiment),1)]),t("div",la,l(n.sentimentDescription),1)],2),t("div",ca,[(u(),h("svg",da,[e[3]||(e[3]=X('<defs data-v-fc51b373><linearGradient id="gaugeGradient" x1="0%" y1="0%" x2="100%" y2="0%" data-v-fc51b373><stop offset="0%" style="stop-color:#e57373;stop-opacity:1;" data-v-fc51b373></stop><stop offset="12.5%" style="stop-color:#ef5350;stop-opacity:1;" data-v-fc51b373></stop><stop offset="25%" style="stop-color:#ffb74d;stop-opacity:1;" data-v-fc51b373></stop><stop offset="35%" style="stop-color:#ffcc80;stop-opacity:1;" data-v-fc51b373></stop><stop offset="45%" style="stop-color:#ffd54f;stop-opacity:1;" data-v-fc51b373></stop><stop offset="50%" style="stop-color:#fff176;stop-opacity:1;" data-v-fc51b373></stop><stop offset="55%" style="stop-color:#fff59d;stop-opacity:1;" data-v-fc51b373></stop><stop offset="65%" style="stop-color:#aed581;stop-opacity:1;" data-v-fc51b373></stop><stop offset="75%" style="stop-color:#81c784;stop-opacity:1;" data-v-fc51b373></stop><stop offset="87.5%" style="stop-color:#66bb6a;stop-opacity:1;" data-v-fc51b373></stop><stop offset="100%" style="stop-color:#4db6ac;stop-opacity:1;" data-v-fc51b373></stop></linearGradient></defs><path d="M 40 200 A 160 160 0 0 1 360 200" fill="none" stroke="url(#gaugeGradient)" stroke-width="20" stroke-linecap="round" data-v-fc51b373></path>',2)),t("g",ua,[t("line",{x1:200,y1:200,x2:n.needleX,y2:n.needleY,stroke:"#333","stroke-width":"4","stroke-linecap":"round",class:"gauge-needle"},null,8,ha),e[1]||(e[1]=t("circle",{cx:"200",cy:"200",r:"8",fill:"#333"},null,-1)),e[2]||(e[2]=t("circle",{cx:"200",cy:"200",r:"4",fill:"#fff"},null,-1))]),t("text",ga,l(n.fearGreedValue.toFixed(0)),1)])),e[4]||(e[4]=X('<div class="gauge-labels" data-v-fc51b373><div class="label-item extreme-fear" data-v-fc51b373><span class="label-text" data-v-fc51b373>Extreme Fear</span><span class="label-range" data-v-fc51b373>0-25</span></div><div class="label-item fear" data-v-fc51b373><span class="label-text" data-v-fc51b373>Fear</span><span class="label-range" data-v-fc51b373>25-45</span></div><div class="label-item neutral" data-v-fc51b373><span class="label-text" data-v-fc51b373>Neutral</span><span class="label-range" data-v-fc51b373>45-55</span></div><div class="label-item greed" data-v-fc51b373><span class="label-text" data-v-fc51b373>Greed</span><span class="label-range" data-v-fc51b373>55-75</span></div><div class="label-item extreme-greed" data-v-fc51b373><span class="label-text" data-v-fc51b373>Extreme Greed</span><span class="label-range" data-v-fc51b373>75-100</span></div></div>',1))])]),t("div",ma,[e[12]||(e[12]=t("h4",null,"Index Components",-1)),t("div",fa,[t("div",pa,[e[5]||(e[5]=t("span",{class:"component-name"},"S&P 500 vs 125-day MA",-1)),t("div",ya,[t("div",{class:"component-fill",style:J({width:s.components.sp125+"%"})},null,4),t("span",va,l(s.components.sp125),1)])]),t("div",wa,[e[6]||(e[6]=t("span",{class:"component-name"},"52-Week High/Low Strength",-1)),t("div",Sa,[t("div",{class:"component-fill",style:J({width:s.components.hl52+"%"})},null,4),t("span",ba,l(s.components.hl52),1)])]),t("div",_a,[e[7]||(e[7]=t("span",{class:"component-name"},"Market Breadth (McClellan)",-1)),t("div",ka,[t("div",{class:"component-fill",style:J({width:s.components.mcsi+"%"})},null,4),t("span",Ca,l(s.components.mcsi),1)])]),t("div",Ta,[e[8]||(e[8]=t("span",{class:"component-name"},"Put/Call Ratio",-1)),t("div",Da,[t("div",{class:"component-fill",style:J({width:s.components.putCall+"%"})},null,4),t("span",Aa,l(s.components.putCall),1)])]),t("div",Ia,[e[9]||(e[9]=t("span",{class:"component-name"},"VIX vs 50-day MA",-1)),t("div",xa,[t("div",{class:"component-fill",style:J({width:s.components.vix50+"%"})},null,4),t("span",Ma,l(s.components.vix50),1)])]),t("div",Na,[e[10]||(e[10]=t("span",{class:"component-name"},"Safe Haven Demand",-1)),t("div",Pa,[t("div",{class:"component-fill",style:J({width:s.components.safe+"%"})},null,4),t("span",La,l(s.components.safe),1)])]),t("div",Ra,[e[11]||(e[11]=t("span",{class:"component-name"},"Junk Bond Demand",-1)),t("div",Ea,[t("div",{class:"component-fill",style:J({width:s.components.yieldSpread+"%"})},null,4),t("span",$a,l(s.components.yieldSpread),1)])])])])])])}const Fa=P(sa,[["render",Ua],["__scopeId","data-v-fc51b373"]]),Oa={name:"MarketOverviewSkeleton"},Wa={class:"market-overview-skeleton"},Va={class:"skeleton-widget-container"},qa={class:"skeleton-ticker-area"},Ba={class:"skeleton-widget-container large"},Ha={class:"skeleton-stories-area"},za={class:"skeleton-widget-container"},Ga={class:"skeleton-heatmap-area"},ja={class:"skeleton-heatmap-grid"},Qa={class:"skeleton-widget-container"},Xa={class:"skeleton-performance-area"};function Ka(i,e,a,o,s,n){return u(),h("div",Wa,[t("div",Va,[e[0]||(e[0]=t("div",{class:"skeleton-widget-header"},[t("div",{class:"skeleton-title"})],-1)),t("div",qa,[(u(),h($,null,U(6,r=>t("div",{class:"skeleton-ticker-item",key:r})),64))])]),e[6]||(e[6]=X('<div class="skeleton-widget-container" data-v-9478c3a3><div class="skeleton-widget-header" data-v-9478c3a3><div class="skeleton-title" data-v-9478c3a3></div></div><div class="skeleton-gauge-area" data-v-9478c3a3><div class="skeleton-gauge-circle" data-v-9478c3a3></div><div class="skeleton-gauge-info" data-v-9478c3a3><div class="skeleton-gauge-value" data-v-9478c3a3></div><div class="skeleton-gauge-label" data-v-9478c3a3></div></div></div></div>',1)),t("div",Ba,[e[2]||(e[2]=t("div",{class:"skeleton-widget-header"},[t("div",{class:"skeleton-title"})],-1)),t("div",Ha,[(u(),h($,null,U(8,r=>t("div",{class:"skeleton-story-item",key:r},[...e[1]||(e[1]=[t("div",{class:"skeleton-story-time"},null,-1),t("div",{class:"skeleton-story-title"},null,-1),t("div",{class:"skeleton-story-content"},null,-1)])])),64))])]),e[7]||(e[7]=X('<div class="skeleton-widget-container large" data-v-9478c3a3><div class="skeleton-widget-header" data-v-9478c3a3><div class="skeleton-title" data-v-9478c3a3></div></div><div class="skeleton-insight-grid" data-v-9478c3a3><div class="skeleton-insight-section" data-v-9478c3a3><div class="skeleton-section-header" data-v-9478c3a3><div class="skeleton-section-title" data-v-9478c3a3></div></div><div class="skeleton-chart-area" data-v-9478c3a3><div class="skeleton-chart" data-v-9478c3a3></div></div></div><div class="skeleton-insight-section" data-v-9478c3a3><div class="skeleton-section-header" data-v-9478c3a3><div class="skeleton-section-title" data-v-9478c3a3></div></div><div class="skeleton-chart-area" data-v-9478c3a3><div class="skeleton-chart" data-v-9478c3a3></div></div></div></div></div>',1)),t("div",za,[e[3]||(e[3]=t("div",{class:"skeleton-widget-header"},[t("div",{class:"skeleton-title"})],-1)),t("div",Ga,[t("div",ja,[(u(),h($,null,U(20,r=>t("div",{class:"skeleton-heatmap-cell",key:r})),64))])])]),t("div",Qa,[e[5]||(e[5]=t("div",{class:"skeleton-widget-header"},[t("div",{class:"skeleton-title"})],-1)),t("div",Xa,[(u(),h($,null,U(4,r=>t("div",{class:"skeleton-performance-item",key:r},[...e[4]||(e[4]=[t("div",{class:"skeleton-performance-label"},null,-1),t("div",{class:"skeleton-performance-value"},null,-1)])])),64))])])])}const Ya=P(Oa,[["render",Ka],["__scopeId","data-v-9478c3a3"]]),Ja={name:"MarketDashboard",components:{LazyTradingViewWidget:ft,VixWidget:ta,ZeiiermanFearGreedGauge:Fa,MarketOverviewSkeleton:Ya},data(){return{loading:!0,error:null,vixKey:Date.now()}},mounted(){this.scrollToTop(),this.initializePage()},watch:{$route(){this.scrollToTop()}},methods:{async initializePage(){try{await new Promise(i=>setTimeout(i,800)),this.loading=!1}catch(i){this.error=String(i),this.loading=!1}},async refresh(){this.loading=!0,this.error=null,this.vixKey=Date.now(),await this.initializePage()},scrollToTop(){this.$nextTick(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"}),setTimeout(()=>{window.scrollTo(0,0)},100)})},refreshVixWidget(){this.vixKey=Date.now(),console.log("VIX widget refreshed with key:",this.vixKey)}},computed:{tickersConfig(){return{symbols:[{proName:"FOREXCOM:SPXUSD",title:"S&P 500 Index"},{proName:"NASDAQ:NDX",title:"NASDAQ 100 Index"},{proName:"OPOFINANCE:DJIUSD",title:"Dow Jone Index"},{proName:"CAPITALCOM:RTY",title:"US Russel 2000"},{proName:"INDEX:BTCUSD",title:"BTC"},{proName:"TVC:GOLD",title:"GOLD"}],colorTheme:"light",locale:"en",largeChartUrl:"",isTransparent:!0,showSymbolLogo:!0}},topStoriesConfig(){return{displayMode:"regular",feedMode:"market",colorTheme:"light",isTransparent:!0,locale:"en",market:"stock",width:"100%",height:"100%"}},dailyConfig(){return{lineWidth:2,lineType:0,chartType:"candlesticks",showVolume:!0,fontColor:"rgb(106, 109, 120)",gridLineColor:"rgba(46, 46, 46, 0.06)",volumeUpColor:"rgba(34, 171, 148, 0.5)",volumeDownColor:"rgba(247, 82, 95, 0.5)",backgroundColor:"#ffffff",widgetFontColor:"#0F0F0F",upColor:"#22ab94",downColor:"#f7525f",borderUpColor:"#22ab94",borderDownColor:"#f7525f",wickUpColor:"#22ab94",wickDownColor:"#f7525f",colorTheme:"light",isTransparent:!0,locale:"en",chartOnly:!1,scalePosition:"right",scaleMode:"Normal",fontFamily:"-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif",valuesTracking:"1",changeMode:"price-and-percent",symbols:[["VANTAGE:SP500|6M"],["NASDAQ:NDX|6M"],["OPOFINANCE:DJIUSD|6M"],["CAPITALCOM:RTY|6M"],["INDEX:BTCUSD|6M"],["TVC:GOLD|6M"]],dateRanges:["6m|1D"],fontSize:"10",headerFontSize:"medium",autosize:!0,width:"100%",height:"100%",noTimeScale:!1,hideDateRanges:!1,showMA:!0,maLength:"5",maLineColor:"#2962FF",maLineWidth:1,hideMarketStatus:!1,hideSymbolLogo:!1}},weeklyConfig(){return{lineWidth:2,lineType:0,chartType:"candlesticks",showVolume:!0,fontColor:"rgb(106, 109, 120)",gridLineColor:"rgba(46, 46, 46, 0.06)",volumeUpColor:"rgba(34, 171, 148, 0.5)",volumeDownColor:"rgba(247, 82, 95, 0.5)",backgroundColor:"#ffffff",widgetFontColor:"#0F0F0F",upColor:"#22ab94",downColor:"#f7525f",borderUpColor:"#22ab94",borderDownColor:"#f7525f",wickUpColor:"#22ab94",wickDownColor:"#f7525f",colorTheme:"light",isTransparent:!0,locale:"en",chartOnly:!1,scalePosition:"right",scaleMode:"Normal",fontFamily:"-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif",valuesTracking:"1",changeMode:"price-and-percent",symbols:[["VANTAGE:SP500|6M"],["NASDAQ:NDX|6M"],["OPOFINANCE:DJIUSD|6M"],["CAPITALCOM:RTY|6M"],["INDEX:BTCUSD|6M"],["TVC:GOLD|6M"]],dateRanges:["6m|1W"],fontSize:"10",headerFontSize:"medium",autosize:!0,width:"100%",height:"100%",noTimeScale:!1,hideDateRanges:!1,showMA:!0,maLength:"4",maLineColor:"#2962FF",maLineWidth:1,hideMarketStatus:!1,hideSymbolLogo:!1}},heatmapConfig(){return{exchanges:[],dataSource:"SPX500",grouping:"sector",blockSize:"market_cap_basic",blockColor:"change",locale:"en",symbolUrl:"",colorTheme:"light",hasTopBar:!1,isDataSetEnabled:!1,isZoomEnabled:!0,hasSymbolTooltip:!0,width:"100%",height:"100%"}}}},Za={class:"market-dashboard"},en={key:0,class:"loading-with-skeleton"},tn={key:1,class:"error"},sn={class:"text-danger"},an={key:2},nn={class:"widget-container-ticker"},on={class:"widget-container"},rn={class:"widget-container vix-container"},ln={class:"widget-header"},cn={class:"widget-container"},dn={class:"insight-grid"},un={class:"insight-section"},hn={class:"insight-section weekly-section"},gn={class:"widget-container"};function mn(i,e,a,o,s,n){const r=E("MarketOverviewSkeleton"),d=E("LazyTradingViewWidget"),c=E("ZeiiermanFearGreedGauge"),g=E("VixWidget");return u(),h("div",Za,[e[9]||(e[9]=t("h2",null,"Market Overview",-1)),e[10]||(e[10]=t("p",{class:"text-muted mb-3"},"Global markets overview and macro indicators",-1)),s.loading?(u(),h("div",en,[N(r)])):s.error?(u(),h("div",tn,[t("p",sn,l(s.error),1),t("button",{onClick:e[0]||(e[0]=(...y)=>n.refresh&&n.refresh(...y)),class:"btn btn-secondary"},"Retry")])):(u(),h("div",an,[t("div",nn,[e[2]||(e[2]=t("div",{class:"widget-header"},[t("h3",null,"Market Index")],-1)),N(d,{"widget-type":"Market Index",config:n.tickersConfig,"script-url":"https://s3.tradingview.com/external-embedding/embed-widget-tickers.js",height:"100px",priority:1},null,8,["config"])]),t("div",on,[e[3]||(e[3]=t("div",{class:"widget-header"},[t("h3",null,"Top Stories")],-1)),N(d,{"widget-type":"Top Stories",config:n.topStoriesConfig,"script-url":"https://s3.tradingview.com/external-embedding/embed-widget-timeline.js",height:"650px",priority:2},null,8,["config"])]),N(c),t("div",rn,[t("div",ln,[e[4]||(e[4]=t("h3",null,"VIX Index (Volatility Index)",-1)),t("button",{onClick:e[1]||(e[1]=(...y)=>n.refreshVixWidget&&n.refreshVixWidget(...y)),class:"btn btn-sm btn-secondary"}," üîÑ Refresh VIX ")]),(u(),Vt(g,{key:`vix-${s.vixKey}`}))]),t("div",cn,[e[7]||(e[7]=t("div",{class:"widget-header"},[t("h3",null,"Market Insight")],-1)),t("div",dn,[t("div",un,[e[5]||(e[5]=t("div",{class:"section-header"},[t("h4",null,"Market Daily Insight (MA5)")],-1)),N(d,{"widget-type":"Market Daily Insight",config:n.dailyConfig,"script-url":"https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js",height:"600px",priority:2},null,8,["config"])]),t("div",hn,[e[6]||(e[6]=t("div",{class:"section-header"},[t("h4",null,"Market Weekly Insight (MA4)")],-1)),N(d,{"widget-type":"Market Weekly Insight",config:n.weeklyConfig,"script-url":"https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js",height:"600px",priority:3},null,8,["config"])])])]),t("div",gn,[e[8]||(e[8]=t("div",{class:"widget-header"},[t("h3",null,"Stock Heatmap")],-1)),N(d,{"widget-type":"Stock Heatmap",config:n.heatmapConfig,"script-url":"https://s3.tradingview.com/external-embedding/embed-widget-stock-heatmap.js",height:"500px",priority:3},null,8,["config"])])]))])}const fn=P(Ja,[["render",mn],["__scopeId","data-v-7202e62a"]]);class pn{constructor(){this.cache=null,this.lastUpdate=null,this.cacheTimeout=5*60*1e3}getConfigUrl(){return"/investment-dashboard/config/stocks.json"}async loadConfig(){try{if(this.cache&&this.lastUpdate&&Date.now()-this.lastUpdate<this.cacheTimeout)return this.cache;const e=this.getConfigUrl(),a=await fetch(`${e}?t=${Date.now()}`);if(!a.ok)throw new Error(`HTTP ${a.status}`);const o=await a.json();if(!o.stocks||!Array.isArray(o.stocks))throw new Error("Invalid config format: missing stocks array");return this.cache=o,this.lastUpdate=Date.now(),console.log(`‚úÖ Loaded ${o.stocks.length} stocks from config/stocks.json`),o}catch(e){return console.error("‚ùå Failed to load stocks config:",e),this.cache?(console.warn("‚ö†Ô∏è Using cached config due to load failure"),this.cache):this.getFallbackConfig()}}async getEnabledSymbols(){return(await this.loadConfig()).stocks.filter(a=>a.enabled).map(a=>a.symbol)}async getSymbolsByPriority(e=1){return(await this.loadConfig()).stocks.filter(o=>o.enabled&&o.priority===e).map(o=>o.symbol)}async getStockExchange(e){const o=(await this.loadConfig()).stocks.find(s=>s.symbol===e);return o?o.exchange:"NASDAQ"}async getStockSector(e){const o=(await this.loadConfig()).stocks.find(s=>s.symbol===e);return o?o.sector:"Unknown"}async getStockIndustry(e){const o=(await this.loadConfig()).stocks.find(s=>s.symbol===e);return o?o.industry:"Unknown"}async getStockInfo(e){return(await this.loadConfig()).stocks.find(o=>o.symbol===e)||null}async getExchanges(){var a;return((a=(await this.loadConfig()).metadata)==null?void 0:a.exchanges)||["NYSE","NASDAQ","AMEX"]}async getSectors(){var a;return((a=(await this.loadConfig()).metadata)==null?void 0:a.sectors)||[]}async getStocksByExchange(){const e=await this.loadConfig(),a={};return e.stocks.filter(o=>o.enabled).forEach(o=>{a[o.exchange]||(a[o.exchange]=[]),a[o.exchange].push(o.symbol)}),a}async getStocksBySector(){const e=await this.loadConfig(),a={};return e.stocks.filter(o=>o.enabled).forEach(o=>{a[o.sector]||(a[o.sector]=[]),a[o.sector].push(o.symbol)}),a}async getStats(){const e=await this.loadConfig(),a=e.stocks.filter(o=>o.enabled);return{total:e.stocks.length,enabled:a.length,disabled:e.stocks.length-a.length,exchanges:[...new Set(a.map(o=>o.exchange))],sectors:[...new Set(a.map(o=>o.sector))],version:e.version,lastUpdated:e.last_updated}}clearCache(){this.cache=null,this.lastUpdate=null,console.log("üóëÔ∏è StocksConfigService cache cleared")}async refresh(){return this.clearCache(),await this.loadConfig()}getFallbackConfig(){return console.warn("‚ö†Ô∏è Using emergency fallback config"),{version:"1.0.0-fallback",stocks:[{symbol:"ASTS",exchange:"NASDAQ",sector:"Technology",industry:"Communication Equipment",enabled:!0,priority:1},{symbol:"RIVN",exchange:"NASDAQ",sector:"Consumer Cyclical",industry:"Auto Manufacturers",enabled:!0,priority:1},{symbol:"PL",exchange:"NYSE",sector:"Industrials",industry:"Aerospace & Defense",enabled:!0,priority:1},{symbol:"CRM",exchange:"NYSE",sector:"Technology",industry:"Software - Application",enabled:!0,priority:1},{symbol:"NVDA",exchange:"NASDAQ",sector:"Technology",industry:"Semiconductors",enabled:!0,priority:1},{symbol:"TSLA",exchange:"NASDAQ",sector:"Consumer Cyclical",industry:"Auto Manufacturers",enabled:!0,priority:1},{symbol:"RR",exchange:"NASDAQ",sector:"Technology",industry:"Software - Application",enabled:!0,priority:2}],metadata:{total_stocks:7,enabled_stocks:7,exchanges:["NYSE","NASDAQ"],sectors:["Technology","Consumer Cyclical","Industrials"]}}}async isValidSymbol(e){return(await this.loadConfig()).stocks.some(o=>o.symbol===e&&o.enabled)}async getSymbolsList(){return await this.getEnabledSymbols()}getConfigSource(){return this.cache?"stocks.json":"fallback"}getCacheInfo(){return{cached:!!this.cache,lastUpdate:this.lastUpdate,cacheAge:this.lastUpdate?Date.now()-this.lastUpdate:0,cacheTimeout:this.cacheTimeout}}}const yn=new pn;class vn{constructor(){this.cache=new Map,this.loadingPromises=new Map,this.maxCacheSize=50,this.cacheTimeout=5*60*1e3}generateKey(e,a,o){return`${e}-${a}-${o}`}has(e,a,o){const s=this.generateKey(e,a,o),n=this.cache.get(s);return n?Date.now()-n.timestamp>this.cacheTimeout?(this.cache.delete(s),!1):!0:!1}get(e,a,o){const s=this.generateKey(e,a,o),n=this.cache.get(s);return n&&Date.now()-n.timestamp<=this.cacheTimeout?n.data:null}set(e,a,o,s){const n=this.generateKey(e,a,o);if(this.cache.size>=this.maxCacheSize){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(n,{data:s,timestamp:Date.now()})}isLoading(e,a,o){const s=this.generateKey(e,a,o);return this.loadingPromises.has(s)}setLoading(e,a,o,s){const n=this.generateKey(e,a,o);return this.loadingPromises.set(n,s),s.finally(()=>{this.loadingPromises.delete(n)}),s}getLoadingPromise(e,a,o){const s=this.generateKey(e,a,o);return this.loadingPromises.get(s)}clear(){this.cache.clear(),this.loadingPromises.clear()}clearExpired(){const e=Date.now();for(const[a,o]of this.cache.entries())e-o.timestamp>this.cacheTimeout&&this.cache.delete(a)}getStats(){return{cacheSize:this.cache.size,loadingCount:this.loadingPromises.size,maxCacheSize:this.maxCacheSize}}}const oe=new vn;setInterval(()=>{oe.clearExpired()},6e4);const wn={name:"FastTradingViewWidget",props:{widgetType:{type:String,required:!0,validator:i=>["overview","technical"].includes(i)},symbol:{type:String,required:!0},exchange:{type:String,default:"NASDAQ"},priority:{type:Number,default:1}},data(){return{loaded:!1,error:!1,loadStartTime:0,isVisible:!1,observer:null}},computed:{containerId(){return`fast-widget-${this.widgetType}-${this.symbol}-${Date.now()}`},cacheKey(){return`${this.widgetType}-${this.symbol}-${this.exchange}`}},async mounted(){this.setupIntersectionObserver()},beforeUnmount(){this.observer&&this.observer.disconnect()},methods:{setupIntersectionObserver(){const i={1:"300px",2:"150px",3:"50px"};this.observer=new IntersectionObserver(e=>{e.forEach(a=>{a.isIntersecting&&!this.loaded&&!this.error&&(this.isVisible=!0,this.loadWidget(),this.observer.disconnect())})},{rootMargin:i[this.priority]||"150px",threshold:.1}),this.observer.observe(this.$refs.container)},async loadWidget(){this.loadStartTime=performance.now(),this.loaded=!1,this.error=!1;try{const e={1:0,2:300,3:600}[this.priority]||0;if(e>0&&await new Promise(s=>setTimeout(s,e)),oe.has(this.widgetType,this.symbol,this.exchange)){const s=oe.get(this.widgetType,this.symbol,this.exchange);if(s){this.renderCachedWidget(s);return}}if(oe.isLoading(this.widgetType,this.symbol,this.exchange)){await oe.getLoadingPromise(this.widgetType,this.symbol,this.exchange);return}const a=`fast-${this.widgetType}-${this.symbol}-${this.containerId}`,o=mt.addToQueue(()=>this.createWidget(),a,this.priority);oe.setLoading(this.widgetType,this.symbol,this.exchange,o),await o}catch(i){console.error("Failed to load widget:",i),this.error=!0}},async createWidget(){return new Promise((i,e)=>{this.$nextTick(async()=>{const a=this.$refs.container;if(!a){e(new Error("Container not found"));return}const o=this.getWidgetConfig(),s=this.getScriptUrl();if(!dt.isPreloaded(s))try{await dt.preloadScript(s)}catch(c){console.warn("Script preload failed, continuing with normal load:",c)}const n=document.createElement("script");n.type="text/javascript",n.src=s,n.async=!0,n.innerHTML=JSON.stringify(o);const d=setTimeout(()=>{this.error=!0,e(new Error("Widget load timeout"))},{1:3e3,2:5e3,3:8e3}[this.priority]||5e3);n.onload=()=>{clearTimeout(d),this.loaded=!0;const c=performance.now()-this.loadStartTime;console.log(`Widget ${this.cacheKey} loaded in ${c.toFixed(2)}ms (Priority: ${this.priority})`),oe.set(this.widgetType,this.symbol,this.exchange,{config:o,scriptUrl:s}),i()},n.onerror=()=>{clearTimeout(d),this.error=!0,e(new Error("Script load failed"))},a.appendChild(n)})})},getWidgetConfig(){if(this.widgetType==="overview")return{lineWidth:2,lineType:0,chartType:"candlesticks",showVolume:!0,fontColor:"rgb(106, 109, 120)",gridLineColor:"rgba(46, 46, 46, 0.06)",volumeUpColor:"rgba(34, 171, 148, 0.5)",volumeDownColor:"rgba(247, 82, 95, 0.5)",backgroundColor:"#ffffff",widgetFontColor:"#0F0F0F",upColor:"#22ab94",downColor:"#f7525f",borderUpColor:"#22ab94",borderDownColor:"#f7525f",wickUpColor:"#22ab94",wickDownColor:"#f7525f",colorTheme:"light",isTransparent:!0,locale:"en",chartOnly:!1,scalePosition:"right",scaleMode:"Normal",fontFamily:"-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif",valuesTracking:"1",changeMode:"price-and-percent",symbols:[[this.symbol,`${this.exchange}:${this.symbol}|1D`]],dateRanges:["1d|1","1m|30","3m|60","12m|1D","60m|1W","all|1M"],fontSize:"10",headerFontSize:"medium",autosize:!0,width:"100%",height:"100%",noTimeScale:!1,hideDateRanges:!1,showMA:!0,maLength:9,maLineColor:"#2962FF",maLineWidth:1,hideMarketStatus:!1,hideSymbolLogo:!1};if(this.widgetType==="technical")return{interval:"1D",width:"100%",height:"100%",isTransparent:!1,symbol:`${this.exchange}:${this.symbol}`,showIntervalTabs:!0,locale:"en",colorTheme:"light"}},getScriptUrl(){if(this.widgetType==="overview")return"https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js";if(this.widgetType==="technical")return"https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js"},renderCachedWidget(i){this.$nextTick(()=>{const e=this.$refs.container;if(!e)return;const a=document.createElement("script");a.type="text/javascript",a.src=i.scriptUrl,a.async=!0,a.innerHTML=JSON.stringify(i.config),a.onload=()=>{this.loaded=!0;const o=performance.now()-this.loadStartTime;console.log(`Cached widget ${this.cacheKey} loaded in ${o.toFixed(2)}ms`)},e.appendChild(a)})},async retry(){this.setupIntersectionObserver()}}},Sn=["id"],bn={key:0,class:"fast-loading"},_n={key:1,class:"fast-error"};function kn(i,e,a,o,s,n){return u(),h("div",{class:v(["fast-widget",{"overview-widget":a.widgetType==="overview"}]),id:n.containerId,ref:"container"},[!s.loaded&&!s.error?(u(),h("div",bn,[e[1]||(e[1]=t("div",{class:"loading-spinner"},null,-1)),t("span",null,"Loading "+l(a.widgetType)+"...",1)])):S("",!0),s.error?(u(),h("div",_n,[e[2]||(e[2]=t("span",null,"‚ö†Ô∏è Failed to load",-1)),t("button",{onClick:e[0]||(e[0]=(...r)=>n.retry&&n.retry(...r)),class:"retry-btn"},"Retry")])):S("",!0)],10,Sn)}const Bt=P(wn,[["render",kn],["__scopeId","data-v-a0fc77ab"]]),Cn={name:"TechnicalAnalysisWidget",props:{symbol:{type:String,required:!0},exchange:{type:String,default:"NASDAQ"},priority:{type:Number,default:2}},data(){return{loaded:!1,error:!1,loadStartTime:0,isVisible:!1,observer:null,retryCount:0}},computed:{containerId(){return`technical-analysis-${this.symbol}-${Date.now()}`}},async mounted(){this.setupIntersectionObserver()},beforeUnmount(){this.observer&&this.observer.disconnect()},methods:{setupIntersectionObserver(){const i={1:"300px",2:"150px",3:"50px"};this.observer=new IntersectionObserver(e=>{e.forEach(a=>{a.isIntersecting&&!this.loaded&&!this.error&&(this.isVisible=!0,this.loadWidget(),this.observer.disconnect())})},{rootMargin:i[this.priority]||"150px",threshold:.1}),this.observer.observe(this.$refs.container)},async loadWidget(){this.loadStartTime=performance.now(),this.loaded=!1,this.error=!1;try{const e={1:0,2:300,3:600}[this.priority]||0;e>0&&await new Promise(o=>setTimeout(o,e));const a=`technical-analysis-${this.symbol}-${this.containerId}`;await mt.addToQueue(()=>this.createWidget(),a,this.priority)}catch(i){console.error("Failed to load Technical Analysis widget:",i),this.error=!0}},async createWidget(){return new Promise((i,e)=>{this.$nextTick(async()=>{const a=this.$refs.container;if(!a){e(new Error("Container not found"));return}const o=this.getWidgetConfig(),s="https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js",n=document.createElement("script");n.type="text/javascript",n.src=s,n.async=!0,n.innerHTML=JSON.stringify(o);const r={1:8e3,2:12e3,3:15e3},d=this.retryCount||0,c=r[this.priority]+d*3e3,g=setTimeout(()=>{this.error=!0,e(new Error(`Widget load timeout after ${c}ms (retry: ${d})`))},c);n.onload=()=>{clearTimeout(g),this.loaded=!0;const p=performance.now()-this.loadStartTime;console.log(`Technical Analysis widget ${this.symbol} loaded in ${p.toFixed(2)}ms (retry: ${d})`),i()},n.onerror=()=>{clearTimeout(g),this.error=!0,e(new Error("Script load failed"))};const y=a.querySelector(".tradingview-widget-container__widget");y?y.appendChild(n):a.appendChild(n)})})},getWidgetConfig(){return{colorTheme:"light",displayMode:"single",isTransparent:!0,locale:"en",interval:"1D",disableInterval:!1,width:"100%",height:"100%",symbol:`${this.exchange}:${this.symbol}`,showIntervalTabs:!0}},async retry(){this.retryCount=(this.retryCount||0)+1;const i=2;if(this.retryCount>i){console.error(`Technical Analysis widget ${this.symbol} exceeded max retries (${i})`);return}const e=Math.min(1e3*Math.pow(2,this.retryCount-1),5e3);console.log(`Technical Analysis widget ${this.symbol} retrying in ${e}ms (attempt ${this.retryCount}/${i})`),await new Promise(a=>setTimeout(a,e)),this.setupIntersectionObserver()}}},Tn=["id"],Dn={key:0,class:"fast-loading"},An={key:1,class:"fast-error"},In={class:"tradingview-widget-container"};function xn(i,e,a,o,s,n){return u(),h("div",{class:"fast-widget overview-widget",id:n.containerId,ref:"container"},[!s.loaded&&!s.error?(u(),h("div",Dn,[...e[1]||(e[1]=[t("div",{class:"loading-spinner"},null,-1),t("span",null,"Loading Technical Analysis...",-1)])])):S("",!0),s.error?(u(),h("div",An,[e[2]||(e[2]=t("span",null,"‚ö†Ô∏è Failed to load",-1)),t("button",{onClick:e[0]||(e[0]=(...r)=>n.retry&&n.retry(...r)),class:"retry-btn"},"Retry")])):S("",!0),q(t("div",In,[...e[3]||(e[3]=[t("div",{class:"tradingview-widget-container__widget"},null,-1)])],512),[[ht,s.loaded]])],8,Tn)}const Mn=P(Cn,[["render",xn],["__scopeId","data-v-a3661ec1"]]),Nn={name:"TechnicalIndicators",props:{symbol:{type:String,required:!0},exchange:{type:String,default:"NASDAQ"}},data(){return{loading:!0,error:null,technicalData:null,cacheInfo:null}},mounted(){this.loadTechnicalData()},watch:{symbol(){this.loadTechnicalData()}},methods:{async loadTechnicalData(){var i;this.loading=!0,this.error=null,this.cacheInfo=null;try{console.log(`üîç Loading technical data for ${this.symbol}...`);const e=Date.now();this.technicalData=await ce.getTechnicalIndicators(this.symbol);const a=Date.now()-e;if(this.technicalData.error)throw new Error(this.technicalData.error);this.technicalData.source?this.technicalData.source.includes("Cache")?this.cacheInfo=`${this.technicalData.source} (${a}ms)`:this.technicalData.source.includes("Precomputed")?this.cacheInfo=`${this.technicalData.source} (${a}ms)`:this.cacheInfo=`Fresh data (${a}ms)`:this.cacheInfo=`Loaded in ${a}ms`,console.log(`‚úÖ Technical data loaded for ${this.symbol}:`,{source:this.technicalData.source,loadTime:`${a}ms`,hasADX:!!((i=this.technicalData.adx14)!=null&&i.value)}),this.technicalData.adx14&&this.technicalData.adx14.value!==null&&this.technicalData.adx14.value!=="N/A"?console.log(`‚úÖ ADX data is valid for ${this.symbol}: ${this.technicalData.adx14.value}`):console.warn(`‚ö†Ô∏è ADX data may be invalid for ${this.symbol}:`,this.technicalData.adx14),typeof window<"u"&&window.dispatchEvent(new CustomEvent("widget-loaded",{detail:{name:`TechnicalIndicators-${this.symbol}`,time:a,priority:2}}))}catch(e){console.error(`‚ùå Failed to load technical data for ${this.symbol}:`,e),this.error=e.message,(e.message.includes("fetch")||e.message.includes("network")||e.message.includes("proxy"))&&(this.error=`Network error loading data for ${this.symbol}. Click to retry.`)}finally{this.loading=!1}},async retryLoad(){await this.loadTechnicalData()},getSignalClass(i){if(!i)return"neutral";const e=["BUY","OVERSOLD","STRONG_TREND"],a=["SELL","OVERBOUGHT"];return e.includes(i)?"bullish":a.includes(i)?"bearish":"neutral"},formatValue(i){return i==null?"N/A":typeof i=="string"?i:typeof i=="number"?i.toFixed(2):"N/A"},formatPriceDiff(i){if(!i||!this.technicalData)return"";const e=this.getCurrentPrice();if(!e)return"";const a=e-parseFloat(i),o=a/parseFloat(i)*100;if(Math.abs(a)<.01)return"¬±0.00";const s=a>0?"+":"";return`${s}${a.toFixed(2)} (${s}${o.toFixed(1)}%)`},getCurrentPrice(){var i,e,a;return this.technicalData?(i=this.technicalData.sma5)!=null&&i.currentPrice?parseFloat(this.technicalData.sma5.currentPrice):(e=this.technicalData.ma5)!=null&&e.currentPrice?parseFloat(this.technicalData.ma5.currentPrice):(a=this.technicalData.sma50)!=null&&a.currentPrice?parseFloat(this.technicalData.sma50.currentPrice):null:null},getPriceDiffClass(i){if(!i)return"neutral";const e=this.getCurrentPrice();if(!e)return"neutral";const a=e-parseFloat(i);return Math.abs(a)<.01?"neutral":a>0?"positive":"negative"}}},Pn={class:"technical-indicators"},Ln={class:"indicators-header"},Rn={key:0,class:"cache-info"},En={key:0,class:"loading-state"},$n={key:1,class:"error-state"},Un=["disabled"],Fn={key:2,class:"indicators-grid"},On={class:"indicator-item"},Wn={class:"indicator-value-row"},Vn={class:"indicator-item"},qn={class:"indicator-value-row"},Bn={class:"indicator-item"},Hn={class:"indicator-value-row"},zn={class:"indicator-item"},Gn={class:"indicator-value-row"},jn={class:"indicator-item"},Qn={class:"indicator-value-row"},Xn={class:"indicator-item"},Kn={class:"indicator-value-row"},Yn={class:"indicator-item"},Jn={class:"indicator-value-row"},Zn={class:"indicator-item"},ei={class:"indicator-value-row"},ti={class:"indicator-item"},si={class:"indicator-value-row"},ai={class:"indicator-item"},ni={class:"indicator-item"},ii={class:"indicator-item"};function oi(i,e,a,o,s,n){var r,d,c,g,y,p,k,D,C,A,b,F,M,O,f,W,w,I,m,V,B,te,se,me,fe,pe,ye,ve,we,Se,be,_e,ke,Ce,Te,De,Ae,Ie,xe,Me,Ne,Pe,Le,Re,Ee,$e,Ue,Fe,Oe,We,Ve,qe,Be,He,ze,Ge,je,Qe,Xe,Q,it,pt,yt,vt,wt,St,bt,_t,kt,Ct,Tt,Dt,At,It,xt,Mt,Nt,Pt,Lt,Rt,Et,$t,Ut,Ft;return u(),h("div",Pn,[t("div",Ln,[e[1]||(e[1]=t("h4",null,"Technical Indicators",-1)),s.cacheInfo?(u(),h("div",Rn,[t("small",null,l(s.cacheInfo),1)])):S("",!0)]),s.loading?(u(),h("div",En,[...e[2]||(e[2]=[t("div",{class:"loading-spinner"},null,-1),t("span",null,"Loading technical data...",-1)])])):s.error?(u(),h("div",$n,[e[3]||(e[3]=t("span",{class:"error-icon"},"‚ö†Ô∏è",-1)),t("span",null,l(s.error),1),t("button",{onClick:e[0]||(e[0]=(...Yt)=>n.retryLoad&&n.retryLoad(...Yt)),class:"retry-button",disabled:s.loading},l(s.loading?"Loading...":"Retry"),9,Un)])):(u(),h("div",Fn,[t("div",On,[e[4]||(e[4]=t("span",{class:"indicator-label"},"MA5",-1)),t("div",Wn,[t("span",{class:v(["indicator-value",n.getSignalClass((d=(r=s.technicalData)==null?void 0:r.ma5)==null?void 0:d.signal)])},l(n.formatValue((g=(c=s.technicalData)==null?void 0:c.ma5)==null?void 0:g.value)),3),t("span",{class:v(["price-diff",n.getPriceDiffClass((p=(y=s.technicalData)==null?void 0:y.ma5)==null?void 0:p.value)])},l(n.formatPriceDiff((D=(k=s.technicalData)==null?void 0:k.ma5)==null?void 0:D.value)),3)])]),t("div",Vn,[e[5]||(e[5]=t("span",{class:"indicator-label"},"MA10",-1)),t("div",qn,[t("span",{class:v(["indicator-value",n.getSignalClass((A=(C=s.technicalData)==null?void 0:C.ma10)==null?void 0:A.signal)])},l(n.formatValue((F=(b=s.technicalData)==null?void 0:b.ma10)==null?void 0:F.value)),3),t("span",{class:v(["price-diff",n.getPriceDiffClass((O=(M=s.technicalData)==null?void 0:M.ma10)==null?void 0:O.value)])},l(n.formatPriceDiff((W=(f=s.technicalData)==null?void 0:f.ma10)==null?void 0:W.value)),3)])]),t("div",Bn,[e[6]||(e[6]=t("span",{class:"indicator-label"},"MA30",-1)),t("div",Hn,[t("span",{class:v(["indicator-value",n.getSignalClass((I=(w=s.technicalData)==null?void 0:w.ma30)==null?void 0:I.signal)])},l(n.formatValue((V=(m=s.technicalData)==null?void 0:m.ma30)==null?void 0:V.value)),3),t("span",{class:v(["price-diff",n.getPriceDiffClass((te=(B=s.technicalData)==null?void 0:B.ma30)==null?void 0:te.value)])},l(n.formatPriceDiff((me=(se=s.technicalData)==null?void 0:se.ma30)==null?void 0:me.value)),3)])]),t("div",zn,[e[7]||(e[7]=t("span",{class:"indicator-label"},"SMA5",-1)),t("div",Gn,[t("span",{class:v(["indicator-value",n.getSignalClass((pe=(fe=s.technicalData)==null?void 0:fe.sma5)==null?void 0:pe.signal)])},l(n.formatValue((ve=(ye=s.technicalData)==null?void 0:ye.sma5)==null?void 0:ve.value)),3),t("span",{class:v(["price-diff",n.getPriceDiffClass((Se=(we=s.technicalData)==null?void 0:we.sma5)==null?void 0:Se.value)])},l(n.formatPriceDiff((_e=(be=s.technicalData)==null?void 0:be.sma5)==null?void 0:_e.value)),3)])]),t("div",jn,[e[8]||(e[8]=t("span",{class:"indicator-label"},"SMA10",-1)),t("div",Qn,[t("span",{class:v(["indicator-value",n.getSignalClass((Ce=(ke=s.technicalData)==null?void 0:ke.sma10)==null?void 0:Ce.signal)])},l(n.formatValue((De=(Te=s.technicalData)==null?void 0:Te.sma10)==null?void 0:De.value)),3),t("span",{class:v(["price-diff",n.getPriceDiffClass((Ie=(Ae=s.technicalData)==null?void 0:Ae.sma10)==null?void 0:Ie.value)])},l(n.formatPriceDiff((Me=(xe=s.technicalData)==null?void 0:xe.sma10)==null?void 0:Me.value)),3)])]),t("div",Xn,[e[9]||(e[9]=t("span",{class:"indicator-label"},"SMA30",-1)),t("div",Kn,[t("span",{class:v(["indicator-value",n.getSignalClass((Pe=(Ne=s.technicalData)==null?void 0:Ne.sma30)==null?void 0:Pe.signal)])},l(n.formatValue((Re=(Le=s.technicalData)==null?void 0:Le.sma30)==null?void 0:Re.value)),3),t("span",{class:v(["price-diff",n.getPriceDiffClass(($e=(Ee=s.technicalData)==null?void 0:Ee.sma30)==null?void 0:$e.value)])},l(n.formatPriceDiff((Fe=(Ue=s.technicalData)==null?void 0:Ue.sma30)==null?void 0:Fe.value)),3)])]),t("div",Yn,[e[10]||(e[10]=t("span",{class:"indicator-label"},"Ichimoku Conversion (9)",-1)),t("div",Jn,[t("span",{class:v(["indicator-value",n.getSignalClass((We=(Oe=s.technicalData)==null?void 0:Oe.ichimokuConversionLine)==null?void 0:We.signal)])},l(n.formatValue((qe=(Ve=s.technicalData)==null?void 0:Ve.ichimokuConversionLine)==null?void 0:qe.value)),3),t("span",{class:v(["price-diff",n.getPriceDiffClass((He=(Be=s.technicalData)==null?void 0:Be.ichimokuConversionLine)==null?void 0:He.value)])},l(n.formatPriceDiff((Ge=(ze=s.technicalData)==null?void 0:ze.ichimokuConversionLine)==null?void 0:Ge.value)),3)])]),t("div",Zn,[e[11]||(e[11]=t("span",{class:"indicator-label"},"Ichimoku Base (26)",-1)),t("div",ei,[t("span",{class:v(["indicator-value",n.getSignalClass((Qe=(je=s.technicalData)==null?void 0:je.ichimokuBaseLine)==null?void 0:Qe.signal)])},l(n.formatValue((Q=(Xe=s.technicalData)==null?void 0:Xe.ichimokuBaseLine)==null?void 0:Q.value)),3),t("span",{class:v(["price-diff",n.getPriceDiffClass((pt=(it=s.technicalData)==null?void 0:it.ichimokuBaseLine)==null?void 0:pt.value)])},l(n.formatPriceDiff((vt=(yt=s.technicalData)==null?void 0:yt.ichimokuBaseLine)==null?void 0:vt.value)),3)])]),t("div",ti,[e[12]||(e[12]=t("span",{class:"indicator-label"},"Ichimoku Lagging (26)",-1)),t("div",si,[t("span",{class:v(["indicator-value",n.getSignalClass((St=(wt=s.technicalData)==null?void 0:wt.ichimokuLaggingSpan)==null?void 0:St.signal)])},l(n.formatValue((_t=(bt=s.technicalData)==null?void 0:bt.ichimokuLaggingSpan)==null?void 0:_t.value)),3),t("span",{class:v(["price-diff",n.getPriceDiffClass((Ct=(kt=s.technicalData)==null?void 0:kt.ichimokuLaggingSpan)==null?void 0:Ct.value)])},l(n.formatPriceDiff((Dt=(Tt=s.technicalData)==null?void 0:Tt.ichimokuLaggingSpan)==null?void 0:Dt.value)),3)])]),t("div",ai,[e[13]||(e[13]=t("span",{class:"indicator-label"},"ADX (14)",-1)),t("span",{class:v(["indicator-value",n.getSignalClass((It=(At=s.technicalData)==null?void 0:At.adx14)==null?void 0:It.signal)])},l(n.formatValue((Mt=(xt=s.technicalData)==null?void 0:xt.adx14)==null?void 0:Mt.value)),3)]),t("div",ni,[e[14]||(e[14]=t("span",{class:"indicator-label"},"MACD (12,26)",-1)),t("span",{class:v(["indicator-value",n.getSignalClass((Pt=(Nt=s.technicalData)==null?void 0:Nt.macd)==null?void 0:Pt.signal)])},l(n.formatValue((Rt=(Lt=s.technicalData)==null?void 0:Lt.macd)==null?void 0:Rt.value)),3)]),t("div",ii,[e[15]||(e[15]=t("span",{class:"indicator-label"},"VWMA (20)",-1)),t("span",{class:v(["indicator-value",n.getSignalClass(($t=(Et=s.technicalData)==null?void 0:Et.vwma20)==null?void 0:$t.signal)])},l(n.formatValue((Ft=(Ut=s.technicalData)==null?void 0:Ut.vwma20)==null?void 0:Ft.value)),3)])]))])}const Ht=P(Nn,[["render",oi],["__scopeId","data-v-11a93c2d"]]),ri={name:"StockCard",components:{FastTradingViewWidget:Bt,TechnicalAnalysisWidget:Mn,TechnicalIndicators:Ht},props:{quote:{type:Object,required:!0},dailyData:{type:Object,default:null},metadata:{type:Object,default:null}},computed:{isStale(){return this.quote.stale_level!=="fresh"},domId(){return`sym-${this.sanitizeSymbol(this.quote.symbol)}`}},methods:{getSector(){return!this.metadata||this.metadata.confidence<.7?"Unknown":this.metadata.sector||"Unknown"},getIndustry(){return!this.metadata||this.metadata.confidence<.7?"Unknown Industry":this.metadata.industry||this.metadata.sector||"Unknown Industry"},getIndustryCategory(){const i=this.getIndustry();return{"Industrial IoT Solutions":"tech-iot","Satellite Imaging & Analytics":"tech-satellite","Database Software":"tech-software","Enterprise Software":"tech-software",Semiconductors:"tech-hardware","Aerospace & Defense":"industrial-aerospace","Space Infrastructure":"industrial-space","Satellite Communications":"communications","Electric Vehicles":"automotive","Unknown Industry":"unknown"}[i]||"other"},getExchange(){if(this.metadata&&this.metadata.exchange)return{NYQ:"NYSE",NMS:"NASDAQ",NCM:"NASDAQ",NGM:"NASDAQ",ASE:"AMEX"}[this.metadata.exchange]||this.metadata.exchange;const i=this.quote.symbol;return["ORCL","TSM","RDW","CRM","PL","LEU","SMR","IONQ","HIMS"].includes(i)?"NYSE":(["ASTS","RIVN","ONDS","AVAV","MDB","RKLB","NVDA","AVGO","AMZN","GOOG","META","NFLX","CRWV","PLTR","TSLA"].includes(i),"NASDAQ")},getStaleText(){switch(this.quote.stale_level){case"stale":return"üü° Stale Data";case"very_stale":return"üî¥ Very Stale";default:return""}},goToDetail(){console.log("Navigating to stock detail for:",this.quote.symbol),this.$router.push({name:"stock-detail",params:{symbol:this.quote.symbol}}).catch(i=>{console.error("Navigation error:",i)})},sanitizeSymbol(i){return i.replace(/[^a-zA-Z0-9]/g,"_")}}},li=["id","data-symbol"],ci={class:"stock-info-header"},di={class:"symbol-info"},ui={class:"symbol"},hi={class:"symbol-tags"},gi={class:"exchange-tag"},mi={class:"header-actions"},fi=["title"],pi={class:"widgets-container"},yi={class:"widget-overview"},vi={class:"widget-overview"},wi={key:0,class:"additional-info"},Si={class:"brief-section"},bi={class:"brief-text"},_i={key:1,class:"stale-indicator"};function ki(i,e,a,o,s,n){const r=E("FastTradingViewWidget"),d=E("TechnicalAnalysisWidget"),c=E("TechnicalIndicators");return u(),h("div",{class:"stock-card-pair",id:n.domId,"data-symbol":a.quote.symbol,tabindex:"-1"},[t("div",ci,[t("div",di,[t("h3",ui,l(a.quote.symbol),1),t("div",hi,[t("span",gi,l(n.getExchange()),1),t("span",{class:v(["industry-tag",`industry-${n.getIndustryCategory()}`])},l(n.getIndustry()),3)])]),t("div",mi,[t("button",{onClick:e[0]||(e[0]=(...g)=>n.goToDetail&&n.goToDetail(...g)),class:"detail-btn",title:`View detailed analysis for ${a.quote.symbol}`},[...e[1]||(e[1]=[_(" Detail ",-1),t("span",{class:"btn-icon"},"‚Üí",-1)])],8,fi)])]),t("div",pi,[t("div",yi,[e[2]||(e[2]=t("div",{class:"widget-header"},[t("h4",null,"Symbol Overview")],-1)),N(r,{"widget-type":"overview",symbol:a.quote.symbol,exchange:n.getExchange(),priority:1},null,8,["symbol","exchange"])]),t("div",vi,[e[3]||(e[3]=t("div",{class:"widget-header"},[t("h4",null,"Technical Analysis")],-1)),N(d,{symbol:a.quote.symbol,exchange:n.getExchange(),priority:2},null,8,["symbol","exchange"])])]),a.dailyData?(u(),h("div",wi,[t("div",Si,[e[4]||(e[4]=t("h5",null,"Daily Brief",-1)),t("p",bi,l(a.dailyData.short_brief_zh),1)])])):S("",!0),N(c,{symbol:a.quote.symbol,exchange:n.getExchange()},null,8,["symbol","exchange"]),n.isStale?(u(),h("div",_i,[t("span",{class:v(["stale-badge",`stale-${a.quote.stale_level}`])},l(n.getStaleText()),3)])):S("",!0)],8,li)}const Ci=P(ri,[["render",ki],["__scopeId","data-v-80d1339d"]]),Ti={name:"TOCTree",props:{nodes:{type:Array,default:()=>[]},activeSymbol:{type:String,default:""},searchQuery:{type:String,default:""}},emits:["symbol-click"],methods:{onSymbolClick(i){this.$emit("symbol-click",i)},getTotalSymbolCount(i){return i.children.reduce((e,a)=>e+a.children.length,0)}}},Di={class:"toc-tree"},Ai={class:"tree-label sector-label"},Ii=["title"],xi={class:"item-count"},Mi={class:"tree-children"},Ni={class:"tree-label industry-label"},Pi=["title"],Li={class:"item-count"},Ri={class:"tree-children"},Ei=["aria-current","onClick","onKeydown"],$i=["title"],Ui={class:"exchange-badge"};function Fi(i,e,a,o,s,n){return u(),h("div",Di,[(u(!0),h($,null,U(a.nodes,r=>(u(),h("div",{key:r.id,class:"tree-node sector-node"},[t("div",Ai,[t("span",{class:"label-text",title:r.label},l(r.label),9,Ii),t("span",xi,"("+l(n.getTotalSymbolCount(r))+")",1)]),t("div",Mi,[(u(!0),h($,null,U(r.children,d=>(u(),h("div",{key:d.id,class:"tree-node industry-node"},[t("div",Ni,[t("span",{class:"label-text",title:d.label},l(d.label),9,Pi),t("span",Li,"("+l(d.children.length)+")",1)]),t("div",Ri,[(u(!0),h($,null,U(d.children,c=>(u(),h("button",{key:c.id,class:v(["tree-node symbol-node",{"is-active":c.symbol===a.activeSymbol}]),"aria-current":c.symbol===a.activeSymbol?"location":null,onClick:g=>n.onSymbolClick(c.symbol),onKeydown:[Ye(g=>n.onSymbolClick(c.symbol),["enter"]),Ye(ts(g=>n.onSymbolClick(c.symbol),["prevent"]),["space"])]},[t("span",{class:"symbol-text",title:c.label},l(c.label),9,$i),t("span",Ui,l(c.metadata.exchange),1)],42,Ei))),128))])]))),128))])]))),128))])}const Oi=P(Ti,[["render",Fi],["__scopeId","data-v-19f77406"]]),Wi={name:"NavigationPanel",components:{TOCTree:Oi},props:{tocTree:{type:Array,default:()=>[]},activeSymbol:{type:String,default:""},searchQuery:{type:String,default:""},isVisible:{type:Boolean,default:!0}},emits:["symbol-click","search-change"],data(){return{localSearchQuery:this.searchQuery}},computed:{filteredTocTree(){if(!this.localSearchQuery.trim())return this.tocTree;const i=this.localSearchQuery.toLowerCase().trim();return this.tocTree.map(e=>{const a={...e,children:[]};return e.children.forEach(o=>{const s={...o,children:[]};o.children.forEach(n=>{[e.label,o.label,n.label,n.symbol].some(d=>d.toLowerCase().includes(i))&&s.children.push(n)}),s.children.length>0&&a.children.push(s)}),a.children.length>0?a:null}).filter(Boolean)}},watch:{searchQuery(i){this.localSearchQuery=i}},methods:{onSymbolClick(i){this.$emit("symbol-click",i)},onSearchChange(){this.$emit("search-change",this.localSearchQuery)}}},Vi={class:"panel-header"},qi={class:"search-container"},Bi={class:"panel-content"};function Hi(i,e,a,o,s,n){const r=E("TOCTree");return u(),h("div",{class:v(["navigation-panel",{"is-visible":a.isVisible}])},[t("div",Vi,[e[3]||(e[3]=t("h3",null,"Quick Navigation",-1)),t("div",qi,[q(t("input",{"onUpdate:modelValue":e[0]||(e[0]=d=>s.localSearchQuery=d),type:"text",placeholder:"Search stocks, sectors, industries...",class:"search-input","aria-label":"Search stocks",onInput:e[1]||(e[1]=(...d)=>n.onSearchChange&&n.onSearchChange(...d))},null,544),[[ne,s.localSearchQuery]]),e[2]||(e[2]=t("span",{class:"search-icon"},"üîç",-1))])]),t("div",Bi,[N(r,{nodes:n.filteredTocTree,"active-symbol":a.activeSymbol,"search-query":s.localSearchQuery,onSymbolClick:n.onSymbolClick},null,8,["nodes","active-symbol","search-query","onSymbolClick"])])],2)}const zi=P(Wi,[["render",Hi],["__scopeId","data-v-99dc733f"]]);class Gi{constructor(){this.headerOffset=80}async scrollToSymbol(e,a=!0){try{const s=`sym-${this.sanitizeSymbol(e)}`,n=document.getElementById(s);if(!n){console.warn(`NavigationService: Element with ID "${s}" not found for symbol "${e}"`);return}const r=window.matchMedia("(prefers-reduced-motion: reduce)").matches,c=n.offsetTop-this.getHeaderOffset(),g=window.pageYOffset,y=Math.abs(c-g),k=window.innerHeight*2,D=y>k||r,C=a&&!D;console.log(`NavigationService: Scroll distance ${y}px, threshold ${k}px, using ${C?"smooth":"instant"} scroll`),window.scrollTo({top:Math.max(0,c),behavior:C?"smooth":"instant"}),C&&await this.waitForScrollComplete(),n.focus({preventScroll:!0}),console.log(`NavigationService: Scrolled to symbol "${e}" (ID: ${s}) using ${C?"smooth":"instant"} behavior`)}catch(o){console.error("NavigationService: Error scrolling to symbol:",o)}}sanitizeSymbol(e){return e.replace(/[^a-zA-Z0-9]/g,"_")}updateQueryParam(e){try{const a=new URL(window.location);e?a.searchParams.set("focus",e):a.searchParams.delete("focus"),window.history.replaceState(null,"",a.toString()),console.log(`NavigationService: Updated URL query param to focus=${e}`)}catch(a){console.error("NavigationService: Error updating query param:",a)}}getFocusSymbolFromQuery(){try{return new URL(window.location).searchParams.get("focus")}catch(e){return console.error("NavigationService: Error reading query param:",e),null}}getHeaderOffset(){try{const e=document.querySelector("header, .header, .navbar, .app-header");if(e)return e.getBoundingClientRect().height+20}catch(e){console.warn("NavigationService: Could not calculate header height:",e)}return this.headerOffset}waitForScrollComplete(){return new Promise(e=>{let a=window.pageYOffset,o=null;const s=()=>{const n=window.pageYOffset;Math.abs(n-a)<1?(clearTimeout(o),e()):(a=n,o=setTimeout(s,50))};o=setTimeout(s,50),setTimeout(e,2e3)})}isSymbolValid(e){const o=`sym-${this.sanitizeSymbol(e)}`;return document.getElementById(o)!==null}}const et=new Gi;class ji{constructor(){this.observer=null,this.callback=null,this.observedElements=new Map,this.isActive=!1,this.observerOptions={root:null,rootMargin:"-80px 0px -50% 0px",threshold:[0,.1,.25,.5,.75,1]}}setup(e,a){try{this.cleanup(),this.callback=a,this.observedElements.clear(),this.observer=new IntersectionObserver(this.handleIntersection.bind(this),this.observerOptions),e.forEach(o=>{const s=o.dataset.symbol;s&&(this.observedElements.set(o,s),this.observer.observe(o))}),this.isActive=!0,console.log(`ScrollSpyService: Started observing ${e.length} elements`)}catch(o){console.error("ScrollSpyService: Error setting up observer:",o)}}handleIntersection(e){if(!(!this.isActive||!this.callback))try{const a=[];if(e.forEach(s=>{const n=this.observedElements.get(s.target);n&&s.isIntersecting&&a.push({element:s.target,symbol:n,intersectionRatio:s.intersectionRatio,boundingClientRect:s.boundingClientRect})}),a.length===0)return;const o=this.determineActiveSymbol(a);o&&this.debouncedCallback(o)}catch(a){console.error("ScrollSpyService: Error handling intersection:",a)}}determineActiveSymbol(e){if(e.length===0)return null;if(e.length===1)return e[0].symbol;const o=window.innerHeight/2;let s=e[0],n=this.calculateElementScore(s,o);for(let r=1;r<e.length;r++){const d=e[r],c=this.calculateElementScore(d,o);c>n&&(s=d,n=c)}return s.symbol}calculateElementScore(e,a){const{intersectionRatio:o,boundingClientRect:s}=e,n=s.top+s.height/2,c=1-Math.abs(n-a)/a;return o*.7+c*.3}debouncedCallback(e){this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.callback&&this.isActive&&this.callback(e)},100)}updateActiveSymbol(e){this.callback&&this.isActive&&this.callback(e)}refresh(){if(!(!this.observer||!this.isActive))try{const e=Array.from(this.observedElements.keys()),a=[];e.forEach(s=>{const n=s.getBoundingClientRect(),r=this.observedElements.get(s);if(n.top<window.innerHeight&&n.bottom>0&&r){const d=this.calculateIntersectionRatio(n);d>0&&a.push({element:s,symbol:r,intersectionRatio:d,boundingClientRect:n})}});const o=this.determineActiveSymbol(a);o&&this.updateActiveSymbol(o)}catch(e){console.error("ScrollSpyService: Error refreshing:",e)}}calculateIntersectionRatio(e){const a=window.innerHeight,s=Math.max(e.top,80),n=Math.min(e.bottom,a);return Math.max(0,n-s)/e.height}cleanup(){try{this.observer&&(this.observer.disconnect(),this.observer=null),this.debounceTimer&&(clearTimeout(this.debounceTimer),this.debounceTimer=null),this.observedElements.clear(),this.callback=null,this.isActive=!1,console.log("ScrollSpyService: Cleaned up")}catch(e){console.error("ScrollSpyService: Error during cleanup:",e)}}pause(){this.isActive=!1}resume(){this.isActive=!0,this.refresh()}}const tt=new ji,Qi={name:"StockOverview",components:{StockCard:Ci,LazyTradingViewWidget:ft,NavigationPanel:zi},data(){return{quotes:[],dailyData:null,metadata:null,loading:!1,error:null,lastUpdate:null,configuredSymbols:[],activeSymbol:"",searchQuery:""}},computed:{tickersConfig(){return{symbols:[{proName:"FOREXCOM:SPXUSD",title:"S&P 500 Index"},{proName:"NASDAQ:NDX",title:"NASDAQ 100 Index"},{proName:"OPOFINANCE:DJIUSD",title:"Dow Jone Index"},{proName:"CAPITALCOM:RTY",title:"US Russel 2000"},{proName:"INDEX:BTCUSD",title:"BTC"},{proName:"TVC:GOLD",title:"GOLD"}],colorTheme:"light",locale:"en",largeChartUrl:"",isTransparent:!0,showSymbolLogo:!0}},groupedStocks(){if(!this.quotes.length||!this.metadata)return{};const i={};this.quotes.forEach(s=>{var c,g;const n=this.metadata.items.find(y=>y.symbol===s.symbol),r=(g=(c=this.dailyData)==null?void 0:c.per_symbol)==null?void 0:g.find(y=>y.symbol===s.symbol);let d="Unknown";n&&n.confidence>=.7&&(d=n.sector||"Unknown"),i[d]||(i[d]=[]),i[d].push({quote:s,dailyData:r,metadata:n})});const e=["Technology","Financial Services","Consumer Cyclical","Communication Services","Healthcare","Industrials","Consumer Defensive","Energy","Basic Materials","Real Estate","Utilities"],a={Technology:["Semiconductors","Software - Infrastructure","Consumer Electronics","Software - Application","Information Technology Services","Semiconductor Equipment & Materials","Communication Equipment","Computer Hardware","Electronic Components","Scientific & Technical Instruments","Solar","Electronics & Computer Distribution"],"Financial Services":["Banks - Diversified","Credit Services","Asset Management","Capital Markets","Insurance - Diversified","Banks - Regional","Financial Data & Stock Exchanges","Insurance - Property & Casualty","Insurance Brokers","Insurance - Life","Insurance - Specialty","Mortgage Finance","Insurance - Reinsurance","Financial Conglomerates","Shell Companies"],"Consumer Cyclical":["Internet Retail","Auto Manufacturers","Restaurants","Home Improvement Retail","Travel Services","Apparel Retail","Auto Parts","Specialty Retail","Lodging","Residential Construction","Auto & Truck Dealerships","Packaging & Containers","Footwear & Accessories","Resorts & Casinos","Gambling","Leisure","Apparel Manufacturing","Furnishings, Fixtures & Appliances","Personal Services","Luxury Goods","Recreational Vehicles","Department Stores","Education & Training Services"],"Communication Services":["Internet Content & Information","Telecom Services","Entertainment","Advertising Agencies","Electronic Gaming & Multimedia","Publishing","Broadcasting"],Healthcare:["Drug Manufacturers - General","Biotechnology","Medical Devices","Diagnostics & Research","Healthcare Plans","Medical Instruments & Supplies","Medical Distribution","Medical Care Facilities","Drug Manufacturers - Specialty & Generic","Health Information Services","Pharmaceutical Retailers"],Industrials:["Aerospace & Defense","Specialty Industrial Machinery","Farm & Heavy Construction Machinery","Railroads","Engineering & Construction","Building Products & Equipment","Specialty Business Services","Waste Management","Industrial Distribution","Conglomerates","Integrated Freight & Logistics","Electrical Equipment & Parts","Rental & Leasing Services","Airlines","Trucking","Consulting Services","Tools & Accessories","Metal Fabrication","Pollution & Treatment Controls","Security & Protection Services","Marine Shipping","Airports & Air Services","Staffing & Employment Services","Business Equipment & Supplies","Infrastructure Operations"],"Consumer Defensive":["Discount Stores","Beverages - Non-Alcoholic","Household & Personal Products","Tobacco","Packaged Foods","Confectioners","Farm Products","Food Distribution","Grocery Stores","Education & Training Services","Beverages - Brewers","Beverages - Wineries & Distilleries"],Energy:["Oil & Gas Integrated","Oil & Gas Midstream","Oil & Gas E&P","Oil & Gas Equipment & Services","Oil & Gas Refining & Marketing","Uranium","Oil & Gas Drilling","Thermal Coal","Utilities - Independent Power Producers"],"Basic Materials":["Gold","Specialty Chemicals","Building Materials","Copper","Steel","Agricultural Inputs","Other Industrial Metals & Mining","Chemicals","Other Precious Metals & Mining","Aluminum","Lumber & Wood Production","Silver","Coking Coal","Paper & Paper Products"],"Real Estate":["REIT - Specialty","REIT - Industrial","REIT - Healthcare Facilities","REIT - Retail","REIT - Residential","Real Estate Services","REIT - Mortgage","REIT - Office","REIT - Diversified","REIT - Hotel & Motel","Real Estate - Development","Real Estate - Diversified"],Utilities:["Utilities - Regulated Electric","Utilities - Independent Power Producers","Utilities - Regulated Gas","Utilities - Diversified","Utilities - Renewable","Utilities - Regulated Water"]},o={};return e.forEach(s=>{if(i[s]&&i[s].length>0){const n=a[s]||[],r={};i[s].forEach(c=>{var y;const g=((y=c.metadata)==null?void 0:y.industry)||"Unknown Industry";r[g]||(r[g]=[]),r[g].push(c)});const d=[];n.forEach(c=>{if(r[c]){const g=r[c].sort((y,p)=>{var C,A;const k=((C=y.metadata)==null?void 0:C.market_cap)||0,D=((A=p.metadata)==null?void 0:A.market_cap)||0;return k===D?y.quote.symbol.localeCompare(p.quote.symbol):D-k});d.push(...g)}}),Object.keys(r).forEach(c=>{if(!n.includes(c)){const g=r[c].sort((y,p)=>{var C,A;const k=((C=y.metadata)==null?void 0:C.market_cap)||0,D=((A=p.metadata)==null?void 0:A.market_cap)||0;return k===D?y.quote.symbol.localeCompare(p.quote.symbol):D-k});d.push(...g)}}),o[s]=d}}),Object.keys(i).forEach(s=>{!e.includes(s)&&i[s].length>0&&(o[s]=i[s].sort((n,r)=>n.quote.symbol.localeCompare(r.quote.symbol)))}),o},tocTree(){if(!this.quotes.length||!this.metadata)return[];const i=[];return Object.entries(this.groupedStocks).forEach(([e,a])=>{const o={id:`sector-${this.sanitizeId(e)}`,type:"sector",label:e,children:[]},s={};a.forEach(n=>{var d;const r=((d=n.metadata)==null?void 0:d.industry)||"Unknown Industry";s[r]||(s[r]=[]),s[r].push(n)}),Object.entries(s).forEach(([n,r])=>{const d={id:`industry-${this.sanitizeId(e)}-${this.sanitizeId(n)}`,type:"industry",label:n,children:[]};r.forEach(c=>{var y,p;const g={id:`symbol-${this.sanitizeId(c.quote.symbol)}`,type:"symbol",label:c.quote.symbol,symbol:c.quote.symbol,metadata:{sector:e,industry:n,exchange:this.mapExchangeCode((y=c.metadata)==null?void 0:y.exchange),marketCap:((p=c.metadata)==null?void 0:p.market_cap)||0}};d.children.push(g)}),o.children.push(d)}),i.push(o)}),i},metadataMap(){var e;if(!((e=this.metadata)!=null&&e.items))return new Map;const i=new Map;return this.metadata.items.forEach(a=>{i.set(a.symbol,a)}),i},dailyDataMap(){var e;if(!((e=this.dailyData)!=null&&e.per_symbol))return new Map;const i=new Map;return this.dailyData.per_symbol.forEach(a=>{i.set(a.symbol,a)}),i}},async mounted(){await this.loadStockData(),this.initializeNavigation()},beforeUnmount(){this.cleanupNavigation()},methods:{async loadStockData(){this.loading=!0,this.error=null;try{console.log("üöÄ Starting simple stock data load...");const i="/investment-dashboard";this.configuredSymbols=await yn.getEnabledSymbols(),console.log(`‚úÖ Loaded ${this.configuredSymbols.length} symbols from config`);const e=await fetch(`${i}/data/quotes/latest.json?t=`+Date.now());if(!e.ok)throw new Error(`Failed to load quotes: HTTP ${e.status}`);const a=await e.json();a.items&&(this.quotes=a.items.filter(n=>this.configuredSymbols.includes(n.symbol)),this.lastUpdate=a.as_of,console.log(`‚úÖ Loaded ${this.quotes.length} quotes`));const o=await fetch(`${i}/data/daily/2025-12-28.json?t=`+Date.now());o.ok&&(this.dailyData=await o.json(),console.log("‚úÖ Loaded daily data"));const s=await fetch(`${i}/data/symbols_metadata.json?t=`+Date.now());s.ok&&(this.metadata=await s.json(),console.log(`‚úÖ Loaded metadata for ${this.metadata.items.length} symbols`)),console.log("‚úÖ Simple stock data load completed successfully!")}catch(i){this.error=String(i),console.error("‚ùå Simple stock data load failed:",i)}finally{this.loading=!1}},async refresh(){await this.loadStockData()},formatTime(i){if(!i)return"";try{return new Date(i).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return i}},mapExchangeCode(i){return i?{NYQ:"NYSE",NMS:"NASDAQ",NCM:"NASDAQ",NGM:"NASDAQ",ASE:"AMEX"}[i]||i:"Unknown"},sanitizeId(i){return i.replace(/[^a-zA-Z0-9]/g,"_")},async onSymbolClick(i){console.log("Navigation: Symbol clicked:",i),tt.pause();try{et.updateQueryParam(i),await et.scrollToSymbol(i),this.activeSymbol=i,this.autoExpandForSymbol(i)}finally{setTimeout(()=>{tt.resume()},500)}},onSearchChange(i){this.searchQuery=i},onToggleSection(i,e){e?this.expandedSections.add(i):this.expandedSections.delete(i),this.saveExpandedSections()},autoExpandForSymbol(i){for(const e of this.tocTree)for(const a of e.children)if(a.children.find(s=>s.symbol===i)){this.expandedSections.add(e.id),this.expandedSections.add(a.id),this.saveExpandedSections();return}},saveExpandedSections(){try{const i=Array.from(this.expandedSections);localStorage.setItem("stock-overview-expanded-sections",JSON.stringify(i))}catch(i){console.warn("Failed to save expanded sections:",i)}},loadExpandedSections(){try{const i=localStorage.getItem("stock-overview-expanded-sections");if(i){const e=JSON.parse(i);this.expandedSections=new Set(e)}}catch(i){console.warn("Failed to load expanded sections:",i),this.expandedSections=new Set}},initializeNavigation(){this.loadExpandedSections(),this.expandedSections.size===0&&this.expandAllSections();const i=et.getFocusSymbolFromQuery();i&&this.isSymbolValid(i)&&(console.log("Navigation: Found focus symbol in URL:",i),this.$nextTick(()=>{setTimeout(()=>{this.onSymbolClick(i)},500)})),this.$nextTick(()=>{this.setupScrollSpy()})},setupScrollSpy(){try{const i=document.querySelectorAll("[data-symbol]");if(i.length===0){console.warn("ScrollSpy: No stock card elements found");return}tt.setup(Array.from(i),e=>{console.log("ScrollSpy: Active symbol changed to:",e),this.activeSymbol=e,this.autoExpandForSymbol(e)}),console.log(`ScrollSpy: Initialized with ${i.length} elements`)}catch(i){console.error("Failed to setup ScrollSpy:",i)}},cleanupNavigation(){tt.cleanup()},isSymbolValid(i){return et.isSymbolValid(i)},expandAllSections(){this.tocTree.forEach(i=>{this.expandedSections.add(i.id),i.children.forEach(e=>{this.expandedSections.add(e.id)})}),this.saveExpandedSections(),console.log("Navigation: Expanded all sections by default")}}},Xi={class:"stock-overview"},Ki={class:"stock-header"},Yi={class:"header-right"},Ji={key:0,class:"update-info"},Zi={class:"text-muted"},eo={key:0,class:"loading"},to={key:1,class:"error"},so={class:"text-danger"},ao={key:2,class:"main-layout"},no={class:"main-content"},io={class:"widget-container-ticker"},oo={class:"sector-groups"},ro={class:"sector-title"},lo={class:"stock-count"},co={class:"stocks-in-group"},uo={key:3,class:"no-data"};function ho(i,e,a,o,s,n){const r=E("NavigationPanel"),d=E("LazyTradingViewWidget"),c=E("StockCard");return u(),h("div",Xi,[t("div",Ki,[e[1]||(e[1]=t("h2",null,"Stock Overview",-1)),t("div",Yi,[s.lastUpdate?(u(),h("div",Ji,[t("span",Zi,"Last updated: "+l(n.formatTime(s.lastUpdate)),1)])):S("",!0)])]),e[5]||(e[5]=t("p",{class:"text-muted mb-3"},"Stock universe overview and analysis",-1)),s.loading?(u(),h("div",eo,[...e[2]||(e[2]=[t("div",{class:"spinner"},null,-1),t("p",null,"Loading stock data...",-1)])])):s.error?(u(),h("div",to,[t("p",so,l(s.error),1),t("button",{onClick:e[0]||(e[0]=(...g)=>n.refresh&&n.refresh(...g)),class:"btn btn-secondary"},"Retry")])):(u(),h("div",ao,[N(r,{"toc-tree":n.tocTree,"active-symbol":s.activeSymbol,"search-query":s.searchQuery,"is-visible":!0,onSymbolClick:n.onSymbolClick,onSearchChange:n.onSearchChange,class:"navigation-sidebar"},null,8,["toc-tree","active-symbol","search-query","onSymbolClick","onSearchChange"]),t("div",no,[t("div",io,[e[3]||(e[3]=t("div",{class:"widget-header"},[t("h3",null,"Market Index")],-1)),N(d,{"widget-type":"Market Index",config:n.tickersConfig,"script-url":"https://s3.tradingview.com/external-embedding/embed-widget-tickers.js",height:"100px",priority:1},null,8,["config"])]),t("div",oo,[(u(!0),h($,null,U(n.groupedStocks,(g,y)=>(u(),h("div",{key:y,class:"sector-group"},[t("h4",ro,[_(l(y)+" ",1),t("span",lo,"("+l(g.length)+")",1)]),t("div",co,[(u(!0),h($,null,U(g,p=>(u(),Vt(c,{key:p.quote.symbol,quote:p.quote,"daily-data":p.dailyData,metadata:p.metadata},null,8,["quote","daily-data","metadata"]))),128))])]))),128))])])])),!s.loading&&Object.keys(n.groupedStocks).length===0?(u(),h("div",uo,[...e[4]||(e[4]=[t("p",null,"No stock data available",-1)])])):S("",!0)])}const go=P(Qi,[["render",ho],["__scopeId","data-v-a81e49a9"]]),mo={name:"PerformanceMonitor",data(){return{showMonitor:!1,expanded:!0,pageLoadTime:0,widgetsLoaded:0,totalWidgets:0,widgetTimes:[],startTime:0}},computed:{totalSize(){if(typeof performance<"u"&&performance.getEntriesByType){const e=performance.getEntriesByType("resource").reduce((a,o)=>a+(o.transferSize||0),0);return e>1024*1024?`${(e/(1024*1024)).toFixed(1)}MB`:e>1024?`${(e/1024).toFixed(1)}KB`:`${e}B`}return"N/A"},memoryUsage(){if(typeof performance<"u"&&performance.memory){const i=performance.memory.usedJSHeapSize;return i>1024*1024?`${(i/(1024*1024)).toFixed(1)}MB`:`${(i/1024).toFixed(1)}KB`}return"N/A"}},mounted(){this.startTime=performance.now(),this.setupPerformanceTracking();const i=new URLSearchParams(window.location.search).has("debug");this.showMonitor=i,document.readyState==="complete"?this.calculatePageLoadTime():window.addEventListener("load",this.calculatePageLoadTime)},beforeUnmount(){window.removeEventListener("load",this.calculatePageLoadTime)},methods:{setupPerformanceTracking(){if(window.addEventListener("widget-loaded",i=>{i.detail&&this.addWidgetTime({name:i.detail.name,time:i.detail.time,priority:i.detail.priority||1})}),typeof PerformanceObserver<"u")try{const i=new PerformanceObserver(e=>{for(const a of e.getEntries())(a.name.includes("tradingview")||a.name.includes("widget"))&&this.addWidgetTime({name:a.name.split("/").pop()||"Unknown Widget",time:Math.round(a.duration),priority:2})});i.observe({entryTypes:["resource","navigation"]}),this.$once("hook:beforeDestroy",()=>{i.disconnect()})}catch(i){console.warn("PerformanceObserver not supported:",i)}},calculatePageLoadTime(){this.pageLoadTime=Math.round(performance.now()-this.startTime)},addWidgetTime(i){var e;if(this.widgetTimes.push({id:Date.now()+Math.random(),...i}),this.widgetsLoaded++,this.totalWidgets===0){const a=((e=this.$route)==null?void 0:e.path)||window.location.pathname;a.includes("market-dashboard")?this.totalWidgets=5:a.includes("stock-dashboard")?this.totalWidgets=10:this.totalWidgets=this.widgetsLoaded+2}},getTimeClass(i){return i<1e3?"time-good":i<3e3?"time-ok":"time-slow"},toggleMonitor(){this.expanded=!this.expanded},clearMetrics(){this.widgetTimes=[],this.widgetsLoaded=0,this.totalWidgets=0,this.startTime=performance.now()},exportMetrics(){const i={pageLoadTime:this.pageLoadTime,widgetsLoaded:this.widgetsLoaded,totalWidgets:this.totalWidgets,totalSize:this.totalSize,memoryUsage:this.memoryUsage,widgetTimes:this.widgetTimes,timestamp:new Date().toISOString(),url:window.location.href},e=new Blob([JSON.stringify(i,null,2)],{type:"application/json"}),a=URL.createObjectURL(e),o=document.createElement("a");o.href=a,o.download=`performance-${Date.now()}.json`,o.click(),URL.revokeObjectURL(a)}}},fo={key:0,class:"performance-monitor"},po={class:"monitor-header"},yo={key:0,class:"monitor-content"},vo={class:"metrics-grid"},wo={class:"metric-card"},So={class:"metric-value"},bo={class:"metric-card"},_o={class:"metric-value"},ko={class:"metric-card"},Co={class:"metric-value"},To={class:"metric-card"},Do={class:"metric-value"},Ao={class:"widgets-list"},Io={class:"widget-name"},xo={class:"widget-priority"},Mo={class:"actions"};function No(i,e,a,o,s,n){return s.showMonitor?(u(),h("div",fo,[t("div",po,[e[3]||(e[3]=t("h4",null,"Performance Monitor",-1)),t("button",{onClick:e[0]||(e[0]=(...r)=>n.toggleMonitor&&n.toggleMonitor(...r)),class:"toggle-btn"},l(s.expanded?"‚àí":"+"),1)]),s.expanded?(u(),h("div",yo,[t("div",vo,[t("div",wo,[e[4]||(e[4]=t("div",{class:"metric-label"},"Page Load",-1)),t("div",So,l(s.pageLoadTime)+"ms",1)]),t("div",bo,[e[5]||(e[5]=t("div",{class:"metric-label"},"Widgets Loaded",-1)),t("div",_o,l(s.widgetsLoaded)+"/"+l(s.totalWidgets),1)]),t("div",ko,[e[6]||(e[6]=t("div",{class:"metric-label"},"Total Size",-1)),t("div",Co,l(n.totalSize),1)]),t("div",To,[e[7]||(e[7]=t("div",{class:"metric-label"},"Memory Usage",-1)),t("div",Do,l(n.memoryUsage),1)])]),t("div",Ao,[e[8]||(e[8]=t("h5",null,"Widget Load Times",-1)),(u(!0),h($,null,U(s.widgetTimes,r=>(u(),h("div",{key:r.id,class:"widget-item"},[t("span",Io,l(r.name),1),t("span",{class:v(["widget-time",n.getTimeClass(r.time)])},l(r.time)+"ms ",3),t("span",xo,"P"+l(r.priority),1)]))),128))]),t("div",Mo,[t("button",{onClick:e[1]||(e[1]=(...r)=>n.clearMetrics&&n.clearMetrics(...r)),class:"clear-btn"},"Clear"),t("button",{onClick:e[2]||(e[2]=(...r)=>n.exportMetrics&&n.exportMetrics(...r)),class:"export-btn"},"Export")])])):S("",!0)])):S("",!0)}const zt=P(mo,[["render",No],["__scopeId","data-v-58a91d47"]]),Po={name:"StockDashboard",components:{StockOverview:go,PerformanceMonitor:zt}},Lo={class:"stock-dashboard"};function Ro(i,e,a,o,s,n){const r=E("PerformanceMonitor"),d=E("StockOverview");return u(),h("div",Lo,[N(r),N(d)])}const Eo=P(Po,[["render",Ro],["__scopeId","data-v-bd53c7a2"]]),$o={name:"Settings"},Uo={class:"settings"};function Fo(i,e,a,o,s,n){return u(),h("div",Uo,[...e[0]||(e[0]=[X('<h2>Settings</h2><p class="text-muted mb-3">Configure system preferences and view diagnostics</p><div class="card"><h3>Privacy &amp; Analytics</h3><p class="text-muted">Toggle tracking and scraping preferences</p></div><div class="card"><h3>System Diagnostics</h3><p class="text-muted">View system status and data freshness</p></div><div class="card"><h3>Import/Export</h3><p class="text-muted">Backup and restore your configuration</p></div>',5)])])}const Oo=P($o,[["render",Fo]]),Wo={name:"MarketRegimeWidget",props:{symbol:{type:String,required:!0},exchange:{type:String,default:"NASDAQ"},priority:{type:Number,default:3}},data(){return{loaded:!1,error:!1,loadStartTime:0,isVisible:!1,observer:null}},computed:{containerId(){return`market-regime-${this.symbol}-${Date.now()}`}},async mounted(){this.setupIntersectionObserver()},beforeUnmount(){this.observer&&this.observer.disconnect()},methods:{setupIntersectionObserver(){const i={1:"300px",2:"150px",3:"50px"};this.observer=new IntersectionObserver(e=>{e.forEach(a=>{a.isIntersecting&&!this.loaded&&!this.error&&(this.isVisible=!0,this.loadWidget(),this.observer.disconnect())})},{rootMargin:i[this.priority]||"50px",threshold:.1}),this.observer.observe(this.$refs.container)},async loadWidget(){this.loadStartTime=performance.now(),this.loaded=!1,this.error=!1;try{const e={1:0,2:300,3:600}[this.priority]||0;e>0&&await new Promise(a=>setTimeout(a,e)),await this.createWidget()}catch(i){console.error("Failed to load Market Regime widget:",i),this.error=!0}},async createWidget(){return new Promise((i,e)=>{this.$nextTick(async()=>{const a=this.$refs.container;if(!a){e(new Error("Container not found"));return}const o=this.getWidgetConfig(),s="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js",n=document.createElement("script");n.type="text/javascript",n.src=s,n.async=!0,n.innerHTML=JSON.stringify(o);const r=setTimeout(()=>{this.error=!0,e(new Error("Widget load timeout"))},8e3);n.onload=()=>{clearTimeout(r),this.loaded=!0;const c=performance.now()-this.loadStartTime;console.log(`Market Regime widget ${this.symbol} loaded in ${c.toFixed(2)}ms`),i()},n.onerror=()=>{clearTimeout(r),this.error=!0,e(new Error("Script load failed"))};const d=a.querySelector(".tradingview-widget-container__widget");d?d.appendChild(n):a.appendChild(n)})})},getWidgetConfig(){return{allow_symbol_change:!0,calendar:!1,details:!1,hide_side_toolbar:!0,hide_top_toolbar:!1,hide_legend:!1,hide_volume:!1,hotlist:!1,interval:"D",locale:"en",save_image:!0,style:"9",symbol:`${this.exchange}:${this.symbol}`,theme:"light",timezone:"Etc/UTC",backgroundColor:"#ffffff",gridColor:"rgba(46, 46, 46, 0.06)",watchlist:[],withdateranges:!0,range:"6M",compareSymbols:[],studies:["STD;Ichimoku%1Cloud","STD;BBTrend","STD;TEMA","STD;Awesome_Oscillator","STD;Average%1Directional%1Index"],autosize:!0}},async retry(){this.setupIntersectionObserver()}}},Vo=["id"],qo={key:0,class:"chart-loading"},Bo={key:1,class:"chart-error"},Ho={class:"tradingview-widget-container",style:{height:"100%",width:"100%"}},zo={class:"tradingview-widget-copyright"},Go=["href"],jo={class:"blue-text"};function Qo(i,e,a,o,s,n){return u(),h("div",{class:"advanced-chart-widget",id:n.containerId,ref:"container"},[!s.loaded&&!s.error?(u(),h("div",qo,[...e[1]||(e[1]=[t("div",{class:"loading-spinner"},null,-1),t("span",null,"Loading Market Regime...",-1)])])):S("",!0),s.error?(u(),h("div",Bo,[e[2]||(e[2]=t("span",null,"‚ö†Ô∏è Failed to load",-1)),t("button",{onClick:e[0]||(e[0]=(...r)=>n.retry&&n.retry(...r)),class:"retry-btn"},"Retry")])):S("",!0),q(t("div",Ho,[e[4]||(e[4]=t("div",{class:"tradingview-widget-container__widget",style:{height:"calc(100% - 32px)",width:"100%"}},null,-1)),t("div",zo,[t("a",{href:`https://www.tradingview.com/symbols/${a.exchange}-${a.symbol}/`,rel:"noopener nofollow",target:"_blank"},[t("span",jo,l(a.symbol)+" stock chart",1)],8,Go),e[3]||(e[3]=t("span",{class:"trademark"}," by TradingView",-1))])],512),[[ht,s.loaded]])],8,Vo)}const Xo=P(Wo,[["render",Qo],["__scopeId","data-v-ae8a7688"]]),Ko={name:"TradingStrategyWidget",props:{symbol:{type:String,required:!0},exchange:{type:String,default:"NASDAQ"},priority:{type:Number,default:4}},data(){return{loaded:!1,error:!1,loadStartTime:0,isVisible:!1,observer:null}},computed:{containerId(){return`trading-strategy-${this.symbol}-${Date.now()}`}},async mounted(){this.setupIntersectionObserver()},beforeUnmount(){this.observer&&this.observer.disconnect()},methods:{setupIntersectionObserver(){const i={1:"300px",2:"150px",3:"50px",4:"25px"};this.observer=new IntersectionObserver(e=>{e.forEach(a=>{a.isIntersecting&&!this.loaded&&!this.error&&(this.isVisible=!0,this.loadWidget(),this.observer.disconnect())})},{rootMargin:i[this.priority]||"25px",threshold:.1}),this.observer.observe(this.$refs.container)},async loadWidget(){this.loadStartTime=performance.now(),this.loaded=!1,this.error=!1;try{const e={1:0,2:300,3:600,4:900}[this.priority]||0;e>0&&await new Promise(a=>setTimeout(a,e)),await this.createWidget()}catch(i){console.error("Failed to load Trading Strategy widget:",i),this.error=!0}},async createWidget(){return new Promise((i,e)=>{this.$nextTick(async()=>{const a=this.$refs.container;if(!a){e(new Error("Container not found"));return}const o=this.getWidgetConfig(),s="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js",n=document.createElement("script");n.type="text/javascript",n.src=s,n.async=!0,n.innerHTML=JSON.stringify(o);const r=setTimeout(()=>{this.error=!0,e(new Error("Widget load timeout"))},8e3);n.onload=()=>{clearTimeout(r),this.loaded=!0;const c=performance.now()-this.loadStartTime;console.log(`Trading Strategy widget ${this.symbol} loaded in ${c.toFixed(2)}ms`),i()},n.onerror=()=>{clearTimeout(r),this.error=!0,e(new Error("Script load failed"))};const d=a.querySelector(".tradingview-widget-container__widget");d?d.appendChild(n):a.appendChild(n)})})},getWidgetConfig(){return{allow_symbol_change:!0,calendar:!1,details:!1,hide_side_toolbar:!0,hide_top_toolbar:!1,hide_legend:!1,hide_volume:!1,hotlist:!1,interval:"D",locale:"en",save_image:!0,style:"9",symbol:`${this.exchange}:${this.symbol}`,theme:"light",timezone:"Etc/UTC",backgroundColor:"#ffffff",gridColor:"rgba(46, 46, 46, 0.06)",watchlist:[],withdateranges:!0,range:"6M",compareSymbols:[],studies:["STD;MACD","STD;Donchian_Channels","STD;TRIX","STD;RSI"],autosize:!0}},async retry(){this.setupIntersectionObserver()}}},Yo=["id"],Jo={key:0,class:"chart-loading"},Zo={key:1,class:"chart-error"},er={class:"tradingview-widget-container",style:{height:"100%",width:"100%"}},tr={class:"tradingview-widget-copyright"},sr=["href"],ar={class:"blue-text"};function nr(i,e,a,o,s,n){return u(),h("div",{class:"advanced-chart-widget",id:n.containerId,ref:"container"},[!s.loaded&&!s.error?(u(),h("div",Jo,[...e[1]||(e[1]=[t("div",{class:"loading-spinner"},null,-1),t("span",null,"Loading Trading Strategy...",-1)])])):S("",!0),s.error?(u(),h("div",Zo,[e[2]||(e[2]=t("span",null,"‚ö†Ô∏è Failed to load",-1)),t("button",{onClick:e[0]||(e[0]=(...r)=>n.retry&&n.retry(...r)),class:"retry-btn"},"Retry")])):S("",!0),q(t("div",er,[e[4]||(e[4]=t("div",{class:"tradingview-widget-container__widget",style:{height:"calc(100% - 32px)",width:"100%"}},null,-1)),t("div",tr,[t("a",{href:`https://www.tradingview.com/symbols/${a.exchange}-${a.symbol}/`,rel:"noopener nofollow",target:"_blank"},[t("span",ar,l(a.symbol)+" stock chart",1)],8,sr),e[3]||(e[3]=t("span",{class:"trademark"}," by TradingView",-1))])],512),[[ht,s.loaded]])],8,Yo)}const ir=P(Ko,[["render",nr],["__scopeId","data-v-340bda90"]]),or={name:"TradingViewCompanyProfile",props:{symbol:{type:String,required:!0},exchange:{type:String,default:"NASDAQ"},colorTheme:{type:String,default:"light"},isTransparent:{type:Boolean,default:!0},locale:{type:String,default:"en"}},data(){return{loaded:!1,error:!1,widgetId:`company-profile-${Date.now()}`}},computed:{fullSymbol(){return`${this.exchange}:${this.symbol}`}},mounted(){this.loadCompanyProfile()},watch:{symbol(){this.loadCompanyProfile()},exchange(){this.loadCompanyProfile()}},methods:{async loadCompanyProfile(){this.loaded=!1,this.error=!1;try{await this.$nextTick(),this.createCompanyProfile()}catch(i){console.error("Failed to load company profile:",i),this.error=!0}},createCompanyProfile(){const i=this.$refs.container;if(!i)return;i.innerHTML="";const e=document.createElement("div");e.className="tradingview-widget-container",e.style.height="100%",e.style.width="100%";const a=document.createElement("div");a.className="tradingview-widget-container__widget",e.appendChild(a),i.appendChild(e);const o={symbol:this.fullSymbol,colorTheme:this.colorTheme,isTransparent:this.isTransparent,locale:this.locale,width:"100%",height:"100%"};console.log(`üè¢ Creating Company Profile widget for ${this.fullSymbol}`,o);const s=document.createElement("script");s.type="text/javascript",s.src="https://s3.tradingview.com/external-embedding/embed-widget-symbol-profile.js",s.async=!0,s.innerHTML=JSON.stringify(o),s.onload=()=>{this.loaded=!0,console.log("TradingView Company Profile loaded successfully")},s.onerror=()=>{this.error=!0,console.error("TradingView Company Profile failed to load")},a.appendChild(s),setTimeout(()=>{!this.loaded&&!this.error&&(this.loaded=!0)},8e3)},async retry(){await this.loadCompanyProfile()}}},rr={class:"company-profile-container"},lr=["id"],cr={key:0,class:"profile-loading"},dr={key:1,class:"profile-error"};function ur(i,e,a,o,s,n){return u(),h("div",rr,[t("div",{class:"company-profile-widget",id:s.widgetId,ref:"container"},[!s.loaded&&!s.error?(u(),h("div",cr,[...e[1]||(e[1]=[t("div",{class:"loading-spinner"},null,-1),t("span",null,"Loading company profile...",-1)])])):S("",!0),s.error?(u(),h("div",dr,[e[2]||(e[2]=t("span",null,"‚ö†Ô∏è Failed to load company profile",-1)),t("button",{onClick:e[0]||(e[0]=(...r)=>n.retry&&n.retry(...r)),class:"retry-btn"},"Retry")])):S("",!0)],8,lr)])}const hr=P(or,[["render",ur],["__scopeId","data-v-0b7608e8"]]),gr={name:"TradingViewFundamentalData",props:{symbol:{type:String,required:!0},exchange:{type:String,default:"NASDAQ"},colorTheme:{type:String,default:"dark"},displayMode:{type:String,default:"regular"},isTransparent:{type:Boolean,default:!0},locale:{type:String,default:"zh_TW"}},data(){return{loaded:!1,error:!1,widgetId:`fundamental-data-${Date.now()}`}},computed:{fullSymbol(){return`${this.exchange}:${this.symbol}`}},mounted(){this.loadFundamentalData()},watch:{symbol(){this.loadFundamentalData()},exchange(){this.loadFundamentalData()}},methods:{async loadFundamentalData(){this.loaded=!1,this.error=!1;try{await this.$nextTick(),this.createFundamentalData()}catch(i){console.error("Failed to load fundamental data:",i),this.error=!0}},createFundamentalData(){const i=this.$refs.container;if(!i)return;i.innerHTML="";const e=document.createElement("div");e.className="tradingview-widget-container",e.style.height="100%",e.style.width="100%";const a=document.createElement("div");a.className="tradingview-widget-container__widget",e.appendChild(a),i.appendChild(e);const o={symbol:this.fullSymbol,colorTheme:"light",displayMode:"regular",isTransparent:!0,locale:"zh_TW",width:"100%",height:"100%"},s=document.createElement("script");s.type="text/javascript",s.src="https://s3.tradingview.com/external-embedding/embed-widget-financials.js",s.async=!0,s.innerHTML=JSON.stringify(o),s.onload=()=>{this.loaded=!0,console.log("TradingView Fundamental Data loaded successfully")},s.onerror=()=>{this.error=!0,console.error("TradingView Fundamental Data failed to load")},a.appendChild(s),setTimeout(()=>{!this.loaded&&!this.error&&(this.loaded=!0)},8e3)},async retry(){await this.loadFundamentalData()}}},mr={class:"fundamental-data-container"},fr=["id"],pr={key:0,class:"fundamental-loading"},yr={key:1,class:"fundamental-error"};function vr(i,e,a,o,s,n){return u(),h("div",mr,[t("div",{class:"fundamental-data-widget",id:s.widgetId,ref:"container"},[!s.loaded&&!s.error?(u(),h("div",pr,[...e[1]||(e[1]=[t("div",{class:"loading-spinner"},null,-1),t("span",null,"Loading fundamental data...",-1)])])):S("",!0),s.error?(u(),h("div",yr,[e[2]||(e[2]=t("span",null,"‚ö†Ô∏è Failed to load fundamental data",-1)),t("button",{onClick:e[0]||(e[0]=(...r)=>n.retry&&n.retry(...r)),class:"retry-btn"},"Retry")])):S("",!0)],8,fr)])}const wr=P(gr,[["render",vr],["__scopeId","data-v-5cbca18c"]]),Sr={name:"StockNews",props:{symbol:{type:String,required:!0},newsCount:{type:Number,default:9}},data(){return{loading:!0,error:null,news:[]}},mounted(){this.loadNews()},watch:{symbol(){this.loadNews()}},methods:{async loadNews(){this.loading=!0,this.error=null,this.news=[];try{console.log(`Loading news for ${this.symbol}...`);const i=await this.fetchYahooNews(this.symbol);i&&i.length>0?(this.news=i.slice(0,this.newsCount),console.log(`Loaded ${this.news.length} news articles for ${this.symbol}`)):this.news=[]}catch(i){console.error(`Failed to load news for ${this.symbol}:`,i),this.error=i.message}finally{this.loading=!1}},async fetchYahooNews(i){const e=["https://api.allorigins.win/raw?url=","https://corsproxy.io/?"];for(const a of e)try{const o=`https://query1.finance.yahoo.com/v1/finance/search?q=${i}&lang=en-US&region=US&quotesCount=1&newsCount=${this.newsCount}&enableFuzzyQuery=false&quotesQueryId=tss_match_phrase_query&multiQuoteQueryId=multi_quote_single_token_query&newsQueryId=news_cie_vespa&enableCb=true&enableNavLinks=true&enableEnhancedTrivialQuery=true`,s=`${a}${encodeURIComponent(o)}`;console.log(`Fetching news from: ${s}`);const n=await fetch(s);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const r=await n.json();if(r&&r.news&&r.news.length>0)return r.news}catch(o){console.warn("Proxy failed for news:",o.message);continue}throw new Error("All news proxies failed")},formatDate(i){if(!i)return"Unknown date";const e=new Date(i*1e3),a=new Date,o=a-e,s=Math.floor(o/(1e3*60*60)),n=Math.floor(s/24);return s<1?`${Math.floor(o/6e4)}m ago`:s<24?`${s}h ago`:n<7?`${n}d ago`:e.toLocaleDateString("en-US",{month:"short",day:"numeric",year:e.getFullYear()!==a.getFullYear()?"numeric":void 0})},truncateText(i,e){return i?i.length<=e?i:i.substring(0,e).trim()+"...":""},openArticle(i){i&&window.open(i,"_blank","noopener,noreferrer")},handleImageError(i){i.target.style.display="none"}}},br={class:"stock-news"},_r={key:0,class:"loading-state"},kr={key:1,class:"error-state"},Cr={key:2,class:"no-news-state"},Tr={key:3,class:"news-grid"},Dr=["onClick"],Ar={class:"news-header"},Ir={class:"news-title"},xr={class:"news-date"},Mr={class:"news-content"},Nr={class:"news-text"},Pr={class:"news-summary"},Lr={class:"news-meta"},Rr={class:"news-publisher"},Er={key:0,class:"news-type"},$r={key:0,class:"news-thumbnail"},Ur=["src","alt"];function Fr(i,e,a,o,s,n){return u(),h("div",br,[s.loading?(u(),h("div",_r,[e[1]||(e[1]=t("div",{class:"loading-spinner"},null,-1)),t("span",null,"Loading latest news for "+l(a.symbol)+"...",1)])):s.error?(u(),h("div",kr,[e[2]||(e[2]=t("span",{class:"error-icon"},"‚ö†Ô∏è",-1)),t("span",null,l(s.error),1)])):s.news.length===0?(u(),h("div",Cr,[e[3]||(e[3]=t("span",{class:"info-icon"},"‚ÑπÔ∏è",-1)),t("span",null,"No recent news available for "+l(a.symbol),1)])):(u(),h("div",Tr,[(u(!0),h($,null,U(s.news,(r,d)=>{var c;return u(),h("article",{key:d,class:"news-item",onClick:g=>n.openArticle(r.link)},[t("div",Ar,[t("h4",Ir,l(r.title),1),t("span",xr,l(n.formatDate(r.providerPublishTime)),1)]),t("div",Mr,[t("div",Nr,[t("p",Pr,l(n.truncateText(r.summary,150)),1),t("div",Lr,[t("span",Rr,l(r.publisher),1),r.type?(u(),h("span",Er,l(r.type),1)):S("",!0)])]),r.thumbnail?(u(),h("div",$r,[t("img",{src:(c=r.thumbnail.resolutions[0])==null?void 0:c.url,alt:r.title,onError:e[0]||(e[0]=(...g)=>n.handleImageError&&n.handleImageError(...g))},null,40,Ur)])):S("",!0)]),e[4]||(e[4]=t("div",{class:"news-footer"},[t("span",{class:"read-more"},"Read more ‚Üí")],-1))],8,Dr)}),128))]))])}const Or=P(Sr,[["render",Fr],["__scopeId","data-v-6db7a932"]]),Wr={name:"StockDetailSkeleton"},Vr={class:"stock-detail-skeleton"},qr={class:"skeleton-widget-container"},Br={class:"skeleton-technical-indicators"},Hr={class:"skeleton-widget-container"},zr={class:"skeleton-performance-grid"},Gr={class:"skeleton-content-layout"},jr={class:"skeleton-news-row"},Qr={class:"skeleton-news-content"},Xr={class:"skeleton-fundamental-row"},Kr={class:"skeleton-fundamental-content"},Yr={class:"skeleton-fundamental-grid"},Jr={class:"skeleton-profile-row"},Zr={class:"skeleton-profile-content"},el={class:"skeleton-profile-info"};function tl(i,e,a,o,s,n){return u(),h("div",Vr,[e[10]||(e[10]=X('<div class="skeleton-breadcrumb" data-v-a9db020d><div class="skeleton-breadcrumb-link" data-v-a9db020d></div><div class="skeleton-breadcrumb-separator" data-v-a9db020d>‚Ä∫</div><div class="skeleton-breadcrumb-current" data-v-a9db020d></div></div><div class="skeleton-stock-header" data-v-a9db020d><div class="skeleton-header-info" data-v-a9db020d><div class="skeleton-symbol-info" data-v-a9db020d><div class="skeleton-symbol" data-v-a9db020d></div><div class="skeleton-tags" data-v-a9db020d><div class="skeleton-tag" data-v-a9db020d></div><div class="skeleton-tag" data-v-a9db020d></div></div></div><div class="skeleton-header-actions" data-v-a9db020d><div class="skeleton-back-button" data-v-a9db020d></div></div></div><div class="skeleton-widgets-container" data-v-a9db020d><div class="skeleton-widget-overview" data-v-a9db020d><div class="skeleton-widget-header" data-v-a9db020d><div class="skeleton-title" data-v-a9db020d></div></div><div class="skeleton-overview-content" data-v-a9db020d></div></div><div class="skeleton-widget-technical" data-v-a9db020d><div class="skeleton-widget-header" data-v-a9db020d><div class="skeleton-title" data-v-a9db020d></div></div><div class="skeleton-technical-content" data-v-a9db020d></div></div></div></div><div class="skeleton-insight-widgets" data-v-a9db020d><div class="skeleton-insight-widget" data-v-a9db020d><div class="skeleton-widget-header" data-v-a9db020d><div class="skeleton-title" data-v-a9db020d></div></div><div class="skeleton-insight-content" data-v-a9db020d></div></div><div class="skeleton-insight-widget" data-v-a9db020d><div class="skeleton-widget-header" data-v-a9db020d><div class="skeleton-title" data-v-a9db020d></div></div><div class="skeleton-insight-content" data-v-a9db020d></div></div></div>',3)),t("div",qr,[e[1]||(e[1]=t("div",{class:"skeleton-widget-header"},[t("div",{class:"skeleton-title"})],-1)),t("div",Br,[(u(),h($,null,U(6,r=>t("div",{class:"skeleton-indicator-item",key:r},[...e[0]||(e[0]=[t("div",{class:"skeleton-indicator-name"},null,-1),t("div",{class:"skeleton-indicator-value"},null,-1),t("div",{class:"skeleton-indicator-signal"},null,-1)])])),64))])]),t("div",Hr,[e[3]||(e[3]=t("div",{class:"skeleton-widget-header"},[t("div",{class:"skeleton-title"})],-1)),t("div",zr,[(u(),h($,null,U(4,r=>t("div",{class:"skeleton-performance-item",key:r},[...e[2]||(e[2]=[t("div",{class:"skeleton-performance-label"},null,-1),t("div",{class:"skeleton-performance-value"},null,-1)])])),64))])]),t("div",Gr,[t("div",jr,[e[5]||(e[5]=t("div",{class:"skeleton-widget-header"},[t("div",{class:"skeleton-title"})],-1)),t("div",Qr,[(u(),h($,null,U(5,r=>t("div",{class:"skeleton-news-item",key:r},[...e[4]||(e[4]=[t("div",{class:"skeleton-news-title"},null,-1),t("div",{class:"skeleton-news-summary"},null,-1),t("div",{class:"skeleton-news-time"},null,-1)])])),64))])]),t("div",Xr,[e[7]||(e[7]=t("div",{class:"skeleton-widget-header"},[t("div",{class:"skeleton-title"})],-1)),t("div",Kr,[t("div",Yr,[(u(),h($,null,U(8,r=>t("div",{class:"skeleton-fundamental-item",key:r},[...e[6]||(e[6]=[t("div",{class:"skeleton-fundamental-label"},null,-1),t("div",{class:"skeleton-fundamental-value"},null,-1)])])),64))])])]),t("div",Jr,[e[9]||(e[9]=t("div",{class:"skeleton-widget-header"},[t("div",{class:"skeleton-title"})],-1)),t("div",Zr,[t("div",el,[(u(),h($,null,U(6,r=>t("div",{class:"skeleton-profile-item",key:r},[...e[8]||(e[8]=[t("div",{class:"skeleton-profile-label"},null,-1),t("div",{class:"skeleton-profile-value"},null,-1)])])),64))])])])])])}const sl=P(Wr,[["render",tl],["__scopeId","data-v-a9db020d"]]),j=T().refine(i=>{try{const e=new Date(i);return!isNaN(e.getTime())&&i.includes("T")}catch{return!1}},{message:"Invalid datetime format"}),Gt=de(["fresh","stale","very_stale"]),al=de(["open","closed","pre","post"]).nullable(),nl=de(["latest","close","last_known"]),il=de(["llm","fallback"]),ol=de(["good","stale","degraded","disabled_scrape"]),rl=is([ot(.5),ot(.75),ot(.9)]),ll=de(["operational","degraded","maintenance","outage"]),cl=de(["success","failed","running","pending"]),dl=R({avg_cost_usd:x().positive().finite(),shares:x().positive().finite().optional()}),ul=R({scraping_enabled:G(),degradation_enabled:G(),ga_enabled:G(),clarity_enabled:G()}),hl=R({timestamp:j,success:G(),error:T().optional(),changes_applied:x().nonnegative(),dry_run:G()}),gl=R({last_import_result:hl.optional()}),jt=gt(()=>Cl),Qt=gt(()=>vl),Xt=gt(()=>Il),ml=R({last_daily_snapshot:jt.optional(),last_quotes_snapshot:Qt.optional(),last_metadata:Xt.optional()}),fl=R({schema_version:T(),watchlist:z(T().max(10).regex(/^[A-Z0-9.-]+$/)),holdings:ge(T(),dl),settings:ul,cache:ml,diagnostics:gl}),pl=R({symbol:T().max(10).regex(/^[A-Z0-9.-]+$/),price_usd:x().nullable(),price_type:nl,market_state:al,is_delayed:G(),stale_level:Gt,error:T().nullable(),change_percent:x().optional(),volume:x().nonnegative().optional()}),yl=R({total_symbols:x().nonnegative(),successful_updates:x().nonnegative(),failed_updates:x().nonnegative(),average_delay_minutes:x().nonnegative().optional(),next_update:j.optional()}),vl=R({as_of:j,provider:T(),market_session:T().optional(),items:z(pl),metadata:yl.optional()}),wl=R({title:T().min(1),url:T().url(),published_at:j,source:T().min(1),summary:T().optional()}),Sl=R({symbol:T().max(10).regex(/^[A-Z0-9.-]+$/),short_brief_zh:T(),brief_truncated:G(),brief_source:il,news_top10:z(wl),news_insufficient:G(),gaps:z(T())}),bl=R({id:T().min(1),value:x().nullable(),as_of:j,source_name:T().min(1),quality_flag:ol}),_l=R({items:z(bl).length(10,"Must have exactly 10 markets indicators")}),kl=R({total_processing_time_ms:x().nonnegative(),news_sources_attempted:x().nonnegative(),news_sources_successful:x().nonnegative(),total_articles_collected:x().nonnegative(),articles_after_deduplication:x().nonnegative(),llm_brief_generation_success_rate:x().min(0).max(1),macro_indicators_updated:x().nonnegative(),macro_indicators_failed:x().nonnegative()}),Cl=R({as_of_date_taipei:T().regex(/^\d{4}-\d{2}-\d{2}$/),generated_at_utc:j,universe:z(T()).length(10,"Universe must have exactly 10 symbols"),per_symbol:z(Sl).length(10,"Must have data for exactly 10 symbols"),macro:_l,generation_metadata:kl.optional()}),Tl=R({symbol:T().max(10).regex(/^[A-Z0-9.-]+$/),sector:T().nullable(),industry:T().nullable(),confidence:rl,sources:z(T()).min(1),last_verified_at:j,market_cap_category:T().optional(),exchange:T().optional()}),Dl=R({high_confidence_0_90:x().nonnegative(),medium_confidence_0_75:x().nonnegative(),low_confidence_0_50:x().nonnegative()}),Al=R({last_refresh_duration_ms:x().nonnegative(),symbols_updated:x().nonnegative(),symbols_failed:x().nonnegative(),confidence_improvements:x().nonnegative(),new_sources_added:x().nonnegative()}),Il=R({ttl_days:x().positive(),as_of:j,next_refresh:j.optional(),items:z(Tl).length(10,"Must have metadata for exactly 10 symbols"),industry_grouping:ge(T(),z(T())).optional(),confidence_distribution:Dl.optional(),data_sources:ge(T(),x().nonnegative()).optional(),refresh_metadata:Al.optional()}),xl=R({last_run:j,next_run:j,status:cl,duration_ms:x().nonnegative(),symbols_updated:x().nonnegative().optional(),symbols_processed:x().nonnegative().optional(),errors:z(T()),provider:T().optional()}),Ml=R({age_minutes:x().nonnegative().optional(),age_hours:x().nonnegative().optional(),age_days:x().nonnegative().optional(),staleness:Gt}),Nl=R({used_minutes:x().nonnegative(),total_minutes:x().nonnegative(),reset_date:T()}),Pl=R({data_files_mb:x().nonnegative(),total_repo_mb:x().nonnegative()}),Ll=R({calls_today:x().nonnegative(),daily_limit:x().nonnegative(),reset_time:j}),Rl=R({github_actions_quota:Nl.optional(),storage_usage:Pl.optional(),api_limits:ge(T(),Ll).optional()}),El=R({enabled:G(),active_fallbacks:z(T()),cache_hits_last_hour:x().nonnegative()}),$l=R({description:T(),last_updated:j,system_status:ll,jobs:ge(T(),xl),data_freshness:ge(T(),Ml),system_health:Rl,degradation_status:El}),Ul=R({max_length:x().positive(),allowed_chars:T(),case_sensitive:G()});R({description:T(),version:T(),last_updated:T(),symbols:z(T().max(10).regex(/^[A-Z0-9.-]+$/)).length(10,"Universe must have exactly 10 symbols"),validation:Ul});const Fl=R({id:T().min(1),name:T().min(1),description:T().min(1),scrape_only:G(),data_source:T().min(1),update_frequency:T().min(1),unit:T().min(1)}),Ol=R({default_enabled:G(),timeout_seconds:x().positive(),retry_attempts:x().nonnegative(),user_agent:T().min(1)});R({description:T(),version:T(),last_updated:T(),indicators:z(Fl).length(10,"Must have exactly 10 markets indicators"),scraping_settings:Ol});function Je(i,e){try{return{success:!0,data:i.parse(e)}}catch(a){return a instanceof os?{success:!1,error:{message:"Validation failed",details:a.errors}}:{success:!1,error:{message:"Unknown validation error",details:{error:String(a)}}}}}function at(i){return Je(fl,i)}function Wl(i){return Je(Qt,i)}function Vl(i){return Je(jt,i)}function ql(i){return Je(Xt,i)}function Bl(i){return Je($l,i)}function Hl(i){const e=["schema_version","watchlist","holdings","settings","cache","diagnostics"];if(typeof i!="object"||i===null)return{success:!1,error:{message:"Import data must be a valid JSON object",code:"INVALID_FORMAT"}};const o=Object.keys(i).filter(s=>!e.includes(s));return o.length>0?{success:!1,error:{message:`Unknown keys found: ${o.join(", ")}`,code:"UNKNOWN_KEYS",details:{unknownKeys:o}}}:at(i)}const L=class L{static loadState(){try{const e=localStorage.getItem(L.STORAGE_KEY);if(!e)return{...L.DEFAULT_STATE};const a=JSON.parse(e),o=L.migrateState(a),s=at(o);return s.success&&s.data?s.data:(console.warn("Invalid state in localStorage, using defaults:",s.error),{...L.DEFAULT_STATE})}catch(e){return console.error("Failed to load state from localStorage:",e),{...L.DEFAULT_STATE}}}static saveState(e){const a=at(e);if(!a.success)return a;try{return localStorage.setItem(L.STORAGE_KEY,JSON.stringify(e)),{success:!0,data:e}}catch(o){return{success:!1,error:{message:"Failed to save state to localStorage",details:{error:String(o)}}}}}static clearState(){localStorage.removeItem(L.STORAGE_KEY)}static exportState(){const e=L.loadState();return JSON.stringify(e,null,2)}static importState(e,a=!1){try{const o=JSON.parse(e),s=Hl(o);if(!s.success)return s;const n=L.migrateState(s.data),r=at(n);if(!r.success)return r;if(!a){const d=L.saveState(r.data);if(!d.success)return d}return{success:!0,data:r.data}}catch(o){return{success:!1,error:{message:"Invalid JSON format",details:{error:String(o)}}}}}static updateWatchlist(e){const o={...L.loadState(),watchlist:e};return L.saveState(o)}static addToWatchlist(e){const a=L.loadState();if(a.watchlist.includes(e.toUpperCase()))return{success:!1,error:{message:"Symbol already in watchlist",code:"DUPLICATE_SYMBOL"}};const o=[...a.watchlist,e.toUpperCase()];return L.updateWatchlist(o)}static removeFromWatchlist(e){const o=L.loadState().watchlist.filter(s=>s!==e.toUpperCase());return L.updateWatchlist(o)}static updateHolding(e,a,o){const s=L.loadState(),n={...s,holdings:{...s.holdings,[e.toUpperCase()]:{avg_cost_usd:a,...o!==void 0&&{shares:o}}}};return L.saveState(n)}static removeHolding(e){const a=L.loadState(),o={...a.holdings};delete o[e.toUpperCase()];const s={...a,holdings:o};return L.saveState(s)}static updateSettings(e){const a=L.loadState(),o={...a,settings:{...a.settings,...e}};return L.saveState(o)}static updateCache(e){const a=L.loadState(),o={...a,cache:{...a.cache,...e}};return L.saveState(o)}static recordImportResult(e){const a=L.loadState(),o={...a,diagnostics:{...a.diagnostics,last_import_result:e}};return L.saveState(o)}static migrateState(e){var o,s,n,r;return e.schema_version||(e.schema_version="1.0.0"),{schema_version:L.CURRENT_SCHEMA_VERSION,watchlist:e.watchlist||[],holdings:e.holdings||{},settings:{scraping_enabled:((o=e.settings)==null?void 0:o.scraping_enabled)??!1,degradation_enabled:((s=e.settings)==null?void 0:s.degradation_enabled)??!0,ga_enabled:((n=e.settings)==null?void 0:n.ga_enabled)??!1,clarity_enabled:((r=e.settings)==null?void 0:r.clarity_enabled)??!1},cache:e.cache||{},diagnostics:e.diagnostics||{}}}static getCurrentSchemaVersion(){return L.CURRENT_SCHEMA_VERSION}static isStorageAvailable(){try{const e="__storage_test__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch{return!1}}};ue(L,"STORAGE_KEY","investment-dashboard-state"),ue(L,"CURRENT_SCHEMA_VERSION","1.0.0"),ue(L,"DEFAULT_STATE",{schema_version:L.CURRENT_SCHEMA_VERSION,watchlist:[],holdings:{},settings:{scraping_enabled:!1,degradation_enabled:!0,ga_enabled:!1,clarity_enabled:!1},cache:{},diagnostics:{}});let K=L;class zl{constructor(e="",a=!0){ue(this,"baseUrl");ue(this,"cacheBustingEnabled");this.baseUrl=e,this.cacheBustingEnabled=a}async fetchSystemStatus(){var e;try{const a=await fetch(`${this.baseUrl}/data/status.json`);if(!a.ok)throw new Error(`HTTP ${a.status}`);const o=await a.json(),s=Bl(o);if(!s.success)throw new Error(`Invalid status.json: ${(e=s.error)==null?void 0:e.message}`);return{data:s.data,source:"network",stale_level:"fresh",as_of:s.data.last_updated}}catch(a){return console.warn("Failed to fetch system status:",a),K.loadState().cache.last_daily_snapshot?{data:null,source:"fallback",stale_level:"very_stale",error:String(a)}:{data:null,source:"fallback",stale_level:"very_stale",error:String(a)}}}async fetchQuotesSnapshot(){var e,a;try{const o=await this.fetchSystemStatus();let s="";this.cacheBustingEnabled&&((e=o.data)!=null&&e.last_updated)&&(s=`?t=${new Date(o.data.last_updated).getTime()}`);const n=await fetch(`${this.baseUrl}/data/quotes/latest.json${s}`);if(!n.ok)throw new Error(`HTTP ${n.status}`);const r=await n.json(),d=Wl(r);if(!d.success)throw new Error(`Invalid quotes snapshot: ${(a=d.error)==null?void 0:a.message}`);const c=K.loadState();return K.updateCache({last_quotes_snapshot:d.data}),{data:d.data,source:"network",stale_level:this.calculateStaleness(d.data.as_of),as_of:d.data.as_of}}catch(o){console.warn("Failed to fetch quotes snapshot:",o);const s=K.loadState();return s.cache.last_quotes_snapshot?{data:s.cache.last_quotes_snapshot,source:"cache",stale_level:this.calculateStaleness(s.cache.last_quotes_snapshot.as_of),as_of:s.cache.last_quotes_snapshot.as_of,error:String(o)}:{data:null,source:"fallback",stale_level:"very_stale",error:String(o)}}}async fetchDailySnapshot(e){var a,o;try{const s=e||this.getTaipeiDateString(),n=await this.fetchSystemStatus();let r="";this.cacheBustingEnabled&&((a=n.data)!=null&&a.last_updated)&&(r=`?t=${new Date(n.data.last_updated).getTime()}`);const d=await fetch(`${this.baseUrl}/data/daily/${s}.json${r}`);if(!d.ok)throw new Error(`HTTP ${d.status}`);const c=await d.json(),g=Vl(c);if(!g.success)throw new Error(`Invalid daily snapshot: ${(o=g.error)==null?void 0:o.message}`);return K.updateCache({last_daily_snapshot:g.data}),{data:g.data,source:"network",stale_level:this.calculateStaleness(g.data.generated_at_utc),as_of:g.data.generated_at_utc}}catch(s){console.warn("Failed to fetch daily snapshot:",s);const n=K.loadState();return n.cache.last_daily_snapshot?{data:n.cache.last_daily_snapshot,source:"cache",stale_level:this.calculateStaleness(n.cache.last_daily_snapshot.generated_at_utc),as_of:n.cache.last_daily_snapshot.generated_at_utc,error:String(s)}:{data:null,source:"fallback",stale_level:"very_stale",error:String(s)}}}async fetchMetadataSnapshot(){var e,a;try{const o=await this.fetchSystemStatus();let s="";this.cacheBustingEnabled&&((e=o.data)!=null&&e.last_updated)&&(s=`?t=${new Date(o.data.last_updated).getTime()}`);const n=await fetch(`${this.baseUrl}/data/symbols_metadata.json${s}`);if(!n.ok)throw new Error(`HTTP ${n.status}`);const r=await n.json(),d=ql(r);if(!d.success)throw new Error(`Invalid metadata snapshot: ${(a=d.error)==null?void 0:a.message}`);return K.updateCache({last_metadata:d.data}),{data:d.data,source:"network",stale_level:this.calculateStaleness(d.data.as_of),as_of:d.data.as_of}}catch(o){console.warn("Failed to fetch metadata snapshot:",o);const s=K.loadState();return s.cache.last_metadata?{data:s.cache.last_metadata,source:"cache",stale_level:this.calculateStaleness(s.cache.last_metadata.as_of),as_of:s.cache.last_metadata.as_of,error:String(o)}:{data:null,source:"fallback",stale_level:"very_stale",error:String(o)}}}calculateStaleness(e){try{const a=new Date(e),s=(new Date().getTime()-a.getTime())/(1e3*60);return s<=60?"fresh":s<=24*60?"stale":"very_stale"}catch{return"very_stale"}}getTaipeiDateString(){const e=new Date;return new Date(e.getTime()+8*60*60*1e3).toISOString().split("T")[0]}}const Gl=()=>{if(typeof window<"u"){const i=window.location.hostname,e=window.location.pathname;if(i==="romarin-hsieh.github.io"&&e.startsWith("/investment-dashboard"))return"/investment-dashboard"}return""},jl=new zl(Gl());class Ql{constructor(){this.cache=new Map,this.cacheExpiry=24*60*60*1e3,this.batchSize=5,this.requestDelay=1e3}async getSymbolMetadata(e){try{if(this.cache.has(e)){const o=this.cache.get(e);if(Date.now()-o.timestamp<this.cacheExpiry)return console.log(`Using cached metadata for ${e}`),o.data}console.log(`Fetching fresh metadata for ${e} from Yahoo Finance API...`);const a=await ee.getStockInfo(e);if(a&&!a.error&&a.sector!=="Unknown"){const o={symbol:e,sector:a.sector||"Unknown",industry:a.industry||"Unknown Industry",exchange:a.exchange||this.getDefaultExchange(e),marketCap:a.marketCap,marketCapFormatted:a.marketCapFormatted,marketCapCategory:a.marketCapCategory||"unknown",currency:a.currency||"USD",country:a.country||"Unknown",website:a.website,employees:a.employees,businessSummary:a.businessSummary,confidence:a.confidence||.95,source:"Yahoo Finance API (Live)",lastUpdated:a.lastUpdated||new Date().toISOString(),isLive:!0};return this.cache.set(e,{data:o,timestamp:Date.now()}),console.log(`Successfully fetched metadata for ${e}:`,{sector:o.sector,industry:o.industry,confidence:o.confidence}),o}else return console.warn(`Yahoo Finance API failed for ${e}, using static fallback data`),this.getStaticFallbackMetadata(e)}catch(a){return console.error(`Error fetching metadata for ${e}:`,a),this.getStaticFallbackMetadata(e)}}getStaticFallbackMetadata(e){const o={ASTS:{sector:"Communication Services",industry:"Satellite Communications",confidence:.75},RIVN:{sector:"Consumer Cyclical",industry:"Electric Vehicles",confidence:.9},PL:{sector:"Technology",industry:"Satellite Imaging & Analytics",confidence:.9},ONDS:{sector:"Technology",industry:"Industrial IoT Solutions",confidence:.75},RDW:{sector:"Industrials",industry:"Space Infrastructure",confidence:.75},AVAV:{sector:"Industrials",industry:"Aerospace & Defense",confidence:.75},MDB:{sector:"Technology",industry:"Database Software",confidence:.9},ORCL:{sector:"Technology",industry:"Enterprise Software",confidence:.9},TSM:{sector:"Technology",industry:"Semiconductors",confidence:.9},RKLB:{sector:"Industrials",industry:"Aerospace & Defense",confidence:.9},CRM:{sector:"Technology",industry:"Enterprise Software",confidence:.9},NVDA:{sector:"Technology",industry:"Semiconductors",confidence:.9},AVGO:{sector:"Technology",industry:"Semiconductors",confidence:.9},AMZN:{sector:"Consumer Cyclical",industry:"Internet Retail",confidence:.9},GOOG:{sector:"Communication Services",industry:"Internet Content & Information",confidence:.9},META:{sector:"Communication Services",industry:"Internet Content & Information",confidence:.9},NFLX:{sector:"Communication Services",industry:"Entertainment",confidence:.9},LEU:{sector:"Energy",industry:"Uranium",confidence:.75},SMR:{sector:"Energy",industry:"Nuclear Energy",confidence:.75},CRWV:{sector:"Technology",industry:"Software - Application",confidence:.75},IONQ:{sector:"Technology",industry:"Quantum Computing",confidence:.75},PLTR:{sector:"Technology",industry:"Software - Infrastructure",confidence:.9},HIMS:{sector:"Healthcare",industry:"Health Information Services",confidence:.75},TSLA:{sector:"Consumer Cyclical",industry:"Auto Manufacturers",confidence:.9}}[e]||{sector:"Unknown",industry:"Unknown Industry",confidence:0},s={symbol:e,sector:o.sector,industry:o.industry,exchange:this.getDefaultExchange(e),marketCap:null,marketCapFormatted:"N/A",marketCapCategory:"unknown",currency:"USD",country:"Unknown",website:null,employees:null,businessSummary:null,confidence:o.confidence,source:"Static Fallback Data",lastUpdated:new Date().toISOString(),isLive:!1};return this.cache.set(e,{data:s,timestamp:Date.now()}),console.log(`Using static fallback for ${e}:`,{sector:s.sector,industry:s.industry,confidence:s.confidence}),s}async getBatchMetadata(e){const a=new Map,o=this.createBatches(e,this.batchSize);console.log(`Fetching metadata for ${e.length} symbols in ${o.length} batches...`);for(let s=0;s<o.length;s++){const n=o[s];console.log(`Processing batch ${s+1}/${o.length} (${n.length} symbols)`);const r=n.map(c=>this.getSymbolMetadata(c).catch(g=>(console.error(`Failed to fetch metadata for ${c}:`,g),this.getDefaultMetadata(c)))),d=await Promise.all(r);n.forEach((c,g)=>{a.set(c,d[g])}),s<o.length-1&&(console.log(`Waiting ${this.requestDelay}ms before next batch...`),await this.delay(this.requestDelay))}return console.log(`Completed fetching metadata for ${a.size} symbols`),a}getDefaultMetadata(e){return{symbol:e,sector:"Unknown",industry:"Unknown Industry",exchange:this.getDefaultExchange(e),marketCap:null,marketCapFormatted:"N/A",marketCapCategory:"unknown",currency:"USD",country:"Unknown",website:null,employees:null,businessSummary:null,confidence:0,source:"Default (API Failed)",lastUpdated:new Date().toISOString(),isLive:!1}}getDefaultExchange(e){const a=["AAPL","MSFT","GOOGL","GOOG","AMZN","TSLA","NVDA","META","NFLX","RKLB","ASTS","RIVN","MDB","ONDS","PL","AVAV","CRM","AVGO","LEU","SMR","CRWV","IONQ","PLTR","HIMS"],o=["TSM","ORCL","RDW"];return a.includes(e)?"NASDAQ":o.includes(e)?"NYSE":"NASDAQ"}getIndustryDisplay(e){return!e||e.confidence<.7?"Unknown Industry":e.industry||e.sector||"Unknown Industry"}getIndustryCategory(e){const a=this.getIndustryDisplay(e);return{"Software - Application":"tech-software","Software - Infrastructure":"tech-software","Database Software":"tech-software","Enterprise Software":"tech-software","Internet Content & Information":"tech-internet",Semiconductors:"tech-hardware","Quantum Computing":"tech-quantum","Aerospace & Defense":"industrial-aerospace","Space Infrastructure":"industrial-space","Industrial IoT Solutions":"tech-iot","Satellite Communications":"communications","Satellite Imaging & Analytics":"tech-satellite","Auto Manufacturers":"automotive","Electric Vehicles":"automotive","Internet Retail":"retail",Entertainment:"entertainment",Uranium:"energy-nuclear","Nuclear Energy":"energy-nuclear","Health Information Services":"healthcare","Unknown Industry":"unknown"}[a]||"other"}generateSectorGrouping(e){const a={};for(const[o,s]of e){const n=s.sector||"Unknown";a[n]||(a[n]=[]),a[n].push(o)}return a}generateConfidenceDistribution(e){const a={high_confidence_0_90:0,medium_confidence_0_75:0,low_confidence_0_50:0,unknown_confidence:0};for(const[o,s]of e){const n=s.confidence||0;n>=.9?a.high_confidence_0_90++:n>=.75?a.medium_confidence_0_75++:n>=.5?a.low_confidence_0_50++:a.unknown_confidence++}return a}createBatches(e,a){const o=[];for(let s=0;s<e.length;s+=a)o.push(e.slice(s,s+a));return o}delay(e){return new Promise(a=>setTimeout(a,e))}clearCache(){this.cache.clear(),console.log("Dynamic metadata cache cleared")}getCacheStats(){const e={totalCached:this.cache.size,cacheEntries:{}};for(const[a,o]of this.cache.entries())e.cacheEntries[a]={age:Date.now()-o.timestamp,expired:Date.now()-o.timestamp>this.cacheExpiry,sector:o.data.sector,industry:o.data.industry,confidence:o.data.confidence};return e}async warmupCache(e){console.log(`Warming up metadata cache for ${e.length} symbols...`);const a=Date.now(),o=await this.getBatchMetadata(e),s=Date.now()-a;return console.log(`Cache warmup completed in ${s}ms for ${o.size} symbols`),{duration:s,symbolsProcessed:o.size,successRate:(o.size/e.length*100).toFixed(1)+"%"}}}const ie=new Ql;class Xl{constructor(){this.cache=new Map,this.cacheExpiry=24*60*60*1e3,this.lastFetch=null,this.metadata=null,this.useDynamicAPI=!0}setUseDynamicAPI(e){this.useDynamicAPI=e,console.log(`Metadata service mode: ${e?"Dynamic API":"Static File"}`)}async getSymbolMetadata(e){return this.useDynamicAPI?await ie.getSymbolMetadata(e):await this.getStaticSymbolMetadata(e)}async getStaticSymbolMetadata(e){if(this.cache.has(e)){const o=this.cache.get(e);if(Date.now()-o.timestamp<this.cacheExpiry)return o.data}if(await this.refreshMetadata(),this.metadata&&this.metadata.items){const o=this.metadata.items.find(s=>s.symbol===e);if(o)return console.log(`‚úÖ Found static metadata for ${e}:`,o),this.cache.set(e,{data:o,timestamp:Date.now()}),o}console.warn(`‚ùå No metadata found for ${e}, using default`);const a={symbol:e,sector:"Unknown",industry:"Unknown Industry",exchange:this.getDefaultExchange(e),confidence:0,source:"Static File (Default)",isLive:!1};return this.cache.set(e,{data:a,timestamp:Date.now()}),a}async getBatchMetadata(e){if(this.useDynamicAPI)return await ie.getBatchMetadata(e);{console.log(`üîÑ getBatchMetadata (static mode) for ${e.length} symbols:`,e);const a=new Map;await this.refreshMetadata();for(const o of e){const s=await this.getStaticSymbolMetadata(o);a.set(o,s),["CRM","IONQ"].includes(o)&&console.log(`üéØ getBatchMetadata result for ${o}:`,s)}return console.log(`‚úÖ getBatchMetadata completed, ${a.size} results`),a}}getMetadataUrl(){const e=window.location.hostname,a=window.location.pathname;return e==="romarin-hsieh.github.io"||a.includes("/investment-dashboard/")?"/investment-dashboard/data/symbols_metadata.json":"/data/symbols_metadata.json"}async refreshMetadata(){var e;try{console.log("üîÑ Refreshing metadata from dataFetcher...");let a;try{a=await jl.fetchMetadataSnapshot()}catch(o){console.warn("‚ùå dataFetcher failed, trying direct fetch:",o);const s=this.getMetadataUrl();console.log("üîç MetadataService fetching from:",s);const n=await fetch(s);if(!n.ok)throw new Error(`HTTP ${n.status}: ${n.statusText}`);a={data:await n.json()}}if(a.data){if(this.metadata=a.data,this.lastFetch=Date.now(),console.log(`‚úÖ Metadata refreshed successfully, ${((e=this.metadata.items)==null?void 0:e.length)||0} items loaded`),this.metadata.items){const o=this.metadata.items.find(s=>s.symbol==="CRM");o?console.log("‚úÖ CRM found in refreshed metadata:",o):(console.warn("‚ùå CRM not found in refreshed metadata"),console.log("Available symbols:",this.metadata.items.map(s=>s.symbol).slice(0,10)))}}else console.warn("‚ùå No data returned from fetchMetadataSnapshot")}catch(a){console.warn("‚ùå Failed to refresh metadata:",a)}}getDefaultExchange(e){const a=["AAPL","MSFT","GOOGL","GOOG","AMZN","TSLA","NVDA","META","NFLX","RKLB","ASTS","RIVN","MDB","ONDS","PL","AVAV","CRM","AVGO","LEU","SMR","CRWV","IONQ","PLTR","HIMS"],o=["TSM","ORCL","RDW"];return a.includes(e)?"NASDAQ":o.includes(e)?"NYSE":"NASDAQ"}getIndustryDisplay(e){return this.useDynamicAPI?ie.getIndustryDisplay(e):!e||e.confidence<.7?"Unknown Industry":e.industry||e.sector||"Unknown Industry"}getIndustryCategory(e){if(this.useDynamicAPI)return ie.getIndustryCategory(e);const a=this.getIndustryDisplay(e);return{"Industrial IoT Solutions":"tech-iot","Satellite Imaging & Analytics":"tech-satellite","Database Software":"tech-software","Enterprise Software":"tech-software",Semiconductors:"tech-hardware","Aerospace & Defense":"industrial-aerospace","Space Infrastructure":"industrial-space","Satellite Communications":"communications","Electric Vehicles":"automotive","Unknown Industry":"unknown"}[a]||"other"}async warmupCache(e){if(this.useDynamicAPI)return await ie.warmupCache(e);{console.log(`Warming up static metadata cache for ${e.length} symbols...`);const a=Date.now();await this.refreshMetadata();for(const s of e)await this.getStaticSymbolMetadata(s);const o=Date.now()-a;return console.log(`Static cache warmup completed in ${o}ms`),{duration:o,symbolsProcessed:e.length,mode:"static"}}}clearCache(){this.cache.clear(),this.metadata=null,this.lastFetch=null,this.useDynamicAPI&&ie.clearCache()}getCacheStats(){return this.useDynamicAPI?{mode:"dynamic",...ie.getCacheStats()}:{mode:"static",totalCached:this.cache.size,lastFetch:this.lastFetch,metadataLoaded:!!this.metadata}}getCurrentMode(){return this.useDynamicAPI?"dynamic":"static"}}const re=new Xl;class Kl{constructor(){this.cache=null,this.loading=!1}getMetadataUrl(){const e=window.location.hostname,a=window.location.pathname;return e==="romarin-hsieh.github.io"||a.includes("/investment-dashboard/")?"/investment-dashboard/data/symbols_metadata.json":"/data/symbols_metadata.json"}async loadMetadata(){var e;if(this.cache)return this.cache;if(this.loading){for(;this.loading;)await new Promise(a=>setTimeout(a,100));return this.cache}this.loading=!0;try{const a=this.getMetadataUrl();console.log("üîç DirectMetadataLoader fetching from:",a);const o=await fetch(a);if(!o.ok)throw new Error(`HTTP ${o.status}: ${o.statusText}`);const s=await o.json();return this.cache=s,console.log("‚úÖ DirectMetadataLoader loaded successfully:",(e=s.items)==null?void 0:e.length,"items"),this.cache}catch(a){return console.error("‚ùå DirectMetadataLoader failed:",a),null}finally{this.loading=!1}}async getSymbolMetadata(e){const a=await this.loadMetadata();if(!a||!a.items)return{symbol:e,sector:"Unknown",industry:"Unknown Industry",exchange:"NASDAQ",confidence:0,source:"DirectLoader (Failed)"};const o=a.items.find(s=>s.symbol===e);return o?{...o,source:"DirectLoader (Success)"}:{symbol:e,sector:"Unknown",industry:"Unknown Industry",exchange:"NASDAQ",confidence:0,source:"DirectLoader (Not Found)"}}async getBatchMetadata(e){const a=new Map;for(const o of e){const s=await this.getSymbolMetadata(o);a.set(o,s)}return a}}const Yl=new Kl,Jl={name:"StockDetail",components:{FastTradingViewWidget:Bt,LazyTradingViewWidget:ft,MarketRegimeWidget:Xo,TradingStrategyWidget:ir,TradingViewCompanyProfile:hr,TradingViewFundamentalData:wr,TechnicalIndicators:Ht,PerformanceMonitor:zt,StockNews:Or,StockDetailSkeleton:sl},data(){return{loading:!0,error:null,metadata:null}},computed:{symbol(){return this.$route.params.symbol||"RKLB"},exchange(){if(this.metadata&&this.metadata.exchange)return{NYQ:"NYSE",NMS:"NASDAQ",NCM:"NASDAQ",NGM:"NASDAQ",ASE:"AMEX",NYSE:"NYSE",NASDAQ:"NASDAQ"}[this.metadata.exchange]||this.metadata.exchange;const i=this.symbol;return["ORCL","TSM","RDW","CRM","PL","LEU","SMR","IONQ","HIMS"].includes(i)?"NYSE":(["ASTS","RIVN","ONDS","AVAV","MDB","RKLB","NVDA","AVGO","AMZN","GOOG","META","NFLX","CRWV","PLTR","TSLA"].includes(i),"NASDAQ")},dailyInsightConfig(){return{lineWidth:2,lineType:0,chartType:"candlesticks",showVolume:!0,fontColor:"rgb(106, 109, 120)",gridLineColor:"rgba(46, 46, 46, 0.06)",volumeUpColor:"rgba(34, 171, 148, 0.5)",volumeDownColor:"rgba(247, 82, 95, 0.5)",backgroundColor:"#ffffff",widgetFontColor:"#0F0F0F",upColor:"#22ab94",downColor:"#f7525f",borderUpColor:"#22ab94",borderDownColor:"#f7525f",wickUpColor:"#22ab94",wickDownColor:"#f7525f",colorTheme:"light",isTransparent:!0,locale:"en",chartOnly:!1,scalePosition:"right",scaleMode:"Normal",fontFamily:"-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif",valuesTracking:"1",changeMode:"price-and-percent",symbols:[[`${this.exchange}:${this.symbol}|6M`]],dateRanges:["6m|1D"],fontSize:"10",headerFontSize:"medium",autosize:!0,width:"100%",height:"100%",noTimeScale:!1,hideDateRanges:!1,showMA:!0,maLength:"5",maLineColor:"#2962FF",maLineWidth:1,hideMarketStatus:!1,hideSymbolLogo:!1}},weeklyInsightConfig(){return{lineWidth:2,lineType:0,chartType:"candlesticks",showVolume:!0,fontColor:"rgb(106, 109, 120)",gridLineColor:"rgba(46, 46, 46, 0.06)",volumeUpColor:"rgba(34, 171, 148, 0.5)",volumeDownColor:"rgba(247, 82, 95, 0.5)",backgroundColor:"#ffffff",widgetFontColor:"#0F0F0F",upColor:"#22ab94",downColor:"#f7525f",borderUpColor:"#22ab94",borderDownColor:"#f7525f",wickUpColor:"#22ab94",wickDownColor:"#f7525f",colorTheme:"light",isTransparent:!0,locale:"en",chartOnly:!1,scalePosition:"right",scaleMode:"Normal",fontFamily:"-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif",valuesTracking:"1",changeMode:"price-and-percent",symbols:[[`${this.exchange}:${this.symbol}|6M`]],dateRanges:["6m|1W"],fontSize:"10",headerFontSize:"medium",autosize:!0,width:"100%",height:"100%",noTimeScale:!1,hideDateRanges:!1,showMA:!0,maLength:"4",maLineColor:"#2962FF",maLineWidth:1,hideMarketStatus:!1,hideSymbolLogo:!1}}},watch:{symbol(){this.scrollToTop(),this.loadMetadata()},$route(){this.scrollToTop()}},mounted(){this.scrollToTop(),re.setUseDynamicAPI(!0),this.loadMetadata(),this.initializePage()},methods:{async initializePage(){try{await new Promise(i=>setTimeout(i,1e3)),this.loading=!1}catch(i){this.error=String(i),this.loading=!1}},async refresh(){this.loading=!0,this.error=null,await this.initializePage()},async loadMetadata(){try{this.metadata=await Yl.getSymbolMetadata(this.symbol),console.log(`üìä StockDetail loaded metadata for ${this.symbol}:`,this.metadata)}catch(i){console.warn(`Failed to load metadata for ${this.symbol}:`,i),this.metadata=null}},getSector(){return!this.metadata||this.metadata.confidence<.7?"Unknown":this.metadata.sector||"Unknown"},getIndustry(){return!this.metadata||this.metadata.confidence<.7?"Unknown Industry":this.metadata.industry||this.metadata.sector||"Unknown Industry"},getIndustryCategory(){const i=this.getIndustry();return{"Software - Application":"tech-software","Computer Hardware":"tech-hardware","Communication Equipment":"tech-satellite","Database Software":"tech-software","Enterprise Software":"tech-software",Semiconductors:"tech-hardware","Aerospace & Defense":"industrial-aerospace","Space Infrastructure":"industrial-space","Satellite Communications":"communications","Auto Manufacturers":"automotive","Unknown Industry":"unknown"}[i]||"other"},goBack(){console.log("Navigating back to stock overview"),this.$router.push({name:"stock-overview"}).catch(i=>{console.error("Navigation error:",i)})},scrollToTop(){this.$nextTick(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"}),setTimeout(()=>{window.scrollTo(0,0)},100)})}}},Zl={class:"stock-detail"},ec={class:"breadcrumb"},tc={class:"breadcrumb-current"},sc={key:0,class:"loading-with-skeleton"},ac={key:1,class:"error"},nc={class:"text-danger"},ic={key:2},oc={class:"stock-header"},rc={class:"stock-info-header"},lc={class:"symbol-info"},cc={class:"symbol"},dc={class:"symbol-tags"},uc={class:"exchange-tag"},hc={class:"header-actions"},gc={class:"widgets-container"},mc={class:"widget-overview"},fc={class:"widget-technical"},pc={class:"symbol-insight-block"},yc={class:"insight-full-widget market-regime"},vc={class:"insight-full-widget trading-strategy"},wc={class:"insight-widgets-container"},Sc={class:"insight-widget daily-insight"},bc={class:"insight-widget weekly-insight"},_c={class:"widget-container"},kc={class:"content-layout"},Cc={class:"widget-container"},Tc={class:"widget-container"},Dc={class:"widget-container"};function Ac(i,e,a,o,s,n){const r=E("router-link"),d=E("StockDetailSkeleton"),c=E("FastTradingViewWidget"),g=E("MarketRegimeWidget"),y=E("TradingStrategyWidget"),p=E("LazyTradingViewWidget"),k=E("TechnicalIndicators"),D=E("PerformanceMonitor"),C=E("StockNews"),A=E("TradingViewFundamentalData"),b=E("TradingViewCompanyProfile");return u(),h("div",Zl,[t("nav",ec,[N(r,{to:"/stock-overview",class:"breadcrumb-link"},{default:Ke(()=>[...e[2]||(e[2]=[_("Stock Overview",-1)])]),_:1}),e[3]||(e[3]=t("span",{class:"breadcrumb-separator"},"‚Ä∫",-1)),t("span",tc,l(n.symbol)+" Analysis",1)]),s.loading?(u(),h("div",sc,[N(d)])):s.error?(u(),h("div",ac,[t("p",nc,l(s.error),1),t("button",{onClick:e[0]||(e[0]=(...F)=>n.refresh&&n.refresh(...F)),class:"btn btn-secondary"},"Retry")])):(u(),h("div",ic,[t("div",oc,[t("div",rc,[t("div",lc,[t("h3",cc,l(n.symbol),1),t("div",dc,[t("span",uc,l(n.exchange),1),t("span",{class:v(["industry-tag",`industry-${n.getIndustryCategory()}`])},l(n.getIndustry()),3)])]),t("div",hc,[t("button",{onClick:e[1]||(e[1]=(...F)=>n.goBack&&n.goBack(...F)),class:"detail-btn"},[...e[4]||(e[4]=[t("span",{class:"btn-icon"},"‚Üê",-1),_(" Back to Stock Overview ",-1)])])])]),t("div",gc,[t("div",mc,[e[5]||(e[5]=t("div",{class:"widget-header"},[t("h4",null,"Symbol Overview")],-1)),N(c,{"widget-type":"overview",symbol:n.symbol,exchange:n.exchange},null,8,["symbol","exchange"])]),t("div",fc,[e[6]||(e[6]=t("div",{class:"widget-header"},[t("h4",null,"Technical Analysis")],-1)),N(c,{"widget-type":"technical",symbol:n.symbol,exchange:n.exchange,class:"technical-overview-style"},null,8,["symbol","exchange"])])])]),t("div",pc,[e[11]||(e[11]=t("div",{class:"insight-header"},[t("h3",null,"Symbol Insight")],-1)),t("div",yc,[e[7]||(e[7]=t("div",{class:"widget-header"},[t("h4",null,"Market Regime")],-1)),N(g,{symbol:n.symbol,exchange:n.exchange,priority:2},null,8,["symbol","exchange"])]),t("div",vc,[e[8]||(e[8]=t("div",{class:"widget-header"},[t("h4",null,"Trading Strategy")],-1)),N(y,{symbol:n.symbol,exchange:n.exchange,priority:3},null,8,["symbol","exchange"])]),t("div",wc,[t("div",Sc,[e[9]||(e[9]=t("div",{class:"widget-header"},[t("h4",null,"Daily Insight (MA5)")],-1)),N(p,{"widget-type":"Daily Insight",config:n.dailyInsightConfig,"script-url":"https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js",height:"550px",priority:4},null,8,["config"])]),t("div",bc,[e[10]||(e[10]=t("div",{class:"widget-header"},[t("h4",null,"Weekly Insight (MA4)")],-1)),N(p,{"widget-type":"Weekly Insight",config:n.weeklyInsightConfig,"script-url":"https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js",height:"550px",priority:5},null,8,["config"])])])]),t("div",_c,[e[12]||(e[12]=t("div",{class:"widget-header"},[t("h3",null,"Technical Indicators")],-1)),N(k,{symbol:n.symbol,exchange:n.exchange},null,8,["symbol","exchange"])]),N(D),t("div",kc,[t("div",Cc,[e[13]||(e[13]=t("div",{class:"widget-header"},[t("h3",null,"Latest News")],-1)),N(C,{symbol:n.symbol},null,8,["symbol"])]),t("div",Tc,[e[14]||(e[14]=t("div",{class:"widget-header"},[t("h3",null,"Fundamental Data")],-1)),N(A,{symbol:n.symbol,exchange:n.exchange},null,8,["symbol","exchange"])]),t("div",Dc,[e[15]||(e[15]=t("div",{class:"widget-header"},[t("h3",null,"Company Profile")],-1)),N(b,{symbol:n.symbol,exchange:n.exchange,"color-theme":"light","is-transparent":!0},null,8,["symbol","exchange"])])])]))])}const Ic=P(Jl,[["render",Ac],["__scopeId","data-v-6e7db504"]]),xc={name:"TradingViewTopStories",props:{displayMode:{type:String,default:"regular"},feedMode:{type:String,default:"market"},colorTheme:{type:String,default:"light"},isTransparent:{type:Boolean,default:!0},locale:{type:String,default:"en"},market:{type:String,default:"stock"},height:{type:String,default:"600px"}},data(){return{loaded:!1,error:!1,widgetId:`top-stories-${Date.now()}`}},mounted(){this.loadTopStories()},methods:{async loadTopStories(){this.loaded=!1,this.error=!1;try{await this.$nextTick(),this.createTopStories()}catch(i){console.error("Failed to load top stories:",i),this.error=!0}},createTopStories(){const i=this.$refs.container;if(!i)return;i.innerHTML="";const e=document.createElement("div");e.className="tradingview-widget-container",e.style.height="100%",e.style.width="100%";const a=document.createElement("div");a.className="tradingview-widget-container__widget",e.appendChild(a),i.appendChild(e);const o={displayMode:this.displayMode,feedMode:this.feedMode,colorTheme:this.colorTheme,isTransparent:this.isTransparent,locale:this.locale,market:this.market,width:"100%",height:"100%"},s=document.createElement("script");s.type="text/javascript",s.src="https://s3.tradingview.com/external-embedding/embed-widget-timeline.js",s.async=!0,s.innerHTML=JSON.stringify(o),s.onload=()=>{this.loaded=!0,console.log("TradingView Top Stories loaded successfully")},s.onerror=()=>{this.error=!0,console.error("TradingView Top Stories failed to load")},a.appendChild(s),setTimeout(()=>{!this.loaded&&!this.error&&(this.loaded=!0)},8e3)},async retry(){await this.loadTopStories()}}},Mc={class:"top-stories-container"},Nc=["id"],Pc={key:0,class:"stories-loading"},Lc={key:1,class:"stories-error"};function Rc(i,e,a,o,s,n){return u(),h("div",Mc,[e[3]||(e[3]=t("div",{class:"widget-header"},[t("h3",null,"Top Stories")],-1)),t("div",{class:"top-stories-widget",id:s.widgetId,ref:"container"},[!s.loaded&&!s.error?(u(),h("div",Pc,[...e[1]||(e[1]=[t("div",{class:"loading-spinner"},null,-1),t("span",null,"Loading market news...",-1)])])):S("",!0),s.error?(u(),h("div",Lc,[e[2]||(e[2]=t("span",null,"‚ö†Ô∏è Failed to load market news",-1)),t("button",{onClick:e[0]||(e[0]=(...r)=>n.retry&&n.retry(...r)),class:"retry-btn"},"Retry")])):S("",!0)],8,Nc)])}const Ec=P(xc,[["render",Rc],["__scopeId","data-v-7abef6c6"]]),$c={name:"TopStoriesSkeleton"},Uc={class:"top-stories-skeleton"},Fc={class:"skeleton-widget-container"},Oc={class:"skeleton-stories-area"},Wc={class:"skeleton-story-tags"},Vc={class:"skeleton-config-info"},qc={class:"skeleton-config-list"};function Bc(i,e,a,o,s,n){return u(),h("div",Uc,[e[5]||(e[5]=t("div",{class:"skeleton-page-header"},[t("div",{class:"skeleton-page-title"}),t("div",{class:"skeleton-page-description"})],-1)),t("div",Fc,[t("div",Oc,[(u(),h($,null,U(10,r=>t("div",{class:"skeleton-story-item",key:r},[e[0]||(e[0]=t("div",{class:"skeleton-story-time"},null,-1)),e[1]||(e[1]=t("div",{class:"skeleton-story-title"},null,-1)),e[2]||(e[2]=t("div",{class:"skeleton-story-content"},null,-1)),t("div",Wc,[(u(),h($,null,U(3,d=>t("div",{class:"skeleton-story-tag",key:d})),64))])])),64))])]),t("div",Vc,[e[4]||(e[4]=t("div",{class:"skeleton-config-title"},null,-1)),t("div",qc,[(u(),h($,null,U(5,r=>t("div",{class:"skeleton-config-item",key:r},[...e[3]||(e[3]=[t("div",{class:"skeleton-config-label"},null,-1),t("div",{class:"skeleton-config-value"},null,-1)])])),64))])])])}const Hc=P($c,[["render",Bc],["__scopeId","data-v-4a248288"]]),zc={name:"TopStoriesTest",components:{TradingViewTopStories:Ec,TopStoriesSkeleton:Hc},data(){return{loading:!0,error:null}},mounted(){this.initializePage()},methods:{async initializePage(){try{await new Promise(i=>setTimeout(i,800)),this.loading=!1}catch(i){this.error=String(i),this.loading=!1}},async refresh(){this.loading=!0,this.error=null,await this.initializePage()}}},Gc={class:"top-stories-test"},jc={key:0,class:"loading-with-skeleton"},Qc={key:1,class:"error"},Xc={class:"text-danger"},Kc={key:2};function Yc(i,e,a,o,s,n){const r=E("TopStoriesSkeleton"),d=E("TradingViewTopStories");return u(),h("div",Gc,[e[2]||(e[2]=t("h2",null,"Top Stories Widget Test",-1)),e[3]||(e[3]=t("p",{class:"text-muted mb-3"},"Testing TradingView Top Stories component",-1)),s.loading?(u(),h("div",jc,[N(r)])):s.error?(u(),h("div",Qc,[t("p",Xc,l(s.error),1),t("button",{onClick:e[0]||(e[0]=(...c)=>n.refresh&&n.refresh(...c)),class:"btn btn-secondary"},"Retry")])):(u(),h("div",Kc,[N(d,{"display-mode":"regular","feed-mode":"market","color-theme":"light","is-transparent":!0,locale:"en",market:"stock",height:"650px"}),e[1]||(e[1]=X('<div class="config-info" data-v-e9d9d092><h3 data-v-e9d9d092>Widget Configuration</h3><ul data-v-e9d9d092><li data-v-e9d9d092><strong data-v-e9d9d092>Display Mode:</strong> regular</li><li data-v-e9d9d092><strong data-v-e9d9d092>Feed Mode:</strong> market</li><li data-v-e9d9d092><strong data-v-e9d9d092>Color Theme:</strong> light</li><li data-v-e9d9d092><strong data-v-e9d9d092>Market:</strong> stock</li><li data-v-e9d9d092><strong data-v-e9d9d092>Height:</strong> 650px</li></ul></div>',1))]))])}const Jc=P(zc,[["render",Yc],["__scopeId","data-v-e9d9d092"]]),Zc={name:"StockMarketInsight",props:{colorTheme:{type:String,default:"light"},isTransparent:{type:Boolean,default:!0},locale:{type:String,default:"en"},height:{type:String,default:"1300px"}},data(){return{dailyLoaded:!1,dailyError:!1,weeklyLoaded:!1,weeklyError:!1,dailyWidgetId:`daily-market-${Date.now()}`,weeklyWidgetId:`weekly-market-${Date.now()}`}},mounted(){this.loadWidgets()},methods:{async loadWidgets(){await this.$nextTick(),this.createDailyWidget(),this.createWeeklyWidget()},createDailyWidget(){const i=this.$refs.dailyContainer;if(!i)return;i.innerHTML="";const e=document.createElement("div");e.className="tradingview-widget-container",e.style.height="100%",e.style.width="100%";const a=document.createElement("div");a.className="tradingview-widget-container__widget",e.appendChild(a),i.appendChild(e);const o={lineWidth:2,lineType:0,chartType:"candlesticks",showVolume:!0,fontColor:"#707070",gridLineColor:"rgba(46, 46, 46, 0.06)",volumeUpColor:"rgba(34, 171, 148, 0.5)",volumeDownColor:"rgba(247, 82, 95, 0.5)",backgroundColor:"#ffffff",widgetFontColor:"#0F0F0F",upColor:"#22ab94",downColor:"#f7525f",borderUpColor:"#22ab94",borderDownColor:"#f7525f",wickUpColor:"#22ab94",wickDownColor:"#f7525f",colorTheme:this.colorTheme,isTransparent:this.isTransparent,locale:this.locale,chartOnly:!1,scalePosition:"right",scaleMode:"Normal",fontFamily:"-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif",valuesTracking:"1",changeMode:"price-and-percent",symbols:[["IG:NASDAQ|6M"],["THINKMARKETS:US30|6M"]],dateRanges:["6m|1D"],fontSize:"10",headerFontSize:"medium",autosize:!0,width:"100%",height:"100%",noTimeScale:!1,hideDateRanges:!1,showMA:!0,maLength:"5",maLineColor:"#2962FF",maLineWidth:1,hideMarketStatus:!1,hideSymbolLogo:!1},s=document.createElement("script");s.type="text/javascript",s.src="https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js",s.async=!0,s.innerHTML=JSON.stringify(o),s.onload=()=>{this.dailyLoaded=!0,console.log("Daily Market Widget loaded successfully")},s.onerror=()=>{this.dailyError=!0,console.error("Daily Market Widget failed to load")},a.appendChild(s),setTimeout(()=>{!this.dailyLoaded&&!this.dailyError&&(this.dailyLoaded=!0)},8e3)},createWeeklyWidget(){const i=this.$refs.weeklyContainer;if(!i)return;i.innerHTML="";const e=document.createElement("div");e.className="tradingview-widget-container",e.style.height="100%",e.style.width="100%";const a=document.createElement("div");a.className="tradingview-widget-container__widget",e.appendChild(a),i.appendChild(e);const o={lineWidth:2,lineType:0,chartType:"candlesticks",showVolume:!0,fontColor:"#707070",gridLineColor:"rgba(46, 46, 46, 0.06)",volumeUpColor:"rgba(34, 171, 148, 0.5)",volumeDownColor:"rgba(247, 82, 95, 0.5)",backgroundColor:"#ffffff",widgetFontColor:"#0F0F0F",upColor:"#22ab94",downColor:"#f7525f",borderUpColor:"#22ab94",borderDownColor:"#f7525f",wickUpColor:"#22ab94",wickDownColor:"#f7525f",colorTheme:this.colorTheme,isTransparent:this.isTransparent,locale:this.locale,chartOnly:!1,scalePosition:"right",scaleMode:"Normal",fontFamily:"-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif",valuesTracking:"1",changeMode:"price-and-percent",symbols:[["IG:NASDAQ|6M"],["THINKMARKETS:US30|6M"]],dateRanges:["6m|1W"],fontSize:"10",headerFontSize:"medium",autosize:!0,width:"100%",height:"100%",noTimeScale:!1,hideDateRanges:!1,showMA:!0,maLength:"5",maLineColor:"#2962FF",maLineWidth:1,hideMarketStatus:!1,hideSymbolLogo:!1},s=document.createElement("script");s.type="text/javascript",s.src="https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js",s.async=!0,s.innerHTML=JSON.stringify(o),s.onload=()=>{this.weeklyLoaded=!0,console.log("Weekly Market Widget loaded successfully")},s.onerror=()=>{this.weeklyError=!0,console.error("Weekly Market Widget failed to load")},a.appendChild(s),setTimeout(()=>{!this.weeklyLoaded&&!this.weeklyError&&(this.weeklyLoaded=!0)},8e3)},async retryDaily(){this.dailyLoaded=!1,this.dailyError=!1,await this.$nextTick(),this.createDailyWidget()},async retryWeekly(){this.weeklyLoaded=!1,this.weeklyError=!1,await this.$nextTick(),this.createWeeklyWidget()}}},ed={class:"stock-market-insight-container"},td={class:"insight-grid"},sd={class:"insight-section"},ad=["id"],nd={key:0,class:"widget-loading"},id={key:1,class:"widget-error"},od={class:"insight-section"},rd=["id"],ld={key:0,class:"widget-loading"},cd={key:1,class:"widget-error"};function dd(i,e,a,o,s,n){return u(),h("div",ed,[e[8]||(e[8]=t("div",{class:"widget-header"},[t("h3",null,"Stock Market Insight")],-1)),t("div",td,[t("div",sd,[e[4]||(e[4]=t("div",{class:"section-header"},[t("h4",null,"Stock Market Daily")],-1)),t("div",{class:"daily-widget",id:s.dailyWidgetId,ref:"dailyContainer"},[!s.dailyLoaded&&!s.dailyError?(u(),h("div",nd,[...e[2]||(e[2]=[t("div",{class:"loading-spinner"},null,-1),t("span",null,"Loading daily market data...",-1)])])):S("",!0),s.dailyError?(u(),h("div",id,[e[3]||(e[3]=t("span",null,"‚ö†Ô∏è Failed to load daily data",-1)),t("button",{onClick:e[0]||(e[0]=(...r)=>n.retryDaily&&n.retryDaily(...r)),class:"retry-btn"},"Retry")])):S("",!0)],8,ad)]),t("div",od,[e[7]||(e[7]=t("div",{class:"section-header"},[t("h4",null,"Stock Market Weekly")],-1)),t("div",{class:"weekly-widget",id:s.weeklyWidgetId,ref:"weeklyContainer"},[!s.weeklyLoaded&&!s.weeklyError?(u(),h("div",ld,[...e[5]||(e[5]=[t("div",{class:"loading-spinner"},null,-1),t("span",null,"Loading weekly market data...",-1)])])):S("",!0),s.weeklyError?(u(),h("div",cd,[e[6]||(e[6]=t("span",null,"‚ö†Ô∏è Failed to load weekly data",-1)),t("button",{onClick:e[1]||(e[1]=(...r)=>n.retryWeekly&&n.retryWeekly(...r)),class:"retry-btn"},"Retry")])):S("",!0)],8,rd)])])])}const ud=P(Zc,[["render",dd],["__scopeId","data-v-e5c812bc"]]),hd={name:"StockMarketInsightSkeleton"},gd={class:"stock-market-insight-skeleton"},md={class:"skeleton-config-info"},fd={class:"skeleton-config-grid"},pd={class:"skeleton-config-section"},yd={class:"skeleton-config-list"},vd={class:"skeleton-config-section"},wd={class:"skeleton-config-list"};function Sd(i,e,a,o,s,n){return u(),h("div",gd,[e[5]||(e[5]=X('<div class="skeleton-page-header" data-v-bcaf64ab><div class="skeleton-page-title" data-v-bcaf64ab></div><div class="skeleton-page-description" data-v-bcaf64ab></div></div><div class="skeleton-widget-container large" data-v-bcaf64ab><div class="skeleton-insight-grid" data-v-bcaf64ab><div class="skeleton-insight-section" data-v-bcaf64ab><div class="skeleton-section-header" data-v-bcaf64ab><div class="skeleton-section-title" data-v-bcaf64ab></div></div><div class="skeleton-chart-area" data-v-bcaf64ab><div class="skeleton-chart" data-v-bcaf64ab></div></div></div><div class="skeleton-insight-section" data-v-bcaf64ab><div class="skeleton-section-header" data-v-bcaf64ab><div class="skeleton-section-title" data-v-bcaf64ab></div></div><div class="skeleton-chart-area" data-v-bcaf64ab><div class="skeleton-chart" data-v-bcaf64ab></div></div></div></div></div>',2)),t("div",md,[e[4]||(e[4]=t("div",{class:"skeleton-config-title"},null,-1)),t("div",fd,[t("div",pd,[e[1]||(e[1]=t("div",{class:"skeleton-config-section-title"},null,-1)),t("div",yd,[(u(),h($,null,U(5,r=>t("div",{class:"skeleton-config-item",key:r},[...e[0]||(e[0]=[t("div",{class:"skeleton-config-label"},null,-1),t("div",{class:"skeleton-config-value"},null,-1)])])),64))])]),t("div",vd,[e[3]||(e[3]=t("div",{class:"skeleton-config-section-title"},null,-1)),t("div",wd,[(u(),h($,null,U(5,r=>t("div",{class:"skeleton-config-item",key:r},[...e[2]||(e[2]=[t("div",{class:"skeleton-config-label"},null,-1),t("div",{class:"skeleton-config-value"},null,-1)])])),64))])])])])])}const bd=P(hd,[["render",Sd],["__scopeId","data-v-bcaf64ab"]]),_d={name:"StockMarketInsightTest",components:{StockMarketInsight:ud,StockMarketInsightSkeleton:bd},data(){return{loading:!0,error:null}},mounted(){this.initializePage()},methods:{async initializePage(){try{await new Promise(i=>setTimeout(i,1e3)),this.loading=!1}catch(i){this.error=String(i),this.loading=!1}},async refresh(){this.loading=!0,this.error=null,await this.initializePage()}}},kd={class:"stock-market-insight-test"},Cd={key:0,class:"loading-with-skeleton"},Td={key:1,class:"error"},Dd={class:"text-danger"},Ad={key:2};function Id(i,e,a,o,s,n){const r=E("StockMarketInsightSkeleton"),d=E("StockMarketInsight");return u(),h("div",kd,[e[2]||(e[2]=t("h2",null,"Stock Market Insight Test",-1)),e[3]||(e[3]=t("p",{class:"text-muted mb-3"},"Testing Stock Market Insight component with Daily and Weekly views",-1)),s.loading?(u(),h("div",Cd,[N(r)])):s.error?(u(),h("div",Td,[t("p",Dd,l(s.error),1),t("button",{onClick:e[0]||(e[0]=(...c)=>n.refresh&&n.refresh(...c)),class:"btn btn-secondary"},"Retry")])):(u(),h("div",Ad,[N(d,{"color-theme":"light","is-transparent":!0,locale:"en",height:"1300px"}),e[1]||(e[1]=X('<div class="config-info" data-v-d131536f><h3 data-v-d131536f>Widget Configuration</h3><div class="config-grid" data-v-d131536f><div class="config-section" data-v-d131536f><h4 data-v-d131536f>Daily Configuration</h4><ul data-v-d131536f><li data-v-d131536f><strong data-v-d131536f>Symbols:</strong> NASDAQ, US30</li><li data-v-d131536f><strong data-v-d131536f>Date Range:</strong> 6 months, 1 Day intervals</li><li data-v-d131536f><strong data-v-d131536f>Chart Type:</strong> Candlesticks</li><li data-v-d131536f><strong data-v-d131536f>Moving Average:</strong> 5-period</li><li data-v-d131536f><strong data-v-d131536f>Volume:</strong> Enabled</li></ul></div><div class="config-section" data-v-d131536f><h4 data-v-d131536f>Weekly Configuration</h4><ul data-v-d131536f><li data-v-d131536f><strong data-v-d131536f>Symbols:</strong> NASDAQ, US30</li><li data-v-d131536f><strong data-v-d131536f>Date Range:</strong> 6 months, 1 Week intervals</li><li data-v-d131536f><strong data-v-d131536f>Chart Type:</strong> Candlesticks</li><li data-v-d131536f><strong data-v-d131536f>Moving Average:</strong> 5-period</li><li data-v-d131536f><strong data-v-d131536f>Volume:</strong> Enabled</li></ul></div></div></div>',1))]))])}const xd=P(_d,[["render",Id],["__scopeId","data-v-d131536f"]]),Md={name:"YahooFinanceTest",data(){return{testSymbol:"AAPL",loading:!1,error:null,testData:null,cacheStatus:null,presetSymbols:["AAPL","TSLA","MSFT","GOOGL","ONDS","RDW"]}},methods:{async loadTestData(){if(this.testSymbol){this.loading=!0,this.error=null,this.testData=null;try{console.log(`Testing Yahoo Finance API for ${this.testSymbol}...`),this.testData=await ee.getTechnicalIndicators(this.testSymbol),this.testData.error&&(this.error=this.testData.error)}catch(i){this.error=i.message,console.error("Test failed:",i)}finally{this.loading=!1}}},getSignalClass(i){if(!i)return"neutral";const e=["BUY","OVERSOLD","STRONG_TREND"],a=["SELL","OVERBOUGHT"];return e.includes(i)?"bullish":a.includes(i)?"bearish":"neutral"},formatDate(i){return i?new Date(i).toLocaleString("zh-TW"):"N/A"},async loadCacheStatus(){this.cacheStatus=ee.getCacheStats()},clearCache(){ee.clearCache(),ee.clearDailyCache(),this.cacheStatus=null,alert("ÊâÄÊúâÁ∑©Â≠òÂ∑≤Ê∏ÖÈô§ (API Á∑©Â≠ò + ÊØèÊó•Á∑©Â≠ò)")}},mounted(){this.loadTestData()}},Nd={class:"yahoo-finance-test"},Pd={class:"test-controls"},Ld={class:"symbol-input"},Rd=["disabled"],Ed={class:"preset-symbols"},$d=["onClick","disabled"],Ud={key:0,class:"loading-section"},Fd={key:1,class:"error-section"},Od={key:2,class:"results-section"},Wd={class:"indicators-grid"},Vd={class:"indicator-section"},qd={class:"ma-grid"},Bd={class:"indicator-card compact"},Hd={class:"indicator-details"},zd={class:"indicator-card compact"},Gd={class:"indicator-details"},jd={class:"indicator-card compact"},Qd={class:"indicator-details"},Xd={class:"indicator-card compact"},Kd={class:"indicator-details"},Yd={class:"additional-info"},Jd={class:"indicator-section"},Zd={class:"ichimoku-grid"},eu={class:"indicator-card compact"},tu={class:"indicator-details"},su={class:"additional-info"},au={class:"indicator-card compact"},nu={class:"indicator-details"},iu={class:"additional-info"},ou={class:"indicator-card compact"},ru={class:"indicator-details"},lu={class:"additional-info"},cu={class:"indicator-section"},du={class:"vwma-grid"},uu={class:"indicator-card"},hu={class:"indicator-details"},gu={class:"additional-info"},mu={class:"indicator-section"},fu={class:"technical-grid"},pu={class:"indicator-card"},yu={class:"indicator-details"},vu={key:0,class:"rsi-bar"},wu={class:"indicator-card"},Su={class:"indicator-details"},bu={class:"additional-info"},_u={class:"indicator-card"},ku={class:"indicator-details"},Cu={class:"additional-info"},Tu={class:"metadata"},Du={key:0},Au={key:1},Iu={key:2,class:"error-text"},xu={class:"cache-section"},Mu={key:0,class:"cache-info"};function Nu(i,e,a,o,s,n){var r,d,c,g,y,p,k,D,C,A,b,F,M,O,f,W,w,I,m,V,B,te,se,me,fe,pe,ye,ve,we,Se,be,_e,ke,Ce,Te,De,Ae,Ie,xe,Me,Ne,Pe,Le,Re,Ee,$e,Ue,Fe,Oe,We,Ve,qe,Be,He,ze,Ge,je,Qe,Xe;return u(),h("div",Nd,[e[32]||(e[32]=t("div",{class:"test-header"},[t("h2",null,"Yahoo Finance API Ê∏¨Ë©¶"),t("p",null,"Ê∏¨Ë©¶ Yahoo Finance API ÁöÑÊäÄË°ìÊåáÊ®ôÊï∏ÊìöÁç≤ÂèñÂäüËÉΩ")],-1)),t("div",Pd,[t("div",Ld,[e[5]||(e[5]=t("label",{for:"symbol"},"ËÇ°Á•®‰ª£Ëôü:",-1)),q(t("input",{id:"symbol","onUpdate:modelValue":e[0]||(e[0]=Q=>s.testSymbol=Q),type:"text",placeholder:"‰æãÂ¶Ç: AAPL, TSLA, ONDS",onKeyup:e[1]||(e[1]=Ye(Q=>s.testSymbol&&n.loadTestData(),["enter"]))},null,544),[[ne,s.testSymbol]]),t("button",{onClick:e[2]||(e[2]=Q=>n.loadTestData()),disabled:!s.testSymbol||s.loading,class:"test-btn"},l(s.loading?"ËºâÂÖ•‰∏≠...":"Ê∏¨Ë©¶"),9,Rd)]),t("div",Ed,[e[6]||(e[6]=t("span",null,"Âø´ÈÄüÊ∏¨Ë©¶:",-1)),(u(!0),h($,null,U(s.presetSymbols,Q=>(u(),h("button",{key:Q,onClick:it=>{s.testSymbol=Q,n.loadTestData()},disabled:s.loading,class:"preset-btn"},l(Q),9,$d))),128))])]),s.loading?(u(),h("div",Ud,[e[7]||(e[7]=t("div",{class:"loading-spinner"},null,-1)),t("p",null,"Ê≠£Âú®Âæû Yahoo Finance Áç≤Âèñ "+l(s.testSymbol)+" ÁöÑÊäÄË°ìÊåáÊ®ôÊï∏Êìö...",1)])):S("",!0),s.error?(u(),h("div",Fd,[e[8]||(e[8]=t("h3",null,"‚ùå ÈåØË™§",-1)),t("p",null,l(s.error),1)])):S("",!0),s.testData&&!s.loading?(u(),h("div",Od,[t("h3",null,"‚úÖ "+l(s.testSymbol)+" ÊäÄË°ìÊåáÊ®ôÁµêÊûú",1),t("div",Wd,[t("div",Vd,[e[13]||(e[13]=t("h3",null,"ÁßªÂãïÂπ≥ÂùáÁ∑ö (Moving Averages)",-1)),t("div",qd,[t("div",Bd,[e[9]||(e[9]=t("h4",null,"MA5 / SMA5",-1)),t("div",Hd,[t("div",{class:v(["main-value",n.getSignalClass((r=s.testData.ma5)==null?void 0:r.signal)])},l(((d=s.testData.ma5)==null?void 0:d.value)||"N/A"),3),t("div",{class:v(["signal-badge",n.getSignalClass((c=s.testData.ma5)==null?void 0:c.signal)])},l(((g=s.testData.ma5)==null?void 0:g.signal)||"N/A"),3)])]),t("div",zd,[e[10]||(e[10]=t("h4",null,"MA10 / SMA10",-1)),t("div",Gd,[t("div",{class:v(["main-value",n.getSignalClass((y=s.testData.ma10)==null?void 0:y.signal)])},l(((p=s.testData.ma10)==null?void 0:p.value)||"N/A"),3),t("div",{class:v(["signal-badge",n.getSignalClass((k=s.testData.ma10)==null?void 0:k.signal)])},l(((D=s.testData.ma10)==null?void 0:D.signal)||"N/A"),3)])]),t("div",jd,[e[11]||(e[11]=t("h4",null,"MA30 / SMA30",-1)),t("div",Qd,[t("div",{class:v(["main-value",n.getSignalClass((C=s.testData.ma30)==null?void 0:C.signal)])},l(((A=s.testData.ma30)==null?void 0:A.value)||"N/A"),3),t("div",{class:v(["signal-badge",n.getSignalClass((b=s.testData.ma30)==null?void 0:b.signal)])},l(((F=s.testData.ma30)==null?void 0:F.signal)||"N/A"),3)])]),t("div",Xd,[e[12]||(e[12]=t("h4",null,"SMA50",-1)),t("div",Kd,[t("div",{class:v(["main-value",n.getSignalClass((M=s.testData.sma50)==null?void 0:M.signal)])},l(((O=s.testData.sma50)==null?void 0:O.value)||"N/A"),3),t("div",{class:v(["signal-badge",n.getSignalClass((f=s.testData.sma50)==null?void 0:f.signal)])},l(((W=s.testData.sma50)==null?void 0:W.signal)||"N/A"),3),t("div",Yd,[t("small",null,"Áï∂ÂâçÂÉπÊ†º: $"+l(((w=s.testData.sma50)==null?void 0:w.currentPrice)||"N/A"),1)])])])])]),t("div",Jd,[e[17]||(e[17]=t("h3",null,"‰∏ÄÁõÆÂùáË°°Ë°® (Ichimoku Cloud)",-1)),t("div",Zd,[t("div",eu,[e[14]||(e[14]=t("h4",null,"ËΩâÊèõÁ∑ö (9)",-1)),t("div",tu,[t("div",{class:v(["main-value",n.getSignalClass((I=s.testData.ichimokuConversionLine)==null?void 0:I.signal)])},l(((m=s.testData.ichimokuConversionLine)==null?void 0:m.value)||"N/A"),3),t("div",{class:v(["signal-badge",n.getSignalClass((V=s.testData.ichimokuConversionLine)==null?void 0:V.signal)])},l(((B=s.testData.ichimokuConversionLine)==null?void 0:B.signal)||"N/A"),3),t("div",su,[t("small",null,"ÊúÄÈ´ò: "+l(((te=s.testData.ichimokuConversionLine)==null?void 0:te.highestHigh)||"N/A"),1),t("small",null,"ÊúÄ‰Ωé: "+l(((se=s.testData.ichimokuConversionLine)==null?void 0:se.lowestLow)||"N/A"),1)])])]),t("div",au,[e[15]||(e[15]=t("h4",null,"Âü∫Ê∫ñÁ∑ö (26)",-1)),t("div",nu,[t("div",{class:v(["main-value",n.getSignalClass((me=s.testData.ichimokuBaseLine)==null?void 0:me.signal)])},l(((fe=s.testData.ichimokuBaseLine)==null?void 0:fe.value)||"N/A"),3),t("div",{class:v(["signal-badge",n.getSignalClass((pe=s.testData.ichimokuBaseLine)==null?void 0:pe.signal)])},l(((ye=s.testData.ichimokuBaseLine)==null?void 0:ye.signal)||"N/A"),3),t("div",iu,[t("small",null,"ÊúÄÈ´ò: "+l(((ve=s.testData.ichimokuBaseLine)==null?void 0:ve.highestHigh)||"N/A"),1),t("small",null,"ÊúÄ‰Ωé: "+l(((we=s.testData.ichimokuBaseLine)==null?void 0:we.lowestLow)||"N/A"),1)])])]),t("div",ou,[e[16]||(e[16]=t("h4",null,"ÈÅ≤Ë°åÁ∑ö (26)",-1)),t("div",ru,[t("div",{class:v(["main-value",n.getSignalClass((Se=s.testData.ichimokuLaggingSpan)==null?void 0:Se.signal)])},l(((be=s.testData.ichimokuLaggingSpan)==null?void 0:be.value)||"N/A"),3),t("div",{class:v(["signal-badge",n.getSignalClass((_e=s.testData.ichimokuLaggingSpan)==null?void 0:_e.signal)])},l(((ke=s.testData.ichimokuLaggingSpan)==null?void 0:ke.signal)||"N/A"),3),t("div",lu,[t("small",null,"ÂèÉËÄÉÂÉπ: "+l(((Ce=s.testData.ichimokuLaggingSpan)==null?void 0:Ce.laggingReference)||"N/A"),1)])])])])]),t("div",cu,[e[19]||(e[19]=t("h3",null,"Êàê‰∫§ÈáèÂä†Ê¨äÁßªÂãïÂπ≥ÂùáÁ∑ö (VWMA)",-1)),t("div",du,[t("div",uu,[e[18]||(e[18]=t("h4",null,"VWMA (20)",-1)),t("div",hu,[t("div",{class:v(["main-value",n.getSignalClass((Te=s.testData.vwma20)==null?void 0:Te.signal)])},l(((De=s.testData.vwma20)==null?void 0:De.value)||"N/A"),3),t("div",{class:v(["signal-badge",n.getSignalClass((Ae=s.testData.vwma20)==null?void 0:Ae.signal)])},l(((Ie=s.testData.vwma20)==null?void 0:Ie.signal)||"N/A"),3),t("div",gu,[t("small",null,"Áï∂ÂâçÂÉπÊ†º: $"+l(((xe=s.testData.vwma20)==null?void 0:xe.currentPrice)||"N/A"),1),t("small",null,"Á∏ΩÊàê‰∫§Èáè: "+l(((Me=s.testData.vwma20)==null?void 0:Me.totalVolume)||"N/A"),1)])])])])]),t("div",mu,[e[23]||(e[23]=t("h3",null,"ÊäÄË°ìÊåáÊ®ô (Technical Indicators)",-1)),t("div",fu,[t("div",pu,[e[20]||(e[20]=t("h4",null,"Relative Strength Index (14)",-1)),t("div",yu,[t("div",{class:v(["main-value",n.getSignalClass((Ne=s.testData.rsi14)==null?void 0:Ne.signal)])},l(((Pe=s.testData.rsi14)==null?void 0:Pe.value)||"N/A"),3),t("div",{class:v(["signal-badge",n.getSignalClass((Le=s.testData.rsi14)==null?void 0:Le.signal)])},l(((Re=s.testData.rsi14)==null?void 0:Re.signal)||"N/A"),3),(Ee=s.testData.rsi14)!=null&&Ee.value?(u(),h("div",vu,[t("div",{class:"rsi-fill",style:J({width:s.testData.rsi14.value+"%"})},null,4)])):S("",!0)])]),t("div",wu,[e[21]||(e[21]=t("h4",null,"Average Directional Index (14)",-1)),t("div",Su,[t("div",{class:v(["main-value",n.getSignalClass(($e=s.testData.adx14)==null?void 0:$e.signal)])},l(((Ue=s.testData.adx14)==null?void 0:Ue.value)||"N/A"),3),t("div",{class:v(["signal-badge",n.getSignalClass((Fe=s.testData.adx14)==null?void 0:Fe.signal)])},l(((Oe=s.testData.adx14)==null?void 0:Oe.signal)||"N/A"),3),t("div",bu,[t("small",null,"+DI: "+l(((We=s.testData.adx14)==null?void 0:We.plusDI)||"N/A"),1),t("small",null,"-DI: "+l(((Ve=s.testData.adx14)==null?void 0:Ve.minusDI)||"N/A"),1)])])]),t("div",_u,[e[22]||(e[22]=t("h4",null,"MACD Level (12, 26)",-1)),t("div",ku,[t("div",{class:v(["main-value",n.getSignalClass((qe=s.testData.macd)==null?void 0:qe.signal)])},l(((Be=s.testData.macd)==null?void 0:Be.value)||"N/A"),3),t("div",{class:v(["signal-badge",n.getSignalClass((He=s.testData.macd)==null?void 0:He.signal)])},l(((ze=s.testData.macd)==null?void 0:ze.signal)||"N/A"),3),t("div",Cu,[t("small",null,"‰ø°ËôüÁ∑ö: "+l(((Ge=s.testData.macd)==null?void 0:Ge.signalLine)||"N/A"),1),t("small",null,"Êü±ÁãÄÂúñ: "+l(((je=s.testData.macd)==null?void 0:je.histogram)||"N/A"),1),t("small",null,"EMA12: "+l(((Qe=s.testData.macd)==null?void 0:Qe.ema12)||"N/A"),1),t("small",null,"EMA26: "+l(((Xe=s.testData.macd)==null?void 0:Xe.ema26)||"N/A"),1)])])])])])]),t("div",Tu,[t("p",null,[e[24]||(e[24]=t("strong",null,"ÊúÄÂæåÊõ¥Êñ∞:",-1)),_(" "+l(n.formatDate(s.testData.lastUpdated)),1)]),t("p",null,[e[25]||(e[25]=t("strong",null,"Êï∏Êìö‰æÜÊ∫ê:",-1)),_(" "+l(s.testData.source||"Yahoo Finance"),1)]),s.testData.proxy?(u(),h("p",Du,[e[26]||(e[26]=t("strong",null,"‰ª£ÁêÜÊúçÂãô:",-1)),_(" "+l(s.testData.proxy),1)])):S("",!0),s.testData.dataPoints?(u(),h("p",Au,[e[27]||(e[27]=t("strong",null,"Êï∏ÊìöÈªûÊï∏Èáè:",-1)),_(" "+l(s.testData.dataPoints),1)])):S("",!0),s.testData.error?(u(),h("p",Iu,[e[28]||(e[28]=t("strong",null,"Ê≥®ÊÑè:",-1)),_(" "+l(s.testData.error),1)])):S("",!0)])])):S("",!0),t("div",xu,[e[31]||(e[31]=t("h3",null,"Á∑©Â≠òÁãÄÊÖã",-1)),t("button",{onClick:e[3]||(e[3]=Q=>n.loadCacheStatus()),class:"cache-btn"},"Ê™¢Êü•Á∑©Â≠ò"),t("button",{onClick:e[4]||(e[4]=Q=>n.clearCache()),class:"cache-btn"},"Ê∏ÖÈô§ÊâÄÊúâÁ∑©Â≠ò"),s.cacheStatus?(u(),h("div",Mu,[e[29]||(e[29]=t("h4",null,"API Ë´ãÊ±ÇÁ∑©Â≠ò (5ÂàÜÈêò)",-1)),t("pre",null,l(JSON.stringify(s.cacheStatus.apiCache,null,2)),1),e[30]||(e[30]=t("h4",null,"ÊØèÊó•ÊäÄË°ìÊåáÊ®ôÁ∑©Â≠ò (24Â∞èÊôÇ)",-1)),t("pre",null,l(JSON.stringify(s.cacheStatus.dailyCache,null,2)),1)])):S("",!0)])])}const Pu=P(Md,[["render",Nu],["__scopeId","data-v-09d65e6d"]]),Lu={name:"TechnicalIndicatorsValidation",data(){return{testSymbol:"AAPL",loading:!1,ourData:null,tradingViewWidget:null}},methods:{async loadData(){if(this.testSymbol){this.loading=!0,this.ourData=null;try{ee.setMockMode(!1),this.ourData=await ee.getTechnicalIndicators(this.testSymbol),this.loadTradingViewWidget()}catch(i){console.error("Failed to load data:",i)}finally{this.loading=!1}}},loadTradingViewWidget(){if(this.tradingViewWidget){const i=document.getElementById(`tradingview-widget-${this.testSymbol}`);i&&(i.innerHTML="")}setTimeout(()=>{const i=document.createElement("script");i.type="text/javascript",i.src="https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js",i.async=!0,i.innerHTML=JSON.stringify({interval:"1D",width:"100%",height:"400",isTransparent:!1,symbol:`NASDAQ:${this.testSymbol}`,showIntervalTabs:!0,locale:"en",colorTheme:"light"});const e=document.getElementById(`tradingview-widget-${this.testSymbol}`);e&&e.appendChild(i)},100)},getSignalClass(i){if(!i)return"neutral";const e=["BUY","OVERSOLD"],a=["SELL","OVERBOUGHT"];return e.includes(i)?"bullish":a.includes(i)?"bearish":"neutral"}},mounted(){this.loadData()}},Ru={class:"validation-page"},Eu={class:"validation-controls"},$u={class:"symbol-input"},Uu=["disabled"],Fu={key:0,class:"loading-section"},Ou={key:1,class:"comparison-section"},Wu={class:"comparison-grid"},Vu={class:"our-results"},qu={class:"indicator-list"},Bu={class:"indicator-item"},Hu={class:"indicator-item"},zu={class:"indicator-item"},Gu={class:"debug-info"},ju={class:"tradingview-results"},Qu={class:"tradingview-widget-container"},Xu=["id"],Ku={class:"detailed-comparison"},Yu={class:"comparison-table"};function Ju(i,e,a,o,s,n){var r,d,c,g,y,p,k,D,C,A,b,F,M,O,f,W,w,I,m;return u(),h("div",Ru,[e[26]||(e[26]=t("div",{class:"validation-header"},[t("h2",null,"ÊäÄË°ìÊåáÊ®ôÈ©óË≠â"),t("p",null,"Â∞çÊØîÊàëÂÄëÁöÑË®àÁÆóÁµêÊûúËàá TradingView ÁöÑÊï∏Êìö")],-1)),t("div",Eu,[t("div",$u,[e[3]||(e[3]=t("label",null,"ËÇ°Á•®‰ª£Ëôü:",-1)),q(t("input",{"onUpdate:modelValue":e[0]||(e[0]=V=>s.testSymbol=V),type:"text",placeholder:"‰æãÂ¶Ç: AAPL",onKeyup:e[1]||(e[1]=Ye(V=>n.loadData(),["enter"]))},null,544),[[ne,s.testSymbol]]),t("button",{onClick:e[2]||(e[2]=V=>n.loadData()),disabled:s.loading},l(s.loading?"ËºâÂÖ•‰∏≠...":"ËºâÂÖ•Êï∏Êìö"),9,Uu)])]),s.loading?(u(),h("div",Fu,[...e[4]||(e[4]=[t("div",{class:"loading-spinner"},null,-1),t("p",null,"Ê≠£Âú®ËºâÂÖ•Êï∏Êìö...",-1)])])):S("",!0),s.ourData&&!s.loading?(u(),h("div",Ou,[t("h3",null,l(s.testSymbol)+" ÊäÄË°ìÊåáÊ®ôÂ∞çÊØî",1),t("div",Wu,[t("div",Vu,[e[13]||(e[13]=t("h4",null,"ÊàëÂÄëÁöÑË®àÁÆóÁµêÊûú",-1)),t("div",qu,[t("div",Bu,[e[5]||(e[5]=t("strong",null,"SMA(50):",-1)),_(" "+l(((r=s.ourData.sma50)==null?void 0:r.value)||"N/A")+" ",1),t("span",{class:v(["signal",n.getSignalClass((d=s.ourData.sma50)==null?void 0:d.signal)])},l((c=s.ourData.sma50)==null?void 0:c.signal),3)]),t("div",Hu,[e[6]||(e[6]=t("strong",null,"RSI(14):",-1)),_(" "+l(((g=s.ourData.rsi14)==null?void 0:g.value)||"N/A")+" ",1),t("span",{class:v(["signal",n.getSignalClass((y=s.ourData.rsi14)==null?void 0:y.signal)])},l((p=s.ourData.rsi14)==null?void 0:p.signal),3)]),t("div",zu,[e[7]||(e[7]=t("strong",null,"MACD:",-1)),_(" "+l(((k=s.ourData.macd)==null?void 0:k.value)||"N/A")+" ",1),t("span",{class:v(["signal",n.getSignalClass((D=s.ourData.macd)==null?void 0:D.signal)])},l((C=s.ourData.macd)==null?void 0:C.signal),3)])]),t("div",Gu,[e[12]||(e[12]=t("h5",null,"Ë™øË©¶‰ø°ÊÅØ",-1)),t("p",null,[e[8]||(e[8]=t("strong",null,"Êï∏ÊìöÈªû:",-1)),_(" "+l(s.ourData.dataPoints),1)]),t("p",null,[e[9]||(e[9]=t("strong",null,"ÂÉπÊ†ºÁØÑÂúç:",-1)),_(" $"+l((A=s.ourData.priceRange)==null?void 0:A.min)+" - $"+l((b=s.ourData.priceRange)==null?void 0:b.max),1)]),t("p",null,[e[10]||(e[10]=t("strong",null,"ÊúÄÊñ∞ÂÉπÊ†º:",-1)),_(" $"+l((F=s.ourData.priceRange)==null?void 0:F.latest),1)]),t("p",null,[e[11]||(e[11]=t("strong",null,"Áï∂ÂâçÂÉπÊ†º:",-1)),_(" $"+l((M=s.ourData.sma50)==null?void 0:M.currentPrice),1)])])]),t("div",ju,[e[14]||(e[14]=t("h4",null,"TradingView ÊäÄË°ìÂàÜÊûê",-1)),t("div",Qu,[t("div",{class:"tradingview-widget",id:`tradingview-widget-${s.testSymbol}`},null,8,Xu)])])]),t("div",Ku,[e[25]||(e[25]=t("h4",null,"Ë©≥Á¥∞Êï∏ÊìöÂ∞çÊØî",-1)),t("div",Yu,[t("table",null,[e[24]||(e[24]=t("thead",null,[t("tr",null,[t("th",null,"ÊåáÊ®ô"),t("th",null,"ÊàëÂÄëÁöÑÁµêÊûú"),t("th",null,"TradingView"),t("th",null,"Â∑ÆÁï∞"),t("th",null,"ÁãÄÊÖã")])],-1)),t("tbody",null,[t("tr",null,[e[15]||(e[15]=t("td",null,"SMA(50)",-1)),t("td",null,"$"+l(((O=s.ourData.sma50)==null?void 0:O.value)||"N/A"),1),e[16]||(e[16]=t("td",null,"Ë´ãÊü•ÁúãÂè≥ÂÅ¥ Widget",-1)),e[17]||(e[17]=t("td",null,"-",-1)),t("td",null,l((f=s.ourData.sma50)==null?void 0:f.signal),1)]),t("tr",null,[e[18]||(e[18]=t("td",null,"RSI(14)",-1)),t("td",null,l(((W=s.ourData.rsi14)==null?void 0:W.value)||"N/A"),1),e[19]||(e[19]=t("td",null,"Ë´ãÊü•ÁúãÂè≥ÂÅ¥ Widget",-1)),e[20]||(e[20]=t("td",null,"-",-1)),t("td",null,l((w=s.ourData.rsi14)==null?void 0:w.signal),1)]),t("tr",null,[e[21]||(e[21]=t("td",null,"MACD",-1)),t("td",null,l(((I=s.ourData.macd)==null?void 0:I.value)||"N/A"),1),e[22]||(e[22]=t("td",null,"Ë´ãÊü•ÁúãÂè≥ÂÅ¥ Widget",-1)),e[23]||(e[23]=t("td",null,"-",-1)),t("td",null,l((m=s.ourData.macd)==null?void 0:m.signal),1)])])])])])])):S("",!0)])}const Zu=P(Lu,[["render",Ju],["__scopeId","data-v-933bb253"]]),eh={name:"MetadataServiceTest",data(){return{useDynamicAPI:!0,loading:!1,loadingMessage:"",error:null,successMessage:null,testSymbol:"AAPL",testResults:[],comparisonResults:[],cacheStats:null,testSymbols:["AAPL","MSFT","GOOGL","TSLA","NVDA","META","AMZN","NFLX","ASTS","RIVN"]}},async mounted(){await this.updateCacheStats()},methods:{async switchMode(){try{re.setUseDynamicAPI(this.useDynamicAPI),await this.updateCacheStats(),this.successMessage=`Â∑≤ÂàáÊèõÂà∞${this.useDynamicAPI?"ÂãïÊÖã API":"ÈùúÊÖãÊñá‰ª∂"}Ê®°Âºè`,setTimeout(()=>{this.successMessage=null},3e3)}catch(i){this.error=`ÂàáÊèõÊ®°ÂºèÂ§±Êïó: ${i.message}`,setTimeout(()=>{this.error=null},5e3)}},async testSingleSymbol(){if(!this.testSymbol.trim()){this.error="Ë´ãËº∏ÂÖ•ËÇ°Á•®‰ª£Á¢º",setTimeout(()=>{this.error=null},3e3);return}this.loading=!0,this.loadingMessage=`Ê≠£Âú®Áç≤Âèñ ${this.testSymbol} ÁöÑÂÖÉÊï∏Êìö...`,this.error=null;try{const i=Date.now(),e=await re.getSymbolMetadata(this.testSymbol.toUpperCase()),a=Date.now()-i,o={...e,duration:a,timestamp:new Date().toISOString()};this.testResults=[o,...this.testResults.filter(s=>s.symbol!==o.symbol)],this.successMessage=`ÊàêÂäüÁç≤Âèñ ${o.symbol} ÁöÑÂÖÉÊï∏Êìö (${a}ms)`,setTimeout(()=>{this.successMessage=null},3e3),await this.updateCacheStats()}catch(i){this.error=`Áç≤ÂèñÂÖÉÊï∏ÊìöÂ§±Êïó: ${i.message}`,setTimeout(()=>{this.error=null},5e3)}finally{this.loading=!1,this.loadingMessage=""}},async testBatchSymbols(){this.loading=!0,this.loadingMessage=`Ê≠£Âú®ÊâπÈáèÁç≤Âèñ ${this.testSymbols.length} ÂÄãËÇ°Á•®ÁöÑÂÖÉÊï∏Êìö...`,this.error=null;try{const i=Date.now(),e=await re.getBatchMetadata(this.testSymbols),a=Date.now()-i,o=[];for(const[s,n]of e)o.push({...n,duration:a/e.size,timestamp:new Date().toISOString()});this.testResults=o,this.successMessage=`ÊàêÂäüÊâπÈáèÁç≤Âèñ ${o.length} ÂÄãËÇ°Á•®ÁöÑÂÖÉÊï∏Êìö (${a}ms)`,setTimeout(()=>{this.successMessage=null},3e3),await this.updateCacheStats()}catch(i){this.error=`ÊâπÈáèÁç≤ÂèñÂ§±Êïó: ${i.message}`,setTimeout(()=>{this.error=null},5e3)}finally{this.loading=!1,this.loadingMessage=""}},async clearCache(){this.loading=!0,this.loadingMessage="Ê≠£Âú®Ê∏ÖÈô§Á∑©Â≠ò...";try{re.clearCache(),await this.updateCacheStats(),this.successMessage="Á∑©Â≠òÂ∑≤Ê∏ÖÈô§",setTimeout(()=>{this.successMessage=null},3e3)}catch(i){this.error=`Ê∏ÖÈô§Á∑©Â≠òÂ§±Êïó: ${i.message}`,setTimeout(()=>{this.error=null},5e3)}finally{this.loading=!1,this.loadingMessage=""}},async warmupCache(){this.loading=!0,this.loadingMessage="Ê≠£Âú®È†êÁÜ±Á∑©Â≠ò...";try{const i=await re.warmupCache(this.testSymbols);await this.updateCacheStats(),this.successMessage=`Á∑©Â≠òÈ†êÁÜ±ÂÆåÊàê: ${i.symbolsProcessed} ÂÄãËÇ°Á•®, ${i.duration}ms`,setTimeout(()=>{this.successMessage=null},3e3)}catch(i){this.error=`È†êÁÜ±Á∑©Â≠òÂ§±Êïó: ${i.message}`,setTimeout(()=>{this.error=null},5e3)}finally{this.loading=!1,this.loadingMessage=""}},async updateCacheStats(){try{this.cacheStats=re.getCacheStats()}catch(i){console.warn("Failed to get cache stats:",i)}},getResultCardClass(i){return i.confidence>=.9?"high-confidence":i.confidence>=.7?"medium-confidence":i.confidence>=.5?"low-confidence":"no-confidence"},getConfidenceBadgeClass(i){return i>=.9?"high":i>=.7?"medium":i>=.5?"low":"none"},formatTimestamp(i){return i?new Date(i).toLocaleString("zh-TW"):"N/A"}}},th={class:"metadata-test-container"},sh={class:"control-panel"},ah={class:"mode-selector"},nh={class:"test-controls"},ih=["disabled"],oh=["disabled"],rh=["disabled"],lh=["disabled"],ch={class:"symbol-input"},dh={key:0,class:"status-panel"},uh={key:0,class:"loading"},hh={key:1,class:"error"},gh={key:2,class:"success"},mh={key:1,class:"cache-stats"},fh={class:"stats-grid"},ph={class:"stat-item"},yh={class:"stat-item"},vh={key:0,class:"stat-item"},wh={key:2,class:"results-section"},Sh={class:"results-grid"},bh={class:"result-header"},_h={class:"result-content"},kh={class:"metadata-row"},Ch={class:"metadata-row"},Th={class:"metadata-row"},Dh={key:0,class:"metadata-row"},Ah={key:1,class:"metadata-row"},Ih={class:"result-footer"},xh={class:"source-info"},Mh={class:"timestamp"},Nh={key:3,class:"comparison-section"},Ph={class:"comparison-table"};function Lh(i,e,a,o,s,n){return u(),h("div",th,[e[25]||(e[25]=t("div",{class:"header"},[t("h1",null,"ÂÖÉÊï∏ÊìöÊúçÂãôÊ∏¨Ë©¶"),t("p",null,"Ê∏¨Ë©¶ÂãïÊÖã Yahoo Finance API vs ÈùúÊÖãÊñá‰ª∂ÁöÑ sector/industry Êï∏Êìö")],-1)),t("div",sh,[t("div",ah,[t("label",null,[q(t("input",{type:"radio",value:!0,"onUpdate:modelValue":e[0]||(e[0]=r=>s.useDynamicAPI=r),onChange:e[1]||(e[1]=(...r)=>n.switchMode&&n.switchMode(...r))},null,544),[[Ot,s.useDynamicAPI]]),e[10]||(e[10]=_(" ÂãïÊÖã API (Yahoo Finance) ",-1))]),t("label",null,[q(t("input",{type:"radio",value:!1,"onUpdate:modelValue":e[2]||(e[2]=r=>s.useDynamicAPI=r),onChange:e[3]||(e[3]=(...r)=>n.switchMode&&n.switchMode(...r))},null,544),[[Ot,s.useDynamicAPI]]),e[11]||(e[11]=_(" ÈùúÊÖãÊñá‰ª∂ (symbols_metadata.json) ",-1))])]),t("div",nh,[t("button",{onClick:e[4]||(e[4]=(...r)=>n.testSingleSymbol&&n.testSingleSymbol(...r)),disabled:s.loading}," Ê∏¨Ë©¶ÂñÆÂÄãËÇ°Á•® ",8,ih),t("button",{onClick:e[5]||(e[5]=(...r)=>n.testBatchSymbols&&n.testBatchSymbols(...r)),disabled:s.loading}," ÊâπÈáèÊ∏¨Ë©¶ ",8,oh),t("button",{onClick:e[6]||(e[6]=(...r)=>n.clearCache&&n.clearCache(...r)),disabled:s.loading}," Ê∏ÖÈô§Á∑©Â≠ò ",8,rh),t("button",{onClick:e[7]||(e[7]=(...r)=>n.warmupCache&&n.warmupCache(...r)),disabled:s.loading}," È†êÁÜ±Á∑©Â≠ò ",8,lh)]),t("div",ch,[q(t("input",{"onUpdate:modelValue":e[8]||(e[8]=r=>s.testSymbol=r),placeholder:"Ëº∏ÂÖ•ËÇ°Á•®‰ª£Á¢º (‰æãÂ¶Ç: AAPL)",onKeyup:e[9]||(e[9]=Ye((...r)=>n.testSingleSymbol&&n.testSingleSymbol(...r),["enter"]))},null,544),[[ne,s.testSymbol]])])]),s.loading||s.error||s.successMessage?(u(),h("div",dh,[s.loading?(u(),h("div",uh,[e[12]||(e[12]=t("span",{class:"spinner"},null,-1)),_(" "+l(s.loadingMessage),1)])):S("",!0),s.error?(u(),h("div",hh," ‚ùå "+l(s.error),1)):S("",!0),s.successMessage?(u(),h("div",gh," ‚úÖ "+l(s.successMessage),1)):S("",!0)])):S("",!0),s.cacheStats?(u(),h("div",mh,[e[16]||(e[16]=t("h3",null,"Á∑©Â≠òÁµ±Ë®à",-1)),t("div",fh,[t("div",ph,[e[13]||(e[13]=t("label",null,"Ê®°Âºè:",-1)),t("span",null,l(s.cacheStats.mode==="dynamic"?"ÂãïÊÖã API":"ÈùúÊÖãÊñá‰ª∂"),1)]),t("div",yh,[e[14]||(e[14]=t("label",null,"Á∑©Â≠òÊ¢ùÁõÆ:",-1)),t("span",null,l(s.cacheStats.totalCached||0),1)]),s.cacheStats.mode==="static"?(u(),h("div",vh,[e[15]||(e[15]=t("label",null,"ÂÖÉÊï∏ÊìöÂ∑≤ËºâÂÖ•:",-1)),t("span",null,l(s.cacheStats.metadataLoaded?"ÊòØ":"Âê¶"),1)])):S("",!0)])])):S("",!0),s.testResults.length>0?(u(),h("div",wh,[e[22]||(e[22]=t("h3",null,"Ê∏¨Ë©¶ÁµêÊûú",-1)),t("div",Sh,[(u(!0),h($,null,U(s.testResults,r=>(u(),h("div",{key:r.symbol,class:v(["result-card",n.getResultCardClass(r)])},[t("div",bh,[t("h4",null,l(r.symbol),1),t("span",{class:v(["confidence-badge",n.getConfidenceBadgeClass(r.confidence)])},l((r.confidence*100).toFixed(0))+"% ",3)]),t("div",_h,[t("div",kh,[e[17]||(e[17]=t("label",null,"Sector:",-1)),t("span",null,l(r.sector),1)]),t("div",Ch,[e[18]||(e[18]=t("label",null,"Industry:",-1)),t("span",null,l(r.industry),1)]),t("div",Th,[e[19]||(e[19]=t("label",null,"Exchange:",-1)),t("span",null,l(r.exchange),1)]),r.marketCapFormatted?(u(),h("div",Dh,[e[20]||(e[20]=t("label",null,"Market Cap:",-1)),t("span",null,l(r.marketCapFormatted),1)])):S("",!0),r.country?(u(),h("div",Ah,[e[21]||(e[21]=t("label",null,"Country:",-1)),t("span",null,l(r.country),1)])):S("",!0)]),t("div",Ih,[t("div",xh,[t("small",null,l(r.source),1)]),t("div",Mh,[t("small",null,l(n.formatTimestamp(r.lastUpdated)),1)])])],2))),128))])])):S("",!0),s.comparisonResults.length>0?(u(),h("div",Nh,[e[24]||(e[24]=t("h3",null,"ÂãïÊÖã vs ÈùúÊÖãÊØîËºÉ",-1)),t("div",Ph,[t("table",null,[e[23]||(e[23]=t("thead",null,[t("tr",null,[t("th",null,"Symbol"),t("th",null,"ÂãïÊÖã API - Sector"),t("th",null,"ÈùúÊÖãÊñá‰ª∂ - Sector"),t("th",null,"ÂãïÊÖã API - Industry"),t("th",null,"ÈùúÊÖãÊñá‰ª∂ - Industry"),t("th",null,"ÂåπÈÖçÂ∫¶")])],-1)),t("tbody",null,[(u(!0),h($,null,U(s.comparisonResults,r=>(u(),h("tr",{key:r.symbol},[t("td",null,l(r.symbol),1),t("td",null,l(r.dynamic.sector),1),t("td",null,l(r.static.sector),1),t("td",null,l(r.dynamic.industry),1),t("td",null,l(r.static.industry),1),t("td",null,[t("span",{class:v(["match-indicator",r.matchClass])},l(r.matchScore)+"% ",3)])]))),128))])])])])):S("",!0)])}const Rh=P(eh,[["render",Lh],["__scopeId","data-v-6d662d12"]]),Eh={name:"ProxyDiagnosticTest",data(){var i;return{testSymbol:"AAPL",testing:!1,currentTest:"",diagnosticComplete:!1,proxyResults:[],directApiResults:{chart:null,quoteSummary:null},networkInfo:{userAgent:navigator.userAgent,language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,connection:((i=navigator.connection)==null?void 0:i.effectiveType)||"unknown",online:navigator.onLine},corsProxies:[{name:"CORS.SH",url:"https://cors.sh/",description:"Â∞àÊ•≠ÁöÑ CORS ‰ª£ÁêÜÊúçÂãôÔºåÁõ∏Â∞çÁ©©ÂÆö",type:"direct"},{name:"Proxy CORS (isomorphic-git)",url:"https://proxy-cors.isomorphic-git.org/",description:"Áî± isomorphic-git ÂúòÈöäÁ∂≠Ë≠∑",type:"direct"},{name:"ThingProxy",url:"https://thingproxy.freeboard.io/fetch/",description:"Áî± Freeboard.io Êèê‰æõÁöÑ‰ª£ÁêÜÊúçÂãô",type:"direct"},{name:"CORS Proxy (HTMLDriven)",url:"https://cors-proxy.htmldriven.com/?url=",description:"Á∞°ÂñÆÊòìÁî®ÁöÑ‰ª£ÁêÜÊúçÂãô",type:"query"},{name:"AllOrigins",url:"https://api.allorigins.win/raw?url=",description:"ÂÖçË≤ª CORS ‰ª£ÁêÜÊúçÂãô (ÂèØËÉΩÊúâ CORS ÈôêÂà∂)",type:"query"},{name:"CorsProxy.io",url:"https://corsproxy.io/?",description:"ÈñãÊ∫ê CORS ‰ª£ÁêÜ (ÂèØËÉΩÈúÄË¶ÅË™çË≠â)",type:"query"},{name:"CORS Anywhere",url:"https://cors-anywhere.herokuapp.com/",description:"Heroku Ë®óÁÆ°ÁöÑ CORS ‰ª£ÁêÜ (Â∑≤ÈôêÂà∂Ë®™Âïè)",type:"direct"}]}},computed:{workingProxies(){return this.proxyResults.filter(i=>i.status==="SUCCESS")},failedProxies(){return this.proxyResults.filter(i=>i.status==="FAILED")},fastestProxy(){const i=this.workingProxies;return i.length===0?null:i.reduce((e,a)=>a.responseTime<e.responseTime?a:e)}},methods:{async runFullDiagnostic(){this.testing=!0,this.diagnosticComplete=!1,this.proxyResults=[],this.directApiResults={chart:null,quoteSummary:null};try{await this.testAllProxies(),await this.testDirectAPI(),this.diagnosticComplete=!0}catch(i){console.error("Ë®∫Êñ∑ÈÅéÁ®ãÂá∫ÈåØ:",i)}finally{this.testing=!1,this.currentTest=""}},async testAllProxies(){for(let i=0;i<this.corsProxies.length;i++){const e=this.corsProxies[i];this.currentTest=`${e.name} ‰ª£ÁêÜÊúçÂãô`;const a=await this.testSingleProxy(e,i);this.proxyResults.push(a),i<this.corsProxies.length-1&&await this.delay(1e3)}},async testSingleProxy(i,e){var s,n;const a=Date.now(),o={index:e,name:i.name,url:i.url,type:i.type,status:"TESTING",responseTime:0,httpStatus:null,error:null,errorType:null,data:null,dataPoints:0,priceRange:null};try{const r=`https://query1.finance.yahoo.com/v8/finance/chart/${this.testSymbol}?interval=1d&range=1mo`;let d;i.type==="query"?d=`${i.url}${encodeURIComponent(r)}`:d=`${i.url}${r}`,console.log(`Testing ${i.name}:`,d.substring(0,120)+"...");const c=await fetch(d,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"}});if(o.responseTime=Date.now()-a,o.httpStatus=c.status,!c.ok)throw new Error(`HTTP ${c.status}: ${c.statusText}`);const g=await c.json();if(!g.chart||!g.chart.result||g.chart.result.length===0)throw new Error("Invalid data structure - no chart results");const p=(n=(s=g.chart.result[0].indicators)==null?void 0:s.quote)==null?void 0:n[0];if(!p||!p.close)throw new Error("Invalid data structure - no price data");const k=p.close.filter(D=>D!==null);o.status="SUCCESS",o.data=g,o.dataPoints=k.length,o.priceRange={min:Math.min(...k).toFixed(2),max:Math.max(...k).toFixed(2)},console.log(`‚úÖ ${i.name} ÊàêÂäü:`,{responseTime:o.responseTime,dataPoints:o.dataPoints,priceRange:o.priceRange})}catch(r){o.status="FAILED",o.responseTime=Date.now()-a,o.error=r.message,r.message.includes("CORS")||r.message.includes("cors")?o.errorType="CORS_ERROR":r.message.includes("401")?o.errorType="UNAUTHORIZED":r.message.includes("403")?o.errorType="FORBIDDEN":r.message.includes("404")?o.errorType="NOT_FOUND":r.message.includes("429")?o.errorType="RATE_LIMITED":r.message.includes("Failed to fetch")||r.message.includes("fetch")?o.errorType="NETWORK_ERROR":r.message.includes("Invalid data structure")?o.errorType="DATA_FORMAT_ERROR":r.message.includes("timeout")?o.errorType="TIMEOUT_ERROR":o.errorType="UNKNOWN_ERROR",console.log(`‚ùå ${i.name} Â§±Êïó:`,{errorType:o.errorType,error:o.error,responseTime:o.responseTime})}return o},async testDirectAPI(){var i,e,a,o,s,n,r,d,c,g,y;this.currentTest="Yahoo Finance API Áõ¥Êé•Ë®™Âïè";try{const p=`https://query1.finance.yahoo.com/v8/finance/chart/${this.testSymbol}?interval=1d&range=1mo`,k=await fetch(p);if(k.ok){const C=((d=(r=(n=(s=(o=(a=(e=(i=(await k.json()).chart)==null?void 0:i.result)==null?void 0:e[0])==null?void 0:a.indicators)==null?void 0:o.quote)==null?void 0:s[0])==null?void 0:n.close)==null?void 0:r.filter(A=>A!==null))==null?void 0:d.length)||0;this.directApiResults.chart={status:"SUCCESS",dataPoints:C}}else throw new Error(`HTTP ${k.status}`)}catch(p){this.directApiResults.chart={status:"FAILED",error:p.message}}try{const p=`https://query1.finance.yahoo.com/v10/finance/quoteSummary/${this.testSymbol}?modules=summaryProfile`,k=await fetch(p);if(k.ok){const C=(y=(g=(c=(await k.json()).quoteSummary)==null?void 0:c.result)==null?void 0:g[0])==null?void 0:y.summaryProfile;this.directApiResults.quoteSummary={status:"SUCCESS",sector:C==null?void 0:C.sector,industry:C==null?void 0:C.industry}}else throw new Error(`HTTP ${k.status}`)}catch(p){this.directApiResults.quoteSummary={status:"FAILED",error:p.message}}},getStatusClass(i){switch(i){case"SUCCESS":return"success";case"FAILED":return"failed";case"TESTING":return"testing";default:return"unknown"}},delay(i){return new Promise(e=>setTimeout(e,i))}}},$h={class:"proxy-diagnostic"},Uh={class:"test-controls"},Fh={class:"symbol-input"},Oh=["disabled"],Wh={key:0,class:"loading"},Vh={class:"proxy-results"},qh={class:"proxy-grid"},Bh={class:"proxy-header"},Hh={class:"proxy-details"},zh={key:0,class:"error-details"},Gh={key:1,class:"success-details"},jh={class:"direct-api-test"},Qh={class:"api-test-grid"},Xh={class:"api-test-card"},Kh={key:0},Yh={key:1},Jh={class:"api-test-card"},Zh={key:0},eg={key:1},tg={key:2},sg={class:"network-info"},ag={class:"network-details"},ng={key:1,class:"recommendations"},ig={class:"recommendation-content"},og={key:0,class:"success-recommendation"},rg={key:1,class:"warning-recommendation"},lg={class:"solution-suggestions"},cg={key:0,class:"critical-suggestions"},dg={key:1,class:"optimization-suggestions"};function ug(i,e,a,o,s,n){var r,d,c,g,y,p,k,D,C,A;return u(),h("div",$h,[e[35]||(e[35]=t("div",{class:"test-header"},[t("h2",null,"üîç Yahoo Finance API Proxy Ë®∫Êñ∑Â∑•ÂÖ∑"),t("p",null,"Ê∏¨Ë©¶ÂêÑÂÄã CORS ‰ª£ÁêÜÊúçÂãôÁöÑÂèØÁî®ÊÄßÂíå Yahoo Finance API ÁöÑÁãÄÊÖã")],-1)),t("div",Uh,[t("div",Fh,[e[2]||(e[2]=t("label",null,"Ê∏¨Ë©¶ËÇ°Á•®:",-1)),q(t("input",{"onUpdate:modelValue":e[0]||(e[0]=b=>s.testSymbol=b),placeholder:"AAPL"},null,512),[[ne,s.testSymbol]]),t("button",{onClick:e[1]||(e[1]=(...b)=>n.runFullDiagnostic&&n.runFullDiagnostic(...b)),disabled:s.testing},l(s.testing?"Ê∏¨Ë©¶‰∏≠...":"ÈñãÂßãÂÆåÊï¥Ë®∫Êñ∑"),9,Oh)])]),s.testing?(u(),h("div",Wh,[e[3]||(e[3]=t("div",{class:"spinner"},null,-1)),t("p",null,"Ê≠£Âú®Ê∏¨Ë©¶ "+l(s.currentTest)+"...",1)])):S("",!0),t("div",Vh,[e[11]||(e[11]=t("h3",null,"üì° CORS Proxy ÊúçÂãôÁãÄÊÖã",-1)),t("div",qh,[(u(!0),h($,null,U(s.proxyResults,(b,F)=>{var M,O;return u(),h("div",{key:F,class:v(["proxy-card",n.getStatusClass(b.status)])},[t("div",Bh,[t("h4",null,"Proxy "+l(F+1)+": "+l(b.name),1),t("span",{class:v(["status-badge",n.getStatusClass(b.status)])},l(b.status),3)]),t("div",Hh,[t("p",null,[e[4]||(e[4]=t("strong",null,"URL:",-1)),_(" "+l(b.url),1)]),t("p",null,[e[5]||(e[5]=t("strong",null,"ÈüøÊáâÊôÇÈñì:",-1)),_(" "+l(b.responseTime)+"ms",1)]),t("p",null,[e[6]||(e[6]=t("strong",null,"HTTP ÁãÄÊÖã:",-1)),_(" "+l(b.httpStatus),1)]),b.error?(u(),h("div",zh,[t("p",null,[e[7]||(e[7]=t("strong",null,"ÈåØË™§È°ûÂûã:",-1)),_(" "+l(b.errorType),1)]),t("p",null,[e[8]||(e[8]=t("strong",null,"ÈåØË™§Ë®äÊÅØ:",-1)),_(" "+l(b.error),1)])])):S("",!0),b.data?(u(),h("div",Gh,[t("p",null,[e[9]||(e[9]=t("strong",null,"Êï∏ÊìöÈªû:",-1)),_(" "+l(b.dataPoints),1)]),t("p",null,[e[10]||(e[10]=t("strong",null,"ÂÉπÊ†ºÁØÑÂúç:",-1)),_(" $"+l((M=b.priceRange)==null?void 0:M.min)+" - $"+l((O=b.priceRange)==null?void 0:O.max),1)])])):S("",!0)])],2)}),128))])]),t("div",jh,[e[21]||(e[21]=t("h3",null,"üéØ Yahoo Finance API Áõ¥Êé•Ê∏¨Ë©¶",-1)),t("div",Qh,[t("div",Xh,[e[15]||(e[15]=t("h4",null,"Chart API (ÊäÄË°ìÊåáÊ®ôÊï∏Êìö)",-1)),t("div",{class:v(["test-result",n.getStatusClass((r=s.directApiResults.chart)==null?void 0:r.status)])},[t("p",null,[e[12]||(e[12]=t("strong",null,"ÁãÄÊÖã:",-1)),_(" "+l(((d=s.directApiResults.chart)==null?void 0:d.status)||"Êú™Ê∏¨Ë©¶"),1)]),(c=s.directApiResults.chart)!=null&&c.error?(u(),h("p",Kh,[e[13]||(e[13]=t("strong",null,"ÈåØË™§:",-1)),_(" "+l(s.directApiResults.chart.error),1)])):S("",!0),(g=s.directApiResults.chart)!=null&&g.dataPoints?(u(),h("p",Yh,[e[14]||(e[14]=t("strong",null,"Êï∏ÊìöÈªû:",-1)),_(" "+l(s.directApiResults.chart.dataPoints),1)])):S("",!0)],2)]),t("div",Jh,[e[20]||(e[20]=t("h4",null,"Quote Summary API (ËÇ°Á•®Ë≥áË®ä)",-1)),t("div",{class:v(["test-result",n.getStatusClass((y=s.directApiResults.quoteSummary)==null?void 0:y.status)])},[t("p",null,[e[16]||(e[16]=t("strong",null,"ÁãÄÊÖã:",-1)),_(" "+l(((p=s.directApiResults.quoteSummary)==null?void 0:p.status)||"Êú™Ê∏¨Ë©¶"),1)]),(k=s.directApiResults.quoteSummary)!=null&&k.error?(u(),h("p",Zh,[e[17]||(e[17]=t("strong",null,"ÈåØË™§:",-1)),_(" "+l(s.directApiResults.quoteSummary.error),1)])):S("",!0),(D=s.directApiResults.quoteSummary)!=null&&D.sector?(u(),h("p",eg,[e[18]||(e[18]=t("strong",null,"Sector:",-1)),_(" "+l(s.directApiResults.quoteSummary.sector),1)])):S("",!0),(C=s.directApiResults.quoteSummary)!=null&&C.industry?(u(),h("p",tg,[e[19]||(e[19]=t("strong",null,"Industry:",-1)),_(" "+l(s.directApiResults.quoteSummary.industry),1)])):S("",!0)],2)])])]),t("div",sg,[e[27]||(e[27]=t("h3",null,"üåê Á∂≤Ë∑ØÁí∞Â¢ÉË≥áË®ä",-1)),t("div",ag,[t("p",null,[e[22]||(e[22]=t("strong",null,"Áî®Êà∂‰ª£ÁêÜ:",-1)),_(" "+l(s.networkInfo.userAgent),1)]),t("p",null,[e[23]||(e[23]=t("strong",null,"Ë™ûË®Ä:",-1)),_(" "+l(s.networkInfo.language),1)]),t("p",null,[e[24]||(e[24]=t("strong",null,"ÊôÇÂçÄ:",-1)),_(" "+l(s.networkInfo.timezone),1)]),t("p",null,[e[25]||(e[25]=t("strong",null,"ÈÄ£Á∑öÈ°ûÂûã:",-1)),_(" "+l(s.networkInfo.connection),1)]),t("p",null,[e[26]||(e[26]=t("strong",null,"ÊòØÂê¶Âú®Á∑ö:",-1)),_(" "+l(s.networkInfo.online?"ÊòØ":"Âê¶"),1)])])]),s.diagnosticComplete?(u(),h("div",ng,[e[34]||(e[34]=t("h3",null,"üí° Ë®∫Êñ∑ÁµêÊûúÂíåÂª∫Ë≠∞",-1)),t("div",ig,[n.workingProxies.length>0?(u(),h("div",og,[t("h4",null,"‚úÖ ÂèØÁî®ÁöÑ‰ª£ÁêÜÊúçÂãô ("+l(n.workingProxies.length)+"/"+l(s.proxyResults.length)+")",1),t("ul",null,[(u(!0),h($,null,U(n.workingProxies,b=>(u(),h("li",{key:b.index},l(b.name)+" - ÈüøÊáâÊôÇÈñì: "+l(b.responseTime)+"ms ",1))),128))])])):S("",!0),n.failedProxies.length>0?(u(),h("div",rg,[t("h4",null,"‚ùå Â§±ÊïóÁöÑ‰ª£ÁêÜÊúçÂãô ("+l(n.failedProxies.length)+"/"+l(s.proxyResults.length)+")",1),t("ul",null,[(u(!0),h($,null,U(n.failedProxies,b=>(u(),h("li",{key:b.index},l(b.name)+" - "+l(b.errorType)+": "+l(b.error),1))),128))])])):S("",!0),t("div",lg,[e[33]||(e[33]=t("h4",null,"üîß Âª∫Ë≠∞Ëß£Ê±∫ÊñπÊ°à",-1)),n.workingProxies.length===0?(u(),h("div",cg,[...e[28]||(e[28]=[X("<p data-v-f967bfd3><strong data-v-f967bfd3>ÊâÄÊúâ‰ª£ÁêÜÈÉΩÂ§±Êïó‰∫ÜÔºåÂèØËÉΩÁöÑÂéüÂõ†ÂíåËß£Ê±∫ÊñπÊ°à:</strong></p><ul data-v-f967bfd3><li data-v-f967bfd3><strong data-v-f967bfd3>CORS ÊîøÁ≠ñ:</strong> ÁÄèË¶ΩÂô®ÈòªÊ≠¢Ë∑®ÂüüË´ãÊ±ÇÔºåËÄÉÊÖÆ‰ΩøÁî®ÊúçÂãôÁ´Ø‰ª£ÁêÜ</li><li data-v-f967bfd3><strong data-v-f967bfd3>‰ª£ÁêÜÊúçÂãôÈôêÂà∂:</strong> ÂÖçË≤ª‰ª£ÁêÜÊúçÂãôÂèØËÉΩÊúâ‰ΩøÁî®ÈôêÂà∂ÊàñÈúÄË¶ÅË™çË≠â</li><li data-v-f967bfd3><strong data-v-f967bfd3>Yahoo Finance API ËÆäÊõ¥:</strong> API Á´ØÈªûÊàñÊ†ºÂºèÂèØËÉΩÂ∑≤ËÆäÊõ¥</li><li data-v-f967bfd3><strong data-v-f967bfd3>Á∂≤Ë∑ØÈò≤ÁÅ´ÁâÜ:</strong> ÂÖ¨Âè∏ÊàñÂ≠∏Ê†°Á∂≤Ë∑ØÂèØËÉΩÈòªÊ≠¢Êüê‰∫õË´ãÊ±Ç</li></ul>",2)])])):(u(),h("div",dg,[e[32]||(e[32]=t("p",null,[t("strong",null,"ÂÑ™ÂåñÂª∫Ë≠∞:")],-1)),t("ul",null,[t("li",null,"ÂÑ™ÂÖà‰ΩøÁî®ÈüøÊáâÊôÇÈñìÊúÄÂø´ÁöÑ‰ª£ÁêÜ: "+l((A=n.fastestProxy)==null?void 0:A.name),1),e[29]||(e[29]=t("li",null,"ÂØ¶ÊñΩ‰ª£ÁêÜËº™ÊèõÊ©üÂà∂‰ª•ÂàÜÊï£Ë≤†Ëºâ",-1)),e[30]||(e[30]=t("li",null,"Â¢ûÂä†ÈåØË™§ÈáçË©¶ÈÇèËºØ",-1)),e[31]||(e[31]=t("li",null,"ËÄÉÊÖÆÁ∑©Â≠òÊ©üÂà∂Ê∏õÂ∞ë API Ë™øÁî®",-1))])]))])])])):S("",!0)])}const hg=P(Eh,[["render",ug],["__scopeId","data-v-f967bfd3"]]),gg={name:"TechnicalIndicatorsManager",data(){return{loading:!1,testing:!1,showPreferences:!1,dataSourceStatus:null,testResults:[],preferences:{preferPrecomputed:!0,fallbackToRealtime:!0,maxAgeHours:24}}},async mounted(){await this.refreshStatus()},methods:{async refreshStatus(){this.loading=!0;try{this.dataSourceStatus=await ce.getDataSourceStatus()}catch(i){console.error("Failed to refresh status:",i),alert("Âà∑Êñ∞ÁãÄÊÖãÂ§±Êïó: "+i.message)}finally{this.loading=!1}},async clearAllCaches(){if(confirm("Á¢∫ÂÆöË¶ÅÊ∏ÖÈô§ÊâÄÊúâÁ∑©Â≠òÂóéÔºüÈÄôÂ∞áÂ∞éËá¥‰∏ãÊ¨°ËºâÂÖ•ÊôÇÈñìËºÉÈï∑„ÄÇ"))try{alert("ÊâÄÊúâÁ∑©Â≠òÂ∑≤Ê∏ÖÈô§"),await this.refreshStatus()}catch(i){alert("Ê∏ÖÈô§Á∑©Â≠òÂ§±Êïó: "+i.message)}},async testPrecomputed(){this.testing=!0,this.testResults=[];const i=["AAPL","TSLA","MSFT"];try{for(const e of i){const a=Date.now();try{const o=await ce.getTechnicalIndicators(e),s=Date.now()-a;this.testResults.push({symbol:e,success:!0,data:o,source:o.source,loadTime:`${s}ms`})}catch(o){this.testResults.push({symbol:e,success:!1,error:o.message,loadTime:`${Date.now()-a}ms`})}}}finally{this.testing=!1}},updatePreferences(){const i=this.preferences.maxAgeHours*60*60*1e3;ce.setPreferences({preferPrecomputed:this.preferences.preferPrecomputed,fallbackToRealtime:this.preferences.fallbackToRealtime,maxPrecomputedAge:i}),console.log("Preferences updated:",this.preferences)},formatDate(i){return i?new Date(i).toLocaleString("zh-TW"):"N/A"},formatBytes(i){if(i===0)return"0 B";const e=1024,a=["B","KB","MB"],o=Math.floor(Math.log(i)/Math.log(e));return parseFloat((i/Math.pow(e,o)).toFixed(2))+" "+a[o]}}},mg={class:"indicators-manager"},fg={class:"status-section"},pg={class:"status-grid"},yg={class:"status-header"},vg={key:0,class:"status-details"},wg={class:"status-card available"},Sg={class:"status-details"},bg={class:"status-card available"},_g={class:"status-details"},kg={class:"control-section"},Cg={class:"control-grid"},Tg=["disabled"],Dg=["disabled"],Ag={key:0,class:"preferences-section"},Ig={class:"preferences-form"},xg={class:"form-group"},Mg={class:"form-group"},Ng={class:"form-group"},Pg={key:1,class:"test-results-section"},Lg={class:"test-results"},Rg={class:"result-header"},Eg={class:"symbol"},$g={class:"source"},Ug={class:"load-time"},Fg={key:0,class:"error-message"},Og={key:1,class:"indicators-preview"},Wg={key:2,class:"symbols-section"},Vg={class:"symbols-grid"};function qg(i,e,a,o,s,n){var r,d,c,g,y,p,k,D,C,A,b,F,M,O,f,W,w,I;return u(),h("div",mg,[e[31]||(e[31]=t("div",{class:"manager-header"},[t("h2",null,"ÊäÄË°ìÊåáÊ®ôÁÆ°ÁêÜ‰∏≠ÂøÉ"),t("p",null,"Áõ£ÊéßÂíåÁÆ°ÁêÜÈ†êË®àÁÆóÊäÄË°ìÊåáÊ®ôÁ≥ªÁµ±")],-1)),t("div",fg,[e[23]||(e[23]=t("h3",null,"Êï∏ÊìöÊ∫êÁãÄÊÖã",-1)),t("div",pg,[t("div",{class:v(["status-card",{available:(d=(r=s.dataSourceStatus)==null?void 0:r.precomputed)==null?void 0:d.available}])},[t("div",yg,[e[10]||(e[10]=t("h4",null,"È†êË®àÁÆóÊï∏Êìö",-1)),t("span",{class:v(["status-badge",(g=(c=s.dataSourceStatus)==null?void 0:c.precomputed)!=null&&g.available?"success":"error"])},l((p=(y=s.dataSourceStatus)==null?void 0:y.precomputed)!=null&&p.available?"ÂèØÁî®":"‰∏çÂèØÁî®"),3)]),(D=(k=s.dataSourceStatus)==null?void 0:k.precomputed)!=null&&D.available?(u(),h("div",vg,[t("p",null,[e[11]||(e[11]=t("strong",null,"ËÇ°Á•®Êï∏Èáè:",-1)),_(" "+l(s.dataSourceStatus.precomputed.symbols.length),1)]),t("p",null,[e[12]||(e[12]=t("strong",null,"ÊàêÂäü:",-1)),_(" "+l(s.dataSourceStatus.precomputed.successful),1)]),t("p",null,[e[13]||(e[13]=t("strong",null,"Â§±Êïó:",-1)),_(" "+l(s.dataSourceStatus.precomputed.failed),1)]),t("p",null,[e[14]||(e[14]=t("strong",null,"ÊúÄÂæåÊõ¥Êñ∞:",-1)),_(" "+l(n.formatDate(s.dataSourceStatus.precomputed.lastUpdate)),1)])])):S("",!0)],2),t("div",wg,[e[18]||(e[18]=t("div",{class:"status-header"},[t("h4",null,"ÊØèÊó•Á∑©Â≠ò"),t("span",{class:"status-badge success"},"ÂèØÁî®")],-1)),t("div",Sg,[t("p",null,[e[15]||(e[15]=t("strong",null,"ÂÖßÂ≠òÁ∑©Â≠ò:",-1)),_(" "+l(((A=(C=s.dataSourceStatus)==null?void 0:C.cache)==null?void 0:A.memoryCache)||0)+" È†ÖÁõÆ",1)]),t("p",null,[e[16]||(e[16]=t("strong",null,"Êú¨Âú∞Â≠òÂÑ≤:",-1)),_(" "+l(((F=(b=s.dataSourceStatus)==null?void 0:b.cache)==null?void 0:F.localStorageCache)||0)+" È†ÖÁõÆ",1)]),t("p",null,[e[17]||(e[17]=t("strong",null,"Á∏ΩÂ§ßÂ∞è:",-1)),_(" "+l(n.formatBytes(((O=(M=s.dataSourceStatus)==null?void 0:M.cache)==null?void 0:O.totalSize)||0)),1)])])]),t("div",bg,[e[22]||(e[22]=t("div",{class:"status-header"},[t("h4",null,"ÂØ¶ÊôÇË®àÁÆó"),t("span",{class:"status-badge success"},"ÂèØÁî®")],-1)),t("div",_g,[t("p",null,[e[19]||(e[19]=t("strong",null,"‰ª£ÁêÜÊúçÂãô:",-1)),_(" "+l(((W=(f=s.dataSourceStatus)==null?void 0:f.realtime)==null?void 0:W.proxies)||0)+" ÂÄã",1)]),e[20]||(e[20]=t("p",null,[t("strong",null,"ÁãÄÊÖã:"),_(" ÂÇôÁî®ÊñπÊ°à")],-1)),e[21]||(e[21]=t("p",null,[t("strong",null,"È†êÊúüÂª∂ÈÅ≤:"),_(" 2-20Áßí")],-1))])])])]),t("div",kg,[e[24]||(e[24]=t("h3",null,"ÊéßÂà∂Èù¢Êùø",-1)),t("div",Cg,[t("button",{onClick:e[0]||(e[0]=m=>n.refreshStatus()),class:"control-btn primary",disabled:s.loading},l(s.loading?"ËºâÂÖ•‰∏≠...":"Âà∑Êñ∞ÁãÄÊÖã"),9,Tg),t("button",{onClick:e[1]||(e[1]=m=>n.clearAllCaches()),class:"control-btn warning"}," Ê∏ÖÈô§ÊâÄÊúâÁ∑©Â≠ò "),t("button",{onClick:e[2]||(e[2]=m=>n.testPrecomputed()),class:"control-btn info",disabled:s.testing},l(s.testing?"Ê∏¨Ë©¶‰∏≠...":"Ê∏¨Ë©¶È†êË®àÁÆó"),9,Dg),t("button",{onClick:e[3]||(e[3]=m=>s.showPreferences=!s.showPreferences),class:"control-btn secondary"},l(s.showPreferences?"Èö±ËóèË®≠ÂÆö":"È°ØÁ§∫Ë®≠ÂÆö"),1)])]),s.showPreferences?(u(),h("div",Ag,[e[28]||(e[28]=t("h3",null,"Á≥ªÁµ±ÂÅèÂ•ΩË®≠ÂÆö",-1)),t("div",Ig,[t("div",xg,[t("label",null,[q(t("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=m=>s.preferences.preferPrecomputed=m),onChange:e[5]||(e[5]=(...m)=>n.updatePreferences&&n.updatePreferences(...m))},null,544),[[Z,s.preferences.preferPrecomputed]]),e[25]||(e[25]=_(" ÂÑ™ÂÖà‰ΩøÁî®È†êË®àÁÆóÊï∏Êìö ",-1))])]),t("div",Mg,[t("label",null,[q(t("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=m=>s.preferences.fallbackToRealtime=m),onChange:e[7]||(e[7]=(...m)=>n.updatePreferences&&n.updatePreferences(...m))},null,544),[[Z,s.preferences.fallbackToRealtime]]),e[26]||(e[26]=_(" ÂÖÅË®±ÂõûÈÄÄÂà∞ÂØ¶ÊôÇË®àÁÆó ",-1))])]),t("div",Ng,[e[27]||(e[27]=t("label",null,"È†êË®àÁÆóÊï∏ÊìöÊúÄÂ§ßÂπ¥ÈΩ° (Â∞èÊôÇ):",-1)),q(t("input",{type:"number","onUpdate:modelValue":e[8]||(e[8]=m=>s.preferences.maxAgeHours=m),onChange:e[9]||(e[9]=(...m)=>n.updatePreferences&&n.updatePreferences(...m)),min:"1",max:"72"},null,544),[[ne,s.preferences.maxAgeHours,void 0,{number:!0}]])])])])):S("",!0),s.testResults.length>0?(u(),h("div",Pg,[e[29]||(e[29]=t("h3",null,"Ê∏¨Ë©¶ÁµêÊûú",-1)),t("div",Lg,[(u(!0),h($,null,U(s.testResults,(m,V)=>{var B,te,se;return u(),h("div",{key:V,class:v(["test-result-item",{success:m.success,error:!m.success}])},[t("div",Rg,[t("span",Eg,l(m.symbol),1),t("span",$g,l(m.source),1),t("span",Ug,l(m.loadTime),1)]),m.error?(u(),h("div",Fg,l(m.error),1)):(u(),h("div",Og,[t("span",null,"MA5: "+l(((B=m.data.ma5)==null?void 0:B.value)||"N/A"),1),t("span",null,"ADX: "+l(((te=m.data.adx14)==null?void 0:te.value)||"N/A"),1),t("span",null,"MACD: "+l(((se=m.data.macd)==null?void 0:se.signal)||"N/A"),1)]))],2)}),128))])])):S("",!0),(I=(w=s.dataSourceStatus)==null?void 0:w.precomputed)!=null&&I.available?(u(),h("div",Wg,[e[30]||(e[30]=t("h3",null,"È†êË®àÁÆóËÇ°Á•®ÂàóË°®",-1)),t("div",Vg,[(u(!0),h($,null,U(s.dataSourceStatus.precomputed.symbols,m=>(u(),h("span",{key:m,class:"symbol-tag"},l(m),1))),128))])])):S("",!0)])}const Bg=P(gg,[["render",qg],["__scopeId","data-v-f7963fc0"]]),Hg={name:"AutoUpdateMonitor",data(){return{loading:!1,status:{},cacheStats:{},logs:[],config:{technicalIndicators:{enabled:!0,intervalHours:1,marketHoursOnly:!0},metadata:{enabled:!0,intervalHours:24}},configChanged:!1,startTime:null,technicalIndicatorsLastUpdate:null,technicalIndicatorsAge:0,technicalIndicatorsSuccessRate:0,metadataLastUpdate:null,metadataAge:0,metadataSymbolCount:0,warmupInfo:{isWarming:!1,progress:0,lastWarmupTime:null,trackedSymbols:[]}}},computed:{schedulerStatus(){return this.status.isRunning?"ÈÅãË°å‰∏≠":"Â∑≤ÂÅúÊ≠¢"},schedulerStatusClass(){return this.status.isRunning?"status-success":"status-error"},schedulerButtonText(){return this.status.isRunning?"ÂÅúÊ≠¢Ë™øÂ∫¶Âô®":"ÂïüÂãïË™øÂ∫¶Âô®"},schedulerButtonClass(){return this.status.isRunning?"btn btn-danger":"btn btn-success"},technicalIndicatorsStatus(){return this.technicalIndicatorsAge<1?"ÊúÄÊñ∞":this.technicalIndicatorsAge<12?"ËºÉÊñ∞":this.technicalIndicatorsAge<24?"ÈÅéÊôÇ":"ËàäÊï∏Êìö"},technicalIndicatorsStatusClass(){return this.technicalIndicatorsAge<1?"status-success":this.technicalIndicatorsAge<12?"status-warning":"status-error"},metadataStatus(){return this.metadataAge<24?"ÊúÄÊñ∞":this.metadataAge<72?"ËºÉÊñ∞":"ÈÅéÊôÇ"},metadataStatusClass(){return this.metadataAge<24?"status-success":this.metadataAge<72?"status-warning":"status-error"},cacheStatus(){const i=this.cacheStats.totalSize||0;return i>100?"ÈúÄË¶ÅÊ∏ÖÁêÜ":i>50?"Ê≠£Â∏∏":"ËâØÂ•Ω"},warmupStatus(){return this.warmupInfo.isWarming?"È†êÁÜ±‰∏≠":this.warmupInfo.progress===100?"Â∑≤ÂÆåÊàê":this.warmupInfo.lastWarmupTime?"ÂæÖÊ©ü‰∏≠":"Êú™È†êÁÜ±"},warmupStatusClass(){return this.warmupInfo.isWarming?"status-warning":this.warmupInfo.progress===100?"status-success":this.warmupInfo.lastWarmupTime?"status-info":"status-error"}},async mounted(){await this.initializeMonitor(),this.startPeriodicRefresh()},beforeUnmount(){this.refreshInterval&&clearInterval(this.refreshInterval)},methods:{async initializeMonitor(){this.loading=!0;try{await this.refreshStatus(),await this.loadTechnicalIndicatorsStatus(),await this.loadMetadataStatus(),await this.loadWarmupStatus(),this.startTime=new Date,this.addLog("Áõ£ÊéßÈù¢ÊùøÂ∑≤ÂàùÂßãÂåñ","INFO")}catch(i){this.addLog(`ÂàùÂßãÂåñÂ§±Êïó: ${i.message}`,"ERROR")}finally{this.loading=!1}},async refreshStatus(){try{this.status=Y.getStatus(),this.cacheStats=H.getStats()}catch(i){this.addLog(`Âà∑Êñ∞ÁãÄÊÖãÂ§±Êïó: ${i.message}`,"ERROR")}},async loadTechnicalIndicatorsStatus(){try{const i=window.location.hostname==="romarin-hsieh.github.io"?"/investment-dashboard/":"/",e=await fetch(`${i}data/technical-indicators/latest_index.json`);if(e.ok){const a=await e.json();this.technicalIndicatorsLastUpdate=new Date(a.generatedAt),this.technicalIndicatorsAge=(Date.now()-this.technicalIndicatorsLastUpdate)/(1e3*60*60),this.technicalIndicatorsSuccessRate=Math.round(a.successfulSymbols/a.totalSymbols*100)}}catch(i){this.addLog(`ËºâÂÖ•ÊäÄË°ìÊåáÊ®ôÁãÄÊÖãÂ§±Êïó: ${i.message}`,"ERROR")}},async loadMetadataStatus(){try{this.metadataLastUpdate=new Date,this.metadataAge=0,this.metadataSymbolCount=24}catch(i){this.addLog(`ËºâÂÖ•ÂÖÉÊï∏ÊìöÁãÄÊÖãÂ§±Êïó: ${i.message}`,"ERROR")}},async loadWarmupStatus(){try{this.warmupInfo=ut.getWarmupStatus()}catch(i){this.addLog(`ËºâÂÖ•È†êÁÜ±ÁãÄÊÖãÂ§±Êïó: ${i.message}`,"ERROR")}},async triggerWarmup(){this.loading=!0;try{this.addLog("ÊâãÂãïËß∏ÁôºÁ∑©Â≠òÈ†êÁÜ±","INFO"),await ut.triggerManualWarmup(),this.addLog("Á∑©Â≠òÈ†êÁÜ±ÂÆåÊàê","SUCCESS"),await this.loadWarmupStatus()}catch(i){this.addLog(`Á∑©Â≠òÈ†êÁÜ±Â§±Êïó: ${i.message}`,"ERROR")}finally{this.loading=!1}},async toggleScheduler(){this.loading=!0;try{this.status.isRunning?(Y.stop(),this.addLog("Ë™øÂ∫¶Âô®Â∑≤ÂÅúÊ≠¢","INFO")):(Y.start(),this.addLog("Ë™øÂ∫¶Âô®Â∑≤ÂïüÂãï","INFO")),await this.refreshStatus()}catch(i){this.addLog(`ÂàáÊèõË™øÂ∫¶Âô®Â§±Êïó: ${i.message}`,"ERROR")}finally{this.loading=!1}},async triggerUpdate(i){this.loading=!0;try{this.addLog(`ÊâãÂãïËß∏ÁôºÊõ¥Êñ∞: ${i}`,"INFO"),await Y.triggerManualUpdate(i),this.addLog(`ÊâãÂãïÊõ¥Êñ∞ÂÆåÊàê: ${i}`,"SUCCESS"),await this.refreshStatus(),i==="technicalIndicators"?await this.loadTechnicalIndicatorsStatus():i==="metadata"&&await this.loadMetadataStatus()}catch(e){this.addLog(`ÊâãÂãïÊõ¥Êñ∞Â§±Êïó: ${e.message}`,"ERROR")}finally{this.loading=!1}},startPeriodicRefresh(){this.refreshInterval=setInterval(async()=>{await this.refreshStatus(),await this.loadTechnicalIndicatorsStatus(),await this.loadMetadataStatus(),await this.loadWarmupStatus()},3e4)},addLog(i,e="INFO"){const a={timestamp:new Date,level:e,message:i};this.logs.unshift(a),this.logs.length>100&&(this.logs=this.logs.slice(0,100))},clearLogs(){this.logs=[],this.addLog("Êó•Ë™åÂ∑≤Ê∏ÖÈô§","INFO")},onConfigChange(){this.configChanged=!0},async saveConfig(){try{localStorage.setItem("autoUpdateConfig",JSON.stringify(this.config)),this.configChanged=!1,this.addLog("ÈÖçÁΩÆÂ∑≤‰øùÂ≠ò","SUCCESS")}catch(i){this.addLog(`‰øùÂ≠òÈÖçÁΩÆÂ§±Êïó: ${i.message}`,"ERROR")}},formatTime(i){return i?new Date(i).toLocaleString("zh-TW"):"N/A"},formatDataAge(i){return i<1?"< 1 Â∞èÊôÇ":i<24?`${Math.round(i)} Â∞èÊôÇ`:`${Math.round(i/24)} Â§©`},getDataAgeClass(i){return i<1?"text-success":i<12?"text-warning":"text-danger"},getLogLevelClass(i){return{"log-info":i==="INFO","log-success":i==="SUCCESS","log-warning":i==="WARN","log-error":i==="ERROR"}}}},zg={class:"auto-update-monitor"},Gg={class:"monitor-header"},jg={class:"header-actions"},Qg=["disabled"],Xg={key:0},Kg={key:1},Yg=["disabled"],Jg={class:"monitor-grid"},Zg={class:"status-card"},em={class:"card-header"},tm={class:"card-content"},sm={class:"status-item"},am={class:"status-item"},nm={class:"value"},im={class:"status-item"},om={class:"value"},rm={class:"status-card"},lm={class:"card-header"},cm={class:"card-content"},dm={class:"status-item"},um={class:"value"},hm={class:"status-item"},gm={class:"status-item"},mm={class:"value"},fm={class:"status-item"},pm={class:"value"},ym={class:"card-actions"},vm=["disabled"],wm={class:"status-card"},Sm={class:"card-header"},bm={class:"card-content"},_m={class:"status-item"},km={class:"value"},Cm={class:"status-item"},Tm={class:"status-item"},Dm={class:"value"},Am={class:"status-item"},Im={class:"value"},xm={class:"card-actions"},Mm=["disabled"],Nm={class:"status-card"},Pm={class:"card-header"},Lm={class:"card-content"},Rm={class:"status-item"},Em={class:"status-item"},$m={class:"value"},Um={class:"status-item"},Fm={class:"value"},Om={class:"status-item"},Wm={class:"value"},Vm={class:"card-actions"},qm=["disabled"],Bm={class:"status-card"},Hm={class:"card-header"},zm={class:"status-indicator status-info"},Gm={class:"card-content"},jm={class:"status-item"},Qm={class:"value"},Xm={class:"status-item"},Km={class:"value"},Ym={class:"status-item"},Jm={class:"value"},Zm={class:"status-item"},ef={class:"value"},tf={class:"card-actions"},sf=["disabled"],af={class:"update-logs"},nf={class:"logs-header"},of={class:"logs-content"},rf={key:0,class:"no-logs"},lf={key:1,class:"log-entries"},cf={class:"log-time"},df={class:"log-level"},uf={class:"log-message"},hf={class:"config-panel"},gf={class:"config-header"},mf=["disabled"],ff={class:"config-content"},pf={class:"config-section"},yf={class:"config-item"},vf={class:"config-item"},wf={class:"config-item"},Sf={class:"config-section"},bf={class:"config-item"},_f={class:"config-item"};function kf(i,e,a,o,s,n){var r,d,c,g,y;return u(),h("div",zg,[t("div",Gg,[e[19]||(e[19]=t("h2",null,"Ëá™ÂãïÊõ¥Êñ∞Áõ£ÊéßÈù¢Êùø",-1)),t("div",jg,[t("button",{onClick:e[0]||(e[0]=(...p)=>n.refreshStatus&&n.refreshStatus(...p)),class:"btn btn-secondary",disabled:s.loading},[s.loading?(u(),h("span",Xg,"üîÑ")):(u(),h("span",Kg,"üîÑ")),e[18]||(e[18]=_(" Âà∑Êñ∞ÁãÄÊÖã ",-1))],8,Qg),t("button",{onClick:e[1]||(e[1]=(...p)=>n.toggleScheduler&&n.toggleScheduler(...p)),class:v(n.schedulerButtonClass),disabled:s.loading},l(n.schedulerButtonText),11,Yg)])]),t("div",Jg,[t("div",Zg,[t("div",em,[e[20]||(e[20]=t("h3",null,"Ë™øÂ∫¶Âô®ÁãÄÊÖã",-1)),t("div",{class:v(["status-indicator",n.schedulerStatusClass])},l(n.schedulerStatus),3)]),t("div",tm,[t("div",sm,[e[21]||(e[21]=t("span",{class:"label"},"ÈÅãË°åÁãÄÊÖã:",-1)),t("span",{class:v(["value",n.schedulerStatusClass])},l(s.status.isRunning?"ÈÅãË°å‰∏≠":"Â∑≤ÂÅúÊ≠¢"),3)]),t("div",am,[e[22]||(e[22]=t("span",{class:"label"},"Ê¥ªÂãï‰ªªÂãô:",-1)),t("span",nm,l(((r=s.status.activeIntervals)==null?void 0:r.length)||0)+" ÂÄã",1)]),t("div",im,[e[23]||(e[23]=t("span",{class:"label"},"ÂïüÂãïÊôÇÈñì:",-1)),t("span",om,l(n.formatTime(s.startTime)),1)])])]),t("div",rm,[t("div",lm,[e[24]||(e[24]=t("h3",null,"ÊäÄË°ìÊåáÊ®ô",-1)),t("div",{class:v(["status-indicator",n.technicalIndicatorsStatusClass])},l(n.technicalIndicatorsStatus),3)]),t("div",cm,[t("div",dm,[e[25]||(e[25]=t("span",{class:"label"},"ÊúÄÂæåÊõ¥Êñ∞:",-1)),t("span",um,l(n.formatTime(s.technicalIndicatorsLastUpdate)),1)]),t("div",hm,[e[26]||(e[26]=t("span",{class:"label"},"Êï∏ÊìöÂπ¥ÈΩ°:",-1)),t("span",{class:v(["value",n.getDataAgeClass(s.technicalIndicatorsAge)])},l(n.formatDataAge(s.technicalIndicatorsAge)),3)]),t("div",gm,[e[27]||(e[27]=t("span",{class:"label"},"‰∏ãÊ¨°Êõ¥Êñ∞:",-1)),t("span",mm,l(n.formatTime((d=s.status.nextUpdates)==null?void 0:d.technicalIndicators)),1)]),t("div",fm,[e[28]||(e[28]=t("span",{class:"label"},"ÊàêÂäüÁéá:",-1)),t("span",pm,l(s.technicalIndicatorsSuccessRate)+"%",1)])]),t("div",ym,[t("button",{onClick:e[2]||(e[2]=p=>n.triggerUpdate("technicalIndicators")),class:"btn btn-primary btn-sm",disabled:s.loading}," Ê∏ÖÈô§Á∑©Â≠ò ",8,vm),e[29]||(e[29]=t("div",{class:"update-note"},[t("small",null,"Ë®ª: ÂØ¶ÈöõÈ†êË®àÁÆóÈúÄË¶ÅÂú®ÊúçÂãôÂô®Á´ØÂü∑Ë°å")],-1))])]),t("div",wm,[t("div",Sm,[e[30]||(e[30]=t("h3",null,"ÂÖÉÊï∏Êìö",-1)),t("div",{class:v(["status-indicator",n.metadataStatusClass])},l(n.metadataStatus),3)]),t("div",bm,[t("div",_m,[e[31]||(e[31]=t("span",{class:"label"},"ÊúÄÂæåÊõ¥Êñ∞:",-1)),t("span",km,l(n.formatTime(s.metadataLastUpdate)),1)]),t("div",Cm,[e[32]||(e[32]=t("span",{class:"label"},"Êï∏ÊìöÂπ¥ÈΩ°:",-1)),t("span",{class:v(["value",n.getDataAgeClass(s.metadataAge)])},l(n.formatDataAge(s.metadataAge)),3)]),t("div",Tm,[e[33]||(e[33]=t("span",{class:"label"},"‰∏ãÊ¨°Êõ¥Êñ∞:",-1)),t("span",Dm,l(n.formatTime((c=s.status.nextUpdates)==null?void 0:c.metadata)),1)]),t("div",Am,[e[34]||(e[34]=t("span",{class:"label"},"ËÇ°Á•®Êï∏Èáè:",-1)),t("span",Im,l(s.metadataSymbolCount)+" ÊîØ",1)])]),t("div",xm,[t("button",{onClick:e[3]||(e[3]=p=>n.triggerUpdate("metadata")),class:"btn btn-primary btn-sm",disabled:s.loading}," ÊâãÂãïÊõ¥Êñ∞ ",8,Mm)])]),t("div",Nm,[t("div",Pm,[e[35]||(e[35]=t("h3",null,"Á∑©Â≠òÈ†êÁÜ±",-1)),t("div",{class:v(["status-indicator",n.warmupStatusClass])},l(n.warmupStatus),3)]),t("div",Lm,[t("div",Rm,[e[36]||(e[36]=t("span",{class:"label"},"È†êÁÜ±ÁãÄÊÖã:",-1)),t("span",{class:v(["value",n.warmupStatusClass])},l(s.warmupInfo.isWarming?"ÈÄ≤Ë°å‰∏≠":"ÂæÖÊ©ü‰∏≠"),3)]),t("div",Em,[e[37]||(e[37]=t("span",{class:"label"},"ÈÄ≤Â∫¶:",-1)),t("span",$m,l(Math.round(s.warmupInfo.progress))+"%",1)]),t("div",Um,[e[38]||(e[38]=t("span",{class:"label"},"ËøΩËπ§ËÇ°Á•®:",-1)),t("span",Fm,l(((g=s.warmupInfo.trackedSymbols)==null?void 0:g.length)||0)+" ÊîØ",1)]),t("div",Om,[e[39]||(e[39]=t("span",{class:"label"},"‰∏äÊ¨°È†êÁÜ±:",-1)),t("span",Wm,l(n.formatTime(s.warmupInfo.lastWarmupTime)),1)])]),t("div",Vm,[t("button",{onClick:e[4]||(e[4]=(...p)=>n.triggerWarmup&&n.triggerWarmup(...p)),class:"btn btn-info btn-sm",disabled:s.loading||s.warmupInfo.isWarming},l(s.warmupInfo.isWarming?"È†êÁÜ±‰∏≠...":"ÊâãÂãïÈ†êÁÜ±"),9,qm),e[40]||(e[40]=t("div",{class:"update-note"},[t("small",null,"Ë®ª: È†êÁÜ±ÊâÄÊúâËÇ°Á•®ÁöÑÊäÄË°ìÊåáÊ®ôÊï∏Êìö")],-1))])]),t("div",Bm,[t("div",Hm,[e[41]||(e[41]=t("h3",null,"Á∑©Â≠òÁãÄÊÖã",-1)),t("div",zm,l(n.cacheStatus),1)]),t("div",Gm,[t("div",jm,[e[42]||(e[42]=t("span",{class:"label"},"ÂÖßÂ≠òÁ∑©Â≠ò:",-1)),t("span",Qm,l(s.cacheStats.memoryCache)+" È†Ö",1)]),t("div",Xm,[e[43]||(e[43]=t("span",{class:"label"},"Êú¨Âú∞Â≠òÂÑ≤:",-1)),t("span",Km,l(s.cacheStats.localStorage)+" È†Ö",1)]),t("div",Ym,[e[44]||(e[44]=t("span",{class:"label"},"Á∏ΩÂ§ßÂ∞è:",-1)),t("span",Jm,l(s.cacheStats.totalSize)+" È†Ö",1)]),t("div",Zm,[e[45]||(e[45]=t("span",{class:"label"},"‰∏ãÊ¨°Ê∏ÖÁêÜ:",-1)),t("span",ef,l(n.formatTime((y=s.status.nextUpdates)==null?void 0:y.cacheCleanup)),1)])]),t("div",tf,[t("button",{onClick:e[5]||(e[5]=p=>n.triggerUpdate("cache")),class:"btn btn-warning btn-sm",disabled:s.loading}," Ê∏ÖÁêÜÁ∑©Â≠ò ",8,sf)])])]),t("div",af,[t("div",nf,[e[46]||(e[46]=t("h3",null,"Êõ¥Êñ∞Êó•Ë™å",-1)),t("button",{onClick:e[6]||(e[6]=(...p)=>n.clearLogs&&n.clearLogs(...p)),class:"btn btn-sm btn-outline"},"Ê∏ÖÈô§Êó•Ë™å")]),t("div",of,[s.logs.length===0?(u(),h("div",rf," Êö´ÁÑ°Êó•Ë™åË®òÈåÑ ")):(u(),h("div",lf,[(u(!0),h($,null,U(s.logs,(p,k)=>(u(),h("div",{key:k,class:v(["log-entry",n.getLogLevelClass(p.level)])},[t("span",cf,l(n.formatTime(p.timestamp)),1),t("span",df,l(p.level),1),t("span",uf,l(p.message),1)],2))),128))]))])]),t("div",hf,[t("div",gf,[e[47]||(e[47]=t("h3",null,"ÈÖçÁΩÆË®≠ÂÆö",-1)),t("button",{onClick:e[7]||(e[7]=(...p)=>n.saveConfig&&n.saveConfig(...p)),class:"btn btn-success btn-sm",disabled:!s.configChanged}," ‰øùÂ≠òÈÖçÁΩÆ ",8,mf)]),t("div",ff,[t("div",pf,[e[51]||(e[51]=t("h4",null,"ÊäÄË°ìÊåáÊ®ôÊõ¥Êñ∞",-1)),t("div",yf,[t("label",null,[q(t("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=p=>s.config.technicalIndicators.enabled=p),onChange:e[9]||(e[9]=(...p)=>n.onConfigChange&&n.onConfigChange(...p))},null,544),[[Z,s.config.technicalIndicators.enabled]]),e[48]||(e[48]=_(" ÂïüÁî®Ëá™ÂãïÊõ¥Êñ∞ ",-1))])]),t("div",vf,[e[49]||(e[49]=t("label",null,"Êõ¥Êñ∞ÈñìÈöî (Â∞èÊôÇ):",-1)),q(t("input",{type:"number","onUpdate:modelValue":e[10]||(e[10]=p=>s.config.technicalIndicators.intervalHours=p),onChange:e[11]||(e[11]=(...p)=>n.onConfigChange&&n.onConfigChange(...p)),min:"1",max:"24"},null,544),[[ne,s.config.technicalIndicators.intervalHours,void 0,{number:!0}]])]),t("div",wf,[t("label",null,[q(t("input",{type:"checkbox","onUpdate:modelValue":e[12]||(e[12]=p=>s.config.technicalIndicators.marketHoursOnly=p),onChange:e[13]||(e[13]=(...p)=>n.onConfigChange&&n.onConfigChange(...p))},null,544),[[Z,s.config.technicalIndicators.marketHoursOnly]]),e[50]||(e[50]=_(" ÂÉÖÂú®Â∏ÇÂ†¥ÊôÇÈñìÊõ¥Êñ∞ ",-1))])])]),t("div",Sf,[e[54]||(e[54]=t("h4",null,"ÂÖÉÊï∏ÊìöÊõ¥Êñ∞",-1)),t("div",bf,[t("label",null,[q(t("input",{type:"checkbox","onUpdate:modelValue":e[14]||(e[14]=p=>s.config.metadata.enabled=p),onChange:e[15]||(e[15]=(...p)=>n.onConfigChange&&n.onConfigChange(...p))},null,544),[[Z,s.config.metadata.enabled]]),e[52]||(e[52]=_(" ÂïüÁî®Ëá™ÂãïÊõ¥Êñ∞ ",-1))])]),t("div",_f,[e[53]||(e[53]=t("label",null,"Êõ¥Êñ∞ÈñìÈöî (Â∞èÊôÇ):",-1)),q(t("input",{type:"number","onUpdate:modelValue":e[16]||(e[16]=p=>s.config.metadata.intervalHours=p),onChange:e[17]||(e[17]=(...p)=>n.onConfigChange&&n.onConfigChange(...p)),min:"1",max:"168"},null,544),[[ne,s.config.metadata.intervalHours,void 0,{number:!0}]])])])])])])}const Cf=P(Hg,[["render",kf],["__scopeId","data-v-32573d8b"]]),Tf={name:"SystemManager",data(){return{loading:!1,testing:!1,showAdvanced:!1,systemHealth:{overall:85,dataSource:90,performance:80,updates:85},dataSourceStatus:null,status:{isRunning:!1,activeIntervals:[],nextUpdates:{}},startTime:null,performanceScore:85,cacheHitRate:78,preferences:{preferPrecomputed:!0,fallbackToRealtime:!0,technicalIndicatorsInterval:30,metadataInterval:24,enablePerformanceMonitoring:!0,enableCacheWarmup:!0},systemLogs:[],logIdCounter:0}},computed:{schedulerStatus(){return this.status.isRunning?"ÈÅãË°å‰∏≠":"Â∑≤ÂÅúÊ≠¢"},schedulerStatusClass(){return this.status.isRunning?"success":"error"},schedulerButtonClass(){return this.status.isRunning?"btn btn-warning":"btn btn-success"},schedulerButtonText(){return this.status.isRunning?"ÂÅúÊ≠¢Ë™øÂ∫¶Âô®":"ÂïüÂãïË™øÂ∫¶Âô®"},technicalIndicatorsStatus(){return"Ê≠£Â∏∏"},technicalIndicatorsStatusClass(){return"success"},technicalIndicatorsLastUpdate(){return new Date().toISOString()},technicalIndicatorsAge(){return 30*60*1e3},technicalIndicatorsSuccessRate(){return 95},metadataStatus(){return"Ê≠£Â∏∏"},metadataStatusClass(){return"success"},metadataLastUpdate(){return new Date().toISOString()},metadataAge(){return 2*60*60*1e3}},async mounted(){await this.initializeSystem(),this.startStatusUpdates()},methods:{async initializeSystem(){this.addLog("info","Á≥ªÁµ±ÁÆ°ÁêÜÈù¢ÊùøÂàùÂßãÂåñ‰∏≠...");try{await this.refreshAllStatus(),this.addLog("info","Á≥ªÁµ±ÁÆ°ÁêÜÈù¢ÊùøÂàùÂßãÂåñÂÆåÊàê")}catch(i){this.addLog("error",`Á≥ªÁµ±ÂàùÂßãÂåñÂ§±Êïó: ${i.message}`)}},async refreshAllStatus(){this.loading=!0,this.addLog("info","ÈñãÂßãÂÖ®Èù¢ÁãÄÊÖãÂà∑Êñ∞...");try{await this.refreshDataSources(),this.refreshSchedulerStatus(),this.updatePerformanceMetrics(),this.updateSystemHealth(),this.addLog("info","ÂÖ®Èù¢ÁãÄÊÖãÂà∑Êñ∞ÂÆåÊàê")}catch(i){this.addLog("error",`ÁãÄÊÖãÂà∑Êñ∞Â§±Êïó: ${i.message}`)}finally{this.loading=!1}},async refreshDataSources(){try{this.dataSourceStatus=await ce.getDataSourceStatus(),this.addLog("info","Êï∏ÊìöÊ∫êÁãÄÊÖãÂ∑≤Êõ¥Êñ∞")}catch(i){this.addLog("error",`Êï∏ÊìöÊ∫êÁãÄÊÖãÊõ¥Êñ∞Â§±Êïó: ${i.message}`)}},refreshSchedulerStatus(){this.status=Y.getStatus(),this.startTime=Y.getStartTime(),this.addLog("info","Ë™øÂ∫¶Âô®ÁãÄÊÖãÂ∑≤Êõ¥Êñ∞")},updatePerformanceMetrics(){const i=H.getStats();le.getAllMetrics(),this.performanceScore=Math.min(100,60+i.totalSize*2),this.cacheHitRate=Math.min(100,50+i.totalSize*3),this.addLog("info","ÊïàËÉΩÊåáÊ®ôÂ∑≤Êõ¥Êñ∞")},updateSystemHealth(){var a,o;const i=(o=(a=this.dataSourceStatus)==null?void 0:a.precomputed)!=null&&o.available?100:70,e=this.status.isRunning?100:50;this.systemHealth={overall:Math.round((i+this.performanceScore+e)/3),dataSource:i,performance:this.performanceScore,updates:e}},async toggleScheduler(){this.loading=!0;try{this.status.isRunning?(Y.stop(),this.addLog("info","Ëá™ÂãïÊõ¥Êñ∞Ë™øÂ∫¶Âô®Â∑≤ÂÅúÊ≠¢")):(Y.start(),this.addLog("info","Ëá™ÂãïÊõ¥Êñ∞Ë™øÂ∫¶Âô®Â∑≤ÂïüÂãï")),this.refreshSchedulerStatus()}catch(i){this.addLog("error",`Ë™øÂ∫¶Âô®Êìç‰ΩúÂ§±Êïó: ${i.message}`)}finally{this.loading=!1}},async triggerUpdate(i){this.loading=!0,this.addLog("info",`Ëß∏Áôº ${i} Êõ¥Êñ∞...`);try{i==="technicalIndicators"?(H.clear(),this.addLog("info","ÊäÄË°ìÊåáÊ®ôÂø´ÂèñÂ∑≤Ê∏ÖÈô§")):i==="metadata"&&(H.clear(),this.addLog("info","ÂÖÉÊï∏ÊìöÂø´ÂèñÂ∑≤Ê∏ÖÈô§")),await this.refreshDataSources()}catch(e){this.addLog("error",`${i} Êõ¥Êñ∞Â§±Êïó: ${e.message}`)}finally{this.loading=!1}},async clearAllCaches(){if(confirm("Á¢∫ÂÆöË¶ÅÊ∏ÖÈô§ÊâÄÊúâÂø´ÂèñÂóéÔºüÈÄôÂ∞áÂΩ±ÈüøÁ≥ªÁµ±ÊïàËÉΩ„ÄÇ")){this.loading=!0,this.addLog("warning","ÈñãÂßãÊ∏ÖÈô§ÊâÄÊúâÂø´Âèñ...");try{H.clear(),localStorage.clear(),sessionStorage.clear(),this.addLog("info","ÊâÄÊúâÂø´ÂèñÂ∑≤Ê∏ÖÈô§"),await this.refreshAllStatus()}catch(i){this.addLog("error",`Ê∏ÖÈô§Âø´ÂèñÂ§±Êïó: ${i.message}`)}finally{this.loading=!1}}},async testSystemHealth(){this.testing=!0,this.addLog("info","ÈñãÂßãÁ≥ªÁµ±ÂÅ•Â∫∑Ê™¢Êü•...");try{await new Promise(e=>setTimeout(e,2e3));const i=Math.floor(Math.random()*20)+80;this.systemHealth.overall=i,this.addLog("info",`Á≥ªÁµ±ÂÅ•Â∫∑Ê™¢Êü•ÂÆåÊàêÔºåÂæóÂàÜ: ${i}%`)}catch(i){this.addLog("error",`Á≥ªÁµ±ÂÅ•Â∫∑Ê™¢Êü•Â§±Êïó: ${i.message}`)}finally{this.testing=!1}},updatePreferences(){ce.setPreferences({preferPrecomputed:this.preferences.preferPrecomputed,fallbackToRealtime:this.preferences.fallbackToRealtime}),this.addLog("info","Á≥ªÁµ±ÂÅèÂ•ΩË®≠ÂÆöÂ∑≤Êõ¥Êñ∞")},startStatusUpdates(){setInterval(()=>{this.loading||(this.refreshSchedulerStatus(),this.updatePerformanceMetrics(),this.updateSystemHealth())},3e4)},getHealthStatus(i){return i>=90?"ÂÑ™ÁßÄ":i>=80?"ËâØÂ•Ω":i>=70?"‰∏ÄËà¨":"ÈúÄË¶ÅÈóúÊ≥®"},getDataAgeClass(i){const e=i/36e5;return e<1?"fresh":e<6?"stale":"very-stale"},formatTime(i){return i?new Date(i).toLocaleString("zh-TW"):"N/A"},formatDataAge(i){if(!i)return"N/A";const e=Math.floor(i/(1e3*60)),a=Math.floor(e/60),o=Math.floor(a/24);return o>0?`${o} Â§©Ââç`:a>0?`${a} Â∞èÊôÇÂâç`:`${e} ÂàÜÈêòÂâç`},addLog(i,e){this.systemLogs.push({id:++this.logIdCounter,timestamp:new Date().toISOString(),level:i,message:e}),this.systemLogs.length>100&&(this.systemLogs=this.systemLogs.slice(-100))},clearLogs(){this.systemLogs=[],this.logIdCounter=0}}},Df={class:"system-manager"},Af={class:"overview-section"},If={class:"overview-grid"},xf={class:"card-content"},Mf={class:"health-score"},Nf={class:"health-status"},Pf={class:"overview-card"},Lf={class:"card-content"},Rf={class:"data-sources"},Ef={class:"overview-card"},$f={class:"card-content"},Uf={class:"update-info"},Ff={class:"overview-card"},Of={class:"card-content"},Wf={class:"performance-score"},Vf={class:"performance-info"},qf={class:"details-section"},Bf={class:"details-grid"},Hf={class:"detail-card"},zf={class:"card-header"},Gf=["disabled"],jf={class:"data-source-list"},Qf={class:"source-header"},Xf={key:0,class:"source-details"},Kf={class:"detail-row"},Yf={class:"detail-row"},Jf={class:"detail-row"},Zf={class:"source-item available"},ep={class:"source-details"},tp={class:"detail-row"},sp={class:"detail-row"},ap={class:"detail-row"},np={class:"detail-card"},ip={class:"card-header"},op=["disabled"],rp={class:"update-details"},lp={class:"update-item"},cp={class:"update-header"},dp={class:"update-info"},up={class:"detail-row"},hp={class:"detail-row"},gp={class:"detail-row"},mp={class:"update-actions"},fp=["disabled"],pp={class:"update-item"},yp={class:"update-header"},vp={class:"update-info"},wp={class:"detail-row"},Sp={class:"detail-row"},bp={class:"update-actions"},_p=["disabled"],kp={class:"control-section"},Cp={class:"control-grid"},Tp=["disabled"],Dp=["disabled"],Ap={key:0,class:"advanced-section"},Ip={class:"settings-grid"},xp={class:"setting-group"},Mp={class:"setting-item"},Np={class:"setting-item"},Pp={class:"setting-group"},Lp={class:"setting-item"},Rp={class:"setting-item"},Ep={class:"setting-group"},$p={class:"setting-item"},Up={class:"setting-item"},Fp={class:"logs-section"},Op={class:"logs-header"},Wp={class:"logs-container"},Vp={class:"log-time"},qp={class:"log-level"},Bp={class:"log-message"},Hp={key:0,class:"no-logs"};function zp(i,e,a,o,s,n){var r,d,c,g,y,p,k,D,C,A,b,F,M,O,f,W,w,I;return u(),h("div",Df,[e[66]||(e[66]=t("div",{class:"manager-header"},[t("h2",null,"Control Panel"),t("p",null,"Áõ£ÊéßÂíåÁÆ°ÁêÜÊäïË≥áÂÑÄË°®ÊùøÁöÑÂêÑÈ†ÖÁ≥ªÁµ±ÂäüËÉΩ")],-1)),t("div",Af,[t("div",If,[t("div",{class:v(["overview-card",{healthy:s.systemHealth.overall>=80}])},[e[22]||(e[22]=t("div",{class:"card-icon"},"üéØ",-1)),t("div",xf,[e[21]||(e[21]=t("h3",null,"Á≥ªÁµ±ÂÅ•Â∫∑Â∫¶",-1)),t("div",Mf,l(s.systemHealth.overall)+"%",1),t("div",Nf,l(n.getHealthStatus(s.systemHealth.overall)),1)])],2),t("div",Pf,[e[26]||(e[26]=t("div",{class:"card-icon"},"üìä",-1)),t("div",Lf,[e[25]||(e[25]=t("h3",null,"Êï∏ÊìöÊ∫êÁãÄÊÖã",-1)),t("div",Rf,[t("span",{class:v(["source-item",{active:(d=(r=s.dataSourceStatus)==null?void 0:r.precomputed)==null?void 0:d.available}])}," È†êË®àÁÆó "+l((g=(c=s.dataSourceStatus)==null?void 0:c.precomputed)!=null&&g.available?"‚úÖ":"‚ùå"),3),e[23]||(e[23]=t("span",{class:"source-item active"},"Âø´Âèñ ‚úÖ",-1)),e[24]||(e[24]=t("span",{class:"source-item active"},"ÂØ¶ÊôÇ ‚úÖ",-1))])])]),t("div",Ef,[e[28]||(e[28]=t("div",{class:"card-icon"},"üîÑ",-1)),t("div",$f,[e[27]||(e[27]=t("h3",null,"Ëá™ÂãïÊõ¥Êñ∞",-1)),t("div",{class:v(["update-status",n.schedulerStatusClass])},l(s.status.isRunning?"ÈÅãË°å‰∏≠":"Â∑≤ÂÅúÊ≠¢"),3),t("div",Uf," Ê¥ªÂãï‰ªªÂãô: "+l(((y=s.status.activeIntervals)==null?void 0:y.length)||0)+" ÂÄã ",1)])]),t("div",Ff,[e[30]||(e[30]=t("div",{class:"card-icon"},"‚ö°",-1)),t("div",Of,[e[29]||(e[29]=t("h3",null,"ÊïàËÉΩÁãÄÊÖã",-1)),t("div",Wf,l(s.performanceScore)+"%",1),t("div",Vf," Âø´ÂèñÂëΩ‰∏≠Áéá: "+l(s.cacheHitRate)+"% ",1)])])])]),t("div",qf,[t("div",Bf,[t("div",Hf,[t("div",zf,[e[31]||(e[31]=t("h3",null,"üìä Êï∏ÊìöÊ∫êÁÆ°ÁêÜ",-1)),t("button",{onClick:e[0]||(e[0]=(...m)=>n.refreshDataSources&&n.refreshDataSources(...m)),class:"btn btn-sm",disabled:s.loading},l((s.loading,"üîÑ"))+" Âà∑Êñ∞ ",9,Gf)]),t("div",jf,[t("div",{class:v(["source-item",{available:(k=(p=s.dataSourceStatus)==null?void 0:p.precomputed)==null?void 0:k.available}])},[t("div",Qf,[e[32]||(e[32]=t("h4",null,"È†êË®àÁÆóÊï∏Êìö",-1)),t("span",{class:v(["status-badge",(C=(D=s.dataSourceStatus)==null?void 0:D.precomputed)!=null&&C.available?"success":"error"])},l((b=(A=s.dataSourceStatus)==null?void 0:A.precomputed)!=null&&b.available?"ÂèØÁî®":"‰∏çÂèØÁî®"),3)]),(M=(F=s.dataSourceStatus)==null?void 0:F.precomputed)!=null&&M.available?(u(),h("div",Xf,[t("div",Kf,[e[33]||(e[33]=t("span",null,"ËÇ°Á•®Êï∏Èáè:",-1)),t("span",null,l(((O=s.dataSourceStatus.precomputed.symbols)==null?void 0:O.length)||0),1)]),t("div",Yf,[e[34]||(e[34]=t("span",null,"ÊàêÂäü/Â§±Êïó:",-1)),t("span",null,l(s.dataSourceStatus.precomputed.successful||0)+"/"+l(s.dataSourceStatus.precomputed.failed||0),1)]),t("div",Jf,[e[35]||(e[35]=t("span",null,"ÊúÄÂæåÊõ¥Êñ∞:",-1)),t("span",null,l(n.formatTime(s.dataSourceStatus.precomputed.lastUpdate)),1)])])):S("",!0)],2),t("div",Zf,[e[39]||(e[39]=t("div",{class:"source-header"},[t("h4",null,"Âø´ÂèñÁ≥ªÁµ±"),t("span",{class:"status-badge success"},"Ê≠£Â∏∏")],-1)),t("div",ep,[t("div",tp,[e[36]||(e[36]=t("span",null,"ÂÖßÂ≠òÂø´Âèñ:",-1)),t("span",null,l(((W=(f=s.dataSourceStatus)==null?void 0:f.cache)==null?void 0:W.memoryCache)||0)+" È†ÖÁõÆ",1)]),t("div",sp,[e[37]||(e[37]=t("span",null,"Êú¨Âú∞Â≠òÂÑ≤:",-1)),t("span",null,l(((I=(w=s.dataSourceStatus)==null?void 0:w.cache)==null?void 0:I.localStorageCache)||0)+" È†ÖÁõÆ",1)]),t("div",ap,[e[38]||(e[38]=t("span",null,"ÂëΩ‰∏≠Áéá:",-1)),t("span",null,l(s.cacheHitRate)+"%",1)])])])])]),t("div",np,[t("div",ip,[e[40]||(e[40]=t("h3",null,"üîÑ Ëá™ÂãïÊõ¥Êñ∞ÁÆ°ÁêÜ",-1)),t("button",{onClick:e[1]||(e[1]=(...m)=>n.toggleScheduler&&n.toggleScheduler(...m)),class:v(n.schedulerButtonClass),disabled:s.loading},l(n.schedulerButtonText),11,op)]),t("div",rp,[t("div",lp,[t("div",cp,[e[41]||(e[41]=t("h4",null,"ÊäÄË°ìÊåáÊ®ô",-1)),t("div",{class:v(["status-indicator",n.technicalIndicatorsStatusClass])},l(n.technicalIndicatorsStatus),3)]),t("div",dp,[t("div",up,[e[42]||(e[42]=t("span",null,"ÊúÄÂæåÊõ¥Êñ∞:",-1)),t("span",null,l(n.formatTime(n.technicalIndicatorsLastUpdate)),1)]),t("div",hp,[e[43]||(e[43]=t("span",null,"Êï∏ÊìöÂπ¥ÈΩ°:",-1)),t("span",{class:v(n.getDataAgeClass(n.technicalIndicatorsAge))},l(n.formatDataAge(n.technicalIndicatorsAge)),3)]),t("div",gp,[e[44]||(e[44]=t("span",null,"ÊàêÂäüÁéá:",-1)),t("span",null,l(n.technicalIndicatorsSuccessRate)+"%",1)])]),t("div",mp,[t("button",{onClick:e[2]||(e[2]=m=>n.triggerUpdate("technicalIndicators")),class:"btn btn-sm btn-primary",disabled:s.loading}," Ê∏ÖÈô§Âø´Âèñ ",8,fp)])]),t("div",pp,[t("div",yp,[e[45]||(e[45]=t("h4",null,"ÂÖÉÊï∏Êìö",-1)),t("div",{class:v(["status-indicator",n.metadataStatusClass])},l(n.metadataStatus),3)]),t("div",vp,[t("div",wp,[e[46]||(e[46]=t("span",null,"ÊúÄÂæåÊõ¥Êñ∞:",-1)),t("span",null,l(n.formatTime(n.metadataLastUpdate)),1)]),t("div",Sp,[e[47]||(e[47]=t("span",null,"Êï∏ÊìöÂπ¥ÈΩ°:",-1)),t("span",{class:v(n.getDataAgeClass(n.metadataAge))},l(n.formatDataAge(n.metadataAge)),3)])]),t("div",bp,[t("button",{onClick:e[3]||(e[3]=m=>n.triggerUpdate("metadata")),class:"btn btn-sm btn-primary",disabled:s.loading}," Ê∏ÖÈô§Âø´Âèñ ",8,_p)])])])])])]),t("div",kp,[e[52]||(e[52]=t("div",{class:"control-header"},[t("h3",null,"üéõÔ∏è Á≥ªÁµ±ÊéßÂà∂")],-1)),t("div",Cp,[t("button",{onClick:e[4]||(e[4]=(...m)=>n.refreshAllStatus&&n.refreshAllStatus(...m)),class:"control-btn primary",disabled:s.loading},[e[48]||(e[48]=t("span",{class:"btn-icon"},"üîÑ",-1)),_(" "+l(s.loading?"Âà∑Êñ∞‰∏≠...":"ÂÖ®Èù¢Âà∑Êñ∞"),1)],8,Tp),t("button",{onClick:e[5]||(e[5]=(...m)=>n.clearAllCaches&&n.clearAllCaches(...m)),class:"control-btn warning"},[...e[49]||(e[49]=[t("span",{class:"btn-icon"},"üóëÔ∏è",-1),_(" Ê∏ÖÈô§ÊâÄÊúâÂø´Âèñ ",-1)])]),t("button",{onClick:e[6]||(e[6]=(...m)=>n.testSystemHealth&&n.testSystemHealth(...m)),class:"control-btn info",disabled:s.testing},[e[50]||(e[50]=t("span",{class:"btn-icon"},"üîç",-1)),_(" "+l(s.testing?"Ê∏¨Ë©¶‰∏≠...":"Á≥ªÁµ±ÂÅ•Ê™¢"),1)],8,Dp),t("button",{onClick:e[7]||(e[7]=m=>s.showAdvanced=!s.showAdvanced),class:"control-btn secondary"},[e[51]||(e[51]=t("span",{class:"btn-icon"},"‚öôÔ∏è",-1)),_(" "+l(s.showAdvanced?"Èö±ËóèÈÄ≤Èöé":"ÈÄ≤ÈöéË®≠ÂÆö"),1)])])]),s.showAdvanced?(u(),h("div",Ap,[e[64]||(e[64]=t("div",{class:"advanced-header"},[t("h3",null,"‚öôÔ∏è ÈÄ≤ÈöéË®≠ÂÆö")],-1)),t("div",Ip,[t("div",xp,[e[55]||(e[55]=t("h4",null,"Êï∏ÊìöÊ∫êÂÅèÂ•Ω",-1)),t("div",Mp,[t("label",null,[q(t("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=m=>s.preferences.preferPrecomputed=m),onChange:e[9]||(e[9]=(...m)=>n.updatePreferences&&n.updatePreferences(...m))},null,544),[[Z,s.preferences.preferPrecomputed]]),e[53]||(e[53]=_(" ÂÑ™ÂÖà‰ΩøÁî®È†êË®àÁÆóÊï∏Êìö ",-1))])]),t("div",Np,[t("label",null,[q(t("input",{type:"checkbox","onUpdate:modelValue":e[10]||(e[10]=m=>s.preferences.fallbackToRealtime=m),onChange:e[11]||(e[11]=(...m)=>n.updatePreferences&&n.updatePreferences(...m))},null,544),[[Z,s.preferences.fallbackToRealtime]]),e[54]||(e[54]=_(" ÂÖÅË®±ÂõûÈÄÄÂà∞ÂØ¶ÊôÇË®àÁÆó ",-1))])])]),t("div",Pp,[e[60]||(e[60]=t("h4",null,"Êõ¥Êñ∞È†ªÁéá",-1)),t("div",Lp,[e[57]||(e[57]=t("label",null,"ÊäÄË°ìÊåáÊ®ôÊõ¥Êñ∞ÈñìÈöî (ÂàÜÈêò):",-1)),q(t("select",{"onUpdate:modelValue":e[12]||(e[12]=m=>s.preferences.technicalIndicatorsInterval=m),onChange:e[13]||(e[13]=(...m)=>n.updatePreferences&&n.updatePreferences(...m))},[...e[56]||(e[56]=[t("option",{value:"5"},"5 ÂàÜÈêò",-1),t("option",{value:"15"},"15 ÂàÜÈêò",-1),t("option",{value:"30"},"30 ÂàÜÈêò",-1),t("option",{value:"60"},"1 Â∞èÊôÇ",-1)])],544),[[Wt,s.preferences.technicalIndicatorsInterval]])]),t("div",Rp,[e[59]||(e[59]=t("label",null,"ÂÖÉÊï∏ÊìöÊõ¥Êñ∞ÈñìÈöî (Â∞èÊôÇ):",-1)),q(t("select",{"onUpdate:modelValue":e[14]||(e[14]=m=>s.preferences.metadataInterval=m),onChange:e[15]||(e[15]=(...m)=>n.updatePreferences&&n.updatePreferences(...m))},[...e[58]||(e[58]=[t("option",{value:"6"},"6 Â∞èÊôÇ",-1),t("option",{value:"12"},"12 Â∞èÊôÇ",-1),t("option",{value:"24"},"24 Â∞èÊôÇ",-1),t("option",{value:"168"},"1 ÈÄ±",-1)])],544),[[Wt,s.preferences.metadataInterval]])])]),t("div",Ep,[e[63]||(e[63]=t("h4",null,"ÊïàËÉΩË®≠ÂÆö",-1)),t("div",$p,[t("label",null,[q(t("input",{type:"checkbox","onUpdate:modelValue":e[16]||(e[16]=m=>s.preferences.enablePerformanceMonitoring=m),onChange:e[17]||(e[17]=(...m)=>n.updatePreferences&&n.updatePreferences(...m))},null,544),[[Z,s.preferences.enablePerformanceMonitoring]]),e[61]||(e[61]=_(" ÂïüÁî®ÊïàËÉΩÁõ£Êéß ",-1))])]),t("div",Up,[t("label",null,[q(t("input",{type:"checkbox","onUpdate:modelValue":e[18]||(e[18]=m=>s.preferences.enableCacheWarmup=m),onChange:e[19]||(e[19]=(...m)=>n.updatePreferences&&n.updatePreferences(...m))},null,544),[[Z,s.preferences.enableCacheWarmup]]),e[62]||(e[62]=_(" ÂïüÁî®Âø´ÂèñÈ†êÁÜ± ",-1))])])])])])):S("",!0),t("div",Fp,[t("div",Op,[e[65]||(e[65]=t("h3",null,"üìã Á≥ªÁµ±Êó•Ë™å",-1)),t("button",{onClick:e[20]||(e[20]=(...m)=>n.clearLogs&&n.clearLogs(...m)),class:"btn btn-sm"},"Ê∏ÖÈô§Êó•Ë™å")]),t("div",Wp,[(u(!0),h($,null,U(s.systemLogs.slice(-10),m=>(u(),h("div",{key:m.id,class:v(["log-entry",m.level])},[t("span",Vp,l(n.formatTime(m.timestamp)),1),t("span",qp,l(m.level.toUpperCase()),1),t("span",Bp,l(m.message),1)],2))),128)),s.systemLogs.length===0?(u(),h("div",Hp," Êö´ÁÑ°Á≥ªÁµ±Êó•Ë™å ")):S("",!0)])])])}const Gp=P(Tf,[["render",zp],["__scopeId","data-v-729e0df5"]]),jp=[{path:"/",redirect:"/market-overview"},{path:"/market-overview",component:fn,name:"market-overview"},{path:"/stock-overview",component:Eo,name:"stock-overview"},{path:"/stock-overview/symbols/:symbol",component:Ic,name:"stock-detail"},{path:"/market-dashboard",redirect:"/market-overview"},{path:"/stock-dashboard",redirect:"/stock-overview"},{path:"/stock-dashboard/symbols/:symbol",redirect:i=>`/stock-overview/symbols/${i.params.symbol}`},{path:"/settings",component:Oo,name:"settings"},{path:"/top-stories-test",component:Jc,name:"top-stories-test"},{path:"/stock-market-insight-test",component:xd,name:"stock-market-insight-test"},{path:"/yahoo-finance-test",component:Pu,name:"yahoo-finance-test"},{path:"/proxy-diagnostic",component:hg,name:"proxy-diagnostic"},{path:"/technical-validation",component:Zu,name:"technical-validation"},{path:"/metadata-test",component:Rh,name:"metadata-test"},{path:"/technical-manager",component:Bg,name:"technical-manager"},{path:"/auto-update-monitor",component:Cf,name:"auto-update-monitor"},{path:"/system-manager",component:Gp,name:"system-manager"},{path:"/:pathMatch(.*)*",redirect:"/market-overview"}],Qp=ss({history:as(),routes:jp}),Kt=ns(Ss);Kt.use(Qp);Kt.mount("#app");setTimeout(()=>{console.log("üöÄ Initializing auto-update scheduler..."),Y.start()},1e4);setTimeout(()=>{console.log("üî• Initializing cache warmup service..."),ut.start()},5e3);
//# sourceMappingURL=index-PGwJU1lo.js.map
