<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deep YFinance Diagnosis</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.6; }
        .result { margin: 10px 0; padding: 15px; border-radius: 8px; }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        .warning { background: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
        .critical { background: #f8d7da; color: #721c24; border: 2px solid #dc3545; font-weight: bold; }
        button { background: #007bff; color: white; border: none; padding: 12px 24px; border-radius: 6px; cursor: pointer; margin: 8px; font-size: 14px; }
        button:hover { background: #0056b3; }
        button.success { background: #28a745; }
        button.success:hover { background: #218838; }
        button.critical { background: #dc3545; }
        button.critical:hover { background: #c82333; }
        .test-steps { background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 15px 0; border: 1px solid #e9ecef; }
        code { background: #f1f1f1; padding: 3px 6px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 13px; }
        .console-output { background: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 8px; font-family: monospace; font-size: 12px; margin: 10px 0; max-height: 400px; overflow-y: auto; }
        .url-highlight { background: #ffeb3b; padding: 4px 8px; border-radius: 4px; font-weight: bold; }
        .step-number { background: #007bff; color: white; border-radius: 50%; width: 30px; height: 30px; display: inline-flex; align-items: center; justify-content: center; margin-right: 10px; font-weight: bold; }
    </style>
</head>
<body>
    <h1>ğŸ” Deep YFinance Diagnosis</h1>
    
    <div class="result critical">
        <strong>ğŸš¨ é‡è¦ç™¼ç¾ï¼šæ‚¨ç›®å‰åœ¨æœ¬åœ°æª”æ¡ˆç³»çµ±æ¸¬è©¦ï¼</strong>
        <br><br>
        <strong>å•é¡Œ</strong>: è¨ºæ–·å·¥å…·é¡¯ç¤ºæ‚¨åœ¨ <code>file:///C:/Users/...</code>
        <br><strong>éœ€è¦</strong>: å¿…é ˆåœ¨ GitHub Pages ç¶²ç«™ä¸Šæ¸¬è©¦
        <br><strong>åŸå› </strong>: Vue æ‡‰ç”¨å’Œ API åªåœ¨ç¶²ç«™ä¸Šé‹ä½œï¼Œæœ¬åœ°æª”æ¡ˆç„¡æ³•å­˜å–
    </div>

    <div class="test-steps">
        <h3>ğŸ¯ æ­£ç¢ºçš„æ¸¬è©¦æ­¥é©Ÿï¼š</h3>
        
        <div style="display: flex; align-items: center; margin: 15px 0;">
            <span class="step-number">1</span>
            <div>
                <strong>æ‰“é–‹ GitHub Pages ç¶²ç«™</strong>
                <br>
                <span class="url-highlight">https://romarin-hsieh.github.io/investment-dashboard/</span>
            </div>
        </div>
        
        <div style="display: flex; align-items: center; margin: 15px 0;">
            <span class="step-number">2</span>
            <div>
                <strong>å°èˆªåˆ° Stock Detail é é¢</strong>
                <br>
                é»æ“Šä»»ä¸€è‚¡ç¥¨æˆ–ç›´æ¥è¨ªå•ï¼š
                <br>
                <span class="url-highlight">https://romarin-hsieh.github.io/investment-dashboard/#/stock-overview/symbols/NVDA</span>
            </div>
        </div>
        
        <div style="display: flex; align-items: center; margin: 15px 0;">
            <span class="step-number">3</span>
            <div>
                <strong>åœ¨è©²é é¢åŸ·è¡Œè¨ºæ–·</strong>
                <br>
                æŒ‰ F12 â†’ Console â†’ åŸ·è¡Œä¸‹æ–¹çš„è¨ºæ–·æŒ‡ä»¤
            </div>
        </div>
    </div>

    <button onclick="openCorrectPage()" class="critical">ğŸš€ æ‰“é–‹æ­£ç¢ºçš„æ¸¬è©¦é é¢</button>
    <button onclick="showConsoleCommands()" class="success">ğŸ“‹ é¡¯ç¤º Console è¨ºæ–·æŒ‡ä»¤</button>
    <button onclick="showTroubleshootingSteps()">ğŸ”§ é¡¯ç¤ºæ•…éšœæ’é™¤æ­¥é©Ÿ</button>

    <div id="results"></div>

    <script>
        function openCorrectPage() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = `
                <div class="result critical">
                    <strong>ğŸš€ è«‹ç«‹å³æ‰“é–‹æ­£ç¢ºçš„æ¸¬è©¦é é¢ï¼</strong>
                    <br><br>
                    
                    <h4>æ­¥é©Ÿ 1: æ‰“é–‹ GitHub Pages ç¶²ç«™</h4>
                    <a href="https://romarin-hsieh.github.io/investment-dashboard/" target="_blank" style="font-size: 1.2em; color: #dc3545; text-decoration: none; font-weight: bold;">
                        ğŸ‘‰ https://romarin-hsieh.github.io/investment-dashboard/
                    </a>
                    <br><br>
                    
                    <h4>æ­¥é©Ÿ 2: å°èˆªåˆ° Stock Detail é é¢</h4>
                    <a href="https://romarin-hsieh.github.io/investment-dashboard/#/stock-overview/symbols/NVDA" target="_blank" style="font-size: 1.2em; color: #dc3545; text-decoration: none; font-weight: bold;">
                        ğŸ‘‰ https://romarin-hsieh.github.io/investment-dashboard/#/stock-overview/symbols/NVDA
                    </a>
                    <br><br>
                    
                    <h4>æ­¥é©Ÿ 3: åœ¨æ–°é é¢åŸ·è¡Œè¨ºæ–·</h4>
                    <strong>é‡è¦</strong>: å¿…é ˆåœ¨ä¸Šè¿°ç¶²ç«™é é¢åŸ·è¡Œï¼Œä¸æ˜¯åœ¨æœ¬åœ°æª”æ¡ˆï¼
                    <br><br>
                    
                    <div style="background: #fff3cd; padding: 10px; border-radius: 4px; border: 1px solid #ffeaa7;">
                        <strong>âš ï¸ ç‚ºä»€éº¼æœ¬åœ°æª”æ¡ˆä¸è¡Œï¼Ÿ</strong>
                        <br>â€¢ Vue æ‡‰ç”¨éœ€è¦ HTTP/HTTPS å”è­°é‹è¡Œ
                        <br>â€¢ API è«‹æ±‚éœ€è¦ç¶²è·¯ç’°å¢ƒ
                        <br>â€¢ è·¯ç”±ç³»çµ±éœ€è¦ Web ä¼ºæœå™¨
                        <br>â€¢ æœ¬åœ° file:// å”è­°ç„¡æ³•æ¨¡æ“¬çœŸå¯¦ç’°å¢ƒ
                    </div>
                </div>
            `;
        }

        function showConsoleCommands() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = `
                <div class="result info">
                    <strong>ğŸ“‹ åœ¨ GitHub Pages ç¶²ç«™çš„ Console ä¸­åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼š</strong>
                    <br><br>
                    
                    <h4>ğŸ” å®Œæ•´è¨ºæ–·æŒ‡ä»¤ (è¤‡è£½è²¼ä¸Šåˆ° Console)</h4>
                    <div class="console-output">
// === YFinance å®Œæ•´è¨ºæ–· ===
console.log('ğŸš€ é–‹å§‹ YFinance è¨ºæ–·...');

// 1. æª¢æŸ¥é é¢ç’°å¢ƒ
console.log('1ï¸âƒ£ é é¢ç’°å¢ƒæª¢æŸ¥:');
console.log('URL:', window.location.href);
console.log('Protocol:', window.location.protocol);
console.log('Is GitHub Pages:', window.location.hostname.includes('github.io'));
console.log('Is Stock Detail:', window.location.href.includes('/stock-overview/symbols/'));

// 2. æª¢æŸ¥ Vue æ‡‰ç”¨
console.log('\\n2ï¸âƒ£ Vue æ‡‰ç”¨æª¢æŸ¥:');
const app = document.querySelector('#app');
console.log('Vue App Element:', !!app);
const techIndicators = document.querySelector('.technical-indicators');
console.log('TechnicalIndicators Component:', !!techIndicators);

if (techIndicators) {
    // 3. æª¢æŸ¥ Build Stamp
    console.log('\\n3ï¸âƒ£ Build Stamp æª¢æŸ¥:');
    const buildStamp = document.querySelector('.technical-indicators h4')?.textContent;
    console.log('Build Stamp:', buildStamp);
    console.log('Contains BUILD-2026-01-03-01:', buildStamp?.includes('BUILD-2026-01-03-01'));
    
    // 4. æª¢æŸ¥æŒ‡æ¨™æ•¸é‡
    console.log('\\n4ï¸âƒ£ æŒ‡æ¨™æ•¸é‡æª¢æŸ¥:');
    const indicators = document.querySelectorAll('.indicator-item');
    console.log('Total Indicators:', indicators.length);
    console.log('Expected: 19 (18 indicators + 1 debug)');
    
    // 5. æª¢æŸ¥ YFinance æŒ‡æ¨™
    console.log('\\n5ï¸âƒ£ YFinance æŒ‡æ¨™æª¢æŸ¥:');
    const yfLabels = ['Volume', '5D Avg Volume', 'Market Cap', 'Beta (3mo)', 'Beta (1y)', 'Beta (5y)'];
    const foundLabels = Array.from(document.querySelectorAll('.indicator-label'))
        .map(el => el.textContent.trim())
        .filter(text => yfLabels.includes(text));
    console.log('Found YFinance Labels:', foundLabels);
    console.log('Missing YFinance Labels:', yfLabels.filter(label => !foundLabels.includes(label)));
    
    // 6. æª¢æŸ¥ Debug å€å¡Š
    console.log('\\n6ï¸âƒ£ Debug å€å¡Šæª¢æŸ¥:');
    const debugBlock = document.querySelector('[style*="color: #856404"]');
    if (debugBlock) {
        const debugText = debugBlock.textContent;
        console.log('Debug Block Found:', true);
        console.log('Debug Content:', debugText);
        console.log('Contains yfKeys:', debugText.includes('yfKeys:'));
        console.log('Shows "none":', debugText.includes('yfKeys: none'));
        
        // æå– yfKeys å…§å®¹
        const yfKeysMatch = debugText.match(/yfKeys: ([^|]+)/);
        if (yfKeysMatch) {
            console.log('YF Keys Content:', yfKeysMatch[1].trim());
        }
    } else {
        console.log('Debug Block Found:', false);
    }
} else {
    console.log('âŒ TechnicalIndicators çµ„ä»¶æœªæ‰¾åˆ°ï¼');
    console.log('è«‹ç¢ºèªï¼š');
    console.log('1. åœ¨æ­£ç¢ºçš„ Stock Detail é é¢');
    console.log('2. é é¢å·²å®Œå…¨è¼‰å…¥');
    console.log('3. æ²’æœ‰ JavaScript éŒ¯èª¤');
}

// 7. æª¢æŸ¥ API è³‡æ–™
console.log('\\n7ï¸âƒ£ API è³‡æ–™æª¢æŸ¥:');
const baseUrl = window.location.origin + window.location.pathname.replace(/\\/[^/]*$/, '/');
const indexUrl = baseUrl + 'data/technical-indicators/latest_index.json';
console.log('Testing API URL:', indexUrl);

fetch(indexUrl)
    .then(response => {
        console.log('API Response Status:', response.status);
        if (response.ok) {
            return response.json();
        } else {
            throw new Error('HTTP ' + response.status);
        }
    })
    .then(data => {
        console.log('âœ… API è³‡æ–™è¼‰å…¥æˆåŠŸ');
        console.log('Available Symbols:', data.symbols?.length || 0);
        console.log('Data Date:', data.date);
        
        // æ¸¬è©¦å–®ä¸€è‚¡ç¥¨è³‡æ–™
        if (data.symbols && data.symbols.length > 0) {
            const testSymbol = data.symbols[0];
            const dataUrl = baseUrl + 'data/technical-indicators/' + data.date + '_' + testSymbol + '.json';
            
            return fetch(dataUrl).then(r => r.json()).then(stockData => {
                console.log('\\nğŸ“Š è‚¡ç¥¨è³‡æ–™æª¢æŸ¥ (' + testSymbol + '):');
                console.log('Has indicators:', !!stockData.indicators);
                console.log('Has YF data:', !!(stockData.indicators && stockData.indicators.yf));
                if (stockData.indicators && stockData.indicators.yf) {
                    console.log('YF Keys:', Object.keys(stockData.indicators.yf));
                    console.log('YF Data Sample:', stockData.indicators.yf);
                }
            });
        }
    })
    .catch(error => {
        console.log('âŒ API è³‡æ–™è¼‰å…¥å¤±æ•—:', error.message);
    });

console.log('\\nâœ… è¨ºæ–·å®Œæˆï¼è«‹æŸ¥çœ‹ä¸Šæ–¹çµæœã€‚');
                    </div>
                    
                    <br>
                    <strong>ğŸ“‹ ä½¿ç”¨æ–¹æ³•ï¼š</strong>
                    <br>1. è¤‡è£½ä¸Šæ–¹æ•´å€‹ç¨‹å¼ç¢¼å€å¡Š
                    <br>2. åœ¨ GitHub Pages ç¶²ç«™æŒ‰ F12 é–‹å•Ÿ Console
                    <br>3. è²¼ä¸Šä¸¦æŒ‰ Enter åŸ·è¡Œ
                    <br>4. æŸ¥çœ‹è©³ç´°è¨ºæ–·çµæœ
                </div>
            `;
        }

        function showTroubleshootingSteps() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = `
                <div class="result warning">
                    <strong>ğŸ”§ æ•…éšœæ’é™¤æ­¥é©Ÿï¼š</strong>
                    <br><br>
                    
                    <h4>å¦‚æœåœ¨æ­£ç¢ºç¶²ç«™ä¸Šä»çœ‹åˆ°å•é¡Œï¼š</h4>
                    
                    <h5>1. æ¸…é™¤å¿«å–å•é¡Œ</h5>
                    <strong>æ–¹æ³• A - å¼·åˆ¶é‡æ–°æ•´ç†ï¼š</strong>
                    <br>â€¢ Windows: Ctrl + Shift + R
                    <br>â€¢ Mac: Cmd + Shift + R
                    <br><br>
                    
                    <strong>æ–¹æ³• B - é–‹ç™¼è€…å·¥å…·ï¼š</strong>
                    <br>â€¢ æŒ‰ F12 â†’ Network é¢æ¿
                    <br>â€¢ å‹¾é¸ "Disable cache"
                    <br>â€¢ é‡æ–°æ•´ç†é é¢
                    <br><br>
                    
                    <strong>æ–¹æ³• C - æ¸…é™¤ç¶²ç«™è³‡æ–™ï¼š</strong>
                    <br>â€¢ æŒ‰ F12 â†’ Application é¢æ¿
                    <br>â€¢ å·¦å´é¸æ“‡ "Storage"
                    <br>â€¢ é»æ“Š "Clear site data"
                    <br><br>
                    
                    <h5>2. Service Worker å•é¡Œ</h5>
                    <br>â€¢ æŒ‰ F12 â†’ Application é¢æ¿
                    <br>â€¢ å·¦å´é¸æ“‡ "Service Workers"
                    <br>â€¢ å¦‚æœæœ‰è¨»å†Šçš„ SWï¼Œé»æ“Š "Unregister"
                    <br>â€¢ é‡æ–°æ•´ç†é é¢
                    <br><br>
                    
                    <h5>3. éƒ¨ç½²ç‰ˆæœ¬å•é¡Œ</h5>
                    <br>â€¢ æª¢æŸ¥ GitHub Actions æ˜¯å¦å®Œæˆ
                    <br>â€¢ ç­‰å¾… 2-3 åˆ†é˜è®“ GitHub Pages æ›´æ–°
                    <br>â€¢ ç¢ºèªæœ€æ–° commit å·²éƒ¨ç½²
                    <br><br>
                    
                    <h5>4. ç€è¦½å™¨ç›¸å®¹æ€§</h5>
                    <br>â€¢ å˜—è©¦ä¸åŒç€è¦½å™¨ (Chrome, Firefox, Edge)
                    <br>â€¢ ç¢ºèª JavaScript å·²å•Ÿç”¨
                    <br>â€¢ æª¢æŸ¥æ˜¯å¦æœ‰æ“´å……åŠŸèƒ½å¹²æ“¾
                    <br><br>
                    
                    <div style="background: #f8d7da; padding: 10px; border-radius: 4px; border: 1px solid #f5c6cb;">
                        <strong>ğŸš¨ å¦‚æœæ‰€æœ‰æ­¥é©Ÿéƒ½ç„¡æ•ˆï¼š</strong>
                        <br>1. åŸ·è¡Œä¸Šæ–¹çš„ Console è¨ºæ–·æŒ‡ä»¤
                        <br>2. æˆªåœ– Console è¼¸å‡ºçµæœ
                        <br>3. æä¾›å…·é«”çš„éŒ¯èª¤è¨Šæ¯
                        <br>4. èªªæ˜åœ¨å“ªå€‹æ­¥é©Ÿå¡ä½
                    </div>
                </div>
            `;
        }

        // è‡ªå‹•é¡¯ç¤ºæ­£ç¢ºé é¢æŒ‡å¼•
        setTimeout(() => {
            openCorrectPage();
        }, 1000);
    </script>
</body>
</html>