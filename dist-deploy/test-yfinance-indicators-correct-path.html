<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YFinance Indicators - Correct Path Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.6; }
        .result { margin: 10px 0; padding: 15px; border-radius: 8px; }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        .warning { background: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
        .critical { background: #f8d7da; color: #721c24; border: 2px solid #dc3545; font-weight: bold; }
        button { background: #007bff; color: white; border: none; padding: 12px 24px; border-radius: 6px; cursor: pointer; margin: 8px; font-size: 14px; }
        button:hover { background: #0056b3; }
        button.success { background: #28a745; }
        button.success:hover { background: #218838; }
        .test-steps { background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 15px 0; border: 1px solid #e9ecef; }
        code { background: #f1f1f1; padding: 3px 6px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 13px; }
        .highlight { background: #ffeb3b; padding: 2px 4px; border-radius: 3px; }
        h1 { color: #333; border-bottom: 2px solid #007bff; padding-bottom: 10px; }
        h3 { color: #495057; margin-top: 25px; }
        .url-box { background: #e9ecef; padding: 10px; border-radius: 4px; font-family: monospace; margin: 10px 0; }
        .checklist { background: #f8f9fa; padding: 15px; border-left: 4px solid #007bff; margin: 15px 0; }
        .checklist ul { margin: 0; padding-left: 20px; }
        .checklist li { margin: 5px 0; }
    </style>
</head>
<body>
    <h1>ğŸ¯ YFinance Indicators æ­£ç¢ºè·¯å¾‘æ¸¬è©¦</h1>
    
    <div class="result critical">
        <strong>ğŸš¨ é—œéµç™¼ç¾ï¼šæˆ‘å€‘ä¸€ç›´åœ¨éŒ¯èª¤çš„é é¢æ¸¬è©¦ï¼</strong>
        <br><br>
        <strong>éŒ¯èª¤ï¼š</strong> åœ¨ Stock Overview é é¢ (<code>/#/stock-overview</code>) å°‹æ‰¾ TechnicalIndicators
        <br><strong>æ­£ç¢ºï¼š</strong> TechnicalIndicators çµ„ä»¶åªåœ¨ Stock Detail é é¢ (<code>/#/stock-overview/symbols/SYMBOL</code>)
        <br><br>
        <span class="highlight">é€™å°±æ˜¯ç‚ºä»€éº¼ä¸€ç›´çœ‹åˆ° "yfKeys: none" çš„åŸå›  - æˆ‘å€‘æ ¹æœ¬ä¸åœ¨æ­£ç¢ºçš„é é¢ä¸Šï¼</span>
    </div>

    <div class="test-steps">
        <h3>ğŸ“ æ­£ç¢ºçš„æ¸¬è©¦è·¯å¾‘ï¼š</h3>
        <div class="url-box">
            âŒ éŒ¯èª¤ï¼šhttps://romarin-hsieh.github.io/investment-dashboard/#/stock-overview
            <br>
            âœ… æ­£ç¢ºï¼šhttps://romarin-hsieh.github.io/investment-dashboard/#/stock-overview/symbols/NVDA
        </div>
        
        <strong>çµ„ä»¶ä½ç½®ç¢ºèªï¼š</strong>
        <ul>
            <li>âœ… <code>src/pages/StockDetail.vue</code> - åŒ…å« TechnicalIndicators çµ„ä»¶</li>
            <li>âŒ <code>src/components/StockOverview.vue</code> - ä¸åŒ…å« TechnicalIndicators çµ„ä»¶</li>
        </ul>
    </div>

    <div class="checklist">
        <h3>ğŸ” æ¸¬è©¦æª¢æŸ¥æ¸…å–®ï¼š</h3>
        <ul>
            <li>â–¡ é€²å…¥æ­£ç¢ºçš„ Stock Detail é é¢</li>
            <li>â–¡ æ»¾å‹•åˆ°é é¢ä¸‹æ–¹æ‰¾åˆ° "Technical Indicators [BUILD-2026-01-03-01]" å€åŸŸ</li>
            <li>â–¡ è¨ˆç®—æŒ‡æ¨™é …ç›®æ•¸é‡ï¼ˆæ‡‰è©²æ˜¯ 19 å€‹ï¼ŒåŒ…å« 1 å€‹é»ƒè‰²é™¤éŒ¯å€å¡Šï¼‰</li>
            <li>â–¡ ç¢ºèªçœ‹åˆ° 6 å€‹ YFinance æŒ‡æ¨™ï¼šVolume, 5D Avg Volume, Market Cap, Beta (3mo), Beta (1y), Beta (5y)</li>
            <li>â–¡ æª¢æŸ¥é»ƒè‰²é™¤éŒ¯å€å¡Šé¡¯ç¤º <code>yfKeys: volume_last_day, volume_last_day_pct, ...</code></li>
            <li>â–¡ Console ä¸­çœ‹åˆ° <code>BUILD_STAMP=2026-01-03_yf_fix_01</code></li>
        </ul>
    </div>

    <h3>ğŸš€ ç«‹å³æ¸¬è©¦ï¼š</h3>
    <button onclick="openNVDADetail()" class="success">æ‰“é–‹ NVDA Stock Detail</button>
    <button onclick="openTSLADetail()" class="success">æ‰“é–‹ TSLA Stock Detail</button>
    <button onclick="openAAPLDetail()" class="success">æ‰“é–‹ AAPL Stock Detail</button>
    <button onclick="runConsoleTests()">Console æ¸¬è©¦æŒ‡ä»¤</button>
    <button onclick="showDeploymentCheck()">æª¢æŸ¥éƒ¨ç½²ç‹€æ…‹</button>

    <div id="results"></div>

    <script>
        function openNVDADetail() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = `
                <div class="result success">
                    <strong>ğŸš€ æ­£åœ¨æ‰“é–‹ NVDA Stock Detail é é¢...</strong>
                    <br><br>
                    <a href="https://romarin-hsieh.github.io/investment-dashboard/#/stock-overview/symbols/NVDA" target="_blank" style="font-size: 1.3em; color: #007bff; text-decoration: none; font-weight: bold;">
                        ğŸ‘‰ é»æ“Šé€™è£¡æ‰“é–‹ NVDA Stock Detail é é¢
                    </a>
                    <br><br>
                    <strong>ğŸ“‹ åœ¨æ–°é é¢ä¸­æª¢æŸ¥ï¼š</strong>
                    <br>1. é é¢æ¨™é¡Œæ‡‰è©²é¡¯ç¤º "NVDA Analysis"
                    <br>2. æ»¾å‹•åˆ°ä¸‹æ–¹æ‰¾åˆ° "Technical Indicators [BUILD-2026-01-03-01]" å€åŸŸ
                    <br>3. è¨ˆç®— .indicator-item æ•¸é‡ï¼ˆæ‡‰è©²æ˜¯ 19 å€‹ï¼‰
                    <br>4. ç¢ºèªçœ‹åˆ° YFinance æŒ‡æ¨™ï¼šVolume, 5D Avg Volume, Market Cap, Beta ç³»åˆ—
                    <br>5. é»ƒè‰²é™¤éŒ¯å€å¡Šæ‡‰è©²é¡¯ç¤º yfKeys è€Œä¸æ˜¯ "none"
                    <br><br>
                    <strong>ğŸ” å¦‚æœä»ç„¶çœ‹åˆ°å•é¡Œï¼Œè«‹åŸ·è¡Œ Console æ¸¬è©¦ä¾†è¨ºæ–·ã€‚</strong>
                </div>
            `;
        }

        function openTSLADetail() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = `
                <div class="result success">
                    <strong>ğŸš€ æ­£åœ¨æ‰“é–‹ TSLA Stock Detail é é¢...</strong>
                    <br><br>
                    <a href="https://romarin-hsieh.github.io/investment-dashboard/#/stock-overview/symbols/TSLA" target="_blank" style="font-size: 1.3em; color: #007bff; text-decoration: none; font-weight: bold;">
                        ğŸ‘‰ é»æ“Šé€™è£¡æ‰“é–‹ TSLA Stock Detail é é¢
                    </a>
                    <br><br>
                    <strong>æ¸¬è©¦ä¸åŒè‚¡ç¥¨çš„ YFinance æŒ‡æ¨™æ˜¯å¦æ­£å¸¸å·¥ä½œ</strong>
                </div>
            `;
        }

        function openAAPLDetail() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = `
                <div class="result success">
                    <strong>ğŸš€ æ­£åœ¨æ‰“é–‹ AAPL Stock Detail é é¢...</strong>
                    <br><br>
                    <a href="https://romarin-hsieh.github.io/investment-dashboard/#/stock-overview/symbols/AAPL" target="_blank" style="font-size: 1.3em; color: #007bff; text-decoration: none; font-weight: bold;">
                        ğŸ‘‰ é»æ“Šé€™è£¡æ‰“é–‹ AAPL Stock Detail é é¢
                    </a>
                    <br><br>
                    <strong>æ¸¬è©¦ç¬¬ä¸‰å€‹è‚¡ç¥¨çš„ YFinance æŒ‡æ¨™</strong>
                </div>
            `;
        }

        function runConsoleTests() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = `
                <div class="result warning">
                    <strong>ğŸ” Console è¨ºæ–·æ¸¬è©¦æŒ‡ä»¤ï¼š</strong>
                    <br><br>
                    <strong>æ­¥é©Ÿ 1ï¼š</strong> å…ˆæ‰“é–‹ä»»ä¸€ Stock Detail é é¢ï¼Œç„¶å¾ŒæŒ‰ F12 é–‹å•Ÿé–‹ç™¼è€…å·¥å…·
                    <br><br>
                    <strong>æ­¥é©Ÿ 2ï¼š</strong> åœ¨ Console ä¸­ä¾åºåŸ·è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
                    <br><br>
                    
                    <h4>A. æª¢æŸ¥é é¢é¡å‹</h4>
                    <code style="display: block; padding: 10px; background: #f8f9fa; margin: 5px 0;">
                        console.log('Current URL:', window.location.href);
                        console.log('Is Stock Detail page:', window.location.href.includes('/stock-overview/symbols/'));
                    </code>
                    
                    <h4>B. æª¢æŸ¥ TechnicalIndicators çµ„ä»¶</h4>
                    <code style="display: block; padding: 10px; background: #f8f9fa; margin: 5px 0;">
                        const techIndicators = document.querySelector('.technical-indicators');
                        console.log('TechnicalIndicators element found:', !!techIndicators);
                        if (techIndicators) {
                            console.log('Build stamp in title:', document.querySelector('.technical-indicators h4')?.textContent);
                        }
                    </code>
                    
                    <h4>C. æª¢æŸ¥æŒ‡æ¨™æ•¸é‡</h4>
                    <code style="display: block; padding: 10px; background: #f8f9fa; margin: 5px 0;">
                        const indicators = document.querySelectorAll('.indicator-item');
                        console.log('Total indicator items:', indicators.length);
                        console.log('Should be 19 (18 indicators + 1 debug block)');
                    </code>
                    
                    <h4>D. æª¢æŸ¥ YFinance æŒ‡æ¨™</h4>
                    <code style="display: block; padding: 10px; background: #f8f9fa; margin: 5px 0;">
                        const yfLabels = ['Volume', '5D Avg Volume', 'Market Cap', 'Beta (3mo)', 'Beta (1y)', 'Beta (5y)'];
                        const foundLabels = Array.from(document.querySelectorAll('.indicator-label'))
                            .map(el => el.textContent.trim())
                            .filter(text => yfLabels.includes(text));
                        console.log('Found YFinance indicators:', foundLabels);
                        console.log('Missing YFinance indicators:', yfLabels.filter(label => !foundLabels.includes(label)));
                    </code>
                    
                    <h4>E. æª¢æŸ¥é™¤éŒ¯å€å¡Š</h4>
                    <code style="display: block; padding: 10px; background: #f8f9fa; margin: 5px 0;">
                        const debugBlock = document.querySelector('[style*="color: #856404"]');
                        if (debugBlock) {
                            console.log('Debug block content:', debugBlock.textContent);
                            console.log('Contains yfKeys:', debugBlock.textContent.includes('yfKeys:'));
                            console.log('Shows "none":', debugBlock.textContent.includes('yfKeys: none'));
                        } else {
                            console.log('Debug block not found');
                        }
                    </code>
                    
                    <br>
                    <strong>ğŸ¯ é æœŸçµæœï¼š</strong>
                    <br>â€¢ A: æ‡‰è©²é¡¯ç¤º Stock Detail URL ä¸” Is Stock Detail page: true
                    <br>â€¢ B: æ‡‰è©²æ‰¾åˆ° TechnicalIndicators å…ƒç´ ä¸”æ¨™é¡ŒåŒ…å« BUILD-2026-01-03-01
                    <br>â€¢ C: æ‡‰è©²é¡¯ç¤º 19 å€‹æŒ‡æ¨™é …ç›®
                    <br>â€¢ D: æ‡‰è©²æ‰¾åˆ°å…¨éƒ¨ 6 å€‹ YFinance æŒ‡æ¨™
                    <br>â€¢ E: é™¤éŒ¯å€å¡Šæ‡‰è©²é¡¯ç¤º yfKeys è€Œä¸æ˜¯ "none"
                </div>
            `;
        }

        function showDeploymentCheck() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = `
                <div class="result info">
                    <strong>ğŸ” éƒ¨ç½²ç‹€æ…‹æª¢æŸ¥ï¼š</strong>
                    <br><br>
                    <strong>å¦‚æœåœ¨ Stock Detail é é¢ä»ç„¶çœ‹åˆ°å•é¡Œï¼Œå¯èƒ½çš„åŸå› ï¼š</strong>
                    <br><br>
                    
                    <h4>1. å¿«å–å•é¡Œ</h4>
                    <strong>è§£æ±ºæ–¹æ³•ï¼š</strong>
                    <br>â€¢ æŒ‰ Ctrl+Shift+R (Windows) æˆ– Cmd+Shift+R (Mac) å¼·åˆ¶é‡æ–°æ•´ç†
                    <br>â€¢ æˆ–è€…æŒ‰ F12 â†’ Network é¢æ¿ â†’ å‹¾é¸ "Disable cache" â†’ é‡æ–°æ•´ç†
                    <br>â€¢ æˆ–è€…æŒ‰ F12 â†’ Application â†’ Storage â†’ Clear site data
                    <br><br>
                    
                    <h4>2. éƒ¨ç½²æœªå®Œæˆ</h4>
                    <strong>æª¢æŸ¥æ–¹æ³•ï¼š</strong>
                    <br>â€¢ æª¢æŸ¥ GitHub Actions æ˜¯å¦å®Œæˆéƒ¨ç½²
                    <br>â€¢ ç­‰å¾… 2-3 åˆ†é˜å¾Œå†æ¸¬è©¦
                    <br>â€¢ æª¢æŸ¥ GitHub Pages è¨­å®šæ˜¯å¦æ­£ç¢º
                    <br><br>
                    
                    <h4>3. Service Worker å¿«å–</h4>
                    <strong>è§£æ±ºæ–¹æ³•ï¼š</strong>
                    <br>â€¢ æŒ‰ F12 â†’ Application â†’ Service Workers â†’ Unregister
                    <br>â€¢ ç„¶å¾Œæ¸…é™¤å¿«å–ä¸¦é‡æ–°æ•´ç†
                    <br><br>
                    
                    <h4>4. é©—è­‰éƒ¨ç½²ç‰ˆæœ¬</h4>
                    <strong>åœ¨ Console ä¸­åŸ·è¡Œï¼š</strong>
                    <br>
                    <code style="display: block; padding: 10px; background: #f8f9fa; margin: 5px 0;">
                        // æœå°‹ BUILD_STAMP
                        console.log('Searching for BUILD_STAMP in console history...');
                        // æª¢æŸ¥åŸå§‹ç¢¼
                        fetch(window.location.origin + window.location.pathname + 'assets/index.js')
                            .then(r => r.text())
                            .then(text => {
                                console.log('Contains BUILD_STAMP:', text.includes('BUILD_STAMP=2026-01-03_yf_fix_01'));
                                console.log('Contains emergency fix:', text.includes('EMERGENCY FIX'));
                            })
                            .catch(e => console.log('Could not check build version:', e));
                    </code>
                </div>
            `;
        }

        // è‡ªå‹•é¡¯ç¤º NVDA æ¸¬è©¦
        setTimeout(() => {
            openNVDADetail();
        }, 1000);
    </script>
</body>
</html>