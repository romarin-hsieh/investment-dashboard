{"version":3,"mappings":";myCAmDKA,GAAU,CACb,KAAM,QACR,EApDOC,GAAA,OAAM,QAAQ,EACTC,GAAA,OAAM,QAAQ,EACfC,GAAA,OAAM,KAAK,EACTC,GAAA,OAAM,WAAW,EAIhBC,GAAA,OAAM,UAAU,EAmBpBC,GAAA,OAAM,cAAc,EACnBC,GAAA,OAAM,WAAW,oDA3B1B,OAAAC,EAAA,EAAAC,EA8CM,MA9CNR,GA8CM,CA7CJS,EAuBS,SAvBTR,GAuBS,CAtBPQ,EAqBM,MArBNP,GAqBM,CApBJO,EAmBM,MAnBNN,GAmBM,aAlBJM,EAEM,OAFD,MAAM,aAAW,CACpBA,EAA6B,UAAzB,sBAAoB,QAE1BA,EAcK,KAdLL,GAcK,CAbHK,EAEK,WADHC,EAAiFC,EAAA,CAApE,GAAG,mBAAmB,MAAM,wBAAW,IAAe,IAAAC,EAAA,KAAAA,EAAA,MAAf,kBAAe,gBAErEH,EAEK,WADHC,EAA+EC,EAAA,CAAlE,GAAG,kBAAkB,MAAM,wBAAW,IAAc,IAAAC,EAAA,KAAAA,EAAA,MAAd,iBAAc,gBAMnEH,EAEK,WADHC,EAA8EC,EAAA,CAAjE,GAAG,kBAAkB,MAAM,wBAAW,IAAa,IAAAC,EAAA,KAAAA,EAAA,MAAb,gBAAa,wBAO1EH,EAIO,OAJPJ,GAIO,CAHLI,EAEM,MAFNH,GAEM,CADJO,GAAQC,EAAA,wlBChBXf,GAAU,CACb,KAAM,MACN,WAAY,CACV,OAAAgB,EACF,CACF,EAjBOf,GAAA,IAAG,KAAK,kEAAb,OAAAO,EAAA,EAAAC,EAMM,MANNR,GAMM,CALJU,EAISM,EAAA,iBAHP,IAEc,CAFdN,EAEcO,EAAA,iBADZ,CAA+C,CAD1B,UAAAC,EAAW,MAAAC,CAAK,MACrCZ,IAAAa,GAA+CC,GAA/BH,CAAS,GAAG,IAAKC,EAAM,yDCC/C,MAAMG,EAAgB,CACpB,aAAc,CACZ,KAAK,iBAAmB,IAAI,IAC5B,KAAK,eAAiB,IAAI,GAC5B,CAKA,cAAcC,EAAW,CACvB,GAAI,KAAK,iBAAiB,IAAIA,CAAS,EACrC,OAAO,QAAQ,QAAO,EAGxB,GAAI,KAAK,eAAe,IAAIA,CAAS,EACnC,OAAO,KAAK,eAAe,IAAIA,CAAS,EAG1C,MAAMC,EAAU,IAAI,QAAQ,CAACC,EAASC,IAAW,CAC/C,MAAMC,EAAO,SAAS,cAAc,MAAM,EAC1CA,EAAK,IAAM,UACXA,EAAK,GAAK,SACVA,EAAK,KAAOJ,EACZI,EAAK,YAAc,YAEnBA,EAAK,OAAS,IAAM,CAClB,KAAK,iBAAiB,IAAIJ,CAAS,EACnCE,EAAO,CACT,EAEAE,EAAK,QAAU,IAAM,CACnBD,EAAO,IAAI,MAAM,6BAA6BH,CAAS,EAAE,CAAC,CAC5D,EAEA,SAAS,KAAK,YAAYI,CAAI,CAChC,CAAC,EAED,YAAK,eAAe,IAAIJ,EAAWC,CAAO,EACnCA,CACT,CAKA,MAAM,mBAAoB,CACxB,MAAMI,EAAU,CACd,gFACA,kFACN,EAEI,GAAI,CACF,MAAM,QAAQ,IAAIA,EAAQ,IAAIC,GAAU,KAAK,cAAcA,CAAM,CAAC,CAAC,EACnE,QAAQ,IAAI,gDAAgD,CAC9D,OAASC,EAAO,CACd,QAAQ,KAAK,8CAA+CA,CAAK,CACnE,CACF,CAKA,YAAYP,EAAW,CACrB,OAAO,KAAK,iBAAiB,IAAIA,CAAS,CAC5C,CACF,CAGO,MAAMQ,GAAkB,IAAIT,GAG/B,OAAO,OAAW,KACpB,OAAO,iBAAiB,OAAQ,IAAM,CAEpC,WAAW,IAAM,CACfS,GAAgB,kBAAiB,CACnC,EAAG,GAAI,CACT,CAAC,wgCC9EH,IAAAC,GAAA,KAAyB,CACvB,aAAc,CACZ,KAAK,QAAU,IAAI,IACnB,KAAK,WAAa,IAAI,GACxB,CAGA,MAAMC,EAAO,CACX,KAAK,WAAW,IAAIA,EAAO,YAAY,IAAG,CAAE,EAC5C,QAAQ,IAAI,sBAAsBA,CAAK,EAAE,CAC3C,CAGA,IAAIA,EAAO,CACT,MAAMC,EAAY,KAAK,WAAW,IAAID,CAAK,EAC3C,GAAI,CAACC,EACH,eAAQ,KAAK,4BAA4BD,CAAK,EAAE,EACzC,KAGT,MAAME,EAAW,YAAY,IAAG,EAAKD,EACrC,YAAK,QAAQ,IAAID,EAAOE,CAAQ,EAChC,KAAK,WAAW,OAAOF,CAAK,EAE5B,QAAQ,IAAI,gBAAgBA,CAAK,MAAME,EAAS,QAAQ,CAAC,CAAC,IAAI,EACvDA,CACT,CAGA,UAAUF,EAAO,CACf,OAAO,KAAK,QAAQ,IAAIA,CAAK,CAC/B,CAGA,eAAgB,CACd,OAAO,OAAO,YAAY,KAAK,OAAO,CACxC,CAGA,OAAQ,CACN,KAAK,QAAQ,MAAK,EAClB,KAAK,WAAW,MAAK,CACvB,CAGA,MAAM,aAAaA,EAAOG,EAAe,CACvC,KAAK,MAAMH,CAAK,EAChB,GAAI,CACF,MAAMI,EAAS,MAAMD,EAAa,EAClC,YAAK,IAAIH,CAAK,EACPI,CACT,OAASP,EAAO,CACd,WAAK,IAAIG,CAAK,EACd,QAAQ,MAAM,cAAcA,CAAK,IAAKH,CAAK,EACrCA,CACR,CACF,CAGA,gBAAiB,CACf,MAAMQ,EAAU,KAAK,cAAa,EAC5BC,EAAS,CACb,UAAW,IAAI,KAAI,EAAG,YAAW,EACjC,QAAAD,EACA,QAAS,CACP,gBAAiB,OAAO,KAAKA,CAAO,EAAE,OACtC,UAAW,OAAO,OAAOA,CAAO,EAAE,OAAO,CAACE,EAAKC,IAASD,EAAMC,EAAM,CAAC,EACrE,YAAa,OAAO,OAAOH,CAAO,EAAE,OAAO,CAACE,EAAKC,IAASD,EAAMC,EAAM,CAAC,EAAI,OAAO,KAAKH,CAAO,EAAE,QAAU,EAC1G,iBAAkB,KAAK,oBAAmB,EAC1C,iBAAkB,KAAK,oBAAmB,CAClD,CACA,EAEI,eAAQ,IAAI,yBAA0BC,CAAM,EACrCA,CACT,CAGA,qBAAsB,CACpB,IAAIG,EAAU,CAAE,KAAM,KAAM,KAAM,CAAC,EACnC,SAAW,CAACC,EAAMF,CAAI,IAAK,KAAK,QAC1BA,EAAOC,EAAQ,OACjBA,EAAU,CAAE,KAAAC,EAAM,KAAAF,CAAI,GAG1B,OAAOC,CACT,CAGA,qBAAsB,CACpB,IAAIE,EAAU,CAAE,KAAM,KAAM,KAAM,GAAQ,EAC1C,SAAW,CAACD,EAAMF,CAAI,IAAK,KAAK,QAC1BA,EAAOG,EAAQ,OACjBA,EAAU,CAAE,KAAAD,EAAM,KAAAF,CAAI,GAG1B,OAAOG,EAAQ,OAAS,IAAW,CAAE,KAAM,KAAM,KAAM,CAAC,EAAKA,CAC/D,CAGA,0BAA2B,CACzB,MAAMC,EAAW,GACXP,EAAU,KAAK,cAAa,EAGlC,OAAO,QAAQA,CAAO,EAAE,QAAQ,CAAC,CAACK,EAAMF,CAAI,IAAM,CAC5CA,EAAO,KACTI,EAAS,KAAK,CACZ,KAAM,iBACN,UAAWF,EACX,KAAMF,EACN,QAAS,cAAcE,CAAI,UAAUF,EAAK,QAAQ,CAAC,CAAC,UAC9D,CAAS,CAEL,CAAC,EAGD,MAAMK,EAAY,OAAO,OAAOR,CAAO,EAAE,OAAO,CAACE,EAAKC,IAASD,EAAMC,EAAM,CAAC,EAC5E,OAAIK,EAAY,KACdD,EAAS,KAAK,CACZ,KAAM,kBACN,KAAMC,EACN,QAAS,mBAAmBA,EAAU,QAAQ,CAAC,CAAC,WACxD,CAAO,EAGCD,EAAS,OAAS,GACpB,QAAQ,KAAK,2BAA4BA,CAAQ,EAG5CA,CACT,CACF,EAGO,MAAME,GAAqB,IAAIC,GCvItC,MAAMC,EAAiB,CACrB,aAAc,CACZ,KAAK,YAAc,IAAI,IACvB,KAAK,mBAAqB,8BAC1B,KAAK,WAAa,GAAK,GAAK,GAAK,GACnC,CAGA,IAAIC,EAAKC,EAAMC,EAAM,KAAK,WAAY,CACpC,MAAMC,EAAY,CAChB,KAAAF,EACA,UAAW,KAAK,IAAG,EACnB,IAAAC,CACN,EAGI,KAAK,YAAY,IAAIF,EAAKG,CAAS,EAGnC,GAAI,CACF,aAAa,QACX,KAAK,mBAAqBH,EAC1B,KAAK,UAAUG,CAAS,CAChC,CACI,OAASvB,EAAO,CACd,QAAQ,KAAK,kCAAmCA,CAAK,CACvD,CACF,CAGA,IAAIoB,EAAK,CAEP,GAAI,KAAK,YAAY,IAAIA,CAAG,EAAG,CAC7B,MAAMI,EAAO,KAAK,YAAY,IAAIJ,CAAG,EACrC,GAAI,KAAK,QAAQI,CAAI,EACnB,OAAOA,EAAK,KAEZ,KAAK,YAAY,OAAOJ,CAAG,CAE/B,CAGA,GAAI,CACF,MAAMK,EAAS,aAAa,QAAQ,KAAK,mBAAqBL,CAAG,EACjE,GAAIK,EAAQ,CACV,MAAMD,EAAO,KAAK,MAAMC,CAAM,EAC9B,GAAI,KAAK,QAAQD,CAAI,EAEnB,YAAK,YAAY,IAAIJ,EAAKI,CAAI,EACvBA,EAAK,KAEZ,aAAa,WAAW,KAAK,mBAAqBJ,CAAG,CAEzD,CACF,OAASpB,EAAO,CACd,QAAQ,KAAK,oCAAqCA,CAAK,CACzD,CAEA,OAAO,IACT,CAGA,QAAQwB,EAAM,CACZ,MAAI,CAACA,GAAQ,CAACA,EAAK,UAAkB,GAC9B,KAAK,IAAG,EAAKA,EAAK,UAAYA,EAAK,GAC5C,CAGA,IAAIJ,EAAK,CACP,OAAO,KAAK,IAAIA,CAAG,IAAM,IAC3B,CAGA,OAAOA,EAAK,CACV,KAAK,YAAY,OAAOA,CAAG,EAC3B,GAAI,CACF,aAAa,WAAW,KAAK,mBAAqBA,CAAG,CACvD,OAASpB,EAAO,CACd,QAAQ,KAAK,sCAAuCA,CAAK,CAC3D,CACF,CAGA,OAAQ,CACN,KAAK,YAAY,MAAK,EACtB,GAAI,CACW,OAAO,KAAK,YAAY,EAChC,QAAQoB,GAAO,CACdA,EAAI,WAAW,KAAK,kBAAkB,GACxC,aAAa,WAAWA,CAAG,CAE/B,CAAC,CACH,OAASpB,EAAO,CACd,QAAQ,KAAK,gCAAiCA,CAAK,CACrD,CACF,CAGA,UAAW,CACT,MAAM0B,EAAa,KAAK,YAAY,KACpC,IAAIC,EAAmB,EAEvB,GAAI,CAEFA,EADa,OAAO,KAAK,YAAY,EACb,OAAOP,GAC7BA,EAAI,WAAW,KAAK,kBAAkB,CAC9C,EAAQ,MACJ,OAASpB,EAAO,CACd,QAAQ,KAAK,oCAAqCA,CAAK,CACzD,CAEA,MAAO,CACL,YAAa0B,EACb,aAAcC,EACd,UAAWD,EAAaC,CAC9B,CACE,CAGA,MAAM,QAAQP,EAAKQ,EAAYN,EAAM,KAAK,WAAY,CACpD,GAAI,KAAK,IAAIF,CAAG,EACd,OAAO,KAAK,IAAIA,CAAG,EAGrB,GAAI,CACF,MAAMC,EAAO,MAAMO,EAAU,EAC7B,YAAK,IAAIR,EAAKC,EAAMC,CAAG,EAChBD,CACT,OAASrB,EAAO,CACd,cAAQ,MAAM,kCAAkCoB,CAAG,IAAKpB,CAAK,EACvDA,CACR,CACF,CAGA,MAAM,aAAa6B,EAAO,CACxB,MAAMC,EAAU,IAAI,IACdC,EAAWF,EAAM,IAAI,MAAO,CAAE,IAAAT,EAAK,OAAAY,EAAQ,IAAAV,KAAU,CACzD,GAAI,CACF,MAAMD,EAAO,MAAM,KAAK,QAAQD,EAAKY,EAAQV,CAAG,EAChDQ,EAAQ,IAAIV,EAAKC,CAAI,CACvB,OAASrB,EAAO,CACd,QAAQ,MAAM,qBAAqBoB,CAAG,IAAKpB,CAAK,EAChD8B,EAAQ,IAAIV,EAAK,IAAI,CACvB,CACF,CAAC,EAED,aAAM,QAAQ,IAAIW,CAAQ,EACnBD,CACT,CACF,CAGO,MAAMG,EAAmB,IAAId,GAGvBe,GAAa,CACxB,gBAAiB,kBACjB,eAAgB,iBAChB,eAAgB,iBAChB,eAAgB,iBAChB,oBAAqB,qBACvB,EC/JA,MAAMC,EAAoB,CACxB,aAAc,CACZ,KAAK,gBAAkB,IAAI,IAC3B,KAAK,UAAY,GACjB,KAAK,OAAS,CAEZ,oBAAqB,CACnB,QAAS,GACT,SAAU,GAAK,GAAK,GAAK,IACzB,cAAe,EACf,WAAY,EAAI,GAAK,GAC7B,EAEM,SAAU,CACR,QAAS,GACT,SAAU,GAAK,GAAK,GAAK,IACzB,cAAe,EACf,WAAY,GAAK,GAAK,GAC9B,EAEM,aAAc,CACZ,QAAS,GACT,SAAU,EAAI,GAAK,GAAK,IACxB,OAAQ,EAAI,GAAK,GAAK,GAAK,GACnC,CACA,CACE,CAGA,OAAQ,CACN,GAAI,KAAK,UAAW,CAClB,QAAQ,IAAI,6CAA6C,EACzD,MACF,CAEA,QAAQ,IAAI,sCAAsC,EAClD,KAAK,UAAY,GAGjB,KAAK,qBAAoB,EAGzB,KAAK,gBAAe,EAEpB,QAAQ,IAAI,8CAA8C,CAC5D,CAGA,MAAO,CACL,GAAI,CAAC,KAAK,UAAW,CACnB,QAAQ,IAAI,yCAAyC,EACrD,MACF,CAEA,QAAQ,IAAI,sCAAsC,EAGlD,SAAW,CAACtB,EAAMuB,CAAU,IAAK,KAAK,gBACpC,cAAcA,CAAU,EACxB,QAAQ,IAAI,wBAAwBvB,CAAI,EAAE,EAG5C,KAAK,gBAAgB,MAAK,EAC1B,KAAK,UAAY,GAEjB,QAAQ,IAAI,iCAAiC,CAC/C,CAGA,MAAM,sBAAuB,CAC3B,QAAQ,IAAI,uCAAuC,EAEnD,GAAI,CAEE,KAAK,OAAO,oBAAoB,SAClC,MAAM,KAAK,kCAAiC,EAI1C,KAAK,OAAO,SAAS,SACvB,MAAM,KAAK,uBAAsB,EAI/B,KAAK,OAAO,aAAa,SAC3B,MAAM,KAAK,oBAAmB,CAGlC,OAASb,EAAO,CACd,QAAQ,MAAM,2BAA4BA,CAAK,CACjD,CACF,CAGA,iBAAkB,CAEhB,GAAI,KAAK,OAAO,oBAAoB,QAAS,CAC3C,MAAMqC,EAAoB,YACxB,IAAM,KAAK,kCAAiC,EAC5C,KAAK,OAAO,oBAAoB,QACxC,EACM,KAAK,gBAAgB,IAAI,sBAAuBA,CAAiB,EACjE,QAAQ,IAAI,kDAAkD,KAAK,OAAO,oBAAoB,SAAW,GAAK,UAAU,CAC1H,CAGA,GAAI,KAAK,OAAO,SAAS,QAAS,CAChC,MAAMC,EAAmB,YACvB,IAAM,KAAK,uBAAsB,EACjC,KAAK,OAAO,SAAS,QAC7B,EACM,KAAK,gBAAgB,IAAI,WAAYA,CAAgB,EACrD,QAAQ,IAAI,sCAAsC,KAAK,OAAO,SAAS,SAAW,IAAO,QAAQ,CACnG,CAGA,GAAI,KAAK,OAAO,aAAa,QAAS,CACpC,MAAMC,EAAkB,YACtB,IAAM,KAAK,oBAAmB,EAC9B,KAAK,OAAO,aAAa,QACjC,EACM,KAAK,gBAAgB,IAAI,eAAgBA,CAAe,EACxD,QAAQ,IAAI,oCAAoC,KAAK,OAAO,aAAa,SAAW,IAAO,QAAQ,CACrG,CACF,CAGA,MAAM,mCAAoC,CACxC,MAAMpC,EAAQ,mCACdc,GAAmB,MAAMd,CAAK,EAE9B,GAAI,CACF,QAAQ,IAAI,4CAA4C,EAGxD,KAAM,CAAE,mBAAAqC,CAAkB,EAAK,MAAKC,GAAA,mCAAAD,GAAA,KAAC,QAAO,kCAAyB,4BAAAA,CAAA,6BAGrE,GAFuB,MAAMA,EAAmB,6BAE5B,CAClB,QAAQ,IAAI,uEAAuE,EACnF,MACF,KAAO,CACL,QAAQ,IAAI,2DAA2D,EACvE,MACF,CAEF,OAASxC,EAAO,CACd,QAAQ,MAAM,+CAAgDA,CAAK,EAGnE,GAAI,CACkB,MAAM,KAAK,4BAA2B,IAExD,QAAQ,IAAI,6CAA6C,EACzD,KAAK,8BAA6B,EAEtC,OAAS0C,EAAe,CACtB,QAAQ,MAAM,gCAAiCA,CAAa,CAC9D,CAEF,QAAC,CACCzB,GAAmB,IAAId,CAAK,CAC9B,CACF,CAGA,MAAM,wBAAyB,CAC7B,MAAMA,EAAQ,uBACdc,GAAmB,MAAMd,CAAK,EAE9B,GAAI,CACF,QAAQ,IAAI,gCAAgC,EAG5C,KAAM,CAAE,mBAAAqC,CAAkB,EAAK,MAAKC,GAAA,mCAAAD,GAAA,KAAC,QAAO,kCAAyB,4BAAAA,CAAA,6BAGrE,GAFuB,MAAMA,EAAmB,6BAE5B,CAClB,QAAQ,IAAI,2DAA2D,EACvE,MACF,KAAO,CACL,QAAQ,IAAI,8CAA8C,EAC1D,MACF,CAEF,OAASxC,EAAO,CACd,QAAQ,MAAM,mCAAoCA,CAAK,EAGvD,GAAI,CACkB,MAAM,KAAK,iBAAgB,IAE7C,QAAQ,IAAI,iDAAiD,EAC7D,KAAK,mBAAkB,EAE3B,OAAS0C,EAAe,CACtB,QAAQ,MAAM,oCAAqCA,CAAa,CAClE,CAEF,QAAC,CACCzB,GAAmB,IAAId,CAAK,CAC9B,CACF,CAGA,MAAM,6BAA8B,CAClC,GAAI,CAEF,KAAM,CAAE,MAAAwC,CAAK,EAAK,MAAKF,GAAA,sBAAAE,CAAA,QAAC,2BAAAC,EAAA,EAAqB,aAAAD,EAAA,UACvCE,EAAW,MAAM,MAAMF,EAAM,yBAAwB,CAAE,EAC7D,GAAI,CAACE,EAAS,GACZ,eAAQ,IAAI,6CAA6C,EAClD,GAGT,MAAMC,EAAQ,MAAMD,EAAS,KAAI,EAC3BE,EAAa,IAAI,KAAKD,EAAM,WAAW,EAEvCE,GADM,IAAI,KACQD,IAAe,IAAO,GAAK,IAEnD,eAAQ,IAAI,gCAAgCC,EAAS,QAAQ,CAAC,CAAC,QAAQ,EAGhEA,EAAW,EAEpB,OAAShD,EAAO,CACd,eAAQ,MAAM,2CAA4CA,CAAK,EACxD,EACT,CACF,CAGA,MAAM,kBAAmB,CACvB,GAAI,CAGF,MAAMiD,EAAiBhB,EAAiB,IAAIC,GAAW,cAAc,EACrE,GAAI,CAACe,EACH,MAAO,GAKT,MAAMD,GADW,KAAK,IAAG,EAAKC,EAAe,YAChB,IAAO,GAAK,IAEzC,eAAQ,IAAI,0BAA0BD,EAAS,QAAQ,CAAC,CAAC,QAAQ,EAG1DA,EAAW,EAEpB,OAAShD,EAAO,CACd,eAAQ,MAAM,+BAAgCA,CAAK,EAC5C,EACT,CACF,CAGA,MAAM,+BAAgC,CAGpC,QAAQ,IAAI,0CAA0C,EACtD,QAAQ,IAAI,+DAA+D,EAO3E,GAAI,CAEF,KAAK,8BAA6B,EAGlC,QAAQ,IAAI,2EAA2E,CAEzF,OAASA,EAAO,CACd,cAAQ,MAAM,yCAA0CA,CAAK,EACvDA,CACR,CACF,CAGA,MAAM,oBAAqB,CAGzBiC,EAAiB,OAAOC,GAAW,cAAc,EACjD,QAAQ,IAAI,6CAA6C,CAC3D,CAGA,+BAAgC,CAC9B,GAAI,CAEF,MAAMgB,EAAe,GACrB,QAASC,EAAI,EAAGA,EAAI,aAAa,OAAQA,IAAK,CAC5C,MAAM/B,EAAM,aAAa,IAAI+B,CAAC,EAC1B/B,IACFA,EAAI,SAAS,uBAAuB,GACpCA,EAAI,SAAS,cAAc,GAC3BA,EAAI,SAAS,sBAAsB,GACnCA,EAAI,SAAS,mBAAmB,IAEhC8B,EAAa,KAAK9B,CAAG,CAEzB,CAEA8B,EAAa,QAAQ9B,GAAO,CAC1B,aAAa,WAAWA,CAAG,EAC3B,QAAQ,IAAI,0BAA0BA,CAAG,EAAE,CAC7C,CAAC,EAGG,OAAOa,EAAqB,KAAeA,EAAiB,OAE9D,QAAQ,IAAI,qCAAqC,EAGnD,QAAQ,IAAI,aAAaiB,EAAa,MAAM,qCAAqC,CAEnF,OAASlD,EAAO,CACd,QAAQ,MAAM,6CAA8CA,CAAK,CACnE,CACF,CAGA,oBAAqB,CACnBiC,EAAiB,OAAOC,GAAW,cAAc,EACjDD,EAAiB,OAAOC,GAAW,mBAAmB,EACtD,QAAQ,IAAI,+CAA+C,CAC7D,CAGA,MAAM,qBAAsB,CAC1B,QAAQ,IAAI,gCAAgC,EAE5C,GAAI,CACF,MAAMkB,EAAQnB,EAAiB,SAAQ,EACvC,QAAQ,IAAI,iCAAkCmB,CAAK,EAKnD,MAAMC,EAAapB,EAAiB,SAAQ,EAC5C,QAAQ,IAAI,gCAAiCoB,CAAU,EAEvD,QAAQ,IAAI,2BAA2B,CAEzC,OAASrD,EAAO,CACd,QAAQ,MAAM,0BAA2BA,CAAK,CAChD,CACF,CAGA,MAAM,YAAYsD,EAAYC,EAAe,CAC3C,MAAMC,EAAS,KAAK,OAAOF,CAAU,EACjC,CAACE,GAAU,CAACA,EAAO,gBAIvB,QAAQ,IAAI,eAAeF,CAAU,cAAcE,EAAO,WAAa,GAAK,aAAa,EAEzF,WAAW,SAAY,CACrB,GAAI,CACEF,IAAe,sBACjB,MAAM,KAAK,kCAAiC,EACnCA,IAAe,YACxB,MAAM,KAAK,uBAAsB,CAErC,OAASG,EAAY,CACnB,QAAQ,MAAM,sBAAsBH,CAAU,IAAKG,CAAU,CAC/D,CACF,EAAGD,EAAO,UAAU,EACtB,CAGA,WAAY,CACV,MAAO,CACL,UAAW,KAAK,UAChB,gBAAiB,MAAM,KAAK,KAAK,gBAAgB,KAAI,CAAE,EACvD,OAAQ,KAAK,OACb,YAAa,KAAK,mBAAkB,CAC1C,CACE,CAGA,oBAAqB,CACnB,MAAME,EAAM,KAAK,IAAG,EACpB,MAAO,CACL,oBAAqB,IAAI,KAAKA,EAAM,KAAK,OAAO,oBAAoB,QAAQ,EAC5E,SAAU,IAAI,KAAKA,EAAM,KAAK,OAAO,SAAS,QAAQ,EACtD,aAAc,IAAI,KAAKA,EAAM,KAAK,OAAO,aAAa,QAAQ,CACpE,CACE,CAGA,MAAM,oBAAoBJ,EAAa,MAAO,CAC5C,QAAQ,IAAI,+BAA+BA,CAAU,EAAE,EAEvD,GAAI,EACEA,IAAe,OAASA,IAAe,wBACzC,MAAM,KAAK,kCAAiC,GAG1CA,IAAe,OAASA,IAAe,aACzC,MAAM,KAAK,uBAAsB,GAG/BA,IAAe,OAASA,IAAe,UACzC,MAAM,KAAK,oBAAmB,EAGhC,QAAQ,IAAI,2BAA2B,CAEzC,OAAStD,EAAO,CACd,cAAQ,MAAM,0BAA2BA,CAAK,EACxCA,CACR,CACF,CACF,CAGO,MAAM2D,GAAsB,IAAIxB,GAGnC,OAAO,OAAW,KAAe,OAAO,SAAS,WAAa,aAEhE,WAAW,IAAM,CACfwB,GAAoB,MAAK,CAC3B,EAAG,GAAK,EC/aV,MAAMC,EAAyB,CAC7B,aAAc,CAEZ,KAAK,QAAU,KAAK,oBACpB,KAAK,UAAY,IACjB,KAAK,aAAe,GAAK,GAAK,IAG9B,KAAK,WAAa,KAClB,KAAK,oBAAsB,KAC3B,KAAK,kBAAoB,GAAK,GAAK,IAGnC,QAAQ,IAAI,wCAAyC,CACnD,SAAU,OAAO,SAAS,SAC1B,SAAU,OAAO,SAAS,SAC1B,QAAS,KAAK,QACd,QAAS,OAAO,SAAS,KAC1B,CACH,CAGA,mBAAoB,CAGlB,MAAO,kDACT,CAGA,gBAAiB,CACf,OAAO,IAAI,OAAO,cAAc,MAAM,GAAG,EAAE,CAAC,CAC9C,CAGA,MAAM,gBAAiB,CAErB,GAAI,KAAK,YAAc,KAAK,qBACvB,KAAK,MAAQ,KAAK,oBAAsB,KAAK,kBAChD,eAAQ,IAAI,4BAA4B,EACjC,KAAK,WAGd,GAAI,CACF,QAAQ,IAAI,iCAAiC,EAC7C,MAAMC,EAAgB,MAAM,MAAM,GAAG,KAAK,OAAO,mBAAmB,EAEpE,GAAIA,EAAc,GAAI,CACpB,MAAMf,EAAQ,MAAMe,EAAc,OAGlC,YAAK,WAAaf,EAClB,KAAK,oBAAsB,KAAK,MAEhC,QAAQ,IAAI,+BAA+BA,EAAM,QAAQ,MAAM,mBAAmBA,EAAM,IAAI,EAAE,EACvFA,CACT,KACE,gBAAQ,KAAK,gDAAgD,EACtD,IAEX,OAAS9C,EAAO,CACd,eAAQ,MAAM,sCAAuCA,CAAK,EACnD,IACT,CACF,CAGA,MAAM,uBAAuB8D,EAAQ,OACnC,MAAMC,EAAW,eAAeD,CAAM,GAGtC,GAAI,KAAK,MAAM,IAAIC,CAAQ,EAAG,CAC5B,MAAMC,EAAS,KAAK,MAAM,IAAID,CAAQ,EACtC,GAAI,KAAK,MAAQC,EAAO,UAAY,KAAK,aACvC,eAAQ,IAAI,kCAAkCF,CAAM,EAAE,EAC/CE,EAAO,IAElB,CAEA,GAAI,CAGF,MAAMlB,EAAQ,MAAM,KAAK,iBACzB,IAAImB,EAAa,KAAK,iBAEtB,GAAInB,IACFmB,EAAanB,EAAM,KAGf,CAACA,EAAM,QAAQ,SAASgB,CAAM,GAChC,MAAM,IAAI,MAAM,UAAUA,CAAM,gCAAgC,EAKpE,MAAMI,EAAU,GAAG,KAAK,OAAO,GAAGD,CAAU,IAAIH,CAAM,QAEtD,QAAQ,IAAI,oCAAoCA,CAAM,SAASI,CAAO,EAAE,EAExE,MAAMrB,EAAW,MAAM,MAAMqB,CAAO,EAEpC,GAAI,CAACrB,EAAS,GACZ,MAAM,IAAI,MAAM,kCAAkCiB,CAAM,KAAKjB,EAAS,MAAM,GAAG,EAGjF,MAAMxB,EAAO,MAAMwB,EAAS,OAGtBsB,EAAa,CACjB,GAAG9C,EAAK,WACR,OAAQ,cACR,YAAaA,EAAK,WAClB,QAAS,KAAK,iBAAiBA,EAAK,UAAU,EAC9C,gBAAiBA,EAAK,KACtB,OAAAyC,CAAA,EAMF,eAAQ,IAAI,8BAA8BA,CAAM,IAAK,CACnD,WAAY,CAAC,EAAEzC,EAAK,YAAcA,EAAK,WAAW,IAClD,iBAAkB,CAAC,CAAC8C,EAAW,GAC/B,OAAQA,EAAW,GAAK,OAAO,KAAKA,EAAW,EAAE,EAAI,OACrD,OAAOC,EAAA/C,EAAK,aAAL,YAAA+C,EAAiB,GACzB,EAGD,KAAK,MAAM,IAAIL,EAAU,CACvB,KAAMI,EACN,UAAW,KAAK,KAAI,CACrB,EAED,QAAQ,IAAI,iCAAiCL,CAAM,WAAWG,CAAU,UAAUE,EAAW,OAAO,GAAG,EAChGA,CAET,OAASnE,EAAO,CACd,cAAQ,MAAM,yCAAyC8D,CAAM,IAAK9D,CAAK,EACjEA,CACR,CACF,CAGA,iBAAiBqE,EAAY,CAC3B,MAAMX,MAAU,KACVY,EAAW,IAAI,KAAKD,CAAU,EAC9BE,EAASb,EAAMY,EACfE,EAAY,KAAK,MAAMD,GAAU,IAAO,GAAK,GAAG,EAChDE,EAAc,KAAK,MAAOF,GAAU,IAAO,GAAK,KAAQ,IAAO,GAAG,EAExE,OAAIC,EAAY,EACP,GAAGA,CAAS,KAAKC,CAAW,QAE5B,GAAGA,CAAW,OAEzB,CAGA,MAAM,kBAAmB,CACvB,OAAO,MAAM,KAAK,gBACpB,CAGA,MAAM,2BAA2BX,EAAQ,CACvC,GAAI,CACF,MAAMhB,EAAQ,MAAM,KAAK,iBACzB,OAAOA,GAASA,EAAM,QAAQ,SAASgB,CAAM,CAC/C,MAAgB,CACd,MAAO,EACT,CACF,CAGA,YAAa,CACX,KAAK,MAAM,QACX,KAAK,WAAa,KAClB,KAAK,oBAAsB,KAC3B,QAAQ,IAAI,oCAAoC,CAClD,CAGA,eAAgB,CACd,MAAMV,EAAQ,CACZ,KAAM,KAAK,MAAM,KACjB,YAAa,CAAC,CAAC,KAAK,WACpB,SAAU,KAAK,oBAAsB,KAAK,MAAQ,KAAK,oBAAsB,KAC7E,MAAO,EAAC,EAGV,SAAW,CAAChC,EAAKsD,CAAK,IAAK,KAAK,MAAM,UACpCtB,EAAM,MAAM,KAAK,CACf,IAAAhC,EACA,IAAK,KAAK,MAAQsD,EAAM,UACxB,QAAS,KAAK,MAAQA,EAAM,UAAY,KAAK,aAC9C,EAGH,OAAOtB,CACT,CACF,CAGO,MAAMuB,GAA2B,IAAIf,GCxM5C,MAAMgB,EAAyB,CAC7B,aAAc,CACZ,KAAK,YAAc,wBACnB,KAAK,aAAe,GAAK,GAAK,GAAK,IACnC,KAAK,gBAAkB,IACvB,KAAK,WAAa,KAClB,KAAK,oBAAsB,KAC3B,KAAK,kBAAoB,EAAI,GAAK,GACpC,CAGA,MAAM,yBAA0B,CAE9B,GAAI,KAAK,YAAc,KAAK,qBACvB,KAAK,MAAQ,KAAK,oBAAsB,KAAK,kBAChD,OAAO,KAAK,WAAW,aAAe,KAAK,WAAW,WAGxD,GAAI,CAEF,MAAM/B,EAAW,MAAM,MAAM,uEAA2D,KAAK,KAAK,EAAE,EAEpG,GAAIA,EAAS,GAAI,CACf,MAAMC,EAAQ,MAAMD,EAAS,OAC7B,YAAK,WAAaC,EAClB,KAAK,oBAAsB,KAAK,MAGzBA,EAAM,YAAcA,EAAM,WACnC,CACF,OAAS9C,EAAO,CACd,QAAQ,KAAK,wCAAyCA,CAAK,CAC7D,CAEA,OAAO,IACT,CAGA,MAAM,YAAY8D,EAAQ,CACxB,MAAMe,EAAkB,MAAM,KAAK,0BACnC,GAAIA,EAAiB,CAEnB,MAAMC,EAAU,IAAI,KAAKD,CAAe,EAAE,cAAc,MAAM,GAAG,EAAE,CAAC,EACpE,MAAO,GAAG,KAAK,WAAW,GAAGf,CAAM,IAAIgB,CAAO,EAChD,KAAO,CAEL,MAAMC,MAAY,OAAO,cAAc,MAAM,GAAG,EAAE,CAAC,EACnD,MAAO,GAAG,KAAK,WAAW,GAAGjB,CAAM,IAAIiB,CAAK,EAC9C,CACF,CAGA,MAAM,uBAAuBjB,EAAQ,CACnC,MAAMC,EAAW,MAAM,KAAK,YAAYD,CAAM,EACxCe,EAAkB,MAAM,KAAK,0BAGnC,GAAI,KAAK,YAAY,IAAId,CAAQ,EAAG,CAClC,MAAMC,EAAS,KAAK,YAAY,IAAID,CAAQ,EAG5C,GAAIc,GAAmBb,EAAO,iBAAmBa,EAC/C,QAAQ,IAAI,yBAAyBf,CAAM,sBAAsB,EACjE,KAAK,YAAY,OAAOC,CAAQ,UACvB,KAAK,MAAQC,EAAO,UAAY,KAAK,aAC9C,eAAQ,IAAI,0BAA0BF,CAAM,EAAE,EACvB,CAAE,GAAGE,EAAO,KAAM,OAAQ,wBAGjD,KAAK,YAAY,OAAOD,CAAQ,EAEpC,CAGA,GAAI,CACF,MAAMiB,EAAa,aAAa,QAAQjB,CAAQ,EAChD,GAAIiB,EAAY,CACd,MAAMC,EAAS,KAAK,MAAMD,CAAU,EAGpC,GAAIH,GAAmBI,EAAO,iBAAmBJ,EAC/C,QAAQ,IAAI,sCAAsCf,CAAM,sBAAsB,EAC9E,aAAa,WAAWC,CAAQ,UACvB,KAAK,MAAQkB,EAAO,UAAY,KAAK,aAC9C,eAAQ,IAAI,gCAAgCnB,CAAM,EAAE,EAGpD,KAAK,YAAY,IAAIC,EAAUkB,CAAM,EAEd,CAAE,GAAGA,EAAO,KAAM,OAAQ,8BAGjD,aAAa,WAAWlB,CAAQ,EAEpC,CACF,OAAS/D,EAAO,CACd,QAAQ,KAAK,4BAA4B8D,CAAM,IAAK9D,CAAK,CAC3D,CAGA,OAAO,IACT,CAGA,MAAM,uBAAuB8D,EAAQzC,EAAM,CACzC,MAAM0C,EAAW,MAAM,KAAK,YAAYD,CAAM,EACxCe,EAAkB,MAAM,KAAK,0BAE7BK,EAAY,CAChB,KAAA7D,EACA,UAAW,KAAK,MAChB,OAAAyC,EACA,SAAU,OAAO,cAAc,MAAM,GAAG,EAAE,CAAC,EAC3C,eAAgBe,CAAA,EAGlB,GAAI,CAEF,aAAa,QAAQd,EAAU,KAAK,UAAUmB,CAAS,CAAC,EAGxD,KAAK,YAAY,IAAInB,EAAUmB,CAAS,EAExC,QAAQ,IAAI,mCAAmCpB,CAAM,EAAE,EAGvD,KAAK,iBAEP,OAAS9D,EAAO,CACd,QAAQ,KAAK,4CAA4C8D,CAAM,IAAK9D,CAAK,CAC3E,CACF,CAGA,iBAAkB,CAChB,GAAI,CACF,MAAMkD,EAAe,GAGrB,QAASC,EAAI,EAAGA,EAAI,aAAa,OAAQA,IAAK,CAC5C,MAAM/B,EAAM,aAAa,IAAI+B,CAAC,EAC9B,GAAI/B,GAAOA,EAAI,WAAW,KAAK,WAAW,EACxC,GAAI,CACF,MAAM4C,EAAS,KAAK,MAAM,aAAa,QAAQ5C,CAAG,CAAC,EAC/C,KAAK,MAAQ4C,EAAO,UAAY,KAAK,cACvCd,EAAa,KAAK9B,CAAG,CAEzB,MAAgB,CAEd8B,EAAa,KAAK9B,CAAG,CACvB,CAEJ,CAGA8B,EAAa,QAAQ9B,GAAO,CAC1B,aAAa,WAAWA,CAAG,EAC3B,QAAQ,IAAI,0BAA0BA,CAAG,EAAE,CAC7C,CAAC,EAGD,SAAW,CAACA,EAAK4C,CAAM,IAAK,KAAK,YAAY,UACvC,KAAK,MAAQA,EAAO,UAAY,KAAK,cACvC,KAAK,YAAY,OAAO5C,CAAG,CAIjC,OAASpB,EAAO,CACd,QAAQ,KAAK,+BAAgCA,CAAK,CACpD,CACF,CAGA,MAAM,iBAAiB8D,EAAQ,CAC7B,MAAMC,EAAW,MAAM,KAAK,YAAYD,CAAM,EAG9C,aAAa,WAAWC,CAAQ,EAGhC,KAAK,YAAY,OAAOA,CAAQ,EAEhC,QAAQ,IAAI,qBAAqBD,CAAM,EAAE,CAC3C,CAGA,eAAgB,CACd,GAAI,CAEF,MAAMZ,EAAe,GACrB,QAASC,EAAI,EAAGA,EAAI,aAAa,OAAQA,IAAK,CAC5C,MAAM/B,EAAM,aAAa,IAAI+B,CAAC,EAC1B/B,GAAOA,EAAI,WAAW,KAAK,WAAW,GACxC8B,EAAa,KAAK9B,CAAG,CAEzB,CAEA8B,EAAa,QAAQ9B,GAAO,aAAa,WAAWA,CAAG,CAAC,EAGxD,KAAK,YAAY,QAEjB,QAAQ,IAAI,2CAA2C8B,EAAa,MAAM,SAAS,CAErF,OAASlD,EAAO,CACd,QAAQ,KAAK,6BAA8BA,CAAK,CAClD,CACF,CAGA,eAAgB,CACd,MAAMoD,EAAQ,CACZ,YAAa,KAAK,YAAY,KAC9B,kBAAmB,EACnB,UAAW,GAGb,GAAI,CACF,QAASD,EAAI,EAAGA,EAAI,aAAa,OAAQA,IAAK,CAC5C,MAAM/B,EAAM,aAAa,IAAI+B,CAAC,EAC9B,GAAI/B,GAAOA,EAAI,WAAW,KAAK,WAAW,EAAG,CAC3CgC,EAAM,oBACN,MAAMsB,EAAQ,aAAa,QAAQtD,CAAG,EAClCsD,IACFtB,EAAM,WAAasB,EAAM,OAE7B,CACF,CACF,OAAS1E,EAAO,CACd,QAAQ,KAAK,6BAA8BA,CAAK,CAClD,CAEA,OAAOoD,CACT,CACF,CAGO,MAAM+B,GAA2B,IAAIP,GCjOtCQ,GAAU,MAShB,SAASC,GAASC,EAAK,CACrB,OAAO,KAAK,IAAI,EAAG,KAAK,IAAI,IAAKA,CAAG,CAAC,CACvC,CAKA,SAASC,GAAWC,EAAQC,EAAQ,CAClC,MAAMlF,EAAS,IAAI,MAAMiF,EAAO,MAAM,EAEtC,QAASrC,EAAI,EAAGA,EAAIqC,EAAO,OAAQrC,IACjC,GAAIA,EAAIsC,EAAS,EACflF,EAAO4C,CAAC,EAAI,QACP,CACL,IAAIuC,EAAM,KACV,QAASC,EAAIxC,EAAIsC,EAAS,EAAGE,GAAKxC,EAAGwC,IAC9B,MAAMH,EAAOG,CAAC,CAAC,IAClBD,EAAM,KAAK,IAAIA,EAAKF,EAAOG,CAAC,CAAC,GAGjCpF,EAAO4C,CAAC,EAAIuC,IAAQ,KAAY,IAAMA,CACxC,CAGF,OAAOnF,CACT,CAEA,SAASqF,GAAWJ,EAAQC,EAAQ,CAClC,MAAMlF,EAAS,IAAI,MAAMiF,EAAO,MAAM,EAEtC,QAASrC,EAAI,EAAGA,EAAIqC,EAAO,OAAQrC,IACjC,GAAIA,EAAIsC,EAAS,EACflF,EAAO4C,CAAC,EAAI,QACP,CACL,IAAI0C,EAAM,IACV,QAASF,EAAIxC,EAAIsC,EAAS,EAAGE,GAAKxC,EAAGwC,IAC9B,MAAMH,EAAOG,CAAC,CAAC,IAClBE,EAAM,KAAK,IAAIA,EAAKL,EAAOG,CAAC,CAAC,GAGjCpF,EAAO4C,CAAC,EAAI0C,IAAQ,IAAW,IAAMA,CACvC,CAGF,OAAOtF,CACT,CAcA,SAASuF,GAAIN,EAAQC,EAAQM,EAAY,SAAUC,EAAa,KAAM,CACpE,GAAIP,GAAU,EAAG,MAAM,IAAI,MAAM,yBAAyB,EAE1D,MAAMQ,EAAIT,EAAO,OACXjF,EAAS,IAAI,MAAM0F,CAAC,EAAE,KAAK,GAAG,EAGhCD,IAAe,OAAMA,EAAaP,GAEtC,QAASS,EAAI,EAAGA,EAAID,EAAGC,IAAK,CAC1B,GAAIA,EAAIT,EAAS,EAEf,SAIF,MAAMU,EAASX,EAAO,MAAMU,EAAIT,EAAS,EAAGS,EAAI,CAAC,EAEjD,GAAIH,IAAc,SAEZI,EAAO,KAAKC,GAAK,MAAMA,CAAC,CAAC,EAC3B7F,EAAO2F,CAAC,EAAI,IAEZ3F,EAAO2F,CAAC,EAAIC,EAAO,OAAO,CAACzF,EAAK0F,IAAM1F,EAAM0F,EAAG,CAAC,EAAID,EAAO,eAEpDJ,IAAc,SAAU,CAEjC,MAAMM,EAAcF,EAAO,OAAOC,GAAK,CAAC,MAAMA,CAAC,CAAC,EAC5CC,EAAY,OAASL,EACvBzF,EAAO2F,CAAC,EAAI,IAEZ3F,EAAO2F,CAAC,EAAIG,EAAY,OAAO,CAAC3F,EAAK,IAAMA,EAAM,EAAG,CAAC,EAAI2F,EAAY,MAEzE,CACF,CAEA,OAAO9F,CACT,CAWA,SAAS+F,GAAId,EAAQC,EAAQc,EAAQ,KAAMC,EAAW,WAAYT,EAAY,iBAAkB,CAC9F,GAAIN,GAAU,EAAG,MAAM,IAAI,MAAM,yBAAyB,EAE1D,MAAMQ,EAAIT,EAAO,OACXjF,EAAS,IAAI,MAAM0F,CAAC,EAAE,KAAK,GAAG,EAMpC,GAHIM,IAAU,OAAMA,EAAQ,GAAKd,EAAS,IAGtCc,GAAS,GAAKA,EAAQ,EACxB,MAAM,IAAI,MAAM,yBAAyB,EAG3C,GAAIC,IAAa,cAAe,CAE9B,IAAIC,EAAkB,GACtB,QAASC,EAAI,EAAGA,EAAIT,EAAGS,IACrB,GAAI,CAAC,MAAMlB,EAAOkB,CAAC,CAAC,EAAG,CACrBD,EAAkBC,EAClB,KACF,CAGF,GAAID,IAAoB,GAEtB,OAAOlG,EAITA,EAAOkG,CAAe,EAAIjB,EAAOiB,CAAe,EAGhD,QAASP,EAAIO,EAAkB,EAAGP,EAAID,EAAGC,IACnC,MAAMV,EAAOU,CAAC,CAAC,EAEbH,IAAc,YAChBxF,EAAO2F,CAAC,EAAI3F,EAAO2F,EAAI,CAAC,EAExB3F,EAAO2F,CAAC,EAAI,IAIV,MAAM3F,EAAO2F,EAAI,CAAC,CAAC,EACjBH,IAAc,iBAChBxF,EAAO2F,CAAC,EAAI,IAEZ3F,EAAO2F,CAAC,EAAI,IAGd3F,EAAO2F,CAAC,EAAIK,EAAQf,EAAOU,CAAC,GAAK,EAAIK,GAAShG,EAAO2F,EAAI,CAAC,CAKlE,SAAWM,IAAa,YAGtB,QAASN,EAAI,EAAGA,EAAID,EAAGC,IACrB,GAAI,EAAAA,EAAIT,EAAS,GAKjB,GAAIS,IAAMT,EAAS,EAAG,CAEpB,MAAMU,EAASX,EAAO,MAAM,EAAGC,CAAM,EACjCU,EAAO,KAAKC,GAAK,MAAMA,CAAC,CAAC,EAC3B7F,EAAO2F,CAAC,EAAI,IAEZ3F,EAAO2F,CAAC,EAAIC,EAAO,OAAO,CAACzF,EAAK,IAAMA,EAAM,EAAG,CAAC,EAAIyF,EAAO,MAE/D,SAEM,MAAMX,EAAOU,CAAC,CAAC,EAEbH,IAAc,YAChBxF,EAAO2F,CAAC,EAAI3F,EAAO2F,EAAI,CAAC,EACfH,IAAc,eACvBxF,EAAO2F,CAAC,EAAI,IAEHH,IAAc,mBACvBxF,EAAO2F,CAAC,EAAI,aAIV,MAAM3F,EAAO2F,EAAI,CAAC,CAAC,EACrB,GAAIH,IAAc,iBAAkB,CAElC,MAAMY,EAAenB,EAAO,MAAMU,EAAIT,EAAS,EAAGS,EAAI,CAAC,EACnDS,EAAa,KAAKP,GAAK,MAAMA,CAAC,CAAC,EACjC7F,EAAO2F,CAAC,EAAI,IAGZ3F,EAAO2F,CAAC,EAAIS,EAAa,OAAO,CAACjG,EAAK,IAAMA,EAAM,EAAG,CAAC,EAAIiG,EAAa,MAE3E,MACEpG,EAAO2F,CAAC,EAAI,SAId3F,EAAO2F,CAAC,EAAIK,EAAQf,EAAOU,CAAC,GAAK,EAAIK,GAAShG,EAAO2F,EAAI,CAAC,EAOpE,OAAO3F,CACT,CAQA,SAASqG,GAAgBpB,EAAQC,EAAQ,CACvC,GAAIA,GAAU,EAAG,MAAM,IAAI,MAAM,yBAAyB,EAE1D,MAAMlF,EAAS,IAAI,MAAMiF,EAAO,MAAM,EAGtC,QAASrC,EAAI,EAAGA,EAAIsC,EAAS,EAAGtC,IAC9B5C,EAAO4C,CAAC,EAAI,IAGd,GAAIqC,EAAO,OAASC,EAClB,eAAQ,IAAI,oCAAoCD,EAAO,MAAM,MAAMC,CAAM,EAAE,EACpElF,EAIT,IAAIG,EAAM,EACNmG,EAAQ,EACRC,EAAe,GAGnB,QAASnB,EAAI,EAAGA,EAAIH,EAAO,QAAUsB,EAAa,OAASrB,EAAQE,IAC5D,MAAMH,EAAOG,CAAC,CAAC,IAClBmB,EAAa,KAAKnB,CAAC,EACnBjF,GAAO8E,EAAOG,CAAC,EACfkB,KAMJ,GAFA,QAAQ,IAAI,iBAAiBA,CAAK,0BAA0BpB,CAAM,mCAAmC,EAEjGoB,EAAQpB,EACV,eAAQ,KAAK,2DAA2DoB,CAAK,MAAMpB,CAAM,EAAE,EACpFlF,EAIT,MAAMwG,EAAY,KAAK,IAAItB,EAAS,EAAGqB,EAAarB,EAAS,CAAC,CAAC,EAC/DlF,EAAOwG,CAAS,EAAIrG,EAAM+E,EAE1B,QAAQ,IAAI,gCAAgCsB,CAAS,eAAexG,EAAOwG,CAAS,CAAC,EAAE,EAGvF,QAAS5D,EAAI4D,EAAY,EAAG5D,EAAIqC,EAAO,OAAQrC,IACzC,MAAM5C,EAAO4C,EAAI,CAAC,CAAC,GAAK,MAAMqC,EAAOrC,CAAC,CAAC,EACzC5C,EAAO4C,CAAC,EAAI,IAEZ5C,EAAO4C,CAAC,GAAK5C,EAAO4C,EAAI,CAAC,GAAKsC,EAAS,GAAKD,EAAOrC,CAAC,GAAKsC,EAI7D,MAAMuB,EAAazG,EAAO,OAAO6F,GAAK,CAAC,MAAMA,CAAC,CAAC,EAAE,OACjD,eAAQ,IAAI,qBAAqBY,CAAU,wBAAwB,EAE5DzG,CACT,CASA,SAAS0G,GAAYC,EAAOzB,EAAS,EAAGc,EAAQ,KAAMC,EAAW,WAAYT,EAAY,iBAAkB,CACzG,OAAOO,GAAIY,EAAOzB,EAAQc,EAAOC,EAAUT,CAAS,CACtD,CAKA,SAASoB,GAAaD,EAAOzB,EAAS,EAAGM,EAAY,SAAUC,EAAa,KAAM,CAChF,OAAOF,GAAIoB,EAAOzB,EAAQM,EAAWC,CAAU,CACjD,CAKA,SAASoB,GAA0BC,EAAMC,EAAK7B,EAAS,GAAI,CACzD,MAAM8B,EAAKhC,GAAW8B,EAAM5B,CAAM,EAC5B+B,EAAK5B,GAAW0B,EAAK7B,CAAM,EAE3BlF,EAAS,IAAI,MAAM8G,EAAK,MAAM,EACpC,QAASlE,EAAI,EAAGA,EAAIkE,EAAK,OAAQlE,IAC3B,MAAMoE,EAAGpE,CAAC,CAAC,GAAK,MAAMqE,EAAGrE,CAAC,CAAC,EAC7B5C,EAAO4C,CAAC,EAAI,IAEZ5C,EAAO4C,CAAC,GAAKoE,EAAGpE,CAAC,EAAIqE,EAAGrE,CAAC,GAAK,EAIlC,OAAO5C,CACT,CAKA,SAASkH,GAAgCJ,EAAMC,EAAK7B,EAAS,EAAG,CAC9D,OAAO2B,GAA0BC,EAAMC,EAAK7B,CAAM,CACpD,CAKA,SAASiC,GAA6BR,EAAOS,EAAQ,GAAI,CACvD,GAAIA,EAAQ,EAAG,MAAM,IAAI,MAAM,4BAA4B,EAE3D,MAAMpH,EAAS,IAAI,MAAM2G,EAAM,MAAM,EAErC,QAAS/D,EAAI,EAAGA,EAAI+D,EAAM,OAAQ/D,IAC5BA,EAAIwE,EAAQT,EAAM,OACpB3G,EAAO4C,CAAC,EAAI+D,EAAM/D,CAAC,EAEnB5C,EAAO4C,CAAC,EAAI,IAIhB,OAAO5C,CACT,CAKA,SAASqH,GAAcV,EAAOW,EAAQpC,EAAS,GAAI,CACjD,MAAMlF,EAAS,IAAI,MAAM2G,EAAM,MAAM,EAErC,QAAS/D,EAAI,EAAGA,EAAI+D,EAAM,OAAQ/D,IAChC,GAAIA,EAAIsC,EAAS,EACflF,EAAO4C,CAAC,EAAI,QACP,CACL,IAAI2E,EAAY,EACZC,EAAc,EAElB,QAASpC,EAAIxC,EAAIsC,EAAS,EAAGE,GAAKxC,EAAGwC,IAC/B,CAAC,MAAMuB,EAAMvB,CAAC,CAAC,GAAK,CAAC,MAAMkC,EAAOlC,CAAC,CAAC,IACtCmC,GAAaZ,EAAMvB,CAAC,EAAIkC,EAAOlC,CAAC,EAChCoC,GAAeF,EAAOlC,CAAC,GAI3BpF,EAAO4C,CAAC,EAAI4E,GAAe3C,GAAU,IAAM0C,EAAYC,CACzD,CAGF,OAAOxH,CACT,CAKA,SAASyH,GAAad,EAAOzB,EAAS,GAAI,CACxC,GAAIyB,EAAM,OAASzB,EAAS,EAC1B,OAAO,IAAI,MAAMyB,EAAM,MAAM,EAAE,KAAK,GAAG,EAIzC,MAAMe,EAAQ,IAAI,MAAMf,EAAM,MAAM,EAC9BgB,EAAO,IAAI,MAAMhB,EAAM,MAAM,EAC7BiB,EAAO,IAAI,MAAMjB,EAAM,MAAM,EAEnCe,EAAM,CAAC,EAAI,IACXC,EAAK,CAAC,EAAI,IACVC,EAAK,CAAC,EAAI,IAEV,QAAShF,EAAI,EAAGA,EAAI+D,EAAM,OAAQ/D,IAC5B,MAAM+D,EAAM/D,CAAC,CAAC,GAAK,MAAM+D,EAAM/D,EAAI,CAAC,CAAC,GACvC8E,EAAM9E,CAAC,EAAI,IACX+E,EAAK/E,CAAC,EAAI,IACVgF,EAAKhF,CAAC,EAAI,MAEV8E,EAAM9E,CAAC,EAAI+D,EAAM/D,CAAC,EAAI+D,EAAM/D,EAAI,CAAC,EACjC+E,EAAK/E,CAAC,EAAI,KAAK,IAAI8E,EAAM9E,CAAC,EAAG,CAAC,EAC9BgF,EAAKhF,CAAC,EAAI,KAAK,IAAI,CAAC8E,EAAM9E,CAAC,EAAG,CAAC,GAKnC,MAAMiF,EAAUxB,GAAgBsB,EAAK,MAAM,CAAC,EAAGzC,CAAM,EAC/C4C,EAAUzB,GAAgBuB,EAAK,MAAM,CAAC,EAAG1C,CAAM,EAG/ClF,EAAS,IAAI,MAAM2G,EAAM,MAAM,EACrC3G,EAAO,CAAC,EAAI,IAEZ,QAAS4C,EAAI,EAAGA,EAAI+D,EAAM,OAAQ/D,IAAK,CACrC,MAAMmF,EAAeF,EAAQjF,EAAI,CAAC,EAC5BoF,EAAeF,EAAQlF,EAAI,CAAC,EAElC,GAAI,MAAMmF,CAAY,GAAK,MAAMC,CAAY,EAC3ChI,EAAO4C,CAAC,EAAI,YACHoF,GAAgBnD,GACzB7E,EAAO4C,CAAC,EAAI,QACP,CAEL,MAAMmC,EAAM,IAAO,KAAO,EADfgD,EAAeC,GAE1BhI,EAAO4C,CAAC,EAAIkC,GAASC,CAAG,CAC1B,CACF,CAEA,OAAO/E,CACT,CAKA,SAASiI,GAAanB,EAAMC,EAAKJ,EAAOzB,EAAS,GAAI,CACnD,MAAMgD,EAAS,KAAK,IAAIpB,EAAK,OAAQC,EAAI,OAAQJ,EAAM,MAAM,EAG7D,GAAIuB,EAAShD,EAAS,EACpB,eAAQ,KAAK,iCAAiCgD,CAAM,MAAMhD,EAAS,CAAC,eAAeA,CAAM,EAAE,EACpF,CACL,IAAK,IAAI,MAAMgD,CAAM,EAAE,KAAK,GAAG,EAC/B,OAAQ,IAAI,MAAMA,CAAM,EAAE,KAAK,GAAG,EAClC,QAAS,IAAI,MAAMA,CAAM,EAAE,KAAK,GAAG,CACzC,EAIE,IAAIC,EAAiB,EACrB,QAASvF,EAAI,EAAGA,EAAIsF,EAAQtF,IACtB,CAAC,MAAMkE,EAAKlE,CAAC,CAAC,GAAK,CAAC,MAAMmE,EAAInE,CAAC,CAAC,GAAK,CAAC,MAAM+D,EAAM/D,CAAC,CAAC,GACtDuF,IAMJ,GAFA,QAAQ,IAAI,mBAAmBD,CAAM,iBAAiBC,CAAc,oBAAoB,EAEpFA,EAAiBjD,EAAS,EAC5B,eAAQ,KAAK,qCAAqCiD,CAAc,MAAMjD,EAAS,CAAC,EAAE,EAC3E,CACL,IAAK,IAAI,MAAMgD,CAAM,EAAE,KAAK,GAAG,EAC/B,OAAQ,IAAI,MAAMA,CAAM,EAAE,KAAK,GAAG,EAClC,QAAS,IAAI,MAAMA,CAAM,EAAE,KAAK,GAAG,CACzC,EAIE,MAAME,EAAS,IAAI,MAAMF,CAAM,EACzBG,EAAW,IAAI,MAAMH,CAAM,EAC3BI,EAAS,IAAI,MAAMJ,CAAM,EACzBK,EAAU,IAAI,MAAML,CAAM,EAC1BM,EAAK,IAAI,MAAMN,CAAM,EAE3BE,EAAO,CAAC,EAAI,IACZC,EAAS,CAAC,EAAI,IACdC,EAAO,CAAC,EAAI,IACZC,EAAQ,CAAC,EAAI,IACbC,EAAG,CAAC,EAAI,IAER,QAAS5F,EAAI,EAAGA,EAAIsF,EAAQtF,IAAK,CAE/B,GAAI,MAAMkE,EAAKlE,CAAC,CAAC,GAAK,MAAMmE,EAAInE,CAAC,CAAC,GAAK,MAAM+D,EAAM/D,CAAC,CAAC,GACjD,MAAMkE,EAAKlE,EAAE,CAAC,CAAC,GAAK,MAAMmE,EAAInE,EAAE,CAAC,CAAC,GAAK,MAAM+D,EAAM/D,EAAE,CAAC,CAAC,EAAG,CAC5DwF,EAAOxF,CAAC,EAAI,IACZyF,EAASzF,CAAC,EAAI,IACd0F,EAAO1F,CAAC,EAAI,IACZ2F,EAAQ3F,CAAC,EAAI,IACb4F,EAAG5F,CAAC,EAAI,IACR,QACF,CAGAwF,EAAOxF,CAAC,EAAIkE,EAAKlE,CAAC,EAAIkE,EAAKlE,EAAI,CAAC,EAChCyF,EAASzF,CAAC,EAAImE,EAAInE,EAAI,CAAC,EAAImE,EAAInE,CAAC,EAG5BwF,EAAOxF,CAAC,EAAIyF,EAASzF,CAAC,GAAKwF,EAAOxF,CAAC,EAAI,EACzC0F,EAAO1F,CAAC,EAAIwF,EAAOxF,CAAC,EAEpB0F,EAAO1F,CAAC,EAAI,EAGVyF,EAASzF,CAAC,EAAIwF,EAAOxF,CAAC,GAAKyF,EAASzF,CAAC,EAAI,EAC3C2F,EAAQ3F,CAAC,EAAIyF,EAASzF,CAAC,EAEvB2F,EAAQ3F,CAAC,EAAI,EAIf,MAAM6F,EAAM3B,EAAKlE,CAAC,EAAImE,EAAInE,CAAC,EACrB8F,EAAM,KAAK,IAAI5B,EAAKlE,CAAC,EAAI+D,EAAM/D,EAAI,CAAC,CAAC,EACrC+F,EAAM,KAAK,IAAI5B,EAAInE,CAAC,EAAI+D,EAAM/D,EAAI,CAAC,CAAC,EAC1C4F,EAAG5F,CAAC,EAAI,KAAK,IAAI6F,EAAKC,EAAKC,CAAG,CAChC,CAGA,MAAMC,EAAOvC,GAAgBmC,EAAG,MAAM,CAAC,EAAGtD,CAAM,EAC1C2D,EAAWxC,GAAgBiC,EAAO,MAAM,CAAC,EAAGpD,CAAM,EAClD4D,EAAYzC,GAAgBkC,EAAQ,MAAM,CAAC,EAAGrD,CAAM,EAE1D,QAAQ,IAAI,6CAA6C0D,EAAK,OAAO/C,GAAK,CAAC,MAAMA,CAAC,CAAC,EAAE,MAAM,gBAAgBgD,EAAS,OAAOhD,GAAK,CAAC,MAAMA,CAAC,CAAC,EAAE,MAAM,gBAAgBiD,EAAU,OAAOjD,GAAK,CAAC,MAAMA,CAAC,CAAC,EAAE,MAAM,EAAE,EAG1M,MAAMkD,EAAS,IAAI,MAAMb,CAAM,EACzBc,EAAU,IAAI,MAAMd,CAAM,EAC1Be,EAAK,IAAI,MAAMf,CAAM,EAE3Ba,EAAO,CAAC,EAAI,IACZC,EAAQ,CAAC,EAAI,IACbC,EAAG,CAAC,EAAI,IAER,QAASrG,EAAI,EAAGA,EAAIsF,EAAQtF,IAAK,CAC/B,MAAMsG,EAAYN,EAAKhG,EAAI,CAAC,EACtBuG,EAAgBN,EAASjG,EAAI,CAAC,EAC9BwG,EAAiBN,EAAUlG,EAAI,CAAC,EAEtC,GAAI,MAAMsG,CAAS,GAAK,MAAMC,CAAa,GAAK,MAAMC,CAAc,GAAKF,GAAarE,GACpFkE,EAAOnG,CAAC,EAAI,IACZoG,EAAQpG,CAAC,EAAI,IACbqG,EAAGrG,CAAC,EAAI,QACH,CACLmG,EAAOnG,CAAC,EAAI,IAAMuG,EAAgBD,EAClCF,EAAQpG,CAAC,EAAI,IAAMwG,EAAiBF,EAEpC,MAAMG,EAAQN,EAAOnG,CAAC,EAAIoG,EAAQpG,CAAC,EAC/ByG,GAASxE,GACXoE,EAAGrG,CAAC,EAAI,IAERqG,EAAGrG,CAAC,EAAI,IAAM,KAAK,IAAImG,EAAOnG,CAAC,EAAIoG,EAAQpG,CAAC,CAAC,EAAIyG,CAErD,CACF,CAGA,MAAMC,EAAMjD,GAAgB4C,EAAG,MAAM,CAAC,EAAG/D,CAAM,EAE/C,QAAQ,IAAI,wCAAwC+D,EAAG,OAAOpD,GAAK,CAAC,MAAMA,CAAC,CAAC,EAAE,MAAM,gBAAgByD,EAAI,OAAOzD,GAAK,CAAC,MAAMA,CAAC,CAAC,EAAE,MAAM,EAAE,EAGvI,MAAM0D,EAAY,IAAI,MAAMrB,CAAM,EAClCqB,EAAU,CAAC,EAAI,IACf,QAAS3G,EAAI,EAAGA,EAAIsF,EAAQtF,IAC1B2G,EAAU3G,CAAC,EAAI0G,EAAI1G,EAAI,CAAC,EAI1B,MAAM4G,EAAgBD,EAAU,OAAO1D,GAAK,CAAC,MAAMA,CAAC,CAAC,EAAE,OACvD,eAAQ,IAAI,uBAAuB2D,CAAa,4BAA4BtB,CAAM,QAAQ,EAEnF,CACL,IAAKqB,EACL,OAAQR,EACR,QAASC,CACb,CACA,CAKA,SAASS,GAAc9C,EAAO+C,EAAa,GAAIC,EAAa,GAAIC,EAAe,EAAG,CAC5ED,GAAcD,GAChB,QAAQ,KAAK,gDAAgD,EAG/D,MAAMG,EAAU9D,GAAIY,EAAO+C,CAAU,EAC/BI,EAAU/D,GAAIY,EAAOgD,CAAU,EAG/BI,EAAO,IAAI,MAAMpD,EAAM,MAAM,EACnC,QAAS/D,EAAI,EAAGA,EAAI+D,EAAM,OAAQ/D,IAC5B,MAAMiH,EAAQjH,CAAC,CAAC,GAAK,MAAMkH,EAAQlH,CAAC,CAAC,EACvCmH,EAAKnH,CAAC,EAAI,IAEVmH,EAAKnH,CAAC,EAAIiH,EAAQjH,CAAC,EAAIkH,EAAQlH,CAAC,EAKpC,MAAMoH,EAASjE,GAAIgE,EAAMH,CAAY,EAG/BK,EAAY,IAAI,MAAMtD,EAAM,MAAM,EACxC,QAAS/D,EAAI,EAAGA,EAAI+D,EAAM,OAAQ/D,IAC5B,MAAMmH,EAAKnH,CAAC,CAAC,GAAK,MAAMoH,EAAOpH,CAAC,CAAC,EACnCqH,EAAUrH,CAAC,EAAI,IAEfqH,EAAUrH,CAAC,EAAImH,EAAKnH,CAAC,EAAIoH,EAAOpH,CAAC,EAIrC,MAAO,CACL,KAAMmH,EACN,OAAQC,EACR,UAAWC,CACf,CACA,CAWA,SAASC,GAAuBC,EAAO,CACrC,KAAM,CAAE,KAAAC,EAAM,KAAAtD,EAAM,IAAAC,EAAK,MAAAJ,EAAO,OAAAW,CAAM,EAAK6C,EAGrCjC,EAASvB,EAAM,OACrB,GAAIG,EAAK,SAAWoB,GAAUnB,EAAI,SAAWmB,GACzCkC,EAAK,SAAWlC,GAAUZ,EAAO,SAAWY,EAC9C,MAAM,IAAI,MAAM,4CAA4C,EAI9D,MAAM3G,EAAU,CAEd,KAAMmF,GAAYC,EAAO,CAAC,EAC1B,MAAOD,GAAYC,EAAO,EAAE,EAC5B,MAAOD,GAAYC,EAAO,EAAE,EAG5B,MAAOC,GAAaD,EAAO,CAAC,EAC5B,OAAQC,GAAaD,EAAO,EAAE,EAC9B,OAAQC,GAAaD,EAAO,EAAE,EAG9B,qBAAsBE,GAA0BC,EAAMC,EAAK,EAAE,EAC7D,0BAA2BG,GAAgCJ,EAAMC,EAAK,CAAC,EACvE,wBAAyBI,GAA6BR,EAAO,EAAE,EAG/D,QAASU,GAAcV,EAAOW,EAAQ,EAAE,EAGxC,OAAQG,GAAad,EAAO,EAAE,EAG9B,IAAI,IAAM,CACR,MAAM0D,EAAaZ,GAAc9C,EAAO,GAAI,GAAI,CAAC,EACjD,MAAO,CACL,aAAc0D,EAAW,KACzB,cAAeA,EAAW,OAC1B,UAAWA,EAAW,SAC9B,CACI,GAAC,EAGD,IAAI,IAAM,CACR,MAAMd,EAAYtB,GAAanB,EAAMC,EAAKJ,EAAO,EAAE,EACnD,MAAO,CACL,OAAQ4C,EAAU,IAClB,eAAgBA,EAAU,OAC1B,gBAAiBA,EAAU,OACnC,CACI,GAAC,CACL,EAGE,SAAW,CAAC1I,EAAKoE,CAAM,IAAK,OAAO,QAAQ1D,CAAO,EAC5C0D,EAAO,SAAWiD,GACpB,QAAQ,MAAM,uBAAuBrH,CAAG,cAAcqH,CAAM,SAASjD,EAAO,MAAM,EAAE,EAIxF,OAAO1D,CACT,CC9rBA,MAAM+I,EAAgB,CACpB,aAAc,CAGZ,KAAK,YAAc,CAEjB,sCAGA,yBAGA,mBACA,yCACA,yCACA,0CACA,sCACN,EACI,KAAK,QAAU,qDACf,KAAK,MAAQ,IAAI,IACjB,KAAK,aAAe,EAAI,GAAK,IAC7B,KAAK,kBAAoB,CAC3B,CAGA,MAAM,uBAAuB/G,EAAQ,CAEnC,MAAMkB,EAAa,MAAMG,GAAyB,uBAAuBrB,CAAM,EAC/E,GAAIkB,EACF,OAAOA,EAIT,MAAM8F,EAAY,MAAM,KAAK,gCAAgChH,CAAM,EAGnE,OAAIgH,GAAa,CAACA,EAAU,OAC1B,MAAM3F,GAAyB,uBAAuBrB,EAAQgH,CAAS,EAGlEA,CACT,CAGA,MAAM,gCAAgChH,EAAQ,SAC5C,MAAMC,EAAW,aAAaD,CAAM,GAGpC,GAAI,KAAK,MAAM,IAAIC,CAAQ,EAAG,CAC5B,MAAMC,EAAS,KAAK,MAAM,IAAID,CAAQ,EACtC,GAAI,KAAK,IAAG,EAAKC,EAAO,UAAY,KAAK,aACvC,eAAQ,IAAI,yBAAyBF,CAAM,EAAE,EACtCE,EAAO,IAElB,CAGA,QAAS,EAAI,EAAG,EAAI,KAAK,YAAY,OAAQ,IAC3C,GAAI,CACF,MAAM+G,GAAc,KAAK,kBAAoB,GAAK,KAAK,YAAY,OAC7DC,EAAQ,KAAK,YAAYD,CAAU,EAEzC,QAAQ,IAAI,qBAAqBjH,CAAM,gBAAgBiH,EAAa,CAAC,KAAK,EAG1E,MAAME,EAAY,GAAG,KAAK,OAAO,GAAGnH,CAAM,+DACpCoH,EAAM,GAAGF,CAAK,GAAG,mBAAmBC,CAAS,CAAC,GAEpD,QAAQ,IAAI,gBAAgBC,CAAG,EAAE,EAGjC,MAAMrI,EAAW,MAAM,MAAMqI,EAAK,CAChC,OAAQ,KAElB,CAAS,EAID,GAFA,QAAQ,IAAI,oBAAoBrI,EAAS,MAAM,EAAE,EAE7C,CAACA,EAAS,GACZ,MAAM,IAAI,MAAM,uBAAuBA,EAAS,MAAM,EAAE,EAG1D,MAAMxB,EAAO,MAAMwB,EAAS,OAI5B,GAHA,QAAQ,IAAI,sBAAuBxB,CAAI,EAGnC,CAACA,EAAK,OAAS,CAACA,EAAK,MAAM,QAAUA,EAAK,MAAM,OAAO,SAAW,EACpE,MAAM,IAAI,MAAM,yBAAyB,EAG3C,MAAMd,EAASc,EAAK,MAAM,OAAO,CAAC,EAElC,GAAI,CAACd,EAAO,YAAc,CAACA,EAAO,WAAW,OAAS,CAACA,EAAO,WAAW,MAAM,CAAC,EAC9E,MAAM,IAAI,MAAM,6CAA6C,EAG/D,MAAM4K,EAAS5K,EAAO,WAAW,MAAM,CAAC,EAGlC6K,EAAU,CACd,KAAMD,EAAO,MAAQ,GACrB,KAAMA,EAAO,MAAQ,GACrB,IAAKA,EAAO,KAAO,GACnB,MAAOA,EAAO,OAAS,GACvB,OAAQA,EAAO,QAAU,EACnC,EAGc1C,EAAS2C,EAAQ,MAAM,OACvBV,EAAQ,CACZ,KAAM,IAAI,MAAMjC,CAAM,EACtB,KAAM,IAAI,MAAMA,CAAM,EACtB,IAAK,IAAI,MAAMA,CAAM,EACrB,MAAO,IAAI,MAAMA,CAAM,EACvB,OAAQ,IAAI,MAAMA,CAAM,CAClC,EAEQ,IAAI4C,EAAkB,EACtB,QAASlI,EAAI,EAAGA,EAAIsF,EAAQtF,IAC1BuH,EAAM,KAAKvH,CAAC,EAAIiI,EAAQ,KAAKjI,CAAC,IAAM,KAAOiI,EAAQ,KAAKjI,CAAC,EAAI,IAC7DuH,EAAM,KAAKvH,CAAC,EAAIiI,EAAQ,KAAKjI,CAAC,IAAM,KAAOiI,EAAQ,KAAKjI,CAAC,EAAI,IAC7DuH,EAAM,IAAIvH,CAAC,EAAIiI,EAAQ,IAAIjI,CAAC,IAAM,KAAOiI,EAAQ,IAAIjI,CAAC,EAAI,IAC1DuH,EAAM,MAAMvH,CAAC,EAAIiI,EAAQ,MAAMjI,CAAC,IAAM,KAAOiI,EAAQ,MAAMjI,CAAC,EAAI,IAChEuH,EAAM,OAAOvH,CAAC,EAAIiI,EAAQ,OAAOjI,CAAC,IAAM,KAAOiI,EAAQ,OAAOjI,CAAC,EAAI,IAG/D,CAAC,MAAMuH,EAAM,KAAKvH,CAAC,CAAC,GAAK,CAAC,MAAMuH,EAAM,KAAKvH,CAAC,CAAC,GAC7C,CAAC,MAAMuH,EAAM,IAAIvH,CAAC,CAAC,GAAK,CAAC,MAAMuH,EAAM,MAAMvH,CAAC,CAAC,GAC/CkI,IAWJ,GAPA,QAAQ,IAAI,SAAS5C,CAAM,uBAAuB4C,CAAe,0BAA0BvH,CAAM,EAAE,EAG/FuH,EAAkB,IACpB,QAAQ,KAAK,mDAAmDA,CAAe,OAAO,EAGpF5C,EAAS,GACX,MAAM,IAAI,MAAM,6BAA6BA,CAAM,0BAA0B,EAI/E,MAAM6C,EAAcb,GAAuBC,CAAK,EAG1Ca,EAAgBC,GAAW,CAC/B,GAAI,CAACA,GAAU,CAAC,MAAM,QAAQA,CAAM,EAClC,eAAQ,KAAK,mCAAmC,EACzC,KAGT,QAASrI,EAAIqI,EAAO,OAAS,EAAGrI,GAAK,EAAGA,IAAK,CAC3C,MAAMuB,EAAQ8G,EAAOrI,CAAC,EACtB,GAAIuB,GAAU,MAA+B,CAAC,MAAMA,CAAK,GAAK,SAASA,CAAK,EAC1E,eAAQ,IAAI,mCAAmCA,CAAK,aAAavB,CAAC,OAAOqI,EAAO,MAAM,EAAE,EACjF9G,CAEX,CACA,eAAQ,KAAK,2DAA2D8G,EAAO,MAAM,EAAE,EAChF,IACT,EAEMC,EAAwB,CAACD,EAAQE,EAAmB,OAAS,CACjE,MAAMC,EAAYJ,EAAaC,CAAM,EAC/BI,EAAeL,EAAab,EAAM,KAAK,EAE7C,IAAIH,EAAS,UACb,OAAImB,GAAoBC,IAAc,MAAQC,IAAiB,OACzDF,EAAiB,OAAS,mBACxBE,EAAeD,EAAYD,EAAiB,IAAKnB,EAAS,MACrDqB,EAAeD,EAAYD,EAAiB,OAAMnB,EAAS,QAC3DmB,EAAiB,OAAS,MAC/BC,EAAYD,EAAiB,WAAYnB,EAAS,aAC7CoB,EAAYD,EAAiB,WAAUnB,EAAS,YAChDmB,EAAiB,OAAS,QAC/BC,EAAYD,EAAiB,OAAQnB,EAAS,eACzCoB,EAAYD,EAAiB,OAAMnB,EAAS,gBAIlD,CACL,MAAOoB,IAAc,KAAOA,EAAU,QAAQ,CAAC,EAAI,KACnD,OAAQpB,EACR,aAAcqB,IAAiB,KAAOA,EAAa,QAAQ,CAAC,EAAI,IAC5E,CACQ,EAGMzH,EAAa,CAEjB,IAAKsH,EAAsBH,EAAY,KAAM,CAAE,KAAM,mBAAoB,IAAK,KAAM,KAAM,GAAI,CAAE,EAChG,KAAMG,EAAsBH,EAAY,MAAO,CAAE,KAAM,mBAAoB,IAAK,KAAM,KAAM,GAAI,CAAE,EAClG,KAAMG,EAAsBH,EAAY,MAAO,CAAE,KAAM,mBAAoB,IAAK,KAAM,KAAM,GAAI,CAAE,EAClG,MAAOG,EAAsBH,EAAY,OAAQ,CAAE,KAAM,mBAAoB,IAAK,KAAM,KAAM,GAAI,CAAE,EACpG,KAAMG,EAAsBH,EAAY,MAAO,CAAE,KAAM,mBAAoB,IAAK,KAAM,KAAM,GAAI,CAAE,EAClG,MAAOG,EAAsBH,EAAY,OAAQ,CAAE,KAAM,mBAAoB,IAAK,KAAM,KAAM,GAAI,CAAE,EACpG,MAAO,CAAE,MAAO,KAAM,OAAQ,KAAK,EAGnC,iBAAkBG,EAAsBH,EAAY,qBAAsB,CAAE,KAAM,mBAAoB,IAAK,KAAM,KAAM,GAAI,CAAE,EAC7H,uBAAwBG,EAAsBH,EAAY,0BAA2B,CAAE,KAAM,mBAAoB,IAAK,KAAM,KAAM,GAAI,CAAE,EACxI,oBAAqBG,EAAsBH,EAAY,uBAAuB,EAG9E,OAAQG,EAAsBH,EAAY,QAAS,CAAE,KAAM,mBAAoB,IAAK,KAAM,KAAM,GAAI,CAAE,EAGtG,MAAOG,EAAsBH,EAAY,OAAQ,CAAE,KAAM,MAAO,WAAY,GAAI,SAAU,EAAE,CAAE,EAC9F,OAAQ,IAAM,CACZ,QAAQ,IAAI,8BAA8B,EAC1C,QAAQ,IAAI,iBAAkBA,EAAY,MAAM,EAChD,QAAQ,IAAI,yBAA0BA,EAAY,cAAc,EAChE,QAAQ,IAAI,0BAA2BA,EAAY,eAAe,EAElE,MAAMO,EAAWN,EAAaD,EAAY,MAAM,EAC1ChC,EAASiC,EAAaD,EAAY,cAAc,EAChD/B,EAAUgC,EAAaD,EAAY,eAAe,EAExD,QAAQ,IAAI,wBAAyB,CAAE,SAAAO,EAAU,OAAAvC,EAAQ,QAAAC,CAAO,CAAE,EAElE,IAAIgB,EAAS,UACTsB,IAAa,MAAQ,CAAC,MAAMA,CAAQ,IAClCA,EAAW,GAAItB,EAAS,eACnBsB,EAAW,KAAItB,EAAS,eAGnC,MAAMhK,EAAS,CACb,MAAOsL,IAAa,MAAQ,CAAC,MAAMA,CAAQ,EAAIA,EAAS,QAAQ,CAAC,EAAI,KACrE,OAAQtB,EACR,OAAQjB,IAAW,MAAQ,CAAC,MAAMA,CAAM,EAAIA,EAAO,QAAQ,CAAC,EAAI,KAChE,QAASC,IAAY,MAAQ,CAAC,MAAMA,CAAO,EAAIA,EAAQ,QAAQ,CAAC,EAAI,IAClF,EAEY,eAAQ,IAAI,oBAAqBhJ,CAAM,EAChCA,CACT,GAAC,EACD,MAAO,IAAM,CACX,MAAMuL,EAAYP,EAAaD,EAAY,YAAY,EACjDS,EAAcR,EAAaD,EAAY,aAAa,EACpDU,EAAYT,EAAaD,EAAY,SAAS,EAEpD,IAAIf,EAAS,UACb,OAAIuB,IAAc,MAAQC,IAAgB,MAAQC,IAAc,OAC1DF,EAAYC,GAAeC,EAAY,EACzCzB,EAAS,MACAuB,EAAYC,GAAeC,EAAY,IAChDzB,EAAS,SAIN,CACL,MAAOuB,IAAc,KAAOA,EAAU,QAAQ,CAAC,EAAI,KACnD,OAAQvB,EACR,WAAYwB,IAAgB,KAAOA,EAAY,QAAQ,CAAC,EAAI,KAC5D,UAAWC,IAAc,KAAOA,EAAU,QAAQ,CAAC,EAAI,IACrE,CACU,GAAC,EAGD,YAAa,IAAI,KAAI,EAAG,YAAW,EACnC,WAAYvD,EACZ,MAAO,SAASsC,EAAa,CAAC,GAC9B,OAAQ,0CAGR,WAAYO,EAGZ,WAAY,CACV,IAAK,KAAK,IAAI,GAAGZ,EAAM,MAAM,OAAOuB,GAAK,CAAC,MAAMA,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,EAC9D,IAAK,KAAK,IAAI,GAAGvB,EAAM,MAAM,OAAOuB,GAAK,CAAC,MAAMA,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,EAC9D,SAAQ7H,EAAAmH,EAAab,EAAM,KAAK,IAAxB,YAAAtG,EAA2B,QAAQ,KAAM,MACjD,QAAO8H,EAAAxB,EAAM,MAAM,KAAKuB,GAAK,CAAC,MAAMA,CAAC,CAAC,IAA/B,YAAAC,EAAkC,QAAQ,KAAM,KACnE,CACA,EAEQ,eAAQ,IAAI,kBAAkBpI,CAAM,IAAK,CACvC,WAAY2E,EACZ,WAAYtE,EAAW,WACvB,aAAcuG,EAAM,MAAM,MAAM,GAAG,EAAE,OAAOuB,GAAK,CAAC,MAAMA,CAAC,CAAC,CACpE,CAAS,EAED,QAAQ,IAAI,6BAA6BnI,CAAM,IAAKK,CAAU,EAG9D,KAAK,MAAM,IAAIJ,EAAU,CACvB,KAAMI,EACN,UAAW,KAAK,IAAG,CAC7B,CAAS,EAGD,KAAK,kBAAoB4G,EAElB5G,CAET,OAASnE,EAAO,CAId,GAHA,QAAQ,KAAK,SAAS,EAAI,CAAC,eAAe8D,CAAM,IAAK9D,EAAM,OAAO,EAG9D,IAAM,KAAK,YAAY,OAAS,EAClC,eAAQ,MAAM,0BAA0B8D,CAAM,IAAK9D,CAAK,EAGjD,CACL,IAAK,CAAE,MAAO,KAAM,OAAQ,KAAK,EACjC,KAAM,CAAE,MAAO,KAAM,OAAQ,KAAK,EAClC,KAAM,CAAE,MAAO,KAAM,OAAQ,KAAK,EAClC,MAAO,CAAE,MAAO,KAAM,OAAQ,KAAK,EACnC,KAAM,CAAE,MAAO,KAAM,OAAQ,KAAK,EAClC,MAAO,CAAE,MAAO,KAAM,OAAQ,KAAK,EACnC,MAAO,CAAE,MAAO,KAAM,OAAQ,KAAK,EACnC,iBAAkB,CAAE,MAAO,KAAM,OAAQ,KAAK,EAC9C,uBAAwB,CAAE,MAAO,KAAM,OAAQ,KAAK,EACpD,oBAAqB,CAAE,MAAO,KAAM,OAAQ,KAAK,EACjD,OAAQ,CAAE,MAAO,KAAM,OAAQ,KAAK,EACpC,MAAO,CAAE,MAAO,KAAM,OAAQ,KAAK,EACnC,MAAO,CAAE,MAAO,KAAM,OAAQ,KAAK,EACnC,KAAM,CAAE,MAAO,KAAM,OAAQ,KAAK,EAClC,YAAa,IAAI,KAAI,EAAG,YAAW,EACnC,MAAO,uBAAuBA,EAAM,OAAO,GAC3C,OAAQ,OACpB,CAEM,CAEJ,CAGA,YAAa,CACX,KAAK,MAAM,OACb,CAGA,MAAM,aAAa8D,EAAQ,CACzB,MAAMC,EAAW,QAAQD,CAAM,GAGzBqI,EAAmB,GAAK,GAAK,GAAK,IACxC,GAAI,KAAK,MAAM,IAAIpI,CAAQ,EAAG,CAC5B,MAAMC,EAAS,KAAK,MAAM,IAAID,CAAQ,EACtC,GAAI,KAAK,IAAG,EAAKC,EAAO,UAAYmI,EAClC,eAAQ,IAAI,+BAA+BrI,CAAM,EAAE,EAC5CE,EAAO,IAElB,CAGA,QAASb,EAAI,EAAGA,EAAI,KAAK,YAAY,OAAQA,IAC3C,GAAI,CACF,MAAM4H,GAAc,KAAK,kBAAoB5H,GAAK,KAAK,YAAY,OAC7D6H,EAAQ,KAAK,YAAYD,CAAU,EAEzC,QAAQ,IAAI,2BAA2BjH,CAAM,gBAAgBiH,EAAa,CAAC,KAAK,EAGhF,MAAME,EAAY,6DAA6DnH,CAAM,qDAC/EoH,EAAM,GAAGF,CAAK,GAAG,mBAAmBC,CAAS,CAAC,GAE9CpI,EAAW,MAAM,MAAMqI,EAAK,CAChC,OAAQ,KAElB,CAAS,EAED,GAAI,CAACrI,EAAS,GACZ,MAAM,IAAI,MAAM,uBAAuBA,EAAS,MAAM,EAAE,EAG1D,MAAMxB,EAAO,MAAMwB,EAAS,OAG5B,GAAI,CAACxB,EAAK,cAAgB,CAACA,EAAK,aAAa,QAAUA,EAAK,aAAa,OAAO,SAAW,EACzF,MAAM,IAAI,MAAM,gCAAgC,EAGlD,MAAMd,EAASc,EAAK,aAAa,OAAO,CAAC,EACnC+K,EAAiB7L,EAAO,gBAAkB,GAC1C8L,EAAQ9L,EAAO,OAAS,GACxB+L,EAAW/L,EAAO,sBAAwB,GAG1CgM,EAAY,CAChB,OAAQzI,EACR,OAAQsI,EAAe,QAAU,UACjC,SAAUA,EAAe,UAAY,mBACrC,SAAUC,EAAM,cAAgBA,EAAM,UAAY,KAAK,mBAAmBvI,CAAM,EAChF,UAAWuI,EAAM,UAAYA,EAAM,UAAU,IAAM,KACnD,mBAAoBA,EAAM,UAAYA,EAAM,UAAU,IAAM,MAC5D,SAAUA,EAAM,UAAY,MAC5B,QAASD,EAAe,SAAW,UACnC,QAASA,EAAe,SAAW,KACnC,UAAWA,EAAe,mBAAqB,KAC/C,gBAAiBA,EAAe,qBAAuB,KAGvD,kBAAmB,KAAK,qBAAqBC,EAAM,UAAYA,EAAM,UAAU,IAAM,IAAI,EAGzF,YAAa,IAAI,KAAI,EAAG,YAAW,EACnC,OAAQ,2BACR,MAAO,SAAStB,EAAa,CAAC,GAC9B,WAAY,GACtB,EAEQ,eAAQ,IAAI,kBAAkBjH,CAAM,IAAKyI,CAAS,EAGlD,KAAK,MAAM,IAAIxI,EAAU,CACvB,KAAMwI,EACN,UAAW,KAAK,IAAG,CAC7B,CAAS,EAGD,KAAK,kBAAoBxB,EAElBwB,CAET,OAASvM,EAAO,CAId,GAHA,QAAQ,KAAK,SAASmD,EAAI,CAAC,0BAA0BW,CAAM,IAAK9D,EAAM,OAAO,EAGzEmD,IAAM,KAAK,YAAY,OAAS,EAAG,CACrC,QAAQ,MAAM,qCAAqCW,CAAM,IAAK9D,CAAK,EAEnE,MAAMwM,EAAc,CAClB,OAAQ1I,EACR,OAAQ,UACR,SAAU,mBACV,SAAU,KAAK,mBAAmBA,CAAM,EACxC,UAAW,KACX,mBAAoB,MACpB,SAAU,MACV,QAAS,UACT,QAAS,KACT,UAAW,KACX,gBAAiB,KACjB,kBAAmB,UACnB,YAAa,IAAI,KAAI,EAAG,YAAW,EACnC,OAAQ,uBACR,MAAO,uBAAuB9D,EAAM,OAAO,GAC3C,WAAY,CACxB,EAGU,YAAK,MAAM,IAAI+D,EAAU,CACvB,KAAMyI,EACN,UAAW,KAAK,IAAG,CAC/B,CAAW,EAEMA,CACT,CACF,CAEJ,CAGA,mBAAmB1I,EAAQ,CACzB,MAAM2I,EAAgB,CAAC,OAAQ,OAAQ,QAAS,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,MAAO,OAAQ,KAAM,OAAQ,MAAO,OAAQ,MAAO,MAAO,OAAQ,OAAQ,OAAQ,MAAM,EAC1MC,EAAc,CAAC,MAAO,OAAQ,KAAK,EAEzC,OAAID,EAAc,SAAS3I,CAAM,EACxB,SACE4I,EAAY,SAAS5I,CAAM,EAC7B,OAGF,QACT,CAGA,qBAAqB6I,EAAW,CAC9B,MAAI,CAACA,GAAaA,GAAa,EACtB,UAILA,GAAa,KACR,WACEA,GAAa,KACf,YACEA,GAAa,IACf,UACEA,GAAa,IACf,YAEA,WAEX,CAGA,iBAAkB,CAChBxH,GAAyB,cAAa,CACxC,CAGA,eAAgB,CACd,MAAMyH,EAAgB,GACtB,SAAW,CAACxL,EAAKsD,CAAK,IAAK,KAAK,MAAM,UACpCkI,EAAcxL,CAAG,EAAI,CACnB,IAAK,KAAK,IAAG,EAAKsD,EAAM,UACxB,QAAS,KAAK,IAAG,EAAKA,EAAM,UAAY,KAAK,YACrD,EAGI,MAAO,CACL,SAAUkI,EACV,WAAYzH,GAAyB,cAAa,CACxD,CACE,CAGA,cAAc8F,EAAW,CAEvB,MAAO,GADO,KAAK,YAAY,KAAK,iBAAiB,CACtC,GAAG,mBAAmBA,CAAS,CAAC,EACjD,CAGA,MAAM,SAASnH,EAAQ2B,EAAS,KAAMoH,EAAQ,MAAO,CACnD,MAAM9I,EAAW,SAASD,CAAM,IAAI2B,CAAM,IAAIoH,CAAK,GAGnD,GAAI,KAAK,MAAM,IAAI9I,CAAQ,EAAG,CAC5B,MAAMC,EAAS,KAAK,MAAM,IAAID,CAAQ,EACtC,GAAI,KAAK,IAAG,EAAKC,EAAO,UAAY,KAAK,aACvC,eAAQ,IAAI,kCAAkCF,CAAM,EAAE,EAC/CE,EAAO,IAElB,CAGA,QAAS,EAAI,EAAG,EAAI,KAAK,YAAY,OAAQ,IAC3C,GAAI,CACF,MAAM+G,GAAc,KAAK,kBAAoB,GAAK,KAAK,YAAY,OAC7DC,EAAQ,KAAK,YAAYD,CAAU,EAEzC,QAAQ,IAAI,8BAA8BjH,CAAM,gBAAgBiH,EAAa,CAAC,KAAK,EAGnF,MAAME,EAAY,GAAG,KAAK,OAAO,GAAGnH,CAAM,aAAa2B,CAAM,UAAUoH,CAAK,yCACtE3B,EAAM,KAAK,cAAcD,CAAS,EAElCpI,EAAW,MAAM,MAAMqI,EAAK,CAChC,OAAQ,KAElB,CAAS,EAED,GAAI,CAACrI,EAAS,GACZ,MAAM,IAAI,MAAM,uBAAuBA,EAAS,MAAM,EAAE,EAG1D,MAAMxB,EAAO,MAAMwB,EAAS,OAG5B,GAAI,CAACxB,EAAK,OAAS,CAACA,EAAK,MAAM,QAAUA,EAAK,MAAM,OAAO,SAAW,EACpE,MAAM,IAAI,MAAM,yBAAyB,EAG3C,MAAMd,EAASc,EAAK,MAAM,OAAO,CAAC,EAElC,GAAI,CAACd,EAAO,YAAc,CAACA,EAAO,WAAW,OAAS,CAACA,EAAO,WAAW,MAAM,CAAC,EAC9E,MAAM,IAAI,MAAM,6CAA6C,EAG/D,MAAM4K,EAAS5K,EAAO,WAAW,MAAM,CAAC,EAIlCmK,EAAQ,CACZ,WAJiBnK,EAAO,WAAa,GAKrC,KAAM4K,EAAO,MAAQ,GACrB,KAAMA,EAAO,MAAQ,GACrB,IAAKA,EAAO,KAAO,GACnB,MAAOA,EAAO,OAAS,GACvB,OAAQA,EAAO,QAAU,EACnC,EAGc1C,EAASiC,EAAM,WAAW,OAChC,GAAIjC,EAAS,GACX,MAAM,IAAI,MAAM,mCAAmCA,CAAM,OAAO,EAIlE,IAAIqE,EAAc,EAClB,QAASnH,EAAI,EAAGA,EAAI8C,EAAQ9C,IACtB+E,EAAM,KAAK/E,CAAC,GAAK,MAAQ+E,EAAM,KAAK/E,CAAC,GAAK,MAC1C+E,EAAM,IAAI/E,CAAC,GAAK,MAAQ+E,EAAM,MAAM/E,CAAC,GAAK,MAC1C+E,EAAM,OAAO/E,CAAC,GAAK,MACrBmH,IAMJ,GAFA,QAAQ,IAAI,qBAAqBhJ,CAAM,KAAK2E,CAAM,kBAAkBqE,CAAW,eAAe,EAE1FA,EAAc,GAChB,MAAM,IAAI,MAAM,kCAAkCA,CAAW,OAAO,EAItE,MAAMC,EAAc,CAClB,GAAGrC,EACH,SAAU,CACR,OAAQ5G,EACR,OAAQ2B,EACR,MAAOoH,EACP,YAAapE,EACb,YAAaqE,EACb,UAAW,IAAI,KAAI,EAAG,YAAW,EACjC,OAAQ,oBACR,MAAO,SAAS/B,EAAa,CAAC,EAC1C,CACA,EAGQ,YAAK,MAAM,IAAIhH,EAAU,CACvB,KAAMgJ,EACN,UAAW,KAAK,IAAG,CAC7B,CAAS,EAGD,KAAK,kBAAoBhC,EAElBgC,CAET,OAAS/M,EAAO,CAId,GAHA,QAAQ,KAAK,YAAY,EAAI,CAAC,qBAAqB8D,CAAM,IAAK9D,EAAM,OAAO,EAGvE,IAAM,KAAK,YAAY,OAAS,EAClC,cAAQ,MAAM,mCAAmC8D,CAAM,IAAK9D,CAAK,EAC3D,IAAI,MAAM,+BAA+BA,EAAM,OAAO,EAAE,CAElE,CAEJ,CACF,CAGO,MAAMgN,GAAkB,IAAInC,GC9nBnC,MAAMoC,EAA6B,CACjC,aAAc,CACZ,KAAK,kBAAoB,GACzB,KAAK,kBAAoB,GAAK,GAAK,GAAK,IACxC,KAAK,mBAAqB,EAC5B,CAGA,MAAM,uBAAuBnJ,EAAQ,CACnC,QAAQ,IAAI,uCAAuCA,CAAM,EAAE,EAE3D,GAAI,CAEF,GAAI,KAAK,kBAAmB,CAC1B,MAAMoJ,EAAkB,MAAM,KAAK,mBAAmBpJ,CAAM,EAC5D,GAAIoJ,GAAmB,KAAK,WAAWA,CAAe,EACpD,eAAQ,IAAI,+CAA+CpJ,CAAM,EAAE,EAGnE,QAAQ,IAAI,8BAA8BA,CAAM,IAAK,CACnD,MAAO,CAAC,CAACoJ,EAAgB,GACzB,OAAQA,EAAgB,GAAK,OAAO,KAAKA,EAAgB,EAAE,EAAI,MAC3E,CAAW,EAEMA,EACEA,GACT,QAAQ,IAAI,2CAA2CpJ,CAAM,6BAA6B,CAE9F,CAGA,MAAMkB,EAAa,MAAMG,GAAyB,uBAAuBrB,CAAM,EAC/E,GAAIkB,GAAc,KAAK,WAAWA,CAAU,EAC1C,eAAQ,IAAI,2CAA2ClB,CAAM,EAAE,EACxDkB,EAMT,GALWA,GACT,QAAQ,IAAI,sCAAsClB,CAAM,6BAA6B,EAInF,KAAK,mBAAoB,CAC3B,QAAQ,IAAI,qCAAqCA,CAAM,EAAE,EACzD,MAAMqJ,EAAe,MAAMH,GAAgB,gCAAgClJ,CAAM,EAEjF,GAAIqJ,GAAgB,CAACA,EAAa,MAEhC,aAAMhI,GAAyB,uBAAuBrB,EAAQqJ,CAAY,EACnEA,CAEX,CAGA,MAAM,IAAI,MAAM,yBAAyB,CAE3C,OAASnN,EAAO,CACd,eAAQ,MAAM,4CAA4C8D,CAAM,IAAK9D,CAAK,EAGnE,KAAK,oBAAoB8D,EAAQ9D,EAAM,OAAO,CACvD,CACF,CAGA,WAAWqB,EAAM,CACf,GAAI,CAACA,GAAQ,CAACA,EAAK,MACjB,MAAO,GAIT,MAAMwK,EAAWxK,EAAK,MAAM,MAC5B,GAAIwK,GAAa,MAAkCA,IAAa,MAC9D,MAAO,GAIT,GAAIxK,EAAK,YAAcA,EAAK,WAAW,OAAQ,CAE7C,MAAM+L,EADY/L,EAAK,WAAW,OACF,OAAO+E,GAAKA,GAAM,MAA2B,CAAC,MAAMA,CAAC,CAAC,EAAE,OAGxF,GAAIgH,EAAgB,EAClB,eAAQ,IAAI,+BAA+BA,CAAa,eAAe,EAChE,EAEX,CAEA,MAAO,EACT,CAGA,MAAM,mBAAmBtJ,EAAQ,CAC/B,GAAI,CACF,QAAQ,IAAI,kCAAkCA,CAAM,EAAE,EAEtD,MAAMzC,EAAO,MAAMsD,GAAyB,uBAAuBb,CAAM,EAGnEO,EAAa,IAAI,KAAKhD,EAAK,WAAW,EAG5C,OAFY,KAAK,IAAG,EAAKgD,EAAW,QAAO,GAEhC,KAAK,mBACd,QAAQ,IAAI,gCAAgCP,CAAM,KAAKzC,EAAK,OAAO,GAAG,EAC/D,CACL,GAAGA,EACH,OAAQ,gBAAgBA,EAAK,OAAO,IACpC,SAAU,OACpB,IAEQ,QAAQ,IAAI,kCAAkCyC,CAAM,KAAKzC,EAAK,OAAO,GAAG,EACjE,KAGX,OAASrB,EAAO,CACd,eAAQ,IAAI,wCAAwC8D,CAAM,KAAK9D,EAAM,OAAO,EAAE,EACvE,IACT,CACF,CAGA,oBAAoB8D,EAAQuJ,EAAc,CACxC,MAAO,CACL,IAAK,CAAE,MAAO,KAAM,OAAQ,KAAK,EACjC,KAAM,CAAE,MAAO,KAAM,OAAQ,KAAK,EAClC,KAAM,CAAE,MAAO,KAAM,OAAQ,KAAK,EAClC,MAAO,CAAE,MAAO,KAAM,OAAQ,KAAK,EACnC,KAAM,CAAE,MAAO,KAAM,OAAQ,KAAK,EAClC,MAAO,CAAE,MAAO,KAAM,OAAQ,KAAK,EACnC,MAAO,CAAE,MAAO,KAAM,OAAQ,KAAK,EACnC,iBAAkB,CAAE,MAAO,KAAM,OAAQ,KAAK,EAC9C,uBAAwB,CAAE,MAAO,KAAM,OAAQ,KAAK,EACpD,oBAAqB,CAAE,MAAO,KAAM,OAAQ,KAAK,EACjD,OAAQ,CAAE,MAAO,KAAM,OAAQ,KAAK,EACpC,MAAO,CAAE,MAAO,KAAM,OAAQ,KAAK,EACnC,MAAO,CAAE,MAAO,KAAM,OAAQ,KAAK,EACnC,KAAM,CAAE,MAAO,KAAM,OAAQ,KAAK,EAClC,YAAa,IAAI,KAAI,EAAG,YAAW,EACnC,MAAOA,EACP,OAAQ,QACR,OAAQvJ,CACd,CACE,CAGA,MAAM,2BAA2BA,EAAQ,CACvC,QAAQ,IAAI,gCAAgCA,CAAM,EAAE,EAGpDqB,GAAyB,iBAAiBrB,CAAM,EAChDa,GAAyB,WAAU,EAGnC,MAAM2I,EAAmB,KAAK,mBACxBC,EAAsB,KAAK,kBAEjC,KAAK,mBAAqB,GAC1B,KAAK,kBAAoB,GAEzB,GAAI,CAEF,OADa,MAAM,KAAK,uBAAuBzJ,CAAM,CAEvD,QAAC,CAEC,KAAK,mBAAqBwJ,EAC1B,KAAK,kBAAoBC,CAC3B,CACF,CAGA,MAAM,4BAA4BC,EAASC,EAAgB,EAAG,CAC5D,MAAM3L,EAAU,IAAI,IACd4L,EAAU,GAGhB,QAAS,EAAI,EAAG,EAAIF,EAAQ,OAAQ,GAAKC,EACvCC,EAAQ,KAAKF,EAAQ,MAAM,EAAG,EAAIC,CAAa,CAAC,EAGlD,QAAQ,IAAI,iBAAiBD,EAAQ,MAAM,eAAeE,EAAQ,MAAM,UAAU,EAElF,UAAWC,KAASD,EAAS,CAC3B,MAAME,EAAgBD,EAAM,IAAI,MAAM7J,GAAU,CAC9C,GAAI,CACF,MAAMzC,EAAO,MAAM,KAAK,uBAAuByC,CAAM,EACrD,MAAO,CAAE,OAAAA,EAAQ,QAAS,GAAM,KAAAzC,CAAI,CACtC,OAASrB,EAAO,CACd,MAAO,CAAE,OAAA8D,EAAQ,QAAS,GAAO,MAAO9D,EAAM,QAChD,CACF,CAAC,GAEoB,MAAM,QAAQ,IAAI4N,CAAa,GAEvC,QAAQrN,GAAU,CAC7BuB,EAAQ,IAAIvB,EAAO,OAAQA,CAAM,CACnC,CAAC,EAGGmN,EAAQ,QAAQC,CAAK,EAAID,EAAQ,OAAS,GAC5C,MAAM,IAAI,QAAQ/N,GAAW,WAAWA,EAAS,GAAG,CAAC,CAEzD,CAEA,OAAOmC,CACT,CAGA,MAAM,qBAAsB,CAC1B,MAAM+L,EAAS,CACb,YAAa,CACX,UAAW,GACX,QAAS,GACT,WAAY,IACpB,EACM,MAAO1I,GAAyB,cAAa,EAC7C,SAAU,CACR,UAAW,GACX,QAAS6H,GAAgB,YAAY,MAC7C,CACA,EAEI,GAAI,CACF,MAAMc,EAAmB,MAAMnJ,GAAyB,mBACpDmJ,IACFD,EAAO,YAAc,CACnB,UAAW,GACX,QAASC,EAAiB,QAC1B,WAAYA,EAAiB,YAC7B,WAAYA,EAAiB,WAC7B,OAAQA,EAAiB,MACnC,EAEI,OAAS9N,EAAO,CACd,QAAQ,KAAK,oCAAqCA,CAAK,CACzD,CAEA,OAAO6N,CACT,CAGA,eAAeE,EAAS,CAClBA,EAAQ,oBAAsB,SAChC,KAAK,kBAAoBA,EAAQ,mBAE/BA,EAAQ,qBAAuB,SACjC,KAAK,mBAAqBA,EAAQ,oBAEhCA,EAAQ,oBAAsB,SAChC,KAAK,kBAAoBA,EAAQ,mBAGnC,QAAQ,IAAI,uBAAwB,CAClC,kBAAmB,KAAK,kBACxB,mBAAoB,KAAK,mBACzB,kBAAmB,KAAK,iBAC9B,CAAK,CACH,CACF,CAGO,MAAMC,GAA+B,IAAIf,GClQhD,MAAMgB,EAAmB,CACvB,aAAc,CACZ,KAAK,UAAY,GACjB,KAAK,eAAiB,EACtB,KAAK,kBAAoB,IACzB,KAAK,gBAAkB,KACvB,KAAK,cAAgB,KAGrB,KAAK,OAAS,CACZ,cAAe,EACf,WAAY,IACZ,cAAe,EACf,WAAY,IACZ,iBAAkB,KAAK,0BACvB,sBAAuB,GACvB,kBAAmB,GACnB,eAAgB,GAAK,GAAK,GAAK,IAC/B,iBAAkB,KAIpB,KAAK,eAAiB,CACpB,OAAQ,OAAQ,KAAM,OAAQ,MAAO,OAAQ,MAAO,OAAQ,MAAO,OACnE,MAAO,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,MAAO,MAAO,OACrE,OAAQ,OAAQ,OAAQ,OAE5B,CAGA,MAAM,OAAQ,CAIZ,GAHA,QAAQ,IAAI,qCAAqC,EAG7C,CAAC,KAAK,0BAA2B,CACnC,QAAQ,IAAI,qDAAqD,EACjE,MACF,CAEA,GAAI,CAEF,MAAMC,EAAe,MAAM,KAAK,sBAE5BA,EAAa,QACf,QAAQ,IAAI,qBAAqBA,EAAa,MAAM,EAAE,EACtD,MAAM,KAAK,iBAEX,QAAQ,IAAI,2BAA2B,EAIrC,KAAK,OAAO,kBACd,KAAK,wBAGT,OAASlO,EAAO,CACd,QAAQ,MAAM,0CAA2CA,CAAK,CAChE,CACF,CAGA,MAAM,qBAAsB,CAC1B,GAAI,CAEF,MAAMmO,EAAiB,MAAM,KAAK,oBAC5BC,EAAoB,KAAK,uBAE/B,GAAI,KAAK,OAAO,uBAAyBD,IAAmBC,EAC1D,MAAO,CACL,OAAQ,GACR,OAAQ,wBAAwBA,CAAiB,OAAOD,CAAc,IAK1E,MAAME,EAAiB,KAAK,oBAC5B,GAAI,KAAK,OAAO,mBAAqB,CAACA,EACpC,MAAO,CACL,OAAQ,GACR,OAAQ,yCAKZ,GAAIA,EAAgB,CAClB,MAAMC,EAAsB,KAAK,MAAQD,EACzC,GAAIC,EAAsB,KAAK,OAAO,eACpC,MAAO,CACL,OAAQ,GACR,OAAQ,2BAA2B,KAAK,MAAMA,EAAsB,IAAO,CAAC,SAGlF,CAGA,MAAMC,EAAa,MAAM,KAAK,gBAC9B,OAAIA,EAAW,SAAW,KAAK,OAAO,iBAC7B,CACL,OAAQ,GACR,OAAQ,uBAAuB,KAAK,MAAMA,EAAW,SAAW,GAAG,CAAC,MAIjE,CAAE,OAAQ,GAAO,OAAQ,8BAElC,OAASvO,EAAO,CACd,eAAQ,MAAM,8BAA+BA,CAAK,EAC3C,CAAE,OAAQ,GAAM,OAAQ,iDACjC,CACF,CAGA,MAAM,eAAgB,CACpB,GAAI,KAAK,UACP,eAAQ,IAAI,+BAA+B,EACpC,KAAK,cAGd,QAAQ,IAAI,gCAAgC,KAAK,eAAe,MAAM,aAAa,EAEnF,KAAK,UAAY,GACjB,KAAK,eAAiB,EACtB,KAAK,cAAc,QACnB,KAAK,gBAAkB,KAAK,MAE5B,MAAMG,EAAQ,qBACdc,GAAmB,MAAMd,CAAK,EAE9B,GAAI,CAEF,MAAMuN,EAAU,KAAK,cAAc,KAAK,eAAgB,KAAK,OAAO,aAAa,EAEjF,QAAS,EAAI,EAAG,EAAIA,EAAQ,OAAQ,IAAK,CACvC,MAAMC,EAAQD,EAAQ,CAAC,EACvB,QAAQ,IAAI,uBAAuB,EAAI,CAAC,IAAIA,EAAQ,MAAM,KAAKC,EAAM,KAAK,IAAI,CAAC,EAAE,EAGjF,MAAMC,EAAgBD,EAAM,OAAc,KAAK,aAAa7J,CAAM,CAAC,GAC9C,MAAM,QAAQ,IAAI8J,CAAa,GAGvC,QAAQ,CAACrN,EAAQuC,IAAU,CACtC,KAAK,cAAc,IAAI6K,EAAM7K,CAAK,EAAGvC,CAAM,CAC7C,CAAC,EAGD,KAAK,gBAAmB,EAAI,GAAKmN,EAAQ,OAAU,IACnD,QAAQ,IAAI,uBAAuB,KAAK,MAAM,KAAK,cAAc,CAAC,GAAG,EAGjE,EAAIA,EAAQ,OAAS,IACvB,QAAQ,IAAI,aAAa,KAAK,OAAO,UAAU,yBAAyB,EACxE,MAAM,KAAK,MAAM,KAAK,OAAO,UAAU,EAE3C,CAEA,KAAK,cAAgB,KAAK,MAC1B,MAAMrN,EAAW,KAAK,cAAgB,KAAK,gBAGrC+C,EAAQ,KAAK,iBAEnB,eAAQ,IAAI,gCAAgC,KAAK,MAAM/C,EAAW,GAAI,CAAC,GAAG,EAC1E,QAAQ,IAAI,eAAe+C,EAAM,UAAU,IAAIA,EAAM,KAAK,gBAAgBA,EAAM,WAAW,IAAI,EAG/F,KAAK,iBAAiBA,CAAK,EAEpB,KAAK,aAEd,OAASpD,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACR,SACE,KAAK,UAAY,GACjBiB,GAAmB,IAAId,CAAK,CAC9B,CACF,CAGA,MAAM,aAAa2D,EAAQ0K,EAAU,EAAG,CACtC,MAAMpO,EAAY,KAAK,MAEvB,GAAI,CACF,QAAQ,IAAI,iBAAiB0D,CAAM,aAAa0K,CAAO,IAAI,KAAK,OAAO,cAAgB,CAAC,GAAG,EAG3F,MAAMnN,EAAO,MAAM2M,GAA6B,uBAAuBlK,CAAM,EAEvEzD,EAAW,KAAK,MAAQD,EAE9B,GAAIiB,GAAQ,CAACA,EAAK,MAChB,eAAQ,IAAI,KAAKyC,CAAM,8BAA8BzD,CAAQ,OAAOgB,EAAK,MAAM,GAAG,EAC3E,CACL,QAAS,GACT,SAAAhB,EACA,OAAQgB,EAAK,OACb,UAAW,IAAI,OAAO,aAAY,EAGpC,MAAM,IAAI,OAAMA,GAAA,YAAAA,EAAM,QAAS,eAAe,CAGlD,OAASrB,EAAO,CAId,OAHA,QAAQ,MAAM,uBAAuB8D,CAAM,aAAa0K,CAAO,MAAMxO,EAAM,OAAO,EAAE,EAGhFwO,GAAW,KAAK,OAAO,eACzB,QAAQ,IAAI,eAAe1K,CAAM,OAAO,KAAK,OAAO,UAAU,OAAO,EACrE,MAAM,KAAK,MAAM,KAAK,OAAO,UAAU,EAChC,KAAK,aAAaA,EAAQ0K,EAAU,CAAC,GAErC,CACL,QAAS,GACT,MAAOxO,EAAM,QACb,SAAU,KAAK,MAAQI,EACvB,UAAW,IAAI,OAAO,aAAY,CAGxC,CACF,CAGA,cAAcyB,EAAO4M,EAAW,CAC9B,MAAMf,EAAU,GAChB,QAASvK,EAAI,EAAGA,EAAItB,EAAM,OAAQsB,GAAKsL,EACrCf,EAAQ,KAAK7L,EAAM,MAAMsB,EAAGA,EAAIsL,CAAS,CAAC,EAE5C,OAAOf,CACT,CAGA,MAAM,mBAAoB,CACxB,GAAI,CAEF,MAAMgB,EAAa,KAAK,oBAElB7L,EAAW,MAAM,MAAM6L,CAAU,EACvC,GAAI7L,EAAS,GAEX,OADY,MAAMA,EAAS,QAChB,SAAW,OAE1B,OAAS7C,EAAO,CACd,eAAQ,KAAK,gCAAiCA,CAAK,EAE5C,KAAK,MAAM,UACpB,CAEA,MAAO,OACT,CAGA,mBAAoB,CAElB,OAAAyC,GAAA,sBAAAE,CAAA,mCAAAC,EAAA,EAAqB,aAAAD,CAAA,WAAE,KAAK,CAAC,CAAE,MAAAA,KACtBA,EAAM,aACd,EAIM,oCACT,CAGA,sBAAuB,CACrB,OAAO,aAAa,QAAQ,sBAAsB,GAAK,IACzD,CAGA,mBAAoB,CAClB,MAAMhC,EAAO,aAAa,QAAQ,mBAAmB,EACrD,OAAOA,EAAO,SAASA,CAAI,EAAI,IACjC,CAGA,MAAM,eAAgB,CACpB,IAAIgO,EAAc,EAElB,UAAW7K,KAAU,KAAK,eACxB,GAAI,CAEa7B,EAAiB,IAAI,wBAAwB6B,CAAM,EAAE,GAElE6K,GAEJ,MAAgB,CAEhB,CAGF,MAAO,CACL,MAAO,KAAK,eAAe,OAC3B,OAAQA,EACR,SAAUA,EAAc,KAAK,eAAe,OAEhD,CAGA,gBAAiB,CACf,MAAM7M,EAAU,MAAM,KAAK,KAAK,cAAc,QAAQ,EAChD8M,EAAa9M,EAAQ,OAAO+M,GAAKA,EAAE,OAAO,EAAE,OAC5CC,EAAShN,EAAQ,UAAY,CAAC+M,EAAE,OAAO,EAAE,OAE/C,MAAO,CACL,MAAO/M,EAAQ,OACf,WAAA8M,EACA,OAAAE,EACA,YAAa,KAAK,MAAOF,EAAa9M,EAAQ,OAAU,GAAG,EAC3D,SAAU,KAAK,cAAgB,KAAK,gBACpC,gBAAiBA,EAAQ,OAAO,CAACpB,EAAKmO,IAAMnO,EAAMmO,EAAE,SAAU,CAAC,EAAI/M,EAAQ,OAE/E,CAGA,iBAAiBsB,EAAO,CACtB,MAAM+K,EAAiB,KAAK,oBAE5B,aAAa,QAAQ,uBAAwBA,CAAc,EAC3D,aAAa,QAAQ,oBAAqB,KAAK,MAAM,UAAU,EAC/D,aAAa,QAAQ,qBAAsB,KAAK,UAAU/K,CAAK,CAAC,EAEhE,QAAQ,IAAI,wBAAwB,CACtC,CAGA,wBAAyB,CACvB,QAAQ,IAAI,qCAAqC,KAAK,OAAO,eAAiB,IAAO,QAAQ,EAE7F,YAAY,SAAY,CACtB,QAAQ,IAAI,6BAA6B,EACzC,GAAI,CACF,MAAM,KAAK,eACb,OAASpD,EAAO,CACd,QAAQ,MAAM,4BAA6BA,CAAK,CAClD,CACF,EAAG,KAAK,OAAO,cAAc,CAC/B,CAGA,MAAM,qBAAsB,CAC1B,eAAQ,IAAI,4BAA4B,EACjC,KAAK,eACd,CAGA,iBAAkB,CAChB,MAAO,CACL,UAAW,KAAK,UAChB,SAAU,KAAK,eACf,QAAS,OAAO,YAAY,KAAK,aAAa,EAC9C,eAAgB,KAAK,oBACrB,kBAAmB,KAAK,uBACxB,eAAgB,KAAK,eACrB,OAAQ,KAAK,OAEjB,CAGA,MAAM+O,EAAI,CACR,OAAO,IAAI,QAAQpP,GAAW,WAAWA,EAASoP,CAAE,CAAC,CACvD,CAGA,yBAA0B,CAExB,MAAO,EACT,CAGA,aAAaC,EAAW,CACtB,KAAK,OAAS,CAAE,GAAG,KAAK,OAAQ,GAAGA,CAAA,EACnC,QAAQ,IAAI,kCAAmC,KAAK,MAAM,CAC5D,CAGA,iBAAiBlL,EAAQ,CAClB,KAAK,eAAe,SAASA,CAAM,IACtC,KAAK,eAAe,KAAKA,CAAM,EAC/B,QAAQ,IAAI,WAAWA,CAAM,qBAAqB,EAEtD,CAGA,oBAAoBA,EAAQ,CAC1B,MAAMhB,EAAQ,KAAK,eAAe,QAAQgB,CAAM,EAC5ChB,EAAQ,KACV,KAAK,eAAe,OAAOA,EAAO,CAAC,EACnC,QAAQ,IAAI,aAAagB,CAAM,uBAAuB,EAE1D,CACF,CAGO,MAAMmL,GAAqB,IAAIhB,GC5YtC,MAAMiB,EAAkB,CACtB,aAAc,CACZ,KAAK,cAAgB,EACrB,KAAK,eAAiB,EACtB,KAAK,MAAQ,GACb,KAAK,mBAAqB,IAC1B,KAAK,MAAQ,CACX,cAAe,EACf,kBAAmB,EACnB,eAAgB,EAChB,gBAAiB,EACjB,UAAW,EAAC,CAEhB,CASA,MAAM,WAAWC,EAAcC,EAAUC,EAAW,EAAG,CACrD,OAAO,IAAI,QAAQ,CAAC1P,EAASC,IAAW,CACtC,MAAM0P,EAAO,CACX,GAAIF,EACJ,aAAAD,EACA,SAAAE,EACA,QAAA1P,EACA,OAAAC,EACA,UAAW,KAAK,KAAI,EAItB,GAAI,KAAK,eAAe,IAAIwP,CAAQ,EAAG,CACrC,QAAQ,KAAK,UAAUA,CAAQ,iDAAiD,EAChFxP,EAAO,IAAI,MAAM,wBAAwB,CAAC,EAC1C,MACF,CAGA,KAAK,iBAAiB0P,CAAI,EAC1B,KAAK,MAAM,gBAEX,QAAQ,IAAI,4BAA4BF,CAAQ,wBAAwBC,CAAQ,iBAAiB,KAAK,MAAM,MAAM,GAAG,EAGrH,KAAK,cACP,CAAC,CACH,CAKA,iBAAiBC,EAAM,CACrB,IAAIC,EAAc,KAAK,MAAM,OAG7B,QAASpM,EAAI,EAAGA,EAAI,KAAK,MAAM,OAAQA,IACrC,GAAImM,EAAK,SAAW,KAAK,MAAMnM,CAAC,EAAE,SAAU,CAC1CoM,EAAcpM,EACd,KACF,CAGF,KAAK,MAAM,OAAOoM,EAAa,EAAGD,CAAI,CACxC,CAKA,MAAM,cAAe,CAEnB,GAAI,KAAK,gBAAkB,KAAK,eAAiB,KAAK,MAAM,SAAW,EACrE,OAIF,MAAMA,EAAO,KAAK,MAAM,QACxB,KAAK,iBACL,KAAK,eAAe,IAAIA,EAAK,EAAE,EAE/B,MAAMlP,EAAY,KAAK,MAEvB,QAAQ,IAAI,wCAAwCkP,EAAK,EAAE,KAAK,KAAK,cAAc,IAAI,KAAK,aAAa,cAAc,EAEvH,GAAI,CAEF,MAAMA,EAAK,eAEX,MAAME,EAAW,KAAK,MAAQpP,EAC9B,KAAK,YAAYoP,EAAU,EAAI,EAE/B,QAAQ,IAAI,0CAA0CF,EAAK,EAAE,OAAOE,CAAQ,IAAI,EAChFF,EAAK,SAEP,OAAStP,EAAO,CACd,MAAMwP,EAAW,KAAK,MAAQpP,EAC9B,KAAK,YAAYoP,EAAU,EAAK,EAEhC,QAAQ,MAAM,qCAAqCF,EAAK,EAAE,UAAUE,CAAQ,MAAOxP,CAAK,EACxFsP,EAAK,OAAOtP,CAAK,CAEnB,SAEE,KAAK,iBACL,KAAK,eAAe,OAAOsP,EAAK,EAAE,EAGlC,WAAW,IAAM,KAAK,eAAgB,GAAG,CAC3C,CACF,CAKA,YAAYE,EAAUC,EAAS,CACzBA,EACF,KAAK,MAAM,oBAEX,KAAK,MAAM,iBAGb,KAAK,MAAM,UAAU,KAAKD,CAAQ,EAG9B,KAAK,MAAM,UAAU,OAAS,KAChC,KAAK,MAAM,UAAU,QAIvB,KAAK,MAAM,gBAAkB,KAAK,MAAM,UAAU,OAAO,CAAC9O,EAAKC,IAASD,EAAMC,EAAM,CAAC,EAAI,KAAK,MAAM,UAAU,MAChH,CAKA,aAAayO,EAAU,CAErB,MAAMM,EAAY,KAAK,MAAM,UAAUJ,GAAQA,EAAK,KAAOF,CAAQ,EACnE,OAAIM,IAAc,IACH,KAAK,MAAM,OAAOA,EAAW,CAAC,EAAE,CAAC,EACzC,OAAO,IAAI,MAAM,uBAAuB,CAAC,EAC9C,QAAQ,IAAI,8CAA8CN,CAAQ,EAAE,EAC7D,IAGF,EACT,CAKA,YAAa,CACX,MAAMO,EAAiB,KAAK,MAAM,OAClC,KAAK,MAAM,QAAQL,GAAQ,CACzBA,EAAK,OAAO,IAAI,MAAM,eAAe,CAAC,CACxC,CAAC,EACD,KAAK,MAAQ,GACb,QAAQ,IAAI,+CAA+CK,CAAc,QAAQ,CACnF,CAKA,WAAY,CACV,MAAO,CACL,eAAgB,KAAK,eACrB,UAAW,KAAK,MAAM,OACtB,cAAe,KAAK,cACpB,MAAO,CAAE,GAAG,KAAK,MAAM,CAE3B,CAKA,iBAAiBjK,EAAK,CACpB,KAAK,cAAgB,KAAK,IAAI,EAAG,KAAK,IAAI,GAAIA,CAAG,CAAC,EAClD,QAAQ,IAAI,4CAA4C,KAAK,aAAa,EAAE,EAGxE,KAAK,eAAiB,KAAK,eAC7B,KAAK,cAET,CAKA,YAAa,CACX,KAAK,MAAQ,CACX,cAAe,EACf,kBAAmB,EACnB,eAAgB,EAChB,gBAAiB,EACjB,UAAW,EAAC,EAEd,QAAQ,IAAI,gCAAgC,CAC9C,CACF,CAGO,MAAMkK,GAAoB,IAAIV,GC9KhCjR,GAAU,CACb,KAAM,wBACN,MAAO,CACL,WAAY,CACV,KAAM,OACN,SAAU,IAEZ,OAAQ,CACN,KAAM,OACN,SAAU,IAEZ,UAAW,CACT,KAAM,OACN,SAAU,IAEZ,OAAQ,CACN,KAAM,OACN,QAAS,SAEX,SAAU,CACR,KAAM,OACN,QAAS,CACX,GAEF,MAAO,CACL,MAAO,CACL,UAAW,GACX,OAAQ,GACR,MAAO,GACP,SAAU,KACV,cAAe,CACjB,CACF,EACA,SAAU,CACR,aAAc,CACZ,MAAO,eAAe,KAAK,UAAU,IAAI,KAAK,IAAG,CAAE,EACrD,GAEF,SAAU,CACR,KAAK,0BAAyB,CAChC,EACA,eAAgB,CACV,KAAK,UACP,KAAK,SAAS,WAAU,CAE5B,EACA,QAAS,CACP,2BAA4B,CAE1B,MAAM4R,EAAc,CAClB,EAAG,QACH,EAAG,QACH,EAAG,MACL,EAEA,KAAK,SAAW,IAAI,qBACjBC,GAAY,CACXA,EAAQ,QAASC,GAAU,CACrBA,EAAM,gBAAkB,CAAC,KAAK,QAAU,CAAC,KAAK,QAChD,KAAK,UAAY,GACjB,KAAK,WAAU,EACf,KAAK,SAAS,WAAU,EAE5B,CAAC,CACH,EACA,CACE,WAAYF,EAAY,KAAK,QAAQ,GAAK,QAC1C,UAAW,EACb,CACF,EAEA,KAAK,SAAS,QAAQ,KAAK,MAAM,SAAS,CAC5C,EAEA,MAAM,YAAa,CACjB,KAAK,cAAgB,YAAY,IAAG,EAEpC,GAAI,CAQF,MAAMG,EANS,CACb,EAAG,EACH,EAAG,IACH,EAAG,GACL,EAEqB,KAAK,QAAQ,GAAK,EACnCA,EAAQ,GACV,MAAM,IAAI,QAAQrQ,GAAW,WAAWA,EAASqQ,CAAK,CAAC,EAIzD,MAAMZ,EAAW,QAAQ,KAAK,UAAU,IAAI,KAAK,WAAW,GAC5D,MAAMQ,GAAkB,WACtB,IAAM,KAAK,aAAY,EACvBR,EACA,KAAK,QACP,CACF,OAASa,EAAK,CACZ,QAAQ,MAAM,yBAA0BA,CAAG,EAC3C,KAAK,MAAQ,EACf,CACF,EAEA,MAAM,cAAe,CACnB,OAAO,IAAI,QAAQ,CAACtQ,EAASC,IAAW,CACtC,KAAK,UAAU,IAAM,CACnB,MAAMsQ,EAAY,KAAK,MAAM,UAC7B,GAAI,CAACA,EAAW,CACdtQ,EAAO,IAAI,MAAM,qBAAqB,CAAC,EACvC,MACF,CAGA,MAAMuQ,EAAkBD,EAAU,cAAc,sCAAsC,EAClFC,IACFA,EAAgB,MAAM,QAAU,QAGlC,GAAI,CAEF,MAAMC,EAAkB,SAAS,cAAc,KAAK,EACpDA,EAAgB,UAAY,+BAC5BA,EAAgB,MAAM,OAAS,OAC/BA,EAAgB,MAAM,MAAQ,OAE9B,MAAMC,EAAgB,SAAS,cAAc,KAAK,EAClDA,EAAc,UAAY,uCAC1BA,EAAc,MAAM,OAAS,OAC7BA,EAAc,MAAM,MAAQ,OAE5BD,EAAgB,YAAYC,CAAa,EAGzC,MAAMtQ,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,KAAO,kBACdA,EAAO,IAAM,KAAK,UAClBA,EAAO,MAAQ,GAGf,MAAMuQ,EAAa,KAAK,UAAU,KAAK,MAAM,EAC7CvQ,EAAO,UAAYuQ,EAGnB,QAAQ,IAAI,eAAe,KAAK,UAAU,uBAAwB,KAAK,MAAM,EAC7E,QAAQ,IAAI,kBAAmBA,CAAU,EASzC,MAAMC,EAAU,WAAW,IAAM,CAC/B,QAAQ,KAAK,GAAG,KAAK,UAAU,sBAAsB,EACrD,KAAK,MAAQ,GACb3Q,EAAO,IAAI,MAAM,qBAAqB,CAAC,CACzC,EAViB,CACf,EAAG,IACH,EAAG,IACH,EAAG,IACL,EAMY,KAAK,QAAQ,GAAK,GAAK,EAEnCG,EAAO,OAAS,IAAM,CACpB,aAAawQ,CAAO,EACpB,KAAK,OAAS,GAEd,MAAMf,EAAW,YAAY,IAAG,EAAK,KAAK,cAC1C,QAAQ,IAAI,KAAK,KAAK,UAAU,qBAAqBA,EAAS,QAAQ,CAAC,CAAC,iBAAiB,KAAK,QAAQ,GAAG,EAEzG7P,EAAO,CACT,EAEAI,EAAO,QAAWC,GAAU,CAC1B,aAAauQ,CAAO,EACpB,QAAQ,MAAM,KAAK,KAAK,UAAU,uBAAwBvQ,CAAK,EAC/D,KAAK,MAAQ,GACbJ,EAAO,IAAI,MAAM,oBAAoB,CAAC,CACxC,EAGAyQ,EAAc,YAAYtQ,CAAM,EAChCmQ,EAAU,YAAYE,CAAe,CAEvC,OAASpQ,EAAO,CACd,QAAQ,MAAM,KAAK,KAAK,UAAU,2BAA4BA,CAAK,EACnE,KAAK,MAAQ,GACbJ,EAAOI,CAAK,CACd,CACF,CAAC,CACH,CAAC,CACH,EAEA,MAAM,OAAQ,CACZ,KAAK,MAAQ,GACb,KAAK,OAAS,GACd,MAAM,KAAK,WAAU,CACvB,CACF,CACF,sBA5NsC,MAAM,sBACjC5B,GAAA,OAAM,qBAAqB,EAEzBC,GAAA,OAAM,kBAAkB,YAMU,MAAM,4BAM/B,MAAM,oDAtB1BK,EA0BM,OAzBJ,MAAM,cACL,GAAI8R,EAAA,YACL,IAAI,YACH,gBAAiBC,EAAA,MAAM,KAGZ,CAAAC,EAAA,YAAcA,EAAA,QAA1BjS,IAAAC,EAMM,MANNP,GAMM,CALJQ,EAIM,MAJNP,GAIM,CAHJU,EAAA,KAAAA,EAAA,GAAAH,EAAsC,OAAjC,MAAM,kBAAkB,EAAC,KAAE,KAChCA,EAA2D,MAA3DN,GAA2DsS,EAA1BF,EAAA,UAAU,EAAG,UAAO,GACrD3R,EAAA,KAAAA,EAAA,GAAAH,EAAqD,OAAhD,MAAM,uBAAsB,iBAAc,mBAKxC+R,EAAA,WAAS,CAAKA,EAAA,QAAM,CAAKA,EAAA,OAApCjS,IAAAC,EAGM,MAHNJ,GAGM,aAFJK,EAAmC,OAA9B,MAAM,iBAAiB,YAC5BA,EAAwC,YAAlC,WAAQgS,EAAGF,EAAA,UAAU,EAAG,MAAG,eAIxBC,EAAA,OAAXjS,IAAAC,EAGM,MAHNH,GAGM,CAFJO,EAAA,KAAAA,EAAA,GAAAH,EAA8B,YAAxB,oBAAiB,KACvBA,EAAuD,UAA9C,4BAAO6R,EAAA,OAAAA,EAAA,SAAAI,CAAA,GAAO,MAAM,aAAY,OAAK,qFCX/C3S,GAAU,CACb,KAAM,YACN,MAAO,CACL,MAAO,CACL,QAAS,GACT,MAAO,GACP,SAAU,cAAc,KAAK,IAAG,CAAE,EACpC,CACF,EACA,SAAU,CACR,KAAK,cAAa,CACpB,EACA,QAAS,CACP,MAAM,eAAgB,CACpB,KAAK,QAAU,GACf,KAAK,MAAQ,GAEb,GAAI,CAEF,MAAMiS,EAAY,KAAK,MAAM,aAC7B,GAAI,CAACA,EAAW,OAGhB,KAAOA,EAAU,YACfA,EAAU,YAAYA,EAAU,UAAU,EAG5C,QAAQ,IAAI,qDAAqD,EAGjE,MAAM,KAAK,aAAY,CAEzB,OAASlQ,EAAO,CACd,QAAQ,MAAM,gCAAiCA,CAAK,EACpD,KAAK,MAAQ,GACb,KAAK,QAAU,EACjB,CACF,EAEA,MAAM,cAAe,CACnB,OAAO,IAAI,QAAQ,CAACL,EAASC,IAAW,CACtC,KAAK,UAAU,IAAM,CACnB,MAAMsQ,EAAY,KAAK,MAAM,aAC7B,GAAI,CAACA,EAAW,CACdtQ,EAAO,IAAI,MAAM,qBAAqB,CAAC,EACvC,MACF,CAEA,GAAI,CAEF,MAAMwQ,EAAkB,SAAS,cAAc,KAAK,EACpDA,EAAgB,UAAY,+BAC5BA,EAAgB,MAAM,OAAS,OAC/BA,EAAgB,MAAM,MAAQ,OAE9B,MAAMC,EAAgB,SAAS,cAAc,KAAK,EAClDA,EAAc,UAAY,uCAC1BA,EAAc,MAAM,OAAS,OAC7BA,EAAc,MAAM,MAAQ,OAE5BD,EAAgB,YAAYC,CAAa,EAGzC,MAAMtQ,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,KAAO,kBACdA,EAAO,IAAM,gFACbA,EAAO,MAAQ,GAGf,MAAM8Q,EAAY,CAChB,UAAa,EACb,SAAY,EACZ,UAAa,OACb,WAAc,GACd,UAAa,qBACb,cAAiB,yBACjB,cAAiB,0BACjB,gBAAmB,yBACnB,gBAAmB,UACnB,gBAAmB,UACnB,QAAW,UACX,UAAa,UACb,cAAiB,UACjB,gBAAmB,UACnB,YAAe,UACf,cAAiB,UACjB,WAAc,QACd,cAAiB,GACjB,OAAU,KACV,UAAa,GACb,cAAiB,QACjB,UAAa,SACb,WAAc,8EACd,eAAkB,IAClB,WAAc,oBACd,QAAW,CAAC,CAAC,iBAAiB,CAAC,EAC/B,WAAc,CAAC,SAAU,SAAU,QAAQ,EAC3C,SAAY,KACZ,eAAkB,SAClB,SAAY,GACZ,MAAS,OACT,OAAU,OACV,YAAe,GACf,eAAkB,GAClB,iBAAoB,GACpB,eAAkB,EACpB,EAGMP,EAAa,KAAK,UAAUO,CAAS,EAC3C9Q,EAAO,UAAYuQ,EAEnB,QAAQ,IAAI,yBAA0BO,CAAS,EAC/C,QAAQ,IAAI,kBAAmBP,CAAU,EAGzC,MAAMC,EAAU,WAAW,IAAM,CAC/B,QAAQ,KAAK,2BAA2B,EACxC,KAAK,MAAQ,GACb,KAAK,QAAU,GACf3Q,EAAO,IAAI,MAAM,qBAAqB,CAAC,CACzC,EAAG,GAAI,EAGPG,EAAO,OAAS,IAAM,CACpB,aAAawQ,CAAO,EACpB,QAAQ,IAAI,oCAAoC,EAChD,KAAK,QAAU,GACf5Q,EAAO,CACT,EAEAI,EAAO,QAAWC,GAAU,CAC1B,aAAauQ,CAAO,EACpB,QAAQ,MAAM,8BAA+BvQ,CAAK,EAClD,KAAK,MAAQ,GACb,KAAK,QAAU,GACfJ,EAAO,IAAI,MAAM,oBAAoB,CAAC,CACxC,EAGAyQ,EAAc,YAAYtQ,CAAM,EAChCmQ,EAAU,YAAYE,CAAe,CAEvC,OAASpQ,EAAO,CACd,QAAQ,MAAM,gCAAiCA,CAAK,EACpD,KAAK,MAAQ,GACb,KAAK,QAAU,GACfJ,EAAOI,CAAK,CACd,CACF,CAAC,CACH,CAAC,CACH,CACF,CACF,MAtKO,MAAM,uBAAuB,IAAI,eAAgB,MAAO,4BACvC,MAAM,2BAIR,MAAM,wCAL1B,OAAAvB,EAAA,EAAAC,EASM,MATNR,GASM,CAROwS,EAAA,SAAXjS,IAAAC,EAGM,MAHNP,GAGM,IAAAW,EAAA,KAAAA,EAAA,IAFJH,EAAmC,OAA9B,MAAM,iBAAiB,WAC5BA,EAAiC,YAA3B,uBAAoB,kBAEjB+R,EAAA,OAAXjS,IAAAC,EAGM,MAHNN,GAGM,CAFJU,EAAA,KAAAA,EAAA,GAAAH,EAAkC,YAA5B,wBAAqB,KAC3BA,EAA+D,UAAtD,4BAAO6R,EAAA,eAAAA,EAAA,iBAAAI,CAAA,GAAe,MAAM,aAAY,OAAK,mFC8JvD3S,GAAU,CACb,KAAM,0BACN,MAAO,CACL,MAAO,CAEL,WAAY,CACV,MAAO,GACP,KAAM,GACN,KAAM,GACN,QAAS,GACT,MAAO,GACP,KAAM,GACN,YAAa,IAEf,WAAY,IAAI,IAClB,CACF,EACA,SAAU,CACR,gBAAiB,CAEf,MAAMuH,EAAS,OAAO,OAAO,KAAK,UAAU,EAE5C,OADgBA,EAAO,OAAO,CAAC9E,EAAKoQ,IAAQpQ,EAAMoQ,EAAK,CAAC,EAAItL,EAAO,MAErE,EAEA,aAAc,CAEZ,OAAQ,KAAK,eAAiB,IAAM,GACtC,EAEA,SAAU,CACR,MAAMuL,EAAQ,KAAK,aAAe,KAAK,GAAK,KAC5C,MAAO,KAAM,IAAM,KAAK,IAAIA,CAAK,CACnC,EAEA,SAAU,CACR,MAAMA,EAAQ,KAAK,aAAe,KAAK,GAAK,KAC5C,MAAO,KAAM,IAAM,KAAK,IAAIA,CAAK,CACnC,EAEA,kBAAmB,CACjB,OAAI,KAAK,gBAAkB,GAAW,eAClC,KAAK,gBAAkB,GAAW,OAClC,KAAK,gBAAkB,GAAW,UAClC,KAAK,gBAAkB,GAAW,QAC/B,eACT,EAEA,gBAAiB,CACf,OAAI,KAAK,gBAAkB,GAAW,eAClC,KAAK,gBAAkB,GAAW,OAClC,KAAK,gBAAkB,GAAW,UAClC,KAAK,gBAAkB,GAAW,QAC/B,eACT,EAEA,sBAAuB,CACrB,OAAI,KAAK,gBAAkB,GAAW,gEAClC,KAAK,gBAAkB,GAAW,8DAClC,KAAK,gBAAkB,GAAW,wDAClC,KAAK,gBAAkB,GAAW,4DAC/B,8DACT,GAEF,SAAU,CAER,QAAQ,IAAI,wDAAyD,KAAK,cAAc,CAC1F,EACA,QAAS,CAEP,kBAAmB,CAEjB,KAAK,WAAa,IAAI,KACtB,QAAQ,IAAI,gCAAiC,KAAK,cAAc,CAClE,CACF,CACF,EAjPO7S,GAAA,OAAM,4BAA4B,EAQhCC,GAAA,OAAM,mCAAmC,EAEvCC,GAAA,OAAM,WAAW,EAGbC,GAAA,OAAM,qBAAqB,EAExBC,GAAA,OAAM,gBAAgB,EAEzBC,GAAA,OAAM,uBAAuB,EAI/BC,GAAA,OAAM,eAAe,MACrB,MAAM,YAAY,QAAQ,cAAc,MAAM,8BAqC9CwS,GAAA,OAAM,cAAc,qBAiBjB,EAAE,MAAM,EAAE,MAAM,cAAY,SAAS,MAAM,eA8BhDC,GAAA,OAAM,oBAAoB,EAExBC,GAAA,OAAM,iBAAiB,EACrBC,GAAA,OAAM,gBAAgB,EAEpBC,GAAA,OAAM,eAAe,EAElBC,GAAA,OAAM,iBAAiB,EAG5BC,GAAA,OAAM,gBAAgB,EAEpBC,GAAA,OAAM,eAAe,EAElBC,GAAA,OAAM,iBAAiB,EAG5BC,GAAA,OAAM,gBAAgB,EAEpBC,GAAA,OAAM,eAAe,EAElBC,GAAA,OAAM,iBAAiB,EAG5BC,GAAA,OAAM,gBAAgB,EAEpBC,GAAA,OAAM,eAAe,EAElBC,GAAA,OAAM,iBAAiB,EAG5BC,GAAA,OAAM,gBAAgB,EAEpBC,GAAA,OAAM,eAAe,EAElBC,GAAA,OAAM,iBAAiB,EAG5BC,GAAA,OAAM,gBAAgB,EAEpBC,GAAA,OAAM,eAAe,EAElBC,GAAA,OAAM,iBAAiB,EAG5BC,GAAA,OAAM,gBAAgB,EAEpBC,GAAA,OAAM,eAAe,EAElBC,GAAA,OAAM,iBAAiB,2BA3JzC,OAAA9T,EAAA,EAAAC,EAiKM,MAjKNR,GAiKM,eAhKJS,EAKM,OALD,MAAM,iBAAe,CACxBA,EAAiC,UAA7B,0BAAwB,EAC5BA,EAEM,OAFD,MAAM,YAAY,GACrBA,EAAqE,QAA/D,MAAM,mBAAmB,EAAC,gCAA8B,UAIlEA,EAwJM,MAxJNR,GAwJM,CAtJJQ,EA6FM,MA7FNP,GA6FM,CA3FJO,EAMM,OAND,MAAK6T,EAAA,CAAC,oBAA4BhC,EAAA,cAAc,KACnD7R,EAGM,MAHNN,GAGM,aAFJM,EAAiC,OAA5B,MAAM,eAAe,YAC1BA,EAA0D,OAA1DL,GAA0DqS,EAA1BH,EAAA,gBAAgB,OAElD7R,EAAmE,MAAnEJ,GAAmEoS,EAA7BH,EAAA,oBAAoB,SAI5D7R,EAiFI,MAjFJH,GAiFI,EAhFJC,IAAAC,EAuDM,MAvDN+T,GAuDM,ytCAlBJ9T,EAcI,IAdJqS,GAcI,CAbFrS,EASE,QARC,GAAI,IACJ,GAAI,IACJ,GAAI6R,EAAA,QACJ,GAAIA,EAAA,QACL,OAAO,OACP,eAAa,IACb,iBAAe,QACf,MAAM,uCAGR7R,EAA8C,UAAtC,GAAG,MAAM,GAAG,MAAM,EAAE,IAAI,KAAK,8BACrCA,EAA8C,UAAtC,GAAG,MAAM,GAAG,MAAM,EAAE,IAAI,KAAK,oBAIvCA,EAAqG,OAArG+T,GAAqG/B,EAAnCH,EAAA,eAAe,QAAO,+4BA8B5F7R,EAqDM,MArDNsS,GAqDM,CApDJnS,EAAA,MAAAA,EAAA,IAAAH,EAAyB,UAArB,mBAAgB,KACpBA,EAkDM,MAlDNuS,GAkDM,CAjDJvS,EAMM,MANNwS,GAMM,CALJrS,EAAA,KAAAA,EAAA,GAAAH,EAAyD,QAAnD,MAAM,gBAAgB,EAAC,wBAAqB,KAClDA,EAGM,MAHNyS,GAGM,CAFJzS,EAA6E,OAAxE,MAAM,iBAAkB,MAAKgU,EAAA,OAAWjC,EAAA,WAAW,MAAK,eAC7D/R,EAA2D,OAA3D0S,GAA2DV,EAA1BD,EAAA,WAAW,KAAK,SAGrD/R,EAMM,MANN2S,GAMM,CALJxS,EAAA,KAAAA,EAAA,GAAAH,EAA6D,QAAvD,MAAM,gBAAgB,EAAC,4BAAyB,KACtDA,EAGM,MAHN4S,GAGM,CAFJ5S,EAA4E,OAAvE,MAAM,iBAAkB,MAAKgU,EAAA,OAAWjC,EAAA,WAAW,KAAI,eAC5D/R,EAA0D,OAA1D6S,GAA0Db,EAAzBD,EAAA,WAAW,IAAI,SAGpD/R,EAMM,MANN8S,GAMM,CALJ3S,EAAA,KAAAA,EAAA,GAAAH,EAA8D,QAAxD,MAAM,gBAAgB,EAAC,6BAA0B,KACvDA,EAGM,MAHN+S,GAGM,CAFJ/S,EAA4E,OAAvE,MAAM,iBAAkB,MAAKgU,EAAA,OAAWjC,EAAA,WAAW,KAAI,eAC5D/R,EAA0D,OAA1DgT,GAA0DhB,EAAzBD,EAAA,WAAW,IAAI,SAGpD/R,EAMM,MANNiT,GAMM,CALJ9S,EAAA,KAAAA,EAAA,GAAAH,EAAkD,QAA5C,MAAM,gBAAgB,EAAC,iBAAc,KAC3CA,EAGM,MAHNkT,GAGM,CAFJlT,EAA+E,OAA1E,MAAM,iBAAkB,MAAKgU,EAAA,OAAWjC,EAAA,WAAW,QAAO,eAC/D/R,EAA6D,OAA7DmT,GAA6DnB,EAA5BD,EAAA,WAAW,OAAO,SAGvD/R,EAMM,MANNoT,GAMM,CALJjT,EAAA,KAAAA,EAAA,GAAAH,EAAoD,QAA9C,MAAM,gBAAgB,EAAC,mBAAgB,KAC7CA,EAGM,MAHNqT,GAGM,CAFJrT,EAA6E,OAAxE,MAAM,iBAAkB,MAAKgU,EAAA,OAAWjC,EAAA,WAAW,MAAK,eAC7D/R,EAA2D,OAA3DsT,GAA2DtB,EAA1BD,EAAA,WAAW,KAAK,SAGrD/R,EAMM,MANNuT,GAMM,CALJpT,EAAA,MAAAA,EAAA,IAAAH,EAAqD,QAA/C,MAAM,gBAAgB,EAAC,oBAAiB,KAC9CA,EAGM,MAHNwT,GAGM,CAFJxT,EAA4E,OAAvE,MAAM,iBAAkB,MAAKgU,EAAA,OAAWjC,EAAA,WAAW,KAAI,eAC5D/R,EAA0D,OAA1DyT,GAA0DzB,EAAzBD,EAAA,WAAW,IAAI,SAGpD/R,EAMM,MANN0T,GAMM,CALJvT,EAAA,MAAAA,EAAA,IAAAH,EAAoD,QAA9C,MAAM,gBAAgB,EAAC,mBAAgB,KAC7CA,EAGM,MAHN2T,GAGM,CAFJ3T,EAAmF,OAA9E,MAAM,iBAAkB,MAAKgU,EAAA,OAAWjC,EAAA,WAAW,YAAW,eACnE/R,EAAiE,OAAjE4T,GAAiE5B,EAAhCD,EAAA,WAAW,WAAW,gFC/DhEzS,GAAU,CACb,KAAM,wBACR,EA9FOC,GAAA,OAAM,0BAA0B,EAE9BC,GAAA,OAAM,2BAA2B,EAI/BC,GAAA,OAAM,sBAAsB,EAoB9BC,GAAA,OAAM,iCAAiC,EAIrCC,GAAA,OAAM,uBAAuB,EAmC/BC,GAAA,OAAM,2BAA2B,EAI/BC,GAAA,OAAM,uBAAuB,EAC3BiU,GAAA,OAAM,uBAAuB,EAOjCzB,GAAA,OAAM,2BAA2B,EAI/B4B,GAAA,OAAM,2BAA2B,2BAjF1C,OAAAnU,EAAA,EAAAC,EAwFM,MAxFNR,GAwFM,CAtFJS,EAOM,MAPNR,GAOM,aANJQ,EAEM,OAFD,MAAM,0BAAwB,CACjCA,EAAkC,OAA7B,MAAM,gBAAgB,SAE7BA,EAEM,MAFNP,GAEM,MADJM,EAAgEmU,EAAA,KAAAC,EAAlB,EAAL3P,GAAzCxE,EAAgE,OAA3D,MAAM,uBAAuC,IAAKwE,oeAmB3DxE,EAWM,MAXNN,GAWM,aAVJM,EAEM,OAFD,MAAM,0BAAwB,CACjCA,EAAkC,OAA7B,MAAM,gBAAgB,SAE7BA,EAMM,MANNL,GAMM,MALJI,EAIMmU,EAAA,KAAAC,EAJuC,EAAL3P,GAAxCxE,EAIM,OAJD,MAAM,sBAAsC,IAAKwE,oBACpDxE,EAAuC,OAAlC,MAAM,qBAAqB,WAChCA,EAAwC,OAAnC,MAAM,sBAAsB,WACjCA,EAA0C,OAArC,MAAM,wBAAwB,20BA+BzCA,EASM,MATNJ,GASM,aARJI,EAEM,OAFD,MAAM,0BAAwB,CACjCA,EAAkC,OAA7B,MAAM,gBAAgB,SAE7BA,EAIM,MAJNH,GAIM,CAHJG,EAEM,MAFN8T,GAEM,MADJ/T,EAAkEmU,EAAA,KAAAC,EAAnB,GAAL3P,GAA1CxE,EAAkE,OAA7D,MAAM,wBAAyC,IAAKwE,gBAM/DxE,EAUM,MAVNqS,GAUM,aATJrS,EAEM,OAFD,MAAM,0BAAwB,CACjCA,EAAkC,OAA7B,MAAM,gBAAgB,SAE7BA,EAKM,MALNiU,GAKM,MAJJlU,EAGMmU,EAAA,KAAAC,EAH6C,EAAL3P,GAA9CxE,EAGM,OAHD,MAAM,4BAA4C,IAAKwE,oBAC1DxE,EAA8C,OAAzC,MAAM,4BAA4B,WACvCA,EAA8C,OAAzC,MAAM,4BAA4B,0FCmC5CV,GAAU,CACb,KAAM,kBACN,WAAY,CACV,sBAAA8U,GACA,UAAAC,GACA,wBAAAC,GACA,uBAAAC,IAEF,MAAO,CACL,MAAO,CACL,QAAS,GACT,MAAO,KACP,OAAQ,KAAK,IAAG,CAClB,CACF,EACA,SAAU,CAER,KAAK,YAAW,EAChB,KAAK,eAAc,CACrB,EACA,MAAO,CACL,QAAS,CAEP,KAAK,YAAW,CAClB,GAEF,QAAS,CACP,MAAM,gBAAiB,CACrB,GAAI,CAEF,MAAM,IAAI,QAAQvT,GAAW,WAAWA,EAAS,GAAG,CAAC,EACrD,KAAK,QAAU,EACjB,OAASsQ,EAAK,CACZ,KAAK,MAAQ,OAAOA,CAAG,EACvB,KAAK,QAAU,EACjB,CACF,EACA,MAAM,SAAU,CACd,KAAK,QAAU,GACf,KAAK,MAAQ,KACb,KAAK,OAAS,KAAK,IAAG,EACtB,MAAM,KAAK,eAAc,CAC3B,EAGA,aAAc,CAEZ,KAAK,UAAU,IAAM,CACnB,OAAO,SAAS,CACd,IAAK,EACL,KAAM,EACN,SAAU,SACX,EAGD,WAAW,IAAM,CACf,OAAO,SAAS,EAAG,CAAC,CACtB,EAAG,GAAG,CACR,CAAC,CACH,EAGA,kBAAmB,CACjB,KAAK,OAAS,KAAK,IAAG,EACtB,QAAQ,IAAI,iCAAkC,KAAK,MAAM,CAC3D,GAEF,SAAU,CACR,eAAgB,CACd,MAAO,CACL,QAAW,CACT,CAAC,QAAW,kBAAkB,MAAS,eAAe,EACtD,CAAC,QAAW,aAAa,MAAS,kBAAkB,EACpD,CAAC,QAAW,oBAAoB,MAAS,gBAAgB,EACzD,CAAC,QAAW,iBAAiB,MAAS,gBAAgB,EACtD,CAAC,QAAW,eAAe,MAAS,KAAK,EACzC,CAAC,QAAW,WAAW,MAAS,MAAM,GAExC,WAAc,QACd,OAAU,KACV,cAAiB,GACjB,cAAiB,GACjB,eAAkB,EACpB,CACF,EAEA,kBAAmB,CACjB,MAAO,CACL,YAAe,UACf,SAAY,SACZ,WAAc,QACd,cAAiB,GACjB,OAAU,KACV,OAAU,QACV,MAAS,OACT,OAAU,MACZ,CACF,EAEA,aAAc,CACZ,MAAO,CACL,UAAa,EACb,SAAY,EACZ,UAAa,eACb,WAAc,GACd,UAAa,qBACb,cAAiB,yBACjB,cAAiB,0BACjB,gBAAmB,yBACnB,gBAAmB,UACnB,gBAAmB,UACnB,QAAW,UACX,UAAa,UACb,cAAiB,UACjB,gBAAmB,UACnB,YAAe,UACf,cAAiB,UACjB,WAAc,QACd,cAAiB,GACjB,OAAU,KACV,UAAa,GACb,cAAiB,QACjB,UAAa,SACb,WAAc,8EACd,eAAkB,IAClB,WAAc,oBACd,QAAW,CAAC,CAAC,kBAAkB,EAAE,CAAC,eAAe,EAAE,CAAC,sBAAsB,EAAE,CAAC,mBAAmB,EAAE,CAAC,iBAAiB,EAAE,CAAC,aAAa,CAAC,EACrI,WAAc,CAAC,OAAO,EACtB,SAAY,KACZ,eAAkB,SAClB,SAAY,GACZ,MAAS,OACT,OAAU,OACV,YAAe,GACf,eAAkB,GAClB,OAAU,GACV,SAAY,IACZ,YAAe,UACf,YAAe,EACf,iBAAoB,GACpB,eAAkB,EACpB,CACF,EAEA,cAAe,CACb,MAAO,CACL,UAAa,EACb,SAAY,EACZ,UAAa,eACb,WAAc,GACd,UAAa,qBACb,cAAiB,yBACjB,cAAiB,0BACjB,gBAAmB,yBACnB,gBAAmB,UACnB,gBAAmB,UACnB,QAAW,UACX,UAAa,UACb,cAAiB,UACjB,gBAAmB,UACnB,YAAe,UACf,cAAiB,UACjB,WAAc,QACd,cAAiB,GACjB,OAAU,KACV,UAAa,GACb,cAAiB,QACjB,UAAa,SACb,WAAc,8EACd,eAAkB,IAClB,WAAc,oBACd,QAAW,CAAC,CAAC,kBAAkB,EAAE,CAAC,eAAe,EAAE,CAAC,sBAAsB,EAAE,CAAC,mBAAmB,EAAE,CAAC,iBAAiB,EAAE,CAAC,aAAa,CAAC,EACrI,WAAc,CAAC,OAAO,EACtB,SAAY,KACZ,eAAkB,SAClB,SAAY,GACZ,MAAS,OACT,OAAU,OACV,YAAe,GACf,eAAkB,GAClB,OAAU,GACV,SAAY,IACZ,YAAe,UACf,YAAe,EACf,iBAAoB,GACpB,eAAkB,EACpB,CACF,EAEA,eAAgB,CACd,MAAO,CACL,UAAa,GACb,WAAc,SACd,SAAY,SACZ,UAAa,mBACb,WAAc,SACd,OAAU,KACV,UAAa,GACb,WAAc,QACd,UAAa,GACb,iBAAoB,GACpB,cAAiB,GACjB,iBAAoB,GACpB,MAAS,OACT,OAAU,MACZ,CACF,CACF,CACF,EAvUO/R,GAAA,OAAM,kBAAkB,YAKP,MAAM,mCAKH,MAAM,SACxBG,GAAA,OAAM,aAAa,aAOjBE,GAAA,OAAM,yBAAyB,EAc/BC,GAAA,OAAM,kBAAkB,EAiBxBiU,GAAA,OAAM,gCAAgC,EACpCzB,GAAA,OAAM,eAAe,EAUvB4B,GAAA,OAAM,kBAAkB,EAKtBF,GAAA,OAAM,cAAc,EAClBzB,GAAA,OAAM,iBAAiB,EAavBC,GAAA,OAAM,gCAAgC,EAgB1CC,GAAA,OAAM,kBAAkB,4IA/FjC,OAAA1S,EAAA,EAAAC,EA8GM,MA9GNR,GA8GM,CA7GJY,EAAA,KAAAA,EAAA,GAAAH,EAAwB,UAApB,kBAAe,KACnBG,EAAA,MAAAA,EAAA,IAAAH,EAA2E,KAAxE,MAAM,iBAAiB,EAAC,+CAA4C,KAG5D+R,EAAA,SAAXjS,IAAAC,EAEM,MAFNP,GAEM,CADJS,EAA0BuU,CAAA,KAIZzC,EAAA,OAAhBjS,IAAAC,EAGM,MAHNN,GAGM,CAFJO,EAAsC,IAAtCN,GAAsCsS,EAAZD,EAAA,KAAK,KAC/B/R,EAAiE,UAAxD,4BAAO6R,EAAA,SAAAA,EAAA,WAAAI,CAAA,GAAS,MAAM,qBAAoB,OAAK,UAI1DlS,EA6FM,MAAAJ,GAAA,CA3FJK,EAWM,MAXNJ,GAWM,aAVJI,EAEM,OAFD,MAAM,iBAAe,CACxBA,EAAqB,UAAjB,cAAY,QAElBC,EAMEwU,EAAA,CALA,cAAY,eACX,OAAQ5C,EAAA,cACT,aAAW,wEACX,OAAO,QACN,SAAU,wBAKf7R,EAWM,MAXNH,GAWM,aAVJG,EAEM,OAFD,MAAM,iBAAe,CACxBA,EAAoB,UAAhB,aAAW,QAEjBC,EAMEwU,EAAA,CALA,cAAY,cACX,OAAQ5C,EAAA,iBACT,aAAW,yEACX,OAAO,QACN,SAAU,wBAKf5R,EAA2ByU,CAAA,EAG3B1U,EAQM,MARN8T,GAQM,CAPJ9T,EAKM,MALNqS,GAKM,CAJJlS,EAAA,KAAAA,EAAA,GAAAH,EAAqC,UAAjC,+BAA4B,KAChCA,EAES,UAFA,4BAAO6R,EAAA,kBAAAA,EAAA,oBAAAI,CAAA,GAAkB,MAAM,4BAA2B,kBAEnE,SAEFtR,GAAoCgU,EAAA,CAAxB,WAAY5C,EAAA,MAAM,QAIhC/R,EAgCM,MAhCNiU,GAgCM,aA/BJjU,EAEM,OAFD,MAAM,iBAAe,CACxBA,EAAuB,UAAnB,gBAAc,QAGpBA,EA0BM,MA1BN+T,GA0BM,CAzBJ/T,EAWM,MAXNsS,GAWM,aAVJtS,EAEM,OAFD,MAAM,kBAAgB,CACzBA,EAAmC,UAA/B,4BAA0B,QAEhCC,EAMEwU,EAAA,CALA,cAAY,uBACX,OAAQ5C,EAAA,YACT,aAAW,gFACX,OAAO,QACN,SAAU,wBAIf7R,EAWM,MAXNuS,GAWM,aAVJvS,EAEM,OAFD,MAAM,kBAAgB,CACzBA,EAAoC,UAAhC,6BAA2B,QAEjCC,EAMEwU,EAAA,CALA,cAAY,wBACX,OAAQ5C,EAAA,aACT,aAAW,gFACX,OAAO,QACN,SAAU,4BAOnB7R,EAWM,MAXNwS,GAWM,aAVJxS,EAEM,OAFD,MAAM,iBAAe,CACxBA,EAAsB,UAAlB,eAAa,QAEnBC,EAMEwU,EAAA,CALA,cAAY,gBACX,OAAQ5C,EAAA,cACT,aAAW,8EACX,OAAO,QACN,SAAU,4FCpGrB,MAAM+C,EAAoB,CACxB,aAAc,CACZ,KAAK,MAAQ,KACb,KAAK,WAAa,KAClB,KAAK,aAAe,EAAI,GAAK,GAC/B,CAKA,cAAe,CAGb,MAAO,0CACT,CAKA,MAAM,YAAa,CACjB,GAAI,CAEF,GAAI,KAAK,OAAS,KAAK,YAClB,KAAK,MAAQ,KAAK,WAAc,KAAK,aACxC,OAAO,KAAK,MAGd,MAAMrI,EAAM,KAAK,eACXrI,EAAW,MAAM,MAAM,GAAGqI,CAAG,MAAM,KAAK,KAAK,EAAE,EAErD,GAAI,CAACrI,EAAS,GACZ,MAAM,IAAI,MAAM,QAAQA,EAAS,MAAM,EAAE,EAG3C,MAAMW,EAAS,MAAMX,EAAS,OAG9B,GAAI,CAACW,EAAO,QAAU,CAAC,MAAM,QAAQA,EAAO,MAAM,EAChD,MAAM,IAAI,MAAM,6CAA6C,EAI/D,YAAK,MAAQA,EACb,KAAK,WAAa,KAAK,MAEvB,QAAQ,IAAI,YAAYA,EAAO,OAAO,MAAM,iCAAiC,EACtEA,CAET,OAASxD,EAAO,CAId,OAHA,QAAQ,MAAM,kCAAmCA,CAAK,EAGlD,KAAK,OACP,QAAQ,KAAK,4CAA4C,EAClD,KAAK,OAIP,KAAK,mBACd,CACF,CAKA,MAAM,mBAAoB,CAExB,OADe,MAAM,KAAK,cACZ,OACX,OAAOwT,GAASA,EAAM,OAAO,EAC7B,IAAIA,GAASA,EAAM,MAAM,CAC9B,CAKA,MAAM,qBAAqBnE,EAAW,EAAG,CAEvC,OADe,MAAM,KAAK,cACZ,OACX,OAAOmE,GAASA,EAAM,SAAWA,EAAM,WAAanE,CAAQ,EAC5D,IAAImE,GAASA,EAAM,MAAM,CAC9B,CAKA,MAAM,iBAAiB1P,EAAQ,CAE7B,MAAM0P,GADS,MAAM,KAAK,cACL,OAAO,KAAK,GAAK,EAAE,SAAW1P,CAAM,EACzD,OAAO0P,EAAQA,EAAM,SAAW,QAClC,CAKA,MAAM,eAAe1P,EAAQ,CAE3B,MAAM0P,GADS,MAAM,KAAK,cACL,OAAO,KAAK,GAAK,EAAE,SAAW1P,CAAM,EACzD,OAAO0P,EAAQA,EAAM,OAAS,SAChC,CAKA,MAAM,iBAAiB1P,EAAQ,CAE7B,MAAM0P,GADS,MAAM,KAAK,cACL,OAAO,KAAK,GAAK,EAAE,SAAW1P,CAAM,EACzD,OAAO0P,EAAQA,EAAM,SAAW,SAClC,CAKA,MAAM,aAAa1P,EAAQ,CAEzB,OADe,MAAM,KAAK,cACZ,OAAO,QAAU2P,EAAE,SAAW3P,CAAM,GAAK,IACzD,CAKA,MAAM,cAAe,OAEnB,QAAOM,GADQ,MAAM,KAAK,cACZ,WAAP,YAAAA,EAAiB,YAAa,CAAC,OAAQ,SAAU,MAAM,CAChE,CAKA,MAAM,YAAa,OAEjB,QAAOA,GADQ,MAAM,KAAK,cACZ,WAAP,YAAAA,EAAiB,UAAW,EACrC,CAKA,MAAM,qBAAsB,CAC1B,MAAMZ,EAAS,MAAM,KAAK,aACpBkQ,EAAS,GAEf,OAAAlQ,EAAO,OACJ,OAAOgQ,GAASA,EAAM,OAAO,EAC7B,QAAQA,GAAS,CACXE,EAAOF,EAAM,QAAQ,IACxBE,EAAOF,EAAM,QAAQ,EAAI,IAE3BE,EAAOF,EAAM,QAAQ,EAAE,KAAKA,EAAM,MAAM,CAC1C,CAAC,EAEIE,CACT,CAKA,MAAM,mBAAoB,CACxB,MAAMlQ,EAAS,MAAM,KAAK,aACpBkQ,EAAS,GAEf,OAAAlQ,EAAO,OACJ,OAAOgQ,GAASA,EAAM,OAAO,EAC7B,QAAQA,GAAS,CACXE,EAAOF,EAAM,MAAM,IACtBE,EAAOF,EAAM,MAAM,EAAI,IAEzBE,EAAOF,EAAM,MAAM,EAAE,KAAKA,EAAM,MAAM,CACxC,CAAC,EAEIE,CACT,CAKA,MAAM,UAAW,CACf,MAAMlQ,EAAS,MAAM,KAAK,aACpBmQ,EAAgBnQ,EAAO,OAAO,OAAOiQ,GAAKA,EAAE,OAAO,EAEzD,MAAO,CACL,MAAOjQ,EAAO,OAAO,OACrB,QAASmQ,EAAc,OACvB,SAAUnQ,EAAO,OAAO,OAASmQ,EAAc,OAC/C,UAAW,CAAC,GAAG,IAAI,IAAIA,EAAc,IAAIF,GAAKA,EAAE,QAAQ,CAAC,CAAC,EAC1D,QAAS,CAAC,GAAG,IAAI,IAAIE,EAAc,IAAIF,GAAKA,EAAE,MAAM,CAAC,CAAC,EACtD,QAASjQ,EAAO,QAChB,YAAaA,EAAO,aAExB,CAKA,YAAa,CACX,KAAK,MAAQ,KACb,KAAK,WAAa,KAClB,QAAQ,IAAI,uCAAuC,CACrD,CAKA,MAAM,SAAU,CACd,YAAK,aACE,MAAM,KAAK,YACpB,CAKA,mBAAoB,CAClB,eAAQ,KAAK,oCAAoC,EAC1C,CACL,QAAS,iBACT,OAAQ,CACN,CAAE,OAAQ,OAAQ,SAAU,SAAU,OAAQ,aAAc,SAAU,0BAA2B,QAAS,GAAM,SAAU,GAC1H,CAAE,OAAQ,OAAQ,SAAU,SAAU,OAAQ,oBAAqB,SAAU,qBAAsB,QAAS,GAAM,SAAU,GAC5H,CAAE,OAAQ,KAAM,SAAU,OAAQ,OAAQ,cAAe,SAAU,sBAAuB,QAAS,GAAM,SAAU,GACnH,CAAE,OAAQ,MAAO,SAAU,OAAQ,OAAQ,aAAc,SAAU,yBAA0B,QAAS,GAAM,SAAU,GACtH,CAAE,OAAQ,OAAQ,SAAU,SAAU,OAAQ,aAAc,SAAU,iBAAkB,QAAS,GAAM,SAAU,GACjH,CAAE,OAAQ,OAAQ,SAAU,SAAU,OAAQ,oBAAqB,SAAU,qBAAsB,QAAS,GAAM,SAAU,GAC5H,CAAE,OAAQ,KAAM,SAAU,SAAU,OAAQ,aAAc,SAAU,yBAA0B,QAAS,GAAM,SAAU,EAAE,EAE3H,SAAU,CACR,aAAc,EACd,eAAgB,EAChB,UAAW,CAAC,OAAQ,QAAQ,EAC5B,QAAS,CAAC,aAAc,oBAAqB,aAAa,EAC5D,CAEJ,CAKA,MAAM,cAAcM,EAAQ,CAE1B,OADe,MAAM,KAAK,cACZ,OAAO,KAAK0P,GAASA,EAAM,SAAW1P,GAAU0P,EAAM,OAAO,CAC7E,CAKA,MAAM,gBAAiB,CACrB,OAAO,MAAM,KAAK,mBACpB,CAKA,iBAAkB,CAChB,OAAO,KAAK,MAAQ,cAAgB,UACtC,CAKA,cAAe,CACb,MAAO,CACL,OAAQ,CAAC,CAAC,KAAK,MACf,WAAY,KAAK,WACjB,SAAU,KAAK,WAAa,KAAK,MAAQ,KAAK,WAAa,EAC3D,aAAc,KAAK,aAEvB,CACF,CAGO,MAAMI,GAAe,IAAIL,GC3QhC,MAAMM,EAAY,CAChB,aAAc,CACZ,KAAK,MAAQ,IAAI,IACjB,KAAK,gBAAkB,IAAI,IAC3B,KAAK,aAAe,GACpB,KAAK,aAAe,EAAI,GAAK,GAC/B,CAKA,YAAYC,EAAYhQ,EAAQiQ,EAAU,CACxC,MAAO,GAAGD,CAAU,IAAIhQ,CAAM,IAAIiQ,CAAQ,EAC5C,CAKA,IAAID,EAAYhQ,EAAQiQ,EAAU,CAChC,MAAM3S,EAAM,KAAK,YAAY0S,EAAYhQ,EAAQiQ,CAAQ,EACnD/P,EAAS,KAAK,MAAM,IAAI5C,CAAG,EAEjC,OAAK4C,EAGD,KAAK,IAAG,EAAKA,EAAO,UAAY,KAAK,cACvC,KAAK,MAAM,OAAO5C,CAAG,EACd,IAGF,GARa,EAStB,CAKA,IAAI0S,EAAYhQ,EAAQiQ,EAAU,CAChC,MAAM3S,EAAM,KAAK,YAAY0S,EAAYhQ,EAAQiQ,CAAQ,EACnD/P,EAAS,KAAK,MAAM,IAAI5C,CAAG,EAEjC,OAAI4C,GAAU,KAAK,IAAG,EAAKA,EAAO,WAAa,KAAK,aAC3CA,EAAO,KAGT,IACT,CAKA,IAAI8P,EAAYhQ,EAAQiQ,EAAU1S,EAAM,CACtC,MAAMD,EAAM,KAAK,YAAY0S,EAAYhQ,EAAQiQ,CAAQ,EAGzD,GAAI,KAAK,MAAM,MAAQ,KAAK,aAAc,CACxC,MAAMC,EAAW,KAAK,MAAM,KAAI,EAAG,KAAI,EAAG,MAC1C,KAAK,MAAM,OAAOA,CAAQ,CAC5B,CAEA,KAAK,MAAM,IAAI5S,EAAK,CAClB,KAAAC,EACA,UAAW,KAAK,IAAG,CACzB,CAAK,CACH,CAKA,UAAUyS,EAAYhQ,EAAQiQ,EAAU,CACtC,MAAM3S,EAAM,KAAK,YAAY0S,EAAYhQ,EAAQiQ,CAAQ,EACzD,OAAO,KAAK,gBAAgB,IAAI3S,CAAG,CACrC,CAKA,WAAW0S,EAAYhQ,EAAQiQ,EAAUrU,EAAS,CAChD,MAAM0B,EAAM,KAAK,YAAY0S,EAAYhQ,EAAQiQ,CAAQ,EACzD,YAAK,gBAAgB,IAAI3S,EAAK1B,CAAO,EAGrCA,EAAQ,QAAQ,IAAM,CACpB,KAAK,gBAAgB,OAAO0B,CAAG,CACjC,CAAC,EAEM1B,CACT,CAKA,kBAAkBoU,EAAYhQ,EAAQiQ,EAAU,CAC9C,MAAM3S,EAAM,KAAK,YAAY0S,EAAYhQ,EAAQiQ,CAAQ,EACzD,OAAO,KAAK,gBAAgB,IAAI3S,CAAG,CACrC,CAKA,OAAQ,CACN,KAAK,MAAM,MAAK,EAChB,KAAK,gBAAgB,MAAK,CAC5B,CAKA,cAAe,CACb,MAAMsC,EAAM,KAAK,IAAG,EACpB,SAAW,CAACtC,EAAK4C,CAAM,IAAK,KAAK,MAAM,UACjCN,EAAMM,EAAO,UAAY,KAAK,cAChC,KAAK,MAAM,OAAO5C,CAAG,CAG3B,CAKA,UAAW,CACT,MAAO,CACL,UAAW,KAAK,MAAM,KACtB,aAAc,KAAK,gBAAgB,KACnC,aAAc,KAAK,YACzB,CACE,CACF,CAGO,MAAM6S,GAAc,IAAIJ,GAG/B,YAAY,IAAM,CAChBI,GAAY,aAAY,CAC1B,EAAG,GAAK,ECvHR,MAAKhW,GAAU,CACb,KAAM,wBACN,MAAO,CACL,WAAY,CACV,KAAM,OACN,SAAU,GACV,UAAYyG,GAAU,CAAC,WAAY,WAAW,EAAE,SAASA,CAAK,GAEhE,OAAQ,CACN,KAAM,OACN,SAAU,IAEZ,SAAU,CACR,KAAM,OACN,QAAS,UAEX,SAAU,CACR,KAAM,OACN,QAAS,CACX,GAEF,MAAO,CACL,MAAO,CACL,OAAQ,GACR,MAAO,GACP,cAAe,EACf,UAAW,GACX,SAAU,IACZ,CACF,EACA,SAAU,CACR,aAAc,CACZ,MAAO,eAAe,KAAK,UAAU,IAAI,KAAK,MAAM,IAAI,KAAK,IAAG,CAAE,EACpE,EAEA,UAAW,CACT,MAAO,GAAG,KAAK,UAAU,IAAI,KAAK,MAAM,IAAI,KAAK,QAAQ,EAC3D,GAEF,MAAM,SAAU,CACd,KAAK,0BAAyB,CAChC,EACA,eAAgB,CACV,KAAK,UACP,KAAK,SAAS,WAAU,CAE5B,EACA,QAAS,CACP,2BAA4B,CAE1B,MAAMmL,EAAc,CAClB,EAAG,QACH,EAAG,QACH,EAAG,MACL,EAEA,KAAK,SAAW,IAAI,qBACjBC,GAAY,CACXA,EAAQ,QAASC,GAAU,CACrBA,EAAM,gBAAkB,CAAC,KAAK,QAAU,CAAC,KAAK,QAChD,KAAK,UAAY,GACjB,KAAK,WAAU,EACf,KAAK,SAAS,WAAU,EAE5B,CAAC,CACH,EACA,CACE,WAAYF,EAAY,KAAK,QAAQ,GAAK,QAC1C,UAAW,EACb,CACF,EAEA,KAAK,SAAS,QAAQ,KAAK,MAAM,SAAS,CAC5C,EAEA,MAAM,YAAa,CACjB,KAAK,cAAgB,YAAY,IAAG,EACpC,KAAK,OAAS,GACd,KAAK,MAAQ,GAEb,GAAI,CAQF,MAAMG,EANS,CACb,EAAG,EACH,EAAG,IACH,EAAG,GACL,EAEqB,KAAK,QAAQ,GAAK,EAMvC,GALIA,EAAQ,GACV,MAAM,IAAI,QAAQrQ,GAAW,WAAWA,EAASqQ,CAAK,CAAC,EAIrDiE,GAAY,IAAI,KAAK,WAAY,KAAK,OAAQ,KAAK,QAAQ,EAAG,CAChE,MAAMjQ,EAASiQ,GAAY,IAAI,KAAK,WAAY,KAAK,OAAQ,KAAK,QAAQ,EAC1E,GAAIjQ,EAAQ,CACV,KAAK,mBAAmBA,CAAM,EAC9B,MACF,CACF,CAGA,GAAIiQ,GAAY,UAAU,KAAK,WAAY,KAAK,OAAQ,KAAK,QAAQ,EAAG,CAEtE,MADuBA,GAAY,kBAAkB,KAAK,WAAY,KAAK,OAAQ,KAAK,QAAQ,EAEhG,MACF,CAGA,MAAM7E,EAAW,QAAQ,KAAK,UAAU,IAAI,KAAK,MAAM,IAAI,KAAK,WAAW,GACrE8E,EAActE,GAAkB,WACpC,IAAM,KAAK,aAAY,EACvBR,EACA,KAAK,QACP,EACA6E,GAAY,WAAW,KAAK,WAAY,KAAK,OAAQ,KAAK,SAAUC,CAAW,EAE/E,MAAMA,CAER,OAASjE,EAAK,CACZ,QAAQ,MAAM,yBAA0BA,CAAG,EAC3C,KAAK,MAAQ,EACf,CACF,EAEA,MAAM,cAAe,CACnB,OAAO,IAAI,QAAQ,CAACtQ,EAASC,IAAW,CACtC,KAAK,UAAU,SAAY,CACzB,MAAMsQ,EAAY,KAAK,MAAM,UAC7B,GAAI,CAACA,EAAW,CACdtQ,EAAO,IAAI,MAAM,qBAAqB,CAAC,EACvC,MACF,CAEA,MAAM4D,EAAS,KAAK,gBAAe,EAC7B/D,EAAY,KAAK,aAAY,EAGnC,GAAI,CAACQ,GAAgB,YAAYR,CAAS,EACxC,GAAI,CACF,MAAMQ,GAAgB,cAAcR,CAAS,CAC/C,OAASO,EAAO,CACd,QAAQ,KAAK,sDAAuDA,CAAK,CAC3E,CAGF,MAAMD,EAAS,SAAS,cAAc,QAAQ,EAE9CA,EAAO,KAAO,kBACdA,EAAO,IAAMN,EACbM,EAAO,MAAQ,GACfA,EAAO,UAAY,KAAK,UAAUyD,CAAM,EASxC,MAAM+M,EAAU,WAAW,IAAM,CAC/B,KAAK,MAAQ,GACb3Q,EAAO,IAAI,MAAM,qBAAqB,CAAC,CACzC,EATiB,CACf,EAAG,IACH,EAAG,IACH,EAAG,GACL,EAKY,KAAK,QAAQ,GAAK,GAAI,EAElCG,EAAO,OAAS,IAAM,CACpB,aAAawQ,CAAO,EACpB,KAAK,OAAS,GAEd,MAAMf,EAAW,YAAY,IAAG,EAAK,KAAK,cAC1C,QAAQ,IAAI,UAAU,KAAK,QAAQ,cAAcA,EAAS,QAAQ,CAAC,CAAC,iBAAiB,KAAK,QAAQ,GAAG,EAGrGyE,GAAY,IAAI,KAAK,WAAY,KAAK,OAAQ,KAAK,SAAU,CAC3D,OAAAzQ,EACA,UAAA/D,EACD,EAEDE,EAAO,CACT,EAEAI,EAAO,QAAU,IAAM,CACrB,aAAawQ,CAAO,EACpB,KAAK,MAAQ,GACb3Q,EAAO,IAAI,MAAM,oBAAoB,CAAC,CACxC,EAEAsQ,EAAU,YAAYnQ,CAAM,CAC9B,CAAC,CACH,CAAC,CACH,EAEA,iBAAkB,CAChB,GAAI,KAAK,aAAe,WACtB,MAAO,CACL,UAAa,EACb,SAAY,EACZ,UAAa,eACb,WAAc,GACd,UAAa,qBACb,cAAiB,yBACjB,cAAiB,0BACjB,gBAAmB,yBACnB,gBAAmB,UACnB,gBAAmB,UACnB,QAAW,UACX,UAAa,UACb,cAAiB,UACjB,gBAAmB,UACnB,YAAe,UACf,cAAiB,UACjB,WAAc,QACd,cAAiB,GACjB,OAAU,KACV,UAAa,GACb,cAAiB,QACjB,UAAa,SACb,WAAc,8EACd,eAAkB,IAClB,WAAc,oBACd,QAAW,CAAC,CAAC,KAAK,OAAQ,GAAG,KAAK,QAAQ,IAAI,KAAK,MAAM,KAAK,CAAC,EAC/D,WAAc,CAAC,OAAQ,QAAS,QAAS,SAAU,SAAU,QAAQ,EACrE,SAAY,KACZ,eAAkB,SAClB,SAAY,GACZ,MAAS,OACT,OAAU,OACV,YAAe,GACf,eAAkB,GAClB,OAAU,GACV,SAAY,EACZ,YAAe,UACf,YAAe,EACf,iBAAoB,GACpB,eAAkB,EACpB,EACK,GAAI,KAAK,aAAe,YAC7B,MAAO,CACL,SAAY,KACZ,MAAS,OACT,OAAU,OACV,cAAiB,GACjB,OAAU,GAAG,KAAK,QAAQ,IAAI,KAAK,MAAM,GACzC,iBAAoB,GACpB,OAAU,KACV,WAAc,OAChB,CAEJ,EAEA,cAAe,CACb,GAAI,KAAK,aAAe,WACtB,MAAO,gFACF,GAAI,KAAK,aAAe,YAC7B,MAAO,kFAEX,EAEA,mBAAmBiE,EAAQ,CACzB,KAAK,UAAU,IAAM,CACnB,MAAMkM,EAAY,KAAK,MAAM,UAC7B,GAAI,CAACA,EAAW,OAEhB,MAAMnQ,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,KAAO,kBACdA,EAAO,IAAMiE,EAAO,UACpBjE,EAAO,MAAQ,GACfA,EAAO,UAAY,KAAK,UAAUiE,EAAO,MAAM,EAE/CjE,EAAO,OAAS,IAAM,CACpB,KAAK,OAAS,GACd,MAAMyP,EAAW,YAAY,IAAG,EAAK,KAAK,cAC1C,QAAQ,IAAI,iBAAiB,KAAK,QAAQ,cAAcA,EAAS,QAAQ,CAAC,CAAC,IAAI,CACjF,EAEAU,EAAU,YAAYnQ,CAAM,CAC9B,CAAC,CACH,EAEA,MAAM,OAAQ,CACZ,KAAK,0BAAyB,CAChC,CACF,CACF,sBA9SkC,MAAM,0BAKlB,MAAM,kDAN1BrB,EAUM,OAVD,MAAK8T,EAAA,CAAC,cAAa,mBAA8B/B,EAAA,aAAU,cAAoB,GAAID,EAAA,YAAa,IAAI,cAC3F,CAAAE,EAAA,SAAWA,EAAA,OAAvBjS,IAAAC,EAGM,MAHNP,GAGM,aAFJQ,EAAmC,OAA9B,MAAM,iBAAiB,YAC5BA,EAAwC,YAAlC,WAAQgS,EAAGF,EAAA,UAAU,EAAG,MAAG,eAGxBC,EAAA,OAAXjS,IAAAC,EAGM,MAHNN,GAGM,CAFJU,EAAA,KAAAA,EAAA,GAAAH,EAA8B,YAAxB,oBAAiB,KACvBA,EAAuD,UAA9C,4BAAO6R,EAAA,OAAAA,EAAA,SAAAI,CAAA,GAAO,MAAM,aAAY,OAAK,qFCa/C3S,GAAU,CACb,KAAM,0BACN,MAAO,CACL,OAAQ,CACN,KAAM,OACN,SAAU,IAEZ,SAAU,CACR,KAAM,OACN,QAAS,UAEX,SAAU,CACR,KAAM,OACN,QAAS,CACX,GAEF,MAAO,CACL,MAAO,CACL,OAAQ,GACR,MAAO,GACP,cAAe,EACf,UAAW,GACX,SAAU,KACV,WAAY,CACd,CACF,EACA,SAAU,CACR,aAAc,CACZ,MAAO,sBAAsB,KAAK,MAAM,IAAI,KAAK,IAAG,CAAE,EACxD,GAEF,MAAM,SAAU,CACd,KAAK,0BAAyB,CAChC,EACA,eAAgB,CACV,KAAK,UACP,KAAK,SAAS,WAAU,CAE5B,EACA,QAAS,CACP,2BAA4B,CAE1B,MAAM4R,EAAc,CAClB,EAAG,QACH,EAAG,QACH,EAAG,MACL,EAEA,KAAK,SAAW,IAAI,qBACjBC,GAAY,CACXA,EAAQ,QAASC,GAAU,CACrBA,EAAM,gBAAkB,CAAC,KAAK,QAAU,CAAC,KAAK,QAChD,KAAK,UAAY,GACjB,KAAK,WAAU,EACf,KAAK,SAAS,WAAU,EAE5B,CAAC,CACH,EACA,CACE,WAAYF,EAAY,KAAK,QAAQ,GAAK,QAC1C,UAAW,EACb,CACF,EAEA,KAAK,SAAS,QAAQ,KAAK,MAAM,SAAS,CAC5C,EAEA,MAAM,YAAa,CACjB,KAAK,cAAgB,YAAY,IAAG,EACpC,KAAK,OAAS,GACd,KAAK,MAAQ,GAEb,GAAI,CAQF,MAAMG,EANS,CACb,EAAG,EACH,EAAG,IACH,EAAG,GACL,EAEqB,KAAK,QAAQ,GAAK,EACnCA,EAAQ,GACV,MAAM,IAAI,QAAQrQ,GAAW,WAAWA,EAASqQ,CAAK,CAAC,EAIzD,MAAMZ,EAAW,sBAAsB,KAAK,MAAM,IAAI,KAAK,WAAW,GACtE,MAAMQ,GAAkB,WACtB,IAAM,KAAK,aAAY,EACvBR,EACA,KAAK,QACP,CAEF,OAASa,EAAK,CACZ,QAAQ,MAAM,4CAA6CA,CAAG,EAC9D,KAAK,MAAQ,EACf,CACF,EAEA,MAAM,cAAe,CACnB,OAAO,IAAI,QAAQ,CAACtQ,EAASC,IAAW,CACtC,KAAK,UAAU,SAAY,CACzB,MAAMsQ,EAAY,KAAK,MAAM,UAC7B,GAAI,CAACA,EAAW,CACdtQ,EAAO,IAAI,MAAM,qBAAqB,CAAC,EACvC,MACF,CAEA,MAAM4D,EAAS,KAAK,gBAAe,EAC7B/D,EAAY,mFAEZM,EAAS,SAAS,cAAc,QAAQ,EAE9CA,EAAO,KAAO,kBACdA,EAAO,IAAMN,EACbM,EAAO,MAAQ,GACfA,EAAO,UAAY,KAAK,UAAUyD,CAAM,EAGxC,MAAM2Q,EAAe,CACnB,EAAG,IACH,EAAG,KACH,EAAG,IACL,EAEMC,EAAa,KAAK,YAAc,EAChCC,EAAkBF,EAAa,KAAK,QAAQ,EAAKC,EAAa,IAE9D7D,EAAU,WAAW,IAAM,CAC/B,KAAK,MAAQ,GACb3Q,EAAO,IAAI,MAAM,6BAA6ByU,CAAe,cAAcD,CAAU,GAAG,CAAC,CAC3F,EAAGC,CAAe,EAElBtU,EAAO,OAAS,IAAM,CACpB,aAAawQ,CAAO,EACpB,KAAK,OAAS,GAEd,MAAMf,EAAW,YAAY,IAAG,EAAK,KAAK,cAC1C,QAAQ,IAAI,6BAA6B,KAAK,MAAM,cAAcA,EAAS,QAAQ,CAAC,CAAC,cAAc4E,CAAU,GAAG,EAEhHzU,EAAO,CACT,EAEAI,EAAO,QAAU,IAAM,CACrB,aAAawQ,CAAO,EACpB,KAAK,MAAQ,GACb3Q,EAAO,IAAI,MAAM,oBAAoB,CAAC,CACxC,EAGA,MAAMwQ,EAAkBF,EAAU,cAAc,uCAAuC,EACnFE,EACFA,EAAgB,YAAYrQ,CAAM,EAElCmQ,EAAU,YAAYnQ,CAAM,CAEhC,CAAC,CACH,CAAC,CACH,EAEA,iBAAkB,CAChB,MAAO,CACL,WAAc,QACd,YAAe,SACf,cAAiB,GACjB,OAAU,KACV,SAAY,KACZ,gBAAmB,GACnB,MAAS,OACT,OAAU,OACV,OAAU,GAAG,KAAK,QAAQ,IAAI,KAAK,MAAM,GACzC,iBAAoB,EACtB,CACF,EAEA,MAAM,OAAQ,CAEZ,KAAK,YAAc,KAAK,YAAc,GAAK,EAC3C,MAAMuU,EAAa,EAEnB,GAAI,KAAK,WAAaA,EAAY,CAChC,QAAQ,MAAM,6BAA6B,KAAK,MAAM,0BAA0BA,CAAU,GAAG,EAC7F,MACF,CAGA,MAAMC,EAAe,KAAK,IAAI,IAAO,KAAK,IAAI,EAAG,KAAK,WAAa,CAAC,EAAG,GAAI,EAC3E,QAAQ,IAAI,6BAA6B,KAAK,MAAM,gBAAgBA,CAAY,eAAe,KAAK,UAAU,IAAID,CAAU,GAAG,EAE/H,MAAM,IAAI,QAAQ3U,GAAW,WAAWA,EAAS4U,CAAY,CAAC,EAE9D,KAAK,0BAAyB,CAChC,CACF,CACF,sBAtNkC,MAAM,0BAKlB,MAAM,cAMHlW,GAAA,OAAM,8BAA8B,sCAZ3DK,EAeM,OAfD,MAAM,8BAA+B,GAAI8R,EAAA,YAAa,IAAI,cACjD,CAAAE,EAAA,SAAWA,EAAA,OAAvBjS,IAAAC,EAGM,MAHNP,GAGM,IAAAW,EAAA,KAAAA,EAAA,IAFJH,EAAmC,OAA9B,MAAM,iBAAiB,WAC5BA,EAA0C,YAApC,gCAA6B,kBAG1B+R,EAAA,OAAXjS,IAAAC,EAGM,MAHNN,GAGM,CAFJU,EAAA,KAAAA,EAAA,GAAAH,EAA8B,YAAxB,oBAAiB,KACvBA,EAAuD,UAA9C,4BAAO6R,EAAA,OAAAA,EAAA,SAAAI,CAAA,GAAO,MAAM,aAAY,OAAK,cAIhD4D,EAAA7V,EAEM,MAFNN,GAEM,IAAAS,EAAA,KAAAA,EAAA,IADJH,EAAwD,OAAnD,MAAM,sCAAsC,wBADtC+R,EAAA,MAAM,0ECqNlBzS,GAAU,CACb,KAAM,sBACN,MAAO,CACL,OAAQ,CACN,KAAM,OACN,SAAU,IAEZ,SAAU,CACR,KAAM,OACN,QAAS,QACX,GAEF,MAAO,CACL,MAAO,CACL,QAAS,GACT,MAAO,KACP,cAAe,KACf,UAAW,IACb,CACF,EACA,SAAU,CAER,iBAAkB,SAChB,MAAMwW,EAAQ,KAAK,eAAiB,KAAK,cAAc,GACvD,eAAQ,IAAI,8BAA8B,KAAK,MAAM,IAAK,CACxD,iBAAkB,CAAC,CAAC,KAAK,cACzB,MAAOA,EACP,QAAQrQ,EAAA,KAAK,gBAAL,YAAAA,EAAoB,GAC5B,QAAQ8H,EAAA,KAAK,gBAAL,MAAAA,EAAoB,GAAK,OAAO,KAAK,KAAK,cAAc,EAAE,EAAI,MACxE,CAAC,EACMuI,CACT,GAEF,SAAU,CACR,KAAK,kBAAiB,CACxB,EACA,MAAO,CACL,QAAS,CACP,KAAK,kBAAiB,CACxB,GAEF,QAAS,CACP,MAAM,mBAAoB,OACxB,KAAK,QAAU,GACf,KAAK,MAAQ,KACb,KAAK,UAAY,KAEjB,GAAI,CACF,QAAQ,IAAI,iCAAiC,KAAK,MAAM,KAAK,EAE7D,MAAMrU,EAAY,KAAK,MAIvB,KAAK,cAAgB,MAAM4N,GAA6B,uBAAuB,KAAK,MAAM,EAE1F,MAAMwB,EAAW,KAAK,IAAG,EAAKpP,EAE9B,GAAI,KAAK,cAAc,MACrB,MAAM,IAAI,MAAM,KAAK,cAAc,KAAK,EAItC,KAAK,cAAc,OACjB,KAAK,cAAc,OAAO,SAAS,OAAO,EAC5C,KAAK,UAAY,GAAG,KAAK,cAAc,MAAM,KAAKoP,CAAQ,MACjD,KAAK,cAAc,OAAO,SAAS,aAAa,EACzD,KAAK,UAAY,GAAG,KAAK,cAAc,MAAM,KAAKA,CAAQ,MAE1D,KAAK,UAAY,eAAeA,CAAQ,MAG1C,KAAK,UAAY,aAAaA,CAAQ,KAGxC,QAAQ,IAAI,+BAA+B,KAAK,MAAM,IAAK,CACzD,OAAQ,KAAK,cAAc,OAC3B,SAAU,GAAGA,CAAQ,KACrB,OAAQ,CAAC,GAACpL,EAAA,KAAK,cAAc,QAAnB,MAAAA,EAA0B,OACpC,YAAa,CAAC,CAAC,KAAK,cAAc,GAClC,aAAc,KAAK,cAAc,GAAK,OAAO,KAAK,KAAK,cAAc,EAAE,EAAI,OAC3E,aAAc,KAAK,cAAc,EACnC,CAAC,EAGG,KAAK,cAAc,OAAS,KAAK,cAAc,MAAM,QAAU,MAAQ,KAAK,cAAc,MAAM,QAAU,MAC5G,QAAQ,IAAI,2BAA2B,KAAK,MAAM,KAAK,KAAK,cAAc,MAAM,KAAK,EAAE,EAEvF,QAAQ,KAAK,kCAAkC,KAAK,MAAM,IAAK,KAAK,cAAc,KAAK,EAIrF,OAAO,OAAW,KACpB,OAAO,cAAc,IAAI,YAAY,gBAAiB,CACpD,OAAQ,CACN,KAAM,uBAAuB,KAAK,MAAM,GACxC,KAAMoL,EACN,SAAU,CACZ,CACF,CAAC,CAAC,CAGN,OAASxP,EAAO,CACd,QAAQ,MAAM,uCAAuC,KAAK,MAAM,IAAKA,CAAK,EAC1E,KAAK,MAAQA,EAAM,SAGfA,EAAM,QAAQ,SAAS,OAAO,GAAKA,EAAM,QAAQ,SAAS,SAAS,GAAKA,EAAM,QAAQ,SAAS,OAAO,KACxG,KAAK,MAAQ,kCAAkC,KAAK,MAAM,oBAE9D,SACE,KAAK,QAAU,EACjB,CACF,EAGA,MAAM,WAAY,CAChB,MAAM,KAAK,mBACb,EAEA,eAAeuK,EAAQ,CACrB,GAAI,CAACA,EAAQ,MAAO,UAEpB,MAAMmK,EAAiB,CAAC,MAAO,WAAY,cAAc,EACnDC,EAAiB,CAAC,OAAQ,YAAY,EAE5C,OAAID,EAAe,SAASnK,CAAM,EAAU,UACxCoK,EAAe,SAASpK,CAAM,EAAU,UACrC,SACT,EAEA,YAAY7F,EAAO,CACjB,OAAIA,GAAU,KAAoC,MAC9C,OAAOA,GAAU,SAAiBA,EAClC,OAAOA,GAAU,SAAiBA,EAAM,QAAQ,CAAC,EAC9C,KACT,EAGA,gBAAgBkQ,EAAgB,CAC9B,GAAI,CAACA,GAAkB,CAAC,KAAK,cAAe,MAAO,GAGnD,MAAMhJ,EAAe,KAAK,kBAC1B,GAAI,CAACA,EAAc,MAAO,GAE1B,MAAMiJ,EAAOjJ,EAAe,WAAWgJ,CAAc,EAC/CE,EAAeD,EAAO,WAAWD,CAAc,EAAK,IAE1D,GAAI,KAAK,IAAIC,CAAI,EAAI,IAAM,MAAO,QAElC,MAAME,EAAOF,EAAO,EAAI,IAAM,GAC9B,MAAO,GAAGE,CAAI,GAAGF,EAAK,QAAQ,CAAC,CAAC,KAAKE,CAAI,GAAGD,EAAY,QAAQ,CAAC,CAAC,IACpE,EAGA,iBAAkB,WAChB,OAAK,KAAK,eAGN1Q,EAAA,KAAK,cAAc,OAAnB,MAAAA,EAAyB,aACpB,WAAW,KAAK,cAAc,KAAK,YAAY,GAEpD8H,EAAA,KAAK,cAAc,MAAnB,MAAAA,EAAwB,aACnB,WAAW,KAAK,cAAc,IAAI,YAAY,GAEnD8I,EAAA,KAAK,cAAc,QAAnB,MAAAA,EAA0B,aACrB,WAAW,KAAK,cAAc,MAAM,YAAY,EAGlD,KAbyB,IAclC,EAGA,kBAAkBJ,EAAgB,CAChC,GAAI,CAACA,EAAgB,MAAO,UAE5B,MAAMhJ,EAAe,KAAK,kBAC1B,GAAI,CAACA,EAAc,MAAO,UAE1B,MAAMiJ,EAAOjJ,EAAe,WAAWgJ,CAAc,EAErD,OAAI,KAAK,IAAIC,CAAI,EAAI,IAAa,UAC3BA,EAAO,EAAI,WAAa,UACjC,EAGA,aAAahN,EAAQ,CACnB,OAAIA,GAAW,KAAqC,KAGhDA,GAAU,IACL,IAAIA,EAAS,KAAY,QAAQ,CAAC,CAAC,IACjCA,GAAU,IACZ,IAAIA,EAAS,KAAS,QAAQ,CAAC,CAAC,IAC9BA,GAAU,IACZ,IAAIA,EAAS,KAAM,QAAQ,CAAC,CAAC,IAE7BA,EAAO,gBAElB,EAEA,gBAAgB8E,EAAW,CACzB,OAAIA,GAAc,KAAwC,KAGtDA,GAAa,KACR,KAAKA,EAAY,MAAe,QAAQ,CAAC,CAAC,IACxCA,GAAa,IACf,KAAKA,EAAY,KAAY,QAAQ,CAAC,CAAC,IACrCA,GAAa,IACf,KAAKA,EAAY,KAAS,QAAQ,CAAC,CAAC,IAEpC,IAAIA,EAAU,eAAc,CAAE,EAEzC,EAEA,WAAWsI,EAAM,CACf,OAAIA,GAAS,KAAmC,KACzCA,EAAK,QAAQ,CAAC,CACvB,EAEA,oBAAoBC,EAAK,CACvB,OAAIA,GAAQ,KAAkC,GAEvC,IADMA,EAAM,EAAI,IAAM,EACd,GAAGA,EAAI,QAAQ,CAAC,CAAC,IAClC,EAEA,sBAAsBA,EAAK,CAEzB,OADIA,GAAQ,MACR,KAAK,IAAIA,CAAG,EAAI,GAAY,UACzBA,EAAM,EAAI,WAAa,UAChC,CACF,CACF,EA3cOhX,GAAA,OAAM,sBAAsB,EAC1BC,GAAA,OAAM,mBAAmB,YAEN,MAAM,wBAKV,MAAM,2BAKH,MAAM,yCAQjB,MAAM,mBAEXsU,GAAA,OAAM,gBAAgB,EAEpBzB,GAAA,OAAM,qBAAqB,EAU7B4B,GAAA,OAAM,gBAAgB,EAEpBF,GAAA,OAAM,qBAAqB,EAU7BzB,GAAA,OAAM,gBAAgB,EAEpBC,GAAA,OAAM,qBAAqB,EAW7BC,GAAA,OAAM,gBAAgB,EAEpBC,GAAA,OAAM,qBAAqB,EAU7BC,GAAA,OAAM,gBAAgB,EAEpBC,GAAA,OAAM,qBAAqB,EAU7BC,GAAA,OAAM,gBAAgB,EAEpBC,GAAA,OAAM,qBAAqB,EAW7BC,GAAA,OAAM,gBAAgB,EAEpBC,GAAA,OAAM,qBAAqB,EAU7BC,GAAA,OAAM,gBAAgB,EAEpBC,GAAA,OAAM,qBAAqB,EAU7BC,GAAA,OAAM,gBAAgB,EAEpBC,GAAA,OAAM,qBAAqB,EAW7BC,GAAA,OAAM,gBAAgB,EAOtBC,GAAA,OAAM,gBAAgB,EAOtBC,GAAA,OAAM,gBAAgB,YAQtB,MAAM,kBAEJE,GAAA,OAAM,qBAAqB,EACxBC,GAAA,OAAM,iBAAiB,YAS5B,MAAM,kBAEJE,GAAA,OAAM,qBAAqB,EACxBC,GAAA,OAAM,iBAAiB,YAS5B,MAAM,kBAEH4C,GAAA,OAAM,iBAAiB,YAM1B,MAAM,kBAEHC,GAAA,OAAM,iBAAiB,YAK1B,MAAM,kBAEHC,GAAA,OAAM,iBAAiB,YAK1B,MAAM,kBAEHC,GAAA,OAAM,iBAAiB,MAM1B,MAAM,iBAAiB,kFAErB,MAAM,kBAAkB,6WApNnC,OAAA7W,EAAA,EAAAC,EA2NM,MA3NNR,GA2NM,CA1NJS,EAKM,MALNR,GAKM,CAJJW,EAAA,KAAAA,EAAA,GAAAH,EAA6B,UAAzB,uBAAoB,KACb+R,EAAA,WAAXjS,IAAAC,EAEM,MAFNN,GAEM,CADJO,EAA8B,eAApB+R,EAAA,SAAS,mBAIZA,EAAA,SAAXjS,IAAAC,EAGM,MAHNL,GAGM,IAAAS,EAAA,KAAAA,EAAA,IAFJH,EAAmC,OAA9B,MAAM,iBAAiB,WAC5BA,EAAsC,YAAhC,4BAAyB,SAGjB+R,EAAA,OAAhBjS,IAAAC,EAMM,MANNJ,GAMM,CALJQ,EAAA,KAAAA,EAAA,GAAAH,EAAkC,QAA5B,MAAM,YAAY,EAAC,KAAE,KAC3BA,EAAwB,cAAf+R,EAAA,KAAK,KACd/R,EAES,UAFA,6BAAO6R,EAAA,WAAAA,EAAA,aAAAI,EAAA,GAAW,MAAM,eAAgB,SAAUF,EAAA,WACtDA,EAAA,QAAO,wBAAAnS,EAAA,MAIdE,IAAAC,EAqMM,MArMNF,GAqMM,CAnMJG,EAUM,MAVN8T,GAUM,CATJ3T,EAAA,KAAAA,EAAA,GAAAH,EAAwC,QAAlC,MAAM,iBAAiB,EAAC,MAAG,KACjCA,EAOM,MAPNqS,GAOM,CANJrS,EAEO,QAFD,MAAK6T,EAAA,CAAC,kBAA0BhC,EAAA,gBAAetE,GAAA9H,EAAAsM,EAAA,4BAAAtM,EAAe,MAAf,YAAA8H,EAAoB,MAAM,GAC1E,EAAAyE,EAAAH,EAAA,aAAY+E,GAAAP,EAAAtE,EAAA,4BAAAsE,EAAe,MAAf,YAAAO,EAAoB,KAAK,MAE1C5W,EAEO,QAFD,MAAK6T,EAAA,CAAC,aAAqBhC,EAAA,mBAAkBgF,GAAAC,EAAA/E,EAAA,4BAAA+E,EAAe,MAAf,YAAAD,EAAoB,KAAK,GACvE,EAAA7E,EAAAH,EAAA,iBAAgBkF,GAAAC,EAAAjF,EAAA,4BAAAiF,EAAe,MAAf,YAAAD,EAAoB,KAAK,UAKlD/W,EAUM,MAVNiU,GAUM,CATJ9T,EAAA,KAAAA,EAAA,GAAAH,EAAyC,QAAnC,MAAM,iBAAiB,EAAC,OAAI,KAClCA,EAOM,MAPN+T,GAOM,CANJ/T,EAEO,QAFD,MAAK6T,EAAA,CAAC,kBAA0BhC,EAAA,gBAAeoF,GAAAC,EAAAnF,EAAA,4BAAAmF,EAAe,OAAf,YAAAD,EAAqB,MAAM,GAC3E,EAAAjF,EAAAH,EAAA,aAAYsF,GAAAC,EAAArF,EAAA,4BAAAqF,EAAe,OAAf,YAAAD,EAAqB,KAAK,MAE3CnX,EAEO,QAFD,MAAK6T,EAAA,CAAC,aAAqBhC,EAAA,mBAAkBwF,GAAAC,EAAAvF,EAAA,4BAAAuF,EAAe,OAAf,YAAAD,EAAqB,KAAK,GACxE,EAAArF,EAAAH,EAAA,iBAAgB0F,GAAAC,EAAAzF,EAAA,4BAAAyF,EAAe,OAAf,YAAAD,EAAqB,KAAK,UAKnDvX,EAUM,MAVNsS,GAUM,CATJnS,EAAA,KAAAA,EAAA,GAAAH,EAAyC,QAAnC,MAAM,iBAAiB,EAAC,OAAI,KAClCA,EAOM,MAPNuS,GAOM,CANJvS,EAEO,QAFD,MAAK6T,EAAA,CAAC,kBAA0BhC,EAAA,gBAAe4F,GAAAC,EAAA3F,EAAA,4BAAA2F,EAAe,OAAf,YAAAD,EAAqB,MAAM,GAC3E,EAAAzF,EAAAH,EAAA,aAAY8F,GAAAC,EAAA7F,EAAA,4BAAA6F,EAAe,OAAf,YAAAD,EAAqB,KAAK,MAE3C3X,EAEO,QAFD,MAAK6T,EAAA,CAAC,aAAqBhC,EAAA,mBAAkBgG,GAAAC,EAAA/F,EAAA,4BAAA+F,EAAe,OAAf,YAAAD,EAAqB,KAAK,GACxE,EAAA7F,EAAAH,EAAA,iBAAgBkG,IAAAC,EAAAjG,EAAA,4BAAAiG,EAAe,OAAf,YAAAD,GAAqB,KAAK,UAMnD/X,EAUM,MAVNwS,GAUM,CATJrS,EAAA,KAAAA,EAAA,GAAAH,EAAyC,QAAnC,MAAM,iBAAiB,EAAC,OAAI,KAClCA,EAOM,MAPNyS,GAOM,CANJzS,EAEO,QAFD,MAAK6T,EAAA,CAAC,kBAA0BhC,EAAA,gBAAeoG,IAAAC,GAAAnG,EAAA,4BAAAmG,GAAe,OAAf,YAAAD,GAAqB,MAAM,GAC3E,EAAAjG,EAAAH,EAAA,aAAYsG,IAAAC,GAAArG,EAAA,4BAAAqG,GAAe,OAAf,YAAAD,GAAqB,KAAK,MAE3CnY,EAEO,QAFD,MAAK6T,EAAA,CAAC,aAAqBhC,EAAA,mBAAkBwG,IAAAC,GAAAvG,EAAA,4BAAAuG,GAAe,OAAf,YAAAD,GAAqB,KAAK,GACxE,EAAArG,EAAAH,EAAA,iBAAgB0G,GAAAC,GAAAzG,EAAA,4BAAAyG,GAAe,OAAf,YAAAD,EAAqB,KAAK,UAKnDvY,EAUM,MAVN0S,GAUM,CATJvS,EAAA,KAAAA,EAAA,GAAAH,EAA0C,QAApC,MAAM,iBAAiB,EAAC,QAAK,KACnCA,EAOM,MAPN2S,GAOM,CANJ3S,EAEO,QAFD,MAAK6T,EAAA,CAAC,kBAA0BhC,EAAA,gBAAe4G,IAAAC,GAAA3G,EAAA,4BAAA2G,GAAe,QAAf,YAAAD,GAAsB,MAAM,GAC5E,EAAAzG,EAAAH,EAAA,aAAY8G,IAAAC,GAAA7G,EAAA,4BAAA6G,GAAe,QAAf,YAAAD,GAAsB,KAAK,MAE5C3Y,EAEO,QAFD,MAAK6T,EAAA,CAAC,aAAqBhC,EAAA,mBAAkBgH,GAAAC,GAAA/G,EAAA,4BAAA+G,GAAe,QAAf,YAAAD,EAAsB,KAAK,GACzE,EAAA7G,EAAAH,EAAA,iBAAgBkH,IAAAC,GAAAjH,EAAA,4BAAAiH,GAAe,QAAf,YAAAD,GAAsB,KAAK,UAKpD/Y,EAUM,MAVN4S,GAUM,CATJzS,EAAA,KAAAA,EAAA,GAAAH,EAA0C,QAApC,MAAM,iBAAiB,EAAC,QAAK,KACnCA,EAOM,MAPN6S,GAOM,CANJ7S,EAEO,QAFD,MAAK6T,EAAA,CAAC,kBAA0BhC,EAAA,gBAAeoH,IAAAC,GAAAnH,EAAA,4BAAAmH,GAAe,QAAf,YAAAD,GAAsB,MAAM,GAC5E,EAAAjH,EAAAH,EAAA,aAAYsH,IAAAC,GAAArH,EAAA,4BAAAqH,GAAe,QAAf,YAAAD,GAAsB,KAAK,MAE5CnZ,EAEO,QAFD,MAAK6T,EAAA,CAAC,aAAqBhC,EAAA,mBAAkBwH,IAAAC,GAAAvH,EAAA,4BAAAuH,GAAe,QAAf,YAAAD,GAAsB,KAAK,GACzE,EAAArH,EAAAH,EAAA,iBAAgB0H,IAAAC,GAAAzH,EAAA,4BAAAyH,GAAe,QAAf,YAAAD,GAAsB,KAAK,UAMpDvZ,EAUM,MAVN8S,GAUM,CATJ3S,EAAA,MAAAA,EAAA,IAAAH,EAA4D,QAAtD,MAAM,iBAAiB,EAAC,0BAAuB,KACrDA,EAOM,MAPN+S,GAOM,CANJ/S,EAEO,QAFD,MAAK6T,EAAA,CAAC,kBAA0BhC,EAAA,gBAAe4H,IAAAC,GAAA3H,EAAA,4BAAA2H,GAAe,yBAAf,YAAAD,GAAuC,MAAM,GAC7F,EAAAzH,EAAAH,EAAA,aAAY8H,IAAAC,GAAA7H,EAAA,4BAAA6H,GAAe,yBAAf,YAAAD,GAAuC,KAAK,MAE7D3Z,EAEO,QAFD,MAAK6T,EAAA,CAAC,aAAqBhC,EAAA,mBAAkBgI,IAAAC,GAAA/H,EAAA,4BAAA+H,GAAe,yBAAf,YAAAD,GAAuC,KAAK,GAC1F,EAAA7H,EAAAH,EAAA,iBAAgBkI,IAAAC,GAAAjI,EAAA,4BAAAiI,GAAe,yBAAf,YAAAD,GAAuC,KAAK,UAKrE/Z,EAUM,MAVNgT,GAUM,CATJ7S,EAAA,MAAAA,EAAA,IAAAH,EAAuD,QAAjD,MAAM,iBAAiB,EAAC,qBAAkB,KAChDA,EAOM,MAPNiT,GAOM,CANJjT,EAEO,QAFD,MAAK6T,EAAA,CAAC,kBAA0BhC,EAAA,gBAAeoI,IAAAC,GAAAnI,EAAA,4BAAAmI,GAAe,mBAAf,YAAAD,GAAiC,MAAM,GACvF,EAAAjI,EAAAH,EAAA,aAAYsI,IAAAC,GAAArI,EAAA,4BAAAqI,GAAe,mBAAf,YAAAD,GAAiC,KAAK,MAEvDna,EAEO,QAFD,MAAK6T,EAAA,CAAC,aAAqBhC,EAAA,mBAAkBwI,IAAAC,GAAAvI,EAAA,4BAAAuI,GAAe,mBAAf,YAAAD,GAAiC,KAAK,GACpF,EAAArI,EAAAH,EAAA,iBAAgB0I,IAAAC,GAAAzI,EAAA,4BAAAyI,GAAe,mBAAf,YAAAD,GAAiC,KAAK,UAK/Dva,EAUM,MAVNkT,GAUM,CATJ/S,EAAA,MAAAA,EAAA,IAAAH,EAA0D,QAApD,MAAM,iBAAiB,EAAC,wBAAqB,KACnDA,EAOM,MAPNmT,GAOM,CANJnT,EAEO,QAFD,MAAK6T,EAAA,CAAC,kBAA0BhC,EAAA,gBAAe4I,IAAAC,GAAA3I,EAAA,4BAAA2I,GAAe,sBAAf,YAAAD,GAAoC,MAAM,GAC1F,EAAAzI,EAAAH,EAAA,aAAY8I,IAAAC,GAAA7I,EAAA,4BAAA6I,GAAe,sBAAf,YAAAD,GAAoC,KAAK,MAE1D3a,EAEO,QAFD,MAAK6T,EAAA,CAAC,aAAqBhC,EAAA,mBAAkBgJ,IAAAC,GAAA/I,EAAA,4BAAA+I,GAAe,sBAAf,YAAAD,GAAoC,KAAK,GACvF,EAAA7I,EAAAH,EAAA,iBAAgBkJ,IAAAC,GAAAjJ,EAAA,4BAAAiJ,GAAe,sBAAf,YAAAD,GAAoC,KAAK,UAMlE/a,EAKM,MALNoT,GAKM,CAJJjT,EAAA,MAAAA,EAAA,IAAAH,EAA6C,QAAvC,MAAM,iBAAiB,EAAC,WAAQ,KACtCA,EAEO,QAFD,MAAK6T,EAAA,CAAC,kBAA0BhC,EAAA,gBAAeoJ,IAAAC,GAAAnJ,EAAA,4BAAAmJ,GAAe,QAAf,YAAAD,GAAsB,MAAM,GAC5E,EAAAjJ,EAAAH,EAAA,aAAYsJ,IAAAC,GAAArJ,EAAA,4BAAAqJ,GAAe,QAAf,YAAAD,GAAsB,KAAK,QAI9Cnb,EAKM,MALNqT,GAKM,CAJJlT,EAAA,MAAAA,EAAA,IAAAH,EAAiD,QAA3C,MAAM,iBAAiB,EAAC,eAAY,KAC1CA,EAEO,QAFD,MAAK6T,EAAA,CAAC,kBAA0BhC,EAAA,gBAAewJ,IAAAC,GAAAvJ,EAAA,4BAAAuJ,GAAe,OAAf,YAAAD,GAAqB,MAAM,GAC3E,EAAArJ,EAAAH,EAAA,aAAY0J,IAAAC,GAAAzJ,EAAA,4BAAAyJ,GAAe,OAAf,YAAAD,GAAqB,KAAK,QAI7Cvb,EAKM,MALNsT,GAKM,CAJJnT,EAAA,MAAAA,EAAA,IAAAH,EAA8C,QAAxC,MAAM,iBAAiB,EAAC,YAAS,KACvCA,EAEO,QAFD,MAAK6T,EAAA,CAAC,kBAA0BhC,EAAA,gBAAe4J,IAAAC,GAAA3J,EAAA,4BAAA2J,GAAe,SAAf,YAAAD,GAAuB,MAAM,GAC7E,EAAAzJ,EAAAH,EAAA,aAAY8J,IAAAC,GAAA7J,EAAA,4BAAA6J,GAAe,SAAf,YAAAD,GAAuB,KAAK,QAKb9J,EAAA,iBAAlC/R,IAAAC,EAUM,MAVNwT,GAUM,CATJpT,EAAA,MAAAA,EAAA,IAAAH,EAA2C,QAArC,MAAM,iBAAiB,EAAC,SAAM,KACpCA,EAOM,MAPNwT,GAOM,CANJxT,EAEO,OAFPyT,GAEOzB,EADFH,EAAA,cAAagK,IAAAC,GAAA/J,EAAA,4BAAA+J,GAAe,KAAf,YAAAD,GAAmB,eAAe,MAEpD7b,EAEO,QAFD,MAAK6T,EAAA,CAAC,aAAqBhC,EAAA,uBAAsBkK,IAAAC,GAAAjK,EAAA,4BAAAiK,GAAe,KAAf,YAAAD,GAAmB,mBAAmB,GACxF,EAAA/J,EAAAH,EAAA,qBAAoBoK,IAAAC,GAAAnK,EAAA,4BAAAmK,GAAe,KAAf,YAAAD,GAAmB,mBAAmB,oBAKjCpK,EAAA,iBAAlC/R,IAAAC,EAUM,MAVN2T,GAUM,CATJvT,EAAA,MAAAA,EAAA,IAAAH,EAAkD,QAA5C,MAAM,iBAAiB,EAAC,gBAAa,KAC3CA,EAOM,MAPN2T,GAOM,CANJ3T,EAEO,OAFP4T,GAEO5B,EADFH,EAAA,cAAasK,IAAAC,GAAArK,EAAA,4BAAAqK,GAAe,KAAf,YAAAD,GAAmB,aAAa,MAElDnc,EAEO,QAFD,MAAK6T,EAAA,CAAC,aAAqBhC,EAAA,uBAAsBwK,IAAAC,GAAAvK,EAAA,4BAAAuK,GAAe,KAAf,YAAAD,GAAmB,iBAAiB,GACtF,EAAArK,EAAAH,EAAA,qBAAoB0K,IAAAC,GAAAzK,EAAA,4BAAAyK,GAAe,KAAf,YAAAD,GAAmB,iBAAiB,oBAK/B1K,EAAA,iBAAlC/R,IAAAC,EAKM,MALN0c,GAKM,CAJJtc,EAAA,MAAAA,EAAA,IAAAH,EAA+C,QAAzC,MAAM,iBAAiB,EAAC,aAAU,KACxCA,EAEO,OAFPwW,GAEOxE,EADFH,EAAA,iBAAgB6K,IAAAC,GAAA5K,EAAA,4BAAA4K,GAAe,KAAf,YAAAD,GAAmB,UAAU,kBAKlB7K,EAAA,iBAAlC/R,IAAAC,EAKM,MALN6c,GAKM,CAJJzc,EAAA,MAAAA,EAAA,IAAAH,EAA+C,QAAzC,MAAM,iBAAiB,EAAC,aAAU,KACxCA,EAEO,OAFPyW,GAEOzE,EADFH,EAAA,YAAWgL,IAAAC,GAAA/K,EAAA,4BAAA+K,GAAe,KAAf,YAAAD,GAAmB,QAAQ,kBAIXhL,EAAA,iBAAlC/R,IAAAC,EAKM,MALNgd,GAKM,CAJJ5c,EAAA,MAAAA,EAAA,IAAAH,EAA8C,QAAxC,MAAM,iBAAiB,EAAC,YAAS,KACvCA,EAEO,OAFP0W,GAEO1E,EADFH,EAAA,YAAWmL,IAAAC,GAAAlL,EAAA,4BAAAkL,GAAe,KAAf,YAAAD,GAAmB,OAAO,kBAIVnL,EAAA,iBAAlC/R,IAAAC,EAKM,MALNmd,GAKM,CAJJ/c,EAAA,MAAAA,EAAA,IAAAH,EAA8C,QAAxC,MAAM,iBAAiB,EAAC,YAAS,KACvCA,EAEO,OAFP2W,GAEO3E,EADFH,EAAA,YAAWsL,IAAAC,GAAArL,EAAA,4BAAAqL,GAAe,KAAf,YAAAD,GAAmB,OAAO,kBAK5Cnd,EAOM,MAPNqd,GAOM,CANJld,EAAA,MAAAA,EAAA,IAAAH,EAAsD,QAAhD,MAAM,iBAAiB,EAAC,oBAAiB,KAC/CA,EAIM,MAJNsd,GAAwE,WAC/DtL,EAAGH,iBAAe,EAAG,mBACfG,EAAA,EAAKD,EAAA,aAAa,EAAG,iBACvBwL,GAAAxL,EAAA,sBAAAwL,GAAe,GAAK,OAAO,KAAKxL,EAAA,cAAc,EAAE,EAAE,KAAI,uFClItEzS,GAAU,CACb,KAAM,YACN,WAAY,CACV,sBAAAke,GACA,wBAAAC,GACA,oBAAAC,IAEF,MAAO,CACL,MAAO,CACL,KAAM,OACN,SAAU,IAEZ,UAAW,CACT,KAAM,OACN,QAAS,MAEX,SAAU,CACR,KAAM,OACN,QAAS,IACX,GAEF,SAAU,CACR,SAAU,CACR,OAAO,KAAK,MAAM,cAAgB,OACpC,EAEA,OAAQ,CACN,MAAO,OAAO,KAAK,eAAe,KAAK,MAAM,MAAM,CAAC,EACtD,GAEF,QAAS,CACP,WAAY,CAIV,MAHI,CAAC,KAAK,UAGN,KAAK,SAAS,WAAa,GACtB,UAGF,KAAK,SAAS,QAAU,SACjC,EAEA,aAAc,CAKZ,MAJI,CAAC,KAAK,UAIN,KAAK,SAAS,WAAa,GACtB,mBAGF,KAAK,SAAS,UAAY,KAAK,SAAS,QAAU,kBAC3D,EAEA,qBAAsB,CACpB,MAAMC,EAAW,KAAK,YAAW,EAgBjC,MAb2B,CACzB,2BAA4B,WAC5B,gCAAiC,iBACjC,oBAAqB,gBACrB,sBAAuB,gBACvB,eAAkB,gBAClB,sBAAuB,uBACvB,uBAAwB,mBACxB,2BAA4B,iBAC5B,oBAAqB,aACrB,mBAAoB,SACtB,EAE0BA,CAAQ,GAAK,OACzC,EAEA,aAAc,CACZ,GAAI,KAAK,UAAY,KAAK,SAAS,SASjC,MAPoB,CAClB,IAAO,OACP,IAAO,SACP,IAAO,SACP,IAAO,SACP,IAAO,MACT,EACmB,KAAK,SAAS,QAAQ,GAAK,KAAK,SAAS,SAI9D,MAAMxY,EAAS,KAAK,MAAM,OAG1B,MAAI,CAAC,OAAQ,MAAO,MAAO,MAAO,KAAM,MAAO,MAAO,OAAQ,MAAM,EAAE,SAASA,CAAM,EAC5E,QAGA,CAAC,OAAQ,OAAQ,OAAQ,OAAQ,MAAO,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,OAAQ,MAAM,EAAE,SAASA,CAAM,EACvI,SAIX,EAEA,cAAe,CACb,OAAQ,KAAK,MAAM,YAAW,CAC5B,IAAK,QAAS,MAAO,gBACrB,IAAK,aAAc,MAAO,gBAC1B,QAAS,MAAO,EAClB,CACF,EAEA,YAAa,CAEX,QAAQ,IAAI,kCAAmC,KAAK,MAAM,MAAM,EAChE,KAAK,QAAQ,KAAK,CAChB,KAAM,eACN,OAAQ,CAAE,OAAQ,KAAK,MAAM,MAAK,CACpC,CAAC,EAAE,MAAMmM,GAAO,CACd,QAAQ,MAAM,oBAAqBA,CAAG,CACxC,CAAC,CACH,EAEA,eAAenM,EAAQ,CAGrB,OAAOA,EAAO,QAAQ,gBAAiB,GAAG,CAC5C,CACF,CACF,0BA7MS3F,GAAA,OAAM,mBAAmB,EACvBC,GAAA,OAAM,aAAa,EAClBC,GAAA,OAAM,QAAQ,EACbC,GAAA,OAAM,aAAa,EAChBC,GAAA,OAAM,cAAc,EAIzBC,GAAA,OAAM,gBAAgB,eAaxBwS,GAAA,OAAM,mBAAmB,EAEvB4B,GAAA,OAAM,iBAAiB,EAavBF,GAAA,OAAM,iBAAiB,YAaR,MAAM,mBACrBxB,GAAA,OAAM,eAAe,EAErBC,GAAA,OAAM,YAAY,YAaL,MAAM,oJAxE5BzS,EA6EM,OA5EJ,MAAM,kBACL,GAAI8R,EAAA,MACJ,cAAaC,EAAA,MAAM,OACpB,SAAS,OAGT9R,EAkBM,MAlBNR,GAkBM,CAjBJQ,EAMM,MANNP,GAMM,CALJO,EAA0C,KAA1CN,GAA0CsS,EAApBF,EAAA,MAAM,MAAM,KAClC9R,EAGM,MAHNL,GAGM,CAFJK,EAAqD,OAArDJ,GAAqDoS,EAAvBH,EAAA,YAAW,MACzC7R,EAAkG,QAA5F,MAAK6T,EAAA,CAAC,eAAc,YAAqBhC,EAAA,oBAAmB,SAASA,EAAA,YAAW,UAG1F7R,EASM,MATNH,GASM,CARJG,EAOS,UANN,4BAAO6R,EAAA,YAAAA,EAAA,cAAAI,CAAA,GACR,MAAM,aACL,MAAK,8BAAgCH,EAAA,MAAM,MAAM,uBACnD,WAEC,IAAA9R,EAA+B,QAAzB,MAAM,UAAU,EAAC,IAAC,iBAM9BA,EAyBM,MAzBNqS,GAyBM,CAvBJrS,EAUM,MAVNiU,GAUM,aATJjU,EAEM,OAFD,MAAM,iBAAe,CACxBA,EAAwB,UAApB,iBAAe,QAErBC,EAKE2d,EAAA,CAJA,cAAY,WACX,OAAQ9L,EAAA,MAAM,OACd,SAAUD,EAAA,YAAW,EACrB,SAAU,mCAKf7R,EASM,MATN+T,GASM,aARJ/T,EAEM,OAFD,MAAM,iBAAe,CACxBA,EAA2B,UAAvB,oBAAkB,QAExBC,EAIE4d,EAAA,CAHC,OAAQ/L,EAAA,MAAM,OACd,SAAUD,EAAA,YAAW,EACrB,SAAU,qCAMNC,EAAA,WAAXhS,IAAAC,EAKM,MALNuS,GAKM,CAJJtS,EAGM,MAHNuS,GAGM,CAFJpS,EAAA,KAAAA,EAAA,GAAAH,EAAoB,UAAhB,cAAW,KACfA,EAAwD,IAAxDwS,GAAwDR,EAA/BF,EAAA,UAAU,cAAc,mBAKrD7R,EAGE6d,EAAA,CAFC,OAAQhM,EAAA,MAAM,OACd,SAAUD,EAAA,YAAW,iCAMbA,EAAA,SAAX/R,IAAAC,EAIM,MAJN0S,GAIM,CAHJzS,EAEO,QAFD,MAAK6T,EAAA,CAAC,cAAa,SAAkB/B,EAAA,MAAM,WAAW,QACvDD,EAAA,aAAY,wFC1BlBvS,GAAU,CACb,KAAM,UACN,MAAO,CACL,MAAO,CACL,KAAM,MACN,QAAS,IAAM,IAEjB,aAAc,CACZ,KAAM,OACN,QAAS,IAEX,YAAa,CACX,KAAM,OACN,QAAS,EACX,GAGF,MAAO,CAAC,cAAc,EACtB,QAAS,CACP,cAAc6F,EAAQ,CACpB,KAAK,MAAM,eAAgBA,CAAM,CACnC,EAEA,oBAAoB4Y,EAAY,CAC9B,OAAOA,EAAW,SAAS,OAAO,CAACC,EAAOC,IACjCD,EAAQC,EAAa,SAAS,OACpC,CAAC,CACN,CAEF,CACF,EA9EO1e,GAAA,OAAM,UAAU,EAOZC,GAAA,OAAM,yBAAyB,eAE5BE,GAAA,OAAM,YAAY,EAIrBC,GAAA,OAAM,eAAe,EAOjBC,GAAA,OAAM,2BAA2B,eAE9BkU,GAAA,OAAM,YAAY,EAIrBzB,GAAA,OAAM,eAAe,yDAYhBC,GAAA,OAAM,gBAAgB,2BAtCxC,OAAAxS,EAAA,EAAAC,EA4CM,MA5CNR,GA4CM,QA3CJQ,EA0CMmU,EAAA,KAAAC,EAzCiBrC,EAAA,MAAdiM,QADThe,EA0CM,OAxCH,IAAKge,EAAW,GACjB,MAAM,0BAGN/d,EAGM,MAHNR,GAGM,CAFJQ,EAAgF,QAA1E,MAAM,aAAc,MAAO+d,EAAW,KAAU,EAAA/L,EAAA+L,EAAW,KAAK,IAAAte,EAAA,EACtEO,EAAuE,OAAvEN,GAAyB,MAAImS,EAAA,oBAAoBkM,CAAU,GAAI,IAAC,KAIlE/d,EA6BM,MA7BNL,GA6BM,EA5BJG,EAAA,IAAAC,EA2BMmU,EAAA,KAAAC,EA1BmB4J,EAAW,SAA3BE,QADTle,EA2BM,OAzBH,IAAKke,EAAa,GACnB,MAAM,4BAGNje,EAGM,MAHNJ,GAGM,CAFJI,EAAoF,QAA9E,MAAM,aAAc,MAAOie,EAAa,KAAU,EAAAjM,EAAAiM,EAAa,KAAK,IAAApe,EAAA,EAC1EG,EAAoE,OAApE8T,GAAyB,IAAC9B,EAAGiM,EAAa,SAAS,MAAM,EAAG,IAAC,KAI/Dje,EAcM,MAdNqS,GAcM,EAbJvS,EAAA,IAAAC,EAYSmU,EAAA,KAAAC,EAXc8J,EAAa,SAA3BC,QADTne,EAYS,UAVN,IAAKme,EAAW,GACjB,SAAM,wBAAuB,aACNA,EAAW,SAAWpM,EAAA,YAAY,IACxD,eAAcoM,EAAW,SAAWpM,EAAA,aAAY,gBAChD,QAAKqM,GAAEtM,EAAA,cAAcqM,EAAW,MAAM,EACtC,UAAO,OAAQrM,EAAA,cAAcqM,EAAW,MAAM,sBACvBrM,EAAA,cAAcqM,EAAW,MAAM,6BAEvDle,EAAiF,QAA3E,MAAM,cAAe,MAAOke,EAAW,KAAU,EAAAlM,EAAAkM,EAAW,KAAK,IAAAnK,EAAA,EACvE/T,EAAsE,OAAtEsS,GAAsEN,EAAtCkM,EAAW,SAAS,QAAQ,8GCRrE5e,GAAU,CACb,KAAM,kBACN,WAAY,CACV,QAAA8e,IAEF,MAAO,CACL,QAAS,CACP,KAAM,MACN,QAAS,IAAM,IAEjB,aAAc,CACZ,KAAM,OACN,QAAS,IAEX,YAAa,CACX,KAAM,OACN,QAAS,IAEX,UAAW,CACT,KAAM,QACN,QAAS,EACX,GAGF,MAAO,CAAC,eAAgB,eAAe,EACvC,MAAO,CACL,MAAO,CACL,iBAAkB,KAAK,WACzB,CACF,EACA,SAAU,CACR,iBAAkB,CAChB,GAAI,CAAC,KAAK,iBAAiB,OACzB,OAAO,KAAK,QAGd,MAAMC,EAAQ,KAAK,iBAAiB,YAAW,EAAG,KAAI,EAEtD,OAAO,KAAK,QAAQ,IAAIN,GAAc,CACpC,MAAMO,EAAiB,CAAE,GAAGP,EAAY,SAAU,EAAC,EAEnD,OAAAA,EAAW,SAAS,QAAQE,GAAgB,CAC1C,MAAMM,EAAmB,CAAE,GAAGN,EAAc,SAAU,EAAC,EAEvDA,EAAa,SAAS,QAAQC,GAAc,CAE1B,CACdH,EAAW,MACXE,EAAa,MACbC,EAAW,MACXA,EAAW,QACX,KAAKM,GAAQA,EAAK,YAAW,EAAG,SAASH,CAAK,CAAC,GAG/CE,EAAiB,SAAS,KAAKL,CAAU,CAE7C,CAAC,EAEGK,EAAiB,SAAS,OAAS,GACrCD,EAAe,SAAS,KAAKC,CAAgB,CAEjD,CAAC,EAEMD,EAAe,SAAS,OAAS,EAAIA,EAAiB,IAC/D,CAAC,EAAE,OAAO,OAAO,CACnB,GAEF,MAAO,CACL,YAAYG,EAAU,CACpB,KAAK,iBAAmBA,CAC1B,GAEF,QAAS,CACP,cAActZ,EAAQ,CACpB,KAAK,MAAM,eAAgBA,CAAM,CACnC,EAEA,gBAAiB,CACf,KAAK,MAAM,gBAAiB,KAAK,gBAAgB,CACnD,CAEF,CACF,EA/GS5F,GAAA,OAAM,cAAc,EAElBC,GAAA,OAAM,kBAAkB,EAa1BC,GAAA,OAAM,eAAe,2DAhB5BM,EAwBM,OAxBD,MAAK8T,EAAA,CAAC,mBAAkB,cAAyB/B,EAAA,UAAS,KAC7D9R,EAaM,MAbNT,GAaM,CAZJY,EAAA,KAAAA,EAAA,GAAAH,EAAyB,UAArB,mBAAgB,KACpBA,EAUM,MAVNR,GAUM,GATJQ,EAOE,8CANS+R,EAAA,iBAAgBoM,GACzB,KAAK,OACL,YAAY,wCACZ,MAAM,eACN,aAAW,gBACV,4BAAOtM,EAAA,gBAAAA,EAAA,kBAAAI,CAAA,mBALCF,EAAA,gBAAgB,IAO3B5R,EAAA,KAAAA,EAAA,GAAAH,EAAmC,QAA7B,MAAM,eAAc,KAAE,SAIhCA,EAOM,MAPNP,GAOM,CANJQ,EAKEye,EAAA,CAJC,MAAO7M,EAAA,gBACP,gBAAeC,EAAA,aACf,eAAcC,EAAA,iBACd,cAAcF,EAAA,qJClBhB,MAAM8M,EAAkB,CAC7B,aAAc,CACZ,KAAK,aAAe,EACtB,CAQA,MAAM,eAAexZ,EAAQyZ,EAAS,GAAM,CAC1C,GAAI,CAEF,MAAMC,EAAW,OADO,KAAK,eAAe1Z,CAAM,CACX,GACjC2Z,EAAgB,SAAS,eAAeD,CAAQ,EAEtD,GAAI,CAACC,EAAe,CAClB,QAAQ,KAAK,uCAAuCD,CAAQ,2BAA2B1Z,CAAM,GAAG,EAChG,MACF,CAGA,MAAM4Z,EAAuB,OAAO,WAAW,kCAAkC,EAAE,QAI7EC,EADaF,EAAc,UACF,KAAK,gBAAe,EAC7CG,EAAmB,OAAO,YAC1BC,EAAiB,KAAK,IAAIF,EAAYC,CAAgB,EAItDE,EADiB,OAAO,YACa,EACrCC,EAAmBF,EAAiBC,GAAqBJ,EACzDM,EAAkBT,GAAU,CAACQ,EAEnC,QAAQ,IAAI,sCAAsCF,CAAc,iBAAiBC,CAAiB,aAAaE,EAAkB,SAAW,SAAS,SAAS,EAG9J,OAAO,SAAS,CACd,IAAK,KAAK,IAAI,EAAGL,CAAS,EAC1B,SAAUK,EAAkB,SAAW,SAC/C,CAAO,EAGGA,GAEF,MAAM,KAAK,sBAAqB,EAIlCP,EAAc,MAAM,CAAE,cAAe,EAAI,CAAE,EAE3C,QAAQ,IAAI,0CAA0C3Z,CAAM,UAAU0Z,CAAQ,WAAWQ,EAAkB,SAAW,SAAS,WAAW,CAC5I,OAAShe,EAAO,CACd,QAAQ,MAAM,gDAAiDA,CAAK,CACtE,CACF,CAOA,eAAe8D,EAAQ,CACrB,OAAOA,EAAO,QAAQ,gBAAiB,GAAG,CAC5C,CAOA,iBAAiBA,EAAQ,CACvB,QAAQ,KAAK,6HAA6H,EAE1I,GAAI,CACF,MAAMoH,EAAM,IAAI,IAAI,OAAO,QAAQ,EAE/BpH,EACFoH,EAAI,aAAa,IAAI,QAASpH,CAAM,EAEpCoH,EAAI,aAAa,OAAO,OAAO,EAIjC,OAAO,QAAQ,aAAa,KAAM,GAAIA,EAAI,UAAU,EAEpD,QAAQ,IAAI,uDAAuDpH,CAAM,EAAE,CAC7E,OAAS9D,EAAO,CACd,QAAQ,MAAM,iDAAkDA,CAAK,CACvE,CACF,CAOA,yBAA0B,CACxB,QAAQ,KAAK,yIAAyI,EAEtJ,GAAI,CAEF,OADY,IAAI,IAAI,OAAO,QAAQ,EACxB,aAAa,IAAI,OAAO,CACrC,OAASA,EAAO,CACd,eAAQ,MAAM,gDAAiDA,CAAK,EAC7D,IACT,CACF,CAMA,iBAAkB,CAChB,GAAI,CAEF,MAAMie,EAAS,SAAS,cAAc,uCAAuC,EAC7E,GAAIA,EAEF,OADaA,EAAO,sBAAqB,EAC7B,OAAS,EAEzB,OAASje,EAAO,CACd,QAAQ,KAAK,wDAAyDA,CAAK,CAC7E,CAEA,OAAO,KAAK,YACd,CAMA,uBAAwB,CACtB,OAAO,IAAI,QAAQL,GAAW,CAC5B,IAAIue,EAAgB,OAAO,YACvBC,EAAiB,KAErB,MAAMC,EAAiB,IAAM,CAC3B,MAAMR,EAAmB,OAAO,YAE5B,KAAK,IAAIA,EAAmBM,CAAa,EAAI,GAE/C,aAAaC,CAAc,EAC3Bxe,EAAO,IAGPue,EAAgBN,EAChBO,EAAiB,WAAWC,EAAgB,EAAE,EAElD,EAGAD,EAAiB,WAAWC,EAAgB,EAAE,EAG9C,WAAWze,EAAS,GAAI,CAC1B,CAAC,CACH,CAOA,cAAcmE,EAAQ,CAEpB,MAAM0Z,EAAW,OADO,KAAK,eAAe1Z,CAAM,CACX,GACvC,OAAO,SAAS,eAAe0Z,CAAQ,IAAM,IAC/C,CACF,CAGO,MAAMa,GAAoB,IAAIf,GC/K9B,MAAMgB,EAAiB,CAC5B,aAAc,CACZ,KAAK,SAAW,KAChB,KAAK,SAAW,KAChB,KAAK,iBAAmB,IAAI,IAC5B,KAAK,SAAW,GAGhB,KAAK,gBAAkB,CACrB,KAAM,KACN,WAAY,qBACZ,UAAW,CAAC,EAAG,GAAK,IAAM,GAAK,IAAM,CAAG,CAC9C,CACE,CAOA,MAAMC,EAAUC,EAAU,CACxB,GAAI,CACF,KAAK,QAAO,EAEZ,KAAK,SAAWA,EAChB,KAAK,iBAAiB,MAAK,EAG3B,KAAK,SAAW,IAAI,qBAClB,KAAK,mBAAmB,KAAK,IAAI,EACjC,KAAK,eACb,EAGMD,EAAS,QAAQE,GAAW,CAC1B,MAAM3a,EAAS2a,EAAQ,QAAQ,OAC3B3a,IACF,KAAK,iBAAiB,IAAI2a,EAAS3a,CAAM,EACzC,KAAK,SAAS,QAAQ2a,CAAO,EAEjC,CAAC,EAED,KAAK,SAAW,GAChB,QAAQ,IAAI,uCAAuCF,EAAS,MAAM,WAAW,CAC/E,OAASve,EAAO,CACd,QAAQ,MAAM,+CAAgDA,CAAK,CACrE,CACF,CAMA,mBAAmB8P,EAAS,CAC1B,GAAI,GAAC,KAAK,UAAY,CAAC,KAAK,UAE5B,GAAI,CAEF,MAAM4O,EAAkB,GAexB,GAbA5O,EAAQ,QAAQC,GAAS,CACvB,MAAMjM,EAAS,KAAK,iBAAiB,IAAIiM,EAAM,MAAM,EACjDjM,GAAUiM,EAAM,gBAClB2O,EAAgB,KAAK,CACnB,QAAS3O,EAAM,OACf,OAAQjM,EACR,kBAAmBiM,EAAM,kBACzB,mBAAoBA,EAAM,kBACtC,CAAW,CAEL,CAAC,EAGG2O,EAAgB,SAAW,EAAG,OAGlC,MAAMC,EAAe,KAAK,sBAAsBD,CAAe,EAE3DC,GAEF,KAAK,kBAAkBA,CAAY,CAEvC,OAAS3e,EAAO,CACd,QAAQ,MAAM,iDAAkDA,CAAK,CACvE,CACF,CAOA,sBAAsB0e,EAAiB,CACrC,GAAIA,EAAgB,SAAW,EAAG,OAAO,KACzC,GAAIA,EAAgB,SAAW,EAAG,OAAOA,EAAgB,CAAC,EAAE,OAK5D,MAAME,EADiB,OAAO,YACU,EAExC,IAAIC,EAAcH,EAAgB,CAAC,EAC/BI,EAAY,KAAK,sBAAsBD,EAAaD,CAAc,EAEtE,QAASzb,EAAI,EAAGA,EAAIub,EAAgB,OAAQvb,IAAK,CAC/C,MAAMsb,EAAUC,EAAgBvb,CAAC,EAC3B4b,EAAQ,KAAK,sBAAsBN,EAASG,CAAc,EAE5DG,EAAQD,IACVD,EAAcJ,EACdK,EAAYC,EAEhB,CAEA,OAAOF,EAAY,MACrB,CAQA,sBAAsBG,EAAaJ,EAAgB,CACjD,KAAM,CAAE,kBAAAK,EAAmB,mBAAAC,CAAkB,EAAKF,EAG5CG,EAAgBD,EAAmB,IAAOA,EAAmB,OAAS,EAKtEE,EAAc,EAFO,KAAK,IAAID,EAAgBP,CAAc,EAC9CA,EAIpB,OAAQK,EAAoB,GAAQG,EAAc,EACpD,CAMA,kBAAkBtb,EAAQ,CACpB,KAAK,eACP,aAAa,KAAK,aAAa,EAGjC,KAAK,cAAgB,WAAW,IAAM,CAChC,KAAK,UAAY,KAAK,UACxB,KAAK,SAASA,CAAM,CAExB,EAAG,GAAG,CACR,CAMA,mBAAmBA,EAAQ,CACrB,KAAK,UAAY,KAAK,UACxB,KAAK,SAASA,CAAM,CAExB,CAKA,SAAU,CACR,GAAI,GAAC,KAAK,UAAY,CAAC,KAAK,UAE5B,GAAI,CAEF,MAAMya,EAAW,MAAM,KAAK,KAAK,iBAAiB,MAAM,EAClDG,EAAkB,GAExBH,EAAS,QAAQE,GAAW,CAC1B,MAAMY,EAAOZ,EAAQ,sBAAqB,EACpC3a,EAAS,KAAK,iBAAiB,IAAI2a,CAAO,EAGhD,GAAIY,EAAK,IAAM,OAAO,aAAeA,EAAK,OAAS,GAAKvb,EAAQ,CAC9D,MAAMmb,EAAoB,KAAK,2BAA2BI,CAAI,EAC1DJ,EAAoB,GACtBP,EAAgB,KAAK,CACnB,QAAAD,EACA,OAAA3a,EACA,kBAAAmb,EACA,mBAAoBI,CAClC,CAAa,CAEL,CACF,CAAC,EAED,MAAMV,EAAe,KAAK,sBAAsBD,CAAe,EAC3DC,GACF,KAAK,mBAAmBA,CAAY,CAExC,OAAS3e,EAAO,CACd,QAAQ,MAAM,sCAAuCA,CAAK,CAC5D,CACF,CAOA,2BAA2Bqf,EAAM,CAC/B,MAAMC,EAAiB,OAAO,YAGxBC,EAAa,KAAK,IAAIF,EAAK,IAFZ,EAE6B,EAC5CG,EAAgB,KAAK,IAAIH,EAAK,OAAQC,CAAc,EAG1D,OAFsB,KAAK,IAAI,EAAGE,EAAgBD,CAAU,EAErCF,EAAK,MAC9B,CAKA,SAAU,CACR,GAAI,CACE,KAAK,WACP,KAAK,SAAS,WAAU,EACxB,KAAK,SAAW,MAGd,KAAK,gBACP,aAAa,KAAK,aAAa,EAC/B,KAAK,cAAgB,MAGvB,KAAK,iBAAiB,MAAK,EAC3B,KAAK,SAAW,KAChB,KAAK,SAAW,GAEhB,QAAQ,IAAI,8BAA8B,CAC5C,OAASrf,EAAO,CACd,QAAQ,MAAM,0CAA2CA,CAAK,CAChE,CACF,CAKA,OAAQ,CACN,KAAK,SAAW,EAClB,CAKA,QAAS,CACP,KAAK,SAAW,GAChB,KAAK,QAAO,CACd,CACF,CAGO,MAAMyf,GAAmB,IAAInB,GC7K/BrgB,GAAU,CACb,KAAM,gBACN,WAAY,CACV,UAAAyhB,GACA,sBAAA3M,GACA,gBAAA4M,EAAA,EAEF,MAAO,CACL,MAAO,CACL,OAAQ,GACR,UAAW,KACX,SAAU,KACV,QAAS,GACT,MAAO,KACP,WAAY,KACZ,kBAAmB,GAEnB,aAAc,GACd,YAAa,GAGjB,EACA,SAAU,CACR,eAAgB,CACd,MAAO,CACL,QAAW,CACT,CAAC,QAAW,kBAAkB,MAAS,iBACvC,CAAC,QAAW,aAAa,MAAS,oBAClC,CAAC,QAAW,oBAAoB,MAAS,kBACzC,CAAC,QAAW,iBAAiB,MAAS,kBACtC,CAAC,QAAW,eAAe,MAAS,OACpC,CAAC,QAAW,WAAW,MAAS,OAAM,EAExC,WAAc,QACd,OAAU,KACV,cAAiB,GACjB,cAAiB,GACjB,eAAkB,GAEtB,EAEA,eAAgB,CACd,GAAI,CAAC,KAAK,OAAO,QAAU,CAAC,KAAK,SAC/B,MAAO,GAGT,MAAMjM,EAAS,GAEf,KAAK,OAAO,QAAQkM,GAAS,SAC3B,MAAMC,EAAiB,KAAK,SAAS,MAAM,KAAKC,GAAKA,EAAE,SAAWF,EAAM,MAAM,EACxEG,GAAkB7T,GAAA9H,EAAA,KAAK,YAAL,YAAAA,EAAgB,aAAhB,YAAA8H,EAA4B,KAAK8T,GAAKA,EAAE,SAAWJ,EAAM,QAEjF,IAAIK,EAAS,UACTJ,GAAkBA,EAAe,YAAc,KACjDI,EAASJ,EAAe,QAAU,WAG/BnM,EAAOuM,CAAM,IAChBvM,EAAOuM,CAAM,EAAI,IAGnBvM,EAAOuM,CAAM,EAAE,KAAK,CAClB,MAAAL,EACA,UAAWG,EACX,SAAUF,CAAA,CACX,CACH,CAAC,EAGD,MAAMK,EAAiB,CACrB,aACA,qBACA,oBACA,yBACA,aACA,cACA,qBACA,SACA,kBACA,cACA,aAIIC,EAAmB,CACvB,WAAc,CACZ,iBACA,4BACA,uBACA,yBACA,kCACA,sCACA,0BACA,oBACA,wBACA,qCACA,QACA,uCAEF,qBAAsB,CACpB,sBACA,kBACA,mBACA,kBACA,0BACA,mBACA,mCACA,kCACA,oBACA,mBACA,wBACA,mBACA,0BACA,0BACA,mBAEF,oBAAqB,CACnB,kBACA,qBACA,cACA,0BACA,kBACA,iBACA,aACA,mBACA,UACA,2BACA,2BACA,yBACA,yBACA,oBACA,WACA,UACA,wBACA,qCACA,oBACA,eACA,wBACA,oBACA,iCAEF,yBAA0B,CACxB,iCACA,mBACA,gBACA,uBACA,iCACA,aACA,gBAEF,WAAc,CACZ,+BACA,gBACA,kBACA,yBACA,mBACA,iCACA,uBACA,0BACA,2CACA,8BACA,4BAEF,YAAe,CACb,sBACA,iCACA,sCACA,YACA,6BACA,gCACA,8BACA,mBACA,0BACA,gBACA,iCACA,+BACA,4BACA,WACA,WACA,sBACA,sBACA,oBACA,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","names":["_sfc_main","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_openBlock","_createElementBlock","_createElementVNode","_createVNode","_component_router_link","_cache","_renderSlot","_ctx","Layout","_component_Layout","_component_router_view","Component","route","_createBlock","_resolveDynamicComponent","WidgetPreloader","scriptUrl","promise","resolve","reject","link","scripts","script","error","widgetPreloader","PerformanceMonitor$1","label","startTime","duration","asyncFunction","result","metrics","report","sum","time","slowest","name","fastest","warnings","totalTime","performanceMonitor","PerformanceMonitor","PerformanceCache","key","data","ttl","cacheItem","item","stored","memorySize","localStorageSize","dataLoader","items","results","promises","loader","performanceCache","CACHE_KEYS","AutoUpdateScheduler","intervalId","technicalInterval","metadataInterval","cleanupInterval","dataVersionService","__vitePreload","fallbackError","paths","baseUrl","response","index","lastUpdate","ageHours","cachedMetadata","keysToRemove","i","stats","statsAfter","updateType","originalError","config","retryError","now","autoUpdateScheduler","PrecomputedIndicatorsAPI","indexResponse","symbol","cacheKey","cached","latestDate","dataUrl","indicators","_a","computedAt","computed","diffMs","diffHours","diffMinutes","value","precomputedIndicatorsAPI","TechnicalIndicatorsCache","latestTimestamp","dateKey","today","cachedData","parsed","cacheData","technicalIndicatorsCache","EPSILON","clampRSI","rsi","rollingMax","values","period","max","j","rollingMin","min","sma","nanPolicy","minPeriods","L","t","window","v","validValues","ema","alpha","initMode","firstValidIndex","k","recentWindow","wilderSmoothing","count","validIndices","initIndex","validCount","calculateMA","close","calculateSMA","calculateIchimokuBaseLine","high","low","hh","ll","calculateIchimokuConversionLine","calculateIchimokuLaggingSpan","shift","calculateVWMA","volume","numerator","denominator","calculateRSI","delta","gain","loss","avgGain","avgLoss","avgGainValue","avgLossValue","calculateADX","length","validOHLCCount","upMove","downMove","plusDM","minusDM","tr","tr1","tr2","tr3","smTR","smPlusDM","smMinusDM","plusDI","minusDI","dx","smTRValue","smPlusDMValue","smMinusDMValue","diSum","adx","adxResult","finalValidADX","calculateMACD","fastPeriod","slowPeriod","signalPeriod","emaFast","emaSlow","macd","signal","histogram","calculateAllIndicators","ohlcv","open","macdResult","YahooFinanceAPI","freshData","proxyIndex","proxy","targetUrl","url","quotes","rawData","validDataPoints","coreResults","getLastValue","series","createIndicatorResult","signalThresholds","lastValue","currentPrice","adxValue","macdValue","signalValue","histValue","p","_b","longCacheTimeout","summaryProfile","price","keyStats","stockInfo","defaultInfo","nasdaqSymbols","nyseSymbols","marketCap","apiCacheStats","range","validPoints","ohlcvResult","yahooFinanceAPI","HybridTechnicalIndicatorsAPI","precomputedData","realtimeData","validADXCount","errorMessage","originalFallback","originalPrecomputed","symbols","maxConcurrent","batches","batch","batchPromises","status","precomputedIndex","options","hybridTechnicalIndicatorsAPI","CacheWarmupService","shouldWarmup","currentVersion","lastWarmupVersion","lastWarmupTime","timeSinceLastWarmup","cacheStats","attempt","batchSize","packageUrl","cachedCount","successful","r","failed","ms","newConfig","cacheWarmupService","WidgetLoadManager","loadFunction","widgetId","priority","task","insertIndex","loadTime","success","taskIndex","cancelledCount","widgetLoadManager","rootMargins","entries","entry","delay","err","container","existingContent","widgetContainer","widgetContent","configJson","timeout","$options","$props","$data","_toDisplayString","args","vixConfig","val","angle","_hoisted_9","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_normalizeClass","_hoisted_8","_hoisted_11","_normalizeStyle","_hoisted_10","_Fragment","_renderList","LazyTradingViewWidget","VixWidget","ZeiiermanFearGreedGauge","MarketOverviewSkeleton","_component_MarketOverviewSkeleton","_component_LazyTradingViewWidget","_component_ZeiiermanFearGreedGauge","_component_VixWidget","StocksConfigService","stock","s","groups","enabledStocks","stocksConfig","WidgetCache","widgetType","exchange","firstKey","widgetCache","loadPromise","baseTimeouts","retryCount","timeoutDuration","maxRetries","backoffDelay","_withDirectives","hasYF","bullishSignals","bearishSignals","indicatorValue","diff","diffPercent","sign","_c","beta","pct","_hoisted_36","_hoisted_38","_hoisted_40","_hoisted_42","_d","_f","_e","_h","_g","_j","_i","_l","_k","_n","_m","_p","_o","_r","_q","_t","_s","_v","_u","_x","_w","_z","_y","_B","_A","_D","_C","_F","_E","_H","_G","_J","_I","_L","_K","_N","_M","_P","_O","_R","_Q","_T","_S","_V","_U","_X","_W","_Z","_Y","_$","__","_ba","_aa","_da","_ca","_fa","_ea","_ha","_ga","_ja","_ia","_la","_ka","_na","_ma","_pa","_oa","_ra","_qa","_ta","_sa","_va","_ua","_xa","_wa","_za","_ya","_Ba","_Aa","_Da","_Ca","_Fa","_Ea","_Ha","_Ga","_Ja","_Ia","_La","_Ka","_Na","_Ma","_Pa","_Oa","_hoisted_35","_Ra","_Qa","_hoisted_37","_Ta","_Sa","_hoisted_39","_Va","_Ua","_hoisted_41","_Xa","_Wa","_hoisted_43","_hoisted_44","_Ya","FastTradingViewWidget","TechnicalAnalysisWidget","TechnicalIndicators","industry","_component_FastTradingViewWidget","_component_TechnicalAnalysisWidget","_component_TechnicalIndicators","sectorNode","total","industryNode","symbolNode","$event","TOCTree","query","filteredSector","filteredIndustry","text","newValue","_component_TOCTree","NavigationService","smooth","targetId","targetElement","prefersReducedMotion","scrollTop","currentScrollTop","scrollDistance","distanceThreshold","shouldUseInstant","shouldUseSmooth","header","lastScrollTop","scrollEndTimer","checkScrollEnd","navigationService","ScrollSpyService","elements","callback","element","visibleElements","activeSymbol","viewportCenter","bestElement","bestScore","score","elementInfo","intersectionRatio","boundingClientRect","elementCenter","centerScore","rect","viewportHeight","visibleTop","visibleBottom","scrollSpyService","StockCard","NavigationPanel","quote","symbolMetadata","m","symbolDailyData","d","sector","sectorPriority","industryPriority","sortedGroups","sectorIndustryPriority","industryGroups","sortedStocks","sortedIndustryStocks","a","b","marketCapA","marketCapB","tree","sectorName","stocks","industryName","industryStocks","map","to","from","next","basePath","quotesResponse","quotesData","dailyResponse","metadataResponse","timeString","exchangeCode","str","sectionId","expanded","sectionsArray","saved","focusSymbol","stockCardElements","_component_NavigationPanel","group","_createTextVNode","_component_StockCard","totalBytes","used","hasDebug","event","observer","list","widget","path","blob","StockOverview","_component_PerformanceMonitor","_component_StockOverview","withBase","base","cleanPath","days","date","OhlcvApi","localData","yahooData","requiredFields","field","ohlcvApi","calculateMFI","typicalPrice","rawMoneyFlow","positiveMoneyFlow","negativeMoneyFlow","mfi","positiveMFSum","negativeMFSum","validPeriods","moneyFlowRatio","getMFISignal","mfiValue","calculateMFIWithMetadata","mfiValues","latestMFI","avgMFI","maxMFI","minMFI","calculateMFIVolumeProfile","bins","mfiPeriod","mfiAvgMode","mfiResult","validPrices","minPrice","maxPrice","priceRange","binSize","volumeProfile","_","startBin","endBin","candleRange","binsSpanned","binIndex","bin","binLow","binHigh","overlapLow","overlapHigh","overlapRange","volumeAllocation","totalVolume","maxVolumeInBin","pocIndex","maxVolume","poc","targetVolume","valueAreaVolume","valueAreaLow","valueAreaHigh","volumeAbove","volumeBelow","mfiInsights","buyingRatio","sellingRatio","marketSentiment","getMFIVolumeProfileSignals","mfiVolumeProfile","pointOfControl","valueArea","supportLevels","resistanceLevels","confidence","recommendations","pocDistance","inValueArea","binCount","ohlcvData","classes","widthPercent","backgroundColor","rec","corsProxies","timestamp","diffDays","maxLength","article","DateTimeString","z.string","StaleLevel","z.enum","MarketState","PriceType","BriefSource","QualityFlag","ConfidenceLevel","z.union","z.literal","SystemStatusType","JobStatusType","HoldingDataSchema","z.object","z.number","UserSettingsSchema","z.boolean","ImportResultSchema","DiagnosticsDataSchema","DailySnapshotSchema","z.lazy","DailySnapshotSchemaImpl","QuotesSnapshotSchema","QuotesSnapshotSchemaImpl","MetadataSnapshotSchema","MetadataSnapshotSchemaImpl","CacheDataSchema","UserStateSchema","z.array","z.record","QuoteItemSchema","QuotesMetadataSchema","NewsItemSchema","SymbolDataSchema","MarketsIndicatorSchema","MacroDataSchema","GenerationMetadataSchema","SymbolMetadataSchema","ConfidenceDistributionSchema","RefreshMetadataSchema","JobStatusSchema","FreshnessInfoSchema","QuotaInfoSchema","StorageInfoSchema","ApiLimitInfoSchema","SystemHealthSchema","DegradationStatusSchema","SystemStatusSchema","ValidationRulesSchema","MarketsIndicatorDefinitionSchema","ScrapingSettingsSchema","validateData","schema","z.ZodError","validateUserState","validateQuotesSnapshot","validateDailySnapshot","validateMetadataSnapshot","validateSystemStatus","validateImportData","allowedKeys","unknownKeys","_StateManager","migrated","validation","state","jsonData","dryRun","finalValidation","saveResult","newState","currentState","newWatchlist","avgCost","shares","newHoldings","settings","cache","test","__publicField","StateManager","DataFetcher","cacheBustingEnabled","statusResult","cacheBuster","userState","targetDate","asOfString","asOf","ageMinutes","getBaseUrl","hostname","pathname","dataFetcher","DynamicMetadataService","metadata","fallbackData","batchResults","metadataMap","sectorGrouping","distribution","array","dynamicMetadataService","MetadataService","useDynamic","defaultMetadata","fetcherError","crmData","metadataService","DirectMetadataLoader","symbolData","directMetadataLoader","MarketRegimeWidget","TradingStrategyWidget","MFIVolumeProfilePanel","TradingViewCompanyProfile","TradingViewFundamentalData","StockNews","StockDetailSkeleton","_component_StockDetailSkeleton","_component_MarketRegimeWidget","_component_TradingStrategyWidget","_component_MFIVolumeProfilePanel","_component_StockNews","_component_TradingViewFundamentalData","_component_TradingViewCompanyProfile","TradingViewTopStories","TopStoriesSkeleton","_component_TopStoriesSkeleton","_component_TradingViewTopStories","dailyConfig","weeklyConfig","StockMarketInsight","StockMarketInsightSkeleton","_component_StockMarketInsightSkeleton","_component_StockMarketInsight","dateString","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_53","_withKeys","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_54","comp","working","current","testUrl","closes","chartUrl","chartResponse","dataPoints","quoteUrl","quoteResponse","profile","testSymbols","maxAge","bytes","sizes","_vModelCheckbox","message","level","log","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60","_hoisted_61","_hoisted_62","_hoisted_63","_hoisted_64","_hoisted_65","_hoisted_67","_hoisted_68","_hoisted_69","_hoisted_72","_hoisted_73","_hoisted_74","_hoisted_75","_hoisted_76","_hoisted_78","_hoisted_79","_hoisted_80","_hoisted_81","_hoisted_82","_hoisted_83","_hoisted_84","_hoisted_85","_hoisted_66","_hoisted_70","_hoisted_71","_hoisted_77","dataSourceHealth","schedulerHealth","type","healthScore","age","hours","minutes","_vModelSelect","routes","MarketDashboard","StockDashboard","StockDetail","Settings","TopStoriesTest","StockMarketInsightTest","YahooFinanceTest","ProxyDiagnosticTest","TechnicalIndicatorsValidation","MetadataServiceTest","TechnicalIndicatorsManager","AutoUpdateMonitor","SystemManager","router","createRouter","createWebHashHistory","app","createApp","App"],"ignoreList":[],"sources":["../../src/components/Layout.vue","../../src/App.vue","../../src/utils/widgetPreloader.js","../../src/utils/performanceMonitor.js","../../src/utils/performanceCache.js","../../src/utils/autoUpdateScheduler.js","../../src/utils/precomputedIndicatorsApi.js","../../src/utils/technicalIndicatorsCache.js","../../src/utils/technicalIndicatorsCore.js","../../src/utils/yahooFinanceApi.js","../../src/utils/hybridTechnicalIndicatorsApi.js","../../src/utils/cacheWarmupService.js","../../src/utils/widgetLoadManager.js","../../src/components/LazyTradingViewWidget.vue","../../src/components/VixWidget.vue","../../src/components/ZeiiermanFearGreedGauge.vue","../../src/components/MarketOverviewSkeleton.vue","../../src/pages/MarketDashboard.vue","../../src/utils/stocksConfigService.js","../../src/utils/widgetCache.js","../../src/components/FastTradingViewWidget.vue","../../src/components/TechnicalAnalysisWidget.vue","../../src/components/TechnicalIndicators.vue","../../src/components/StockCard.vue","../../src/components/TOCTree.vue","../../src/components/NavigationPanel.vue","../../src/services/NavigationService.js","../../src/services/ScrollSpyService.js","../../src/components/StockOverview.vue","../../src/components/PerformanceMonitor.vue","../../src/pages/StockDashboard.vue","../../src/pages/Settings.vue","../../src/components/MarketRegimeWidget.vue","../../src/components/TradingStrategyWidget.vue","../../src/utils/baseUrl.js","../../src/services/ohlcvApi.js","../../src/utils/mfi.js","../../src/utils/mfiVolumeProfile.js","../../src/components/MFIVolumeProfilePanel.vue","../../src/components/TradingViewCompanyProfile.vue","../../src/components/TradingViewFundamentalData.vue","../../src/components/StockNews.vue","../../src/components/StockDetailSkeleton.vue","../../src/utils/validation.ts","../../src/utils/state-manager.ts","../../src/lib/fetcher.ts","../../src/utils/dynamicMetadataService.js","../../src/utils/metadataService.js","../../src/utils/directMetadataLoader.js","../../src/pages/StockDetail.vue","../../src/components/TradingViewTopStories.vue","../../src/components/TopStoriesSkeleton.vue","../../src/pages/TopStoriesTest.vue","../../src/components/StockMarketInsight.vue","../../src/components/StockMarketInsightSkeleton.vue","../../src/pages/StockMarketInsightTest.vue","../../src/pages/YahooFinanceTest.vue","../../src/pages/TechnicalIndicatorsValidation.vue","../../src/pages/MetadataServiceTest.vue","../../src/pages/ProxyDiagnosticTest.vue","../../src/pages/TechnicalIndicatorsManager.vue","../../src/pages/AutoUpdateMonitor.vue","../../src/pages/SystemManager.vue","../../src/main.js"],"sourcesContent":["<template>\r\n  <div class=\"layout\">\r\n    <header class=\"header\">\r\n      <nav class=\"nav\">\r\n        <div class=\"container\">\r\n          <div class=\"nav-brand\">\r\n            <h1>Investment Dashboard</h1>\r\n          </div>\r\n          <ul class=\"nav-list\">\r\n            <li>\r\n              <router-link to=\"/market-overview\" class=\"nav-link\">Market Overview</router-link>\r\n            </li>\r\n            <li>\r\n              <router-link to=\"/stock-overview\" class=\"nav-link\">Stock Overview</router-link>\r\n            </li>\r\n            <!-- Settings temporarily hidden -->\r\n            <!-- <li>\r\n              <router-link to=\"/settings\" class=\"nav-link\">Settings</router-link>\r\n            </li> -->\r\n            <li>\r\n              <router-link to=\"/system-manager\" class=\"nav-link\">Control Panel</router-link>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </nav>\r\n    </header>\r\n\r\n    <main class=\"main-content\">\r\n      <div class=\"container\">\r\n        <slot />\r\n      </div>\r\n    </main>\r\n\r\n    <footer class=\"footer\">\r\n      <div class=\"container\">\r\n        <div class=\"footer-content\">\r\n          <span class=\"copyright\">&copy; 2025 Investment Dashboard POC</span>\r\n          <span class=\"separator\"></span>\r\n          <span class=\"attribution\">\r\n            Market data powered by \r\n            <a href=\"https://www.tradingview.com/\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"tradingview-link\">\r\n              TradingView\r\n            </a>\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </footer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'Layout'\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.layout {\r\n  min-height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.header {\r\n  flex-shrink: 0;\r\n  position: sticky;\r\n  top: 0;\r\n  z-index: 1000;\r\n  background: white;\r\n  border-bottom: 1px solid #e9ecef;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.nav-brand h1 {\r\n  color: #007bff;\r\n  font-size: 1.5rem;\r\n  margin-bottom: 0;\r\n}\r\n\r\n.nav .container {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.main-content {\r\n  flex: 1;\r\n  padding-top: 1rem;\r\n}\r\n\r\n.footer {\r\n  flex-shrink: 0;\r\n  background: #f8f9fa;\r\n  padding: 0.75rem 0;\r\n  margin-top: 2rem;\r\n  border-top: 1px solid #e9ecef;\r\n}\r\n\r\n.footer-content {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  gap: 0.75rem;\r\n  font-size: 0.875rem;\r\n  color: #6c757d;\r\n}\r\n\r\n.copyright {\r\n  font-weight: 500;\r\n}\r\n\r\n.separator {\r\n  color: #dee2e6;\r\n  font-weight: bold;\r\n}\r\n\r\n.attribution {\r\n  color: #6c757d;\r\n}\r\n\r\n.tradingview-link {\r\n  color: #007bff;\r\n  text-decoration: none;\r\n  font-weight: 500;\r\n  transition: color 0.2s ease;\r\n}\r\n\r\n.tradingview-link:hover {\r\n  color: #0056b3;\r\n  text-decoration: underline;\r\n}\r\n\r\n/*  */\r\n@media (max-width: 768px) {\r\n  .footer-content {\r\n    flex-direction: column;\r\n    gap: 0.25rem;\r\n    text-align: center;\r\n  }\r\n  \r\n  .separator {\r\n    display: none;\r\n  }\r\n}\r\n\r\n/* Navigation styling */\r\n.nav-list {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  list-style: none;\r\n  margin: 0;\r\n  padding: 0;\r\n  gap: 1rem;\r\n}\r\n\r\n.nav-list li {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.nav-link {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 0.5rem 1rem;\r\n  text-decoration: none;\r\n  color: #495057;\r\n  font-weight: 500;\r\n  border-radius: 6px;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.nav-link:hover {\r\n  background-color: #e9ecef;\r\n  color: #007bff;\r\n}\r\n\r\n.nav-link.router-link-active {\r\n  background-color: #007bff;\r\n  color: white;\r\n}\r\n</style>\r\n","<template>\r\n  <div id=\"app\">\r\n    <Layout>\r\n      <router-view v-slot=\"{ Component, route }\">\r\n        <component :is=\"Component\" :key=\"route.path\" />\r\n      </router-view>\r\n    </Layout>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Layout from './components/Layout.vue'\r\n\r\nexport default {\r\n  name: 'App',\r\n  components: {\r\n    Layout\r\n  }\r\n}\r\n</script>\r\n","/**\r\n * TradingView Widget \r\n *  TradingView \r\n */\r\n\r\nclass WidgetPreloader {\r\n  constructor() {\r\n    this.preloadedScripts = new Set()\r\n    this.scriptPromises = new Map()\r\n  }\r\n\r\n  /**\r\n   *  TradingView \r\n   */\r\n  preloadScript(scriptUrl) {\r\n    if (this.preloadedScripts.has(scriptUrl)) {\r\n      return Promise.resolve()\r\n    }\r\n\r\n    if (this.scriptPromises.has(scriptUrl)) {\r\n      return this.scriptPromises.get(scriptUrl)\r\n    }\r\n\r\n    const promise = new Promise((resolve, reject) => {\r\n      const link = document.createElement('link')\r\n      link.rel = 'preload'\r\n      link.as = 'script'\r\n      link.href = scriptUrl\r\n      link.crossOrigin = 'anonymous'\r\n      \r\n      link.onload = () => {\r\n        this.preloadedScripts.add(scriptUrl)\r\n        resolve()\r\n      }\r\n      \r\n      link.onerror = () => {\r\n        reject(new Error(`Failed to preload script: ${scriptUrl}`))\r\n      }\r\n      \r\n      document.head.appendChild(link)\r\n    })\r\n\r\n    this.scriptPromises.set(scriptUrl, promise)\r\n    return promise\r\n  }\r\n\r\n  /**\r\n   *  TradingView \r\n   */\r\n  async preloadAllScripts() {\r\n    const scripts = [\r\n      'https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js',\r\n      'https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js'\r\n    ]\r\n\r\n    try {\r\n      await Promise.all(scripts.map(script => this.preloadScript(script)))\r\n      console.log('All TradingView scripts preloaded successfully')\r\n    } catch (error) {\r\n      console.warn('Some TradingView scripts failed to preload:', error)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  isPreloaded(scriptUrl) {\r\n    return this.preloadedScripts.has(scriptUrl)\r\n  }\r\n}\r\n\r\n// \r\nexport const widgetPreloader = new WidgetPreloader()\r\n\r\n// \r\nif (typeof window !== 'undefined') {\r\n  window.addEventListener('load', () => {\r\n    //  1 \r\n    setTimeout(() => {\r\n      widgetPreloader.preloadAllScripts()\r\n    }, 1000)\r\n  })\r\n}\r\n\r\nexport default widgetPreloader","// \r\n//  API \r\n\r\nclass PerformanceMonitor {\r\n  constructor() {\r\n    this.metrics = new Map()\r\n    this.startTimes = new Map()\r\n  }\r\n\r\n  // \r\n  start(label) {\r\n    this.startTimes.set(label, performance.now())\r\n    console.log(` Started timing: ${label}`)\r\n  }\r\n\r\n  // \r\n  end(label) {\r\n    const startTime = this.startTimes.get(label)\r\n    if (!startTime) {\r\n      console.warn(`No start time found for: ${label}`)\r\n      return null\r\n    }\r\n\r\n    const duration = performance.now() - startTime\r\n    this.metrics.set(label, duration)\r\n    this.startTimes.delete(label)\r\n\r\n    console.log(` Completed: ${label} - ${duration.toFixed(2)}ms`)\r\n    return duration\r\n  }\r\n\r\n  // \r\n  getMetric(label) {\r\n    return this.metrics.get(label)\r\n  }\r\n\r\n  // \r\n  getAllMetrics() {\r\n    return Object.fromEntries(this.metrics)\r\n  }\r\n\r\n  // \r\n  clear() {\r\n    this.metrics.clear()\r\n    this.startTimes.clear()\r\n  }\r\n\r\n  //  API \r\n  async measureAsync(label, asyncFunction) {\r\n    this.start(label)\r\n    try {\r\n      const result = await asyncFunction()\r\n      this.end(label)\r\n      return result\r\n    } catch (error) {\r\n      this.end(label)\r\n      console.error(` Error in ${label}:`, error)\r\n      throw error\r\n    }\r\n  }\r\n\r\n  // \r\n  generateReport() {\r\n    const metrics = this.getAllMetrics()\r\n    const report = {\r\n      timestamp: new Date().toISOString(),\r\n      metrics,\r\n      summary: {\r\n        totalOperations: Object.keys(metrics).length,\r\n        totalTime: Object.values(metrics).reduce((sum, time) => sum + time, 0),\r\n        averageTime: Object.values(metrics).reduce((sum, time) => sum + time, 0) / Object.keys(metrics).length || 0,\r\n        slowestOperation: this.getSlowestOperation(),\r\n        fastestOperation: this.getFastestOperation()\r\n      }\r\n    }\r\n\r\n    console.log(' Performance Report:', report)\r\n    return report\r\n  }\r\n\r\n  // \r\n  getSlowestOperation() {\r\n    let slowest = { name: null, time: 0 }\r\n    for (const [name, time] of this.metrics) {\r\n      if (time > slowest.time) {\r\n        slowest = { name, time }\r\n      }\r\n    }\r\n    return slowest\r\n  }\r\n\r\n  // \r\n  getFastestOperation() {\r\n    let fastest = { name: null, time: Infinity }\r\n    for (const [name, time] of this.metrics) {\r\n      if (time < fastest.time) {\r\n        fastest = { name, time }\r\n      }\r\n    }\r\n    return fastest.time === Infinity ? { name: null, time: 0 } : fastest\r\n  }\r\n\r\n  // \r\n  checkPerformanceWarnings() {\r\n    const warnings = []\r\n    const metrics = this.getAllMetrics()\r\n\r\n    // \r\n    Object.entries(metrics).forEach(([name, time]) => {\r\n      if (time > 5000) { // 5 seconds\r\n        warnings.push({\r\n          type: 'SLOW_OPERATION',\r\n          operation: name,\r\n          time: time,\r\n          message: `Operation \"${name}\" took ${time.toFixed(2)}ms (>5s)`\r\n        })\r\n      }\r\n    })\r\n\r\n    // \r\n    const totalTime = Object.values(metrics).reduce((sum, time) => sum + time, 0)\r\n    if (totalTime > 10000) { // 10 seconds\r\n      warnings.push({\r\n        type: 'SLOW_TOTAL_LOAD',\r\n        time: totalTime,\r\n        message: `Total load time ${totalTime.toFixed(2)}ms (>10s)`\r\n      })\r\n    }\r\n\r\n    if (warnings.length > 0) {\r\n      console.warn(' Performance Warnings:', warnings)\r\n    }\r\n\r\n    return warnings\r\n  }\r\n}\r\n\r\n// \r\nexport const performanceMonitor = new PerformanceMonitor()\r\n\r\n// \r\nexport const PERFORMANCE_LABELS = {\r\n  STOCK_OVERVIEW_LOAD: 'stock_overview_total_load',\r\n  QUOTES_FETCH: 'quotes_fetch',\r\n  DAILY_DATA_FETCH: 'daily_data_fetch',\r\n  METADATA_FETCH: 'metadata_fetch',\r\n  SYMBOLS_CONFIG_LOAD: 'symbols_config_load',\r\n  SKELETON_DISPLAY: 'skeleton_display_time',\r\n  FIRST_CONTENT_PAINT: 'first_content_paint',\r\n  MARKET_DASHBOARD_LOAD: 'market_dashboard_load',\r\n  STOCK_DETAIL_LOAD: 'stock_detail_load'\r\n}\r\n\r\n// \r\nexport function withPerformanceMonitoring(label) {\r\n  return function(target, propertyName, descriptor) {\r\n    const method = descriptor.value\r\n    descriptor.value = async function(...args) {\r\n      return await performanceMonitor.measureAsync(label, () => method.apply(this, args))\r\n    }\r\n    return descriptor\r\n  }\r\n}","// \r\n// \r\n\r\nclass PerformanceCache {\r\n  constructor() {\r\n    this.memoryCache = new Map()\r\n    this.localStoragePrefix = 'investment_dashboard_cache_'\r\n    this.defaultTTL = 24 * 60 * 60 * 1000 // 24 hours\r\n  }\r\n\r\n  // \r\n  set(key, data, ttl = this.defaultTTL) {\r\n    const cacheItem = {\r\n      data,\r\n      timestamp: Date.now(),\r\n      ttl\r\n    }\r\n\r\n    // \r\n    this.memoryCache.set(key, cacheItem)\r\n\r\n    // \r\n    try {\r\n      localStorage.setItem(\r\n        this.localStoragePrefix + key,\r\n        JSON.stringify(cacheItem)\r\n      )\r\n    } catch (error) {\r\n      console.warn('Failed to save to localStorage:', error)\r\n    }\r\n  }\r\n\r\n  // \r\n  get(key) {\r\n    // \r\n    if (this.memoryCache.has(key)) {\r\n      const item = this.memoryCache.get(key)\r\n      if (this.isValid(item)) {\r\n        return item.data\r\n      } else {\r\n        this.memoryCache.delete(key)\r\n      }\r\n    }\r\n\r\n    // \r\n    try {\r\n      const stored = localStorage.getItem(this.localStoragePrefix + key)\r\n      if (stored) {\r\n        const item = JSON.parse(stored)\r\n        if (this.isValid(item)) {\r\n          // \r\n          this.memoryCache.set(key, item)\r\n          return item.data\r\n        } else {\r\n          localStorage.removeItem(this.localStoragePrefix + key)\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.warn('Failed to read from localStorage:', error)\r\n    }\r\n\r\n    return null\r\n  }\r\n\r\n  // \r\n  isValid(item) {\r\n    if (!item || !item.timestamp) return false\r\n    return Date.now() - item.timestamp < item.ttl\r\n  }\r\n\r\n  // \r\n  has(key) {\r\n    return this.get(key) !== null\r\n  }\r\n\r\n  // \r\n  delete(key) {\r\n    this.memoryCache.delete(key)\r\n    try {\r\n      localStorage.removeItem(this.localStoragePrefix + key)\r\n    } catch (error) {\r\n      console.warn('Failed to remove from localStorage:', error)\r\n    }\r\n  }\r\n\r\n  // \r\n  clear() {\r\n    this.memoryCache.clear()\r\n    try {\r\n      const keys = Object.keys(localStorage)\r\n      keys.forEach(key => {\r\n        if (key.startsWith(this.localStoragePrefix)) {\r\n          localStorage.removeItem(key)\r\n        }\r\n      })\r\n    } catch (error) {\r\n      console.warn('Failed to clear localStorage:', error)\r\n    }\r\n  }\r\n\r\n  // \r\n  getStats() {\r\n    const memorySize = this.memoryCache.size\r\n    let localStorageSize = 0\r\n    \r\n    try {\r\n      const keys = Object.keys(localStorage)\r\n      localStorageSize = keys.filter(key => \r\n        key.startsWith(this.localStoragePrefix)\r\n      ).length\r\n    } catch (error) {\r\n      console.warn('Failed to get localStorage stats:', error)\r\n    }\r\n\r\n    return {\r\n      memoryCache: memorySize,\r\n      localStorage: localStorageSize,\r\n      totalSize: memorySize + localStorageSize\r\n    }\r\n  }\r\n\r\n  // \r\n  async preload(key, dataLoader, ttl = this.defaultTTL) {\r\n    if (this.has(key)) {\r\n      return this.get(key)\r\n    }\r\n\r\n    try {\r\n      const data = await dataLoader()\r\n      this.set(key, data, ttl)\r\n      return data\r\n    } catch (error) {\r\n      console.error(`Failed to preload data for key ${key}:`, error)\r\n      throw error\r\n    }\r\n  }\r\n\r\n  // \r\n  async batchPreload(items) {\r\n    const results = new Map()\r\n    const promises = items.map(async ({ key, loader, ttl }) => {\r\n      try {\r\n        const data = await this.preload(key, loader, ttl)\r\n        results.set(key, data)\r\n      } catch (error) {\r\n        console.error(`Failed to preload ${key}:`, error)\r\n        results.set(key, null)\r\n      }\r\n    })\r\n\r\n    await Promise.all(promises)\r\n    return results\r\n  }\r\n}\r\n\r\n// \r\nexport const performanceCache = new PerformanceCache()\r\n\r\n// \r\nexport const CACHE_KEYS = {\r\n  QUOTES_SNAPSHOT: 'quotes_snapshot',\r\n  DAILY_SNAPSHOT: 'daily_snapshot',\r\n  METADATA_BATCH: 'metadata_batch',\r\n  SYMBOLS_CONFIG: 'symbols_config',\r\n  STOCK_OVERVIEW_DATA: 'stock_overview_data'\r\n}\r\n\r\n//  TTL \r\n//  TradingView Widget Yahoo Finance API \r\nexport const CACHE_TTL = {\r\n  QUOTES: 24 * 60 * 60 * 1000,     // 24 hours -  ()\r\n  DAILY_DATA: 24 * 60 * 60 * 1000, // 24 hours -  ()\r\n  METADATA: 24 * 60 * 60 * 1000,   // 24 hours - \r\n  CONFIG: 60 * 60 * 1000,          // 1 hour - \r\n  TECHNICAL_INDICATORS: 24 * 60 * 60 * 1000 // 24 hours - \r\n}","// \r\n// \r\n\r\nimport { performanceMonitor } from './performanceMonitor.js'\r\nimport { performanceCache, CACHE_KEYS } from './performanceCache.js'\r\n\r\nclass AutoUpdateScheduler {\r\n  constructor() {\r\n    this.updateIntervals = new Map()\r\n    this.isRunning = false\r\n    this.config = {\r\n      //  - \r\n      technicalIndicators: {\r\n        enabled: true,\r\n        interval: 24 * 60 * 60 * 1000, // 24  ()\r\n        retryAttempts: 3,\r\n        retryDelay: 5 * 60 * 1000 // 5 \r\n      },\r\n      //  - \r\n      metadata: {\r\n        enabled: true,\r\n        interval: 24 * 60 * 60 * 1000, // 24  ()\r\n        retryAttempts: 2,\r\n        retryDelay: 30 * 60 * 1000 // 30 \r\n      },\r\n      // \r\n      cacheCleanup: {\r\n        enabled: true,\r\n        interval: 6 * 60 * 60 * 1000, // 6 \r\n        maxAge: 7 * 24 * 60 * 60 * 1000 // 7 \r\n      }\r\n    }\r\n  }\r\n\r\n  // \r\n  start() {\r\n    if (this.isRunning) {\r\n      console.log(' Auto update scheduler is already running')\r\n      return\r\n    }\r\n\r\n    console.log(' Starting auto update scheduler...')\r\n    this.isRunning = true\r\n\r\n    // \r\n    this.performInitialUpdate()\r\n\r\n    // \r\n    this.scheduleUpdates()\r\n\r\n    console.log(' Auto update scheduler started successfully')\r\n  }\r\n\r\n  // \r\n  stop() {\r\n    if (!this.isRunning) {\r\n      console.log(' Auto update scheduler is not running')\r\n      return\r\n    }\r\n\r\n    console.log(' Stopping auto update scheduler...')\r\n    \r\n    // \r\n    for (const [name, intervalId] of this.updateIntervals) {\r\n      clearInterval(intervalId)\r\n      console.log(`   Cleared interval: ${name}`)\r\n    }\r\n    \r\n    this.updateIntervals.clear()\r\n    this.isRunning = false\r\n    \r\n    console.log(' Auto update scheduler stopped')\r\n  }\r\n\r\n  // \r\n  async performInitialUpdate() {\r\n    console.log(' Performing initial update check...')\r\n    \r\n    try {\r\n      // \r\n      if (this.config.technicalIndicators.enabled) {\r\n        await this.checkAndUpdateTechnicalIndicators()\r\n      }\r\n\r\n      // \r\n      if (this.config.metadata.enabled) {\r\n        await this.checkAndUpdateMetadata()\r\n      }\r\n\r\n      // \r\n      if (this.config.cacheCleanup.enabled) {\r\n        await this.performCacheCleanup()\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error(' Initial update failed:', error)\r\n    }\r\n  }\r\n\r\n  // \r\n  scheduleUpdates() {\r\n    // \r\n    if (this.config.technicalIndicators.enabled) {\r\n      const technicalInterval = setInterval(\r\n        () => this.checkAndUpdateTechnicalIndicators(),\r\n        this.config.technicalIndicators.interval\r\n      )\r\n      this.updateIntervals.set('technicalIndicators', technicalInterval)\r\n      console.log(` Scheduled technical indicators update every ${this.config.technicalIndicators.interval / 60000} minutes`)\r\n    }\r\n\r\n    // \r\n    if (this.config.metadata.enabled) {\r\n      const metadataInterval = setInterval(\r\n        () => this.checkAndUpdateMetadata(),\r\n        this.config.metadata.interval\r\n      )\r\n      this.updateIntervals.set('metadata', metadataInterval)\r\n      console.log(` Scheduled metadata update every ${this.config.metadata.interval / 3600000} hours`)\r\n    }\r\n\r\n    // \r\n    if (this.config.cacheCleanup.enabled) {\r\n      const cleanupInterval = setInterval(\r\n        () => this.performCacheCleanup(),\r\n        this.config.cacheCleanup.interval\r\n      )\r\n      this.updateIntervals.set('cacheCleanup', cleanupInterval)\r\n      console.log(` Scheduled cache cleanup every ${this.config.cacheCleanup.interval / 3600000} hours`)\r\n    }\r\n  }\r\n\r\n  //  ()\r\n  async checkAndUpdateTechnicalIndicators() {\r\n    const label = 'auto_update_technical_indicators'\r\n    performanceMonitor.start(label)\r\n\r\n    try {\r\n      console.log(' Checking technical indicators update...')\r\n\r\n      // \r\n      const { dataVersionService } = await import('./dataVersionService.js');\r\n      const versionChanged = await dataVersionService.checkDataVersionAndRefresh();\r\n      \r\n      if (versionChanged) {\r\n        console.log(' Data version changed - technical indicators refreshed automatically')\r\n        return\r\n      } else {\r\n        console.log(' Technical indicators are up to date (version unchanged)')\r\n        return\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error(' Technical indicators version check failed:', error)\r\n      \r\n      //  - \r\n      try {\r\n        const needsUpdate = await this.checkTechnicalIndicatorsAge()\r\n        if (needsUpdate) {\r\n          console.log(' Fallback: Clearing cache due to data age')\r\n          this.clearTechnicalIndicatorsCache()\r\n        }\r\n      } catch (fallbackError) {\r\n        console.error(' Fallback check also failed:', fallbackError)\r\n      }\r\n      \r\n    } finally {\r\n      performanceMonitor.end(label)\r\n    }\r\n  }\r\n\r\n  //  ()\r\n  async checkAndUpdateMetadata() {\r\n    const label = 'auto_update_metadata'\r\n    performanceMonitor.start(label)\r\n\r\n    try {\r\n      console.log(' Checking metadata update...')\r\n\r\n      // \r\n      const { dataVersionService } = await import('./dataVersionService.js');\r\n      const versionChanged = await dataVersionService.checkDataVersionAndRefresh();\r\n      \r\n      if (versionChanged) {\r\n        console.log(' Data version changed - metadata refreshed automatically')\r\n        return\r\n      } else {\r\n        console.log(' Metadata is up to date (version unchanged)')\r\n        return\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error(' Metadata version check failed:', error)\r\n      \r\n      // \r\n      try {\r\n        const needsUpdate = await this.checkMetadataAge()\r\n        if (needsUpdate) {\r\n          console.log(' Fallback: Clearing metadata cache due to age')\r\n          this.clearMetadataCache()\r\n        }\r\n      } catch (fallbackError) {\r\n        console.error(' Metadata fallback check failed:', fallbackError)\r\n      }\r\n      \r\n    } finally {\r\n      performanceMonitor.end(label)\r\n    }\r\n  }\r\n\r\n  // \r\n  async checkTechnicalIndicatorsAge() {\r\n    try {\r\n      // \r\n      const { paths } = await import('./baseUrl.js');\r\n      const response = await fetch(paths.technicalIndicatorsIndex())\r\n      if (!response.ok) {\r\n        console.log(' No precomputed data found, update needed')\r\n        return true\r\n      }\r\n\r\n      const index = await response.json()\r\n      const lastUpdate = new Date(index.generatedAt)\r\n      const now = new Date()\r\n      const ageHours = (now - lastUpdate) / (1000 * 60 * 60)\r\n\r\n      console.log(` Technical indicators age: ${ageHours.toFixed(1)} hours`)\r\n      \r\n      //  24 \r\n      return ageHours > 24\r\n\r\n    } catch (error) {\r\n      console.error('Error checking technical indicators age:', error)\r\n      return true // \r\n    }\r\n  }\r\n\r\n  // \r\n  async checkMetadataAge() {\r\n    try {\r\n      // \r\n      // \r\n      const cachedMetadata = performanceCache.get(CACHE_KEYS.METADATA_BATCH)\r\n      if (!cachedMetadata) {\r\n        return true // \r\n      }\r\n\r\n      // \r\n      const cacheAge = Date.now() - cachedMetadata.timestamp\r\n      const ageHours = cacheAge / (1000 * 60 * 60)\r\n\r\n      console.log(` Metadata cache age: ${ageHours.toFixed(1)} hours`)\r\n      \r\n      //  24 \r\n      return ageHours > 24\r\n\r\n    } catch (error) {\r\n      console.error('Error checking metadata age:', error)\r\n      return true\r\n    }\r\n  }\r\n\r\n  // \r\n  async updateTechnicalIndicatorsData() {\r\n    //  Node.js \r\n    //  API \r\n    console.log(' Technical indicators update requested')\r\n    console.log(' Note: Actual precomputation requires server-side execution')\r\n    \r\n    // \r\n    // 1. \r\n    // 2.  API \r\n    // 3. \r\n    \r\n    try {\r\n      // \r\n      this.clearTechnicalIndicatorsCache()\r\n      \r\n      // \r\n      console.log(' Technical indicators cache cleared, data will be refreshed on next load')\r\n      \r\n    } catch (error) {\r\n      console.error('Failed to update technical indicators:', error)\r\n      throw error\r\n    }\r\n  }\r\n\r\n  // \r\n  async updateMetadataData() {\r\n    // \r\n    // \r\n    performanceCache.delete(CACHE_KEYS.METADATA_BATCH)\r\n    console.log(' Cleared metadata cache to force refresh')\r\n  }\r\n\r\n  // \r\n  clearTechnicalIndicatorsCache() {\r\n    try {\r\n      //  localStorage \r\n      const keysToRemove = []\r\n      for (let i = 0; i < localStorage.length; i++) {\r\n        const key = localStorage.key(i)\r\n        if (key && (\r\n          key.includes('technical_indicators_') || \r\n          key.includes('precomputed_') ||\r\n          key.includes('TECHNICAL_INDICATORS') ||\r\n          key.includes('hybrid_technical_')\r\n        )) {\r\n          keysToRemove.push(key)\r\n        }\r\n      }\r\n      \r\n      keysToRemove.forEach(key => {\r\n        localStorage.removeItem(key)\r\n        console.log(` Cleared cache key: ${key}`)\r\n      })\r\n      \r\n      // \r\n      if (typeof performanceCache !== 'undefined' && performanceCache.clear) {\r\n        // \r\n        console.log(' Cleared performance cache items')\r\n      }\r\n      \r\n      console.log(` Cleared ${keysToRemove.length} technical indicators cache entries`)\r\n      \r\n    } catch (error) {\r\n      console.error('Error clearing technical indicators cache:', error)\r\n    }\r\n  }\r\n\r\n  // \r\n  clearMetadataCache() {\r\n    performanceCache.delete(CACHE_KEYS.METADATA_BATCH)\r\n    performanceCache.delete(CACHE_KEYS.STOCK_OVERVIEW_DATA)\r\n    console.log(' Cleared metadata and stock overview cache')\r\n  }\r\n\r\n  // \r\n  async performCacheCleanup() {\r\n    console.log(' Performing cache cleanup...')\r\n    \r\n    try {\r\n      const stats = performanceCache.getStats()\r\n      console.log(' Cache stats before cleanup:', stats)\r\n      \r\n      // \r\n      // \r\n      \r\n      const statsAfter = performanceCache.getStats()\r\n      console.log(' Cache stats after cleanup:', statsAfter)\r\n      \r\n      console.log(' Cache cleanup completed')\r\n      \r\n    } catch (error) {\r\n      console.error(' Cache cleanup failed:', error)\r\n    }\r\n  }\r\n\r\n  // \r\n  async retryUpdate(updateType, originalError) {\r\n    const config = this.config[updateType]\r\n    if (!config || !config.retryAttempts) {\r\n      return\r\n    }\r\n\r\n    console.log(` Retrying ${updateType} update in ${config.retryDelay / 60000} minutes...`)\r\n    \r\n    setTimeout(async () => {\r\n      try {\r\n        if (updateType === 'technicalIndicators') {\r\n          await this.checkAndUpdateTechnicalIndicators()\r\n        } else if (updateType === 'metadata') {\r\n          await this.checkAndUpdateMetadata()\r\n        }\r\n      } catch (retryError) {\r\n        console.error(` Retry failed for ${updateType}:`, retryError)\r\n      }\r\n    }, config.retryDelay)\r\n  }\r\n\r\n  // \r\n  getStatus() {\r\n    return {\r\n      isRunning: this.isRunning,\r\n      activeIntervals: Array.from(this.updateIntervals.keys()),\r\n      config: this.config,\r\n      nextUpdates: this.getNextUpdateTimes()\r\n    }\r\n  }\r\n\r\n  // \r\n  getNextUpdateTimes() {\r\n    const now = Date.now()\r\n    return {\r\n      technicalIndicators: new Date(now + this.config.technicalIndicators.interval),\r\n      metadata: new Date(now + this.config.metadata.interval),\r\n      cacheCleanup: new Date(now + this.config.cacheCleanup.interval)\r\n    }\r\n  }\r\n\r\n  // \r\n  async triggerManualUpdate(updateType = 'all') {\r\n    console.log(` Manual update triggered: ${updateType}`)\r\n    \r\n    try {\r\n      if (updateType === 'all' || updateType === 'technicalIndicators') {\r\n        await this.checkAndUpdateTechnicalIndicators()\r\n      }\r\n      \r\n      if (updateType === 'all' || updateType === 'metadata') {\r\n        await this.checkAndUpdateMetadata()\r\n      }\r\n      \r\n      if (updateType === 'all' || updateType === 'cache') {\r\n        await this.performCacheCleanup()\r\n      }\r\n      \r\n      console.log(' Manual update completed')\r\n      \r\n    } catch (error) {\r\n      console.error(' Manual update failed:', error)\r\n      throw error\r\n    }\r\n  }\r\n}\r\n\r\n// \r\nexport const autoUpdateScheduler = new AutoUpdateScheduler()\r\n\r\n//  ()\r\nif (typeof window !== 'undefined' && window.location.hostname !== 'localhost') {\r\n  // \r\n  setTimeout(() => {\r\n    autoUpdateScheduler.start()\r\n  }, 30000) // 30 \r\n}","//  API\r\n// \r\n\r\nclass PrecomputedIndicatorsAPI {\r\n  constructor() {\r\n    // \r\n    this.baseUrl = this.getCorrectBaseUrl();\r\n    this.cache = new Map();\r\n    this.cacheTimeout = 60 * 60 * 1000; // 1 ()\r\n    \r\n    //  -  latest_index.json\r\n    this.indexCache = null;\r\n    this.indexCacheTimestamp = null;\r\n    this.indexCacheTimeout = 10 * 60 * 1000; // 10\r\n    \r\n    // \r\n    console.log('PrecomputedIndicatorsAPI initialized:', {\r\n      hostname: window.location.hostname,\r\n      pathname: window.location.pathname,\r\n      baseUrl: this.baseUrl,\r\n      fullUrl: window.location.href\r\n    });\r\n  }\r\n\r\n  //  URL\r\n  getCorrectBaseUrl() {\r\n    //  baseUrl helper\r\n    const base = import.meta.env.BASE_URL || '/';\r\n    return `${base}data/technical-indicators/`;\r\n  }\r\n\r\n  // \r\n  getTodayString() {\r\n    return new Date().toISOString().split('T')[0];\r\n  }\r\n\r\n  // \r\n  async getCachedIndex() {\r\n    // \r\n    if (this.indexCache && this.indexCacheTimestamp && \r\n        (Date.now() - this.indexCacheTimestamp < this.indexCacheTimeout)) {\r\n      console.log(' Using cached index data');\r\n      return this.indexCache;\r\n    }\r\n\r\n    try {\r\n      console.log(' Loading latest_index.json...');\r\n      const indexResponse = await fetch(`${this.baseUrl}latest_index.json`);\r\n      \r\n      if (indexResponse.ok) {\r\n        const index = await indexResponse.json();\r\n        \r\n        // \r\n        this.indexCache = index;\r\n        this.indexCacheTimestamp = Date.now();\r\n        \r\n        console.log(` Loaded latest_index.json: ${index.symbols.length} symbols, date: ${index.date}`);\r\n        return index;\r\n      } else {\r\n        console.warn(' latest_index.json not found, using fallback');\r\n        return null;\r\n      }\r\n    } catch (error) {\r\n      console.error(' Failed to load latest_index.json:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  // \r\n  async getTechnicalIndicators(symbol) {\r\n    const cacheKey = `precomputed_${symbol}`;\r\n    \r\n    // \r\n    if (this.cache.has(cacheKey)) {\r\n      const cached = this.cache.get(cacheKey);\r\n      if (Date.now() - cached.timestamp < this.cacheTimeout) {\r\n        console.log(` Using precomputed cache for ${symbol}`);\r\n        return cached.data;\r\n      }\r\n    }\r\n\r\n    try {\r\n      //  \r\n      // \r\n      const index = await this.getCachedIndex();\r\n      let latestDate = this.getTodayString(); // \r\n      \r\n      if (index) {\r\n        latestDate = index.date; // \r\n        \r\n        //  symbol \r\n        if (!index.symbols.includes(symbol)) {\r\n          throw new Error(`Symbol ${symbol} not found in precomputed data`);\r\n        }\r\n      }\r\n      \r\n      //  URL - \r\n      const dataUrl = `${this.baseUrl}${latestDate}_${symbol}.json`;\r\n      \r\n      console.log(` Fetching precomputed data for ${symbol} from ${dataUrl}`);\r\n      \r\n      const response = await fetch(dataUrl);\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(`Precomputed data not found for ${symbol} (${response.status})`);\r\n      }\r\n      \r\n      const data = await response.json();\r\n      \r\n      //  API\r\n      const indicators = {\r\n        ...data.indicators,\r\n        source: 'Precomputed',\r\n        lastUpdated: data.computedAt,\r\n        dataAge: this.calculateDataAge(data.computedAt),\r\n        precomputedDate: data.date,\r\n        symbol: symbol //  symbol \r\n        \r\n        // yfinance  ...data.indicators \r\n      };\r\n      \r\n      //  yfinance \r\n      console.log(` YFinance data check for ${symbol}:`, {\r\n        hasYFInRaw: !!(data.indicators && data.indicators.yf),\r\n        hasYFInProcessed: !!indicators.yf,\r\n        yfKeys: indicators.yf ? Object.keys(indicators.yf) : 'none',\r\n        rawYF: data.indicators?.yf\r\n      });\r\n      \r\n      // \r\n      this.cache.set(cacheKey, {\r\n        data: indicators,\r\n        timestamp: Date.now()\r\n      });\r\n      \r\n      console.log(` Loaded precomputed data for ${symbol} (date: ${latestDate}, age: ${indicators.dataAge})`);\r\n      return indicators;\r\n      \r\n    } catch (error) {\r\n      console.error(` Failed to load precomputed data for ${symbol}:`, error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  // \r\n  calculateDataAge(computedAt) {\r\n    const now = new Date();\r\n    const computed = new Date(computedAt);\r\n    const diffMs = now - computed;\r\n    const diffHours = Math.floor(diffMs / (1000 * 60 * 60));\r\n    const diffMinutes = Math.floor((diffMs % (1000 * 60 * 60)) / (1000 * 60));\r\n    \r\n    if (diffHours > 0) {\r\n      return `${diffHours}h ${diffMinutes}m ago`;\r\n    } else {\r\n      return `${diffMinutes}m ago`;\r\n    }\r\n  }\r\n\r\n  // \r\n  async getAvailableData() {\r\n    return await this.getCachedIndex();\r\n  }\r\n\r\n  // \r\n  async isPrecomputedDataAvailable(symbol) {\r\n    try {\r\n      const index = await this.getCachedIndex();\r\n      return index && index.symbols.includes(symbol);\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // \r\n  clearCache() {\r\n    this.cache.clear();\r\n    this.indexCache = null;\r\n    this.indexCacheTimestamp = null;\r\n    console.log(' Cleared all precomputed caches');\r\n  }\r\n\r\n  // \r\n  getCacheStats() {\r\n    const stats = {\r\n      size: this.cache.size,\r\n      indexCached: !!this.indexCache,\r\n      indexAge: this.indexCacheTimestamp ? Date.now() - this.indexCacheTimestamp : null,\r\n      items: []\r\n    };\r\n    \r\n    for (const [key, value] of this.cache.entries()) {\r\n      stats.items.push({\r\n        key,\r\n        age: Date.now() - value.timestamp,\r\n        expired: Date.now() - value.timestamp > this.cacheTimeout\r\n      });\r\n    }\r\n    \r\n    return stats;\r\n  }\r\n}\r\n\r\n// \r\nexport const precomputedIndicatorsAPI = new PrecomputedIndicatorsAPI();\r\nexport default precomputedIndicatorsAPI;","// \r\n// \r\n//  latest_index.json timestamp  cache bust\r\n\r\nclass TechnicalIndicatorsCache {\r\n  constructor() {\r\n    this.cachePrefix = 'technical_indicators_';\r\n    this.cacheTimeout = 24 * 60 * 60 * 1000; // 24 \r\n    this.memoryCache = new Map(); // \r\n    this.indexCache = null; // latest_index.json \r\n    this.indexCacheTimestamp = null;\r\n    this.indexCacheTimeout = 5 * 60 * 1000; // 5\r\n  }\r\n\r\n  //  latest_index.json  timestamp\r\n  async getLatestIndexTimestamp() {\r\n    // \r\n    if (this.indexCache && this.indexCacheTimestamp && \r\n        (Date.now() - this.indexCacheTimestamp < this.indexCacheTimeout)) {\r\n      return this.indexCache.generatedAt || this.indexCache.yf_updated;\r\n    }\r\n\r\n    try {\r\n      const baseUrl = import.meta.env.BASE_URL || '/';\r\n      const response = await fetch(`${baseUrl}data/technical-indicators/latest_index.json?t=${Date.now()}`);\r\n      \r\n      if (response.ok) {\r\n        const index = await response.json();\r\n        this.indexCache = index;\r\n        this.indexCacheTimestamp = Date.now();\r\n        \r\n        //  yf_updated generatedAt\r\n        return index.yf_updated || index.generatedAt;\r\n      }\r\n    } catch (error) {\r\n      console.warn('Failed to get latest_index timestamp:', error);\r\n    }\r\n    \r\n    return null;\r\n  }\r\n\r\n  //  timestamp\r\n  async getCacheKey(symbol) {\r\n    const latestTimestamp = await this.getLatestIndexTimestamp();\r\n    if (latestTimestamp) {\r\n      //  timestamp \r\n      const dateKey = new Date(latestTimestamp).toISOString().split('T')[0];\r\n      return `${this.cachePrefix}${symbol}_${dateKey}`;\r\n    } else {\r\n      // \r\n      const today = new Date().toISOString().split('T')[0];\r\n      return `${this.cachePrefix}${symbol}_${today}`;\r\n    }\r\n  }\r\n\r\n  // \r\n  async getTechnicalIndicators(symbol) {\r\n    const cacheKey = await this.getCacheKey(symbol);\r\n    const latestTimestamp = await this.getLatestIndexTimestamp();\r\n    \r\n    // 1. \r\n    if (this.memoryCache.has(cacheKey)) {\r\n      const cached = this.memoryCache.get(cacheKey);\r\n      \r\n      //  latest_index timestamp \r\n      if (latestTimestamp && cached.indexTimestamp !== latestTimestamp) {\r\n        console.log(`Cache invalidated for ${symbol} due to index update`);\r\n        this.memoryCache.delete(cacheKey);\r\n      } else if (Date.now() - cached.timestamp < this.cacheTimeout) {\r\n        console.log(`Using memory cache for ${symbol}`);\r\n        const dataWithSource = { ...cached.data, source: 'Daily Cache (Memory)' };\r\n        return dataWithSource;\r\n      } else {\r\n        this.memoryCache.delete(cacheKey);\r\n      }\r\n    }\r\n\r\n    // 2.  localStorage \r\n    try {\r\n      const cachedData = localStorage.getItem(cacheKey);\r\n      if (cachedData) {\r\n        const parsed = JSON.parse(cachedData);\r\n        \r\n        //  latest_index timestamp \r\n        if (latestTimestamp && parsed.indexTimestamp !== latestTimestamp) {\r\n          console.log(`LocalStorage cache invalidated for ${symbol} due to index update`);\r\n          localStorage.removeItem(cacheKey);\r\n        } else if (Date.now() - parsed.timestamp < this.cacheTimeout) {\r\n          console.log(`Using localStorage cache for ${symbol}`);\r\n          \r\n          // \r\n          this.memoryCache.set(cacheKey, parsed);\r\n          \r\n          const dataWithSource = { ...parsed.data, source: 'Daily Cache (LocalStorage)' };\r\n          return dataWithSource;\r\n        } else {\r\n          localStorage.removeItem(cacheKey);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.warn(`Failed to read cache for ${symbol}:`, error);\r\n    }\r\n\r\n    // 3.  null\r\n    return null;\r\n  }\r\n\r\n  // \r\n  async setTechnicalIndicators(symbol, data) {\r\n    const cacheKey = await this.getCacheKey(symbol);\r\n    const latestTimestamp = await this.getLatestIndexTimestamp();\r\n    \r\n    const cacheData = {\r\n      data: data,\r\n      timestamp: Date.now(),\r\n      symbol: symbol,\r\n      date: new Date().toISOString().split('T')[0],\r\n      indexTimestamp: latestTimestamp //  index timestamp\r\n    };\r\n\r\n    try {\r\n      // 1.  localStorage\r\n      localStorage.setItem(cacheKey, JSON.stringify(cacheData));\r\n      \r\n      // 2. \r\n      this.memoryCache.set(cacheKey, cacheData);\r\n      \r\n      console.log(`Cached technical indicators for ${symbol}`);\r\n      \r\n      // 3. \r\n      this.cleanupOldCache();\r\n      \r\n    } catch (error) {\r\n      console.warn(`Failed to cache technical indicators for ${symbol}:`, error);\r\n    }\r\n  }\r\n\r\n  // \r\n  cleanupOldCache() {\r\n    try {\r\n      const keysToRemove = [];\r\n      \r\n      //  localStorage \r\n      for (let i = 0; i < localStorage.length; i++) {\r\n        const key = localStorage.key(i);\r\n        if (key && key.startsWith(this.cachePrefix)) {\r\n          try {\r\n            const cached = JSON.parse(localStorage.getItem(key));\r\n            if (Date.now() - cached.timestamp > this.cacheTimeout) {\r\n              keysToRemove.push(key);\r\n            }\r\n          } catch (error) {\r\n            // \r\n            keysToRemove.push(key);\r\n          }\r\n        }\r\n      }\r\n      \r\n      // \r\n      keysToRemove.forEach(key => {\r\n        localStorage.removeItem(key);\r\n        console.log(`Removed expired cache: ${key}`);\r\n      });\r\n      \r\n      // \r\n      for (const [key, cached] of this.memoryCache.entries()) {\r\n        if (Date.now() - cached.timestamp > this.cacheTimeout) {\r\n          this.memoryCache.delete(key);\r\n        }\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.warn('Failed to cleanup old cache:', error);\r\n    }\r\n  }\r\n\r\n  // \r\n  async clearSymbolCache(symbol) {\r\n    const cacheKey = await this.getCacheKey(symbol);\r\n    \r\n    //  localStorage\r\n    localStorage.removeItem(cacheKey);\r\n    \r\n    // \r\n    this.memoryCache.delete(cacheKey);\r\n    \r\n    console.log(`Cleared cache for ${symbol}`);\r\n  }\r\n\r\n  // \r\n  clearAllCache() {\r\n    try {\r\n      //  localStorage \r\n      const keysToRemove = [];\r\n      for (let i = 0; i < localStorage.length; i++) {\r\n        const key = localStorage.key(i);\r\n        if (key && key.startsWith(this.cachePrefix)) {\r\n          keysToRemove.push(key);\r\n        }\r\n      }\r\n      \r\n      keysToRemove.forEach(key => localStorage.removeItem(key));\r\n      \r\n      // \r\n      this.memoryCache.clear();\r\n      \r\n      console.log(`Cleared all technical indicators cache (${keysToRemove.length} items)`);\r\n      \r\n    } catch (error) {\r\n      console.warn('Failed to clear all cache:', error);\r\n    }\r\n  }\r\n\r\n  // \r\n  getCacheStats() {\r\n    const stats = {\r\n      memoryCache: this.memoryCache.size,\r\n      localStorageCache: 0,\r\n      totalSize: 0\r\n    };\r\n\r\n    try {\r\n      for (let i = 0; i < localStorage.length; i++) {\r\n        const key = localStorage.key(i);\r\n        if (key && key.startsWith(this.cachePrefix)) {\r\n          stats.localStorageCache++;\r\n          const value = localStorage.getItem(key);\r\n          if (value) {\r\n            stats.totalSize += value.length;\r\n          }\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.warn('Failed to get cache stats:', error);\r\n    }\r\n\r\n    return stats;\r\n  }\r\n}\r\n\r\n// \r\nexport const technicalIndicatorsCache = new TechnicalIndicatorsCache();\r\nexport default technicalIndicatorsCache;","/**\r\n * \r\n *  YAML  indicator_algorithms v2.0.0\r\n * \r\n * :\r\n * - \r\n * -  (period-1)  NaN\r\n * - SMA:  v2.0.0 \r\n * - EMA:  sma_seed  first_value \r\n * -  NaN  (strict, skipna, hold_last )\r\n */\r\n\r\n// =========================\r\n// 0) \r\n// =========================\r\n\r\nconst EPSILON = 1e-12; //  0\r\n\r\n/**\r\n * \r\n */\r\nfunction handleNaN(value) {\r\n  return (value === null || value === undefined || !isFinite(value)) ? NaN : value;\r\n}\r\n\r\nfunction clampRSI(rsi) {\r\n  return Math.max(0, Math.min(100, rsi));\r\n}\r\n\r\n/**\r\n * \r\n */\r\nfunction rollingMax(values, period) {\r\n  const result = new Array(values.length);\r\n  \r\n  for (let i = 0; i < values.length; i++) {\r\n    if (i < period - 1) {\r\n      result[i] = NaN;\r\n    } else {\r\n      let max = -Infinity;\r\n      for (let j = i - period + 1; j <= i; j++) {\r\n        if (!isNaN(values[j])) {\r\n          max = Math.max(max, values[j]);\r\n        }\r\n      }\r\n      result[i] = max === -Infinity ? NaN : max;\r\n    }\r\n  }\r\n  \r\n  return result;\r\n}\r\n\r\nfunction rollingMin(values, period) {\r\n  const result = new Array(values.length);\r\n  \r\n  for (let i = 0; i < values.length; i++) {\r\n    if (i < period - 1) {\r\n      result[i] = NaN;\r\n    } else {\r\n      let min = Infinity;\r\n      for (let j = i - period + 1; j <= i; j++) {\r\n        if (!isNaN(values[j])) {\r\n          min = Math.min(min, values[j]);\r\n        }\r\n      }\r\n      result[i] = min === Infinity ? NaN : min;\r\n    }\r\n  }\r\n  \r\n  return result;\r\n}\r\n\r\n// =========================\r\n// 1)  Helper \r\n// =========================\r\n\r\n/**\r\n * SMA Helper -  v2.0.0 \r\n * @param {number[]} values - \r\n * @param {number} period -  N\r\n * @param {string} nanPolicy - NaN : 'strict' | 'skipna'\r\n * @param {number} minPeriods - skipna \r\n * @returns {number[]} SMA \r\n */\r\nfunction sma(values, period, nanPolicy = 'strict', minPeriods = null) {\r\n  if (period <= 0) throw new Error('Period must be positive');\r\n  \r\n  const L = values.length;\r\n  const result = new Array(L).fill(NaN);\r\n  \r\n  // minPeriods  period\r\n  if (minPeriods === null) minPeriods = period;\r\n  \r\n  for (let t = 0; t < L; t++) {\r\n    if (t < period - 1) {\r\n      // t < N-1: keep NaN\r\n      continue;\r\n    }\r\n    \r\n    // window = x[t-N+1 .. t]\r\n    const window = values.slice(t - period + 1, t + 1);\r\n    \r\n    if (nanPolicy === 'strict') {\r\n      //  window  NaN sma[t] = NaN\r\n      if (window.some(v => isNaN(v))) {\r\n        result[t] = NaN;\r\n      } else {\r\n        result[t] = window.reduce((sum, v) => sum + v, 0) / window.length;\r\n      }\r\n    } else if (nanPolicy === 'skipna') {\r\n      // \r\n      const validValues = window.filter(v => !isNaN(v));\r\n      if (validValues.length < minPeriods) {\r\n        result[t] = NaN;\r\n      } else {\r\n        result[t] = validValues.reduce((sum, v) => sum + v, 0) / validValues.length;\r\n      }\r\n    }\r\n  }\r\n  \r\n  return result;\r\n}\r\n\r\n/**\r\n * EMA Helper -  v2.0.0 \r\n * @param {number[]} values - \r\n * @param {number} period -  N\r\n * @param {number} alpha -  2/(period+1)\r\n * @param {string} initMode - : 'sma_seed' | 'first_value'\r\n * @param {string} nanPolicy - NaN : 'strict_break' | 'strict_recover' | 'hold_last'\r\n * @returns {number[]} EMA \r\n */\r\nfunction ema(values, period, alpha = null, initMode = 'sma_seed', nanPolicy = 'strict_recover') {\r\n  if (period <= 0) throw new Error('Period must be positive');\r\n  \r\n  const L = values.length;\r\n  const result = new Array(L).fill(NaN);\r\n  \r\n  //  alpha = 2/(N+1)\r\n  if (alpha === null) alpha = 2 / (period + 1);\r\n  \r\n  //  alpha \r\n  if (alpha <= 0 || alpha > 1) {\r\n    throw new Error('Alpha must be in (0, 1]');\r\n  }\r\n  \r\n  if (initMode === 'first_value') {\r\n    //  NaN \r\n    let firstValidIndex = -1;\r\n    for (let k = 0; k < L; k++) {\r\n      if (!isNaN(values[k])) {\r\n        firstValidIndex = k;\r\n        break;\r\n      }\r\n    }\r\n    \r\n    if (firstValidIndex === -1) {\r\n      //  NaN\r\n      return result;\r\n    }\r\n    \r\n    // \r\n    result[firstValidIndex] = values[firstValidIndex];\r\n    \r\n    // \r\n    for (let t = firstValidIndex + 1; t < L; t++) {\r\n      if (isNaN(values[t])) {\r\n        //  NaN \r\n        if (nanPolicy === 'hold_last') {\r\n          result[t] = result[t - 1];\r\n        } else {\r\n          result[t] = NaN;\r\n        }\r\n      } else {\r\n        // \r\n        if (isNaN(result[t - 1])) {\r\n          if (nanPolicy === 'strict_recover') {\r\n            result[t] = NaN; //  seed\r\n          } else {\r\n            result[t] = NaN;\r\n          }\r\n        } else {\r\n          result[t] = alpha * values[t] + (1 - alpha) * result[t - 1];\r\n        }\r\n      }\r\n    }\r\n    \r\n  } else if (initMode === 'sma_seed') {\r\n    // sma_seed  t = N-1  SMA \r\n    \r\n    for (let t = 0; t < L; t++) {\r\n      if (t < period - 1) {\r\n        // t < N-1: keep NaN\r\n        continue;\r\n      }\r\n      \r\n      if (t === period - 1) {\r\n        //  seed \r\n        const window = values.slice(0, period);\r\n        if (window.some(v => isNaN(v))) {\r\n          result[t] = NaN;\r\n        } else {\r\n          result[t] = window.reduce((sum, v) => sum + v, 0) / window.length;\r\n        }\r\n      } else {\r\n        // t > N-1\r\n        if (isNaN(values[t])) {\r\n          //  NaN\r\n          if (nanPolicy === 'hold_last') {\r\n            result[t] = result[t - 1];\r\n          } else if (nanPolicy === 'strict_break') {\r\n            result[t] = NaN;\r\n            //  broken NaN ()\r\n          } else if (nanPolicy === 'strict_recover') {\r\n            result[t] = NaN;\r\n          }\r\n        } else {\r\n          // \r\n          if (isNaN(result[t - 1])) {\r\n            if (nanPolicy === 'strict_recover') {\r\n              // re-seed:  N \r\n              const recentWindow = values.slice(t - period + 1, t + 1);\r\n              if (recentWindow.some(v => isNaN(v))) {\r\n                result[t] = NaN;\r\n              } else {\r\n                //  seed\r\n                result[t] = recentWindow.reduce((sum, v) => sum + v, 0) / recentWindow.length;\r\n              }\r\n            } else {\r\n              result[t] = NaN;\r\n            }\r\n          } else {\r\n            //  EMA \r\n            result[t] = alpha * values[t] + (1 - alpha) * result[t - 1];\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  \r\n  return result;\r\n}\r\n\r\n/**\r\n * Wilder  Helper ( NaN )\r\n * @param {number[]} values - \r\n * @param {number} period - \r\n * @returns {number[]} Wilder \r\n */\r\nfunction wilderSmoothing(values, period) {\r\n  if (period <= 0) throw new Error('Period must be positive');\r\n  \r\n  const result = new Array(values.length);\r\n  \r\n  // \r\n  for (let i = 0; i < period - 1; i++) {\r\n    result[i] = NaN;\r\n  }\r\n  \r\n  if (values.length < period) {\r\n    console.log(`Wilder: Insufficient data length ${values.length} < ${period}`);\r\n    return result;\r\n  }\r\n  \r\n  //  SMA - \r\n  let sum = 0;\r\n  let count = 0;\r\n  let validIndices = [];\r\n  \r\n  //  period \r\n  for (let j = 0; j < values.length && validIndices.length < period; j++) {\r\n    if (!isNaN(values[j])) {\r\n      validIndices.push(j);\r\n      sum += values[j];\r\n      count++;\r\n    }\r\n  }\r\n  \r\n  console.log(`Wilder: Found ${count} valid values in first ${period} positions for SMA initialization`);\r\n  \r\n  if (count < period) {\r\n    console.warn(`Wilder: Insufficient valid data for SMA initialization: ${count} < ${period}`);\r\n    return result; //  NaN\r\n  }\r\n  \r\n  // \r\n  const initIndex = Math.max(period - 1, validIndices[period - 1]);\r\n  result[initIndex] = sum / period;\r\n  \r\n  console.log(`Wilder: Initialized at index ${initIndex} with value ${result[initIndex]}`);\r\n  \r\n  // Wilder  - \r\n  for (let i = initIndex + 1; i < values.length; i++) {\r\n    if (isNaN(result[i - 1]) || isNaN(values[i])) {\r\n      result[i] = NaN;\r\n    } else {\r\n      result[i] = (result[i - 1] * (period - 1) + values[i]) / period;\r\n    }\r\n  }\r\n  \r\n  const validCount = result.filter(v => !isNaN(v)).length;\r\n  console.log(`Wilder: Generated ${validCount} valid smoothed values`);\r\n  \r\n  return result;\r\n}\r\n\r\n// =========================\r\n// 2) \r\n// =========================\r\n\r\n/**\r\n * MA (EMA) -  - v2.0.0 \r\n */\r\nfunction calculateMA(close, period = 5, alpha = null, initMode = 'sma_seed', nanPolicy = 'strict_recover') {\r\n  return ema(close, period, alpha, initMode, nanPolicy);\r\n}\r\n\r\n/**\r\n * SMA -  - v2.0.0 \r\n */\r\nfunction calculateSMA(close, period = 5, nanPolicy = 'strict', minPeriods = null) {\r\n  return sma(close, period, nanPolicy, minPeriods);\r\n}\r\n\r\n/**\r\n * Ichimoku Base Line (Kijun-sen)\r\n */\r\nfunction calculateIchimokuBaseLine(high, low, period = 26) {\r\n  const hh = rollingMax(high, period);\r\n  const ll = rollingMin(low, period);\r\n  \r\n  const result = new Array(high.length);\r\n  for (let i = 0; i < high.length; i++) {\r\n    if (isNaN(hh[i]) || isNaN(ll[i])) {\r\n      result[i] = NaN;\r\n    } else {\r\n      result[i] = (hh[i] + ll[i]) / 2;\r\n    }\r\n  }\r\n  \r\n  return result;\r\n}\r\n\r\n/**\r\n * Ichimoku Conversion Line (Tenkan-sen)\r\n */\r\nfunction calculateIchimokuConversionLine(high, low, period = 9) {\r\n  return calculateIchimokuBaseLine(high, low, period);\r\n}\r\n\r\n/**\r\n * Ichimoku Lagging Span (Chikou Span)\r\n */\r\nfunction calculateIchimokuLaggingSpan(close, shift = 26) {\r\n  if (shift < 0) throw new Error('Shift must be non-negative');\r\n  \r\n  const result = new Array(close.length);\r\n  \r\n  for (let i = 0; i < close.length; i++) {\r\n    if (i + shift < close.length) {\r\n      result[i] = close[i];\r\n    } else {\r\n      result[i] = NaN; //  shift \r\n    }\r\n  }\r\n  \r\n  return result;\r\n}\r\n\r\n/**\r\n * VWMA - \r\n */\r\nfunction calculateVWMA(close, volume, period = 20) {\r\n  const result = new Array(close.length);\r\n  \r\n  for (let i = 0; i < close.length; i++) {\r\n    if (i < period - 1) {\r\n      result[i] = NaN;\r\n    } else {\r\n      let numerator = 0;\r\n      let denominator = 0;\r\n      \r\n      for (let j = i - period + 1; j <= i; j++) {\r\n        if (!isNaN(close[j]) && !isNaN(volume[j])) {\r\n          numerator += close[j] * volume[j];\r\n          denominator += volume[j];\r\n        }\r\n      }\r\n      \r\n      result[i] = denominator <= EPSILON ? NaN : numerator / denominator;\r\n    }\r\n  }\r\n  \r\n  return result;\r\n}\r\n\r\n/**\r\n * RSI -  (Wilder )\r\n */\r\nfunction calculateRSI(close, period = 14) {\r\n  if (close.length < period + 1) {\r\n    return new Array(close.length).fill(NaN);\r\n  }\r\n  \r\n  // Step A: /\r\n  const delta = new Array(close.length);\r\n  const gain = new Array(close.length);\r\n  const loss = new Array(close.length);\r\n  \r\n  delta[0] = NaN;\r\n  gain[0] = NaN;\r\n  loss[0] = NaN;\r\n  \r\n  for (let i = 1; i < close.length; i++) {\r\n    if (isNaN(close[i]) || isNaN(close[i - 1])) {\r\n      delta[i] = NaN;\r\n      gain[i] = NaN;\r\n      loss[i] = NaN;\r\n    } else {\r\n      delta[i] = close[i] - close[i - 1];\r\n      gain[i] = Math.max(delta[i], 0);\r\n      loss[i] = Math.max(-delta[i], 0);\r\n    }\r\n  }\r\n  \r\n  // Step B: Wilder \r\n  const avgGain = wilderSmoothing(gain.slice(1), period); //  NaN\r\n  const avgLoss = wilderSmoothing(loss.slice(1), period);\r\n  \r\n  // Step C:  RSI\r\n  const result = new Array(close.length);\r\n  result[0] = NaN; //  delta\r\n  \r\n  for (let i = 1; i < close.length; i++) {\r\n    const avgGainValue = avgGain[i - 1];\r\n    const avgLossValue = avgLoss[i - 1];\r\n    \r\n    if (isNaN(avgGainValue) || isNaN(avgLossValue)) {\r\n      result[i] = NaN;\r\n    } else if (avgLossValue <= EPSILON) {\r\n      result[i] = 100; // \r\n    } else {\r\n      const rs = avgGainValue / avgLossValue;\r\n      const rsi = 100 - (100 / (1 + rs));\r\n      result[i] = clampRSI(rsi);\r\n    }\r\n  }\r\n  \r\n  return result;\r\n}\r\n\r\n/**\r\n * ADX -  ( Wilder )\r\n */\r\nfunction calculateADX(high, low, close, period = 14) {\r\n  const length = Math.min(high.length, low.length, close.length);\r\n  \r\n  // \r\n  if (length < period * 2) {\r\n    console.warn(`ADX: Insufficient data length ${length} < ${period * 2} for period ${period}`);\r\n    return {\r\n      adx: new Array(length).fill(NaN),\r\n      plusDI: new Array(length).fill(NaN),\r\n      minusDI: new Array(length).fill(NaN)\r\n    };\r\n  }\r\n  \r\n  // \r\n  let validOHLCCount = 0;\r\n  for (let i = 0; i < length; i++) {\r\n    if (!isNaN(high[i]) && !isNaN(low[i]) && !isNaN(close[i])) {\r\n      validOHLCCount++;\r\n    }\r\n  }\r\n  \r\n  console.log(`ADX: Processing ${length} data points, ${validOHLCCount} valid OHLC points`);\r\n  \r\n  if (validOHLCCount < period * 2) {\r\n    console.warn(`ADX: Insufficient valid OHLC data ${validOHLCCount} < ${period * 2}`);\r\n    return {\r\n      adx: new Array(length).fill(NaN),\r\n      plusDI: new Array(length).fill(NaN),\r\n      minusDI: new Array(length).fill(NaN)\r\n    };\r\n  }\r\n  \r\n  // Step A:  DM  TR\r\n  const upMove = new Array(length);\r\n  const downMove = new Array(length);\r\n  const plusDM = new Array(length);\r\n  const minusDM = new Array(length);\r\n  const tr = new Array(length);\r\n  \r\n  upMove[0] = NaN;\r\n  downMove[0] = NaN;\r\n  plusDM[0] = NaN;\r\n  minusDM[0] = NaN;\r\n  tr[0] = NaN;\r\n  \r\n  for (let i = 1; i < length; i++) {\r\n    // \r\n    if (isNaN(high[i]) || isNaN(low[i]) || isNaN(close[i]) ||\r\n        isNaN(high[i-1]) || isNaN(low[i-1]) || isNaN(close[i-1])) {\r\n      upMove[i] = NaN;\r\n      downMove[i] = NaN;\r\n      plusDM[i] = NaN;\r\n      minusDM[i] = NaN;\r\n      tr[i] = NaN;\r\n      continue;\r\n    }\r\n    \r\n    // Up/Down Move\r\n    upMove[i] = high[i] - high[i - 1];\r\n    downMove[i] = low[i - 1] - low[i];\r\n    \r\n    // +DM / -DM\r\n    if (upMove[i] > downMove[i] && upMove[i] > 0) {\r\n      plusDM[i] = upMove[i];\r\n    } else {\r\n      plusDM[i] = 0;\r\n    }\r\n    \r\n    if (downMove[i] > upMove[i] && downMove[i] > 0) {\r\n      minusDM[i] = downMove[i];\r\n    } else {\r\n      minusDM[i] = 0;\r\n    }\r\n    \r\n    // True Range\r\n    const tr1 = high[i] - low[i];\r\n    const tr2 = Math.abs(high[i] - close[i - 1]);\r\n    const tr3 = Math.abs(low[i] - close[i - 1]);\r\n    tr[i] = Math.max(tr1, tr2, tr3);\r\n  }\r\n  \r\n  // Step B: Wilder  -  NaN \r\n  const smTR = wilderSmoothing(tr.slice(1), period);\r\n  const smPlusDM = wilderSmoothing(plusDM.slice(1), period);\r\n  const smMinusDM = wilderSmoothing(minusDM.slice(1), period);\r\n  \r\n  console.log(`ADX: Wilder smoothing results - TR valid: ${smTR.filter(v => !isNaN(v)).length}, +DM valid: ${smPlusDM.filter(v => !isNaN(v)).length}, -DM valid: ${smMinusDM.filter(v => !isNaN(v)).length}`);\r\n  \r\n  // Step C:  DI\r\n  const plusDI = new Array(length);\r\n  const minusDI = new Array(length);\r\n  const dx = new Array(length);\r\n  \r\n  plusDI[0] = NaN;\r\n  minusDI[0] = NaN;\r\n  dx[0] = NaN;\r\n  \r\n  for (let i = 1; i < length; i++) {\r\n    const smTRValue = smTR[i - 1];\r\n    const smPlusDMValue = smPlusDM[i - 1];\r\n    const smMinusDMValue = smMinusDM[i - 1];\r\n    \r\n    if (isNaN(smTRValue) || isNaN(smPlusDMValue) || isNaN(smMinusDMValue) || smTRValue <= EPSILON) {\r\n      plusDI[i] = NaN;\r\n      minusDI[i] = NaN;\r\n      dx[i] = NaN;\r\n    } else {\r\n      plusDI[i] = 100 * smPlusDMValue / smTRValue;\r\n      minusDI[i] = 100 * smMinusDMValue / smTRValue;\r\n      \r\n      const diSum = plusDI[i] + minusDI[i];\r\n      if (diSum <= EPSILON) {\r\n        dx[i] = NaN;\r\n      } else {\r\n        dx[i] = 100 * Math.abs(plusDI[i] - minusDI[i]) / diSum;\r\n      }\r\n    }\r\n  }\r\n  \r\n  // Step D: ADX Wilder \r\n  const adx = wilderSmoothing(dx.slice(1), period);\r\n  \r\n  console.log(`ADX: Final ADX smoothing - DX valid: ${dx.filter(v => !isNaN(v)).length}, ADX valid: ${adx.filter(v => !isNaN(v)).length}`);\r\n  \r\n  // \r\n  const adxResult = new Array(length);\r\n  adxResult[0] = NaN;\r\n  for (let i = 1; i < length; i++) {\r\n    adxResult[i] = adx[i - 1];\r\n  }\r\n  \r\n  // \r\n  const finalValidADX = adxResult.filter(v => !isNaN(v)).length;\r\n  console.log(`ADX: Final result - ${finalValidADX} valid ADX values out of ${length} total`);\r\n  \r\n  return {\r\n    adx: adxResult,\r\n    plusDI: plusDI,\r\n    minusDI: minusDI\r\n  };\r\n}\r\n\r\n/**\r\n * MACD - \r\n */\r\nfunction calculateMACD(close, fastPeriod = 12, slowPeriod = 26, signalPeriod = 9) {\r\n  if (slowPeriod <= fastPeriod) {\r\n    console.warn('Slow period should be greater than fast period');\r\n  }\r\n  \r\n  const emaFast = ema(close, fastPeriod);\r\n  const emaSlow = ema(close, slowPeriod);\r\n  \r\n  // MACD Line\r\n  const macd = new Array(close.length);\r\n  for (let i = 0; i < close.length; i++) {\r\n    if (isNaN(emaFast[i]) || isNaN(emaSlow[i])) {\r\n      macd[i] = NaN;\r\n    } else {\r\n      macd[i] = emaFast[i] - emaSlow[i];\r\n    }\r\n  }\r\n  \r\n  // Signal Line\r\n  const signal = ema(macd, signalPeriod);\r\n  \r\n  // Histogram\r\n  const histogram = new Array(close.length);\r\n  for (let i = 0; i < close.length; i++) {\r\n    if (isNaN(macd[i]) || isNaN(signal[i])) {\r\n      histogram[i] = NaN;\r\n    } else {\r\n      histogram[i] = macd[i] - signal[i];\r\n    }\r\n  }\r\n  \r\n  return {\r\n    macd: macd,\r\n    signal: signal,\r\n    histogram: histogram\r\n  };\r\n}\r\n\r\n// =========================\r\n// 3) \r\n// =========================\r\n\r\n/**\r\n * \r\n * @param {Object} ohlcv - OHLCV  {open, high, low, close, volume}\r\n * @returns {Object} \r\n */\r\nfunction calculateAllIndicators(ohlcv) {\r\n  const { open, high, low, close, volume } = ohlcv;\r\n  \r\n  // \r\n  const length = close.length;\r\n  if (high.length !== length || low.length !== length || \r\n      open.length !== length || volume.length !== length) {\r\n    throw new Error('All OHLCV arrays must have the same length');\r\n  }\r\n  \r\n  // \r\n  const results = {\r\n    // MA (EMA)\r\n    MA_5: calculateMA(close, 5),\r\n    MA_10: calculateMA(close, 10),\r\n    MA_30: calculateMA(close, 30),\r\n    \r\n    // SMA\r\n    SMA_5: calculateSMA(close, 5),\r\n    SMA_10: calculateSMA(close, 10),\r\n    SMA_30: calculateSMA(close, 30),\r\n    \r\n    // Ichimoku\r\n    ICHIMOKU_BASELINE_26: calculateIchimokuBaseLine(high, low, 26),\r\n    ICHIMOKU_CONVERSIONLINE_9: calculateIchimokuConversionLine(high, low, 9),\r\n    ICHIMOKU_LAGGINGSPAN_26: calculateIchimokuLaggingSpan(close, 26),\r\n    \r\n    // VWMA\r\n    VWMA_20: calculateVWMA(close, volume, 20),\r\n    \r\n    // RSI\r\n    RSI_14: calculateRSI(close, 14),\r\n    \r\n    // MACD\r\n    ...(() => {\r\n      const macdResult = calculateMACD(close, 12, 26, 9);\r\n      return {\r\n        MACD_12_26_9: macdResult.macd,\r\n        MACD_SIGNAL_9: macdResult.signal,\r\n        MACD_HIST: macdResult.histogram\r\n      };\r\n    })(),\r\n    \r\n    // ADX\r\n    ...(() => {\r\n      const adxResult = calculateADX(high, low, close, 14);\r\n      return {\r\n        ADX_14: adxResult.adx,\r\n        ADX_14_PLUS_DI: adxResult.plusDI,\r\n        ADX_14_MINUS_DI: adxResult.minusDI\r\n      };\r\n    })()\r\n  };\r\n  \r\n  // \r\n  for (const [key, values] of Object.entries(results)) {\r\n    if (values.length !== length) {\r\n      console.error(`Length mismatch for ${key}: expected ${length}, got ${values.length}`);\r\n    }\r\n  }\r\n  \r\n  return results;\r\n}\r\n\r\n// =========================\r\n// 4) \r\n// =========================\r\n\r\nexport {\r\n  // Helper \r\n  sma,\r\n  ema,\r\n  wilderSmoothing,\r\n  rollingMax,\r\n  rollingMin,\r\n  \r\n  // \r\n  calculateMA,\r\n  calculateSMA,\r\n  calculateIchimokuBaseLine,\r\n  calculateIchimokuConversionLine,\r\n  calculateIchimokuLaggingSpan,\r\n  calculateVWMA,\r\n  calculateRSI,\r\n  calculateADX,\r\n  calculateMACD,\r\n  \r\n  // \r\n  calculateAllIndicators,\r\n  \r\n  // \r\n  EPSILON\r\n};\r\n\r\nexport default {\r\n  calculateAllIndicators,\r\n  calculateMA,\r\n  calculateSMA,\r\n  calculateIchimokuBaseLine,\r\n  calculateIchimokuConversionLine,\r\n  calculateIchimokuLaggingSpan,\r\n  calculateVWMA,\r\n  calculateRSI,\r\n  calculateADX,\r\n  calculateMACD\r\n};","// Yahoo Finance API \r\n//  Yahoo Finance  API \r\n\r\nimport technicalIndicatorsCache from './technicalIndicatorsCache.js';\r\nimport { calculateAllIndicators } from './technicalIndicatorsCore.js';\r\n\r\nclass YahooFinanceAPI {\r\n  constructor() {\r\n    //  CORS  - 202412\r\n    // \r\n    this.corsProxies = [\r\n      //  \r\n      'https://api.allorigins.win/raw?url=',                // : 368ms,  \r\n      \r\n      //  /\r\n      'https://corsproxy.io/?',                             // : 119ms,  \r\n      \r\n      //  \r\n      'https://cors.sh/',                                    // \r\n      'https://proxy-cors.isomorphic-git.org/',             // \r\n      'https://thingproxy.freeboard.io/fetch/',             // \r\n      'https://cors-proxy.htmldriven.com/?url=',            // \r\n      'https://cors-anywhere.herokuapp.com/'                // 403 Forbidden\r\n    ];\r\n    this.baseUrl = 'https://query1.finance.yahoo.com/v8/finance/chart/';\r\n    this.cache = new Map();\r\n    this.cacheTimeout = 5 * 60 * 1000; // 5  ( API )\r\n    this.currentProxyIndex = 0; // \r\n  }\r\n\r\n  //  ()\r\n  async getTechnicalIndicators(symbol) {\r\n    // 1. \r\n    const cachedData = await technicalIndicatorsCache.getTechnicalIndicators(symbol);\r\n    if (cachedData) {\r\n      return cachedData;\r\n    }\r\n\r\n    // 2.  API \r\n    const freshData = await this.fetchTechnicalIndicatorsFromAPI(symbol);\r\n    \r\n    // 3. \r\n    if (freshData && !freshData.error) {\r\n      await technicalIndicatorsCache.setTechnicalIndicators(symbol, freshData);\r\n    }\r\n\r\n    return freshData;\r\n  }\r\n\r\n  //  API  ()\r\n  async fetchTechnicalIndicatorsFromAPI(symbol) {\r\n    const cacheKey = `technical_${symbol}`;\r\n    \r\n    // \r\n    if (this.cache.has(cacheKey)) {\r\n      const cached = this.cache.get(cacheKey);\r\n      if (Date.now() - cached.timestamp < this.cacheTimeout) {\r\n        console.log(`Using cached data for ${symbol}`);\r\n        return cached.data;\r\n      }\r\n    }\r\n\r\n    // \r\n    for (let i = 0; i < this.corsProxies.length; i++) {\r\n      try {\r\n        const proxyIndex = (this.currentProxyIndex + i) % this.corsProxies.length;\r\n        const proxy = this.corsProxies[proxyIndex];\r\n        \r\n        console.log(`Fetching data for ${symbol} using proxy ${proxyIndex + 1}...`);\r\n        \r\n        //  URL -  ADX \r\n        const targetUrl = `${this.baseUrl}${symbol}?interval=1d&range=6mo&indicators=quote&includePrePost=false`;\r\n        const url = `${proxy}${encodeURIComponent(targetUrl)}`;\r\n        \r\n        console.log(`Request URL: ${url}`);\r\n        \r\n        // \r\n        const response = await fetch(url, {\r\n          method: 'GET'\r\n          //  headers  CORS preflight\r\n        });\r\n        \r\n        console.log(`Response status: ${response.status}`);\r\n        \r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! status: ${response.status}`);\r\n        }\r\n        \r\n        const data = await response.json();\r\n        console.log(`Raw data structure:`, data);\r\n        \r\n        // \r\n        if (!data.chart || !data.chart.result || data.chart.result.length === 0) {\r\n          throw new Error('No chart data available');\r\n        }\r\n        \r\n        const result = data.chart.result[0];\r\n        \r\n        if (!result.indicators || !result.indicators.quote || !result.indicators.quote[0]) {\r\n          throw new Error('Invalid data structure - missing indicators');\r\n        }\r\n        \r\n        const quotes = result.indicators.quote[0];\r\n        \r\n        //  OHLCV \r\n        const rawData = {\r\n          open: quotes.open || [],\r\n          high: quotes.high || [],\r\n          low: quotes.low || [],\r\n          close: quotes.close || [],\r\n          volume: quotes.volume || []\r\n        };\r\n        \r\n        //  null \r\n        const length = rawData.close.length;\r\n        const ohlcv = {\r\n          open: new Array(length),\r\n          high: new Array(length),\r\n          low: new Array(length),\r\n          close: new Array(length),\r\n          volume: new Array(length)\r\n        };\r\n        \r\n        let validDataPoints = 0;\r\n        for (let i = 0; i < length; i++) {\r\n          ohlcv.open[i] = rawData.open[i] !== null ? rawData.open[i] : NaN;\r\n          ohlcv.high[i] = rawData.high[i] !== null ? rawData.high[i] : NaN;\r\n          ohlcv.low[i] = rawData.low[i] !== null ? rawData.low[i] : NaN;\r\n          ohlcv.close[i] = rawData.close[i] !== null ? rawData.close[i] : NaN;\r\n          ohlcv.volume[i] = rawData.volume[i] !== null ? rawData.volume[i] : NaN;\r\n          \r\n          // OHLC  NaN\r\n          if (!isNaN(ohlcv.open[i]) && !isNaN(ohlcv.high[i]) && \r\n              !isNaN(ohlcv.low[i]) && !isNaN(ohlcv.close[i])) {\r\n            validDataPoints++;\r\n          }\r\n        }\r\n        \r\n        console.log(`Found ${length} total data points, ${validDataPoints} valid OHLC points for ${symbol}`);\r\n        \r\n        // ADX  28  (14 * 2)\r\n        if (validDataPoints < 28) {\r\n          console.warn(` Insufficient valid data for ADX calculation: ${validDataPoints} < 28`);\r\n        }\r\n        \r\n        if (length < 50) {\r\n          throw new Error(`Insufficient data points (${length}) for technical analysis`);\r\n        }\r\n        \r\n        // \r\n        const coreResults = calculateAllIndicators(ohlcv);\r\n        \r\n        // \r\n        const getLastValue = (series) => {\r\n          if (!series || !Array.isArray(series)) {\r\n            console.warn('getLastValue: Invalid series data');\r\n            return null;\r\n          }\r\n          \r\n          for (let i = series.length - 1; i >= 0; i--) {\r\n            const value = series[i];\r\n            if (value !== null && value !== undefined && !isNaN(value) && isFinite(value)) {\r\n              console.log(`getLastValue: Found valid value ${value} at index ${i} of ${series.length}`);\r\n              return value;\r\n            }\r\n          }\r\n          console.warn(`getLastValue: No valid values found in series of length ${series.length}`);\r\n          return null;\r\n        };\r\n        \r\n        const createIndicatorResult = (series, signalThresholds = null) => {\r\n          const lastValue = getLastValue(series);\r\n          const currentPrice = getLastValue(ohlcv.close);\r\n          \r\n          let signal = 'NEUTRAL';\r\n          if (signalThresholds && lastValue !== null && currentPrice !== null) {\r\n            if (signalThresholds.type === 'price_comparison') {\r\n              if (currentPrice > lastValue * signalThresholds.buy) signal = 'BUY';\r\n              else if (currentPrice < lastValue * signalThresholds.sell) signal = 'SELL';\r\n            } else if (signalThresholds.type === 'rsi') {\r\n              if (lastValue > signalThresholds.overbought) signal = 'OVERBOUGHT';\r\n              else if (lastValue < signalThresholds.oversold) signal = 'OVERSOLD';\r\n            } else if (signalThresholds.type === 'adx') {\r\n              if (lastValue > signalThresholds.strong) signal = 'STRONG_TREND';\r\n              else if (lastValue < signalThresholds.weak) signal = 'WEAK_TREND';\r\n            }\r\n          }\r\n          \r\n          return {\r\n            value: lastValue !== null ? lastValue.toFixed(2) : null,\r\n            signal: signal,\r\n            currentPrice: currentPrice !== null ? currentPrice.toFixed(2) : null\r\n          };\r\n        };\r\n        \r\n        // \r\n        const indicators = {\r\n          // \r\n          ma5: createIndicatorResult(coreResults.MA_5, { type: 'price_comparison', buy: 1.02, sell: 0.98 }),\r\n          sma5: createIndicatorResult(coreResults.SMA_5, { type: 'price_comparison', buy: 1.02, sell: 0.98 }),\r\n          ma10: createIndicatorResult(coreResults.MA_10, { type: 'price_comparison', buy: 1.02, sell: 0.98 }),\r\n          sma10: createIndicatorResult(coreResults.SMA_10, { type: 'price_comparison', buy: 1.02, sell: 0.98 }),\r\n          ma30: createIndicatorResult(coreResults.MA_30, { type: 'price_comparison', buy: 1.02, sell: 0.98 }),\r\n          sma30: createIndicatorResult(coreResults.SMA_30, { type: 'price_comparison', buy: 1.02, sell: 0.98 }),\r\n          sma50: { value: null, signal: 'N/A' }, // \r\n          \r\n          // \r\n          ichimokuBaseLine: createIndicatorResult(coreResults.ICHIMOKU_BASELINE_26, { type: 'price_comparison', buy: 1.01, sell: 0.99 }),\r\n          ichimokuConversionLine: createIndicatorResult(coreResults.ICHIMOKU_CONVERSIONLINE_9, { type: 'price_comparison', buy: 1.01, sell: 0.99 }),\r\n          ichimokuLaggingSpan: createIndicatorResult(coreResults.ICHIMOKU_LAGGINGSPAN_26),\r\n          \r\n          // \r\n          vwma20: createIndicatorResult(coreResults.VWMA_20, { type: 'price_comparison', buy: 1.02, sell: 0.98 }),\r\n          \r\n          // \r\n          rsi14: createIndicatorResult(coreResults.RSI_14, { type: 'rsi', overbought: 70, oversold: 30 }),\r\n          adx14: (() => {\r\n            console.log(' Processing ADX results...');\r\n            console.log('ADX_14 series:', coreResults.ADX_14);\r\n            console.log('ADX_14_PLUS_DI series:', coreResults.ADX_14_PLUS_DI);\r\n            console.log('ADX_14_MINUS_DI series:', coreResults.ADX_14_MINUS_DI);\r\n            \r\n            const adxValue = getLastValue(coreResults.ADX_14);\r\n            const plusDI = getLastValue(coreResults.ADX_14_PLUS_DI);\r\n            const minusDI = getLastValue(coreResults.ADX_14_MINUS_DI);\r\n            \r\n            console.log('ADX extracted values:', { adxValue, plusDI, minusDI });\r\n            \r\n            let signal = 'NEUTRAL';\r\n            if (adxValue !== null && !isNaN(adxValue)) {\r\n              if (adxValue > 25) signal = 'STRONG_TREND';\r\n              else if (adxValue < 20) signal = 'WEAK_TREND';\r\n            }\r\n            \r\n            const result = {\r\n              value: adxValue !== null && !isNaN(adxValue) ? adxValue.toFixed(2) : null,\r\n              signal: signal,\r\n              plusDI: plusDI !== null && !isNaN(plusDI) ? plusDI.toFixed(2) : null,\r\n              minusDI: minusDI !== null && !isNaN(minusDI) ? minusDI.toFixed(2) : null\r\n            };\r\n            \r\n            console.log('ADX final result:', result);\r\n            return result;\r\n          })(),\r\n          macd: (() => {\r\n            const macdValue = getLastValue(coreResults.MACD_12_26_9);\r\n            const signalValue = getLastValue(coreResults.MACD_SIGNAL_9);\r\n            const histValue = getLastValue(coreResults.MACD_HIST);\r\n            \r\n            let signal = 'NEUTRAL';\r\n            if (macdValue !== null && signalValue !== null && histValue !== null) {\r\n              if (macdValue > signalValue && histValue > 0) {\r\n                signal = 'BUY';\r\n              } else if (macdValue < signalValue && histValue < 0) {\r\n                signal = 'SELL';\r\n              }\r\n            }\r\n            \r\n            return {\r\n              value: macdValue !== null ? macdValue.toFixed(2) : null,\r\n              signal: signal,\r\n              signalLine: signalValue !== null ? signalValue.toFixed(2) : null,\r\n              histogram: histValue !== null ? histValue.toFixed(2) : null\r\n            };\r\n          })(),\r\n          \r\n          // \r\n          lastUpdated: new Date().toISOString(),\r\n          dataPoints: length,\r\n          proxy: `Proxy ${proxyIndex + 1}`,\r\n          source: 'Yahoo Finance API (Fresh) - Core v1.0.0',\r\n          \r\n          // \r\n          fullSeries: coreResults,\r\n          \r\n          // \r\n          priceRange: {\r\n            min: Math.min(...ohlcv.close.filter(p => !isNaN(p))).toFixed(2),\r\n            max: Math.max(...ohlcv.close.filter(p => !isNaN(p))).toFixed(2),\r\n            latest: getLastValue(ohlcv.close)?.toFixed(2) || 'N/A',\r\n            first: ohlcv.close.find(p => !isNaN(p))?.toFixed(2) || 'N/A'\r\n          }\r\n        };\r\n        \r\n        console.log(`Price data for ${symbol}:`, {\r\n          dataPoints: length,\r\n          priceRange: indicators.priceRange,\r\n          samplePrices: ohlcv.close.slice(-10).filter(p => !isNaN(p)) //  10 \r\n        });\r\n        \r\n        console.log(`Calculated indicators for ${symbol}:`, indicators);\r\n        \r\n        // \r\n        this.cache.set(cacheKey, {\r\n          data: indicators,\r\n          timestamp: Date.now()\r\n        });\r\n        \r\n        // \r\n        this.currentProxyIndex = proxyIndex;\r\n        \r\n        return indicators;\r\n        \r\n      } catch (error) {\r\n        console.warn(`Proxy ${i + 1} failed for ${symbol}:`, error.message);\r\n        \r\n        // \r\n        if (i === this.corsProxies.length - 1) {\r\n          console.error(`All proxies failed for ${symbol}:`, error);\r\n          \r\n          // \r\n          return {\r\n            ma5: { value: null, signal: 'N/A' },\r\n            sma5: { value: null, signal: 'N/A' },\r\n            ma10: { value: null, signal: 'N/A' },\r\n            sma10: { value: null, signal: 'N/A' },\r\n            ma30: { value: null, signal: 'N/A' },\r\n            sma30: { value: null, signal: 'N/A' },\r\n            sma50: { value: null, signal: 'N/A' },\r\n            ichimokuBaseLine: { value: null, signal: 'N/A' },\r\n            ichimokuConversionLine: { value: null, signal: 'N/A' },\r\n            ichimokuLaggingSpan: { value: null, signal: 'N/A' },\r\n            vwma20: { value: null, signal: 'N/A' },\r\n            rsi14: { value: null, signal: 'N/A' },\r\n            adx14: { value: null, signal: 'N/A' },\r\n            macd: { value: null, signal: 'N/A' },\r\n            lastUpdated: new Date().toISOString(),\r\n            error: `All proxies failed: ${error.message}`,\r\n            source: 'Error'\r\n          };\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  //  API \r\n  clearCache() {\r\n    this.cache.clear();\r\n  }\r\n\r\n  //  (sector, industry, marketCap )\r\n  async getStockInfo(symbol) {\r\n    const cacheKey = `info_${symbol}`;\r\n    \r\n    //  (24)\r\n    const longCacheTimeout = 24 * 60 * 60 * 1000; // 24 hours\r\n    if (this.cache.has(cacheKey)) {\r\n      const cached = this.cache.get(cacheKey);\r\n      if (Date.now() - cached.timestamp < longCacheTimeout) {\r\n        console.log(`Using cached stock info for ${symbol}`);\r\n        return cached.data;\r\n      }\r\n    }\r\n\r\n    // \r\n    for (let i = 0; i < this.corsProxies.length; i++) {\r\n      try {\r\n        const proxyIndex = (this.currentProxyIndex + i) % this.corsProxies.length;\r\n        const proxy = this.corsProxies[proxyIndex];\r\n        \r\n        console.log(`Fetching stock info for ${symbol} using proxy ${proxyIndex + 1}...`);\r\n        \r\n        //  Yahoo Finance  quoteSummary API \r\n        const targetUrl = `https://query1.finance.yahoo.com/v10/finance/quoteSummary/${symbol}?modules=summaryProfile,price,defaultKeyStatistics`;\r\n        const url = `${proxy}${encodeURIComponent(targetUrl)}`;\r\n        \r\n        const response = await fetch(url, {\r\n          method: 'GET'\r\n          //  headers  CORS preflight\r\n        });\r\n        \r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! status: ${response.status}`);\r\n        }\r\n        \r\n        const data = await response.json();\r\n        \r\n        // \r\n        if (!data.quoteSummary || !data.quoteSummary.result || data.quoteSummary.result.length === 0) {\r\n          throw new Error('No quoteSummary data available');\r\n        }\r\n        \r\n        const result = data.quoteSummary.result[0];\r\n        const summaryProfile = result.summaryProfile || {};\r\n        const price = result.price || {};\r\n        const keyStats = result.defaultKeyStatistics || {};\r\n        \r\n        // \r\n        const stockInfo = {\r\n          symbol: symbol,\r\n          sector: summaryProfile.sector || 'Unknown',\r\n          industry: summaryProfile.industry || 'Unknown Industry',\r\n          exchange: price.exchangeName || price.exchange || this.getDefaultExchange(symbol),\r\n          marketCap: price.marketCap ? price.marketCap.raw : null,\r\n          marketCapFormatted: price.marketCap ? price.marketCap.fmt : 'N/A',\r\n          currency: price.currency || 'USD',\r\n          country: summaryProfile.country || 'Unknown',\r\n          website: summaryProfile.website || null,\r\n          employees: summaryProfile.fullTimeEmployees || null,\r\n          businessSummary: summaryProfile.longBusinessSummary || null,\r\n          \r\n          // \r\n          marketCapCategory: this.getMarketCapCategory(price.marketCap ? price.marketCap.raw : null),\r\n          \r\n          // \r\n          lastUpdated: new Date().toISOString(),\r\n          source: 'Yahoo Finance API (Live)',\r\n          proxy: `Proxy ${proxyIndex + 1}`,\r\n          confidence: 0.95 // yfinance API \r\n        };\r\n        \r\n        console.log(`Stock info for ${symbol}:`, stockInfo);\r\n        \r\n        //  (24)\r\n        this.cache.set(cacheKey, {\r\n          data: stockInfo,\r\n          timestamp: Date.now()\r\n        });\r\n        \r\n        // \r\n        this.currentProxyIndex = proxyIndex;\r\n        \r\n        return stockInfo;\r\n        \r\n      } catch (error) {\r\n        console.warn(`Proxy ${i + 1} failed for stock info ${symbol}:`, error.message);\r\n        \r\n        // \r\n        if (i === this.corsProxies.length - 1) {\r\n          console.error(`All proxies failed for stock info ${symbol}:`, error);\r\n          \r\n          const defaultInfo = {\r\n            symbol: symbol,\r\n            sector: 'Unknown',\r\n            industry: 'Unknown Industry',\r\n            exchange: this.getDefaultExchange(symbol),\r\n            marketCap: null,\r\n            marketCapFormatted: 'N/A',\r\n            currency: 'USD',\r\n            country: 'Unknown',\r\n            website: null,\r\n            employees: null,\r\n            businessSummary: null,\r\n            marketCapCategory: 'unknown',\r\n            lastUpdated: new Date().toISOString(),\r\n            source: 'Default (API Failed)',\r\n            error: `All proxies failed: ${error.message}`,\r\n            confidence: 0.0\r\n          };\r\n          \r\n          //  (1)\r\n          this.cache.set(cacheKey, {\r\n            data: defaultInfo,\r\n            timestamp: Date.now()\r\n          });\r\n          \r\n          return defaultInfo;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // \r\n  getDefaultExchange(symbol) {\r\n    const nasdaqSymbols = ['AAPL', 'MSFT', 'GOOGL', 'GOOG', 'AMZN', 'TSLA', 'NVDA', 'META', 'NFLX', 'RKLB', 'ASTS', 'RIVN', 'MDB', 'ONDS', 'PL', 'AVAV', 'CRM', 'AVGO', 'LEU', 'SMR', 'CRWV', 'IONQ', 'PLTR', 'HIMS'];\r\n    const nyseSymbols = ['TSM', 'ORCL', 'RDW'];\r\n    \r\n    if (nasdaqSymbols.includes(symbol)) {\r\n      return 'NASDAQ';\r\n    } else if (nyseSymbols.includes(symbol)) {\r\n      return 'NYSE';\r\n    }\r\n    \r\n    return 'NASDAQ'; // Default\r\n  }\r\n\r\n  // \r\n  getMarketCapCategory(marketCap) {\r\n    if (!marketCap || marketCap <= 0) {\r\n      return 'unknown';\r\n    }\r\n    \r\n    //  ()\r\n    if (marketCap >= 200000000000) { // >= $200B\r\n      return 'mega_cap';\r\n    } else if (marketCap >= 10000000000) { // >= $10B\r\n      return 'large_cap';\r\n    } else if (marketCap >= 2000000000) { // >= $2B\r\n      return 'mid_cap';\r\n    } else if (marketCap >= 300000000) { // >= $300M\r\n      return 'small_cap';\r\n    } else {\r\n      return 'micro_cap';\r\n    }\r\n  }\r\n\r\n  // \r\n  clearDailyCache() {\r\n    technicalIndicatorsCache.clearAllCache();\r\n  }\r\n\r\n  // \r\n  getCacheStats() {\r\n    const apiCacheStats = {};\r\n    for (const [key, value] of this.cache.entries()) {\r\n      apiCacheStats[key] = {\r\n        age: Date.now() - value.timestamp,\r\n        expired: Date.now() - value.timestamp > this.cacheTimeout\r\n      };\r\n    }\r\n\r\n    return {\r\n      apiCache: apiCacheStats,\r\n      dailyCache: technicalIndicatorsCache.getCacheStats()\r\n    };\r\n  }\r\n\r\n  // Build proxy URL for Yahoo Finance API requests\r\n  buildProxyUrl(targetUrl) {\r\n    const proxy = this.corsProxies[this.currentProxyIndex];\r\n    return `${proxy}${encodeURIComponent(targetUrl)}`;\r\n  }\r\n\r\n  // Get OHLCV data for MFI Volume Profile calculations\r\n  async getOhlcv(symbol, period = '1d', range = '3mo') {\r\n    const cacheKey = `ohlcv_${symbol}_${period}_${range}`;\r\n    \r\n    // Check cache first\r\n    if (this.cache.has(cacheKey)) {\r\n      const cached = this.cache.get(cacheKey);\r\n      if (Date.now() - cached.timestamp < this.cacheTimeout) {\r\n        console.log(` Using cached OHLCV data for ${symbol}`);\r\n        return cached.data;\r\n      }\r\n    }\r\n\r\n    // Try multiple proxies for OHLCV data\r\n    for (let i = 0; i < this.corsProxies.length; i++) {\r\n      try {\r\n        const proxyIndex = (this.currentProxyIndex + i) % this.corsProxies.length;\r\n        const proxy = this.corsProxies[proxyIndex];\r\n        \r\n        console.log(` Fetching OHLCV data for ${symbol} using proxy ${proxyIndex + 1}...`);\r\n        \r\n        // Build Yahoo Finance chart API URL\r\n        const targetUrl = `${this.baseUrl}${symbol}?interval=${period}&range=${range}&indicators=quote&includePrePost=false`;\r\n        const url = this.buildProxyUrl(targetUrl);\r\n        \r\n        const response = await fetch(url, {\r\n          method: 'GET'\r\n          //  headers  CORS preflight\r\n        });\r\n        \r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! status: ${response.status}`);\r\n        }\r\n        \r\n        const data = await response.json();\r\n        \r\n        // Validate data structure\r\n        if (!data.chart || !data.chart.result || data.chart.result.length === 0) {\r\n          throw new Error('No chart data available');\r\n        }\r\n        \r\n        const result = data.chart.result[0];\r\n        \r\n        if (!result.indicators || !result.indicators.quote || !result.indicators.quote[0]) {\r\n          throw new Error('Invalid data structure - missing indicators');\r\n        }\r\n        \r\n        const quotes = result.indicators.quote[0];\r\n        const timestamps = result.timestamp || [];\r\n        \r\n        // Extract and clean OHLCV data\r\n        const ohlcv = {\r\n          timestamps: timestamps,\r\n          open: quotes.open || [],\r\n          high: quotes.high || [],\r\n          low: quotes.low || [],\r\n          close: quotes.close || [],\r\n          volume: quotes.volume || []\r\n        };\r\n        \r\n        // Validate data quality\r\n        const length = ohlcv.timestamps.length;\r\n        if (length < 20) {\r\n          throw new Error(`Insufficient OHLCV data points: ${length} < 20`);\r\n        }\r\n        \r\n        // Count valid data points\r\n        let validPoints = 0;\r\n        for (let j = 0; j < length; j++) {\r\n          if (ohlcv.open[j] != null && ohlcv.high[j] != null && \r\n              ohlcv.low[j] != null && ohlcv.close[j] != null && \r\n              ohlcv.volume[j] != null) {\r\n            validPoints++;\r\n          }\r\n        }\r\n        \r\n        console.log(` OHLCV data for ${symbol}: ${length} total points, ${validPoints} valid points`);\r\n        \r\n        if (validPoints < 15) {\r\n          throw new Error(`Insufficient valid OHLCV data: ${validPoints} < 15`);\r\n        }\r\n        \r\n        // Add metadata\r\n        const ohlcvResult = {\r\n          ...ohlcv,\r\n          metadata: {\r\n            symbol: symbol,\r\n            period: period,\r\n            range: range,\r\n            totalPoints: length,\r\n            validPoints: validPoints,\r\n            fetchedAt: new Date().toISOString(),\r\n            source: 'Yahoo Finance API',\r\n            proxy: `Proxy ${proxyIndex + 1}`\r\n          }\r\n        };\r\n        \r\n        // Cache the result\r\n        this.cache.set(cacheKey, {\r\n          data: ohlcvResult,\r\n          timestamp: Date.now()\r\n        });\r\n        \r\n        // Update successful proxy index\r\n        this.currentProxyIndex = proxyIndex;\r\n        \r\n        return ohlcvResult;\r\n        \r\n      } catch (error) {\r\n        console.warn(` Proxy ${i + 1} failed for OHLCV ${symbol}:`, error.message);\r\n        \r\n        // If all proxies failed, throw error\r\n        if (i === this.corsProxies.length - 1) {\r\n          console.error(` All proxies failed for OHLCV ${symbol}:`, error);\r\n          throw new Error(`Failed to fetch OHLCV data: ${error.message}`);\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// \r\nexport const yahooFinanceAPI = new YahooFinanceAPI();\r\nexport default yahooFinanceAPI;","//  API\r\n// \r\n\r\nimport precomputedIndicatorsAPI from './precomputedIndicatorsApi.js';\r\nimport yahooFinanceAPI from './yahooFinanceApi.js';\r\nimport technicalIndicatorsCache from './technicalIndicatorsCache.js';\r\n\r\nclass HybridTechnicalIndicatorsAPI {\r\n  constructor() {\r\n    this.preferPrecomputed = true; // \r\n    this.maxPrecomputedAge = 24 * 60 * 60 * 1000; // 24\r\n    this.fallbackToRealtime = true; // \r\n  }\r\n\r\n  // \r\n  async getTechnicalIndicators(symbol) {\r\n    console.log(` Getting technical indicators for ${symbol}`);\r\n    \r\n    try {\r\n      //  1:  ( ADX )\r\n      if (this.preferPrecomputed) {\r\n        const precomputedData = await this.tryPrecomputedData(symbol);\r\n        if (precomputedData && this.isADXValid(precomputedData)) {\r\n          console.log(` Using precomputed data with valid ADX for ${symbol}`);\r\n          \r\n          //  yfinance \r\n          console.log(` YFinance data check for ${symbol}:`, {\r\n            hasYF: !!precomputedData.yf,\r\n            yfKeys: precomputedData.yf ? Object.keys(precomputedData.yf) : 'none'\r\n          });\r\n          \r\n          return precomputedData;\r\n        } else if (precomputedData) {\r\n          console.log(` Precomputed data has invalid ADX for ${symbol}, falling back to real-time`);\r\n        }\r\n      }\r\n      \r\n      //  2:  ( ADX )\r\n      const cachedData = await technicalIndicatorsCache.getTechnicalIndicators(symbol);\r\n      if (cachedData && this.isADXValid(cachedData)) {\r\n        console.log(` Using daily cache with valid ADX for ${symbol}`);\r\n        return cachedData;\r\n      } else if (cachedData) {\r\n        console.log(` Cached data has invalid ADX for ${symbol}, falling back to real-time`);\r\n      }\r\n      \r\n      //  3: \r\n      if (this.fallbackToRealtime) {\r\n        console.log(` Using real-time calculation for ${symbol}`);\r\n        const realtimeData = await yahooFinanceAPI.fetchTechnicalIndicatorsFromAPI(symbol);\r\n        \r\n        if (realtimeData && !realtimeData.error) {\r\n          // \r\n          await technicalIndicatorsCache.setTechnicalIndicators(symbol, realtimeData);\r\n          return realtimeData;\r\n        }\r\n      }\r\n      \r\n      // \r\n      throw new Error('All data sources failed');\r\n      \r\n    } catch (error) {\r\n      console.error(` Failed to get technical indicators for ${symbol}:`, error);\r\n      \r\n      // \r\n      return this.createErrorResponse(symbol, error.message);\r\n    }\r\n  }\r\n\r\n  //  ADX \r\n  isADXValid(data) {\r\n    if (!data || !data.adx14) {\r\n      return false;\r\n    }\r\n    \r\n    //  ADX  null  \"N/A\"\r\n    const adxValue = data.adx14.value;\r\n    if (adxValue === null || adxValue === undefined || adxValue === 'N/A') {\r\n      return false;\r\n    }\r\n    \r\n    //  ADX\r\n    if (data.fullSeries && data.fullSeries.ADX_14) {\r\n      const adxSeries = data.fullSeries.ADX_14;\r\n      const validADXCount = adxSeries.filter(v => v !== null && v !== undefined && !isNaN(v)).length;\r\n      \r\n      //  ADX  5 \r\n      if (validADXCount < 5) {\r\n        console.log(`ADX validation failed: only ${validADXCount} valid values`);\r\n        return false;\r\n      }\r\n    }\r\n    \r\n    return true;\r\n  }\r\n\r\n  // \r\n  async tryPrecomputedData(symbol) {\r\n    try {\r\n      console.log(` Trying precomputed data for ${symbol}`);\r\n      \r\n      const data = await precomputedIndicatorsAPI.getTechnicalIndicators(symbol);\r\n      \r\n      // \r\n      const computedAt = new Date(data.lastUpdated);\r\n      const age = Date.now() - computedAt.getTime();\r\n      \r\n      if (age <= this.maxPrecomputedAge) {\r\n        console.log(` Using precomputed data for ${symbol} (${data.dataAge})`);\r\n        return {\r\n          ...data,\r\n          source: `Precomputed (${data.dataAge})`,\r\n          loadTime: '<50ms'\r\n        };\r\n      } else {\r\n        console.log(` Precomputed data too old for ${symbol} (${data.dataAge})`);\r\n        return null;\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.log(` Precomputed data not available for ${symbol}: ${error.message}`);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  // \r\n  createErrorResponse(symbol, errorMessage) {\r\n    return {\r\n      ma5: { value: null, signal: 'N/A' },\r\n      sma5: { value: null, signal: 'N/A' },\r\n      ma10: { value: null, signal: 'N/A' },\r\n      sma10: { value: null, signal: 'N/A' },\r\n      ma30: { value: null, signal: 'N/A' },\r\n      sma30: { value: null, signal: 'N/A' },\r\n      sma50: { value: null, signal: 'N/A' },\r\n      ichimokuBaseLine: { value: null, signal: 'N/A' },\r\n      ichimokuConversionLine: { value: null, signal: 'N/A' },\r\n      ichimokuLaggingSpan: { value: null, signal: 'N/A' },\r\n      vwma20: { value: null, signal: 'N/A' },\r\n      rsi14: { value: null, signal: 'N/A' },\r\n      adx14: { value: null, signal: 'N/A' },\r\n      macd: { value: null, signal: 'N/A' },\r\n      lastUpdated: new Date().toISOString(),\r\n      error: errorMessage,\r\n      source: 'Error',\r\n      symbol: symbol\r\n    };\r\n  }\r\n\r\n  //  ()\r\n  async refreshTechnicalIndicators(symbol) {\r\n    console.log(` Force refreshing data for ${symbol}`);\r\n    \r\n    // \r\n    technicalIndicatorsCache.clearSymbolCache(symbol);\r\n    precomputedIndicatorsAPI.clearCache();\r\n    \r\n    // \r\n    const originalFallback = this.fallbackToRealtime;\r\n    const originalPrecomputed = this.preferPrecomputed;\r\n    \r\n    this.fallbackToRealtime = true;\r\n    this.preferPrecomputed = false;\r\n    \r\n    try {\r\n      const data = await this.getTechnicalIndicators(symbol);\r\n      return data;\r\n    } finally {\r\n      // \r\n      this.fallbackToRealtime = originalFallback;\r\n      this.preferPrecomputed = originalPrecomputed;\r\n    }\r\n  }\r\n\r\n  // \r\n  async getBatchTechnicalIndicators(symbols, maxConcurrent = 3) {\r\n    const results = new Map();\r\n    const batches = [];\r\n    \r\n    // \r\n    for (let i = 0; i < symbols.length; i += maxConcurrent) {\r\n      batches.push(symbols.slice(i, i + maxConcurrent));\r\n    }\r\n    \r\n    console.log(` Processing ${symbols.length} symbols in ${batches.length} batches`);\r\n    \r\n    for (const batch of batches) {\r\n      const batchPromises = batch.map(async symbol => {\r\n        try {\r\n          const data = await this.getTechnicalIndicators(symbol);\r\n          return { symbol, success: true, data };\r\n        } catch (error) {\r\n          return { symbol, success: false, error: error.message };\r\n        }\r\n      });\r\n      \r\n      const batchResults = await Promise.all(batchPromises);\r\n      \r\n      batchResults.forEach(result => {\r\n        results.set(result.symbol, result);\r\n      });\r\n      \r\n      // \r\n      if (batches.indexOf(batch) < batches.length - 1) {\r\n        await new Promise(resolve => setTimeout(resolve, 100));\r\n      }\r\n    }\r\n    \r\n    return results;\r\n  }\r\n\r\n  // \r\n  async getDataSourceStatus() {\r\n    const status = {\r\n      precomputed: {\r\n        available: false,\r\n        symbols: [],\r\n        lastUpdate: null\r\n      },\r\n      cache: technicalIndicatorsCache.getCacheStats(),\r\n      realtime: {\r\n        available: true,\r\n        proxies: yahooFinanceAPI.corsProxies.length\r\n      }\r\n    };\r\n    \r\n    try {\r\n      const precomputedIndex = await precomputedIndicatorsAPI.getAvailableData();\r\n      if (precomputedIndex) {\r\n        status.precomputed = {\r\n          available: true,\r\n          symbols: precomputedIndex.symbols,\r\n          lastUpdate: precomputedIndex.generatedAt,\r\n          successful: precomputedIndex.successful,\r\n          failed: precomputedIndex.failed\r\n        };\r\n      }\r\n    } catch (error) {\r\n      console.warn('Failed to get precomputed status:', error);\r\n    }\r\n    \r\n    return status;\r\n  }\r\n\r\n  // \r\n  setPreferences(options) {\r\n    if (options.preferPrecomputed !== undefined) {\r\n      this.preferPrecomputed = options.preferPrecomputed;\r\n    }\r\n    if (options.fallbackToRealtime !== undefined) {\r\n      this.fallbackToRealtime = options.fallbackToRealtime;\r\n    }\r\n    if (options.maxPrecomputedAge !== undefined) {\r\n      this.maxPrecomputedAge = options.maxPrecomputedAge;\r\n    }\r\n    \r\n    console.log('Updated preferences:', {\r\n      preferPrecomputed: this.preferPrecomputed,\r\n      fallbackToRealtime: this.fallbackToRealtime,\r\n      maxPrecomputedAge: this.maxPrecomputedAge\r\n    });\r\n  }\r\n}\r\n\r\n// \r\nexport const hybridTechnicalIndicatorsAPI = new HybridTechnicalIndicatorsAPI();\r\nexport default hybridTechnicalIndicatorsAPI;","// \r\n// \r\n\r\nimport { hybridTechnicalIndicatorsAPI } from './hybridTechnicalIndicatorsApi.js'\r\nimport { performanceCache, CACHE_KEYS } from './performanceCache.js'\r\nimport { performanceMonitor } from './performanceMonitor.js'\r\n\r\nclass CacheWarmupService {\r\n  constructor() {\r\n    this.isWarming = false\r\n    this.warmupProgress = 0\r\n    this.warmupResults = new Map()\r\n    this.warmupStartTime = null\r\n    this.warmupEndTime = null\r\n    \r\n    // \r\n    this.config = {\r\n      maxConcurrent: 2, //  API \r\n      batchDelay: 2000, //  ()\r\n      retryAttempts: 2, // \r\n      retryDelay: 5000, // \r\n      enableAutoWarmup: this.isProductionEnvironment(), // \r\n      warmupOnVersionChange: false, // \r\n      warmupOnFirstLoad: false, // \r\n      warmupInterval: 24 * 60 * 60 * 1000, // 24  ()\r\n      minCacheCoverage: 0.95 //  95% \r\n    }\r\n    \r\n    // \r\n    this.trackedSymbols = [\r\n      'ASTS', 'RIVN', 'PL', 'ONDS', 'RDW', 'AVAV', 'MDB', 'ORCL', 'TSM', 'RKLB',\r\n      'CRM', 'NVDA', 'AVGO', 'AMZN', 'GOOG', 'META', 'NFLX', 'LEU', 'SMR', 'CRWV',\r\n      'IONQ', 'PLTR', 'HIMS', 'TSLA'\r\n    ]\r\n  }\r\n\r\n  // \r\n  async start() {\r\n    console.log(' Starting Cache Warmup Service...')\r\n    \r\n    //  \r\n    if (!this.isProductionEnvironment()) {\r\n      console.log(' Cache warmup disabled in development environment')\r\n      return\r\n    }\r\n    \r\n    try {\r\n      // \r\n      const shouldWarmup = await this.shouldPerformWarmup()\r\n      \r\n      if (shouldWarmup.needed) {\r\n        console.log(` Warmup needed: ${shouldWarmup.reason}`)\r\n        await this.performWarmup()\r\n      } else {\r\n        console.log(' Cache warmup not needed')\r\n      }\r\n      \r\n      // \r\n      if (this.config.enableAutoWarmup) {\r\n        this.schedulePeriodicWarmup()\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.error(' Failed to start cache warmup service:', error)\r\n    }\r\n  }\r\n\r\n  // \r\n  async shouldPerformWarmup() {\r\n    try {\r\n      // \r\n      const currentVersion = await this.getCurrentVersion()\r\n      const lastWarmupVersion = this.getLastWarmupVersion()\r\n      \r\n      if (this.config.warmupOnVersionChange && currentVersion !== lastWarmupVersion) {\r\n        return {\r\n          needed: true,\r\n          reason: `Version changed from ${lastWarmupVersion} to ${currentVersion}`\r\n        }\r\n      }\r\n      \r\n      // \r\n      const lastWarmupTime = this.getLastWarmupTime()\r\n      if (this.config.warmupOnFirstLoad && !lastWarmupTime) {\r\n        return {\r\n          needed: true,\r\n          reason: 'First load - no previous warmup found'\r\n        }\r\n      }\r\n      \r\n      // \r\n      if (lastWarmupTime) {\r\n        const timeSinceLastWarmup = Date.now() - lastWarmupTime\r\n        if (timeSinceLastWarmup > this.config.warmupInterval) {\r\n          return {\r\n            needed: true,\r\n            reason: `Time interval exceeded (${Math.round(timeSinceLastWarmup / 3600000)}h ago)`\r\n          }\r\n        }\r\n      }\r\n      \r\n      // \r\n      const cacheStats = await this.getCacheStats()\r\n      if (cacheStats.coverage < this.config.minCacheCoverage) { //  95% \r\n        return {\r\n          needed: true,\r\n          reason: `Low cache coverage (${Math.round(cacheStats.coverage * 100)}%)`\r\n        }\r\n      }\r\n      \r\n      return { needed: false, reason: 'Cache is fresh and complete' }\r\n      \r\n    } catch (error) {\r\n      console.error('Error checking warmup need:', error)\r\n      return { needed: true, reason: 'Error checking - performing warmup as fallback' }\r\n    }\r\n  }\r\n\r\n  // \r\n  async performWarmup() {\r\n    if (this.isWarming) {\r\n      console.log(' Warmup already in progress')\r\n      return this.warmupResults\r\n    }\r\n\r\n    console.log(` Starting cache warmup for ${this.trackedSymbols.length} symbols...`)\r\n    \r\n    this.isWarming = true\r\n    this.warmupProgress = 0\r\n    this.warmupResults.clear()\r\n    this.warmupStartTime = Date.now()\r\n    \r\n    const label = 'cache_warmup_total'\r\n    performanceMonitor.start(label)\r\n    \r\n    try {\r\n      // \r\n      const batches = this.createBatches(this.trackedSymbols, this.config.maxConcurrent)\r\n      \r\n      for (let i = 0; i < batches.length; i++) {\r\n        const batch = batches[i]\r\n        console.log(` Processing batch ${i + 1}/${batches.length}: ${batch.join(', ')}`)\r\n        \r\n        // \r\n        const batchPromises = batch.map(symbol => this.warmupSymbol(symbol))\r\n        const batchResults = await Promise.all(batchPromises)\r\n        \r\n        // \r\n        batchResults.forEach((result, index) => {\r\n          this.warmupResults.set(batch[index], result)\r\n        })\r\n        \r\n        // \r\n        this.warmupProgress = ((i + 1) / batches.length) * 100\r\n        console.log(` Warmup progress: ${Math.round(this.warmupProgress)}%`)\r\n        \r\n        // \r\n        if (i < batches.length - 1) {\r\n          console.log(` Waiting ${this.config.batchDelay}ms before next batch...`)\r\n          await this.sleep(this.config.batchDelay)\r\n        }\r\n      }\r\n      \r\n      this.warmupEndTime = Date.now()\r\n      const duration = this.warmupEndTime - this.warmupStartTime\r\n      \r\n      // \r\n      const stats = this.getWarmupStats()\r\n      \r\n      console.log(` Cache warmup completed in ${Math.round(duration / 1000)}s`)\r\n      console.log(` Results: ${stats.successful}/${stats.total} successful (${stats.successRate}%)`)\r\n      \r\n      // \r\n      this.saveWarmupRecord(stats)\r\n      \r\n      return this.warmupResults\r\n      \r\n    } catch (error) {\r\n      console.error(' Cache warmup failed:', error)\r\n      throw error\r\n    } finally {\r\n      this.isWarming = false\r\n      performanceMonitor.end(label)\r\n    }\r\n  }\r\n\r\n  // \r\n  async warmupSymbol(symbol, attempt = 1) {\r\n    const startTime = Date.now()\r\n    \r\n    try {\r\n      console.log(` Warming up ${symbol} (attempt ${attempt}/${this.config.retryAttempts + 1})`)\r\n      \r\n      //  ()\r\n      const data = await hybridTechnicalIndicatorsAPI.getTechnicalIndicators(symbol)\r\n      \r\n      const duration = Date.now() - startTime\r\n      \r\n      if (data && !data.error) {\r\n        console.log(` ${symbol} warmed up successfully in ${duration}ms (${data.source})`)\r\n        return {\r\n          success: true,\r\n          duration,\r\n          source: data.source,\r\n          timestamp: new Date().toISOString()\r\n        }\r\n      } else {\r\n        throw new Error(data?.error || 'Unknown error')\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.error(` Failed to warm up ${symbol} (attempt ${attempt}): ${error.message}`)\r\n      \r\n      // \r\n      if (attempt <= this.config.retryAttempts) {\r\n        console.log(` Retrying ${symbol} in ${this.config.retryDelay}ms...`)\r\n        await this.sleep(this.config.retryDelay)\r\n        return this.warmupSymbol(symbol, attempt + 1)\r\n      } else {\r\n        return {\r\n          success: false,\r\n          error: error.message,\r\n          duration: Date.now() - startTime,\r\n          timestamp: new Date().toISOString()\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // \r\n  createBatches(items, batchSize) {\r\n    const batches = []\r\n    for (let i = 0; i < items.length; i += batchSize) {\r\n      batches.push(items.slice(i, i + batchSize))\r\n    }\r\n    return batches\r\n  }\r\n\r\n  // \r\n  async getCurrentVersion() {\r\n    try {\r\n      //  package.json  ( GitHub Pages)\r\n      const packageUrl = this.getPackageJsonUrl()\r\n      \r\n      const response = await fetch(packageUrl)\r\n      if (response.ok) {\r\n        const pkg = await response.json()\r\n        return pkg.version || '1.0.0'\r\n      }\r\n    } catch (error) {\r\n      console.warn('Failed to fetch package.json:', error)\r\n      // \r\n      return Date.now().toString()\r\n    }\r\n    \r\n    return '1.0.0'\r\n  }\r\n\r\n  //  package.json URL ( GitHub Pages)\r\n  getPackageJsonUrl() {\r\n    //  baseUrl helper\r\n    import('./baseUrl.js').then(({ paths }) => {\r\n      return paths.packageJson();\r\n    });\r\n    \r\n    //  -  import.meta.env.BASE_URL\r\n    const base = import.meta.env.BASE_URL || '/';\r\n    return `${base}package.json`;\r\n  }\r\n\r\n  // \r\n  getLastWarmupVersion() {\r\n    return localStorage.getItem('cache_warmup_version') || null\r\n  }\r\n\r\n  // \r\n  getLastWarmupTime() {\r\n    const time = localStorage.getItem('cache_warmup_time')\r\n    return time ? parseInt(time) : null\r\n  }\r\n\r\n  // \r\n  async getCacheStats() {\r\n    let cachedCount = 0\r\n    \r\n    for (const symbol of this.trackedSymbols) {\r\n      try {\r\n        // \r\n        const cached = performanceCache.get(`technical_indicators_${symbol}`)\r\n        if (cached) {\r\n          cachedCount++\r\n        }\r\n      } catch (error) {\r\n        // \r\n      }\r\n    }\r\n    \r\n    return {\r\n      total: this.trackedSymbols.length,\r\n      cached: cachedCount,\r\n      coverage: cachedCount / this.trackedSymbols.length\r\n    }\r\n  }\r\n\r\n  // \r\n  getWarmupStats() {\r\n    const results = Array.from(this.warmupResults.values())\r\n    const successful = results.filter(r => r.success).length\r\n    const failed = results.filter(r => !r.success).length\r\n    \r\n    return {\r\n      total: results.length,\r\n      successful,\r\n      failed,\r\n      successRate: Math.round((successful / results.length) * 100),\r\n      duration: this.warmupEndTime - this.warmupStartTime,\r\n      averageDuration: results.reduce((sum, r) => sum + r.duration, 0) / results.length\r\n    }\r\n  }\r\n\r\n  // \r\n  saveWarmupRecord(stats) {\r\n    const currentVersion = this.getCurrentVersion()\r\n    \r\n    localStorage.setItem('cache_warmup_version', currentVersion)\r\n    localStorage.setItem('cache_warmup_time', Date.now().toString())\r\n    localStorage.setItem('cache_warmup_stats', JSON.stringify(stats))\r\n    \r\n    console.log(' Warmup record saved')\r\n  }\r\n\r\n  // \r\n  schedulePeriodicWarmup() {\r\n    console.log(` Scheduled periodic warmup every ${this.config.warmupInterval / 3600000} hours`)\r\n    \r\n    setInterval(async () => {\r\n      console.log(' Periodic warmup triggered')\r\n      try {\r\n        await this.performWarmup()\r\n      } catch (error) {\r\n        console.error(' Periodic warmup failed:', error)\r\n      }\r\n    }, this.config.warmupInterval)\r\n  }\r\n\r\n  // \r\n  async triggerManualWarmup() {\r\n    console.log(' Manual warmup triggered')\r\n    return this.performWarmup()\r\n  }\r\n\r\n  // \r\n  getWarmupStatus() {\r\n    return {\r\n      isWarming: this.isWarming,\r\n      progress: this.warmupProgress,\r\n      results: Object.fromEntries(this.warmupResults),\r\n      lastWarmupTime: this.getLastWarmupTime(),\r\n      lastWarmupVersion: this.getLastWarmupVersion(),\r\n      trackedSymbols: this.trackedSymbols,\r\n      config: this.config\r\n    }\r\n  }\r\n\r\n  // \r\n  sleep(ms) {\r\n    return new Promise(resolve => setTimeout(resolve, ms))\r\n  }\r\n\r\n  // \r\n  isProductionEnvironment() {\r\n    //  Vite \r\n    return import.meta.env.PROD;\r\n  }\r\n\r\n  // \r\n  updateConfig(newConfig) {\r\n    this.config = { ...this.config, ...newConfig }\r\n    console.log(' Cache warmup config updated:', this.config)\r\n  }\r\n\r\n  // \r\n  addTrackedSymbol(symbol) {\r\n    if (!this.trackedSymbols.includes(symbol)) {\r\n      this.trackedSymbols.push(symbol)\r\n      console.log(` Added ${symbol} to tracked symbols`)\r\n    }\r\n  }\r\n\r\n  // \r\n  removeTrackedSymbol(symbol) {\r\n    const index = this.trackedSymbols.indexOf(symbol)\r\n    if (index > -1) {\r\n      this.trackedSymbols.splice(index, 1)\r\n      console.log(` Removed ${symbol} from tracked symbols`)\r\n    }\r\n  }\r\n}\r\n\r\n// \r\nexport const cacheWarmupService = new CacheWarmupService()\r\nexport default cacheWarmupService","/**\r\n * Widget Load Manager - \r\n *  Widget \r\n */\r\nclass WidgetLoadManager {\r\n  constructor() {\r\n    this.maxConcurrent = 3 //  3  Widget\r\n    this.currentLoading = 0\r\n    this.queue = []\r\n    this.loadingWidgets = new Set()\r\n    this.stats = {\r\n      totalRequests: 0,\r\n      completedRequests: 0,\r\n      failedRequests: 0,\r\n      averageLoadTime: 0,\r\n      loadTimes: []\r\n    }\r\n  }\r\n\r\n  /**\r\n   *  Widget \r\n   * @param {Function} loadFunction - Widget \r\n   * @param {string} widgetId - Widget \r\n   * @param {number} priority -  (1=, 2=, 3=)\r\n   * @returns {Promise}  Promise\r\n   */\r\n  async addToQueue(loadFunction, widgetId, priority = 2) {\r\n    return new Promise((resolve, reject) => {\r\n      const task = {\r\n        id: widgetId,\r\n        loadFunction,\r\n        priority,\r\n        resolve,\r\n        reject,\r\n        createdAt: Date.now()\r\n      }\r\n\r\n      // \r\n      if (this.loadingWidgets.has(widgetId)) {\r\n        console.warn(`Widget ${widgetId} is already loading, skipping duplicate request`)\r\n        reject(new Error('Widget already loading'))\r\n        return\r\n      }\r\n\r\n      // \r\n      this.insertByPriority(task)\r\n      this.stats.totalRequests++\r\n      \r\n      console.log(`WidgetLoadManager: Added ${widgetId} to queue (priority: ${priority}, queue size: ${this.queue.length})`)\r\n      \r\n      // \r\n      this.processQueue()\r\n    })\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  insertByPriority(task) {\r\n    let insertIndex = this.queue.length\r\n    \r\n    // \r\n    for (let i = 0; i < this.queue.length; i++) {\r\n      if (task.priority < this.queue[i].priority) {\r\n        insertIndex = i\r\n        break\r\n      }\r\n    }\r\n    \r\n    this.queue.splice(insertIndex, 0, task)\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  async processQueue() {\r\n    // \r\n    if (this.currentLoading >= this.maxConcurrent || this.queue.length === 0) {\r\n      return\r\n    }\r\n\r\n    // \r\n    const task = this.queue.shift()\r\n    this.currentLoading++\r\n    this.loadingWidgets.add(task.id)\r\n\r\n    const startTime = Date.now()\r\n    \r\n    console.log(`WidgetLoadManager: Starting load for ${task.id} (${this.currentLoading}/${this.maxConcurrent} slots used)`)\r\n\r\n    try {\r\n      // \r\n      await task.loadFunction()\r\n      \r\n      const loadTime = Date.now() - startTime\r\n      this.updateStats(loadTime, true)\r\n      \r\n      console.log(`WidgetLoadManager: Successfully loaded ${task.id} in ${loadTime}ms`)\r\n      task.resolve()\r\n      \r\n    } catch (error) {\r\n      const loadTime = Date.now() - startTime\r\n      this.updateStats(loadTime, false)\r\n      \r\n      console.error(`WidgetLoadManager: Failed to load ${task.id} after ${loadTime}ms:`, error)\r\n      task.reject(error)\r\n      \r\n    } finally {\r\n      // \r\n      this.currentLoading--\r\n      this.loadingWidgets.delete(task.id)\r\n      \r\n      // \r\n      setTimeout(() => this.processQueue(), 100) // \r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  updateStats(loadTime, success) {\r\n    if (success) {\r\n      this.stats.completedRequests++\r\n    } else {\r\n      this.stats.failedRequests++\r\n    }\r\n    \r\n    this.stats.loadTimes.push(loadTime)\r\n    \r\n    //  100 \r\n    if (this.stats.loadTimes.length > 100) {\r\n      this.stats.loadTimes.shift()\r\n    }\r\n    \r\n    // \r\n    this.stats.averageLoadTime = this.stats.loadTimes.reduce((sum, time) => sum + time, 0) / this.stats.loadTimes.length\r\n  }\r\n\r\n  /**\r\n   *  Widget \r\n   */\r\n  cancelWidget(widgetId) {\r\n    // \r\n    const taskIndex = this.queue.findIndex(task => task.id === widgetId)\r\n    if (taskIndex !== -1) {\r\n      const task = this.queue.splice(taskIndex, 1)[0]\r\n      task.reject(new Error('Widget load cancelled'))\r\n      console.log(`WidgetLoadManager: Cancelled queued widget ${widgetId}`)\r\n      return true\r\n    }\r\n    \r\n    return false\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  clearQueue() {\r\n    const cancelledCount = this.queue.length\r\n    this.queue.forEach(task => {\r\n      task.reject(new Error('Queue cleared'))\r\n    })\r\n    this.queue = []\r\n    console.log(`WidgetLoadManager: Cleared queue, cancelled ${cancelledCount} tasks`)\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  getStatus() {\r\n    return {\r\n      currentLoading: this.currentLoading,\r\n      queueSize: this.queue.length,\r\n      maxConcurrent: this.maxConcurrent,\r\n      stats: { ...this.stats }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  setMaxConcurrent(max) {\r\n    this.maxConcurrent = Math.max(1, Math.min(10, max)) //  1-10 \r\n    console.log(`WidgetLoadManager: Max concurrent set to ${this.maxConcurrent}`)\r\n    \r\n    // \r\n    if (this.currentLoading < this.maxConcurrent) {\r\n      this.processQueue()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  resetStats() {\r\n    this.stats = {\r\n      totalRequests: 0,\r\n      completedRequests: 0,\r\n      failedRequests: 0,\r\n      averageLoadTime: 0,\r\n      loadTimes: []\r\n    }\r\n    console.log('WidgetLoadManager: Stats reset')\r\n  }\r\n}\r\n\r\n// \r\nexport const widgetLoadManager = new WidgetLoadManager()\r\n\r\n//  window \r\nif (import.meta.env.DEV) {\r\n  window.widgetLoadManager = widgetLoadManager\r\n}","<template>\r\n  <div \r\n    class=\"lazy-widget\" \r\n    :id=\"containerId\" \r\n    ref=\"container\"\r\n    :style=\"{ height: height }\"\r\n  >\r\n    <!--  -->\r\n    <div v-if=\"!isVisible && !loaded\" class=\"widget-placeholder\">\r\n      <div class=\"placeholder-content\">\r\n        <div class=\"placeholder-icon\"></div>\r\n        <div class=\"placeholder-text\">{{ widgetType }} Widget</div>\r\n        <div class=\"placeholder-subtext\">Scroll to load</div>\r\n      </div>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div v-if=\"isVisible && !loaded && !error\" class=\"widget-loading\">\r\n      <div class=\"loading-spinner\"></div>\r\n      <span>Loading {{ widgetType }}...</span>\r\n    </div>\r\n    \r\n    <!--  -->\r\n    <div v-if=\"error\" class=\"widget-error\">\r\n      <span> Failed to load</span>\r\n      <button @click=\"retry\" class=\"retry-btn\">Retry</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { widgetLoadManager } from '@/utils/widgetLoadManager'\r\n\r\nexport default {\r\n  name: 'LazyTradingViewWidget',\r\n  props: {\r\n    widgetType: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    config: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    scriptUrl: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    height: {\r\n      type: String,\r\n      default: '400px'\r\n    },\r\n    priority: {\r\n      type: Number,\r\n      default: 1 // 1=, 2=, 3=\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      isVisible: false,\r\n      loaded: false,\r\n      error: false,\r\n      observer: null,\r\n      loadStartTime: 0\r\n    }\r\n  },\r\n  computed: {\r\n    containerId() {\r\n      return `lazy-widget-${this.widgetType}-${Date.now()}`\r\n    }\r\n  },\r\n  mounted() {\r\n    this.setupIntersectionObserver()\r\n  },\r\n  beforeUnmount() {\r\n    if (this.observer) {\r\n      this.observer.disconnect()\r\n    }\r\n  },\r\n  methods: {\r\n    setupIntersectionObserver() {\r\n      //  rootMargin\r\n      const rootMargins = {\r\n        1: '200px', //  200px \r\n        2: '100px', //  100px \r\n        3: '50px'   //  50px \r\n      }\r\n\r\n      this.observer = new IntersectionObserver(\r\n        (entries) => {\r\n          entries.forEach((entry) => {\r\n            if (entry.isIntersecting && !this.loaded && !this.error) {\r\n              this.isVisible = true\r\n              this.loadWidget()\r\n              this.observer.disconnect() // \r\n            }\r\n          })\r\n        },\r\n        {\r\n          rootMargin: rootMargins[this.priority] || '100px',\r\n          threshold: 0.1\r\n        }\r\n      )\r\n\r\n      this.observer.observe(this.$refs.container)\r\n    },\r\n\r\n    async loadWidget() {\r\n      this.loadStartTime = performance.now()\r\n      \r\n      try {\r\n        // \r\n        const delays = {\r\n          1: 0,     // \r\n          2: 500,   //  500ms\r\n          3: 1000   //  1000ms\r\n        }\r\n\r\n        const delay = delays[this.priority] || 0\r\n        if (delay > 0) {\r\n          await new Promise(resolve => setTimeout(resolve, delay))\r\n        }\r\n\r\n        //  Widget Load Manager \r\n        const widgetId = `lazy-${this.widgetType}-${this.containerId}`\r\n        await widgetLoadManager.addToQueue(\r\n          () => this.createWidget(),\r\n          widgetId,\r\n          this.priority\r\n        )\r\n      } catch (err) {\r\n        console.error('Failed to load widget:', err)\r\n        this.error = true\r\n      }\r\n    },\r\n\r\n    async createWidget() {\r\n      return new Promise((resolve, reject) => {\r\n        this.$nextTick(() => {\r\n          const container = this.$refs.container\r\n          if (!container) {\r\n            reject(new Error('Container not found'))\r\n            return\r\n          }\r\n\r\n          // \r\n          const existingContent = container.querySelector('.widget-placeholder, .widget-loading')\r\n          if (existingContent) {\r\n            existingContent.style.display = 'none'\r\n          }\r\n\r\n          try {\r\n            //  TradingView \r\n            const widgetContainer = document.createElement('div')\r\n            widgetContainer.className = 'tradingview-widget-container'\r\n            widgetContainer.style.height = '100%'\r\n            widgetContainer.style.width = '100%'\r\n\r\n            const widgetContent = document.createElement('div')\r\n            widgetContent.className = 'tradingview-widget-container__widget'\r\n            widgetContent.style.height = '100%'\r\n            widgetContent.style.width = '100%'\r\n\r\n            widgetContainer.appendChild(widgetContent)\r\n\r\n            //  TradingView script - \r\n            const script = document.createElement('script')\r\n            script.type = 'text/javascript'\r\n            script.src = this.scriptUrl\r\n            script.async = true\r\n            \r\n            //  script \r\n            const configJson = JSON.stringify(this.config)\r\n            script.innerHTML = configJson\r\n            \r\n            // \r\n            console.log(` Creating ${this.widgetType} widget with config:`, this.config)\r\n            console.log(` Config JSON:`, configJson)\r\n            \r\n            //  - \r\n            const timeouts = {\r\n              1: 8000,  // 8\r\n              2: 10000, // 10\r\n              3: 12000  // 12\r\n            }\r\n            \r\n            const timeout = setTimeout(() => {\r\n              console.warn(`${this.widgetType} widget load timeout`)\r\n              this.error = true\r\n              reject(new Error('Widget load timeout'))\r\n            }, timeouts[this.priority] || 10000)\r\n            \r\n            script.onload = () => {\r\n              clearTimeout(timeout)\r\n              this.loaded = true\r\n              \r\n              const loadTime = performance.now() - this.loadStartTime\r\n              console.log(` ${this.widgetType} widget loaded in ${loadTime.toFixed(2)}ms (Priority: ${this.priority})`)\r\n              \r\n              resolve()\r\n            }\r\n            \r\n            script.onerror = (error) => {\r\n              clearTimeout(timeout)\r\n              console.error(` ${this.widgetType} script load failed:`, error)\r\n              this.error = true\r\n              reject(new Error('Script load failed'))\r\n            }\r\n            \r\n            //  DOM\r\n            widgetContent.appendChild(script)\r\n            container.appendChild(widgetContainer)\r\n            \r\n          } catch (error) {\r\n            console.error(` ${this.widgetType} widget creation failed:`, error)\r\n            this.error = true\r\n            reject(error)\r\n          }\r\n        })\r\n      })\r\n    },\r\n\r\n    async retry() {\r\n      this.error = false\r\n      this.loaded = false\r\n      await this.loadWidget()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.lazy-widget {\r\n  width: 100%;\r\n  position: relative;\r\n  overflow: hidden;\r\n  border-radius: 8px;\r\n}\r\n\r\n/*  */\r\n.widget-placeholder {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);\r\n  border: 2px dashed #dee2e6;\r\n  border-radius: 8px;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.widget-placeholder:hover {\r\n  background: linear-gradient(135deg, #e9ecef 0%, #dee2e6 100%);\r\n  border-color: #adb5bd;\r\n}\r\n\r\n.placeholder-content {\r\n  text-align: center;\r\n  color: #6c757d;\r\n}\r\n\r\n.placeholder-icon {\r\n  font-size: 2rem;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.placeholder-text {\r\n  font-size: 1rem;\r\n  font-weight: 600;\r\n  margin-bottom: 0.25rem;\r\n}\r\n\r\n.placeholder-subtext {\r\n  font-size: 0.8rem;\r\n  opacity: 0.7;\r\n}\r\n\r\n/*  */\r\n.widget-loading {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n  color: #6c757d;\r\n}\r\n\r\n.loading-spinner {\r\n  width: 32px;\r\n  height: 32px;\r\n  border: 3px solid #e9ecef;\r\n  border-top: 3px solid #007bff;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n.widget-loading span {\r\n  font-size: 0.9rem;\r\n  font-weight: 500;\r\n}\r\n\r\n/*  */\r\n.widget-error {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  background: #f8d7da;\r\n  border: 1px solid #f5c6cb;\r\n  border-radius: 8px;\r\n  color: #721c24;\r\n}\r\n\r\n.retry-btn {\r\n  margin-top: 0.5rem;\r\n  padding: 0.5rem 1rem;\r\n  background: #dc3545;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.85rem;\r\n  font-weight: 500;\r\n  transition: background-color 0.2s;\r\n}\r\n\r\n.retry-btn:hover {\r\n  background: #c82333;\r\n}\r\n\r\n/* TradingView  */\r\n:global(.lazy-widget .tradingview-widget-container) {\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n  overflow: hidden !important;\r\n}\r\n\r\n:global(.lazy-widget .tradingview-widget-container__widget) {\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n}\r\n</style>","<template>\r\n  <div class=\"vix-widget-container\" ref=\"vixContainer\" :style=\"{ height: '600px' }\">\r\n    <div v-if=\"loading\" class=\"loading-state\">\r\n      <div class=\"loading-spinner\"></div>\r\n      <span>Loading VIX Index...</span>\r\n    </div>\r\n    <div v-if=\"error\" class=\"error-state\">\r\n      <span> Failed to load VIX</span>\r\n      <button @click=\"loadVixWidget\" class=\"retry-btn\">Retry</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'VixWidget',\r\n  data() {\r\n    return {\r\n      loading: true,\r\n      error: false,\r\n      widgetId: `vix-widget-${Date.now()}`\r\n    }\r\n  },\r\n  mounted() {\r\n    this.loadVixWidget()\r\n  },\r\n  methods: {\r\n    async loadVixWidget() {\r\n      this.loading = true\r\n      this.error = false\r\n      \r\n      try {\r\n        // \r\n        const container = this.$refs.vixContainer\r\n        if (!container) return\r\n        \r\n        // \r\n        while (container.firstChild) {\r\n          container.removeChild(container.firstChild)\r\n        }\r\n        \r\n        console.log(' Starting VIX widget creation with FRED:VIXCLS...')\r\n        \r\n        //  LazyTradingViewWidget \r\n        await this.createWidget()\r\n        \r\n      } catch (error) {\r\n        console.error(' VIX widget creation failed:', error)\r\n        this.error = true\r\n        this.loading = false\r\n      }\r\n    },\r\n\r\n    async createWidget() {\r\n      return new Promise((resolve, reject) => {\r\n        this.$nextTick(() => {\r\n          const container = this.$refs.vixContainer\r\n          if (!container) {\r\n            reject(new Error('Container not found'))\r\n            return\r\n          }\r\n\r\n          try {\r\n            //  TradingView  -  LazyTradingViewWidget\r\n            const widgetContainer = document.createElement('div')\r\n            widgetContainer.className = 'tradingview-widget-container'\r\n            widgetContainer.style.height = '100%'\r\n            widgetContainer.style.width = '100%'\r\n\r\n            const widgetContent = document.createElement('div')\r\n            widgetContent.className = 'tradingview-widget-container__widget'\r\n            widgetContent.style.height = '100%'\r\n            widgetContent.style.width = '100%'\r\n\r\n            widgetContainer.appendChild(widgetContent)\r\n\r\n            //  script  -  LazyTradingViewWidget \r\n            const script = document.createElement('script')\r\n            script.type = 'text/javascript'\r\n            script.src = 'https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js'\r\n            script.async = true\r\n            \r\n            // VIX  -  FRED:VIXCLS Market Daily Insight \r\n            const vixConfig = {\r\n              \"lineWidth\": 2,\r\n              \"lineType\": 2,\r\n              \"chartType\": \"line\",\r\n              \"showVolume\": false,\r\n              \"fontColor\": \"rgb(106, 109, 120)\",\r\n              \"gridLineColor\": \"rgba(46, 46, 46, 0.06)\",\r\n              \"volumeUpColor\": \"rgba(34, 171, 148, 0.5)\",\r\n              \"volumeDownColor\": \"rgba(247, 82, 95, 0.5)\",\r\n              \"backgroundColor\": \"#ffffff\",\r\n              \"widgetFontColor\": \"#0F0F0F\",\r\n              \"upColor\": \"#22ab94\",\r\n              \"downColor\": \"#f7525f\",\r\n              \"borderUpColor\": \"#22ab94\",\r\n              \"borderDownColor\": \"#f7525f\",\r\n              \"wickUpColor\": \"#22ab94\",\r\n              \"wickDownColor\": \"#f7525f\",\r\n              \"colorTheme\": \"light\",\r\n              \"isTransparent\": true,\r\n              \"locale\": \"en\",\r\n              \"chartOnly\": false,\r\n              \"scalePosition\": \"right\",\r\n              \"scaleMode\": \"Normal\",\r\n              \"fontFamily\": \"-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif\",\r\n              \"valuesTracking\": \"1\",\r\n              \"changeMode\": \"price-and-percent\",\r\n              \"symbols\": [[\"FRED:VIXCLS|12M\"]],\r\n              \"dateRanges\": [\"12m|1D\", \"60m|1W\", \"all|1M\"],\r\n              \"fontSize\": \"10\",\r\n              \"headerFontSize\": \"medium\",\r\n              \"autosize\": true,\r\n              \"width\": \"100%\",\r\n              \"height\": \"100%\",\r\n              \"noTimeScale\": false,\r\n              \"hideDateRanges\": false,\r\n              \"hideMarketStatus\": false,\r\n              \"hideSymbolLogo\": false\r\n            }\r\n            \r\n            //  innerHTML  textContent -  LazyTradingViewWidget\r\n            const configJson = JSON.stringify(vixConfig)\r\n            script.innerHTML = configJson\r\n            \r\n            console.log(' FRED:VIXCLS Config:', vixConfig)\r\n            console.log(' Config JSON:', configJson)\r\n            \r\n            // \r\n            const timeout = setTimeout(() => {\r\n              console.warn(' VIX widget load timeout')\r\n              this.error = true\r\n              this.loading = false\r\n              reject(new Error('Widget load timeout'))\r\n            }, 8000)\r\n            \r\n            // \r\n            script.onload = () => {\r\n              clearTimeout(timeout)\r\n              console.log(' FRED:VIXCLS widget script loaded')\r\n              this.loading = false\r\n              resolve()\r\n            }\r\n            \r\n            script.onerror = (error) => {\r\n              clearTimeout(timeout)\r\n              console.error(' VIX widget script failed:', error)\r\n              this.error = true\r\n              this.loading = false\r\n              reject(new Error('Script load failed'))\r\n            }\r\n            \r\n            //  DOM -  LazyTradingViewWidget \r\n            widgetContent.appendChild(script)\r\n            container.appendChild(widgetContainer)\r\n            \r\n          } catch (error) {\r\n            console.error(' VIX widget creation failed:', error)\r\n            this.error = true\r\n            this.loading = false\r\n            reject(error)\r\n          }\r\n        })\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.vix-widget-container {\r\n  width: 100%;\r\n  position: relative;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n}\r\n\r\n.loading-state {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  background: #f8f9fa;\r\n  color: #6c757d;\r\n}\r\n\r\n.loading-spinner {\r\n  width: 32px;\r\n  height: 32px;\r\n  border: 3px solid #e9ecef;\r\n  border-top: 3px solid #007bff;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n.error-state {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  background: #f8d7da;\r\n  border: 1px solid #f5c6cb;\r\n  color: #721c24;\r\n}\r\n\r\n.retry-btn {\r\n  margin-top: 0.5rem;\r\n  padding: 0.5rem 1rem;\r\n  background: #dc3545;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.85rem;\r\n}\r\n\r\n.retry-btn:hover {\r\n  background: #c82333;\r\n}\r\n\r\n:global(.vix-widget-container .tradingview-widget-container) {\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n  overflow: hidden !important; /*  LazyTradingViewWidget */\r\n}\r\n\r\n:global(.vix-widget-container .tradingview-widget-container__widget) {\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n}\r\n</style>","<template>\r\n  <div class=\"fear-greed-gauge-container\">\r\n    <div class=\"widget-header\">\r\n      <h3>Fear & Greed Index Gauge</h3>\r\n      <div class=\"chart-info\">\r\n        <span class=\"chart-description\">Based on Zeiierman's Algorithm</span>\r\n      </div>\r\n    </div>\r\n    \r\n    <div class=\"market-fng-gauge__meter-container\">\r\n      <!-- Left Side: Current Sentiment + Gauge -->\r\n      <div class=\"left-side\">\r\n        <!-- Current Sentiment Status - Above gauge, left side only -->\r\n        <div class=\"current-sentiment\" :class=\"sentimentClass\">\r\n          <div class=\"sentiment-indicator\">\r\n            <div class=\"sentiment-dot\"></div>\r\n            <span class=\"sentiment-text\">{{ currentSentiment }}</span>\r\n          </div>\r\n          <div class=\"sentiment-description\">{{ sentimentDescription }}</div>\r\n        </div>\r\n        \r\n        <!-- Semicircle Gauge -->\r\n        <div class=\"gauge-wrapper\">\r\n        <svg class=\"gauge-svg\" viewBox=\"0 0 400 240\" xmlns=\"http://www.w3.org/2000/svg\">\r\n          <!-- Background Arc with Color Zones -->\r\n          <defs>\r\n            <linearGradient id=\"gaugeGradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\r\n              <!--  (0-25):  -->\r\n              <stop offset=\"0%\" style=\"stop-color:#e57373;stop-opacity:1\" />\r\n              <stop offset=\"12.5%\" style=\"stop-color:#ef5350;stop-opacity:1\" />\r\n              <stop offset=\"25%\" style=\"stop-color:#ffb74d;stop-opacity:1\" />\r\n              \r\n              <!--  (25-45):  -->\r\n              <stop offset=\"35%\" style=\"stop-color:#ffcc80;stop-opacity:1\" />\r\n              <stop offset=\"45%\" style=\"stop-color:#ffd54f;stop-opacity:1\" />\r\n              \r\n              <!--  (45-55):  -->\r\n              <stop offset=\"50%\" style=\"stop-color:#fff176;stop-opacity:1\" />\r\n              <stop offset=\"55%\" style=\"stop-color:#fff59d;stop-opacity:1\" />\r\n              \r\n              <!--  (55-75):  -->\r\n              <stop offset=\"65%\" style=\"stop-color:#aed581;stop-opacity:1\" />\r\n              <stop offset=\"75%\" style=\"stop-color:#81c784;stop-opacity:1\" />\r\n              \r\n              <!--  (75-100):  -->\r\n              <stop offset=\"87.5%\" style=\"stop-color:#66bb6a;stop-opacity:1\" />\r\n              <stop offset=\"100%\" style=\"stop-color:#4db6ac;stop-opacity:1\" />\r\n            </linearGradient>\r\n          </defs>\r\n          \r\n          <!-- Main Arc -->\r\n          <path\r\n            d=\"M 40 200 A 160 160 0 0 1 360 200\"\r\n            fill=\"none\"\r\n            stroke=\"url(#gaugeGradient)\"\r\n            stroke-width=\"20\"\r\n            stroke-linecap=\"round\"\r\n          />\r\n          \r\n          <!-- Needle -->\r\n          <g class=\"needle-group\">\r\n            <line\r\n              :x1=\"200\"\r\n              :y1=\"200\"\r\n              :x2=\"needleX\"\r\n              :y2=\"needleY\"\r\n              stroke=\"#333\"\r\n              stroke-width=\"4\"\r\n              stroke-linecap=\"round\"\r\n              class=\"gauge-needle\"\r\n            />\r\n            <!-- Needle Center -->\r\n            <circle cx=\"200\" cy=\"200\" r=\"8\" fill=\"#333\" />\r\n            <circle cx=\"200\" cy=\"200\" r=\"4\" fill=\"#fff\" />\r\n          </g>\r\n          \r\n          <!-- Value Display -->\r\n          <text x=\"200\" y=\"230\" text-anchor=\"middle\" class=\"gauge-value\">{{ fearGreedValue.toFixed(0) }}</text>\r\n        </svg>\r\n        \r\n        <!-- Labels -->\r\n        <div class=\"gauge-labels\">\r\n          <div class=\"label-item extreme-fear\">\r\n            <span class=\"label-text\">Extreme Fear</span>\r\n            <span class=\"label-range\">0-25</span>\r\n          </div>\r\n          <div class=\"label-item fear\">\r\n            <span class=\"label-text\">Fear</span>\r\n            <span class=\"label-range\">25-45</span>\r\n          </div>\r\n          <div class=\"label-item neutral\">\r\n            <span class=\"label-text\">Neutral</span>\r\n            <span class=\"label-range\">45-55</span>\r\n          </div>\r\n          <div class=\"label-item greed\">\r\n            <span class=\"label-text\">Greed</span>\r\n            <span class=\"label-range\">55-75</span>\r\n          </div>\r\n          <div class=\"label-item extreme-greed\">\r\n            <span class=\"label-text\">Extreme Greed</span>\r\n            <span class=\"label-range\">75-100</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      </div>\r\n      \r\n      <!-- Right Side: Component Breakdown -->\r\n      <div class=\"components-section\">\r\n        <h4>Index Components</h4>\r\n        <div class=\"components-grid\">\r\n          <div class=\"component-item\">\r\n            <span class=\"component-name\">S&P 500 vs 125-day MA</span>\r\n            <div class=\"component-bar\">\r\n              <div class=\"component-fill\" :style=\"{ width: components.sp125 + '%' }\"></div>\r\n              <span class=\"component-value\">{{ components.sp125 }}</span>\r\n            </div>\r\n          </div>\r\n          <div class=\"component-item\">\r\n            <span class=\"component-name\">52-Week High/Low Strength</span>\r\n            <div class=\"component-bar\">\r\n              <div class=\"component-fill\" :style=\"{ width: components.hl52 + '%' }\"></div>\r\n              <span class=\"component-value\">{{ components.hl52 }}</span>\r\n            </div>\r\n          </div>\r\n          <div class=\"component-item\">\r\n            <span class=\"component-name\">Market Breadth (McClellan)</span>\r\n            <div class=\"component-bar\">\r\n              <div class=\"component-fill\" :style=\"{ width: components.mcsi + '%' }\"></div>\r\n              <span class=\"component-value\">{{ components.mcsi }}</span>\r\n            </div>\r\n          </div>\r\n          <div class=\"component-item\">\r\n            <span class=\"component-name\">Put/Call Ratio</span>\r\n            <div class=\"component-bar\">\r\n              <div class=\"component-fill\" :style=\"{ width: components.putCall + '%' }\"></div>\r\n              <span class=\"component-value\">{{ components.putCall }}</span>\r\n            </div>\r\n          </div>\r\n          <div class=\"component-item\">\r\n            <span class=\"component-name\">VIX vs 50-day MA</span>\r\n            <div class=\"component-bar\">\r\n              <div class=\"component-fill\" :style=\"{ width: components.vix50 + '%' }\"></div>\r\n              <span class=\"component-value\">{{ components.vix50 }}</span>\r\n            </div>\r\n          </div>\r\n          <div class=\"component-item\">\r\n            <span class=\"component-name\">Safe Haven Demand</span>\r\n            <div class=\"component-bar\">\r\n              <div class=\"component-fill\" :style=\"{ width: components.safe + '%' }\"></div>\r\n              <span class=\"component-value\">{{ components.safe }}</span>\r\n            </div>\r\n          </div>\r\n          <div class=\"component-item\">\r\n            <span class=\"component-name\">Junk Bond Demand</span>\r\n            <div class=\"component-bar\">\r\n              <div class=\"component-fill\" :style=\"{ width: components.yieldSpread + '%' }\"></div>\r\n              <span class=\"component-value\">{{ components.yieldSpread }}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'ZeiiermanFearGreedGauge',\r\n  data() {\r\n    return {\r\n      // Mock data based on Zeiierman's algorithm components - Adjusted for index value of 58\r\n      components: {\r\n        sp125: 65,        // S&P 500 vs 125-day moving average\r\n        hl52: 52,         // 52-week high/low strength  \r\n        mcsi: 60,         // McClellan Summation Index (Market Breadth)\r\n        putCall: 45,      // Put/Call ratio (inverted)\r\n        vix50: 55,        // VIX vs 50-day MA (inverted)\r\n        safe: 62,         // Safe Haven Demand (Stock vs Bond performance)\r\n        yieldSpread: 67   // Junk Bond Demand (Yield spread)\r\n      },\r\n      lastUpdate: new Date()\r\n    }\r\n  },\r\n  computed: {\r\n    fearGreedValue() {\r\n      // Calculate average of all components (Zeiierman's method)\r\n      const values = Object.values(this.components)\r\n      const average = values.reduce((sum, val) => sum + val, 0) / values.length\r\n      return average\r\n    },\r\n    \r\n    needleAngle() {\r\n      // Convert 0-100 value to -90 to +90 degrees (180 degree arc)\r\n      return (this.fearGreedValue - 50) * 1.8\r\n    },\r\n    \r\n    needleX() {\r\n      const angle = this.needleAngle * (Math.PI / 180)\r\n      return 200 + 140 * Math.sin(angle)\r\n    },\r\n    \r\n    needleY() {\r\n      const angle = this.needleAngle * (Math.PI / 180)\r\n      return 200 - 140 * Math.cos(angle)\r\n    },\r\n    \r\n    currentSentiment() {\r\n      if (this.fearGreedValue <= 25) return 'Extreme Fear'\r\n      if (this.fearGreedValue <= 45) return 'Fear'\r\n      if (this.fearGreedValue <= 55) return 'Neutral'\r\n      if (this.fearGreedValue <= 75) return 'Greed'\r\n      return 'Extreme Greed'\r\n    },\r\n    \r\n    sentimentClass() {\r\n      if (this.fearGreedValue <= 25) return 'extreme-fear'\r\n      if (this.fearGreedValue <= 45) return 'fear'\r\n      if (this.fearGreedValue <= 55) return 'neutral'\r\n      if (this.fearGreedValue <= 75) return 'greed'\r\n      return 'extreme-greed'\r\n    },\r\n    \r\n    sentimentDescription() {\r\n      if (this.fearGreedValue <= 25) return 'Market showing extreme pessimism and panic selling conditions'\r\n      if (this.fearGreedValue <= 45) return 'Elevated market anxiety with defensive investor positioning'\r\n      if (this.fearGreedValue <= 55) return 'Balanced market sentiment with mixed investor signals'\r\n      if (this.fearGreedValue <= 75) return 'Optimistic market conditions with increased risk appetite'\r\n      return 'Excessive market euphoria indicating potential overvaluation'\r\n    }\r\n  },\r\n  mounted() {\r\n    // 58\r\n    console.log('Zeiierman Fear & Greed Index loaded with fixed value:', this.fearGreedValue)\r\n  },\r\n  methods: {\r\n    // \r\n    updateComponents() {\r\n      // \r\n      this.lastUpdate = new Date()\r\n      console.log('Zeiierman Fear & Greed Index:', this.fearGreedValue)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.fear-greed-gauge-container {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  margin-bottom: 2rem;\r\n  overflow: hidden; /* Prevent container overflow */\r\n  position: relative;\r\n}\r\n\r\n.widget-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 1rem;\r\n  padding-bottom: 0.75rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.widget-header h3 {\r\n  font-size: 1.1rem;\r\n  font-weight: 600;\r\n  color: #333;\r\n  margin: 0;\r\n}\r\n\r\n.chart-info {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-end;\r\n}\r\n\r\n.chart-description {\r\n  font-size: 0.85rem;\r\n  color: #6c757d;\r\n  font-style: italic;\r\n}\r\n\r\n.market-fng-gauge__meter-container {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 2.5rem;\r\n  align-items: start;\r\n  overflow: hidden; /* Prevent grid overflow */\r\n}\r\n\r\n/* Left Side Container */\r\n.left-side {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1.5rem;\r\n  max-width: 100%;\r\n  overflow: hidden;\r\n}\r\n\r\n/* Current Sentiment - Now positioned in left side only */\r\n.current-sentiment {\r\n  text-align: center;\r\n  padding: 1.25rem;\r\n  border-radius: 12px;\r\n  background: #f8f9fa;\r\n  border: 2px solid transparent;\r\n  transition: all 0.3s ease;\r\n  max-width: 100%;\r\n  overflow: hidden;\r\n}\r\n\r\n/* Gauge Styles */\r\n.gauge-wrapper {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  max-width: 100%;\r\n  overflow: hidden;\r\n}\r\n\r\n.gauge-svg {\r\n  width: 100%;\r\n  max-width: 400px;\r\n  height: auto;\r\n  overflow: visible; /* Allow SVG elements to be visible */\r\n}\r\n\r\n.gauge-value {\r\n  font-size: 24px;\r\n  font-weight: 700;\r\n  fill: #333;\r\n}\r\n\r\n.needle-group {\r\n  transition: all 0.8s ease-in-out;\r\n}\r\n\r\n/* Labels */\r\n.gauge-labels {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  width: 100%;\r\n  max-width: 400px;\r\n  margin-top: 1rem;\r\n  font-size: 0.75rem;\r\n  overflow: hidden;\r\n}\r\n\r\n.label-item {\r\n  text-align: center;\r\n  flex: 1;\r\n  min-width: 0; /* Allow flex items to shrink */\r\n}\r\n\r\n.label-text {\r\n  display: block;\r\n  font-weight: 600;\r\n  margin-bottom: 0.25rem;\r\n}\r\n\r\n.label-range {\r\n  display: block;\r\n  font-size: 0.7rem;\r\n  opacity: 0.7;\r\n}\r\n\r\n.label-item.extreme-fear .label-text { color: #a67c7c; }\r\n.label-item.fear .label-text { color: #b8956f; }\r\n.label-item.neutral .label-text { color: #b8b56f; }\r\n.label-item.greed .label-text { color: #7ca67c; }\r\n.label-item.extreme-greed .label-text { color: #7ca688; }\r\n\r\n/* Components Section - Right side styling */\r\n.components-section {\r\n  max-width: 100%;\r\n  overflow: hidden;\r\n}\r\n\r\n.components-section h4 {\r\n  font-size: 1.1rem;\r\n  font-weight: 600;\r\n  color: #333;\r\n  margin-bottom: 1rem;\r\n  padding-bottom: 0.5rem;\r\n  border-bottom: 1px solid #e9ecef;\r\n}\r\n\r\n.components-grid {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1rem;\r\n  max-width: 100%;\r\n}\r\n\r\n.component-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n  max-width: 100%;\r\n}\r\n\r\n.component-name {\r\n  font-size: 0.85rem;\r\n  font-weight: 500;\r\n  color: #495057;\r\n  word-wrap: break-word;\r\n}\r\n\r\n.component-bar {\r\n  position: relative;\r\n  height: 24px;\r\n  background: #e9ecef;\r\n  border-radius: 12px;\r\n  overflow: hidden;\r\n  width: 100%;\r\n}\r\n\r\n.component-fill {\r\n  height: 100%;\r\n  background: linear-gradient(90deg, #c67373 0%, #d4956f 25%, #d4c56f 50%, #7ca67c 75%, #7ca688 100%);\r\n  border-radius: 12px;\r\n  transition: width 0.8s ease;\r\n}\r\n\r\n.component-value {\r\n  position: absolute;\r\n  right: 8px;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  font-size: 0.75rem;\r\n  font-weight: 600;\r\n  color: #333;\r\n  text-shadow: 0 0 3px rgba(255,255,255,0.8);\r\n}\r\n\r\n.sentiment-indicator {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 0.75rem;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.sentiment-dot {\r\n  width: 16px;\r\n  height: 16px;\r\n  border-radius: 50%;\r\n  animation: pulse 2s infinite;\r\n}\r\n\r\n.sentiment-text {\r\n  font-size: 1.4rem;\r\n  font-weight: 700;\r\n}\r\n\r\n.sentiment-description {\r\n  font-size: 0.95rem;\r\n  color: #6c757d;\r\n  line-height: 1.5;\r\n}\r\n\r\n/* Sentiment Colors */\r\n.extreme-fear {\r\n  background: linear-gradient(135deg, #f5f0f0, #f8f5f5);\r\n  border-color: #a67c7c;\r\n}\r\n.extreme-fear .sentiment-dot { background: #a67c7c; }\r\n.extreme-fear .sentiment-text { color: #a67c7c; }\r\n\r\n.fear {\r\n  background: linear-gradient(135deg, #f5f3f0, #f8f6f5);\r\n  border-color: #b8956f;\r\n}\r\n.fear .sentiment-dot { background: #b8956f; }\r\n.fear .sentiment-text { color: #b8956f; }\r\n\r\n.neutral {\r\n  background: linear-gradient(135deg, #f5f5f0, #f8f8f5);\r\n  border-color: #b8b56f;\r\n}\r\n.neutral .sentiment-dot { background: #b8b56f; }\r\n.neutral .sentiment-text { color: #a6a35f; }\r\n\r\n.greed {\r\n  background: linear-gradient(135deg, #f0f5f0, #f5f8f5);\r\n  border-color: #7ca67c;\r\n}\r\n.greed .sentiment-dot { background: #7ca67c; }\r\n.greed .sentiment-text { color: #7ca67c; }\r\n\r\n.extreme-greed {\r\n  background: linear-gradient(135deg, #f0f5f2, #f5f8f6);\r\n  border-color: #7ca688;\r\n}\r\n.extreme-greed .sentiment-dot { background: #7ca688; }\r\n.extreme-greed .sentiment-text { color: #6f9577; }\r\n\r\n@keyframes pulse {\r\n  0%, 100% { opacity: 1; transform: scale(1); }\r\n  50% { opacity: 0.7; transform: scale(1.1); }\r\n}\r\n\r\n/* Responsive Design */\r\n@media (max-width: 1024px) {\r\n  .market-fng-gauge__meter-container {\r\n    grid-template-columns: 1fr;\r\n    gap: 2rem;\r\n  }\r\n  \r\n  .left-side {\r\n    gap: 1rem;\r\n  }\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .widget-header {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 0.5rem;\r\n  }\r\n  \r\n  .chart-info {\r\n    align-items: flex-start;\r\n  }\r\n  \r\n  .gauge-labels {\r\n    flex-direction: column;\r\n    align-items: center;\r\n    gap: 0.5rem;\r\n  }\r\n  \r\n  .label-item {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    width: 200px;\r\n  }\r\n  \r\n  .current-sentiment {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .sentiment-text {\r\n    font-size: 1.2rem;\r\n  }\r\n  \r\n  .market-fng-gauge__meter-container {\r\n    gap: 1.5rem;\r\n  }\r\n  \r\n  .left-side {\r\n    gap: 1rem;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .fear-greed-gauge-container {\r\n    padding: 0.75rem;\r\n    margin: 0 -0.25rem 2rem -0.25rem;\r\n  }\r\n  \r\n  .current-sentiment {\r\n    padding: 0.75rem;\r\n  }\r\n  \r\n  .sentiment-text {\r\n    font-size: 1.1rem;\r\n  }\r\n  \r\n  .sentiment-description {\r\n    font-size: 0.85rem;\r\n  }\r\n  \r\n  .market-fng-gauge__meter-container {\r\n    gap: 1rem;\r\n  }\r\n  \r\n  .left-side {\r\n    gap: 0.75rem;\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"market-overview-skeleton\">\r\n    <!-- Market Index Widget Skeleton -->\r\n    <div class=\"skeleton-widget-container\">\r\n      <div class=\"skeleton-widget-header\">\r\n        <div class=\"skeleton-title\"></div>\r\n      </div>\r\n      <div class=\"skeleton-ticker-area\">\r\n        <div class=\"skeleton-ticker-item\" v-for=\"i in 6\" :key=\"i\"></div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Fear & Greed Gauge Skeleton -->\r\n    <div class=\"skeleton-widget-container\">\r\n      <div class=\"skeleton-widget-header\">\r\n        <div class=\"skeleton-title\"></div>\r\n      </div>\r\n      <div class=\"skeleton-gauge-area\">\r\n        <div class=\"skeleton-gauge-circle\"></div>\r\n        <div class=\"skeleton-gauge-info\">\r\n          <div class=\"skeleton-gauge-value\"></div>\r\n          <div class=\"skeleton-gauge-label\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Top Stories Widget Skeleton -->\r\n    <div class=\"skeleton-widget-container large\">\r\n      <div class=\"skeleton-widget-header\">\r\n        <div class=\"skeleton-title\"></div>\r\n      </div>\r\n      <div class=\"skeleton-stories-area\">\r\n        <div class=\"skeleton-story-item\" v-for=\"i in 8\" :key=\"i\">\r\n          <div class=\"skeleton-story-time\"></div>\r\n          <div class=\"skeleton-story-title\"></div>\r\n          <div class=\"skeleton-story-content\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Market Insight Widget Skeleton -->\r\n    <div class=\"skeleton-widget-container large\">\r\n      <div class=\"skeleton-widget-header\">\r\n        <div class=\"skeleton-title\"></div>\r\n      </div>\r\n      <div class=\"skeleton-insight-grid\">\r\n        <div class=\"skeleton-insight-section\">\r\n          <div class=\"skeleton-section-header\">\r\n            <div class=\"skeleton-section-title\"></div>\r\n          </div>\r\n          <div class=\"skeleton-chart-area\">\r\n            <div class=\"skeleton-chart\"></div>\r\n          </div>\r\n        </div>\r\n        <div class=\"skeleton-insight-section\">\r\n          <div class=\"skeleton-section-header\">\r\n            <div class=\"skeleton-section-title\"></div>\r\n          </div>\r\n          <div class=\"skeleton-chart-area\">\r\n            <div class=\"skeleton-chart\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Stock Heatmap Widget Skeleton -->\r\n    <div class=\"skeleton-widget-container\">\r\n      <div class=\"skeleton-widget-header\">\r\n        <div class=\"skeleton-title\"></div>\r\n      </div>\r\n      <div class=\"skeleton-heatmap-area\">\r\n        <div class=\"skeleton-heatmap-grid\">\r\n          <div class=\"skeleton-heatmap-cell\" v-for=\"i in 20\" :key=\"i\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Performance Monitor Skeleton -->\r\n    <div class=\"skeleton-widget-container\">\r\n      <div class=\"skeleton-widget-header\">\r\n        <div class=\"skeleton-title\"></div>\r\n      </div>\r\n      <div class=\"skeleton-performance-area\">\r\n        <div class=\"skeleton-performance-item\" v-for=\"i in 4\" :key=\"i\">\r\n          <div class=\"skeleton-performance-label\"></div>\r\n          <div class=\"skeleton-performance-value\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'MarketOverviewSkeleton'\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/*  */\r\n@keyframes shimmer {\r\n  0% {\r\n    background-position: -200px 0;\r\n  }\r\n  100% {\r\n    background-position: calc(200px + 100%) 0;\r\n  }\r\n}\r\n\r\n.market-overview-skeleton {\r\n  padding: 0;\r\n  overflow-x: hidden;\r\n  max-width: 100%;\r\n}\r\n\r\n/*  */\r\n.skeleton-base {\r\n  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\r\n  background-size: 200px 100%;\r\n  animation: shimmer 1.5s infinite linear;\r\n  border-radius: 4px;\r\n}\r\n\r\n/* Widget  */\r\n.skeleton-widget-container {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  margin-bottom: 2rem;\r\n  overflow: hidden;\r\n  position: relative;\r\n}\r\n\r\n.skeleton-widget-container.large {\r\n  min-height: 400px;\r\n}\r\n\r\n.skeleton-widget-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 1rem;\r\n  padding-bottom: 0.75rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.skeleton-title {\r\n  @extend .skeleton-base;\r\n  width: 140px;\r\n  height: 20px;\r\n}\r\n\r\n/* Market Index Ticker  */\r\n.skeleton-ticker-area {\r\n  display: flex;\r\n  gap: 1rem;\r\n  overflow: hidden;\r\n  min-height: 100px;\r\n  align-items: center;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.skeleton-ticker-item {\r\n  @extend .skeleton-base;\r\n  flex: 1;\r\n  min-width: 120px;\r\n  height: 60px;\r\n  border-radius: 8px;\r\n}\r\n\r\n/* Fear & Greed Gauge  */\r\n.skeleton-gauge-area {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 2rem;\r\n  min-height: 200px;\r\n}\r\n\r\n.skeleton-gauge-circle {\r\n  @extend .skeleton-base;\r\n  width: 150px;\r\n  height: 150px;\r\n  border-radius: 50%;\r\n}\r\n\r\n.skeleton-gauge-info {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1rem;\r\n}\r\n\r\n.skeleton-gauge-value {\r\n  @extend .skeleton-base;\r\n  width: 80px;\r\n  height: 32px;\r\n}\r\n\r\n.skeleton-gauge-label {\r\n  @extend .skeleton-base;\r\n  width: 120px;\r\n  height: 20px;\r\n}\r\n\r\n/* Top Stories  */\r\n.skeleton-stories-area {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1rem;\r\n  min-height: 600px;\r\n}\r\n\r\n.skeleton-story-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n  padding: 1rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.skeleton-story-time {\r\n  @extend .skeleton-base;\r\n  width: 100px;\r\n  height: 14px;\r\n}\r\n\r\n.skeleton-story-title {\r\n  @extend .skeleton-base;\r\n  width: 80%;\r\n  height: 18px;\r\n}\r\n\r\n.skeleton-story-content {\r\n  @extend .skeleton-base;\r\n  width: 60%;\r\n  height: 14px;\r\n}\r\n\r\n/* Market Insight  */\r\n.skeleton-insight-grid {\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n  gap: 1.5rem;\r\n  align-items: start;\r\n}\r\n\r\n.skeleton-insight-section {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.75rem;\r\n}\r\n\r\n.skeleton-insight-section:nth-child(2) {\r\n  border-top: 1px solid #f0f0f0;\r\n  padding-top: 1.5rem;\r\n}\r\n\r\n.skeleton-section-header {\r\n  padding-bottom: 0.5rem;\r\n}\r\n\r\n.skeleton-section-title {\r\n  @extend .skeleton-base;\r\n  width: 200px;\r\n  height: 18px;\r\n}\r\n\r\n.skeleton-chart-area {\r\n  min-height: 600px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.skeleton-chart {\r\n  @extend .skeleton-base;\r\n  width: 100%;\r\n  height: 500px;\r\n  border-radius: 8px;\r\n}\r\n\r\n/* Stock Heatmap  */\r\n.skeleton-heatmap-area {\r\n  min-height: 500px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.skeleton-heatmap-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(5, 1fr);\r\n  gap: 0.5rem;\r\n  width: 100%;\r\n  height: 400px;\r\n}\r\n\r\n.skeleton-heatmap-cell {\r\n  @extend .skeleton-base;\r\n  border-radius: 4px;\r\n}\r\n\r\n/* Performance Monitor  */\r\n.skeleton-performance-area {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\r\n  gap: 1rem;\r\n  min-height: 120px;\r\n}\r\n\r\n.skeleton-performance-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n  padding: 1rem;\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n}\r\n\r\n.skeleton-performance-label {\r\n  @extend .skeleton-base;\r\n  width: 100px;\r\n  height: 16px;\r\n}\r\n\r\n.skeleton-performance-value {\r\n  @extend .skeleton-base;\r\n  width: 80px;\r\n  height: 24px;\r\n}\r\n\r\n/*  */\r\n.skeleton-title,\r\n.skeleton-ticker-item,\r\n.skeleton-gauge-circle,\r\n.skeleton-gauge-value,\r\n.skeleton-gauge-label,\r\n.skeleton-story-time,\r\n.skeleton-story-title,\r\n.skeleton-story-content,\r\n.skeleton-section-title,\r\n.skeleton-chart,\r\n.skeleton-heatmap-cell,\r\n.skeleton-performance-label,\r\n.skeleton-performance-value {\r\n  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\r\n  background-size: 200px 100%;\r\n  animation: shimmer 1.5s infinite linear;\r\n  border-radius: 4px;\r\n}\r\n\r\n/*  */\r\n@media (max-width: 768px) {\r\n  .skeleton-widget-container {\r\n    padding: 0.75rem;\r\n    margin-bottom: 1rem;\r\n  }\r\n  \r\n  .skeleton-ticker-area {\r\n    flex-direction: column;\r\n    gap: 0.5rem;\r\n  }\r\n  \r\n  .skeleton-ticker-item {\r\n    min-width: 100%;\r\n    height: 50px;\r\n  }\r\n  \r\n  .skeleton-gauge-area {\r\n    flex-direction: column;\r\n    gap: 1rem;\r\n  }\r\n  \r\n  .skeleton-gauge-circle {\r\n    width: 120px;\r\n    height: 120px;\r\n  }\r\n  \r\n  .skeleton-heatmap-grid {\r\n    grid-template-columns: repeat(3, 1fr);\r\n    height: 300px;\r\n  }\r\n  \r\n  .skeleton-performance-area {\r\n    grid-template-columns: 1fr;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .skeleton-widget-container {\r\n    padding: 0.5rem;\r\n    margin: 0 -0.25rem 1rem -0.25rem;\r\n  }\r\n  \r\n  .skeleton-heatmap-grid {\r\n    grid-template-columns: repeat(2, 1fr);\r\n    height: 250px;\r\n  }\r\n}\r\n\r\n/*  */\r\n.skeleton-ticker-item:nth-child(1) { animation-delay: 0.1s; }\r\n.skeleton-ticker-item:nth-child(2) { animation-delay: 0.2s; }\r\n.skeleton-ticker-item:nth-child(3) { animation-delay: 0.3s; }\r\n.skeleton-ticker-item:nth-child(4) { animation-delay: 0.4s; }\r\n.skeleton-ticker-item:nth-child(5) { animation-delay: 0.5s; }\r\n.skeleton-ticker-item:nth-child(6) { animation-delay: 0.6s; }\r\n\r\n.skeleton-story-item:nth-child(odd) { animation-delay: 0.1s; }\r\n.skeleton-story-item:nth-child(even) { animation-delay: 0.2s; }\r\n\r\n/*  */\r\n.market-overview-skeleton {\r\n  animation: fadeIn 0.3s ease-in;\r\n}\r\n\r\n@keyframes fadeIn {\r\n  from {\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    opacity: 1;\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"market-dashboard\">\r\n    <h2>Market Overview</h2>\r\n    <p class=\"text-muted mb-3\">Global markets overview and macro indicators</p>\r\n\r\n    <!--  -->\r\n    <div v-if=\"loading\" class=\"loading-with-skeleton\">\r\n      <MarketOverviewSkeleton />\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div v-else-if=\"error\" class=\"error\">\r\n      <p class=\"text-danger\">{{ error }}</p>\r\n      <button @click=\"refresh\" class=\"btn btn-secondary\">Retry</button>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div v-else>\r\n      <!-- Major Market Indices -  -->\r\n      <div class=\"widget-container-ticker\">\r\n        <div class=\"widget-header\">\r\n          <h3>Market Index</h3>\r\n        </div>\r\n        <LazyTradingViewWidget\r\n          widget-type=\"Market Index\"\r\n          :config=\"tickersConfig\"\r\n          script-url=\"https://s3.tradingview.com/external-embedding/embed-widget-tickers.js\"\r\n          height=\"100px\"\r\n          :priority=\"1\"\r\n        />\r\n      </div>\r\n\r\n      <!-- Top Stories -  Market Index  -->\r\n      <div class=\"widget-container\">\r\n        <div class=\"widget-header\">\r\n          <h3>Top Stories</h3>\r\n        </div>\r\n        <LazyTradingViewWidget\r\n          widget-type=\"Top Stories\"\r\n          :config=\"topStoriesConfig\"\r\n          script-url=\"https://s3.tradingview.com/external-embedding/embed-widget-timeline.js\"\r\n          height=\"650px\"\r\n          :priority=\"2\"\r\n        />\r\n      </div>\r\n\r\n      <!-- Fear & Greed Gauge -  ( TradingView widget) -->\r\n      <ZeiiermanFearGreedGauge />\r\n\r\n      <!-- VIX Index -  Fear & Greed Index  -->\r\n      <div class=\"widget-container vix-container\">\r\n        <div class=\"widget-header\">\r\n          <h3>VIX Index (Volatility Index)</h3>\r\n          <button @click=\"refreshVixWidget\" class=\"btn btn-sm btn-secondary\">\r\n             Refresh VIX\r\n          </button>\r\n        </div>\r\n        <VixWidget :key=\"`vix-${vixKey}`\" />\r\n      </div>\r\n\r\n      <!-- Stock Market Insight -->\r\n      <div class=\"widget-container\">\r\n        <div class=\"widget-header\">\r\n          <h3>Market Insight</h3>\r\n        </div>\r\n        \r\n        <div class=\"insight-grid\">\r\n          <div class=\"insight-section\">\r\n            <div class=\"section-header\">\r\n              <h4>Market Daily Insight (MA5)</h4>\r\n            </div>\r\n            <LazyTradingViewWidget\r\n              widget-type=\"Market Daily Insight\"\r\n              :config=\"dailyConfig\"\r\n              script-url=\"https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js\"\r\n              height=\"600px\"\r\n              :priority=\"2\"\r\n            />\r\n          </div>\r\n\r\n          <div class=\"insight-section weekly-section\">\r\n            <div class=\"section-header\">\r\n              <h4>Market Weekly Insight (MA4)</h4>\r\n            </div>\r\n            <LazyTradingViewWidget\r\n              widget-type=\"Market Weekly Insight\"\r\n              :config=\"weeklyConfig\"\r\n              script-url=\"https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js\"\r\n              height=\"600px\"\r\n              :priority=\"3\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Stock Heatmap -  -->\r\n      <div class=\"widget-container\">\r\n        <div class=\"widget-header\">\r\n          <h3>Stock Heatmap</h3>\r\n        </div>\r\n        <LazyTradingViewWidget\r\n          widget-type=\"Stock Heatmap\"\r\n          :config=\"heatmapConfig\"\r\n          script-url=\"https://s3.tradingview.com/external-embedding/embed-widget-stock-heatmap.js\"\r\n          height=\"500px\"\r\n          :priority=\"3\"\r\n        />\r\n      </div>\r\n\r\n      <!--  PerformanceMonitor -->\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport LazyTradingViewWidget from '@/components/LazyTradingViewWidget.vue'\r\nimport VixWidget from '@/components/VixWidget.vue'\r\nimport ZeiiermanFearGreedGauge from '@/components/ZeiiermanFearGreedGauge.vue'\r\nimport MarketOverviewSkeleton from '@/components/MarketOverviewSkeleton.vue'\r\n\r\nexport default {\r\n  name: 'MarketDashboard',\r\n  components: {\r\n    LazyTradingViewWidget,\r\n    VixWidget,\r\n    ZeiiermanFearGreedGauge,\r\n    MarketOverviewSkeleton\r\n  },\r\n  data() {\r\n    return {\r\n      loading: true,\r\n      error: null,\r\n      vixKey: Date.now() //  VIX  key\r\n    }\r\n  },\r\n  mounted() {\r\n    // \r\n    this.scrollToTop()\r\n    this.initializePage()\r\n  },\r\n  watch: {\r\n    $route() {\r\n      // \r\n      this.scrollToTop()\r\n    }\r\n  },\r\n  methods: {\r\n    async initializePage() {\r\n      try {\r\n        // \r\n        await new Promise(resolve => setTimeout(resolve, 800))\r\n        this.loading = false\r\n      } catch (err) {\r\n        this.error = String(err)\r\n        this.loading = false\r\n      }\r\n    },\r\n    async refresh() {\r\n      this.loading = true\r\n      this.error = null\r\n      this.vixKey = Date.now() //  VIX widget\r\n      await this.initializePage()\r\n    },\r\n\r\n    // \r\n    scrollToTop() {\r\n      //  nextTick  DOM \r\n      this.$nextTick(() => {\r\n        window.scrollTo({\r\n          top: 0,\r\n          left: 0,\r\n          behavior: 'smooth'\r\n        })\r\n        \r\n        // \r\n        setTimeout(() => {\r\n          window.scrollTo(0, 0)\r\n        }, 100)\r\n      })\r\n    },\r\n\r\n    //  VIX widget\r\n    refreshVixWidget() {\r\n      this.vixKey = Date.now()\r\n      console.log('VIX widget refreshed with key:', this.vixKey)\r\n    }\r\n  },\r\n  computed: {\r\n    tickersConfig() {\r\n      return {\r\n        \"symbols\": [\r\n          {\"proName\": \"FOREXCOM:SPXUSD\",\"title\": \"S&P 500 Index\"},\r\n          {\"proName\": \"NASDAQ:NDX\",\"title\": \"NASDAQ 100 Index\"},\r\n          {\"proName\": \"OPOFINANCE:DJIUSD\",\"title\": \"Dow Jone Index\"},\r\n          {\"proName\": \"CAPITALCOM:RTY\",\"title\": \"US Russel 2000\"},\r\n          {\"proName\": \"INDEX:BTCUSD\",\"title\": \"BTC\"},\r\n          {\"proName\": \"TVC:GOLD\",\"title\": \"GOLD\"}\r\n        ],\r\n        \"colorTheme\": \"light\",\r\n        \"locale\": \"en\",\r\n        \"largeChartUrl\": \"\",\r\n        \"isTransparent\": true,\r\n        \"showSymbolLogo\": true\r\n      }\r\n    },\r\n\r\n    topStoriesConfig() {\r\n      return {\r\n        \"displayMode\": \"regular\",\r\n        \"feedMode\": \"market\",\r\n        \"colorTheme\": \"light\",\r\n        \"isTransparent\": true,\r\n        \"locale\": \"en\",\r\n        \"market\": \"stock\",\r\n        \"width\": \"100%\",\r\n        \"height\": \"100%\"\r\n      }\r\n    },\r\n\r\n    dailyConfig() {\r\n      return {\r\n        \"lineWidth\": 2,\r\n        \"lineType\": 0,\r\n        \"chartType\": \"candlesticks\",\r\n        \"showVolume\": true,\r\n        \"fontColor\": \"rgb(106, 109, 120)\",\r\n        \"gridLineColor\": \"rgba(46, 46, 46, 0.06)\",\r\n        \"volumeUpColor\": \"rgba(34, 171, 148, 0.5)\",\r\n        \"volumeDownColor\": \"rgba(247, 82, 95, 0.5)\",\r\n        \"backgroundColor\": \"#ffffff\",\r\n        \"widgetFontColor\": \"#0F0F0F\",\r\n        \"upColor\": \"#22ab94\",\r\n        \"downColor\": \"#f7525f\",\r\n        \"borderUpColor\": \"#22ab94\",\r\n        \"borderDownColor\": \"#f7525f\",\r\n        \"wickUpColor\": \"#22ab94\",\r\n        \"wickDownColor\": \"#f7525f\",\r\n        \"colorTheme\": \"light\",\r\n        \"isTransparent\": true,\r\n        \"locale\": \"en\",\r\n        \"chartOnly\": false,\r\n        \"scalePosition\": \"right\",\r\n        \"scaleMode\": \"Normal\",\r\n        \"fontFamily\": \"-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif\",\r\n        \"valuesTracking\": \"1\",\r\n        \"changeMode\": \"price-and-percent\",\r\n        \"symbols\": [[\"VANTAGE:SP500|6M\"],[\"NASDAQ:NDX|6M\"],[\"OPOFINANCE:DJIUSD|6M\"],[\"CAPITALCOM:RTY|6M\"],[\"INDEX:BTCUSD|6M\"],[\"TVC:GOLD|6M\"]],\r\n        \"dateRanges\": [\"6m|1D\"],\r\n        \"fontSize\": \"10\",\r\n        \"headerFontSize\": \"medium\",\r\n        \"autosize\": true,\r\n        \"width\": \"100%\",\r\n        \"height\": \"100%\",\r\n        \"noTimeScale\": false,\r\n        \"hideDateRanges\": false,\r\n        \"showMA\": true,\r\n        \"maLength\": \"5\",\r\n        \"maLineColor\": \"#2962FF\",\r\n        \"maLineWidth\": 1,\r\n        \"hideMarketStatus\": false,\r\n        \"hideSymbolLogo\": false\r\n      }\r\n    },\r\n\r\n    weeklyConfig() {\r\n      return {\r\n        \"lineWidth\": 2,\r\n        \"lineType\": 0,\r\n        \"chartType\": \"candlesticks\",\r\n        \"showVolume\": true,\r\n        \"fontColor\": \"rgb(106, 109, 120)\",\r\n        \"gridLineColor\": \"rgba(46, 46, 46, 0.06)\",\r\n        \"volumeUpColor\": \"rgba(34, 171, 148, 0.5)\",\r\n        \"volumeDownColor\": \"rgba(247, 82, 95, 0.5)\",\r\n        \"backgroundColor\": \"#ffffff\",\r\n        \"widgetFontColor\": \"#0F0F0F\",\r\n        \"upColor\": \"#22ab94\",\r\n        \"downColor\": \"#f7525f\",\r\n        \"borderUpColor\": \"#22ab94\",\r\n        \"borderDownColor\": \"#f7525f\",\r\n        \"wickUpColor\": \"#22ab94\",\r\n        \"wickDownColor\": \"#f7525f\",\r\n        \"colorTheme\": \"light\",\r\n        \"isTransparent\": true,\r\n        \"locale\": \"en\",\r\n        \"chartOnly\": false,\r\n        \"scalePosition\": \"right\",\r\n        \"scaleMode\": \"Normal\",\r\n        \"fontFamily\": \"-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif\",\r\n        \"valuesTracking\": \"1\",\r\n        \"changeMode\": \"price-and-percent\",\r\n        \"symbols\": [[\"VANTAGE:SP500|6M\"],[\"NASDAQ:NDX|6M\"],[\"OPOFINANCE:DJIUSD|6M\"],[\"CAPITALCOM:RTY|6M\"],[\"INDEX:BTCUSD|6M\"],[\"TVC:GOLD|6M\"]],\r\n        \"dateRanges\": [\"6m|1W\"],\r\n        \"fontSize\": \"10\",\r\n        \"headerFontSize\": \"medium\",\r\n        \"autosize\": true,\r\n        \"width\": \"100%\",\r\n        \"height\": \"100%\",\r\n        \"noTimeScale\": false,\r\n        \"hideDateRanges\": false,\r\n        \"showMA\": true,\r\n        \"maLength\": \"4\",\r\n        \"maLineColor\": \"#2962FF\",\r\n        \"maLineWidth\": 1,\r\n        \"hideMarketStatus\": false,\r\n        \"hideSymbolLogo\": false\r\n      }\r\n    },\r\n\r\n    heatmapConfig() {\r\n      return {\r\n        \"exchanges\": [],\r\n        \"dataSource\": \"SPX500\",\r\n        \"grouping\": \"sector\",\r\n        \"blockSize\": \"market_cap_basic\",\r\n        \"blockColor\": \"change\",\r\n        \"locale\": \"en\",\r\n        \"symbolUrl\": \"\",\r\n        \"colorTheme\": \"light\",\r\n        \"hasTopBar\": false,\r\n        \"isDataSetEnabled\": false,\r\n        \"isZoomEnabled\": true,\r\n        \"hasSymbolTooltip\": true,\r\n        \"width\": \"100%\",\r\n        \"height\": \"100%\"\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.market-dashboard {\r\n  padding: 0;\r\n  overflow-x: hidden;\r\n  max-width: 100%;\r\n}\r\n\r\n.mb-3 {\r\n  margin-bottom: 0.75rem;\r\n}\r\n\r\n.text-muted {\r\n  color: #6c757d;\r\n}\r\n\r\n.text-muted {\r\n  color: #6c757d;\r\n}\r\n\r\n.loading-with-skeleton {\r\n  /*  */\r\n}\r\n\r\n.error {\r\n  text-align: center;\r\n  padding: 2rem;\r\n  background-color: #f8d7da;\r\n  border: 1px solid #f5c6cb;\r\n  border-radius: 8px;\r\n  margin: 1rem 0;\r\n}\r\n\r\n.btn {\r\n  padding: 0.5rem 1rem;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.btn-secondary {\r\n  background: #6c757d;\r\n  color: white;\r\n}\r\n\r\n.btn-secondary:hover {\r\n  background: #545b62;\r\n}\r\n\r\n.btn-sm {\r\n  padding: 0.25rem 0.5rem;\r\n  font-size: 0.8rem;\r\n}\r\n\r\n/*  Widget  -  market-dashboard  */\r\n.market-dashboard .widget-container {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  margin-bottom: 2rem;\r\n  overflow: hidden;\r\n  position: relative;\r\n}\r\n\r\n/* Ticker  Widget  -  market-dashboard  */\r\n.market-dashboard .widget-container-ticker {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  margin-bottom: 2rem;\r\n  overflow: hidden;\r\n  position: relative;\r\n}\r\n\r\n.market-dashboard .widget-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 1rem;\r\n  padding-bottom: 0.75rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.market-dashboard .widget-header h3 {\r\n  font-size: 1.1rem;\r\n  font-weight: 600;\r\n  color: #333;\r\n  margin: 0;\r\n}\r\n\r\n.market-dashboard .insight-grid {\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n  gap: 1.5rem;\r\n  align-items: start;\r\n}\r\n\r\n.market-dashboard .insight-section {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.75rem;\r\n}\r\n\r\n/*  insight-section  */\r\n.market-dashboard .weekly-section {\r\n  border-top: 1px solid #f0f0f0;\r\n  padding-top: 1.5rem;\r\n}\r\n\r\n.market-dashboard .section-header {\r\n  padding-bottom: 0.5rem;\r\n  /*  border-bottom: 1px solid #f0f0f0; */\r\n}\r\n\r\n.market-dashboard .section-header h4 {\r\n  font-size: 0.95rem;\r\n  font-weight: 600;\r\n  color: #555;\r\n  margin: 0;\r\n}\r\n\r\n/* VIX  -  market-dashboard  */\r\n.market-dashboard .vix-container {\r\n  min-height: 600px; /*  600px */\r\n  overflow: hidden; /*  LazyTradingViewWidget  */\r\n}\r\n\r\n/*  */\r\n@media (max-width: 768px) {\r\n  .market-dashboard .widget-header {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 0.5rem;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .market-dashboard .widget-container {\r\n    padding: 0.75rem;\r\n    margin: 0 -0.25rem 2rem -0.25rem;\r\n  }\r\n  \r\n  .market-dashboard .insight-grid {\r\n    gap: 0.75rem;\r\n  }\r\n}\r\n</style>","/**\r\n * \r\n * \r\n */\r\n\r\nclass StocksConfigService {\r\n  constructor() {\r\n    this.cache = null\r\n    this.lastUpdate = null\r\n    this.cacheTimeout = 5 * 60 * 1000 // 5\r\n  }\r\n\r\n  /**\r\n   *  URL\r\n   */\r\n  getConfigUrl() {\r\n    //  import.meta.env \r\n    const basePath = import.meta.env.PROD ? '/investment-dashboard' : ''\r\n    return `${basePath}/config/stocks.json`\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  async loadConfig() {\r\n    try {\r\n      // \r\n      if (this.cache && this.lastUpdate && \r\n          (Date.now() - this.lastUpdate) < this.cacheTimeout) {\r\n        return this.cache\r\n      }\r\n\r\n      const url = this.getConfigUrl()\r\n      const response = await fetch(`${url}?t=${Date.now()}`)\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}`)\r\n      }\r\n      \r\n      const config = await response.json()\r\n      \r\n      // \r\n      if (!config.stocks || !Array.isArray(config.stocks)) {\r\n        throw new Error('Invalid config format: missing stocks array')\r\n      }\r\n      \r\n      // \r\n      this.cache = config\r\n      this.lastUpdate = Date.now()\r\n      \r\n      console.log(` Loaded ${config.stocks.length} stocks from config/stocks.json`)\r\n      return config\r\n      \r\n    } catch (error) {\r\n      console.error(' Failed to load stocks config:', error)\r\n      \r\n      // \r\n      if (this.cache) {\r\n        console.warn(' Using cached config due to load failure')\r\n        return this.cache\r\n      }\r\n      \r\n      //  fallback\r\n      return this.getFallbackConfig()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  async getEnabledSymbols() {\r\n    const config = await this.loadConfig()\r\n    return config.stocks\r\n      .filter(stock => stock.enabled)\r\n      .map(stock => stock.symbol)\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  async getSymbolsByPriority(priority = 1) {\r\n    const config = await this.loadConfig()\r\n    return config.stocks\r\n      .filter(stock => stock.enabled && stock.priority === priority)\r\n      .map(stock => stock.symbol)\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  async getStockExchange(symbol) {\r\n    const config = await this.loadConfig()\r\n    const stock = config.stocks.find(s => s.symbol === symbol)\r\n    return stock ? stock.exchange : 'NASDAQ' //  NASDAQ\r\n  }\r\n\r\n  /**\r\n   *  sector\r\n   */\r\n  async getStockSector(symbol) {\r\n    const config = await this.loadConfig()\r\n    const stock = config.stocks.find(s => s.symbol === symbol)\r\n    return stock ? stock.sector : 'Unknown'\r\n  }\r\n\r\n  /**\r\n   *  industry\r\n   */\r\n  async getStockIndustry(symbol) {\r\n    const config = await this.loadConfig()\r\n    const stock = config.stocks.find(s => s.symbol === symbol)\r\n    return stock ? stock.industry : 'Unknown'\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  async getStockInfo(symbol) {\r\n    const config = await this.loadConfig()\r\n    return config.stocks.find(s => s.symbol === symbol) || null\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  async getExchanges() {\r\n    const config = await this.loadConfig()\r\n    return config.metadata?.exchanges || ['NYSE', 'NASDAQ', 'AMEX']\r\n  }\r\n\r\n  /**\r\n   *  sector \r\n   */\r\n  async getSectors() {\r\n    const config = await this.loadConfig()\r\n    return config.metadata?.sectors || []\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  async getStocksByExchange() {\r\n    const config = await this.loadConfig()\r\n    const groups = {}\r\n    \r\n    config.stocks\r\n      .filter(stock => stock.enabled)\r\n      .forEach(stock => {\r\n        if (!groups[stock.exchange]) {\r\n          groups[stock.exchange] = []\r\n        }\r\n        groups[stock.exchange].push(stock.symbol)\r\n      })\r\n    \r\n    return groups\r\n  }\r\n\r\n  /**\r\n   *  sector \r\n   */\r\n  async getStocksBySector() {\r\n    const config = await this.loadConfig()\r\n    const groups = {}\r\n    \r\n    config.stocks\r\n      .filter(stock => stock.enabled)\r\n      .forEach(stock => {\r\n        if (!groups[stock.sector]) {\r\n          groups[stock.sector] = []\r\n        }\r\n        groups[stock.sector].push(stock.symbol)\r\n      })\r\n    \r\n    return groups\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  async getStats() {\r\n    const config = await this.loadConfig()\r\n    const enabledStocks = config.stocks.filter(s => s.enabled)\r\n    \r\n    return {\r\n      total: config.stocks.length,\r\n      enabled: enabledStocks.length,\r\n      disabled: config.stocks.length - enabledStocks.length,\r\n      exchanges: [...new Set(enabledStocks.map(s => s.exchange))],\r\n      sectors: [...new Set(enabledStocks.map(s => s.sector))],\r\n      version: config.version,\r\n      lastUpdated: config.last_updated\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  clearCache() {\r\n    this.cache = null\r\n    this.lastUpdate = null\r\n    console.log(' StocksConfigService cache cleared')\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  async refresh() {\r\n    this.clearCache()\r\n    return await this.loadConfig()\r\n  }\r\n\r\n  /**\r\n   *  fallback \r\n   */\r\n  getFallbackConfig() {\r\n    console.warn(' Using emergency fallback config')\r\n    return {\r\n      version: \"1.0.0-fallback\",\r\n      stocks: [\r\n        { symbol: \"ASTS\", exchange: \"NASDAQ\", sector: \"Technology\", industry: \"Communication Equipment\", enabled: true, priority: 1 },\r\n        { symbol: \"RIVN\", exchange: \"NASDAQ\", sector: \"Consumer Cyclical\", industry: \"Auto Manufacturers\", enabled: true, priority: 1 },\r\n        { symbol: \"PL\", exchange: \"NYSE\", sector: \"Industrials\", industry: \"Aerospace & Defense\", enabled: true, priority: 1 },\r\n        { symbol: \"CRM\", exchange: \"NYSE\", sector: \"Technology\", industry: \"Software - Application\", enabled: true, priority: 1 },\r\n        { symbol: \"NVDA\", exchange: \"NASDAQ\", sector: \"Technology\", industry: \"Semiconductors\", enabled: true, priority: 1 },\r\n        { symbol: \"TSLA\", exchange: \"NASDAQ\", sector: \"Consumer Cyclical\", industry: \"Auto Manufacturers\", enabled: true, priority: 1 },\r\n        { symbol: \"RR\", exchange: \"NASDAQ\", sector: \"Technology\", industry: \"Software - Application\", enabled: true, priority: 2 }\r\n      ],\r\n      metadata: {\r\n        total_stocks: 7,\r\n        enabled_stocks: 7,\r\n        exchanges: [\"NYSE\", \"NASDAQ\"],\r\n        sectors: [\"Technology\", \"Consumer Cyclical\", \"Industrials\"]\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  async isValidSymbol(symbol) {\r\n    const config = await this.loadConfig()\r\n    return config.stocks.some(stock => stock.symbol === symbol && stock.enabled)\r\n  }\r\n\r\n  /**\r\n   *  symbolsConfig \r\n   */\r\n  async getSymbolsList() {\r\n    return await this.getEnabledSymbols()\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  getConfigSource() {\r\n    return this.cache ? 'stocks.json' : 'fallback'\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  getCacheInfo() {\r\n    return {\r\n      cached: !!this.cache,\r\n      lastUpdate: this.lastUpdate,\r\n      cacheAge: this.lastUpdate ? Date.now() - this.lastUpdate : 0,\r\n      cacheTimeout: this.cacheTimeout\r\n    }\r\n  }\r\n}\r\n\r\n// \r\nexport const stocksConfig = new StocksConfigService()\r\n\r\n// \r\nexport { StocksConfigService }","/**\r\n * TradingView Widget \r\n *  widgets\r\n */\r\n\r\nclass WidgetCache {\r\n  constructor() {\r\n    this.cache = new Map()\r\n    this.loadingPromises = new Map()\r\n    this.maxCacheSize = 50 //  50  widgets\r\n    this.cacheTimeout = 5 * 60 * 1000 // 5 \r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  generateKey(widgetType, symbol, exchange) {\r\n    return `${widgetType}-${symbol}-${exchange}`\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  has(widgetType, symbol, exchange) {\r\n    const key = this.generateKey(widgetType, symbol, exchange)\r\n    const cached = this.cache.get(key)\r\n    \r\n    if (!cached) return false\r\n    \r\n    // \r\n    if (Date.now() - cached.timestamp > this.cacheTimeout) {\r\n      this.cache.delete(key)\r\n      return false\r\n    }\r\n    \r\n    return true\r\n  }\r\n\r\n  /**\r\n   *  widget\r\n   */\r\n  get(widgetType, symbol, exchange) {\r\n    const key = this.generateKey(widgetType, symbol, exchange)\r\n    const cached = this.cache.get(key)\r\n    \r\n    if (cached && Date.now() - cached.timestamp <= this.cacheTimeout) {\r\n      return cached.data\r\n    }\r\n    \r\n    return null\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  set(widgetType, symbol, exchange, data) {\r\n    const key = this.generateKey(widgetType, symbol, exchange)\r\n    \r\n    // \r\n    if (this.cache.size >= this.maxCacheSize) {\r\n      const firstKey = this.cache.keys().next().value\r\n      this.cache.delete(firstKey)\r\n    }\r\n    \r\n    this.cache.set(key, {\r\n      data,\r\n      timestamp: Date.now()\r\n    })\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  isLoading(widgetType, symbol, exchange) {\r\n    const key = this.generateKey(widgetType, symbol, exchange)\r\n    return this.loadingPromises.has(key)\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  setLoading(widgetType, symbol, exchange, promise) {\r\n    const key = this.generateKey(widgetType, symbol, exchange)\r\n    this.loadingPromises.set(key, promise)\r\n    \r\n    // \r\n    promise.finally(() => {\r\n      this.loadingPromises.delete(key)\r\n    })\r\n    \r\n    return promise\r\n  }\r\n\r\n  /**\r\n   *  Promise\r\n   */\r\n  getLoadingPromise(widgetType, symbol, exchange) {\r\n    const key = this.generateKey(widgetType, symbol, exchange)\r\n    return this.loadingPromises.get(key)\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  clear() {\r\n    this.cache.clear()\r\n    this.loadingPromises.clear()\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  clearExpired() {\r\n    const now = Date.now()\r\n    for (const [key, cached] of this.cache.entries()) {\r\n      if (now - cached.timestamp > this.cacheTimeout) {\r\n        this.cache.delete(key)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  getStats() {\r\n    return {\r\n      cacheSize: this.cache.size,\r\n      loadingCount: this.loadingPromises.size,\r\n      maxCacheSize: this.maxCacheSize\r\n    }\r\n  }\r\n}\r\n\r\n// \r\nexport const widgetCache = new WidgetCache()\r\n\r\n// \r\nsetInterval(() => {\r\n  widgetCache.clearExpired()\r\n}, 60000) // \r\n\r\nexport default widgetCache","<template>\r\n  <div class=\"fast-widget\" :class=\"{ 'overview-widget': widgetType === 'overview' }\" :id=\"containerId\" ref=\"container\">\r\n    <div v-if=\"!loaded && !error\" class=\"fast-loading\">\r\n      <div class=\"loading-spinner\"></div>\r\n      <span>Loading {{ widgetType }}...</span>\r\n    </div>\r\n    \r\n    <div v-if=\"error\" class=\"fast-error\">\r\n      <span> Failed to load</span>\r\n      <button @click=\"retry\" class=\"retry-btn\">Retry</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { widgetCache } from '@/utils/widgetCache'\r\nimport { widgetThrottle } from '@/utils/widgetThrottle'\r\nimport { widgetPreloader } from '@/utils/widgetPreloader'\r\nimport { widgetLoadManager } from '@/utils/widgetLoadManager'\r\n\r\nexport default {\r\n  name: 'FastTradingViewWidget',\r\n  props: {\r\n    widgetType: {\r\n      type: String,\r\n      required: true,\r\n      validator: (value) => ['overview', 'technical'].includes(value)\r\n    },\r\n    symbol: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    exchange: {\r\n      type: String,\r\n      default: 'NASDAQ'\r\n    },\r\n    priority: {\r\n      type: Number,\r\n      default: 1 // 1=, 2=, 3=\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      loaded: false,\r\n      error: false,\r\n      loadStartTime: 0,\r\n      isVisible: false,\r\n      observer: null\r\n    }\r\n  },\r\n  computed: {\r\n    containerId() {\r\n      return `fast-widget-${this.widgetType}-${this.symbol}-${Date.now()}`\r\n    },\r\n    \r\n    cacheKey() {\r\n      return `${this.widgetType}-${this.symbol}-${this.exchange}`\r\n    }\r\n  },\r\n  async mounted() {\r\n    this.setupIntersectionObserver()\r\n  },\r\n  beforeUnmount() {\r\n    if (this.observer) {\r\n      this.observer.disconnect()\r\n    }\r\n  },\r\n  methods: {\r\n    setupIntersectionObserver() {\r\n      //  rootMargin\r\n      const rootMargins = {\r\n        1: '300px', //  300px \r\n        2: '150px', //  150px \r\n        3: '50px'   //  50px \r\n      }\r\n\r\n      this.observer = new IntersectionObserver(\r\n        (entries) => {\r\n          entries.forEach((entry) => {\r\n            if (entry.isIntersecting && !this.loaded && !this.error) {\r\n              this.isVisible = true\r\n              this.loadWidget()\r\n              this.observer.disconnect() // \r\n            }\r\n          })\r\n        },\r\n        {\r\n          rootMargin: rootMargins[this.priority] || '150px',\r\n          threshold: 0.1\r\n        }\r\n      )\r\n\r\n      this.observer.observe(this.$refs.container)\r\n    },\r\n\r\n    async loadWidget() {\r\n      this.loadStartTime = performance.now()\r\n      this.loaded = false\r\n      this.error = false\r\n\r\n      try {\r\n        // \r\n        const delays = {\r\n          1: 0,     // \r\n          2: 300,   //  300ms\r\n          3: 600    //  600ms\r\n        }\r\n\r\n        const delay = delays[this.priority] || 0\r\n        if (delay > 0) {\r\n          await new Promise(resolve => setTimeout(resolve, delay))\r\n        }\r\n\r\n        // \r\n        if (widgetCache.has(this.widgetType, this.symbol, this.exchange)) {\r\n          const cached = widgetCache.get(this.widgetType, this.symbol, this.exchange)\r\n          if (cached) {\r\n            this.renderCachedWidget(cached)\r\n            return\r\n          }\r\n        }\r\n\r\n        //  widget\r\n        if (widgetCache.isLoading(this.widgetType, this.symbol, this.exchange)) {\r\n          const loadingPromise = widgetCache.getLoadingPromise(this.widgetType, this.symbol, this.exchange)\r\n          await loadingPromise\r\n          return\r\n        }\r\n\r\n        //  Widget Load Manager \r\n        const widgetId = `fast-${this.widgetType}-${this.symbol}-${this.containerId}`\r\n        const loadPromise = widgetLoadManager.addToQueue(\r\n          () => this.createWidget(),\r\n          widgetId,\r\n          this.priority\r\n        )\r\n        widgetCache.setLoading(this.widgetType, this.symbol, this.exchange, loadPromise)\r\n        \r\n        await loadPromise\r\n\r\n      } catch (err) {\r\n        console.error('Failed to load widget:', err)\r\n        this.error = true\r\n      }\r\n    },\r\n\r\n    async createWidget() {\r\n      return new Promise((resolve, reject) => {\r\n        this.$nextTick(async () => {\r\n          const container = this.$refs.container\r\n          if (!container) {\r\n            reject(new Error('Container not found'))\r\n            return\r\n          }\r\n\r\n          const config = this.getWidgetConfig()\r\n          const scriptUrl = this.getScriptUrl()\r\n          \r\n          // \r\n          if (!widgetPreloader.isPreloaded(scriptUrl)) {\r\n            try {\r\n              await widgetPreloader.preloadScript(scriptUrl)\r\n            } catch (error) {\r\n              console.warn('Script preload failed, continuing with normal load:', error)\r\n            }\r\n          }\r\n\r\n          const script = document.createElement('script')\r\n          \r\n          script.type = 'text/javascript'\r\n          script.src = scriptUrl\r\n          script.async = true\r\n          script.innerHTML = JSON.stringify(config)\r\n          \r\n          //  - \r\n          const timeouts = {\r\n            1: 3000,  // 3\r\n            2: 5000,  // 5\r\n            3: 8000   // 8\r\n          }\r\n          \r\n          const timeout = setTimeout(() => {\r\n            this.error = true\r\n            reject(new Error('Widget load timeout'))\r\n          }, timeouts[this.priority] || 5000)\r\n          \r\n          script.onload = () => {\r\n            clearTimeout(timeout)\r\n            this.loaded = true\r\n            \r\n            const loadTime = performance.now() - this.loadStartTime\r\n            console.log(`Widget ${this.cacheKey} loaded in ${loadTime.toFixed(2)}ms (Priority: ${this.priority})`)\r\n            \r\n            //  widget \r\n            widgetCache.set(this.widgetType, this.symbol, this.exchange, {\r\n              config,\r\n              scriptUrl\r\n            })\r\n            \r\n            resolve()\r\n          }\r\n          \r\n          script.onerror = () => {\r\n            clearTimeout(timeout)\r\n            this.error = true\r\n            reject(new Error('Script load failed'))\r\n          }\r\n          \r\n          container.appendChild(script)\r\n        })\r\n      })\r\n    },\r\n\r\n    getWidgetConfig() {\r\n      if (this.widgetType === 'overview') {\r\n        return {\r\n          \"lineWidth\": 2,\r\n          \"lineType\": 0,\r\n          \"chartType\": \"candlesticks\",\r\n          \"showVolume\": true,\r\n          \"fontColor\": \"rgb(106, 109, 120)\",\r\n          \"gridLineColor\": \"rgba(46, 46, 46, 0.06)\",\r\n          \"volumeUpColor\": \"rgba(34, 171, 148, 0.5)\",\r\n          \"volumeDownColor\": \"rgba(247, 82, 95, 0.5)\",\r\n          \"backgroundColor\": \"#ffffff\",\r\n          \"widgetFontColor\": \"#0F0F0F\",\r\n          \"upColor\": \"#22ab94\",\r\n          \"downColor\": \"#f7525f\",\r\n          \"borderUpColor\": \"#22ab94\",\r\n          \"borderDownColor\": \"#f7525f\",\r\n          \"wickUpColor\": \"#22ab94\",\r\n          \"wickDownColor\": \"#f7525f\",\r\n          \"colorTheme\": \"light\",\r\n          \"isTransparent\": true,\r\n          \"locale\": \"en\",\r\n          \"chartOnly\": false,\r\n          \"scalePosition\": \"right\",\r\n          \"scaleMode\": \"Normal\",\r\n          \"fontFamily\": \"-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif\",\r\n          \"valuesTracking\": \"1\",\r\n          \"changeMode\": \"price-and-percent\",\r\n          \"symbols\": [[this.symbol, `${this.exchange}:${this.symbol}|1D`]],\r\n          \"dateRanges\": [\"1d|1\", \"1m|30\", \"3m|60\", \"12m|1D\", \"60m|1W\", \"all|1M\"],\r\n          \"fontSize\": \"10\",\r\n          \"headerFontSize\": \"medium\",\r\n          \"autosize\": true,\r\n          \"width\": \"100%\",\r\n          \"height\": \"100%\",\r\n          \"noTimeScale\": false,\r\n          \"hideDateRanges\": false,\r\n          \"showMA\": true,\r\n          \"maLength\": 9,\r\n          \"maLineColor\": \"#2962FF\",\r\n          \"maLineWidth\": 1,\r\n          \"hideMarketStatus\": false,\r\n          \"hideSymbolLogo\": false\r\n        }\r\n      } else if (this.widgetType === 'technical') {\r\n        return {\r\n          \"interval\": \"1D\",\r\n          \"width\": \"100%\",\r\n          \"height\": \"100%\",\r\n          \"isTransparent\": false,\r\n          \"symbol\": `${this.exchange}:${this.symbol}`,\r\n          \"showIntervalTabs\": true,\r\n          \"locale\": \"en\",\r\n          \"colorTheme\": \"light\"\r\n        }\r\n      }\r\n    },\r\n\r\n    getScriptUrl() {\r\n      if (this.widgetType === 'overview') {\r\n        return 'https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js'\r\n      } else if (this.widgetType === 'technical') {\r\n        return 'https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js'\r\n      }\r\n    },\r\n\r\n    renderCachedWidget(cached) {\r\n      this.$nextTick(() => {\r\n        const container = this.$refs.container\r\n        if (!container) return\r\n\r\n        const script = document.createElement('script')\r\n        script.type = 'text/javascript'\r\n        script.src = cached.scriptUrl\r\n        script.async = true\r\n        script.innerHTML = JSON.stringify(cached.config)\r\n        \r\n        script.onload = () => {\r\n          this.loaded = true\r\n          const loadTime = performance.now() - this.loadStartTime\r\n          console.log(`Cached widget ${this.cacheKey} loaded in ${loadTime.toFixed(2)}ms`)\r\n        }\r\n        \r\n        container.appendChild(script)\r\n      })\r\n    },\r\n\r\n    async retry() {\r\n      this.setupIntersectionObserver()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.fast-widget {\r\n  width: 100%;\r\n  height: 100%;\r\n  min-height: 500px;\r\n  position: relative;\r\n}\r\n\r\n/* Symbol Overview  -  padding */\r\n.fast-widget.overview-widget {\r\n  background: #ffffff;\r\n  padding: 8px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.fast-loading {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  min-height: 500px;\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n  color: #6c757d;\r\n}\r\n\r\n/* Symbol Overview  loading  */\r\n.fast-widget.overview-widget .fast-loading {\r\n  margin: -8px; /*  padding */\r\n}\r\n\r\n.loading-spinner {\r\n  width: 32px;\r\n  height: 32px;\r\n  border: 3px solid #e9ecef;\r\n  border-top: 3px solid #007bff;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n.fast-loading span {\r\n  font-size: 0.9rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.fast-error {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  min-height: 500px;\r\n  background: #f8d7da;\r\n  border: 1px solid #f5c6cb;\r\n  border-radius: 8px;\r\n  color: #721c24;\r\n}\r\n\r\n/* Symbol Overview  error  */\r\n.fast-widget.overview-widget .fast-error {\r\n  margin: -8px; /*  padding */\r\n}\r\n\r\n.retry-btn {\r\n  margin-top: 0.5rem;\r\n  padding: 0.5rem 1rem;\r\n  background: #dc3545;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.85rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.retry-btn:hover {\r\n  background: #c82333;\r\n}\r\n</style>","<template>\r\n  <div class=\"fast-widget overview-widget\" :id=\"containerId\" ref=\"container\">\r\n    <div v-if=\"!loaded && !error\" class=\"fast-loading\">\r\n      <div class=\"loading-spinner\"></div>\r\n      <span>Loading Technical Analysis...</span>\r\n    </div>\r\n    \r\n    <div v-if=\"error\" class=\"fast-error\">\r\n      <span> Failed to load</span>\r\n      <button @click=\"retry\" class=\"retry-btn\">Retry</button>\r\n    </div>\r\n\r\n    <!-- TradingView Widget Container -->\r\n    <div v-show=\"loaded\" class=\"tradingview-widget-container\">\r\n      <div class=\"tradingview-widget-container__widget\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { widgetLoadManager } from '@/utils/widgetLoadManager'\r\n\r\nexport default {\r\n  name: 'TechnicalAnalysisWidget',\r\n  props: {\r\n    symbol: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    exchange: {\r\n      type: String,\r\n      default: 'NASDAQ'\r\n    },\r\n    priority: {\r\n      type: Number,\r\n      default: 2\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      loaded: false,\r\n      error: false,\r\n      loadStartTime: 0,\r\n      isVisible: false,\r\n      observer: null,\r\n      retryCount: 0\r\n    }\r\n  },\r\n  computed: {\r\n    containerId() {\r\n      return `technical-analysis-${this.symbol}-${Date.now()}`\r\n    }\r\n  },\r\n  async mounted() {\r\n    this.setupIntersectionObserver()\r\n  },\r\n  beforeUnmount() {\r\n    if (this.observer) {\r\n      this.observer.disconnect()\r\n    }\r\n  },\r\n  methods: {\r\n    setupIntersectionObserver() {\r\n      //  rootMargin\r\n      const rootMargins = {\r\n        1: '300px', //  300px \r\n        2: '150px', //  150px \r\n        3: '50px'   //  50px \r\n      }\r\n\r\n      this.observer = new IntersectionObserver(\r\n        (entries) => {\r\n          entries.forEach((entry) => {\r\n            if (entry.isIntersecting && !this.loaded && !this.error) {\r\n              this.isVisible = true\r\n              this.loadWidget()\r\n              this.observer.disconnect() // \r\n            }\r\n          })\r\n        },\r\n        {\r\n          rootMargin: rootMargins[this.priority] || '150px',\r\n          threshold: 0.1\r\n        }\r\n      )\r\n\r\n      this.observer.observe(this.$refs.container)\r\n    },\r\n\r\n    async loadWidget() {\r\n      this.loadStartTime = performance.now()\r\n      this.loaded = false\r\n      this.error = false\r\n\r\n      try {\r\n        // \r\n        const delays = {\r\n          1: 0,     // \r\n          2: 300,   //  300ms\r\n          3: 600    //  600ms\r\n        }\r\n\r\n        const delay = delays[this.priority] || 0\r\n        if (delay > 0) {\r\n          await new Promise(resolve => setTimeout(resolve, delay))\r\n        }\r\n\r\n        //  Widget Load Manager \r\n        const widgetId = `technical-analysis-${this.symbol}-${this.containerId}`\r\n        await widgetLoadManager.addToQueue(\r\n          () => this.createWidget(),\r\n          widgetId,\r\n          this.priority\r\n        )\r\n\r\n      } catch (err) {\r\n        console.error('Failed to load Technical Analysis widget:', err)\r\n        this.error = true\r\n      }\r\n    },\r\n\r\n    async createWidget() {\r\n      return new Promise((resolve, reject) => {\r\n        this.$nextTick(async () => {\r\n          const container = this.$refs.container\r\n          if (!container) {\r\n            reject(new Error('Container not found'))\r\n            return\r\n          }\r\n\r\n          const config = this.getWidgetConfig()\r\n          const scriptUrl = 'https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js'\r\n          \r\n          const script = document.createElement('script')\r\n          \r\n          script.type = 'text/javascript'\r\n          script.src = scriptUrl\r\n          script.async = true\r\n          script.innerHTML = JSON.stringify(config)\r\n          \r\n          //  timeout - \r\n          const baseTimeouts = {\r\n            1: 8000,   // 8\r\n            2: 12000,  // 12\r\n            3: 15000   // 15\r\n          }\r\n          \r\n          const retryCount = this.retryCount || 0\r\n          const timeoutDuration = baseTimeouts[this.priority] + (retryCount * 3000) //  3 \r\n          \r\n          const timeout = setTimeout(() => {\r\n            this.error = true\r\n            reject(new Error(`Widget load timeout after ${timeoutDuration}ms (retry: ${retryCount})`))\r\n          }, timeoutDuration)\r\n          \r\n          script.onload = () => {\r\n            clearTimeout(timeout)\r\n            this.loaded = true\r\n            \r\n            const loadTime = performance.now() - this.loadStartTime\r\n            console.log(`Technical Analysis widget ${this.symbol} loaded in ${loadTime.toFixed(2)}ms (retry: ${retryCount})`)\r\n            \r\n            resolve()\r\n          }\r\n          \r\n          script.onerror = () => {\r\n            clearTimeout(timeout)\r\n            this.error = true\r\n            reject(new Error('Script load failed'))\r\n          }\r\n          \r\n          //  script  tradingview-widget-container__widget \r\n          const widgetContainer = container.querySelector('.tradingview-widget-container__widget')\r\n          if (widgetContainer) {\r\n            widgetContainer.appendChild(script)\r\n          } else {\r\n            container.appendChild(script)\r\n          }\r\n        })\r\n      })\r\n    },\r\n\r\n    getWidgetConfig() {\r\n      return {\r\n        \"colorTheme\": \"light\",\r\n        \"displayMode\": \"single\",\r\n        \"isTransparent\": true,\r\n        \"locale\": \"en\",\r\n        \"interval\": \"1D\",\r\n        \"disableInterval\": false,\r\n        \"width\": \"100%\",\r\n        \"height\": \"100%\",\r\n        \"symbol\": `${this.exchange}:${this.symbol}`,\r\n        \"showIntervalTabs\": true\r\n      }\r\n    },\r\n\r\n    async retry() {\r\n      // \r\n      this.retryCount = (this.retryCount || 0) + 1\r\n      const maxRetries = 2\r\n      \r\n      if (this.retryCount > maxRetries) {\r\n        console.error(`Technical Analysis widget ${this.symbol} exceeded max retries (${maxRetries})`)\r\n        return\r\n      }\r\n      \r\n      // \r\n      const backoffDelay = Math.min(1000 * Math.pow(2, this.retryCount - 1), 5000) //  5 \r\n      console.log(`Technical Analysis widget ${this.symbol} retrying in ${backoffDelay}ms (attempt ${this.retryCount}/${maxRetries})`)\r\n      \r\n      await new Promise(resolve => setTimeout(resolve, backoffDelay))\r\n      \r\n      this.setupIntersectionObserver()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.fast-widget {\r\n  width: 100%;\r\n  height: 100%;\r\n  min-height: 500px;\r\n  position: relative;\r\n}\r\n\r\n/*  Symbol Overview  */\r\n.fast-widget.overview-widget {\r\n  background: #ffffff;\r\n  padding: 8px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.fast-loading {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  min-height: 500px;\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n  color: #6c757d;\r\n}\r\n\r\n/*  */\r\n.fast-widget.overview-widget .fast-loading {\r\n  margin: -8px; /*  padding */\r\n}\r\n\r\n.loading-spinner {\r\n  width: 32px;\r\n  height: 32px;\r\n  border: 3px solid #e9ecef;\r\n  border-top: 3px solid #007bff;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n.fast-loading span {\r\n  font-size: 0.9rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.fast-error {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  min-height: 500px;\r\n  background: #f8d7da;\r\n  border: 1px solid #f5c6cb;\r\n  border-radius: 8px;\r\n  color: #721c24;\r\n}\r\n\r\n/*  */\r\n.fast-widget.overview-widget .fast-error {\r\n  margin: -8px; /*  padding */\r\n}\r\n\r\n.retry-btn {\r\n  margin-top: 0.5rem;\r\n  padding: 0.5rem 1rem;\r\n  background: #dc3545;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.85rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.retry-btn:hover {\r\n  background: #c82333;\r\n}\r\n\r\n/* TradingView Widget  */\r\n.tradingview-widget-container {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: relative;\r\n}\r\n\r\n.tradingview-widget-container__widget {\r\n  width: 100%;\r\n  height: 100%; /*  copyright  */\r\n}\r\n</style>","<template>\r\n  <div class=\"technical-indicators\">\r\n    <div class=\"indicators-header\">\r\n      <h4>Technical Indicators</h4>\r\n      <div v-if=\"cacheInfo\" class=\"cache-info\">\r\n        <small>{{ cacheInfo }}</small>\r\n      </div>\r\n    </div>\r\n    \r\n    <div v-if=\"loading\" class=\"loading-state\">\r\n      <div class=\"loading-spinner\"></div>\r\n      <span>Loading technical data...</span>\r\n    </div>\r\n    \r\n    <div v-else-if=\"error\" class=\"error-state\">\r\n      <span class=\"error-icon\"></span>\r\n      <span>{{ error }}</span>\r\n      <button @click=\"retryLoad\" class=\"retry-button\" :disabled=\"loading\">\r\n        {{ loading ? 'Loading...' : 'Retry' }}\r\n      </button>\r\n    </div>\r\n    \r\n    <div v-else class=\"indicators-grid\">\r\n      <!-- Row 1: MA5, MA10, MA30 -->\r\n      <div class=\"indicator-item\">\r\n        <span class=\"indicator-label\">MA5</span>\r\n        <div class=\"indicator-value-row\">\r\n          <span class=\"indicator-value\" :class=\"getSignalClass(technicalData?.ma5?.signal)\">\r\n            {{ formatValue(technicalData?.ma5?.value) }}\r\n          </span>\r\n          <span class=\"price-diff\" :class=\"getPriceDiffClass(technicalData?.ma5?.value)\">\r\n            {{ formatPriceDiff(technicalData?.ma5?.value) }}\r\n          </span>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"indicator-item\">\r\n        <span class=\"indicator-label\">MA10</span>\r\n        <div class=\"indicator-value-row\">\r\n          <span class=\"indicator-value\" :class=\"getSignalClass(technicalData?.ma10?.signal)\">\r\n            {{ formatValue(technicalData?.ma10?.value) }}\r\n          </span>\r\n          <span class=\"price-diff\" :class=\"getPriceDiffClass(technicalData?.ma10?.value)\">\r\n            {{ formatPriceDiff(technicalData?.ma10?.value) }}\r\n          </span>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"indicator-item\">\r\n        <span class=\"indicator-label\">MA30</span>\r\n        <div class=\"indicator-value-row\">\r\n          <span class=\"indicator-value\" :class=\"getSignalClass(technicalData?.ma30?.signal)\">\r\n            {{ formatValue(technicalData?.ma30?.value) }}\r\n          </span>\r\n          <span class=\"price-diff\" :class=\"getPriceDiffClass(technicalData?.ma30?.value)\">\r\n            {{ formatPriceDiff(technicalData?.ma30?.value) }}\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Row 2: SMA5, SMA10, SMA30 -->\r\n      <div class=\"indicator-item\">\r\n        <span class=\"indicator-label\">SMA5</span>\r\n        <div class=\"indicator-value-row\">\r\n          <span class=\"indicator-value\" :class=\"getSignalClass(technicalData?.sma5?.signal)\">\r\n            {{ formatValue(technicalData?.sma5?.value) }}\r\n          </span>\r\n          <span class=\"price-diff\" :class=\"getPriceDiffClass(technicalData?.sma5?.value)\">\r\n            {{ formatPriceDiff(technicalData?.sma5?.value) }}\r\n          </span>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"indicator-item\">\r\n        <span class=\"indicator-label\">SMA10</span>\r\n        <div class=\"indicator-value-row\">\r\n          <span class=\"indicator-value\" :class=\"getSignalClass(technicalData?.sma10?.signal)\">\r\n            {{ formatValue(technicalData?.sma10?.value) }}\r\n          </span>\r\n          <span class=\"price-diff\" :class=\"getPriceDiffClass(technicalData?.sma10?.value)\">\r\n            {{ formatPriceDiff(technicalData?.sma10?.value) }}\r\n          </span>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"indicator-item\">\r\n        <span class=\"indicator-label\">SMA30</span>\r\n        <div class=\"indicator-value-row\">\r\n          <span class=\"indicator-value\" :class=\"getSignalClass(technicalData?.sma30?.signal)\">\r\n            {{ formatValue(technicalData?.sma30?.value) }}\r\n          </span>\r\n          <span class=\"price-diff\" :class=\"getPriceDiffClass(technicalData?.sma30?.value)\">\r\n            {{ formatPriceDiff(technicalData?.sma30?.value) }}\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Row 3: Ichimoku Components -->\r\n      <div class=\"indicator-item\">\r\n        <span class=\"indicator-label\">Ichimoku Conversion (9)</span>\r\n        <div class=\"indicator-value-row\">\r\n          <span class=\"indicator-value\" :class=\"getSignalClass(technicalData?.ichimokuConversionLine?.signal)\">\r\n            {{ formatValue(technicalData?.ichimokuConversionLine?.value) }}\r\n          </span>\r\n          <span class=\"price-diff\" :class=\"getPriceDiffClass(technicalData?.ichimokuConversionLine?.value)\">\r\n            {{ formatPriceDiff(technicalData?.ichimokuConversionLine?.value) }}\r\n          </span>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"indicator-item\">\r\n        <span class=\"indicator-label\">Ichimoku Base (26)</span>\r\n        <div class=\"indicator-value-row\">\r\n          <span class=\"indicator-value\" :class=\"getSignalClass(technicalData?.ichimokuBaseLine?.signal)\">\r\n            {{ formatValue(technicalData?.ichimokuBaseLine?.value) }}\r\n          </span>\r\n          <span class=\"price-diff\" :class=\"getPriceDiffClass(technicalData?.ichimokuBaseLine?.value)\">\r\n            {{ formatPriceDiff(technicalData?.ichimokuBaseLine?.value) }}\r\n          </span>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"indicator-item\">\r\n        <span class=\"indicator-label\">Ichimoku Lagging (26)</span>\r\n        <div class=\"indicator-value-row\">\r\n          <span class=\"indicator-value\" :class=\"getSignalClass(technicalData?.ichimokuLaggingSpan?.signal)\">\r\n            {{ formatValue(technicalData?.ichimokuLaggingSpan?.value) }}\r\n          </span>\r\n          <span class=\"price-diff\" :class=\"getPriceDiffClass(technicalData?.ichimokuLaggingSpan?.value)\">\r\n            {{ formatPriceDiff(technicalData?.ichimokuLaggingSpan?.value) }}\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Row 4: Technical Indicators -->\r\n      <div class=\"indicator-item\">\r\n        <span class=\"indicator-label\">ADX (14)</span>\r\n        <span class=\"indicator-value\" :class=\"getSignalClass(technicalData?.adx14?.signal)\">\r\n          {{ formatValue(technicalData?.adx14?.value) }}\r\n        </span>\r\n      </div>\r\n      \r\n      <div class=\"indicator-item\">\r\n        <span class=\"indicator-label\">MACD (12,26)</span>\r\n        <span class=\"indicator-value\" :class=\"getSignalClass(technicalData?.macd?.signal)\">\r\n          {{ formatValue(technicalData?.macd?.value) }}\r\n        </span>\r\n      </div>\r\n      \r\n      <div class=\"indicator-item\">\r\n        <span class=\"indicator-label\">VWMA (20)</span>\r\n        <span class=\"indicator-value\" :class=\"getSignalClass(technicalData?.vwma20?.signal)\">\r\n          {{ formatValue(technicalData?.vwma20?.value) }}\r\n        </span>\r\n      </div>\r\n\r\n      <!-- Row 5: yfinance Volume Indicators -->\r\n      <div class=\"indicator-item\" v-if=\"hasYFinanceData\">\r\n        <span class=\"indicator-label\">Volume</span>\r\n        <div class=\"indicator-value-row\">\r\n          <span class=\"indicator-value\">\r\n            {{ formatVolume(technicalData?.yf?.volume_last_day) }}\r\n          </span>\r\n          <span class=\"price-diff\" :class=\"getPercentChangeClass(technicalData?.yf?.volume_last_day_pct)\">\r\n            {{ formatPercentChange(technicalData?.yf?.volume_last_day_pct) }}\r\n          </span>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"indicator-item\" v-if=\"hasYFinanceData\">\r\n        <span class=\"indicator-label\">5D Avg Volume</span>\r\n        <div class=\"indicator-value-row\">\r\n          <span class=\"indicator-value\">\r\n            {{ formatVolume(technicalData?.yf?.avg_volume_5d) }}\r\n          </span>\r\n          <span class=\"price-diff\" :class=\"getPercentChangeClass(technicalData?.yf?.avg_volume_5d_pct)\">\r\n            {{ formatPercentChange(technicalData?.yf?.avg_volume_5d_pct) }}\r\n          </span>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"indicator-item\" v-if=\"hasYFinanceData\">\r\n        <span class=\"indicator-label\">Market Cap</span>\r\n        <span class=\"indicator-value\">\r\n          {{ formatMarketCap(technicalData?.yf?.market_cap) }}\r\n        </span>\r\n      </div>\r\n\r\n      <!-- Row 6: yfinance Beta Indicators -->\r\n      <div class=\"indicator-item\" v-if=\"hasYFinanceData\">\r\n        <span class=\"indicator-label\">Beta (3mo)</span>\r\n        <span class=\"indicator-value\">\r\n          {{ formatBeta(technicalData?.yf?.beta_3mo) }}\r\n        </span>\r\n      </div>\r\n      \r\n      <div class=\"indicator-item\" v-if=\"hasYFinanceData\">\r\n        <span class=\"indicator-label\">Beta (1y)</span>\r\n        <span class=\"indicator-value\">\r\n          {{ formatBeta(technicalData?.yf?.beta_1y) }}\r\n        </span>\r\n      </div>\r\n      \r\n      <div class=\"indicator-item\" v-if=\"hasYFinanceData\">\r\n        <span class=\"indicator-label\">Beta (5y)</span>\r\n        <span class=\"indicator-value\">\r\n          {{ formatBeta(technicalData?.yf?.beta_5y) }}\r\n        </span>\r\n      </div>\r\n\r\n      <!-- Debug: YFinance Data Status -->\r\n      <div class=\"indicator-item\" style=\"grid-column: 1 / -1; background: #fff3cd; border-color: #ffeaa7;\">\r\n        <span class=\"indicator-label\"> YFinance Debug</span>\r\n        <div class=\"indicator-value\" style=\"font-size: 0.7rem; color: #856404;\">\r\n          hasYF: {{ hasYFinanceData }} | \r\n          hasTechData: {{ !!technicalData }} | \r\n          yfKeys: {{ technicalData?.yf ? Object.keys(technicalData.yf).join(', ') : 'none' }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport hybridTechnicalIndicatorsAPI from '../utils/hybridTechnicalIndicatorsApi.js'\r\n\r\nexport default {\r\n  name: 'TechnicalIndicators',\r\n  props: {\r\n    symbol: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    exchange: {\r\n      type: String,\r\n      default: 'NASDAQ'\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      loading: true,\r\n      error: null,\r\n      technicalData: null,\r\n      cacheInfo: null\r\n    }\r\n  },\r\n  computed: {\r\n    //  yfinance \r\n    hasYFinanceData() {\r\n      const hasYF = this.technicalData && this.technicalData.yf;\r\n      console.log(` YFinance data check for ${this.symbol}:`, {\r\n        hasTechnicalData: !!this.technicalData,\r\n        hasYF: hasYF,\r\n        yfData: this.technicalData?.yf,\r\n        yfKeys: this.technicalData?.yf ? Object.keys(this.technicalData.yf) : 'none'\r\n      });\r\n      return hasYF;\r\n    }\r\n  },\r\n  mounted() {\r\n    this.loadTechnicalData()\r\n  },\r\n  watch: {\r\n    symbol() {\r\n      this.loadTechnicalData()\r\n    }\r\n  },\r\n  methods: {\r\n    async loadTechnicalData() {\r\n      this.loading = true;\r\n      this.error = null;\r\n      this.cacheInfo = null;\r\n      \r\n      try {\r\n        console.log(` Loading technical data for ${this.symbol}...`);\r\n        \r\n        const startTime = Date.now();\r\n        \r\n        //  \r\n        // \r\n        this.technicalData = await hybridTechnicalIndicatorsAPI.getTechnicalIndicators(this.symbol);\r\n        \r\n        const loadTime = Date.now() - startTime;\r\n        \r\n        if (this.technicalData.error) {\r\n          throw new Error(this.technicalData.error);\r\n        }\r\n        \r\n        // \r\n        if (this.technicalData.source) {\r\n          if (this.technicalData.source.includes('Cache')) {\r\n            this.cacheInfo = `${this.technicalData.source} (${loadTime}ms)`;\r\n          } else if (this.technicalData.source.includes('Precomputed')) {\r\n            this.cacheInfo = `${this.technicalData.source} (${loadTime}ms)`;\r\n          } else {\r\n            this.cacheInfo = `Fresh data (${loadTime}ms)`;\r\n          }\r\n        } else {\r\n          this.cacheInfo = `Loaded in ${loadTime}ms`;\r\n        }\r\n        \r\n        console.log(` Technical data loaded for ${this.symbol}:`, {\r\n          source: this.technicalData.source,\r\n          loadTime: `${loadTime}ms`,\r\n          hasADX: !!this.technicalData.adx14?.value,\r\n          hasYFinance: !!this.technicalData.yf,\r\n          yfinanceKeys: this.technicalData.yf ? Object.keys(this.technicalData.yf) : 'none',\r\n          yfinanceData: this.technicalData.yf\r\n        });\r\n        \r\n        //  ADX \r\n        if (this.technicalData.adx14 && this.technicalData.adx14.value !== null && this.technicalData.adx14.value !== 'N/A') {\r\n          console.log(` ADX data is valid for ${this.symbol}: ${this.technicalData.adx14.value}`);\r\n        } else {\r\n          console.warn(` ADX data may be invalid for ${this.symbol}:`, this.technicalData.adx14);\r\n        }\r\n        \r\n        //  PerformanceMonitor\r\n        if (typeof window !== 'undefined') {\r\n          window.dispatchEvent(new CustomEvent('widget-loaded', {\r\n            detail: {\r\n              name: `TechnicalIndicators-${this.symbol}`,\r\n              time: loadTime,\r\n              priority: 2\r\n            }\r\n          }))\r\n        }\r\n        \r\n      } catch (error) {\r\n        console.error(` Failed to load technical data for ${this.symbol}:`, error);\r\n        this.error = error.message;\r\n        \r\n        // \r\n        if (error.message.includes('fetch') || error.message.includes('network') || error.message.includes('proxy')) {\r\n          this.error = `Network error loading data for ${this.symbol}. Click to retry.`;\r\n        }\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n    \r\n    // \r\n    async retryLoad() {\r\n      await this.loadTechnicalData();\r\n    },\r\n    \r\n    getSignalClass(signal) {\r\n      if (!signal) return 'neutral';\r\n      \r\n      const bullishSignals = ['BUY', 'OVERSOLD', 'STRONG_TREND'];\r\n      const bearishSignals = ['SELL', 'OVERBOUGHT'];\r\n      \r\n      if (bullishSignals.includes(signal)) return 'bullish';\r\n      if (bearishSignals.includes(signal)) return 'bearish';\r\n      return 'neutral';\r\n    },\r\n    \r\n    formatValue(value) {\r\n      if (value === null || value === undefined) return 'N/A';\r\n      if (typeof value === 'string') return value;\r\n      if (typeof value === 'number') return value.toFixed(2);\r\n      return 'N/A';\r\n    },\r\n    \r\n    //  ()\r\n    formatPriceDiff(indicatorValue) {\r\n      if (!indicatorValue || !this.technicalData) return '';\r\n      \r\n      // \r\n      const currentPrice = this.getCurrentPrice();\r\n      if (!currentPrice) return '';\r\n      \r\n      const diff = currentPrice - parseFloat(indicatorValue);\r\n      const diffPercent = (diff / parseFloat(indicatorValue)) * 100;\r\n      \r\n      if (Math.abs(diff) < 0.01) return '0.00';\r\n      \r\n      const sign = diff > 0 ? '+' : '';\r\n      return `${sign}${diff.toFixed(2)} (${sign}${diffPercent.toFixed(1)}%)`;\r\n    },\r\n    \r\n    // \r\n    getCurrentPrice() {\r\n      if (!this.technicalData) return null;\r\n      \r\n      // \r\n      if (this.technicalData.sma5?.currentPrice) {\r\n        return parseFloat(this.technicalData.sma5.currentPrice);\r\n      }\r\n      if (this.technicalData.ma5?.currentPrice) {\r\n        return parseFloat(this.technicalData.ma5.currentPrice);\r\n      }\r\n      if (this.technicalData.sma50?.currentPrice) {\r\n        return parseFloat(this.technicalData.sma50.currentPrice);\r\n      }\r\n      \r\n      return null;\r\n    },\r\n    \r\n    //  ()\r\n    getPriceDiffClass(indicatorValue) {\r\n      if (!indicatorValue) return 'neutral';\r\n      \r\n      const currentPrice = this.getCurrentPrice();\r\n      if (!currentPrice) return 'neutral';\r\n      \r\n      const diff = currentPrice - parseFloat(indicatorValue);\r\n      \r\n      if (Math.abs(diff) < 0.01) return 'neutral';\r\n      return diff > 0 ? 'positive' : 'negative';\r\n    },\r\n\r\n    // yfinance \r\n    formatVolume(volume) {\r\n      if (volume === null || volume === undefined) return '--';\r\n      \r\n      // \r\n      if (volume >= 1000000000) {\r\n        return `${(volume / 1000000000).toFixed(1)}B`;\r\n      } else if (volume >= 1000000) {\r\n        return `${(volume / 1000000).toFixed(1)}M`;\r\n      } else if (volume >= 1000) {\r\n        return `${(volume / 1000).toFixed(1)}K`;\r\n      } else {\r\n        return volume.toLocaleString();\r\n      }\r\n    },\r\n\r\n    formatMarketCap(marketCap) {\r\n      if (marketCap === null || marketCap === undefined) return '--';\r\n      \r\n      // \r\n      if (marketCap >= 1000000000000) {\r\n        return `$${(marketCap / 1000000000000).toFixed(1)}T`;\r\n      } else if (marketCap >= 1000000000) {\r\n        return `$${(marketCap / 1000000000).toFixed(1)}B`;\r\n      } else if (marketCap >= 1000000) {\r\n        return `$${(marketCap / 1000000).toFixed(1)}M`;\r\n      } else {\r\n        return `$${marketCap.toLocaleString()}`;\r\n      }\r\n    },\r\n\r\n    formatBeta(beta) {\r\n      if (beta === null || beta === undefined) return '--';\r\n      return beta.toFixed(2);\r\n    },\r\n\r\n    formatPercentChange(pct) {\r\n      if (pct === null || pct === undefined) return '';\r\n      const sign = pct > 0 ? '+' : '';\r\n      return `(${sign}${pct.toFixed(1)}%)`;\r\n    },\r\n\r\n    getPercentChangeClass(pct) {\r\n      if (pct === null || pct === undefined) return 'neutral';\r\n      if (Math.abs(pct) < 0.1) return 'neutral';\r\n      return pct > 0 ? 'positive' : 'negative';\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.technical-indicators {\r\n  background: #f8f9fa;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  margin-top: 1rem;\r\n}\r\n\r\n.indicators-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.indicators-header h4 {\r\n  font-size: 0.95rem;\r\n  font-weight: 600;\r\n  color: #495057;\r\n  margin: 0;\r\n}\r\n\r\n.cache-info {\r\n  color: #6c757d;\r\n  font-size: 0.7rem;\r\n}\r\n\r\n.loading-state {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 0.75rem;\r\n  color: #6c757d;\r\n  font-size: 0.9rem;\r\n  padding: 2rem;\r\n}\r\n\r\n.loading-spinner {\r\n  width: 20px;\r\n  height: 20px;\r\n  border: 2px solid #e9ecef;\r\n  border-top: 2px solid #007bff;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n.error-state {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 0.5rem;\r\n  color: #dc3545;\r\n  font-size: 0.9rem;\r\n  text-align: center;\r\n  padding: 2rem;\r\n  flex-direction: column;\r\n}\r\n\r\n.error-icon {\r\n  font-size: 1.1rem;\r\n}\r\n\r\n.retry-button {\r\n  background: #007bff;\r\n  color: white;\r\n  border: none;\r\n  padding: 0.5rem 1rem;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.8rem;\r\n  margin-top: 0.5rem;\r\n}\r\n\r\n.retry-button:hover:not(:disabled) {\r\n  background: #0056b3;\r\n}\r\n\r\n.retry-button:disabled {\r\n  background: #6c757d;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.indicators-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(3, 1fr);\r\n  gap: 0.75rem;\r\n}\r\n\r\n.indicator-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  text-align: center;\r\n  padding: 0.75rem;\r\n  background: white;\r\n  border-radius: 6px;\r\n  border: 1px solid #e9ecef;\r\n  min-height: 60px;\r\n  justify-content: center;\r\n}\r\n\r\n.indicator-label {\r\n  font-size: 0.75rem;\r\n  color: #6c757d;\r\n  margin-bottom: 0.25rem;\r\n  font-weight: 500;\r\n  line-height: 1.2;\r\n}\r\n\r\n.indicator-value-row {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  flex-wrap: wrap;\r\n  justify-content: center;\r\n}\r\n\r\n.indicator-value {\r\n  font-size: 0.85rem;\r\n  font-weight: 600;\r\n  line-height: 1.2;\r\n}\r\n\r\n.indicator-value.bullish {\r\n  color: #28a745;\r\n}\r\n\r\n.indicator-value.bearish {\r\n  color: #dc3545;\r\n}\r\n\r\n.indicator-value.neutral {\r\n  color: #6c757d;\r\n}\r\n\r\n.price-diff {\r\n  font-size: 0.65rem;\r\n  font-weight: 500;\r\n  white-space: nowrap;\r\n}\r\n\r\n.price-diff.positive {\r\n  color: #28a745;\r\n}\r\n\r\n.price-diff.negative {\r\n  color: #dc3545;\r\n}\r\n\r\n.price-diff.neutral {\r\n  color: #6c757d;\r\n}\r\n\r\n.cache-info {\r\n  margin-top: 0.5rem;\r\n  text-align: center;\r\n  color: #6c757d;\r\n  font-size: 0.7rem;\r\n}\r\n\r\n/*  */\r\n@media (max-width: 768px) {\r\n  .indicators-grid {\r\n    grid-template-columns: repeat(2, 1fr);\r\n    gap: 0.5rem;\r\n  }\r\n  \r\n  .indicator-item {\r\n    padding: 0.5rem;\r\n    min-height: 50px;\r\n  }\r\n  \r\n  .indicator-label {\r\n    font-size: 0.7rem;\r\n  }\r\n  \r\n  .indicator-value {\r\n    font-size: 0.8rem;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .indicators-grid {\r\n    grid-template-columns: 1fr;\r\n  }\r\n}\r\n</style>","<template>\r\n  <div \r\n    class=\"stock-card-pair\"\r\n    :id=\"domId\"\r\n    :data-symbol=\"quote.symbol\"\r\n    tabindex=\"-1\"\r\n  >\r\n    <!-- Stock Info Header -->\r\n    <div class=\"stock-info-header\">\r\n      <div class=\"symbol-info\">\r\n        <h3 class=\"symbol\">{{ quote.symbol }}</h3>\r\n        <div class=\"symbol-tags\">\r\n          <span class=\"exchange-tag\">{{ getExchange() }}</span>\r\n          <span class=\"industry-tag\" :class=\"`industry-${getIndustryCategory()}`\">{{ getIndustry() }}</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"header-actions\">\r\n        <button \r\n          @click=\"goToDetail\" \r\n          class=\"detail-btn\"\r\n          :title=\"`View detailed analysis for ${quote.symbol}`\"\r\n        >\r\n          Detail\r\n          <span class=\"btn-icon\"></span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- TradingView Widgets Container -->\r\n    <div class=\"widgets-container\">\r\n      <!-- Symbol Overview (2/3 width) -->\r\n      <div class=\"widget-overview\">\r\n        <div class=\"widget-header\">\r\n          <h4>Symbol Overview</h4>\r\n        </div>\r\n        <FastTradingViewWidget \r\n          widget-type=\"overview\"\r\n          :symbol=\"quote.symbol\" \r\n          :exchange=\"getExchange()\"\r\n          :priority=\"1\"\r\n        />\r\n      </div>\r\n\r\n      <!-- Technical Analysis (1/3 width) -  TechnicalAnalysisWidget -->\r\n      <div class=\"widget-overview\">\r\n        <div class=\"widget-header\">\r\n          <h4>Technical Analysis</h4>\r\n        </div>\r\n        <TechnicalAnalysisWidget \r\n          :symbol=\"quote.symbol\" \r\n          :exchange=\"getExchange()\"\r\n          :priority=\"2\"\r\n        />\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Additional Info (Optional) -->\r\n    <div v-if=\"dailyData\" class=\"additional-info\">\r\n      <div class=\"brief-section\">\r\n        <h5>Daily Brief</h5>\r\n        <p class=\"brief-text\">{{ dailyData.short_brief_zh }}</p>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Technical Indicators -->\r\n    <TechnicalIndicators \r\n      :symbol=\"quote.symbol\" \r\n      :exchange=\"getExchange()\"\r\n    />\r\n\r\n\r\n\r\n    <!-- Stale Indicator -->\r\n    <div v-if=\"isStale\" class=\"stale-indicator\">\r\n      <span class=\"stale-badge\" :class=\"`stale-${quote.stale_level}`\">\r\n        {{ getStaleText() }}\r\n      </span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport FastTradingViewWidget from './FastTradingViewWidget.vue'\r\nimport TechnicalAnalysisWidget from './TechnicalAnalysisWidget.vue'\r\nimport TechnicalIndicators from './TechnicalIndicators.vue'\r\n\r\nexport default {\r\n  name: 'StockCard',\r\n  components: {\r\n    FastTradingViewWidget,\r\n    TechnicalAnalysisWidget,\r\n    TechnicalIndicators\r\n  },\r\n  props: {\r\n    quote: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    dailyData: {\r\n      type: Object,\r\n      default: null\r\n    },\r\n    metadata: {\r\n      type: Object,\r\n      default: null\r\n    }\r\n  },\r\n  computed: {\r\n    isStale() {\r\n      return this.quote.stale_level !== 'fresh'\r\n    },\r\n\r\n    domId() {\r\n      return `sym-${this.sanitizeSymbol(this.quote.symbol)}`\r\n    }\r\n  },\r\n  methods: {\r\n    getSector() {\r\n      if (!this.metadata) return 'Unknown'\r\n      \r\n      //  PRD confidence < 0.7  Unknown\r\n      if (this.metadata.confidence < 0.7) {\r\n        return 'Unknown'\r\n      }\r\n      \r\n      return this.metadata.sector || 'Unknown'\r\n    },\r\n\r\n    getIndustry() {\r\n      if (!this.metadata) {\r\n        return 'Unknown Industry'\r\n      }\r\n      \r\n      if (this.metadata.confidence < 0.7) {\r\n        return 'Unknown Industry'\r\n      }\r\n      \r\n      return this.metadata.industry || this.metadata.sector || 'Unknown Industry'\r\n    },\r\n\r\n    getIndustryCategory() {\r\n      const industry = this.getIndustry()\r\n      \r\n      //  industry \r\n      const industryCategories = {\r\n        'Industrial IoT Solutions': 'tech-iot',\r\n        'Satellite Imaging & Analytics': 'tech-satellite',\r\n        'Database Software': 'tech-software',\r\n        'Enterprise Software': 'tech-software',\r\n        'Semiconductors': 'tech-hardware',\r\n        'Aerospace & Defense': 'industrial-aerospace',\r\n        'Space Infrastructure': 'industrial-space',\r\n        'Satellite Communications': 'communications',\r\n        'Electric Vehicles': 'automotive',\r\n        'Unknown Industry': 'unknown'\r\n      }\r\n      \r\n      return industryCategories[industry] || 'other'\r\n    },\r\n\r\n    getExchange() {\r\n      if (this.metadata && this.metadata.exchange) {\r\n        //  metadata  exchange \r\n        const exchangeMap = {\r\n          'NYQ': 'NYSE',    // New York Stock Exchange\r\n          'NMS': 'NASDAQ',  // NASDAQ Global Select Market\r\n          'NCM': 'NASDAQ',  // NASDAQ Capital Market\r\n          'NGM': 'NASDAQ',  // NASDAQ Global Market\r\n          'ASE': 'AMEX'     // NYSE American ( American Stock Exchange)\r\n        }\r\n        return exchangeMap[this.metadata.exchange] || this.metadata.exchange\r\n      }\r\n      \r\n      //  symbol \r\n      const symbol = this.quote.symbol\r\n      \r\n      // NYSE \r\n      if (['ORCL', 'TSM', 'RDW', 'CRM', 'PL', 'LEU', 'SMR', 'IONQ', 'HIMS'].includes(symbol)) {\r\n        return 'NYSE'\r\n      }\r\n      // NASDAQ \r\n      else if (['ASTS', 'RIVN', 'ONDS', 'AVAV', 'MDB', 'RKLB', 'NVDA', 'AVGO', 'AMZN', 'GOOG', 'META', 'NFLX', 'CRWV', 'PLTR', 'TSLA'].includes(symbol)) {\r\n        return 'NASDAQ'\r\n      }\r\n      \r\n      return 'NASDAQ' // \r\n    },\r\n\r\n    getStaleText() {\r\n      switch (this.quote.stale_level) {\r\n        case 'stale': return ' Stale Data'\r\n        case 'very_stale': return ' Very Stale'\r\n        default: return ''\r\n      }\r\n    },\r\n\r\n    goToDetail() {\r\n      //  ()\r\n      console.log('Navigating to stock detail for:', this.quote.symbol)\r\n      this.$router.push({\r\n        name: 'stock-detail',\r\n        params: { symbol: this.quote.symbol }\r\n      }).catch(err => {\r\n        console.error('Navigation error:', err)\r\n      })\r\n    },\r\n\r\n    sanitizeSymbol(symbol) {\r\n      //  symbol  DOM ID\r\n      // \r\n      return symbol.replace(/[^a-zA-Z0-9]/g, '_')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/* Stock Card Pair Container */\r\n.stock-card-pair {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 12px;\r\n  padding: 1.5rem;\r\n  transition: all 0.2s;\r\n  position: relative;\r\n  width: 100%;\r\n  scroll-margin-top: 80px; /* Handle sticky header offset */\r\n}\r\n\r\n/* Stock Info Header */\r\n.stock-info-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 1.5rem;\r\n  padding-bottom: 1rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.symbol-info .symbol {\r\n  font-size: 1.5rem;\r\n  font-weight: 700;\r\n  color: #333;\r\n  margin: 0 0 0.5rem 0;\r\n}\r\n\r\n.symbol-tags {\r\n  display: flex;\r\n  gap: 0.5rem;\r\n  align-items: center;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.exchange-tag {\r\n  font-size: 0.75rem;\r\n  color: #007bff;\r\n  background-color: #e7f3ff;\r\n  padding: 0.25rem 0.5rem;\r\n  border-radius: 4px;\r\n  font-weight: 500;\r\n  border: 1px solid #90caf9;\r\n  display: inline-block;\r\n}\r\n\r\n.industry-tag {\r\n  font-size: 0.75rem;\r\n  color: #666;\r\n  background-color: #e8f4fd;\r\n  padding: 0.25rem 0.5rem;\r\n  border-radius: 4px;\r\n  font-weight: 500;\r\n  border: 1px solid #b3d9ff;\r\n  display: inline-block;\r\n}\r\n\r\n/* Industry Category Specific Styles */\r\n.industry-tech-iot {\r\n  background-color: #e3f2fd;\r\n  color: #1565c0;\r\n  border-color: #90caf9;\r\n}\r\n\r\n.industry-tech-satellite {\r\n  background-color: #f3e5f5;\r\n  color: #7b1fa2;\r\n  border-color: #ce93d8;\r\n}\r\n\r\n.industry-tech-software {\r\n  background-color: #e8f5e8;\r\n  color: #2e7d32;\r\n  border-color: #a5d6a7;\r\n}\r\n\r\n.industry-tech-hardware {\r\n  background-color: #fff3e0;\r\n  color: #ef6c00;\r\n  border-color: #ffcc80;\r\n}\r\n\r\n.industry-industrial-aerospace {\r\n  background-color: #fce4ec;\r\n  color: #c2185b;\r\n  border-color: #f8bbd9;\r\n}\r\n\r\n.industry-industrial-space {\r\n  background-color: #f1f8e9;\r\n  color: #558b2f;\r\n  border-color: #c5e1a5;\r\n}\r\n\r\n.industry-communications {\r\n  background-color: #e0f2f1;\r\n  color: #00695c;\r\n  border-color: #80cbc4;\r\n}\r\n\r\n.industry-automotive {\r\n  background-color: #fff8e1;\r\n  color: #ff8f00;\r\n  border-color: #ffcc02;\r\n}\r\n\r\n.industry-unknown {\r\n  background-color: #f5f5f5;\r\n  color: #757575;\r\n  border-color: #e0e0e0;\r\n}\r\n\r\n.industry-other {\r\n  background-color: #fafafa;\r\n  color: #616161;\r\n  border-color: #bdbdbd;\r\n}\r\n\r\n.exchange-info .exchange {\r\n  font-size: 0.9rem;\r\n  color: #007bff;\r\n  background-color: #e7f3ff;\r\n  padding: 0.3rem 0.6rem;\r\n  border-radius: 6px;\r\n  font-weight: 600;\r\n}\r\n\r\n/* Header Actions */\r\n.header-actions {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 1rem;\r\n}\r\n\r\n.detail-btn {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 0.5rem;\r\n  padding: 0.5rem 1rem;\r\n  background: linear-gradient(135deg, #007bff, #0056b3);\r\n  color: white;\r\n  border: none;\r\n  border-radius: 6px;\r\n  font-size: 0.85rem;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n  box-shadow: 0 2px 4px rgba(0, 123, 255, 0.2);\r\n  line-height: 1;\r\n  min-height: 36px;\r\n}\r\n\r\n.detail-btn:hover {\r\n  background: linear-gradient(135deg, #0056b3, #004085);\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 4px 8px rgba(0, 123, 255, 0.3);\r\n}\r\n\r\n.detail-btn:active {\r\n  transform: translateY(0);\r\n}\r\n\r\n.btn-icon {\r\n  font-size: 1rem;\r\n  line-height: 1;\r\n  display: inline-flex;\r\n  align-items: center;\r\n}\r\n\r\n/* Widgets Container */\r\n.widgets-container {\r\n  display: grid;\r\n  grid-template-columns: 2fr 1fr; /* 2/3  1/3  */\r\n  gap: 1.5rem;\r\n  margin-bottom: 0px; /*  padding */\r\n  min-height: 450px; /*  600px  450px */\r\n  will-change: transform; /*  */\r\n}\r\n\r\n.widget-overview,\r\n.widget-technical {\r\n  background: #fafafa;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n  display: flex;\r\n  flex-direction: column;\r\n  contain: layout style paint; /* CSS containment  */\r\n}\r\n\r\n.widget-overview {\r\n  min-height: 440px; /* Symbol Overview  Technical Analysis  */\r\n  height: 440px;\r\n}\r\n\r\n.widget-technical {\r\n  min-height: 440px; /* Technical Analysis  440px  scroll bar */\r\n  height: 440px;\r\n}\r\n\r\n.widget-header {\r\n  background: #f8f9fa;\r\n  padding: 0.75rem 1rem;\r\n  border-bottom: 1px solid #e9ecef;\r\n  flex-shrink: 0; /*  header  */\r\n}\r\n\r\n.widget-header h4 {\r\n  font-size: 0.95rem;\r\n  font-weight: 600;\r\n  color: #495057;\r\n  margin: 0;\r\n}\r\n\r\n/*  widget  */\r\n.widget-overview > :not(.widget-header) {\r\n  flex: 1;\r\n  min-height: 390px; /* Symbol Overview  */\r\n}\r\n\r\n.widget-technical > :not(.widget-header) {\r\n  flex: 1;\r\n  min-height: 390px; /* Technical Analysis  390px */\r\n}\r\n\r\n/* Additional Info */\r\n.additional-info {\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.brief-section {\r\n  background: #f8f9fa;\r\n  padding: 1rem;\r\n  border-radius: 6px;\r\n  border-left: 4px solid #007bff;\r\n  display: none; /*  brief-section */\r\n}\r\n\r\n.brief-section h5 {\r\n  font-size: 0.9rem;\r\n  color: #495057;\r\n  margin: 0 0 0.5rem 0;\r\n  font-weight: 600;\r\n}\r\n\r\n.brief-text {\r\n  font-size: 0.85rem;\r\n  line-height: 1.5;\r\n  color: #6c757d;\r\n  margin: 0;\r\n}\r\n\r\n\r\n\r\n/* Stale Indicator */\r\n.stale-indicator {\r\n  position: absolute;\r\n  top: 1rem;\r\n  right: 1rem;\r\n}\r\n\r\n.stale-badge {\r\n  font-size: 0.7rem;\r\n  padding: 0.25rem 0.5rem;\r\n  border-radius: 4px;\r\n  font-weight: 500;\r\n}\r\n\r\n.stale-badge.stale-very_stale {\r\n  background-color: #f8d7da;\r\n  color: #721c24;\r\n}\r\n\r\n/*  */\r\n\r\n/*  () - 1200px  */\r\n@media (min-width: 1200px) {\r\n  .stock-card-pair {\r\n    padding: 2rem;\r\n  }\r\n  \r\n  .symbol-info .symbol {\r\n    font-size: 1.6rem;\r\n  }\r\n  \r\n  .widgets-container {\r\n    gap: 2rem;\r\n  }\r\n}\r\n\r\n/*  () - 768px  1199px */\r\n@media (min-width: 768px) and (max-width: 1199px) {\r\n  .stock-card-pair {\r\n    padding: 1.5rem;\r\n  }\r\n  \r\n  .symbol-info .symbol {\r\n    font-size: 1.4rem;\r\n  }\r\n  \r\n  .widgets-container {\r\n    gap: 1.25rem;\r\n  }\r\n}\r\n\r\n/*  () - 768px  */\r\n@media (max-width: 767px) {\r\n  .stock-card-pair {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .stock-info-header {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 0.75rem;\r\n  }\r\n  \r\n  .header-actions {\r\n    width: 100%;\r\n    justify-content: space-between;\r\n  }\r\n  \r\n  .detail-btn {\r\n    padding: 0.4rem 0.8rem;\r\n    font-size: 0.8rem;\r\n  }\r\n  \r\n  .symbol-info .symbol {\r\n    font-size: 1.3rem;\r\n  }\r\n  \r\n  /* widgets  */\r\n  .widgets-container {\r\n    grid-template-columns: 1fr;\r\n    gap: 1rem;\r\n  }\r\n  \r\n  .widget-overview {\r\n    height: 380px; /*  */\r\n    min-height: 380px;\r\n  }\r\n  \r\n  .widget-technical {\r\n    height: 380px; /*  Technical Analysis  */\r\n    min-height: 380px;\r\n  }\r\n  \r\n  .widget-header h4 {\r\n    font-size: 0.9rem;\r\n  }\r\n  \r\n  .brief-section {\r\n    padding: 0.75rem;\r\n    display: none; /*  brief-section */\r\n  }\r\n  \r\n  .brief-text {\r\n    font-size: 0.8rem;\r\n  }\r\n}\r\n\r\n/*  () - 480px  */\r\n@media (max-width: 480px) {\r\n  .stock-card-pair {\r\n    padding: 0.75rem;\r\n  }\r\n  \r\n  .symbol-info .symbol {\r\n    font-size: 1.2rem;\r\n  }\r\n  \r\n  .exchange-tag,\r\n  .industry-tag {\r\n    font-size: 0.7rem;\r\n    padding: 0.2rem 0.4rem;\r\n  }\r\n  \r\n  .widgets-container {\r\n    gap: 0.75rem;\r\n  }\r\n  \r\n  .widget-overview {\r\n    height: 330px; /*  */\r\n    min-height: 330px;\r\n  }\r\n  \r\n  .widget-technical {\r\n    height: 330px; /*  Technical Analysis  */\r\n    min-height: 330px;\r\n  }\r\n  \r\n  .widget-header {\r\n    padding: 0.5rem 0.75rem;\r\n  }\r\n  \r\n  .brief-section {\r\n    padding: 0.5rem;\r\n    display: none; /*  brief-section */\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"toc-tree\">\r\n    <div\r\n      v-for=\"sectorNode in nodes\"\r\n      :key=\"sectorNode.id\"\r\n      class=\"tree-node sector-node\"\r\n    >\r\n      <!-- Sector Header -  details/summary -->\r\n      <div class=\"tree-label sector-label\">\r\n        <span class=\"label-text\" :title=\"sectorNode.label\">{{ sectorNode.label }}</span>\r\n        <span class=\"item-count\">({{ getTotalSymbolCount(sectorNode) }})</span>\r\n      </div>\r\n      \r\n      <!-- Industry  Symbol  details -->\r\n      <div class=\"tree-children\">\r\n        <div\r\n          v-for=\"industryNode in sectorNode.children\"\r\n          :key=\"industryNode.id\"\r\n          class=\"tree-node industry-node\"\r\n        >\r\n          <!-- Industry Header -  details/summary -->\r\n          <div class=\"tree-label industry-label\">\r\n            <span class=\"label-text\" :title=\"industryNode.label\">{{ industryNode.label }}</span>\r\n            <span class=\"item-count\">({{ industryNode.children.length }})</span>\r\n          </div>\r\n          \r\n          <!-- Symbol  -->\r\n          <div class=\"tree-children\">\r\n            <button\r\n              v-for=\"symbolNode in industryNode.children\"\r\n              :key=\"symbolNode.id\"\r\n              class=\"tree-node symbol-node\"\r\n              :class=\"{ 'is-active': symbolNode.symbol === activeSymbol }\"\r\n              :aria-current=\"symbolNode.symbol === activeSymbol ? 'location' : null\"\r\n              @click=\"onSymbolClick(symbolNode.symbol)\"\r\n              @keydown.enter=\"onSymbolClick(symbolNode.symbol)\"\r\n              @keydown.space.prevent=\"onSymbolClick(symbolNode.symbol)\"\r\n            >\r\n              <span class=\"symbol-text\" :title=\"symbolNode.label\">{{ symbolNode.label }}</span>\r\n              <span class=\"exchange-badge\">{{ symbolNode.metadata.exchange }}</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'TOCTree',\r\n  props: {\r\n    nodes: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    activeSymbol: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    searchQuery: {\r\n      type: String,\r\n      default: ''\r\n    }\r\n    //  expandedSections prop\r\n  },\r\n  emits: ['symbol-click'], //  toggle-section emit\r\n  methods: {\r\n    onSymbolClick(symbol) {\r\n      this.$emit('symbol-click', symbol)\r\n    },\r\n\r\n    getTotalSymbolCount(sectorNode) {\r\n      return sectorNode.children.reduce((total, industryNode) => {\r\n        return total + industryNode.children.length\r\n      }, 0)\r\n    }\r\n    //  onToggle  isSectionExpanded \r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.toc-tree {\r\n  font-size: 0.85rem;\r\n}\r\n\r\n.tree-node {\r\n  margin: 0;\r\n}\r\n\r\n/* Sector Styles - Level 0 */\r\n.sector-node {\r\n  margin-bottom: 0.25rem;\r\n}\r\n\r\n.sector-label {\r\n  font-weight: 600;\r\n  color: #333;\r\n  padding: 0.5rem 0.75rem;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  background: transparent;\r\n  border: none;\r\n  border-radius: 4px;\r\n  text-align: left;\r\n  width: 100%;\r\n  cursor: default; /*  pointer cursor */\r\n}\r\n\r\n/* Industry Styles - Level 1 */\r\n.industry-node {\r\n  margin-bottom: 0.125rem;\r\n}\r\n\r\n.industry-label {\r\n  font-weight: 500;\r\n  color: #495057;\r\n  padding: 0.375rem 0.75rem;\r\n  padding-left: 2rem; /*  - Level 1 */\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  background: transparent;\r\n  border: none;\r\n  border-radius: 3px;\r\n  text-align: left;\r\n  width: 100%;\r\n  cursor: default; /*  pointer cursor */\r\n}\r\n\r\n/* Symbol Styles - Level 2 */\r\n.symbol-node {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  width: 100%;\r\n  padding: 0.375rem 0.75rem;\r\n  padding-left: 3.25rem; /*  - Level 2 */\r\n  margin-bottom: 0.0625rem;\r\n  background: transparent;\r\n  border: none;\r\n  border-radius: 3px;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n  text-align: left;\r\n  font-size: 0.8rem;\r\n}\r\n\r\n.symbol-node:hover {\r\n  background: #e7f3ff;\r\n}\r\n\r\n.symbol-node.is-active {\r\n  background: #007bff;\r\n  color: white;\r\n  font-weight: 500;\r\n}\r\n\r\n.symbol-node.is-active .exchange-badge {\r\n  background: rgba(255, 255, 255, 0.2);\r\n  color: white;\r\n  border-color: rgba(255, 255, 255, 0.3);\r\n}\r\n\r\n/* Text Content Styles */\r\n.label-text {\r\n  flex: 1;\r\n  min-width: 0; /*  */\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n  margin-right: 0.5rem;\r\n}\r\n\r\n.symbol-text {\r\n  flex: 1;\r\n  min-width: 0;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n  font-weight: 500;\r\n  margin-right: 0.5rem;\r\n}\r\n\r\n.exchange-badge {\r\n  font-size: 0.7rem;\r\n  padding: 0.125rem 0.25rem;\r\n  background: #e9ecef;\r\n  color: #495057;\r\n  border: 1px solid #ced4da;\r\n  border-radius: 2px;\r\n  font-weight: 400;\r\n  flex-shrink: 0; /*  badge  */\r\n}\r\n\r\n.item-count {\r\n  font-size: 0.75rem;\r\n  color: #6c757d;\r\n  font-weight: 400;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.tree-children {\r\n  margin-top: 0.125rem;\r\n}\r\n\r\n/* Focus styles for accessibility */\r\n.symbol-node:focus {\r\n  outline: 2px solid #007bff;\r\n  outline-offset: 1px;\r\n}\r\n\r\n/* Reduced motion support */\r\n@media (prefers-reduced-motion: reduce) {\r\n  .symbol-node {\r\n    transition: none;\r\n  }\r\n}\r\n\r\n/* Responsive adjustments */\r\n@media (max-width: 320px) {\r\n  .industry-label {\r\n    padding-left: 1.5rem; /*  */\r\n  }\r\n  \r\n  .symbol-node {\r\n    padding-left: 2.5rem;\r\n  }\r\n  \r\n  .label-text,\r\n  .symbol-text {\r\n    font-size: 0.75rem;\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"navigation-panel\" :class=\"{ 'is-visible': isVisible }\">\r\n    <div class=\"panel-header\">\r\n      <h3>Quick Navigation</h3>\r\n      <div class=\"search-container\">\r\n        <input\r\n          v-model=\"localSearchQuery\"\r\n          type=\"text\"\r\n          placeholder=\"Search stocks, sectors, industries...\"\r\n          class=\"search-input\"\r\n          aria-label=\"Search stocks\"\r\n          @input=\"onSearchChange\"\r\n        />\r\n        <span class=\"search-icon\"></span>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"panel-content\">\r\n      <TOCTree\r\n        :nodes=\"filteredTocTree\"\r\n        :active-symbol=\"activeSymbol\"\r\n        :search-query=\"localSearchQuery\"\r\n        @symbol-click=\"onSymbolClick\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport TOCTree from './TOCTree.vue'\r\n\r\nexport default {\r\n  name: 'NavigationPanel',\r\n  components: {\r\n    TOCTree\r\n  },\r\n  props: {\r\n    tocTree: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    activeSymbol: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    searchQuery: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    isVisible: {\r\n      type: Boolean,\r\n      default: true\r\n    }\r\n    //  expandedSections prop\r\n  },\r\n  emits: ['symbol-click', 'search-change'], //  toggle-section emit\r\n  data() {\r\n    return {\r\n      localSearchQuery: this.searchQuery\r\n    }\r\n  },\r\n  computed: {\r\n    filteredTocTree() {\r\n      if (!this.localSearchQuery.trim()) {\r\n        return this.tocTree\r\n      }\r\n\r\n      const query = this.localSearchQuery.toLowerCase().trim()\r\n      \r\n      return this.tocTree.map(sectorNode => {\r\n        const filteredSector = { ...sectorNode, children: [] }\r\n        \r\n        sectorNode.children.forEach(industryNode => {\r\n          const filteredIndustry = { ...industryNode, children: [] }\r\n          \r\n          industryNode.children.forEach(symbolNode => {\r\n            // sector, industry, symbol, company name\r\n            const matches = [\r\n              sectorNode.label,\r\n              industryNode.label,\r\n              symbolNode.label,\r\n              symbolNode.symbol\r\n            ].some(text => text.toLowerCase().includes(query))\r\n            \r\n            if (matches) {\r\n              filteredIndustry.children.push(symbolNode)\r\n            }\r\n          })\r\n          \r\n          if (filteredIndustry.children.length > 0) {\r\n            filteredSector.children.push(filteredIndustry)\r\n          }\r\n        })\r\n        \r\n        return filteredSector.children.length > 0 ? filteredSector : null\r\n      }).filter(Boolean)\r\n    }\r\n  },\r\n  watch: {\r\n    searchQuery(newValue) {\r\n      this.localSearchQuery = newValue\r\n    }\r\n  },\r\n  methods: {\r\n    onSymbolClick(symbol) {\r\n      this.$emit('symbol-click', symbol)\r\n    },\r\n\r\n    onSearchChange() {\r\n      this.$emit('search-change', this.localSearchQuery)\r\n    }\r\n    //  onToggleSection \r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.navigation-panel {\r\n  position: sticky;\r\n  top: 80px; /* Account for header height */\r\n  height: calc(100vh - 100px);\r\n  width: 350px; /*  300px  350px */\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.panel-header {\r\n  padding: 1rem;\r\n  border-bottom: 1px solid #e9ecef;\r\n  background: #f8f9fa;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.panel-header h3 {\r\n  margin: 0 0 0.75rem 0;\r\n  font-size: 1rem;\r\n  font-weight: 600;\r\n  color: #333;\r\n}\r\n\r\n.search-container {\r\n  position: relative;\r\n}\r\n\r\n.search-input {\r\n  width: 100%;\r\n  padding: 0.5rem 2rem 0.5rem 0.75rem;\r\n  border: 1px solid #ddd;\r\n  border-radius: 6px;\r\n  font-size: 0.85rem;\r\n  background: white;\r\n  transition: border-color 0.2s;\r\n}\r\n\r\n.search-input:focus {\r\n  outline: none;\r\n  border-color: #007bff;\r\n  box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.1);\r\n}\r\n\r\n.search-icon {\r\n  position: absolute;\r\n  right: 0.75rem;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  color: #666;\r\n  pointer-events: none;\r\n}\r\n\r\n.panel-content {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  padding: 0.5rem;\r\n}\r\n\r\n/*  */\r\n@media (max-width: 1023px) {\r\n  .navigation-panel {\r\n    display: none;\r\n  }\r\n}\r\n\r\n/*  */\r\n.panel-content::-webkit-scrollbar {\r\n  width: 6px;\r\n}\r\n\r\n.panel-content::-webkit-scrollbar-track {\r\n  background: #f1f1f1;\r\n  border-radius: 3px;\r\n}\r\n\r\n.panel-content::-webkit-scrollbar-thumb {\r\n  background: #c1c1c1;\r\n  border-radius: 3px;\r\n}\r\n\r\n.panel-content::-webkit-scrollbar-thumb:hover {\r\n  background: #a8a8a8;\r\n}\r\n</style>","/**\r\n * NavigationService -  Stock Overview \r\n *  DOM scroll  Hash Router \r\n */\r\nexport class NavigationService {\r\n  constructor() {\r\n    this.headerOffset = 80 //  header \r\n  }\r\n\r\n  /**\r\n   *  symbol\r\n   * @param {string} symbol - \r\n   * @param {boolean} smooth - \r\n   * @returns {Promise<void>}\r\n   */\r\n  async scrollToSymbol(symbol, smooth = true) {\r\n    try {\r\n      const sanitizedSymbol = this.sanitizeSymbol(symbol)\r\n      const targetId = `sym-${sanitizedSymbol}`\r\n      const targetElement = document.getElementById(targetId)\r\n\r\n      if (!targetElement) {\r\n        console.warn(`NavigationService: Element with ID \"${targetId}\" not found for symbol \"${symbol}\"`)\r\n        return\r\n      }\r\n\r\n      //  prefers-reduced-motion \r\n      const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches\r\n      \r\n      //  sticky header\r\n      const elementTop = targetElement.offsetTop\r\n      const scrollTop = elementTop - this.getHeaderOffset()\r\n      const currentScrollTop = window.pageYOffset\r\n      const scrollDistance = Math.abs(scrollTop - currentScrollTop)\r\n      \r\n      //  2  viewport \r\n      const viewportHeight = window.innerHeight\r\n      const distanceThreshold = viewportHeight * 2\r\n      const shouldUseInstant = scrollDistance > distanceThreshold || prefersReducedMotion\r\n      const shouldUseSmooth = smooth && !shouldUseInstant\r\n\r\n      console.log(`NavigationService: Scroll distance ${scrollDistance}px, threshold ${distanceThreshold}px, using ${shouldUseSmooth ? 'smooth' : 'instant'} scroll`)\r\n\r\n      // \r\n      window.scrollTo({\r\n        top: Math.max(0, scrollTop),\r\n        behavior: shouldUseSmooth ? 'smooth' : 'instant'\r\n      })\r\n\r\n      //  focus\r\n      if (shouldUseSmooth) {\r\n        // \r\n        await this.waitForScrollComplete()\r\n      }\r\n\r\n      //  focus \r\n      targetElement.focus({ preventScroll: true })\r\n\r\n      console.log(`NavigationService: Scrolled to symbol \"${symbol}\" (ID: ${targetId}) using ${shouldUseSmooth ? 'smooth' : 'instant'} behavior`)\r\n    } catch (error) {\r\n      console.error('NavigationService: Error scrolling to symbol:', error)\r\n    }\r\n  }\r\n\r\n  /**\r\n   *  symbol  DOM ID\r\n   * @param {string} symbol -  symbol\r\n   * @returns {string}  symbol\r\n   */\r\n  sanitizeSymbol(symbol) {\r\n    return symbol.replace(/[^a-zA-Z0-9]/g, '_')\r\n  }\r\n\r\n  /**\r\n   *  URL query \r\n   * @deprecated  Hash Router  Vue Router query \r\n   * @param {string} symbol - \r\n   */\r\n  updateQueryParam(symbol) {\r\n    console.warn('DEPRECATED: NavigationService.updateQueryParam() should not be used with Hash Router. Use Vue Router query methods instead.')\r\n    \r\n    try {\r\n      const url = new URL(window.location)\r\n      \r\n      if (symbol) {\r\n        url.searchParams.set('focus', symbol)\r\n      } else {\r\n        url.searchParams.delete('focus')\r\n      }\r\n\r\n      //  replaceState \r\n      window.history.replaceState(null, '', url.toString())\r\n      \r\n      console.log(`NavigationService: Updated URL query param to focus=${symbol}`)\r\n    } catch (error) {\r\n      console.error('NavigationService: Error updating query param:', error)\r\n    }\r\n  }\r\n\r\n  /**\r\n   *  URL query  focus symbol\r\n   * @deprecated  Hash Router  Vue Router $route.query \r\n   * @returns {string|null} focus symbol  null\r\n   */\r\n  getFocusSymbolFromQuery() {\r\n    console.warn('DEPRECATED: NavigationService.getFocusSymbolFromQuery() should not be used with Hash Router. Use Vue Router $route.query.focus instead.')\r\n    \r\n    try {\r\n      const url = new URL(window.location)\r\n      return url.searchParams.get('focus')\r\n    } catch (error) {\r\n      console.error('NavigationService: Error reading query param:', error)\r\n      return null\r\n    }\r\n  }\r\n\r\n  /**\r\n   *  header \r\n   * @returns {number} header \r\n   */\r\n  getHeaderOffset() {\r\n    try {\r\n      //  header \r\n      const header = document.querySelector('header, .header, .navbar, .app-header')\r\n      if (header) {\r\n        const rect = header.getBoundingClientRect()\r\n        return rect.height + 20 //  20px \r\n      }\r\n    } catch (error) {\r\n      console.warn('NavigationService: Could not calculate header height:', error)\r\n    }\r\n    \r\n    return this.headerOffset // \r\n  }\r\n\r\n  /**\r\n   * \r\n   * @returns {Promise<void>}\r\n   */\r\n  waitForScrollComplete() {\r\n    return new Promise(resolve => {\r\n      let lastScrollTop = window.pageYOffset\r\n      let scrollEndTimer = null\r\n\r\n      const checkScrollEnd = () => {\r\n        const currentScrollTop = window.pageYOffset\r\n        \r\n        if (Math.abs(currentScrollTop - lastScrollTop) < 1) {\r\n          // \r\n          clearTimeout(scrollEndTimer)\r\n          resolve()\r\n        } else {\r\n          // \r\n          lastScrollTop = currentScrollTop\r\n          scrollEndTimer = setTimeout(checkScrollEnd, 50)\r\n        }\r\n      }\r\n\r\n      // \r\n      scrollEndTimer = setTimeout(checkScrollEnd, 50)\r\n      \r\n      //  2 \r\n      setTimeout(resolve, 2000)\r\n    })\r\n  }\r\n\r\n  /**\r\n   *  symbol \r\n   * @param {string} symbol - \r\n   * @returns {boolean} \r\n   */\r\n  isSymbolValid(symbol) {\r\n    const sanitizedSymbol = this.sanitizeSymbol(symbol)\r\n    const targetId = `sym-${sanitizedSymbol}`\r\n    return document.getElementById(targetId) !== null\r\n  }\r\n}\r\n\r\n// \r\nexport const navigationService = new NavigationService()","/**\r\n * ScrollSpyService -  IntersectionObserver  StockCard \r\n *  ScrollSpy \r\n */\r\nexport class ScrollSpyService {\r\n  constructor() {\r\n    this.observer = null\r\n    this.callback = null\r\n    this.observedElements = new Map() // element -> symbol mapping\r\n    this.isActive = false\r\n    \r\n    // IntersectionObserver \r\n    this.observerOptions = {\r\n      root: null, //  viewport\r\n      rootMargin: '-80px 0px -50% 0px', //  header \r\n      threshold: [0, 0.1, 0.25, 0.5, 0.75, 1.0] // \r\n    }\r\n  }\r\n\r\n  /**\r\n   *  ScrollSpy \r\n   * @param {Element[]} elements -  StockCard \r\n   * @param {Function} callback -  active symbol \r\n   */\r\n  setup(elements, callback) {\r\n    try {\r\n      this.cleanup() //  observer\r\n      \r\n      this.callback = callback\r\n      this.observedElements.clear()\r\n\r\n      //  IntersectionObserver\r\n      this.observer = new IntersectionObserver(\r\n        this.handleIntersection.bind(this),\r\n        this.observerOptions\r\n      )\r\n\r\n      // \r\n      elements.forEach(element => {\r\n        const symbol = element.dataset.symbol\r\n        if (symbol) {\r\n          this.observedElements.set(element, symbol)\r\n          this.observer.observe(element)\r\n        }\r\n      })\r\n\r\n      this.isActive = true\r\n      console.log(`ScrollSpyService: Started observing ${elements.length} elements`)\r\n    } catch (error) {\r\n      console.error('ScrollSpyService: Error setting up observer:', error)\r\n    }\r\n  }\r\n\r\n  /**\r\n   *  IntersectionObserver \r\n   * @param {IntersectionObserverEntry[]} entries - \r\n   */\r\n  handleIntersection(entries) {\r\n    if (!this.isActive || !this.callback) return\r\n\r\n    try {\r\n      // \r\n      const visibleElements = []\r\n      \r\n      entries.forEach(entry => {\r\n        const symbol = this.observedElements.get(entry.target)\r\n        if (symbol && entry.isIntersecting) {\r\n          visibleElements.push({\r\n            element: entry.target,\r\n            symbol: symbol,\r\n            intersectionRatio: entry.intersectionRatio,\r\n            boundingClientRect: entry.boundingClientRect\r\n          })\r\n        }\r\n      })\r\n\r\n      //  active symbol\r\n      if (visibleElements.length === 0) return\r\n\r\n      //  active symbol\r\n      const activeSymbol = this.determineActiveSymbol(visibleElements)\r\n      \r\n      if (activeSymbol) {\r\n        //  debounce \r\n        this.debouncedCallback(activeSymbol)\r\n      }\r\n    } catch (error) {\r\n      console.error('ScrollSpyService: Error handling intersection:', error)\r\n    }\r\n  }\r\n\r\n  /**\r\n   *  active symbol\r\n   * @param {Object[]} visibleElements - \r\n   * @returns {string|null} active symbol\r\n   */\r\n  determineActiveSymbol(visibleElements) {\r\n    if (visibleElements.length === 0) return null\r\n    if (visibleElements.length === 1) return visibleElements[0].symbol\r\n\r\n    // \r\n    // 1.  2. \r\n    const viewportHeight = window.innerHeight\r\n    const viewportCenter = viewportHeight / 2\r\n\r\n    let bestElement = visibleElements[0]\r\n    let bestScore = this.calculateElementScore(bestElement, viewportCenter)\r\n\r\n    for (let i = 1; i < visibleElements.length; i++) {\r\n      const element = visibleElements[i]\r\n      const score = this.calculateElementScore(element, viewportCenter)\r\n      \r\n      if (score > bestScore) {\r\n        bestElement = element\r\n        bestScore = score\r\n      }\r\n    }\r\n\r\n    return bestElement.symbol\r\n  }\r\n\r\n  /**\r\n   *  active element\r\n   * @param {Object} elementInfo - \r\n   * @param {number} viewportCenter - \r\n   * @returns {number} \r\n   */\r\n  calculateElementScore(elementInfo, viewportCenter) {\r\n    const { intersectionRatio, boundingClientRect } = elementInfo\r\n    \r\n    // \r\n    const elementCenter = boundingClientRect.top + (boundingClientRect.height / 2)\r\n    \r\n    // \r\n    const distanceFromCenter = Math.abs(elementCenter - viewportCenter)\r\n    const maxDistance = viewportCenter // \r\n    const centerScore = 1 - (distanceFromCenter / maxDistance)\r\n    \r\n    //  (70%) +  (30%)\r\n    return (intersectionRatio * 0.7) + (centerScore * 0.3)\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {string} symbol - active symbol\r\n   */\r\n  debouncedCallback(symbol) {\r\n    if (this.debounceTimer) {\r\n      clearTimeout(this.debounceTimer)\r\n    }\r\n    \r\n    this.debounceTimer = setTimeout(() => {\r\n      if (this.callback && this.isActive) {\r\n        this.callback(symbol)\r\n      }\r\n    }, 100) // 100ms \r\n  }\r\n\r\n  /**\r\n   *  active symbol\r\n   * @param {string} symbol -  active  symbol\r\n   */\r\n  updateActiveSymbol(symbol) {\r\n    if (this.callback && this.isActive) {\r\n      this.callback(symbol)\r\n    }\r\n  }\r\n\r\n  /**\r\n   *  active symbol\r\n   */\r\n  refresh() {\r\n    if (!this.observer || !this.isActive) return\r\n\r\n    try {\r\n      // \r\n      const elements = Array.from(this.observedElements.keys())\r\n      const visibleElements = []\r\n\r\n      elements.forEach(element => {\r\n        const rect = element.getBoundingClientRect()\r\n        const symbol = this.observedElements.get(element)\r\n        \r\n        // \r\n        if (rect.top < window.innerHeight && rect.bottom > 0 && symbol) {\r\n          const intersectionRatio = this.calculateIntersectionRatio(rect)\r\n          if (intersectionRatio > 0) {\r\n            visibleElements.push({\r\n              element,\r\n              symbol,\r\n              intersectionRatio,\r\n              boundingClientRect: rect\r\n            })\r\n          }\r\n        }\r\n      })\r\n\r\n      const activeSymbol = this.determineActiveSymbol(visibleElements)\r\n      if (activeSymbol) {\r\n        this.updateActiveSymbol(activeSymbol)\r\n      }\r\n    } catch (error) {\r\n      console.error('ScrollSpyService: Error refreshing:', error)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {DOMRect} rect -  bounding rect\r\n   * @returns {number}  (0-1)\r\n   */\r\n  calculateIntersectionRatio(rect) {\r\n    const viewportHeight = window.innerHeight\r\n    const headerOffset = 80 //  header \r\n    \r\n    const visibleTop = Math.max(rect.top, headerOffset)\r\n    const visibleBottom = Math.min(rect.bottom, viewportHeight)\r\n    const visibleHeight = Math.max(0, visibleBottom - visibleTop)\r\n    \r\n    return visibleHeight / rect.height\r\n  }\r\n\r\n  /**\r\n   *  ScrollSpy \r\n   */\r\n  cleanup() {\r\n    try {\r\n      if (this.observer) {\r\n        this.observer.disconnect()\r\n        this.observer = null\r\n      }\r\n      \r\n      if (this.debounceTimer) {\r\n        clearTimeout(this.debounceTimer)\r\n        this.debounceTimer = null\r\n      }\r\n      \r\n      this.observedElements.clear()\r\n      this.callback = null\r\n      this.isActive = false\r\n      \r\n      console.log('ScrollSpyService: Cleaned up')\r\n    } catch (error) {\r\n      console.error('ScrollSpyService: Error during cleanup:', error)\r\n    }\r\n  }\r\n\r\n  /**\r\n   *  ScrollSpy \r\n   */\r\n  pause() {\r\n    this.isActive = false\r\n  }\r\n\r\n  /**\r\n   *  ScrollSpy \r\n   */\r\n  resume() {\r\n    this.isActive = true\r\n    this.refresh() // \r\n  }\r\n}\r\n\r\n// \r\nexport const scrollSpyService = new ScrollSpyService()","<template>\r\n  <div class=\"stock-overview\">\r\n    <div class=\"stock-header\">\r\n      <h2>Stock Overview</h2>\r\n      <div class=\"header-right\">\r\n        <div class=\"update-info\" v-if=\"lastUpdate\">\r\n          <span class=\"text-muted\">Last updated: {{ formatTime(lastUpdate) }}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \r\n    <p class=\"text-muted mb-3\">Stock universe overview and analysis</p>\r\n\r\n    <div v-if=\"loading\" class=\"loading\">\r\n      <div class=\"spinner\"></div>\r\n      <p>Loading stock data...</p>\r\n    </div>\r\n\r\n    <div v-else-if=\"error\" class=\"error\">\r\n      <p class=\"text-danger\">{{ error }}</p>\r\n      <button @click=\"refresh\" class=\"btn btn-secondary\">Retry</button>\r\n    </div>\r\n\r\n    <div v-else class=\"main-layout\">\r\n      <!-- Navigation Panel (Desktop) -->\r\n      <NavigationPanel\r\n        :toc-tree=\"tocTree\"\r\n        :active-symbol=\"activeSymbol\"\r\n        :search-query=\"searchQuery\"\r\n        :is-visible=\"true\"\r\n        @symbol-click=\"onSymbolClick\"\r\n        @search-change=\"onSearchChange\"\r\n        class=\"navigation-sidebar\"\r\n      />\r\n\r\n      <!-- Main Content -->\r\n      <div class=\"main-content\">\r\n        <!-- Market Index Section -->\r\n        <div class=\"widget-container-ticker\">\r\n          <div class=\"widget-header\">\r\n            <h3>Market Index</h3>\r\n          </div>\r\n          <LazyTradingViewWidget\r\n            widget-type=\"Market Index\"\r\n            :config=\"tickersConfig\"\r\n            script-url=\"https://s3.tradingview.com/external-embedding/embed-widget-tickers.js\"\r\n            height=\"100px\"\r\n            :priority=\"1\"\r\n          />\r\n        </div>\r\n        \r\n        <!-- Sector Groups -->\r\n        <div class=\"sector-groups\">\r\n          <div \r\n            v-for=\"(group, sector) in groupedStocks\" \r\n            :key=\"sector\"\r\n            class=\"sector-group\"\r\n          >\r\n            <h4 class=\"sector-title\">\r\n              {{ sector }}\r\n              <span class=\"stock-count\">({{ group.length }})</span>\r\n            </h4>\r\n            \r\n            <div class=\"stocks-in-group\">\r\n              <StockCard\r\n                v-for=\"stock in group\"\r\n                :key=\"stock.quote.symbol\"\r\n                :quote=\"stock.quote\"\r\n                :daily-data=\"stock.dailyData\"\r\n                :metadata=\"stock.metadata\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-if=\"!loading && Object.keys(groupedStocks).length === 0\" class=\"no-data\">\r\n      <p>No stock data available</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { stocksConfig } from '@/utils/stocksConfigService'\r\nimport StockCard from './StockCard.vue'\r\nimport LazyTradingViewWidget from './LazyTradingViewWidget.vue'\r\nimport NavigationPanel from './NavigationPanel.vue'\r\nimport { navigationService } from '@/services/NavigationService.js'\r\nimport { scrollSpyService } from '@/services/ScrollSpyService.js'\r\n\r\nexport default {\r\n  name: 'StockOverview',\r\n  components: {\r\n    StockCard,\r\n    LazyTradingViewWidget,\r\n    NavigationPanel\r\n  },\r\n  data() {\r\n    return {\r\n      quotes: [],\r\n      dailyData: null,\r\n      metadata: null,\r\n      loading: false,\r\n      error: null,\r\n      lastUpdate: null,\r\n      configuredSymbols: [],\r\n      // Navigation state\r\n      activeSymbol: '',\r\n      searchQuery: ''\r\n      //  expandedSections/\r\n    }\r\n  },\r\n  computed: {\r\n    tickersConfig() {\r\n      return {\r\n        \"symbols\": [\r\n          {\"proName\": \"FOREXCOM:SPXUSD\",\"title\": \"S&P 500 Index\"},\r\n          {\"proName\": \"NASDAQ:NDX\",\"title\": \"NASDAQ 100 Index\"},\r\n          {\"proName\": \"OPOFINANCE:DJIUSD\",\"title\": \"Dow Jone Index\"},\r\n          {\"proName\": \"CAPITALCOM:RTY\",\"title\": \"US Russel 2000\"},\r\n          {\"proName\": \"INDEX:BTCUSD\",\"title\": \"BTC\"},\r\n          {\"proName\": \"TVC:GOLD\",\"title\": \"GOLD\"}\r\n        ],\r\n        \"colorTheme\": \"light\",\r\n        \"locale\": \"en\",\r\n        \"largeChartUrl\": \"\",\r\n        \"isTransparent\": true,\r\n        \"showSymbolLogo\": true\r\n      }\r\n    },\r\n\r\n    groupedStocks() {\r\n      if (!this.quotes.length || !this.metadata) {\r\n        return {}\r\n      }\r\n      \r\n      const groups = {}\r\n      \r\n      this.quotes.forEach(quote => {\r\n        const symbolMetadata = this.metadata.items.find(m => m.symbol === quote.symbol)\r\n        const symbolDailyData = this.dailyData?.per_symbol?.find(d => d.symbol === quote.symbol)\r\n        \r\n        let sector = 'Unknown'\r\n        if (symbolMetadata && symbolMetadata.confidence >= 0.7) {\r\n          sector = symbolMetadata.sector || 'Unknown'\r\n        }\r\n        \r\n        if (!groups[sector]) {\r\n          groups[sector] = []\r\n        }\r\n        \r\n        groups[sector].push({\r\n          quote,\r\n          dailyData: symbolDailyData,\r\n          metadata: symbolMetadata\r\n        })\r\n      })\r\n      \r\n      //  Sector \r\n      const sectorPriority = [\r\n        'Technology',\r\n        'Financial Services',\r\n        'Consumer Cyclical',\r\n        'Communication Services',\r\n        'Healthcare',\r\n        'Industrials',\r\n        'Consumer Defensive',\r\n        'Energy',\r\n        'Basic Materials',\r\n        'Real Estate',\r\n        'Utilities'\r\n      ]\r\n      \r\n      //  Industry  ( sector )\r\n      const industryPriority = {\r\n        'Technology': [\r\n          'Semiconductors',\r\n          'Software - Infrastructure',\r\n          'Consumer Electronics',\r\n          'Software - Application',\r\n          'Information Technology Services',\r\n          'Semiconductor Equipment & Materials',\r\n          'Communication Equipment',\r\n          'Computer Hardware',\r\n          'Electronic Components',\r\n          'Scientific & Technical Instruments',\r\n          'Solar',\r\n          'Electronics & Computer Distribution'\r\n        ],\r\n        'Financial Services': [\r\n          'Banks - Diversified',\r\n          'Credit Services',\r\n          'Asset Management',\r\n          'Capital Markets',\r\n          'Insurance - Diversified',\r\n          'Banks - Regional',\r\n          'Financial Data & Stock Exchanges',\r\n          'Insurance - Property & Casualty',\r\n          'Insurance Brokers',\r\n          'Insurance - Life',\r\n          'Insurance - Specialty',\r\n          'Mortgage Finance',\r\n          'Insurance - Reinsurance',\r\n          'Financial Conglomerates',\r\n          'Shell Companies'\r\n        ],\r\n        'Consumer Cyclical': [\r\n          'Internet Retail',\r\n          'Auto Manufacturers',\r\n          'Restaurants',\r\n          'Home Improvement Retail',\r\n          'Travel Services',\r\n          'Apparel Retail',\r\n          'Auto Parts',\r\n          'Specialty Retail',\r\n          'Lodging',\r\n          'Residential Construction',\r\n          'Auto & Truck Dealerships',\r\n          'Packaging & Containers',\r\n          'Footwear & Accessories',\r\n          'Resorts & Casinos',\r\n          'Gambling',\r\n          'Leisure',\r\n          'Apparel Manufacturing',\r\n          'Furnishings, Fixtures & Appliances',\r\n          'Personal Services',\r\n          'Luxury Goods',\r\n          'Recreational Vehicles',\r\n          'Department Stores',\r\n          'Education & Training Services'\r\n        ],\r\n        'Communication Services': [\r\n          'Internet Content & Information',\r\n          'Telecom Services',\r\n          'Entertainment',\r\n          'Advertising Agencies',\r\n          'Electronic Gaming & Multimedia',\r\n          'Publishing',\r\n          'Broadcasting'\r\n        ],\r\n        'Healthcare': [\r\n          'Drug Manufacturers - General',\r\n          'Biotechnology',\r\n          'Medical Devices',\r\n          'Diagnostics & Research',\r\n          'Healthcare Plans',\r\n          'Medical Instruments & Supplies',\r\n          'Medical Distribution',\r\n          'Medical Care Facilities',\r\n          'Drug Manufacturers - Specialty & Generic',\r\n          'Health Information Services',\r\n          'Pharmaceutical Retailers'\r\n        ],\r\n        'Industrials': [\r\n          'Aerospace & Defense',\r\n          'Specialty Industrial Machinery',\r\n          'Farm & Heavy Construction Machinery',\r\n          'Railroads',\r\n          'Engineering & Construction',\r\n          'Building Products & Equipment',\r\n          'Specialty Business Services',\r\n          'Waste Management',\r\n          'Industrial Distribution',\r\n          'Conglomerates',\r\n          'Integrated Freight & Logistics',\r\n          'Electrical Equipment & Parts',\r\n          'Rental & Leasing Services',\r\n          'Airlines',\r\n          'Trucking',\r\n          'Consulting Services',\r\n          'Tools & Accessories',\r\n          'Metal Fabrication',\r\n          'Pollution & Treatment Controls',\r\n          'Security & Protection Services',\r\n          'Marine Shipping',\r\n          'Airports & Air Services',\r\n          'Staffing & Employment Services',\r\n          'Business Equipment & Supplies',\r\n          'Infrastructure Operations'\r\n        ],\r\n        'Consumer Defensive': [\r\n          'Discount Stores',\r\n          'Beverages - Non-Alcoholic',\r\n          'Household & Personal Products',\r\n          'Tobacco',\r\n          'Packaged Foods',\r\n          'Confectioners',\r\n          'Farm Products',\r\n          'Food Distribution',\r\n          'Grocery Stores',\r\n          'Education & Training Services',\r\n          'Beverages - Brewers',\r\n          'Beverages - Wineries & Distilleries'\r\n        ],\r\n        'Energy': [\r\n          'Oil & Gas Integrated',\r\n          'Oil & Gas Midstream',\r\n          'Oil & Gas E&P',\r\n          'Oil & Gas Equipment & Services',\r\n          'Oil & Gas Refining & Marketing',\r\n          'Uranium',\r\n          'Oil & Gas Drilling',\r\n          'Thermal Coal',\r\n          'Utilities - Independent Power Producers'\r\n        ],\r\n        'Basic Materials': [\r\n          'Gold',\r\n          'Specialty Chemicals',\r\n          'Building Materials',\r\n          'Copper',\r\n          'Steel',\r\n          'Agricultural Inputs',\r\n          'Other Industrial Metals & Mining',\r\n          'Chemicals',\r\n          'Other Precious Metals & Mining',\r\n          'Aluminum',\r\n          'Lumber & Wood Production',\r\n          'Silver',\r\n          'Coking Coal',\r\n          'Paper & Paper Products'\r\n        ],\r\n        'Real Estate': [\r\n          'REIT - Specialty',\r\n          'REIT - Industrial',\r\n          'REIT - Healthcare Facilities',\r\n          'REIT - Retail',\r\n          'REIT - Residential',\r\n          'Real Estate Services',\r\n          'REIT - Mortgage',\r\n          'REIT - Office',\r\n          'REIT - Diversified',\r\n          'REIT - Hotel & Motel',\r\n          'Real Estate - Development',\r\n          'Real Estate - Diversified'\r\n        ],\r\n        'Utilities': [\r\n          'Utilities - Regulated Electric',\r\n          'Utilities - Independent Power Producers',\r\n          'Utilities - Regulated Gas',\r\n          'Utilities - Diversified',\r\n          'Utilities - Renewable',\r\n          'Utilities - Regulated Water'\r\n        ]\r\n      }\r\n      \r\n      //  sector\r\n      const sortedGroups = {}\r\n      \r\n      // 1.  sector\r\n      sectorPriority.forEach(sector => {\r\n        if (groups[sector] && groups[sector].length > 0) {\r\n          //  sector  industry \r\n          const sectorIndustryPriority = industryPriority[sector] || []\r\n          \r\n          //  industry \r\n          const industryGroups = {}\r\n          groups[sector].forEach(stock => {\r\n            const industry = stock.metadata?.industry || 'Unknown Industry'\r\n            if (!industryGroups[industry]) {\r\n              industryGroups[industry] = []\r\n            }\r\n            industryGroups[industry].push(stock)\r\n          })\r\n          \r\n          //  industry \r\n          const sortedStocks = []\r\n          \r\n          //  industry\r\n          sectorIndustryPriority.forEach(industry => {\r\n            if (industryGroups[industry]) {\r\n              //  industry  market cap \r\n              const sortedIndustryStocks = industryGroups[industry].sort((a, b) => {\r\n                const marketCapA = a.metadata?.market_cap || 0\r\n                const marketCapB = b.metadata?.market_cap || 0\r\n                \r\n                //  market cap  0 symbol \r\n                if (marketCapA === marketCapB) {\r\n                  return a.quote.symbol.localeCompare(b.quote.symbol)\r\n                }\r\n                \r\n                // Market cap \r\n                return marketCapB - marketCapA\r\n              })\r\n              sortedStocks.push(...sortedIndustryStocks)\r\n            }\r\n          })\r\n          \r\n          //  industry\r\n          Object.keys(industryGroups).forEach(industry => {\r\n            if (!sectorIndustryPriority.includes(industry)) {\r\n              const sortedIndustryStocks = industryGroups[industry].sort((a, b) => {\r\n                const marketCapA = a.metadata?.market_cap || 0\r\n                const marketCapB = b.metadata?.market_cap || 0\r\n                \r\n                //  market cap  0 symbol \r\n                if (marketCapA === marketCapB) {\r\n                  return a.quote.symbol.localeCompare(b.quote.symbol)\r\n                }\r\n                \r\n                // Market cap \r\n                return marketCapB - marketCapA\r\n              })\r\n              sortedStocks.push(...sortedIndustryStocks)\r\n            }\r\n          })\r\n          \r\n          sortedGroups[sector] = sortedStocks\r\n        }\r\n      })\r\n      \r\n      // 2.  sector ( Unknown)\r\n      Object.keys(groups).forEach(sector => {\r\n        if (!sectorPriority.includes(sector) && groups[sector].length > 0) {\r\n          sortedGroups[sector] = groups[sector].sort((a, b) => {\r\n            return a.quote.symbol.localeCompare(b.quote.symbol)\r\n          })\r\n        }\r\n      })\r\n      \r\n      return sortedGroups\r\n    },\r\n\r\n    tocTree() {\r\n      if (!this.quotes.length || !this.metadata) {\r\n        return []\r\n      }\r\n\r\n      const tree = []\r\n      \r\n      //  groupedStocks \r\n      Object.entries(this.groupedStocks).forEach(([sectorName, stocks]) => {\r\n        const sectorNode = {\r\n          id: `sector-${this.sanitizeId(sectorName)}`,\r\n          type: 'sector',\r\n          label: sectorName,\r\n          children: []\r\n        }\r\n\r\n        //  industry \r\n        const industryGroups = {}\r\n        stocks.forEach(stock => {\r\n          const industry = stock.metadata?.industry || 'Unknown Industry'\r\n          if (!industryGroups[industry]) {\r\n            industryGroups[industry] = []\r\n          }\r\n          industryGroups[industry].push(stock)\r\n        })\r\n\r\n        //  industry \r\n        Object.entries(industryGroups).forEach(([industryName, industryStocks]) => {\r\n          const industryNode = {\r\n            id: `industry-${this.sanitizeId(sectorName)}-${this.sanitizeId(industryName)}`,\r\n            type: 'industry',\r\n            label: industryName,\r\n            children: []\r\n          }\r\n\r\n          //  symbol \r\n          industryStocks.forEach(stock => {\r\n            const symbolNode = {\r\n              id: `symbol-${this.sanitizeId(stock.quote.symbol)}`,\r\n              type: 'symbol',\r\n              label: stock.quote.symbol,\r\n              symbol: stock.quote.symbol,\r\n              metadata: {\r\n                sector: sectorName,\r\n                industry: industryName,\r\n                exchange: this.mapExchangeCode(stock.metadata?.exchange),\r\n                marketCap: stock.metadata?.market_cap || 0\r\n              }\r\n            }\r\n            industryNode.children.push(symbolNode)\r\n          })\r\n\r\n          sectorNode.children.push(industryNode)\r\n        })\r\n\r\n        tree.push(sectorNode)\r\n      })\r\n\r\n      return tree\r\n    },\r\n\r\n    // \r\n    metadataMap() {\r\n      if (!this.metadata?.items) return new Map()\r\n      \r\n      const map = new Map()\r\n      this.metadata.items.forEach(item => {\r\n        map.set(item.symbol, item)\r\n      })\r\n      return map\r\n    },\r\n\r\n    dailyDataMap() {\r\n      if (!this.dailyData?.per_symbol) return new Map()\r\n      \r\n      const map = new Map()\r\n      this.dailyData.per_symbol.forEach(item => {\r\n        map.set(item.symbol, item)\r\n      })\r\n      return map\r\n    }\r\n  },\r\n  async mounted() {\r\n    await this.loadStockData()\r\n    this.initializeNavigation()\r\n  },\r\n\r\n  beforeRouteLeave(to, from, next) {\r\n    //  focus query  stock-overview \r\n    if (this.$route.query.focus) {\r\n      console.log('Navigation: Clearing focus parameter on route leave')\r\n      // \r\n      this.$router.replace({\r\n        query: { ...this.$route.query, focus: undefined }\r\n      }).catch(() => {}) // \r\n    }\r\n    next()\r\n  },\r\n\r\n  beforeUnmount() {\r\n    this.cleanupNavigation()\r\n  },\r\n  methods: {\r\n    async loadStockData() {\r\n      this.loading = true\r\n      this.error = null\r\n      \r\n      try {\r\n        console.log(' Starting simple stock data load...')\r\n        \r\n        //  base path\r\n        const basePath = import.meta.env.PROD ? '/investment-dashboard' : ''\r\n        \r\n        // 1. \r\n        this.configuredSymbols = await stocksConfig.getEnabledSymbols()\r\n        console.log(` Loaded ${this.configuredSymbols.length} symbols from config`)\r\n        \r\n        // 2.  quotes \r\n        const quotesResponse = await fetch(`${basePath}/data/quotes/latest.json?t=` + Date.now())\r\n        if (!quotesResponse.ok) {\r\n          throw new Error(`Failed to load quotes: HTTP ${quotesResponse.status}`)\r\n        }\r\n        \r\n        const quotesData = await quotesResponse.json()\r\n        if (quotesData.items) {\r\n          this.quotes = quotesData.items.filter(quote => \r\n            this.configuredSymbols.includes(quote.symbol)\r\n          )\r\n          this.lastUpdate = quotesData.as_of\r\n          console.log(` Loaded ${this.quotes.length} quotes`)\r\n        }\r\n        \r\n        // 3.  daily \r\n        const dailyResponse = await fetch(`${basePath}/data/daily/2025-12-28.json?t=` + Date.now())\r\n        if (dailyResponse.ok) {\r\n          this.dailyData = await dailyResponse.json()\r\n          console.log(` Loaded daily data`)\r\n        }\r\n        \r\n        // 4.  metadata\r\n        const metadataResponse = await fetch(`${basePath}/data/symbols_metadata.json?t=` + Date.now())\r\n        if (metadataResponse.ok) {\r\n          this.metadata = await metadataResponse.json()\r\n          console.log(` Loaded metadata for ${this.metadata.items.length} symbols`)\r\n        }\r\n        \r\n        console.log(' Simple stock data load completed successfully!')\r\n        \r\n      } catch (err) {\r\n        this.error = String(err)\r\n        console.error(' Simple stock data load failed:', err)\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n\r\n    async refresh() {\r\n      await this.loadStockData()\r\n    },\r\n\r\n    formatTime(timeString) {\r\n      if (!timeString) return ''\r\n      \r\n      try {\r\n        const date = new Date(timeString)\r\n        return date.toLocaleString('en-US', {\r\n          month: 'short',\r\n          day: 'numeric',\r\n          hour: '2-digit',\r\n          minute: '2-digit'\r\n        })\r\n      } catch {\r\n        return timeString\r\n      }\r\n    },\r\n\r\n    // Helper method to map exchange codes to display names\r\n    mapExchangeCode(exchangeCode) {\r\n      if (!exchangeCode) return 'Unknown'\r\n      \r\n      const exchangeMap = {\r\n        'NYQ': 'NYSE',    // New York Stock Exchange\r\n        'NMS': 'NASDAQ',  // NASDAQ Global Select Market\r\n        'NCM': 'NASDAQ',  // NASDAQ Capital Market\r\n        'NGM': 'NASDAQ',  // NASDAQ Global Market\r\n        'ASE': 'AMEX'     // NYSE American ( American Stock Exchange)\r\n      }\r\n      \r\n      return exchangeMap[exchangeCode] || exchangeCode\r\n    },\r\n\r\n    sanitizeId(str) {\r\n      //  DOM ID\r\n      return str.replace(/[^a-zA-Z0-9]/g, '_')\r\n    },\r\n    async onSymbolClick(symbol) {\r\n      console.log('Navigation: Symbol clicked:', symbol)\r\n      \r\n      //  ScrollSpy \r\n      scrollSpyService.pause()\r\n      \r\n      try {\r\n        //  Vue Router query  NavigationService (Hash Router )\r\n        await this.$router.replace({\r\n          query: { ...this.$route.query, focus: symbol }\r\n        })\r\n        \r\n        // \r\n        await navigationService.scrollToSymbol(symbol)\r\n        \r\n        //  active symbol\r\n        this.activeSymbol = symbol\r\n        \r\n        //  sections\r\n        this.autoExpandForSymbol(symbol)\r\n      } finally {\r\n        //  ScrollSpy\r\n        setTimeout(() => {\r\n          scrollSpyService.resume()\r\n        }, 500)\r\n      }\r\n    },\r\n\r\n    onSearchChange(query) {\r\n      this.searchQuery = query\r\n    },\r\n\r\n    onToggleSection(sectionId, expanded) {\r\n      if (expanded) {\r\n        this.expandedSections.add(sectionId)\r\n      } else {\r\n        this.expandedSections.delete(sectionId)\r\n      }\r\n      \r\n      //  localStorage\r\n      this.saveExpandedSections()\r\n    },\r\n\r\n    autoExpandForSymbol(symbol) {\r\n      //  symbol  sector  industry\r\n      for (const sectorNode of this.tocTree) {\r\n        for (const industryNode of sectorNode.children) {\r\n          const symbolNode = industryNode.children.find(s => s.symbol === symbol)\r\n          if (symbolNode) {\r\n            this.expandedSections.add(sectorNode.id)\r\n            this.expandedSections.add(industryNode.id)\r\n            this.saveExpandedSections()\r\n            return\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    saveExpandedSections() {\r\n      try {\r\n        const sectionsArray = Array.from(this.expandedSections)\r\n        localStorage.setItem('stock-overview-expanded-sections', JSON.stringify(sectionsArray))\r\n      } catch (error) {\r\n        console.warn('Failed to save expanded sections:', error)\r\n      }\r\n    },\r\n\r\n    loadExpandedSections() {\r\n      try {\r\n        const saved = localStorage.getItem('stock-overview-expanded-sections')\r\n        if (saved) {\r\n          const sectionsArray = JSON.parse(saved)\r\n          this.expandedSections = new Set(sectionsArray)\r\n        }\r\n      } catch (error) {\r\n        console.warn('Failed to load expanded sections:', error)\r\n        this.expandedSections = new Set()\r\n      }\r\n    },\r\n\r\n    initializeNavigation() {\r\n      // \r\n      this.loadExpandedSections()\r\n      \r\n      //  sections\r\n      if (this.expandedSections.size === 0) {\r\n        this.expandAllSections()\r\n      }\r\n      \r\n      //  Vue Router query  (Hash Router )\r\n      const focusSymbol = this.$route.query.focus\r\n      if (focusSymbol && this.isSymbolValid(focusSymbol)) {\r\n        console.log('Navigation: Found focus symbol in URL:', focusSymbol)\r\n        \r\n        //  DOM \r\n        this.$nextTick(() => {\r\n          setTimeout(() => {\r\n            this.onSymbolClick(focusSymbol)\r\n          }, 500)\r\n        })\r\n      }\r\n      \r\n      //  ScrollSpy\r\n      this.$nextTick(() => {\r\n        this.setupScrollSpy()\r\n      })\r\n    },\r\n\r\n    setupScrollSpy() {\r\n      try {\r\n        //  StockCard \r\n        const stockCardElements = document.querySelectorAll('[data-symbol]')\r\n        \r\n        if (stockCardElements.length === 0) {\r\n          console.warn('ScrollSpy: No stock card elements found')\r\n          return\r\n        }\r\n        \r\n        //  ScrollSpy\r\n        scrollSpyService.setup(\r\n          Array.from(stockCardElements),\r\n          (activeSymbol) => {\r\n            console.log('ScrollSpy: Active symbol changed to:', activeSymbol)\r\n            this.activeSymbol = activeSymbol\r\n            this.autoExpandForSymbol(activeSymbol)\r\n          }\r\n        )\r\n        \r\n        console.log(`ScrollSpy: Initialized with ${stockCardElements.length} elements`)\r\n      } catch (error) {\r\n        console.error('Failed to setup ScrollSpy:', error)\r\n      }\r\n    },\r\n\r\n    cleanupNavigation() {\r\n      scrollSpyService.cleanup()\r\n    },\r\n\r\n    isSymbolValid(symbol) {\r\n      return navigationService.isSymbolValid(symbol)\r\n    },\r\n\r\n    expandAllSections() {\r\n      //  sector  industry sections\r\n      this.tocTree.forEach(sectorNode => {\r\n        this.expandedSections.add(sectorNode.id)\r\n        sectorNode.children.forEach(industryNode => {\r\n          this.expandedSections.add(industryNode.id)\r\n        })\r\n      })\r\n      this.saveExpandedSections()\r\n      console.log('Navigation: Expanded all sections by default')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.stock-overview {\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n/* Main Layout */\r\n.main-layout {\r\n  display: flex;\r\n  gap: 2rem;\r\n  align-items: flex-start;\r\n}\r\n\r\n.navigation-sidebar {\r\n  flex-shrink: 0;\r\n}\r\n\r\n.main-content {\r\n  flex: 1;\r\n  min-width: 0; /*  flex item  */\r\n}\r\n\r\n.stock-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: flex-start;\r\n  margin-bottom: 0.75rem;\r\n  gap: 1rem;\r\n}\r\n\r\n.stock-header h2 {\r\n  font-size: 1.5rem;\r\n  font-weight: 700;\r\n  color: #333;\r\n  margin: 0;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.header-right {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-end;\r\n  gap: 0.25rem;\r\n}\r\n\r\n.header-right .text-muted {\r\n  margin: 0;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.loading {\r\n  text-align: center;\r\n  padding: 3rem;\r\n}\r\n\r\n.spinner {\r\n  border: 4px solid #f3f3f3;\r\n  border-top: 4px solid #007bff;\r\n  border-radius: 50%;\r\n  width: 40px;\r\n  height: 40px;\r\n  animation: spin 1s linear infinite;\r\n  margin: 0 auto 1rem;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n.error {\r\n  text-align: center;\r\n  padding: 2rem;\r\n  background-color: #f8d7da;\r\n  border: 1px solid #f5c6cb;\r\n  border-radius: 8px;\r\n  margin: 1rem 0;\r\n}\r\n\r\n.no-data {\r\n  text-align: center;\r\n  padding: 3rem;\r\n  color: #666;\r\n  background-color: #f8f9fa;\r\n  border-radius: 8px;\r\n}\r\n\r\n.widget-container-ticker {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  margin-bottom: 2rem;\r\n  overflow: hidden;\r\n  position: relative;\r\n}\r\n\r\n.widget-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  background: #f8f9fa;\r\n  margin: -1rem -1rem 1rem -1rem;\r\n  padding: 0.75rem 1rem;\r\n  border-bottom: 1px solid #e9ecef;\r\n  border-top-left-radius: 8px;\r\n  border-top-right-radius: 8px;\r\n}\r\n\r\n.widget-header h3 {\r\n  font-size: 1.1rem;\r\n  font-weight: 600;\r\n  color: #333;\r\n  margin: 0;\r\n}\r\n\r\n.sector-groups {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 2rem;\r\n}\r\n\r\n.sector-group {\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n  padding: 1.5rem;\r\n}\r\n\r\n.sector-title {\r\n  font-size: 1.1rem;\r\n  font-weight: 600;\r\n  color: #333;\r\n  margin-bottom: 1rem;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.stock-count {\r\n  font-size: 0.8rem;\r\n  color: #666;\r\n  font-weight: 400;\r\n}\r\n\r\n.stocks-in-group {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 2rem;\r\n}\r\n\r\n.stocks-in-group > * {\r\n  width: 100%;\r\n}\r\n\r\n.btn {\r\n  padding: 8px 16px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n\r\n.btn-secondary {\r\n  background-color: #6c757d;\r\n  color: white;\r\n}\r\n\r\n.btn-secondary:hover {\r\n  background-color: #5a6268;\r\n}\r\n\r\n.text-muted {\r\n  color: #6c757d;\r\n}\r\n\r\n.text-danger {\r\n  color: #dc3545;\r\n}\r\n\r\n.mb-3 {\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n@media (max-width: 767px) {\r\n  .stock-header {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 0.5rem;\r\n  }\r\n  \r\n  /*  */\r\n  .main-layout {\r\n    flex-direction: column;\r\n    gap: 1rem;\r\n  }\r\n  \r\n  .navigation-sidebar {\r\n    display: none;\r\n  }\r\n  \r\n  .sector-group {\r\n    padding: 1rem;\r\n    margin: 0 -0.5rem;\r\n  }\r\n  \r\n  .stocks-in-group {\r\n    gap: 1.5rem;\r\n  }\r\n}\r\n\r\n@media (max-width: 1023px) {\r\n  .main-layout {\r\n    flex-direction: column;\r\n    gap: 1rem;\r\n  }\r\n  \r\n  .navigation-sidebar {\r\n    display: none;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .sector-groups {\r\n    gap: 1.5rem;\r\n  }\r\n  \r\n  .sector-group {\r\n    padding: 0.75rem;\r\n    margin: 0 -0.25rem;\r\n  }\r\n  \r\n  .stocks-in-group {\r\n    gap: 1rem;\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"performance-monitor\" v-if=\"showMonitor\">\r\n    <div class=\"monitor-header\">\r\n      <h4>Performance Monitor</h4>\r\n      <button @click=\"toggleMonitor\" class=\"toggle-btn\">\r\n        {{ expanded ? '' : '+' }}\r\n      </button>\r\n    </div>\r\n    \r\n    <div v-if=\"expanded\" class=\"monitor-content\">\r\n      <div class=\"metrics-grid\">\r\n        <div class=\"metric-card\">\r\n          <div class=\"metric-label\">Page Load</div>\r\n          <div class=\"metric-value\">{{ pageLoadTime }}ms</div>\r\n        </div>\r\n        \r\n        <div class=\"metric-card\">\r\n          <div class=\"metric-label\">Widgets Loaded</div>\r\n          <div class=\"metric-value\">{{ widgetsLoaded }}/{{ totalWidgets }}</div>\r\n        </div>\r\n        \r\n        <div class=\"metric-card\">\r\n          <div class=\"metric-label\">Total Size</div>\r\n          <div class=\"metric-value\">{{ totalSize }}</div>\r\n        </div>\r\n        \r\n        <div class=\"metric-card\">\r\n          <div class=\"metric-label\">Memory Usage</div>\r\n          <div class=\"metric-value\">{{ memoryUsage }}</div>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"widgets-list\">\r\n        <h5>Widget Load Times</h5>\r\n        <div v-for=\"widget in widgetTimes\" :key=\"widget.id\" class=\"widget-item\">\r\n          <span class=\"widget-name\">{{ widget.name }}</span>\r\n          <span class=\"widget-time\" :class=\"getTimeClass(widget.time)\">\r\n            {{ widget.time }}ms\r\n          </span>\r\n          <span class=\"widget-priority\">P{{ widget.priority }}</span>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"actions\">\r\n        <button @click=\"clearMetrics\" class=\"clear-btn\">Clear</button>\r\n        <button @click=\"exportMetrics\" class=\"export-btn\">Export</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'PerformanceMonitor',\r\n  data() {\r\n    return {\r\n      showMonitor: false,\r\n      expanded: true, // \r\n      pageLoadTime: 0,\r\n      widgetsLoaded: 0,\r\n      totalWidgets: 0,\r\n      widgetTimes: [],\r\n      startTime: 0\r\n    }\r\n  },\r\n  computed: {\r\n    totalSize() {\r\n      if (typeof performance !== 'undefined' && performance.getEntriesByType) {\r\n        const entries = performance.getEntriesByType('resource')\r\n        const totalBytes = entries.reduce((sum, entry) => {\r\n          return sum + (entry.transferSize || 0)\r\n        }, 0)\r\n        \r\n        if (totalBytes > 1024 * 1024) {\r\n          return `${(totalBytes / (1024 * 1024)).toFixed(1)}MB`\r\n        } else if (totalBytes > 1024) {\r\n          return `${(totalBytes / 1024).toFixed(1)}KB`\r\n        }\r\n        return `${totalBytes}B`\r\n      }\r\n      return 'N/A'\r\n    },\r\n    \r\n    memoryUsage() {\r\n      if (typeof performance !== 'undefined' && performance.memory) {\r\n        const used = performance.memory.usedJSHeapSize\r\n        if (used > 1024 * 1024) {\r\n          return `${(used / (1024 * 1024)).toFixed(1)}MB`\r\n        }\r\n        return `${(used / 1024).toFixed(1)}KB`\r\n      }\r\n      return 'N/A'\r\n    }\r\n  },\r\n  mounted() {\r\n    this.startTime = performance.now()\r\n    this.setupPerformanceTracking()\r\n    \r\n    //  debug \r\n    const isDev = process.env.NODE_ENV === 'development'\r\n    const hasDebug = new URLSearchParams(window.location.search).has('debug')\r\n    this.showMonitor = isDev || hasDebug\r\n    \r\n    // \r\n    if (document.readyState === 'complete') {\r\n      this.calculatePageLoadTime()\r\n    } else {\r\n      window.addEventListener('load', this.calculatePageLoadTime)\r\n    }\r\n  },\r\n  beforeUnmount() {\r\n    window.removeEventListener('load', this.calculatePageLoadTime)\r\n  },\r\n  methods: {\r\n    setupPerformanceTracking() {\r\n      //   console.log  Console \r\n      //  Performance Observer API \r\n      \r\n      // \r\n      window.addEventListener('widget-loaded', (event) => {\r\n        if (event.detail) {\r\n          this.addWidgetTime({\r\n            name: event.detail.name,\r\n            time: event.detail.time,\r\n            priority: event.detail.priority || 1\r\n          })\r\n        }\r\n      })\r\n      \r\n      //  Performance Observer \r\n      if (typeof PerformanceObserver !== 'undefined') {\r\n        try {\r\n          const observer = new PerformanceObserver((list) => {\r\n            for (const entry of list.getEntries()) {\r\n              //  TradingView \r\n              if (entry.name.includes('tradingview') || entry.name.includes('widget')) {\r\n                this.addWidgetTime({\r\n                  name: entry.name.split('/').pop() || 'Unknown Widget',\r\n                  time: Math.round(entry.duration),\r\n                  priority: 2\r\n                })\r\n              }\r\n            }\r\n          })\r\n          \r\n          observer.observe({ entryTypes: ['resource', 'navigation'] })\r\n          \r\n          // \r\n          this.$once('hook:beforeDestroy', () => {\r\n            observer.disconnect()\r\n          })\r\n        } catch (error) {\r\n          console.warn('PerformanceObserver not supported:', error)\r\n        }\r\n      }\r\n    },\r\n    \r\n    calculatePageLoadTime() {\r\n      this.pageLoadTime = Math.round(performance.now() - this.startTime)\r\n    },\r\n    \r\n    addWidgetTime(widget) {\r\n      this.widgetTimes.push({\r\n        id: Date.now() + Math.random(),\r\n        ...widget\r\n      })\r\n      this.widgetsLoaded++\r\n      \r\n      //  widgets \r\n      if (this.totalWidgets === 0) {\r\n        // \r\n        const path = this.$route?.path || window.location.pathname\r\n        if (path.includes('market-dashboard')) {\r\n          this.totalWidgets = 5 // Market Dashboard  widgets \r\n        } else if (path.includes('stock-dashboard')) {\r\n          this.totalWidgets = 10 //  Stock Dashboard  widgets \r\n        } else {\r\n          this.totalWidgets = this.widgetsLoaded + 2 // \r\n        }\r\n      }\r\n    },\r\n    \r\n    getTimeClass(time) {\r\n      if (time < 1000) return 'time-good'\r\n      if (time < 3000) return 'time-ok'\r\n      return 'time-slow'\r\n    },\r\n    \r\n    toggleMonitor() {\r\n      this.expanded = !this.expanded\r\n    },\r\n    \r\n    clearMetrics() {\r\n      this.widgetTimes = []\r\n      this.widgetsLoaded = 0\r\n      this.totalWidgets = 0\r\n      this.startTime = performance.now()\r\n    },\r\n    \r\n    exportMetrics() {\r\n      const data = {\r\n        pageLoadTime: this.pageLoadTime,\r\n        widgetsLoaded: this.widgetsLoaded,\r\n        totalWidgets: this.totalWidgets,\r\n        totalSize: this.totalSize,\r\n        memoryUsage: this.memoryUsage,\r\n        widgetTimes: this.widgetTimes,\r\n        timestamp: new Date().toISOString(),\r\n        url: window.location.href\r\n      }\r\n      \r\n      const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' })\r\n      const url = URL.createObjectURL(blob)\r\n      const a = document.createElement('a')\r\n      a.href = url\r\n      a.download = `performance-${Date.now()}.json`\r\n      a.click()\r\n      URL.revokeObjectURL(url)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.performance-monitor {\r\n  position: fixed;\r\n  top: 80px;\r\n  right: 20px;\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n  z-index: 1000;\r\n  min-width: 300px;\r\n  max-width: 400px;\r\n}\r\n\r\n.monitor-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 0.75rem 1rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n  background: #f8f9fa;\r\n  border-radius: 8px 8px 0 0;\r\n}\r\n\r\n.monitor-header h4 {\r\n  margin: 0;\r\n  font-size: 0.9rem;\r\n  font-weight: 600;\r\n  color: #333;\r\n}\r\n\r\n.toggle-btn {\r\n  background: none;\r\n  border: none;\r\n  font-size: 1.2rem;\r\n  font-weight: bold;\r\n  cursor: pointer;\r\n  color: #666;\r\n  padding: 0;\r\n  width: 24px;\r\n  height: 24px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.toggle-btn:hover {\r\n  color: #007bff;\r\n}\r\n\r\n.monitor-content {\r\n  padding: 1rem;\r\n}\r\n\r\n.metrics-grid {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 0.75rem;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.metric-card {\r\n  background: #f8f9fa;\r\n  padding: 0.75rem;\r\n  border-radius: 6px;\r\n  text-align: center;\r\n}\r\n\r\n.metric-label {\r\n  font-size: 0.75rem;\r\n  color: #666;\r\n  margin-bottom: 0.25rem;\r\n}\r\n\r\n.metric-value {\r\n  font-size: 0.9rem;\r\n  font-weight: 600;\r\n  color: #333;\r\n}\r\n\r\n.widgets-list {\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.widgets-list h5 {\r\n  font-size: 0.85rem;\r\n  margin: 0 0 0.5rem 0;\r\n  color: #333;\r\n}\r\n\r\n.widget-item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 0.5rem;\r\n  background: #f8f9fa;\r\n  border-radius: 4px;\r\n  margin-bottom: 0.25rem;\r\n  font-size: 0.8rem;\r\n}\r\n\r\n.widget-name {\r\n  flex: 1;\r\n  color: #333;\r\n  font-weight: 500;\r\n}\r\n\r\n.widget-time {\r\n  margin-right: 0.5rem;\r\n  font-weight: 600;\r\n}\r\n\r\n.time-good {\r\n  color: #28a745;\r\n}\r\n\r\n.time-ok {\r\n  color: #ffc107;\r\n}\r\n\r\n.time-slow {\r\n  color: #dc3545;\r\n}\r\n\r\n.widget-priority {\r\n  background: #007bff;\r\n  color: white;\r\n  padding: 0.125rem 0.375rem;\r\n  border-radius: 12px;\r\n  font-size: 0.7rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.actions {\r\n  display: flex;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.clear-btn,\r\n.export-btn {\r\n  flex: 1;\r\n  padding: 0.5rem;\r\n  border: 1px solid #dee2e6;\r\n  border-radius: 4px;\r\n  background: white;\r\n  cursor: pointer;\r\n  font-size: 0.8rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.clear-btn:hover {\r\n  background: #f8f9fa;\r\n}\r\n\r\n.export-btn {\r\n  background: #007bff;\r\n  color: white;\r\n  border-color: #007bff;\r\n}\r\n\r\n.export-btn:hover {\r\n  background: #0056b3;\r\n}\r\n\r\n/*  */\r\n@media (max-width: 768px) {\r\n  .performance-monitor {\r\n    position: relative;\r\n    top: auto;\r\n    right: auto;\r\n    margin: 1rem;\r\n    width: calc(100% - 2rem);\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"stock-dashboard\">\r\n    <!-- Performance Monitor -->\r\n    <PerformanceMonitor />\r\n\r\n    <!-- Stock Overview ( Stock Grid) -->\r\n    <StockOverview />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport StockOverview from '@/components/StockOverview.vue'\r\nimport PerformanceMonitor from '@/components/PerformanceMonitor.vue'\r\n\r\nexport default {\r\n  name: 'StockDashboard',\r\n  components: {\r\n    StockOverview,\r\n    PerformanceMonitor\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.stock-dashboard {\r\n  padding: 0;\r\n}\r\n\r\n.mb-3 {\r\n  margin-bottom: 0.75rem;\r\n}\r\n\r\n.text-muted {\r\n  color: #6c757d;\r\n}\r\n</style>","<template>\r\n  <div class=\"settings\">\r\n    <h2>Settings</h2>\r\n    <p class=\"text-muted mb-3\">Configure system preferences and view diagnostics</p>\r\n\r\n    <div class=\"card\">\r\n      <h3>Privacy & Analytics</h3>\r\n      <p class=\"text-muted\">Toggle tracking and scraping preferences</p>\r\n      <!-- Settings toggles will be implemented in task 7.1 -->\r\n    </div>\r\n\r\n    <div class=\"card\">\r\n      <h3>System Diagnostics</h3>\r\n      <p class=\"text-muted\">View system status and data freshness</p>\r\n      <!-- Diagnostics panel will be implemented in task 7.2 -->\r\n    </div>\r\n\r\n    <div class=\"card\">\r\n      <h3>Import/Export</h3>\r\n      <p class=\"text-muted\">Backup and restore your configuration</p>\r\n      <!-- Import/export functionality will be implemented in task 7.3 -->\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'Settings'\r\n}\r\n</script>\r\n","<template>\r\n  <div class=\"advanced-chart-widget\" :id=\"containerId\" ref=\"container\">\r\n    <div v-if=\"!loaded && !error\" class=\"chart-loading\">\r\n      <div class=\"loading-spinner\"></div>\r\n      <span>Loading Market Regime...</span>\r\n    </div>\r\n    \r\n    <div v-if=\"error\" class=\"chart-error\">\r\n      <span> Failed to load</span>\r\n      <button @click=\"retry\" class=\"retry-btn\">Retry</button>\r\n    </div>\r\n\r\n    <!-- TradingView Advanced Chart Container -->\r\n    <div v-show=\"loaded\" class=\"tradingview-widget-container\" style=\"height:100%;width:100%\">\r\n      <div class=\"tradingview-widget-container__widget\" style=\"height:calc(100% - 32px);width:100%\"></div>\r\n      <div class=\"tradingview-widget-copyright\">\r\n        <a :href=\"`https://www.tradingview.com/symbols/${exchange}-${symbol}/`\" rel=\"noopener nofollow\" target=\"_blank\">\r\n          <span class=\"blue-text\">{{ symbol }} stock chart</span>\r\n        </a>\r\n        <span class=\"trademark\"> by TradingView</span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'MarketRegimeWidget',\r\n  props: {\r\n    symbol: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    exchange: {\r\n      type: String,\r\n      default: 'NASDAQ'\r\n    },\r\n    priority: {\r\n      type: Number,\r\n      default: 3\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      loaded: false,\r\n      error: false,\r\n      loadStartTime: 0,\r\n      isVisible: false,\r\n      observer: null\r\n    }\r\n  },\r\n  computed: {\r\n    containerId() {\r\n      return `market-regime-${this.symbol}-${Date.now()}`\r\n    }\r\n  },\r\n  async mounted() {\r\n    this.setupIntersectionObserver()\r\n  },\r\n  beforeUnmount() {\r\n    if (this.observer) {\r\n      this.observer.disconnect()\r\n    }\r\n  },\r\n  methods: {\r\n    setupIntersectionObserver() {\r\n      const rootMargins = {\r\n        1: '300px',\r\n        2: '150px', \r\n        3: '50px'\r\n      }\r\n\r\n      this.observer = new IntersectionObserver(\r\n        (entries) => {\r\n          entries.forEach((entry) => {\r\n            if (entry.isIntersecting && !this.loaded && !this.error) {\r\n              this.isVisible = true\r\n              this.loadWidget()\r\n              this.observer.disconnect()\r\n            }\r\n          })\r\n        },\r\n        {\r\n          rootMargin: rootMargins[this.priority] || '50px',\r\n          threshold: 0.1\r\n        }\r\n      )\r\n\r\n      this.observer.observe(this.$refs.container)\r\n    },\r\n\r\n    async loadWidget() {\r\n      this.loadStartTime = performance.now()\r\n      this.loaded = false\r\n      this.error = false\r\n\r\n      try {\r\n        const delays = {\r\n          1: 0,\r\n          2: 300,\r\n          3: 600\r\n        }\r\n\r\n        const delay = delays[this.priority] || 0\r\n        if (delay > 0) {\r\n          await new Promise(resolve => setTimeout(resolve, delay))\r\n        }\r\n\r\n        await this.createWidget()\r\n\r\n      } catch (err) {\r\n        console.error('Failed to load Market Regime widget:', err)\r\n        this.error = true\r\n      }\r\n    },\r\n\r\n    async createWidget() {\r\n      return new Promise((resolve, reject) => {\r\n        this.$nextTick(async () => {\r\n          const container = this.$refs.container\r\n          if (!container) {\r\n            reject(new Error('Container not found'))\r\n            return\r\n          }\r\n\r\n          const config = this.getWidgetConfig()\r\n          const scriptUrl = 'https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js'\r\n          \r\n          const script = document.createElement('script')\r\n          \r\n          script.type = 'text/javascript'\r\n          script.src = scriptUrl\r\n          script.async = true\r\n          script.innerHTML = JSON.stringify(config)\r\n          \r\n          const timeout = setTimeout(() => {\r\n            this.error = true\r\n            reject(new Error('Widget load timeout'))\r\n          }, 8000)\r\n          \r\n          script.onload = () => {\r\n            clearTimeout(timeout)\r\n            this.loaded = true\r\n            \r\n            const loadTime = performance.now() - this.loadStartTime\r\n            console.log(`Market Regime widget ${this.symbol} loaded in ${loadTime.toFixed(2)}ms`)\r\n            \r\n            resolve()\r\n          }\r\n          \r\n          script.onerror = () => {\r\n            clearTimeout(timeout)\r\n            this.error = true\r\n            reject(new Error('Script load failed'))\r\n          }\r\n          \r\n          const widgetContainer = container.querySelector('.tradingview-widget-container__widget')\r\n          if (widgetContainer) {\r\n            widgetContainer.appendChild(script)\r\n          } else {\r\n            container.appendChild(script)\r\n          }\r\n        })\r\n      })\r\n    },\r\n\r\n    getWidgetConfig() {\r\n      return {\r\n        \"allow_symbol_change\": true,\r\n        \"calendar\": false,\r\n        \"details\": false,\r\n        \"hide_side_toolbar\": true,\r\n        \"hide_top_toolbar\": false,\r\n        \"hide_legend\": false,\r\n        \"hide_volume\": false,\r\n        \"hotlist\": false,\r\n        \"interval\": \"D\",\r\n        \"locale\": \"en\",\r\n        \"save_image\": true,\r\n        \"style\": \"9\",\r\n        \"symbol\": `${this.exchange}:${this.symbol}`,\r\n        \"theme\": \"light\",\r\n        \"timezone\": \"Etc/UTC\",\r\n        \"backgroundColor\": \"#ffffff\",\r\n        \"gridColor\": \"rgba(46, 46, 46, 0.06)\",\r\n        \"watchlist\": [],\r\n        \"withdateranges\": true,\r\n        \"range\": \"6M\",\r\n        \"compareSymbols\": [],\r\n        \"studies\": [\r\n          \"STD;Ichimoku%1Cloud\",\r\n          \"STD;BBTrend\",\r\n          \"STD;TEMA\",\r\n          \"STD;Awesome_Oscillator\",\r\n          \"STD;Average%1Directional%1Index\"\r\n        ],\r\n        \"autosize\": true\r\n      }\r\n    },\r\n\r\n    async retry() {\r\n      this.setupIntersectionObserver()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.advanced-chart-widget {\r\n  width: 100%;\r\n  height: 100%;\r\n  min-height: 850px;\r\n  position: relative;\r\n  background: #ffffff;\r\n  padding: 8px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.chart-loading {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  min-height: 850px;\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n  color: #6c757d;\r\n  margin: -8px;\r\n}\r\n\r\n.loading-spinner {\r\n  width: 32px;\r\n  height: 32px;\r\n  border: 3px solid #e9ecef;\r\n  border-top: 3px solid #007bff;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n.chart-loading span {\r\n  font-size: 0.9rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.chart-error {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  min-height: 850px;\r\n  background: #f8d7da;\r\n  border: 1px solid #f5c6cb;\r\n  border-radius: 8px;\r\n  color: #721c24;\r\n  margin: -8px;\r\n}\r\n\r\n.retry-btn {\r\n  margin-top: 0.5rem;\r\n  padding: 0.5rem 1rem;\r\n  background: #dc3545;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.85rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.retry-btn:hover {\r\n  background: #c82333;\r\n}\r\n\r\n/* TradingView Widget  */\r\n.tradingview-widget-container {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: relative;\r\n}\r\n\r\n.tradingview-widget-container__widget {\r\n  width: 100%;\r\n  height: calc(100% - 32px);\r\n}\r\n\r\n.tradingview-widget-copyright {\r\n  font-size: 11px;\r\n  color: #787B86;\r\n  text-align: center;\r\n  padding: 5px 0;\r\n  line-height: 1.2;\r\n}\r\n\r\n.tradingview-widget-copyright a {\r\n  text-decoration: none;\r\n  color: #787B86;\r\n}\r\n\r\n.tradingview-widget-copyright .blue-text {\r\n  color: #2962FF;\r\n}\r\n\r\n.tradingview-widget-copyright .trademark {\r\n  color: #787B86;\r\n}\r\n\r\n.tradingview-widget-copyright a:hover .blue-text {\r\n  color: #1E53E5;\r\n}\r\n</style>\r\n\r\n<!--  TradingView iframe  -->\r\n<style>\r\n/*  TradingView iframe  -  */\r\n.advanced-chart-widget .tradingview-widget-container iframe {\r\n  height: 100% !important;\r\n}\r\n</style>","<template>\r\n  <div class=\"advanced-chart-widget\" :id=\"containerId\" ref=\"container\">\r\n    <div v-if=\"!loaded && !error\" class=\"chart-loading\">\r\n      <div class=\"loading-spinner\"></div>\r\n      <span>Loading Trading Strategy...</span>\r\n    </div>\r\n    \r\n    <div v-if=\"error\" class=\"chart-error\">\r\n      <span> Failed to load</span>\r\n      <button @click=\"retry\" class=\"retry-btn\">Retry</button>\r\n    </div>\r\n\r\n    <!-- TradingView Advanced Chart Container -->\r\n    <div v-show=\"loaded\" class=\"tradingview-widget-container\" style=\"height:100%;width:100%\">\r\n      <div class=\"tradingview-widget-container__widget\" style=\"height:calc(100% - 32px);width:100%\"></div>\r\n      <div class=\"tradingview-widget-copyright\">\r\n        <a :href=\"`https://www.tradingview.com/symbols/${exchange}-${symbol}/`\" rel=\"noopener nofollow\" target=\"_blank\">\r\n          <span class=\"blue-text\">{{ symbol }} stock chart</span>\r\n        </a>\r\n        <span class=\"trademark\"> by TradingView</span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'TradingStrategyWidget',\r\n  props: {\r\n    symbol: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    exchange: {\r\n      type: String,\r\n      default: 'NASDAQ'\r\n    },\r\n    priority: {\r\n      type: Number,\r\n      default: 4\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      loaded: false,\r\n      error: false,\r\n      loadStartTime: 0,\r\n      isVisible: false,\r\n      observer: null\r\n    }\r\n  },\r\n  computed: {\r\n    containerId() {\r\n      return `trading-strategy-${this.symbol}-${Date.now()}`\r\n    }\r\n  },\r\n  async mounted() {\r\n    this.setupIntersectionObserver()\r\n  },\r\n  beforeUnmount() {\r\n    if (this.observer) {\r\n      this.observer.disconnect()\r\n    }\r\n  },\r\n  methods: {\r\n    setupIntersectionObserver() {\r\n      const rootMargins = {\r\n        1: '300px',\r\n        2: '150px', \r\n        3: '50px',\r\n        4: '25px'\r\n      }\r\n\r\n      this.observer = new IntersectionObserver(\r\n        (entries) => {\r\n          entries.forEach((entry) => {\r\n            if (entry.isIntersecting && !this.loaded && !this.error) {\r\n              this.isVisible = true\r\n              this.loadWidget()\r\n              this.observer.disconnect()\r\n            }\r\n          })\r\n        },\r\n        {\r\n          rootMargin: rootMargins[this.priority] || '25px',\r\n          threshold: 0.1\r\n        }\r\n      )\r\n\r\n      this.observer.observe(this.$refs.container)\r\n    },\r\n\r\n    async loadWidget() {\r\n      this.loadStartTime = performance.now()\r\n      this.loaded = false\r\n      this.error = false\r\n\r\n      try {\r\n        const delays = {\r\n          1: 0,\r\n          2: 300,\r\n          3: 600,\r\n          4: 900\r\n        }\r\n\r\n        const delay = delays[this.priority] || 0\r\n        if (delay > 0) {\r\n          await new Promise(resolve => setTimeout(resolve, delay))\r\n        }\r\n\r\n        await this.createWidget()\r\n\r\n      } catch (err) {\r\n        console.error('Failed to load Trading Strategy widget:', err)\r\n        this.error = true\r\n      }\r\n    },\r\n\r\n    async createWidget() {\r\n      return new Promise((resolve, reject) => {\r\n        this.$nextTick(async () => {\r\n          const container = this.$refs.container\r\n          if (!container) {\r\n            reject(new Error('Container not found'))\r\n            return\r\n          }\r\n\r\n          const config = this.getWidgetConfig()\r\n          const scriptUrl = 'https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js'\r\n          \r\n          const script = document.createElement('script')\r\n          \r\n          script.type = 'text/javascript'\r\n          script.src = scriptUrl\r\n          script.async = true\r\n          script.innerHTML = JSON.stringify(config)\r\n          \r\n          const timeout = setTimeout(() => {\r\n            this.error = true\r\n            reject(new Error('Widget load timeout'))\r\n          }, 8000)\r\n          \r\n          script.onload = () => {\r\n            clearTimeout(timeout)\r\n            this.loaded = true\r\n            \r\n            const loadTime = performance.now() - this.loadStartTime\r\n            console.log(`Trading Strategy widget ${this.symbol} loaded in ${loadTime.toFixed(2)}ms`)\r\n            \r\n            resolve()\r\n          }\r\n          \r\n          script.onerror = () => {\r\n            clearTimeout(timeout)\r\n            this.error = true\r\n            reject(new Error('Script load failed'))\r\n          }\r\n          \r\n          const widgetContainer = container.querySelector('.tradingview-widget-container__widget')\r\n          if (widgetContainer) {\r\n            widgetContainer.appendChild(script)\r\n          } else {\r\n            container.appendChild(script)\r\n          }\r\n        })\r\n      })\r\n    },\r\n\r\n    getWidgetConfig() {\r\n      return {\r\n        \"allow_symbol_change\": true,\r\n        \"calendar\": false,\r\n        \"details\": false,\r\n        \"hide_side_toolbar\": true,\r\n        \"hide_top_toolbar\": false,\r\n        \"hide_legend\": false,\r\n        \"hide_volume\": false,\r\n        \"hotlist\": false,\r\n        \"interval\": \"D\",\r\n        \"locale\": \"en\",\r\n        \"save_image\": true,\r\n        \"style\": \"9\",\r\n        \"symbol\": `${this.exchange}:${this.symbol}`,\r\n        \"theme\": \"light\",\r\n        \"timezone\": \"Etc/UTC\",\r\n        \"backgroundColor\": \"#ffffff\",\r\n        \"gridColor\": \"rgba(46, 46, 46, 0.06)\",\r\n        \"watchlist\": [],\r\n        \"withdateranges\": true,\r\n        \"range\": \"6M\",\r\n        \"compareSymbols\": [],\r\n        \"studies\": [\r\n          \"STD;MACD\",\r\n          \"STD;Donchian_Channels\",\r\n          \"STD;TRIX\",\r\n          \"STD;RSI\"\r\n        ],\r\n        \"autosize\": true\r\n      }\r\n    },\r\n\r\n    async retry() {\r\n      this.setupIntersectionObserver()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.advanced-chart-widget {\r\n  width: 100%;\r\n  height: 100%;\r\n  min-height: 850px;\r\n  position: relative;\r\n  background: #ffffff;\r\n  padding: 8px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.chart-loading {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  min-height: 850px;\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n  color: #6c757d;\r\n  margin: -8px;\r\n}\r\n\r\n.loading-spinner {\r\n  width: 32px;\r\n  height: 32px;\r\n  border: 3px solid #e9ecef;\r\n  border-top: 3px solid #007bff;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n.chart-loading span {\r\n  font-size: 0.9rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.chart-error {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  min-height: 850px;\r\n  background: #f8d7da;\r\n  border: 1px solid #f5c6cb;\r\n  border-radius: 8px;\r\n  color: #721c24;\r\n  margin: -8px;\r\n}\r\n\r\n.retry-btn {\r\n  margin-top: 0.5rem;\r\n  padding: 0.5rem 1rem;\r\n  background: #dc3545;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.85rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.retry-btn:hover {\r\n  background: #c82333;\r\n}\r\n\r\n/* TradingView Widget  */\r\n.tradingview-widget-container {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: relative;\r\n}\r\n\r\n.tradingview-widget-container__widget {\r\n  width: 100%;\r\n  height: calc(100% - 32px);\r\n}\r\n\r\n.tradingview-widget-copyright {\r\n  font-size: 11px;\r\n  color: #787B86;\r\n  text-align: center;\r\n  padding: 5px 0;\r\n  line-height: 1.2;\r\n}\r\n\r\n.tradingview-widget-copyright a {\r\n  text-decoration: none;\r\n  color: #787B86;\r\n}\r\n\r\n.tradingview-widget-copyright .blue-text {\r\n  color: #2962FF;\r\n}\r\n\r\n.tradingview-widget-copyright .trademark {\r\n  color: #787B86;\r\n}\r\n\r\n.tradingview-widget-copyright a:hover .blue-text {\r\n  color: #1E53E5;\r\n}\r\n</style>\r\n\r\n<!--  TradingView iframe  -->\r\n<style>\r\n/*  TradingView iframe  -  */\r\n.advanced-chart-widget .tradingview-widget-container iframe {\r\n  height: 100% !important;\r\n}\r\n</style>","/**\r\n * Base URL Helper - \r\n * \r\n *  Vite  import.meta.env.BASE_URL \r\n *  hostname  hardcode \r\n * \r\n * : BASE_URL = '/'\r\n * GitHub Pages: BASE_URL = '/investment-dashboard/'\r\n */\r\n\r\n/**\r\n * \r\n * @param {string} path -  ( 'data/ohlcv/AAPL.json')\r\n * @returns {string} \r\n */\r\nexport function withBase(path) {\r\n  const base = import.meta.env.BASE_URL || '/';\r\n  const cleanPath = String(path).replace(/^\\/+/, ''); //  /\r\n  return `${base}${cleanPath}`;\r\n}\r\n\r\n/**\r\n *  base URL\r\n * @returns {string} base URL\r\n */\r\nexport function getBaseUrl() {\r\n  return import.meta.env.BASE_URL || '/';\r\n}\r\n\r\n/**\r\n * \r\n * @returns {boolean} \r\n */\r\nexport function isProduction() {\r\n  return import.meta.env.PROD;\r\n}\r\n\r\n/**\r\n * \r\n * @returns {boolean} \r\n */\r\nexport function isDevelopment() {\r\n  return import.meta.env.DEV;\r\n}\r\n\r\n/**\r\n * \r\n * @returns {Object} \r\n */\r\nexport function getEnvironmentInfo() {\r\n  return {\r\n    baseUrl: getBaseUrl(),\r\n    mode: import.meta.env.MODE,\r\n    prod: isProduction(),\r\n    dev: isDevelopment(),\r\n    viteEnv: import.meta.env\r\n  };\r\n}\r\n\r\n//  helpers\r\nexport const paths = {\r\n  // OHLCV \r\n  ohlcv: (symbol) => withBase(`data/ohlcv/${symbol.toUpperCase()}.json`),\r\n  ohlcvPrecomputed: (symbol, period = '1d', days = 90) => \r\n    withBase(`data/ohlcv/${symbol.toLowerCase()}_${period}_${days}d.json`),\r\n  ohlcvIndex: (options = {}) => {\r\n    const url = withBase('data/ohlcv/index.json');\r\n    return options.v ? `${url}?v=${options.v}` : url;\r\n  },\r\n  \r\n  // \r\n  technicalIndicators: (date, symbol) => \r\n    withBase(`data/technical-indicators/${date}_${symbol}.json`),\r\n  technicalIndicatorsIndex: (options = {}) => {\r\n    const url = withBase('data/technical-indicators/latest_index.json');\r\n    return options.v ? `${url}?v=${options.v}` : url;\r\n  },\r\n  \r\n  // Metadata \r\n  symbolsMetadata: () => withBase('data/symbols_metadata.json'),\r\n  sectorIndustry: () => withBase('data/sector_industry.json'),\r\n  \r\n  // \r\n  universe: () => withBase('config/universe.json'),\r\n  stocks: () => withBase('config/stocks.json'),\r\n  \r\n  //  ( cache busting)\r\n  status: (options = {}) => {\r\n    const url = withBase('data/status.json');\r\n    return options.v ? `${url}?v=${options.v}` : url;\r\n  },\r\n  \r\n  // \r\n  packageJson: () => withBase('package.json'),\r\n  quotesLatest: () => withBase('data/quotes/latest.json'),\r\n  daily: (date) => withBase(`data/daily/${date}.json`)\r\n};\r\n\r\n// Debug helper\r\nexport function debugPaths() {\r\n  console.log(' Base URL Debug Info:', {\r\n    baseUrl: getBaseUrl(),\r\n    environment: import.meta.env.MODE,\r\n    samplePaths: {\r\n      ohlcv: paths.ohlcv('AAPL'),\r\n      technicalIndicators: paths.technicalIndicators('2025-01-29', 'AAPL'),\r\n      metadata: paths.symbolsMetadata()\r\n    }\r\n  });\r\n}\r\n\r\nexport default {\r\n  withBase,\r\n  getBaseUrl,\r\n  isProduction,\r\n  isDevelopment,\r\n  getEnvironmentInfo,\r\n  paths,\r\n  debugPaths\r\n};","// OHLCV API Service -  JSONDEV  fallback  Yahoo Finance\r\n// Production  JSON CORS proxy \r\n\r\nimport { yahooFinanceAPI } from '../utils/yahooFinanceApi.js';\r\nimport { paths } from '../utils/baseUrl.js';\r\n\r\nclass OhlcvApi {\r\n  constructor() {\r\n    this.cache = new Map();\r\n    this.cacheTimeout = 30 * 60 * 1000; // 30 minutes\r\n  }\r\n\r\n  /**\r\n   *  OHLCV  -  JSON\r\n   * @param {string} symbol - \r\n   * @param {string} period -  (1d, 1w, 1m)\r\n   * @param {string} range -  (3mo, 6mo, 1y)\r\n   * @returns {Promise<Object|null>} OHLCV  null\r\n   */\r\n  async getOhlcv(symbol, period = '1d', range = '3mo') {\r\n    const cacheKey = `${symbol}_${period}_${range}`;\r\n    \r\n    // \r\n    if (this.cache.has(cacheKey)) {\r\n      const cached = this.cache.get(cacheKey);\r\n      if (Date.now() - cached.timestamp < this.cacheTimeout) {\r\n        console.log(` Using cached OHLCV for ${symbol}`);\r\n        return cached.data;\r\n      }\r\n    }\r\n\r\n    //  1:  JSONProduction \r\n    try {\r\n      const localData = await this.fetchLocalOhlcv(symbol, period, range);\r\n      if (localData) {\r\n        this.cache.set(cacheKey, {\r\n          data: localData,\r\n          timestamp: Date.now()\r\n        });\r\n        console.log(` Loaded local OHLCV for ${symbol}: ${localData.timestamps?.length || 0} points`);\r\n        return localData;\r\n      }\r\n    } catch (error) {\r\n      console.warn(` Local OHLCV failed for ${symbol}:`, error.message);\r\n    }\r\n\r\n    //  2: DEV  fallback  Yahoo Finance headers\r\n    if (import.meta.env.DEV || new URLSearchParams(window.location.search).has('debug')) {\r\n      try {\r\n        console.log(` DEV mode: trying Yahoo Finance fallback for ${symbol}`);\r\n        const yahooData = await yahooFinanceAPI.getOhlcv(symbol, period, range);\r\n        \r\n        if (yahooData && this.validateOhlcvData(yahooData)) {\r\n          this.cache.set(cacheKey, {\r\n            data: yahooData,\r\n            timestamp: Date.now()\r\n          });\r\n          console.log(` Yahoo Finance fallback success for ${symbol}`);\r\n          return yahooData;\r\n        }\r\n      } catch (error) {\r\n        console.warn(` Yahoo Finance fallback failed for ${symbol}:`, error.message);\r\n      }\r\n    }\r\n\r\n    //  3:  null throw\r\n    console.warn(` No OHLCV data available for ${symbol}`);\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   *  JSON  OHLCV \r\n   * @param {string} symbol - \r\n   * @param {string} period - \r\n   * @param {string} range - \r\n   * @returns {Promise<Object|null>}  OHLCV \r\n   */\r\n  async fetchLocalOhlcv(symbol, period, range) {\r\n    //  baseUrl helper\r\n    const url = paths.ohlcv(symbol);\r\n    \r\n    const response = await fetch(url);\r\n    \r\n    if (!response.ok) {\r\n      if (response.status === 404) {\r\n        console.log(` Local OHLCV not found for ${symbol} (404)`);\r\n        return null;\r\n      }\r\n      throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n    }\r\n    \r\n    const data = await response.json();\r\n    \r\n    if (!this.validateOhlcvData(data)) {\r\n      throw new Error('Invalid local OHLCV data structure');\r\n    }\r\n    \r\n    return {\r\n      ...data,\r\n      metadata: {\r\n        ...data.metadata,\r\n        source: 'Local JSON',\r\n        symbol: symbol,\r\n        period: period,\r\n        range: range,\r\n        loadedAt: new Date().toISOString()\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   *  OHLCV \r\n   * @param {Object} data - OHLCV \r\n   * @returns {boolean} \r\n   */\r\n  validateOhlcvData(data) {\r\n    if (!data || typeof data !== 'object') {\r\n      return false;\r\n    }\r\n    \r\n    const requiredFields = ['timestamps', 'open', 'high', 'low', 'close', 'volume'];\r\n    \r\n    for (const field of requiredFields) {\r\n      if (!Array.isArray(data[field])) {\r\n        console.error(` OHLCV validation failed: missing ${field}`);\r\n        return false;\r\n      }\r\n    }\r\n    \r\n    // \r\n    const length = data.timestamps.length;\r\n    for (const field of requiredFields) {\r\n      if (data[field].length !== length) {\r\n        console.error(` OHLCV validation failed: ${field} length mismatch`);\r\n        return false;\r\n      }\r\n    }\r\n    \r\n    // \r\n    if (length < 20) {\r\n      console.error(` OHLCV validation failed: insufficient data (${length} < 20)`);\r\n      return false;\r\n    }\r\n    \r\n    return true;\r\n  }\r\n\r\n  /**\r\n   *  symbol \r\n   * @param {string} symbol - \r\n   * @returns {Promise<boolean>} \r\n   */\r\n  async isLocalAvailable(symbol) {\r\n    try {\r\n      const data = await this.fetchLocalOhlcv(symbol, '1d', '3mo');\r\n      return data !== null;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  clearCache() {\r\n    this.cache.clear();\r\n    console.log(' OHLCV cache cleared');\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @returns {Object} \r\n   */\r\n  getCacheStats() {\r\n    const stats = {};\r\n    for (const [key, value] of this.cache.entries()) {\r\n      stats[key] = {\r\n        age: Date.now() - value.timestamp,\r\n        expired: Date.now() - value.timestamp > this.cacheTimeout\r\n      };\r\n    }\r\n    return stats;\r\n  }\r\n}\r\n\r\n// \r\nexport const ohlcvApi = new OhlcvApi();\r\nexport default ohlcvApi;","// Money Flow Index (MFI) Calculation\r\n// MFI is a momentum oscillator that uses price and volume to identify overbought/oversold conditions\r\n\r\n/**\r\n * Calculate Money Flow Index (MFI)\r\n * @param {Array} high - Array of high prices\r\n * @param {Array} low - Array of low prices  \r\n * @param {Array} close - Array of close prices\r\n * @param {Array} volume - Array of volume data\r\n * @param {number} period - Period for MFI calculation (default: 14)\r\n * @returns {Array} Array of MFI values\r\n */\r\nexport function calculateMFI(high, low, close, volume, period = 14) {\r\n  if (!high || !low || !close || !volume) {\r\n    throw new Error('MFI calculation requires high, low, close, and volume arrays');\r\n  }\r\n  \r\n  const length = Math.min(high.length, low.length, close.length, volume.length);\r\n  \r\n  if (length < period + 1) {\r\n    throw new Error(`Insufficient data for MFI calculation: need at least ${period + 1} data points, got ${length}`);\r\n  }\r\n  \r\n  console.log(` Calculating MFI with ${length} data points, period=${period}`);\r\n  \r\n  // Step 1: Calculate Typical Price (TP)\r\n  const typicalPrice = new Array(length);\r\n  for (let i = 0; i < length; i++) {\r\n    if (high[i] != null && low[i] != null && close[i] != null) {\r\n      typicalPrice[i] = (high[i] + low[i] + close[i]) / 3;\r\n    } else {\r\n      typicalPrice[i] = null;\r\n    }\r\n  }\r\n  \r\n  // Step 2: Calculate Raw Money Flow (RMF)\r\n  const rawMoneyFlow = new Array(length);\r\n  for (let i = 0; i < length; i++) {\r\n    if (typicalPrice[i] != null && volume[i] != null) {\r\n      rawMoneyFlow[i] = typicalPrice[i] * volume[i];\r\n    } else {\r\n      rawMoneyFlow[i] = null;\r\n    }\r\n  }\r\n  \r\n  // Step 3: Calculate Positive and Negative Money Flow\r\n  const positiveMoneyFlow = new Array(length);\r\n  const negativeMoneyFlow = new Array(length);\r\n  \r\n  positiveMoneyFlow[0] = 0;\r\n  negativeMoneyFlow[0] = 0;\r\n  \r\n  for (let i = 1; i < length; i++) {\r\n    if (typicalPrice[i] != null && typicalPrice[i - 1] != null && rawMoneyFlow[i] != null) {\r\n      if (typicalPrice[i] > typicalPrice[i - 1]) {\r\n        positiveMoneyFlow[i] = rawMoneyFlow[i];\r\n        negativeMoneyFlow[i] = 0;\r\n      } else if (typicalPrice[i] < typicalPrice[i - 1]) {\r\n        positiveMoneyFlow[i] = 0;\r\n        negativeMoneyFlow[i] = rawMoneyFlow[i];\r\n      } else {\r\n        positiveMoneyFlow[i] = 0;\r\n        negativeMoneyFlow[i] = 0;\r\n      }\r\n    } else {\r\n      positiveMoneyFlow[i] = 0;\r\n      negativeMoneyFlow[i] = 0;\r\n    }\r\n  }\r\n  \r\n  // Step 4: Calculate MFI using rolling sums\r\n  const mfi = new Array(length).fill(null);\r\n  \r\n  for (let i = period; i < length; i++) {\r\n    let positiveMFSum = 0;\r\n    let negativeMFSum = 0;\r\n    let validPeriods = 0;\r\n    \r\n    // Sum over the period\r\n    for (let j = i - period + 1; j <= i; j++) {\r\n      if (positiveMoneyFlow[j] != null && negativeMoneyFlow[j] != null) {\r\n        positiveMFSum += positiveMoneyFlow[j];\r\n        negativeMFSum += negativeMoneyFlow[j];\r\n        validPeriods++;\r\n      }\r\n    }\r\n    \r\n    // Calculate MFI if we have enough valid data\r\n    if (validPeriods >= Math.floor(period * 0.7)) { // At least 70% of period data\r\n      if (negativeMFSum === 0) {\r\n        mfi[i] = 100; // All positive money flow\r\n      } else {\r\n        const moneyFlowRatio = positiveMFSum / negativeMFSum;\r\n        mfi[i] = 100 - (100 / (1 + moneyFlowRatio));\r\n      }\r\n    }\r\n  }\r\n  \r\n  // Count valid MFI values\r\n  const validCount = mfi.filter(value => value !== null).length;\r\n  console.log(` MFI calculation complete: ${validCount}/${length} valid values`);\r\n  \r\n  return mfi;\r\n}\r\n\r\n/**\r\n * Get MFI signal based on current value\r\n * @param {number} mfiValue - Current MFI value\r\n * @returns {string} Signal: 'OVERBOUGHT', 'OVERSOLD', or 'NEUTRAL'\r\n */\r\nexport function getMFISignal(mfiValue) {\r\n  if (mfiValue == null || isNaN(mfiValue)) {\r\n    return 'NEUTRAL';\r\n  }\r\n  \r\n  if (mfiValue >= 80) {\r\n    return 'OVERBOUGHT';\r\n  } else if (mfiValue <= 20) {\r\n    return 'OVERSOLD';\r\n  } else {\r\n    return 'NEUTRAL';\r\n  }\r\n}\r\n\r\n/**\r\n * Calculate MFI with additional metadata\r\n * @param {Object} ohlcv - OHLCV data object\r\n * @param {number} period - Period for MFI calculation\r\n * @returns {Object} MFI results with metadata\r\n */\r\nexport function calculateMFIWithMetadata(ohlcv, period = 14) {\r\n  try {\r\n    const mfiValues = calculateMFI(ohlcv.high, ohlcv.low, ohlcv.close, ohlcv.volume, period);\r\n    \r\n    // Get the latest valid MFI value\r\n    let latestMFI = null;\r\n    for (let i = mfiValues.length - 1; i >= 0; i--) {\r\n      if (mfiValues[i] != null && !isNaN(mfiValues[i])) {\r\n        latestMFI = mfiValues[i];\r\n        break;\r\n      }\r\n    }\r\n    \r\n    const signal = getMFISignal(latestMFI);\r\n    \r\n    // Calculate statistics\r\n    const validValues = mfiValues.filter(v => v != null && !isNaN(v));\r\n    const avgMFI = validValues.length > 0 ? validValues.reduce((sum, val) => sum + val, 0) / validValues.length : null;\r\n    const maxMFI = validValues.length > 0 ? Math.max(...validValues) : null;\r\n    const minMFI = validValues.length > 0 ? Math.min(...validValues) : null;\r\n    \r\n    return {\r\n      values: mfiValues,\r\n      latest: latestMFI,\r\n      signal: signal,\r\n      period: period,\r\n      statistics: {\r\n        average: avgMFI,\r\n        maximum: maxMFI,\r\n        minimum: minMFI,\r\n        validCount: validValues.length,\r\n        totalCount: mfiValues.length\r\n      },\r\n      metadata: {\r\n        calculatedAt: new Date().toISOString(),\r\n        dataPoints: ohlcv.close.length,\r\n        algorithm: 'Standard MFI'\r\n      }\r\n    };\r\n  } catch (error) {\r\n    console.error(' MFI calculation failed:', error);\r\n    return {\r\n      values: [],\r\n      latest: null,\r\n      signal: 'ERROR',\r\n      period: period,\r\n      error: error.message,\r\n      metadata: {\r\n        calculatedAt: new Date().toISOString(),\r\n        algorithm: 'Standard MFI'\r\n      }\r\n    };\r\n  }\r\n}\r\n\r\nexport default {\r\n  calculateMFI,\r\n  getMFISignal,\r\n  calculateMFIWithMetadata\r\n};","// MFI Volume Profile Calculation\r\n// Combines Money Flow Index with Volume Profile analysis for advanced trading insights\r\n\r\nimport { calculateMFIWithMetadata } from './mfi.js';\r\n\r\n/**\r\n * Calculate Volume Profile with MFI integration\r\n * @param {Object} ohlcv - OHLCV data object\r\n * @param {number} bins - Number of price bins for volume profile (default: 20)\r\n * @param {number} mfiPeriod - Period for MFI calculation (default: 14)\r\n * @param {Object} options - Additional options\r\n * @param {string} options.mfiAvgMode - 'weighted' (default) or 'legacy' for MFI averaging method\r\n * @returns {Object} Volume profile with MFI data\r\n */\r\nexport function calculateMFIVolumeProfile(ohlcv, bins = 20, mfiPeriod = 14, options = {}) {\r\n  const { mfiAvgMode = 'weighted' } = options;\r\n  \r\n  console.log(` Calculating MFI Volume Profile with ${bins} bins, MFI period=${mfiPeriod}, avgMode=${mfiAvgMode}`);\r\n  \r\n  if (!ohlcv || !ohlcv.high || !ohlcv.low || !ohlcv.close || !ohlcv.volume) {\r\n    throw new Error('Invalid OHLCV data for MFI Volume Profile calculation');\r\n  }\r\n  \r\n  const length = Math.min(ohlcv.high.length, ohlcv.low.length, ohlcv.close.length, ohlcv.volume.length);\r\n  \r\n  if (length < mfiPeriod + 10) {\r\n    throw new Error(`Insufficient data for MFI Volume Profile: need at least ${mfiPeriod + 10} data points, got ${length}`);\r\n  }\r\n  \r\n  try {\r\n    // Step 1: Calculate MFI\r\n    const mfiResult = calculateMFIWithMetadata(ohlcv, mfiPeriod);\r\n    \r\n    // Step 2: Find price range for binning\r\n    const validPrices = [];\r\n    for (let i = 0; i < length; i++) {\r\n      if (ohlcv.high[i] != null && ohlcv.low[i] != null) {\r\n        validPrices.push(ohlcv.high[i], ohlcv.low[i]);\r\n      }\r\n    }\r\n    \r\n    if (validPrices.length === 0) {\r\n      throw new Error('No valid price data found');\r\n    }\r\n    \r\n    const minPrice = Math.min(...validPrices);\r\n    const maxPrice = Math.max(...validPrices);\r\n    const priceRange = maxPrice - minPrice;\r\n    const binSize = priceRange / bins;\r\n    \r\n    console.log(` Price range: ${minPrice.toFixed(2)} - ${maxPrice.toFixed(2)}, bin size: ${binSize.toFixed(4)}`);\r\n    \r\n    // Step 3: Initialize volume profile bins\r\n    const volumeProfile = new Array(bins).fill(0).map((_, index) => ({\r\n      priceLevel: minPrice + (index + 0.5) * binSize,\r\n      minPrice: minPrice + index * binSize,\r\n      maxPrice: minPrice + (index + 1) * binSize,\r\n      volume: 0,\r\n      positiveVolume: 0, // Volume when MFI indicates buying pressure\r\n      negativeVolume: 0, // Volume when MFI indicates selling pressure\r\n      neutralVolume: 0,  // Volume when MFI is neutral\r\n      mfiAverage: 0,     // Volume-weighted average MFI for this price level\r\n      mfiCount: 0,       // Count of MFI values for averaging (legacy)\r\n      candleCount: 0,    // Number of candles in this bin\r\n      // New fields for volume-weighted MFI calculation\r\n      mfiWeightedSum: 0,     // (mfi * volumeAllocation)\r\n      mfiWeightedVolume: 0,  // (volumeAllocation) for MFI calculation\r\n      mfiAverageLegacy: 0,   // Legacy count-based average (for rollback)\r\n      mfiCountLegacy: 0      // Legacy count (for rollback)\r\n    }));\r\n    \r\n    // Step 4: Distribute volume across price bins with MFI classification\r\n    for (let i = 0; i < length; i++) {\r\n      if (ohlcv.high[i] == null || ohlcv.low[i] == null || \r\n          ohlcv.close[i] == null || ohlcv.volume[i] == null || ohlcv.volume[i] <= 0) {\r\n        continue;\r\n      }\r\n      \r\n      const high = ohlcv.high[i];\r\n      const low = ohlcv.low[i];\r\n      const volume = ohlcv.volume[i];\r\n      const mfiValue = mfiResult.values[i];\r\n      \r\n      // Determine which bins this candle spans\r\n      const startBin = Math.max(0, Math.floor((low - minPrice) / binSize));\r\n      const endBin = Math.min(bins - 1, Math.floor((high - minPrice) / binSize));\r\n      \r\n      // Distribute volume proportionally across bins\r\n      const candleRange = high - low;\r\n      const binsSpanned = endBin - startBin + 1;\r\n      \r\n      for (let binIndex = startBin; binIndex <= endBin; binIndex++) {\r\n        const bin = volumeProfile[binIndex];\r\n        \r\n        // Calculate overlap between candle and bin\r\n        const binLow = bin.minPrice;\r\n        const binHigh = bin.maxPrice;\r\n        const overlapLow = Math.max(low, binLow);\r\n        const overlapHigh = Math.min(high, binHigh);\r\n        const overlapRange = Math.max(0, overlapHigh - overlapLow);\r\n        \r\n        // Proportional volume allocation\r\n        let volumeAllocation;\r\n        if (candleRange > 0) {\r\n          volumeAllocation = volume * (overlapRange / candleRange);\r\n        } else {\r\n          // If high === low, distribute equally across spanned bins\r\n          volumeAllocation = volume / binsSpanned;\r\n        }\r\n        \r\n        bin.volume += volumeAllocation;\r\n        bin.candleCount++;\r\n        \r\n        // Classify volume based on MFI\r\n        if (mfiValue != null && !isNaN(mfiValue)) {\r\n          if (mfiValue >= 60) {\r\n            bin.positiveVolume += volumeAllocation;\r\n          } else if (mfiValue <= 40) {\r\n            bin.negativeVolume += volumeAllocation;\r\n          } else {\r\n            bin.neutralVolume += volumeAllocation;\r\n          }\r\n          \r\n          // Legacy MFI averaging (count-based)\r\n          bin.mfiAverageLegacy = (bin.mfiAverageLegacy * bin.mfiCountLegacy + mfiValue) / (bin.mfiCountLegacy + 1);\r\n          bin.mfiCountLegacy++;\r\n          \r\n          // New volume-weighted MFI calculation\r\n          bin.mfiWeightedSum += mfiValue * volumeAllocation;\r\n          bin.mfiWeightedVolume += volumeAllocation;\r\n          \r\n          // Keep legacy fields for backward compatibility (but don't use for final mfiAverage)\r\n          bin.mfiCount++;\r\n        } else {\r\n          bin.neutralVolume += volumeAllocation;\r\n        }\r\n      }\r\n    }\r\n    \r\n    // Step 4.5: Calculate final MFI averages based on selected mode\r\n    volumeProfile.forEach(bin => {\r\n      if (mfiAvgMode === 'legacy') {\r\n        // Use legacy count-based average\r\n        bin.mfiAverage = bin.mfiAverageLegacy;\r\n      } else {\r\n        // Use volume-weighted average (default)\r\n        if (bin.mfiWeightedVolume > 0) {\r\n          bin.mfiAverage = bin.mfiWeightedSum / bin.mfiWeightedVolume;\r\n        } else {\r\n          bin.mfiAverage = 0;\r\n        }\r\n      }\r\n      \r\n      // Ensure MFI average is within valid range [0, 100]\r\n      bin.mfiAverage = Math.max(0, Math.min(100, bin.mfiAverage));\r\n    });\r\n    \r\n    // Step 5: Calculate additional metrics\r\n    const totalVolume = volumeProfile.reduce((sum, bin) => sum + bin.volume, 0);\r\n    const maxVolumeInBin = Math.max(...volumeProfile.map(bin => bin.volume));\r\n    \r\n    // Find Point of Control (POC) - price level with highest volume\r\n    let pocIndex = 0;\r\n    let maxVolume = 0;\r\n    for (let i = 0; i < volumeProfile.length; i++) {\r\n      if (volumeProfile[i].volume > maxVolume) {\r\n        maxVolume = volumeProfile[i].volume;\r\n        pocIndex = i;\r\n      }\r\n    }\r\n    \r\n    const poc = volumeProfile[pocIndex];\r\n    \r\n    // Calculate Value Area (70% of total volume around POC)\r\n    const targetVolume = totalVolume * 0.7;\r\n    let valueAreaVolume = poc.volume;\r\n    let valueAreaLow = pocIndex;\r\n    let valueAreaHigh = pocIndex;\r\n    \r\n    // Expand value area up and down from POC\r\n    while (valueAreaVolume < targetVolume && (valueAreaLow > 0 || valueAreaHigh < bins - 1)) {\r\n      const volumeAbove = valueAreaHigh < bins - 1 ? volumeProfile[valueAreaHigh + 1].volume : 0;\r\n      const volumeBelow = valueAreaLow > 0 ? volumeProfile[valueAreaLow - 1].volume : 0;\r\n      \r\n      if (volumeAbove >= volumeBelow && valueAreaHigh < bins - 1) {\r\n        valueAreaHigh++;\r\n        valueAreaVolume += volumeProfile[valueAreaHigh].volume;\r\n      } else if (valueAreaLow > 0) {\r\n        valueAreaLow--;\r\n        valueAreaVolume += volumeProfile[valueAreaLow].volume;\r\n      } else {\r\n        break;\r\n      }\r\n    }\r\n    \r\n    // Step 6: Calculate MFI-based insights\r\n    const mfiInsights = {\r\n      buyingPressureLevels: volumeProfile\r\n        .filter(bin => bin.positiveVolume > bin.negativeVolume && bin.volume > totalVolume / bins)\r\n        .map(bin => ({\r\n          priceLevel: bin.priceLevel,\r\n          volume: bin.volume,\r\n          mfiAverage: bin.mfiAverage,\r\n          buyingRatio: bin.positiveVolume / bin.volume\r\n        }))\r\n        .sort((a, b) => b.volume - a.volume)\r\n        .slice(0, 5),\r\n      \r\n      sellingPressureLevels: volumeProfile\r\n        .filter(bin => bin.negativeVolume > bin.positiveVolume && bin.volume > totalVolume / bins)\r\n        .map(bin => ({\r\n          priceLevel: bin.priceLevel,\r\n          volume: bin.volume,\r\n          mfiAverage: bin.mfiAverage,\r\n          sellingRatio: bin.negativeVolume / bin.volume\r\n        }))\r\n        .sort((a, b) => b.volume - a.volume)\r\n        .slice(0, 5),\r\n      \r\n      totalBuyingVolume: volumeProfile.reduce((sum, bin) => sum + bin.positiveVolume, 0),\r\n      totalSellingVolume: volumeProfile.reduce((sum, bin) => sum + bin.negativeVolume, 0),\r\n      totalNeutralVolume: volumeProfile.reduce((sum, bin) => sum + bin.neutralVolume, 0)\r\n    };\r\n    \r\n    // Calculate overall market sentiment\r\n    const buyingRatio = mfiInsights.totalBuyingVolume / totalVolume;\r\n    const sellingRatio = mfiInsights.totalSellingVolume / totalVolume;\r\n    \r\n    let marketSentiment = 'NEUTRAL';\r\n    if (buyingRatio > 0.4) {\r\n      marketSentiment = 'BULLISH';\r\n    } else if (sellingRatio > 0.4) {\r\n      marketSentiment = 'BEARISH';\r\n    }\r\n    \r\n    const result = {\r\n      volumeProfile: volumeProfile,\r\n      mfi: mfiResult,\r\n      pointOfControl: {\r\n        priceLevel: poc.priceLevel,\r\n        volume: poc.volume,\r\n        percentage: (poc.volume / totalVolume) * 100\r\n      },\r\n      valueArea: {\r\n        low: volumeProfile[valueAreaLow].priceLevel,\r\n        high: volumeProfile[valueAreaHigh].priceLevel,\r\n        volume: valueAreaVolume,\r\n        percentage: (valueAreaVolume / totalVolume) * 100\r\n      },\r\n      mfiInsights: mfiInsights,\r\n      marketSentiment: marketSentiment,\r\n      statistics: {\r\n        totalVolume: totalVolume,\r\n        maxVolumeInBin: maxVolumeInBin,\r\n        priceRange: {\r\n          min: minPrice,\r\n          max: maxPrice,\r\n          range: priceRange\r\n        },\r\n        bins: bins,\r\n        buyingRatio: buyingRatio,\r\n        sellingRatio: sellingRatio,\r\n        neutralRatio: mfiInsights.totalNeutralVolume / totalVolume\r\n      },\r\n      metadata: {\r\n        calculatedAt: new Date().toISOString(),\r\n        dataPoints: length,\r\n        mfiPeriod: mfiPeriod,\r\n        mfiAvgMode: mfiAvgMode,\r\n        algorithm: `MFI Volume Profile v2.0 (${mfiAvgMode} averaging)`\r\n      }\r\n    };\r\n    \r\n    console.log(` MFI Volume Profile calculation complete:`, {\r\n      bins: bins,\r\n      totalVolume: totalVolume.toLocaleString(),\r\n      poc: poc.priceLevel.toFixed(2),\r\n      marketSentiment: marketSentiment,\r\n      buyingRatio: (buyingRatio * 100).toFixed(1) + '%'\r\n    });\r\n    \r\n    return result;\r\n    \r\n  } catch (error) {\r\n    console.error(' MFI Volume Profile calculation failed:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n/**\r\n * Get trading signals based on MFI Volume Profile\r\n * @param {Object} mfiVolumeProfile - Result from calculateMFIVolumeProfile\r\n * @param {number} currentPrice - Current stock price\r\n * @returns {Object} Trading signals and recommendations\r\n */\r\nexport function getMFIVolumeProfileSignals(mfiVolumeProfile, currentPrice) {\r\n  if (!mfiVolumeProfile || !currentPrice) {\r\n    return {\r\n      signal: 'NEUTRAL',\r\n      confidence: 0,\r\n      recommendations: [],\r\n      supportLevels: [],\r\n      resistanceLevels: []\r\n    };\r\n  }\r\n  \r\n  const { volumeProfile, pointOfControl, valueArea, mfiInsights, marketSentiment } = mfiVolumeProfile;\r\n  \r\n  // Find support and resistance levels\r\n  const supportLevels = volumeProfile\r\n    .filter(bin => bin.priceLevel < currentPrice && bin.volume > mfiVolumeProfile.statistics.totalVolume / 30)\r\n    .sort((a, b) => b.volume - a.volume)\r\n    .slice(0, 3)\r\n    .map(bin => ({\r\n      price: bin.priceLevel,\r\n      strength: bin.volume / mfiVolumeProfile.statistics.maxVolumeInBin,\r\n      type: bin.positiveVolume > bin.negativeVolume ? 'BUYING_SUPPORT' : 'SELLING_SUPPORT'\r\n    }));\r\n  \r\n  const resistanceLevels = volumeProfile\r\n    .filter(bin => bin.priceLevel > currentPrice && bin.volume > mfiVolumeProfile.statistics.totalVolume / 30)\r\n    .sort((a, b) => b.volume - a.volume)\r\n    .slice(0, 3)\r\n    .map(bin => ({\r\n      price: bin.priceLevel,\r\n      strength: bin.volume / mfiVolumeProfile.statistics.maxVolumeInBin,\r\n      type: bin.negativeVolume > bin.positiveVolume ? 'SELLING_RESISTANCE' : 'BUYING_RESISTANCE'\r\n    }));\r\n  \r\n  // Generate trading signal\r\n  let signal = 'NEUTRAL';\r\n  let confidence = 0;\r\n  const recommendations = [];\r\n  \r\n  // Check position relative to POC and Value Area\r\n  const pocDistance = (currentPrice - pointOfControl.priceLevel) / pointOfControl.priceLevel;\r\n  const inValueArea = currentPrice >= valueArea.low && currentPrice <= valueArea.high;\r\n  \r\n  if (marketSentiment === 'BULLISH') {\r\n    if (currentPrice < valueArea.low) {\r\n      signal = 'BUY';\r\n      confidence = 0.7;\r\n      recommendations.push('Price below value area with bullish sentiment - potential buying opportunity');\r\n    } else if (inValueArea) {\r\n      signal = 'HOLD';\r\n      confidence = 0.5;\r\n      recommendations.push('Price in value area with bullish sentiment - monitor for breakout');\r\n    }\r\n  } else if (marketSentiment === 'BEARISH') {\r\n    if (currentPrice > valueArea.high) {\r\n      signal = 'SELL';\r\n      confidence = 0.7;\r\n      recommendations.push('Price above value area with bearish sentiment - potential selling opportunity');\r\n    } else if (inValueArea) {\r\n      signal = 'HOLD';\r\n      confidence = 0.5;\r\n      recommendations.push('Price in value area with bearish sentiment - monitor for breakdown');\r\n    }\r\n  }\r\n  \r\n  // Adjust confidence based on MFI\r\n  if (mfiInsights.totalBuyingVolume > mfiInsights.totalSellingVolume * 1.5) {\r\n    confidence = Math.min(confidence + 0.2, 1.0);\r\n  } else if (mfiInsights.totalSellingVolume > mfiInsights.totalBuyingVolume * 1.5) {\r\n    confidence = Math.min(confidence + 0.2, 1.0);\r\n  }\r\n  \r\n  return {\r\n    signal: signal,\r\n    confidence: confidence,\r\n    recommendations: recommendations,\r\n    supportLevels: supportLevels,\r\n    resistanceLevels: resistanceLevels,\r\n    marketContext: {\r\n      pocDistance: pocDistance,\r\n      inValueArea: inValueArea,\r\n      marketSentiment: marketSentiment,\r\n      volumeBalance: mfiInsights.totalBuyingVolume / mfiInsights.totalSellingVolume\r\n    }\r\n  };\r\n}\r\n\r\nexport default {\r\n  calculateMFIVolumeProfile,\r\n  getMFIVolumeProfileSignals\r\n};","<template>\r\n  <div class=\"mfi-volume-profile-panel\">\r\n    <!-- Loading State -->\r\n    <div v-if=\"loading\" class=\"loading-state\">\r\n      <div class=\"loading-spinner\"></div>\r\n      <p>Loading MFI Volume Profile...</p>\r\n    </div>\r\n\r\n    <!-- Error State with Graceful Fallback -->\r\n    <div v-else-if=\"error\" class=\"error-state\">\r\n      <div class=\"error-icon\"></div>\r\n      <p class=\"error-message\">{{ error }}</p>\r\n      <div class=\"error-actions\">\r\n        <button @click=\"loadData\" class=\"retry-btn\">Retry</button>\r\n        <div v-if=\"isDev\" class=\"dev-info\">\r\n          <small>DEV mode: Trying Yahoo Finance fallback</small>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Main Content -->\r\n    <div v-else-if=\"profileData\" class=\"panel-content\">\r\n      <!-- Header with Key Metrics -->\r\n      <div class=\"metrics-header\">\r\n        <div class=\"metric-card\">\r\n          <div class=\"metric-label\">MFI Signal</div>\r\n          <div class=\"metric-value\" :class=\"`signal-${profileData.mfi.signal.toLowerCase()}`\">\r\n            {{ profileData.mfi.signal }}\r\n          </div>\r\n          <div class=\"metric-detail\">{{ profileData.mfi.latest?.toFixed(2) || 'N/A' }}</div>\r\n        </div>\r\n        \r\n        <div class=\"metric-card\">\r\n          <div class=\"metric-label\">Market Sentiment</div>\r\n          <div class=\"metric-value\" :class=\"`sentiment-${profileData.marketSentiment.toLowerCase()}`\">\r\n            {{ profileData.marketSentiment }}\r\n          </div>\r\n          <div class=\"metric-detail\">\r\n            Buy: {{ (profileData.statistics.buyingRatio * 100).toFixed(1) }}%\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"metric-card\">\r\n          <div class=\"metric-label\">Point of Control</div>\r\n          <div class=\"metric-value\">${{ profileData.pointOfControl.priceLevel.toFixed(2) }}</div>\r\n          <div class=\"metric-detail\">{{ profileData.pointOfControl.percentage.toFixed(1) }}% volume</div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Volume Profile Chart (DOM-based) -->\r\n      <div class=\"volume-profile-chart\">\r\n        <div class=\"chart-header\">\r\n          <h4>Volume Profile ({{ bins }} bins, MFI {{ mfiPeriod }})</h4>\r\n          <div class=\"chart-controls\">\r\n            <select v-model=\"selectedRange\" @change=\"onRangeChange\" class=\"range-selector\">\r\n              <option value=\"3mo\">3 Months</option>\r\n              <option value=\"6mo\">6 Months</option>\r\n              <option value=\"1y\">1 Year</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"chart-container\" :style=\"{ height: totalChartHeight + 'px' }\">\r\n          <!-- Price Scale (Left) -->\r\n          <div class=\"price-scale\">\r\n            <div \r\n              v-for=\"(bin, index) in displayBins\" \r\n              :key=\"index\"\r\n              class=\"price-label\"\r\n              :style=\"{ height: binHeight + 'px' }\"\r\n            >\r\n              ${{ bin.priceLevel.toFixed(2) }}\r\n            </div>\r\n          </div>\r\n          \r\n          <!-- Volume Bars (Center) -->\r\n          <div class=\"volume-bars\">\r\n            <div \r\n              v-for=\"(bin, index) in displayBins\" \r\n              :key=\"index\"\r\n              class=\"volume-bar-row\"\r\n              :style=\"{ height: binHeight + 'px' }\"\r\n            >\r\n              <div \r\n                class=\"volume-bar\"\r\n                :class=\"getBarClass(bin)\"\r\n                :style=\"getBarStyle(bin)\"\r\n                @mouseover=\"showTooltip($event, bin)\"\r\n                @mouseleave=\"hideTooltip\"\r\n              >\r\n                <div class=\"bar-fill\" :style=\"getBarFillStyle(bin)\"></div>\r\n              </div>\r\n              \r\n              <!-- POC Marker -->\r\n              <div v-if=\"bin.priceLevel === profileData.pointOfControl.priceLevel\" class=\"poc-marker\">\r\n                POC\r\n              </div>\r\n              \r\n              <!-- Value Area Markers -->\r\n              <div v-if=\"bin.priceLevel === profileData.valueArea.high\" class=\"va-marker va-high\">\r\n                VAH\r\n              </div>\r\n              <div v-if=\"bin.priceLevel === profileData.valueArea.low\" class=\"va-marker va-low\">\r\n                VAL\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <!-- Volume Scale (Right) -->\r\n          <div class=\"volume-scale\">\r\n            <div \r\n              v-for=\"(bin, index) in displayBins\" \r\n              :key=\"index\"\r\n              class=\"volume-label\"\r\n              :style=\"{ height: binHeight + 'px' }\"\r\n            >\r\n              {{ formatVolume(bin.volume) }}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Trading Signals -->\r\n      <div v-if=\"tradingSignals\" class=\"trading-signals\">\r\n        <div class=\"signals-header\">\r\n          <h4>Trading Analysis</h4>\r\n          <div class=\"signal-badge\" :class=\"`signal-${tradingSignals.signal.toLowerCase()}`\">\r\n            {{ tradingSignals.signal }}\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"signals-content\">\r\n          <div class=\"confidence-bar\">\r\n            <div class=\"confidence-label\">Confidence: {{ (tradingSignals.confidence * 100).toFixed(0) }}%</div>\r\n            <div class=\"confidence-progress\">\r\n              <div \r\n                class=\"confidence-fill\" \r\n                :style=\"{ width: (tradingSignals.confidence * 100) + '%' }\"\r\n              ></div>\r\n            </div>\r\n          </div>\r\n          \r\n          <div v-if=\"tradingSignals.recommendations.length > 0\" class=\"recommendations\">\r\n            <div class=\"recommendation\" v-for=\"(rec, index) in tradingSignals.recommendations\" :key=\"index\">\r\n              {{ rec }}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- No Data State -->\r\n    <div v-else class=\"no-data-state\">\r\n      <div class=\"no-data-icon\"></div>\r\n      <p>No MFI Volume Profile data available for {{ symbol }}</p>\r\n      <div v-if=\"isDev\" class=\"dev-fallback\">\r\n        <button @click=\"loadData\" class=\"retry-btn\">Try Yahoo Finance (DEV)</button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Tooltip -->\r\n    <div v-if=\"tooltip.visible\" class=\"tooltip\" :style=\"tooltip.style\">\r\n      <div class=\"tooltip-content\">\r\n        <div><strong>Price Range:</strong> ${{ tooltip.data.minPrice.toFixed(2) }} - ${{ tooltip.data.maxPrice.toFixed(2) }}</div>\r\n        <div><strong>Volume:</strong> {{ formatVolume(tooltip.data.volume) }}</div>\r\n        <div><strong>Avg MFI:</strong> {{ tooltip.data.mfiAverage.toFixed(1) }}</div>\r\n        <div><strong>Buying:</strong> {{ formatVolume(tooltip.data.positiveVolume) }}</div>\r\n        <div><strong>Selling:</strong> {{ formatVolume(tooltip.data.negativeVolume) }}</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ohlcvApi } from '@/services/ohlcvApi.js';\r\nimport { calculateMFIVolumeProfile, getMFIVolumeProfileSignals } from '@/utils/mfiVolumeProfile.js';\r\n\r\nexport default {\r\n  name: 'MFIVolumeProfilePanel',\r\n  props: {\r\n    symbol: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    exchange: {\r\n      type: String,\r\n      default: 'NASDAQ'\r\n    },\r\n    priority: {\r\n      type: Number,\r\n      default: 4\r\n    },\r\n    bins: {\r\n      type: Number,\r\n      default: 50\r\n    },\r\n    mfiPeriod: {\r\n      type: Number,\r\n      default: 14\r\n    },\r\n    lookback: {\r\n      type: Number,\r\n      default: 200\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      error: null,\r\n      profileData: null,\r\n      tradingSignals: null,\r\n      currentPrice: null,\r\n      selectedRange: '3mo',\r\n      binHeight: 12, // Height per bin in pixels\r\n      tooltip: {\r\n        visible: false,\r\n        data: null,\r\n        style: {}\r\n      }\r\n    };\r\n  },\r\n  computed: {\r\n    isDev() {\r\n      return import.meta.env.DEV || new URLSearchParams(window.location.search).has('debug');\r\n    },\r\n    displayBins() {\r\n      if (!this.profileData || !this.profileData.volumeProfile) {\r\n        return [];\r\n      }\r\n      // Sort bins by price (high to low) for display\r\n      return [...this.profileData.volumeProfile].sort((a, b) => b.priceLevel - a.priceLevel);\r\n    },\r\n    totalChartHeight() {\r\n      // bin * bin\r\n      const binCount = this.displayBins.length;\r\n      return Math.max(binCount * this.binHeight, 300); // 300px\r\n    }\r\n  },\r\n  mounted() {\r\n    this.loadData();\r\n  },\r\n  watch: {\r\n    symbol() {\r\n      this.loadData();\r\n    }\r\n  },\r\n  methods: {\r\n    async loadData() {\r\n      if (this.loading) return;\r\n      \r\n      this.loading = true;\r\n      this.error = null;\r\n      this.profileData = null;\r\n      this.tradingSignals = null;\r\n      \r\n      try {\r\n        console.log(` Loading MFI Volume Profile for ${this.symbol}...`);\r\n        \r\n        // Step 1: Get OHLCV data using the new API service\r\n        const ohlcvData = await ohlcvApi.getOhlcv(this.symbol, '1d', this.selectedRange);\r\n        \r\n        if (!ohlcvData) {\r\n          throw new Error(`No OHLCV data available for ${this.symbol}`);\r\n        }\r\n        \r\n        console.log(` OHLCV data loaded: ${ohlcvData.timestamps?.length || 0} points`);\r\n        \r\n        // Step 2: Calculate MFI Volume Profile\r\n        this.profileData = calculateMFIVolumeProfile(ohlcvData, this.bins, this.mfiPeriod);\r\n        \r\n        // Step 3: Get current price for trading signals\r\n        this.currentPrice = this.getCurrentPrice(ohlcvData);\r\n        \r\n        // Step 4: Generate trading signals\r\n        if (this.currentPrice) {\r\n          this.tradingSignals = getMFIVolumeProfileSignals(this.profileData, this.currentPrice);\r\n        }\r\n        \r\n        console.log(` MFI Volume Profile loaded successfully for ${this.symbol}`);\r\n        \r\n      } catch (error) {\r\n        console.error(` MFI Volume Profile error for ${this.symbol}:`, error);\r\n        this.error = this.getErrorMessage(error);\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n    \r\n    getCurrentPrice(ohlcvData) {\r\n      // Get the latest valid close price\r\n      for (let i = ohlcvData.close.length - 1; i >= 0; i--) {\r\n        if (ohlcvData.close[i] != null && !isNaN(ohlcvData.close[i])) {\r\n          return ohlcvData.close[i];\r\n        }\r\n      }\r\n      return null;\r\n    },\r\n    \r\n    getErrorMessage(error) {\r\n      if (error.message.includes('CORS')) {\r\n        return 'Data source blocked by browser security. Try disabling ad blockers or privacy extensions.';\r\n      } else if (error.message.includes('404') || error.message.includes('not found')) {\r\n        return `No OHLCV data available for ${this.symbol}. This symbol may not be supported yet.`;\r\n      } else if (error.message.includes('Insufficient')) {\r\n        return 'Insufficient historical data for MFI Volume Profile calculation.';\r\n      } else {\r\n        return `Failed to load data: ${error.message}`;\r\n      }\r\n    },\r\n    \r\n    onRangeChange() {\r\n      console.log(` Range changed to ${this.selectedRange} for ${this.symbol}`);\r\n      this.loadData();\r\n    },\r\n    \r\n    getBarClass(bin) {\r\n      const classes = ['volume-bar'];\r\n      \r\n      // Add sentiment class based on MFI\r\n      if (bin.positiveVolume > bin.negativeVolume) {\r\n        classes.push('bullish');\r\n      } else if (bin.negativeVolume > bin.positiveVolume) {\r\n        classes.push('bearish');\r\n      } else {\r\n        classes.push('neutral');\r\n      }\r\n      \r\n      // Add POC class\r\n      if (this.profileData && bin.priceLevel === this.profileData.pointOfControl.priceLevel) {\r\n        classes.push('poc');\r\n      }\r\n      \r\n      return classes.join(' ');\r\n    },\r\n    \r\n    getBarStyle(bin) {\r\n      return {\r\n        position: 'relative',\r\n        width: '100%',\r\n        height: '100%',\r\n        display: 'flex',\r\n        alignItems: 'center'\r\n      };\r\n    },\r\n    \r\n    getBarFillStyle(bin) {\r\n      if (!this.profileData) return { width: '0%' };\r\n      \r\n      const maxVolume = this.profileData.statistics.maxVolumeInBin;\r\n      const widthPercent = maxVolume > 0 ? (bin.volume / maxVolume) * 100 : 0;\r\n      \r\n      // Color based on MFI sentiment\r\n      let backgroundColor = '#9E9E9E'; // Neutral gray\r\n      if (bin.positiveVolume > bin.negativeVolume) {\r\n        backgroundColor = '#4CAF50'; // Green for buying pressure\r\n      } else if (bin.negativeVolume > bin.positiveVolume) {\r\n        backgroundColor = '#F44336'; // Red for selling pressure\r\n      }\r\n      \r\n      return {\r\n        width: `${Math.max(widthPercent, 1)}%`, // Minimum 1% for visibility\r\n        height: '80%',\r\n        backgroundColor: backgroundColor,\r\n        borderRadius: '2px',\r\n        transition: 'all 0.2s ease'\r\n      };\r\n    },\r\n    \r\n    formatVolume(volume) {\r\n      if (volume >= 1000000000) {\r\n        return (volume / 1000000000).toFixed(1) + 'B';\r\n      } else if (volume >= 1000000) {\r\n        return (volume / 1000000).toFixed(1) + 'M';\r\n      } else if (volume >= 1000) {\r\n        return (volume / 1000).toFixed(1) + 'K';\r\n      } else {\r\n        return volume.toFixed(0);\r\n      }\r\n    },\r\n    \r\n    showTooltip(event, bin) {\r\n      this.tooltip = {\r\n        visible: true,\r\n        data: bin,\r\n        style: {\r\n          position: 'fixed',\r\n          left: event.clientX + 10 + 'px',\r\n          top: event.clientY - 10 + 'px',\r\n          zIndex: 1000\r\n        }\r\n      };\r\n    },\r\n    \r\n    hideTooltip() {\r\n      this.tooltip.visible = false;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.mfi-volume-profile-panel {\r\n  width: 100%;\r\n  /*  height: 100%  */\r\n  display: flex;\r\n  flex-direction: column;\r\n  background: #ffffff;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n}\r\n\r\n/* Loading State */\r\n.loading-state {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 400px;\r\n  color: #666;\r\n}\r\n\r\n.loading-spinner {\r\n  width: 40px;\r\n  height: 40px;\r\n  border: 3px solid #f3f3f3;\r\n  border-top: 3px solid #007bff;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n/* Error State */\r\n.error-state {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 400px;\r\n  color: #666;\r\n  padding: 2rem;\r\n  text-align: center;\r\n}\r\n\r\n.error-icon {\r\n  font-size: 2rem;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.error-message {\r\n  margin-bottom: 1rem;\r\n  color: #d32f2f;\r\n  max-width: 400px;\r\n}\r\n\r\n.error-actions {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.retry-btn {\r\n  padding: 0.5rem 1rem;\r\n  background: #007bff;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.retry-btn:hover {\r\n  background: #0056b3;\r\n}\r\n\r\n.dev-info {\r\n  color: #6c757d;\r\n  font-style: italic;\r\n}\r\n\r\n/* No Data State */\r\n.no-data-state {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 400px;\r\n  color: #666;\r\n  text-align: center;\r\n}\r\n\r\n.no-data-icon {\r\n  font-size: 2rem;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.dev-fallback {\r\n  margin-top: 1rem;\r\n}\r\n\r\n/* Panel Content */\r\n.panel-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  /*  height: 100%  */\r\n  padding: 1rem;\r\n}\r\n\r\n/* Metrics Header */\r\n.metrics-header {\r\n  display: grid;\r\n  grid-template-columns: repeat(3, 1fr);\r\n  gap: 1rem;\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.metric-card {\r\n  background: #f8f9fa;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 6px;\r\n  padding: 0.75rem;\r\n  text-align: center;\r\n}\r\n\r\n.metric-label {\r\n  font-size: 0.8rem;\r\n  color: #6c757d;\r\n  margin-bottom: 0.25rem;\r\n}\r\n\r\n.metric-value {\r\n  font-size: 1rem;\r\n  font-weight: 600;\r\n  margin-bottom: 0.25rem;\r\n}\r\n\r\n.metric-detail {\r\n  font-size: 0.75rem;\r\n  color: #6c757d;\r\n}\r\n\r\n/* Signal Colors */\r\n.signal-overbought, .signal-sell {\r\n  color: #d32f2f;\r\n}\r\n\r\n.signal-oversold, .signal-buy {\r\n  color: #388e3c;\r\n}\r\n\r\n.signal-neutral, .signal-hold {\r\n  color: #f57c00;\r\n}\r\n\r\n.sentiment-bullish {\r\n  color: #388e3c;\r\n}\r\n\r\n.sentiment-bearish {\r\n  color: #d32f2f;\r\n}\r\n\r\n.sentiment-neutral {\r\n  color: #f57c00;\r\n}\r\n\r\n/* Volume Profile Chart */\r\n.volume-profile-chart {\r\n  /*  flex: 1 */\r\n  display: flex;\r\n  flex-direction: column;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 6px;\r\n  overflow: hidden;\r\n  margin-bottom: 1rem;\r\n  /*  */\r\n  flex-shrink: 0;\r\n}\r\n\r\n.chart-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 0.75rem 1rem;\r\n  background: #f8f9fa;\r\n  border-bottom: 1px solid #e9ecef;\r\n}\r\n\r\n.chart-header h4 {\r\n  margin: 0;\r\n  font-size: 0.9rem;\r\n  color: #495057;\r\n}\r\n\r\n.range-selector {\r\n  padding: 0.25rem 0.5rem;\r\n  border: 1px solid #ced4da;\r\n  border-radius: 4px;\r\n  font-size: 0.8rem;\r\n  background: white;\r\n}\r\n\r\n.chart-container {\r\n  /*  flex: 1 */\r\n  display: flex;\r\n  min-height: 300px;\r\n  /*  max-height  overflow-y */\r\n  /*  */\r\n  flex-shrink: 0;\r\n}\r\n\r\n.price-scale {\r\n  width: 80px;\r\n  background: #f8f9fa;\r\n  border-right: 1px solid #e9ecef;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.price-label {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-end;\r\n  padding-right: 0.5rem;\r\n  font-size: 0.7rem;\r\n  color: #6c757d;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.volume-bars {\r\n  flex: 1;\r\n  position: relative;\r\n}\r\n\r\n.volume-bar-row {\r\n  position: relative;\r\n  border-bottom: 1px solid #f0f0f0;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.volume-bar {\r\n  width: 100%;\r\n  height: 100%;\r\n  cursor: pointer;\r\n  position: relative;\r\n}\r\n\r\n.volume-bar:hover .bar-fill {\r\n  opacity: 0.8;\r\n  transform: scaleY(1.1);\r\n}\r\n\r\n.bar-fill {\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n/* POC and Value Area Markers */\r\n.poc-marker {\r\n  position: absolute;\r\n  right: 5px;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  background: #2196F3;\r\n  color: white;\r\n  padding: 2px 4px;\r\n  border-radius: 2px;\r\n  font-size: 0.6rem;\r\n  font-weight: bold;\r\n  z-index: 10;\r\n}\r\n\r\n.va-marker {\r\n  position: absolute;\r\n  right: 5px;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  background: #FF9800;\r\n  color: white;\r\n  padding: 2px 4px;\r\n  border-radius: 2px;\r\n  font-size: 0.6rem;\r\n  font-weight: bold;\r\n  z-index: 10;\r\n}\r\n\r\n.volume-scale {\r\n  width: 80px;\r\n  background: #f8f9fa;\r\n  border-left: 1px solid #e9ecef;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.volume-label {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-start;\r\n  padding-left: 0.5rem;\r\n  font-size: 0.7rem;\r\n  color: #6c757d;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n/* Trading Signals */\r\n.trading-signals {\r\n  background: #f8f9fa;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 6px;\r\n  padding: 1rem;\r\n}\r\n\r\n.signals-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.signals-header h4 {\r\n  margin: 0;\r\n  font-size: 1rem;\r\n  color: #495057;\r\n}\r\n\r\n.signal-badge {\r\n  padding: 0.25rem 0.5rem;\r\n  border-radius: 4px;\r\n  font-size: 0.8rem;\r\n  font-weight: 600;\r\n}\r\n\r\n.signal-badge.signal-buy {\r\n  background: #d4edda;\r\n  color: #155724;\r\n}\r\n\r\n.signal-badge.signal-sell {\r\n  background: #f8d7da;\r\n  color: #721c24;\r\n}\r\n\r\n.signal-badge.signal-hold, .signal-badge.signal-neutral {\r\n  background: #fff3cd;\r\n  color: #856404;\r\n}\r\n\r\n/* Confidence Bar */\r\n.confidence-bar {\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.confidence-label {\r\n  font-size: 0.85rem;\r\n  color: #495057;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.confidence-progress {\r\n  height: 6px;\r\n  background: #e9ecef;\r\n  border-radius: 3px;\r\n  overflow: hidden;\r\n}\r\n\r\n.confidence-fill {\r\n  height: 100%;\r\n  background: linear-gradient(90deg, #dc3545, #ffc107, #28a745);\r\n  transition: width 0.3s ease;\r\n}\r\n\r\n/* Recommendations */\r\n.recommendations {\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.recommendation {\r\n  font-size: 0.85rem;\r\n  color: #495057;\r\n  margin-bottom: 0.5rem;\r\n  padding: 0.5rem;\r\n  background: #ffffff;\r\n  border-left: 3px solid #007bff;\r\n  border-radius: 0 4px 4px 0;\r\n}\r\n\r\n/* Tooltip */\r\n.tooltip {\r\n  background: rgba(0, 0, 0, 0.9);\r\n  color: white;\r\n  padding: 0.5rem;\r\n  border-radius: 4px;\r\n  font-size: 0.8rem;\r\n  pointer-events: none;\r\n  max-width: 200px;\r\n}\r\n\r\n.tooltip-content div {\r\n  margin-bottom: 0.25rem;\r\n}\r\n\r\n.tooltip-content div:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n/* Responsive Design */\r\n@media (max-width: 768px) {\r\n  .metrics-header {\r\n    grid-template-columns: 1fr;\r\n    gap: 0.75rem;\r\n  }\r\n  \r\n  .chart-header {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 0.5rem;\r\n  }\r\n  \r\n  .panel-content {\r\n    padding: 0.75rem;\r\n  }\r\n  \r\n  .chart-container {\r\n    min-height: 250px;\r\n    /*  max-height */\r\n  }\r\n  \r\n  .price-scale, .volume-scale {\r\n    width: 60px;\r\n  }\r\n  \r\n  .price-label, .volume-label {\r\n    font-size: 0.65rem;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .signals-header {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 0.5rem;\r\n  }\r\n  \r\n  .chart-container {\r\n    min-height: 200px;\r\n    /*  max-height */\r\n  }\r\n  \r\n  .price-scale, .volume-scale {\r\n    width: 50px;\r\n  }\r\n  \r\n  .poc-marker, .va-marker {\r\n    font-size: 0.5rem;\r\n    padding: 1px 2px;\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"company-profile-container\">\r\n    <div class=\"company-profile-widget\" :id=\"widgetId\" ref=\"container\">\r\n      <div v-if=\"!loaded && !error\" class=\"profile-loading\">\r\n        <div class=\"loading-spinner\"></div>\r\n        <span>Loading company profile...</span>\r\n      </div>\r\n      \r\n      <div v-if=\"error\" class=\"profile-error\">\r\n        <span> Failed to load company profile</span>\r\n        <button @click=\"retry\" class=\"retry-btn\">Retry</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'TradingViewCompanyProfile',\r\n  props: {\r\n    symbol: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    exchange: {\r\n      type: String,\r\n      default: 'NASDAQ'\r\n    },\r\n    colorTheme: {\r\n      type: String,\r\n      default: 'light'\r\n    },\r\n    isTransparent: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    locale: {\r\n      type: String,\r\n      default: 'en'\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      loaded: false,\r\n      error: false,\r\n      widgetId: `company-profile-${Date.now()}`\r\n    }\r\n  },\r\n  computed: {\r\n    fullSymbol() {\r\n      return `${this.exchange}:${this.symbol}`\r\n    }\r\n  },\r\n  mounted() {\r\n    this.loadCompanyProfile()\r\n  },\r\n  watch: {\r\n    symbol() {\r\n      this.loadCompanyProfile()\r\n    },\r\n    exchange() {\r\n      this.loadCompanyProfile()\r\n    }\r\n  },\r\n  methods: {\r\n    async loadCompanyProfile() {\r\n      this.loaded = false\r\n      this.error = false\r\n\r\n      try {\r\n        await this.$nextTick()\r\n        this.createCompanyProfile()\r\n      } catch (err) {\r\n        console.error('Failed to load company profile:', err)\r\n        this.error = true\r\n      }\r\n    },\r\n\r\n    createCompanyProfile() {\r\n      const container = this.$refs.container\r\n      if (!container) return\r\n\r\n      //  widget\r\n      container.innerHTML = ''\r\n\r\n      //  widget \r\n      const widgetContainer = document.createElement('div')\r\n      widgetContainer.className = 'tradingview-widget-container'\r\n      widgetContainer.style.height = '100%'\r\n      widgetContainer.style.width = '100%'\r\n\r\n      const widgetContent = document.createElement('div')\r\n      widgetContent.className = 'tradingview-widget-container__widget'\r\n\r\n      widgetContainer.appendChild(widgetContent)\r\n      container.appendChild(widgetContainer)\r\n\r\n      // \r\n      const config = {\r\n        \"symbol\": this.fullSymbol,\r\n        \"colorTheme\": this.colorTheme,\r\n        \"isTransparent\": this.isTransparent,\r\n        \"locale\": this.locale,\r\n        \"width\": \"100%\",\r\n        \"height\": \"100%\"\r\n      }\r\n\r\n      console.log(` Creating Company Profile widget for ${this.fullSymbol}`, config)\r\n\r\n      // \r\n      const script = document.createElement('script')\r\n      script.type = 'text/javascript'\r\n      script.src = 'https://s3.tradingview.com/external-embedding/embed-widget-symbol-profile.js'\r\n      script.async = true\r\n      script.innerHTML = JSON.stringify(config)\r\n\r\n      // \r\n      script.onload = () => {\r\n        this.loaded = true\r\n        console.log('TradingView Company Profile loaded successfully')\r\n      }\r\n\r\n      script.onerror = () => {\r\n        this.error = true\r\n        console.error('TradingView Company Profile failed to load')\r\n      }\r\n\r\n      //  widget \r\n      widgetContent.appendChild(script)\r\n\r\n      // \r\n      setTimeout(() => {\r\n        if (!this.loaded && !this.error) {\r\n          this.loaded = true\r\n        }\r\n      }, 8000)\r\n    },\r\n\r\n    async retry() {\r\n      await this.loadCompanyProfile()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.company-profile-container {\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n\r\n.company-profile-widget {\r\n  height: 100%;\r\n  width: 100%;\r\n  position: relative;\r\n}\r\n\r\n/* Loading  */\r\n.profile-loading {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 0.5rem;\r\n  height: 100%;\r\n  color: #6c757d;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.loading-spinner {\r\n  width: 20px;\r\n  height: 20px;\r\n  border: 2px solid #e9ecef;\r\n  border-top: 2px solid #007bff;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n/* Error  */\r\n.profile-error {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 1rem;\r\n  height: 100%;\r\n  background: #f8d7da;\r\n  border: 1px solid #f5c6cb;\r\n  border-radius: 4px;\r\n  color: #721c24;\r\n}\r\n\r\n.retry-btn {\r\n  padding: 0.25rem 0.75rem;\r\n  background: #dc3545;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.8rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.retry-btn:hover {\r\n  background: #c82333;\r\n}\r\n\r\n/* TradingView Widget  -  Company Profile */\r\n:global(.company-profile-widget .tv-embed-widget-wrapper) {\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n  min-height: 400px !important;\r\n  max-height: 600px !important;\r\n  overflow: visible !important;\r\n}\r\n\r\n:global(.company-profile-widget .tradingview-widget-container) {\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n  min-height: 400px !important;\r\n  max-height: 600px !important;\r\n}\r\n\r\n:global(.company-profile-widget .tradingview-widget-container__widget) {\r\n  width: 100% !important;\r\n  height: calc(100% - 32px) !important;\r\n  min-height: 370px !important;\r\n  max-height: 570px !important;\r\n}\r\n\r\n:global(.company-profile-widget .tradingview-widget-container iframe) {\r\n  width: 100% !important;\r\n  height: 400px !important;\r\n  min-height: 400px !important;\r\n  max-height: 600px !important;\r\n}\r\n</style>","<template>\r\n  <div class=\"fundamental-data-container\">\r\n    <div class=\"fundamental-data-widget\" :id=\"widgetId\" ref=\"container\">\r\n      <div v-if=\"!loaded && !error\" class=\"fundamental-loading\">\r\n        <div class=\"loading-spinner\"></div>\r\n        <span>Loading fundamental data...</span>\r\n      </div>\r\n      \r\n      <div v-if=\"error\" class=\"fundamental-error\">\r\n        <span> Failed to load fundamental data</span>\r\n        <button @click=\"retry\" class=\"retry-btn\">Retry</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'TradingViewFundamentalData',\r\n  props: {\r\n    symbol: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    exchange: {\r\n      type: String,\r\n      default: 'NASDAQ'\r\n    },\r\n    colorTheme: {\r\n      type: String,\r\n      default: 'dark'\r\n    },\r\n    displayMode: {\r\n      type: String,\r\n      default: 'regular'\r\n    },\r\n    isTransparent: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    locale: {\r\n      type: String,\r\n      default: 'zh_TW'\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      loaded: false,\r\n      error: false,\r\n      widgetId: `fundamental-data-${Date.now()}`\r\n    }\r\n  },\r\n  computed: {\r\n    fullSymbol() {\r\n      return `${this.exchange}:${this.symbol}`\r\n    }\r\n  },\r\n  mounted() {\r\n    this.loadFundamentalData()\r\n  },\r\n  watch: {\r\n    symbol() {\r\n      this.loadFundamentalData()\r\n    },\r\n    exchange() {\r\n      this.loadFundamentalData()\r\n    }\r\n  },\r\n  methods: {\r\n    async loadFundamentalData() {\r\n      this.loaded = false\r\n      this.error = false\r\n\r\n      try {\r\n        await this.$nextTick()\r\n        this.createFundamentalData()\r\n      } catch (err) {\r\n        console.error('Failed to load fundamental data:', err)\r\n        this.error = true\r\n      }\r\n    },\r\n\r\n    createFundamentalData() {\r\n      const container = this.$refs.container\r\n      if (!container) return\r\n\r\n      //  widget\r\n      container.innerHTML = ''\r\n\r\n      //  widget \r\n      const widgetContainer = document.createElement('div')\r\n      widgetContainer.className = 'tradingview-widget-container'\r\n      widgetContainer.style.height = '100%'\r\n      widgetContainer.style.width = '100%'\r\n\r\n      const widgetContent = document.createElement('div')\r\n      widgetContent.className = 'tradingview-widget-container__widget'\r\n\r\n      widgetContainer.appendChild(widgetContent)\r\n      container.appendChild(widgetContainer)\r\n\r\n      // \r\n      const config = {\r\n        \"symbol\": this.fullSymbol,\r\n        \"colorTheme\": \"light\",\r\n        \"displayMode\": \"regular\",\r\n        \"isTransparent\": true,\r\n        \"locale\": \"zh_TW\",\r\n        \"width\": \"100%\",\r\n        \"height\": \"100%\"\r\n      }\r\n\r\n      // \r\n      const script = document.createElement('script')\r\n      script.type = 'text/javascript'\r\n      script.src = 'https://s3.tradingview.com/external-embedding/embed-widget-financials.js'\r\n      script.async = true\r\n      script.innerHTML = JSON.stringify(config)\r\n\r\n      // \r\n      script.onload = () => {\r\n        this.loaded = true\r\n        console.log('TradingView Fundamental Data loaded successfully')\r\n      }\r\n\r\n      script.onerror = () => {\r\n        this.error = true\r\n        console.error('TradingView Fundamental Data failed to load')\r\n      }\r\n\r\n      //  widget \r\n      widgetContent.appendChild(script)\r\n\r\n      // \r\n      setTimeout(() => {\r\n        if (!this.loaded && !this.error) {\r\n          this.loaded = true\r\n        }\r\n      }, 8000)\r\n    },\r\n\r\n    async retry() {\r\n      await this.loadFundamentalData()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.fundamental-data-container {\r\n  height: 100%;\r\n  width: 100%;\r\n  min-height: 950px;\r\n  overflow: hidden;\r\n}\r\n\r\n.fundamental-data-widget {\r\n  height: 100%;\r\n  width: 100%;\r\n  position: relative;\r\n  min-height: 950px;\r\n  overflow: hidden;\r\n}\r\n\r\n/* Loading  */\r\n.fundamental-loading {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 0.5rem;\r\n  height: 100%;\r\n  color: #6c757d;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.loading-spinner {\r\n  width: 20px;\r\n  height: 20px;\r\n  border: 2px solid #e9ecef;\r\n  border-top: 2px solid #007bff;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n/* Error  */\r\n.fundamental-error {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 1rem;\r\n  height: 100%;\r\n  background: #f8d7da;\r\n  border: 1px solid #f5c6cb;\r\n  border-radius: 4px;\r\n  color: #721c24;\r\n}\r\n\r\n.retry-btn {\r\n  padding: 0.25rem 0.75rem;\r\n  background: #dc3545;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.8rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.retry-btn:hover {\r\n  background: #c82333;\r\n}\r\n\r\n/* TradingView Widget  -  Fundamental Data */\r\n:global(.fundamental-data-widget .tradingview-widget-container) {\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n  min-height: 950px !important;\r\n  max-height: none !important;\r\n}\r\n\r\n:global(.fundamental-data-widget .tradingview-widget-container__widget) {\r\n  width: 100% !important;\r\n  height: calc(100% - 32px) !important;\r\n  min-height: 910px !important;\r\n  max-height: none !important;\r\n}\r\n\r\n:global(.fundamental-data-widget .tradingview-widget-container iframe) {\r\n  width: 100% !important;\r\n  height: 950px !important;\r\n  min-height: 600px !important;\r\n  max-height: none !important;\r\n}\r\n\r\n/* Simplified TradingView overrides -  Fundamental Data */\r\n:global(.fundamental-data-widget .tv-embed-widget-wrapper) {\r\n  height: 950px !important;\r\n  min-height: 950px !important;\r\n  overflow: auto !important;\r\n}\r\n\r\n:global(.fundamental-data-widget .tv-feed-widget) {\r\n  height: 910px !important;\r\n  min-height: 910px !important;\r\n  overflow: auto !important;\r\n}\r\n\r\n:global(.fundamental-data-widget .tv-feed-widget__body) {\r\n  height: auto !important;\r\n  min-height: 850px !important;\r\n  overflow: auto !important;\r\n}\r\n</style>","<template>\r\n  <div class=\"stock-news\">\r\n    <div v-if=\"loading\" class=\"loading-state\">\r\n      <div class=\"loading-spinner\"></div>\r\n      <span>Loading latest news for {{ symbol }}...</span>\r\n    </div>\r\n    \r\n    <div v-else-if=\"error\" class=\"error-state\">\r\n      <span class=\"error-icon\"></span>\r\n      <span>{{ error }}</span>\r\n    </div>\r\n    \r\n    <div v-else-if=\"news.length === 0\" class=\"no-news-state\">\r\n      <span class=\"info-icon\"></span>\r\n      <span>No recent news available for {{ symbol }}</span>\r\n    </div>\r\n    \r\n    <div v-else class=\"news-grid\">\r\n      <article \r\n        v-for=\"(article, index) in news\" \r\n        :key=\"index\"\r\n        class=\"news-item\"\r\n        @click=\"openArticle(article.link)\"\r\n      >\r\n        <div class=\"news-header\">\r\n          <h4 class=\"news-title\">{{ article.title }}</h4>\r\n          <span class=\"news-date\">{{ formatDate(article.providerPublishTime) }}</span>\r\n        </div>\r\n        \r\n        <div class=\"news-content\">\r\n          <div class=\"news-text\">\r\n            <p class=\"news-summary\">{{ truncateText(article.summary, 150) }}</p>\r\n            <div class=\"news-meta\">\r\n              <span class=\"news-publisher\">{{ article.publisher }}</span>\r\n              <span v-if=\"article.type\" class=\"news-type\">{{ article.type }}</span>\r\n            </div>\r\n          </div>\r\n          \r\n          <div v-if=\"article.thumbnail\" class=\"news-thumbnail\">\r\n            <img \r\n              :src=\"article.thumbnail.resolutions[0]?.url\" \r\n              :alt=\"article.title\"\r\n              @error=\"handleImageError\"\r\n            />\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"news-footer\">\r\n          <span class=\"read-more\">Read more </span>\r\n        </div>\r\n      </article>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'StockNews',\r\n  props: {\r\n    symbol: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    newsCount: {\r\n      type: Number,\r\n      default: 9\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      loading: true,\r\n      error: null,\r\n      news: []\r\n    }\r\n  },\r\n  mounted() {\r\n    this.loadNews()\r\n  },\r\n  watch: {\r\n    symbol() {\r\n      this.loadNews()\r\n    }\r\n  },\r\n  methods: {\r\n    async loadNews() {\r\n      this.loading = true;\r\n      this.error = null;\r\n      this.news = [];\r\n      \r\n      try {\r\n        console.log(`Loading news for ${this.symbol}...`);\r\n        \r\n        //  Yahoo Finance API \r\n        const response = await this.fetchYahooNews(this.symbol);\r\n        \r\n        if (response && response.length > 0) {\r\n          this.news = response.slice(0, this.newsCount);\r\n          console.log(`Loaded ${this.news.length} news articles for ${this.symbol}`);\r\n        } else {\r\n          this.news = [];\r\n        }\r\n        \r\n      } catch (error) {\r\n        console.error(`Failed to load news for ${this.symbol}:`, error);\r\n        this.error = error.message;\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n    \r\n    async fetchYahooNews(symbol) {\r\n      //  CORS \r\n      const corsProxies = [\r\n        'https://api.allorigins.win/raw?url=',\r\n        'https://corsproxy.io/?'\r\n      ];\r\n      \r\n      for (const proxy of corsProxies) {\r\n        try {\r\n          const targetUrl = `https://query1.finance.yahoo.com/v1/finance/search?q=${symbol}&lang=en-US&region=US&quotesCount=1&newsCount=${this.newsCount}&enableFuzzyQuery=false&quotesQueryId=tss_match_phrase_query&multiQuoteQueryId=multi_quote_single_token_query&newsQueryId=news_cie_vespa&enableCb=true&enableNavLinks=true&enableEnhancedTrivialQuery=true`;\r\n          const url = `${proxy}${encodeURIComponent(targetUrl)}`;\r\n          \r\n          console.log(`Fetching news from: ${url}`);\r\n          \r\n          const response = await fetch(url);\r\n          \r\n          if (!response.ok) {\r\n            throw new Error(`HTTP error! status: ${response.status}`);\r\n          }\r\n          \r\n          const data = await response.json();\r\n          \r\n          if (data && data.news && data.news.length > 0) {\r\n            return data.news;\r\n          }\r\n          \r\n        } catch (error) {\r\n          console.warn(`Proxy failed for news:`, error.message);\r\n          continue;\r\n        }\r\n      }\r\n      \r\n      throw new Error('All news proxies failed');\r\n    },\r\n    \r\n    formatDate(timestamp) {\r\n      if (!timestamp) return 'Unknown date';\r\n      \r\n      const date = new Date(timestamp * 1000);\r\n      const now = new Date();\r\n      const diffMs = now - date;\r\n      const diffHours = Math.floor(diffMs / (1000 * 60 * 60));\r\n      const diffDays = Math.floor(diffHours / 24);\r\n      \r\n      if (diffHours < 1) {\r\n        const diffMinutes = Math.floor(diffMs / (1000 * 60));\r\n        return `${diffMinutes}m ago`;\r\n      } else if (diffHours < 24) {\r\n        return `${diffHours}h ago`;\r\n      } else if (diffDays < 7) {\r\n        return `${diffDays}d ago`;\r\n      } else {\r\n        return date.toLocaleDateString('en-US', { \r\n          month: 'short', \r\n          day: 'numeric',\r\n          year: date.getFullYear() !== now.getFullYear() ? 'numeric' : undefined\r\n        });\r\n      }\r\n    },\r\n    \r\n    truncateText(text, maxLength) {\r\n      if (!text) return '';\r\n      if (text.length <= maxLength) return text;\r\n      return text.substring(0, maxLength).trim() + '...';\r\n    },\r\n    \r\n    openArticle(link) {\r\n      if (link) {\r\n        window.open(link, '_blank', 'noopener,noreferrer');\r\n      }\r\n    },\r\n    \r\n    handleImageError(event) {\r\n      event.target.style.display = 'none';\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.stock-news {\r\n  min-height: 200px;\r\n}\r\n\r\n.loading-state, .error-state, .no-news-state {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 0.75rem;\r\n  color: #6c757d;\r\n  font-size: 0.9rem;\r\n  padding: 3rem;\r\n  text-align: center;\r\n}\r\n\r\n.loading-spinner {\r\n  width: 20px;\r\n  height: 20px;\r\n  border: 2px solid #e9ecef;\r\n  border-top: 2px solid #007bff;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n.error-state {\r\n  color: #dc3545;\r\n}\r\n\r\n.error-icon, .info-icon {\r\n  font-size: 1.1rem;\r\n}\r\n\r\n.news-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));\r\n  gap: 1rem;\r\n  padding: 0.75rem;\r\n}\r\n\r\n.news-item {\r\n  background: white;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 6px;\r\n  padding: 1rem;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n  box-shadow: 0 1px 3px rgba(0,0,0,0.05);\r\n}\r\n\r\n.news-item:hover {\r\n  border-color: #007bff;\r\n  box-shadow: 0 2px 8px rgba(0,123,255,0.15);\r\n  transform: translateY(-1px);\r\n}\r\n\r\n.news-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: flex-start;\r\n  gap: 0.75rem;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.news-title {\r\n  font-size: 0.9rem;\r\n  font-weight: 600;\r\n  color: #2c3e50;\r\n  margin: 0;\r\n  line-height: 1.3;\r\n  flex: 1;\r\n}\r\n\r\n.news-date {\r\n  font-size: 0.75rem;\r\n  color: #6c757d;\r\n  white-space: nowrap;\r\n  font-weight: 500;\r\n}\r\n\r\n.news-content {\r\n  display: flex;\r\n  gap: 0.75rem;\r\n  margin-bottom: 0.75rem;\r\n}\r\n\r\n.news-text {\r\n  flex: 1;\r\n}\r\n\r\n.news-summary {\r\n  font-size: 0.8rem;\r\n  color: #495057;\r\n  line-height: 1.4;\r\n  margin: 0 0 0.5rem 0;\r\n}\r\n\r\n.news-meta {\r\n  display: flex;\r\n  gap: 0.75rem;\r\n  align-items: center;\r\n}\r\n\r\n.news-publisher {\r\n  font-size: 0.75rem;\r\n  color: #007bff;\r\n  font-weight: 600;\r\n}\r\n\r\n.news-type {\r\n  font-size: 0.7rem;\r\n  color: #6c757d;\r\n  background: #f8f9fa;\r\n  padding: 0.2rem 0.4rem;\r\n  border-radius: 3px;\r\n  text-transform: uppercase;\r\n  font-weight: 500;\r\n}\r\n\r\n.news-thumbnail {\r\n  flex-shrink: 0;\r\n  width: 70px;\r\n  height: 50px;\r\n  border-radius: 4px;\r\n  overflow: hidden;\r\n  background: #f8f9fa;\r\n}\r\n\r\n.news-thumbnail img {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n}\r\n\r\n.news-footer {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  padding-top: 0.5rem;\r\n  border-top: 1px solid #f0f0f0;\r\n}\r\n\r\n.read-more {\r\n  font-size: 0.8rem;\r\n  color: #007bff;\r\n  font-weight: 600;\r\n  transition: color 0.2s;\r\n}\r\n\r\n.news-item:hover .read-more {\r\n  color: #0056b3;\r\n}\r\n\r\n/*  */\r\n@media (max-width: 768px) {\r\n  .news-grid {\r\n    grid-template-columns: 1fr;\r\n    gap: 1rem;\r\n    padding: 0.5rem;\r\n  }\r\n  \r\n  .news-item {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .news-header {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 0.5rem;\r\n  }\r\n  \r\n  .news-content {\r\n    flex-direction: column;\r\n    gap: 0.75rem;\r\n  }\r\n  \r\n  .news-thumbnail {\r\n    width: 100%;\r\n    height: 120px;\r\n  }\r\n  \r\n  .news-title {\r\n    font-size: 0.95rem;\r\n  }\r\n  \r\n  .news-summary {\r\n    font-size: 0.85rem;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .news-grid {\r\n    padding: 0.25rem;\r\n  }\r\n  \r\n  .news-item {\r\n    padding: 0.75rem;\r\n  }\r\n  \r\n  .news-title {\r\n    font-size: 0.9rem;\r\n  }\r\n  \r\n  .news-summary {\r\n    font-size: 0.8rem;\r\n  }\r\n  \r\n  .news-meta {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 0.5rem;\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"stock-detail-skeleton\">\r\n    <!-- Breadcrumb Skeleton -->\r\n    <div class=\"skeleton-breadcrumb\">\r\n      <div class=\"skeleton-breadcrumb-link\"></div>\r\n      <div class=\"skeleton-breadcrumb-separator\"></div>\r\n      <div class=\"skeleton-breadcrumb-current\"></div>\r\n    </div>\r\n\r\n    <!-- Stock Header Skeleton -->\r\n    <div class=\"skeleton-stock-header\">\r\n      <div class=\"skeleton-header-info\">\r\n        <div class=\"skeleton-symbol-info\">\r\n          <div class=\"skeleton-symbol\"></div>\r\n          <div class=\"skeleton-tags\">\r\n            <div class=\"skeleton-tag\"></div>\r\n            <div class=\"skeleton-tag\"></div>\r\n          </div>\r\n        </div>\r\n        <div class=\"skeleton-header-actions\">\r\n          <div class=\"skeleton-back-button\"></div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Widgets Container Skeleton -->\r\n      <div class=\"skeleton-widgets-container\">\r\n        <!-- Symbol Overview (2/3 width) -->\r\n        <div class=\"skeleton-widget-overview\">\r\n          <div class=\"skeleton-widget-header\">\r\n            <div class=\"skeleton-title\"></div>\r\n          </div>\r\n          <div class=\"skeleton-overview-content\"></div>\r\n        </div>\r\n\r\n        <!-- Technical Analysis (1/3 width) -->\r\n        <div class=\"skeleton-widget-technical\">\r\n          <div class=\"skeleton-widget-header\">\r\n            <div class=\"skeleton-title\"></div>\r\n          </div>\r\n          <div class=\"skeleton-technical-content\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Insight Widgets Container Skeleton -->\r\n    <div class=\"skeleton-insight-widgets\">\r\n      <!-- Daily Insight -->\r\n      <div class=\"skeleton-insight-widget\">\r\n        <div class=\"skeleton-widget-header\">\r\n          <div class=\"skeleton-title\"></div>\r\n        </div>\r\n        <div class=\"skeleton-insight-content\"></div>\r\n      </div>\r\n\r\n      <!-- Weekly Insight -->\r\n      <div class=\"skeleton-insight-widget\">\r\n        <div class=\"skeleton-widget-header\">\r\n          <div class=\"skeleton-title\"></div>\r\n        </div>\r\n        <div class=\"skeleton-insight-content\"></div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Technical Indicators Skeleton -->\r\n    <div class=\"skeleton-widget-container\">\r\n      <div class=\"skeleton-widget-header\">\r\n        <div class=\"skeleton-title\"></div>\r\n      </div>\r\n      <div class=\"skeleton-technical-indicators\">\r\n        <div class=\"skeleton-indicator-item\" v-for=\"i in 6\" :key=\"i\">\r\n          <div class=\"skeleton-indicator-name\"></div>\r\n          <div class=\"skeleton-indicator-value\"></div>\r\n          <div class=\"skeleton-indicator-signal\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Performance Monitor Skeleton -->\r\n    <div class=\"skeleton-widget-container\">\r\n      <div class=\"skeleton-widget-header\">\r\n        <div class=\"skeleton-title\"></div>\r\n      </div>\r\n      <div class=\"skeleton-performance-grid\">\r\n        <div class=\"skeleton-performance-item\" v-for=\"i in 4\" :key=\"i\">\r\n          <div class=\"skeleton-performance-label\"></div>\r\n          <div class=\"skeleton-performance-value\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Content Layout Skeleton -->\r\n    <div class=\"skeleton-content-layout\">\r\n      <!-- Stock News Row -->\r\n      <div class=\"skeleton-news-row\">\r\n        <div class=\"skeleton-widget-header\">\r\n          <div class=\"skeleton-title\"></div>\r\n        </div>\r\n        <div class=\"skeleton-news-content\">\r\n          <div class=\"skeleton-news-item\" v-for=\"i in 5\" :key=\"i\">\r\n            <div class=\"skeleton-news-title\"></div>\r\n            <div class=\"skeleton-news-summary\"></div>\r\n            <div class=\"skeleton-news-time\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Fundamental Data Row -->\r\n      <div class=\"skeleton-fundamental-row\">\r\n        <div class=\"skeleton-widget-header\">\r\n          <div class=\"skeleton-title\"></div>\r\n        </div>\r\n        <div class=\"skeleton-fundamental-content\">\r\n          <div class=\"skeleton-fundamental-grid\">\r\n            <div class=\"skeleton-fundamental-item\" v-for=\"i in 8\" :key=\"i\">\r\n              <div class=\"skeleton-fundamental-label\"></div>\r\n              <div class=\"skeleton-fundamental-value\"></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Company Profile Row -->\r\n      <div class=\"skeleton-profile-row\">\r\n        <div class=\"skeleton-widget-header\">\r\n          <div class=\"skeleton-title\"></div>\r\n        </div>\r\n        <div class=\"skeleton-profile-content\">\r\n          <div class=\"skeleton-profile-info\">\r\n            <div class=\"skeleton-profile-item\" v-for=\"i in 6\" :key=\"i\">\r\n              <div class=\"skeleton-profile-label\"></div>\r\n              <div class=\"skeleton-profile-value\"></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'StockDetailSkeleton'\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n<style scoped>\r\n/*  */\r\n@keyframes shimmer {\r\n  0% {\r\n    background-position: -200px 0;\r\n  }\r\n  100% {\r\n    background-position: calc(200px + 100%) 0;\r\n  }\r\n}\r\n\r\n.stock-detail-skeleton {\r\n  background: #f8f9fa;\r\n  padding: 1rem;\r\n  min-height: 100vh;\r\n  overflow-x: hidden;\r\n  max-width: 100%;\r\n}\r\n\r\n/*  */\r\n.skeleton-base {\r\n  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\r\n  background-size: 200px 100%;\r\n  animation: shimmer 1.5s infinite linear;\r\n  border-radius: 4px;\r\n}\r\n\r\n/* Breadcrumb  */\r\n.skeleton-breadcrumb {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 1rem;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.skeleton-breadcrumb-link {\r\n  @extend .skeleton-base;\r\n  width: 120px;\r\n  height: 16px;\r\n}\r\n\r\n.skeleton-breadcrumb-separator {\r\n  color: #6c757d;\r\n  margin: 0 0.25rem;\r\n}\r\n\r\n.skeleton-breadcrumb-current {\r\n  @extend .skeleton-base;\r\n  width: 150px;\r\n  height: 16px;\r\n}\r\n\r\n/* Stock Header  */\r\n.skeleton-stock-header {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 12px;\r\n  padding: 1.5rem;\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.skeleton-header-info {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding-bottom: 1rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.skeleton-symbol-info {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.skeleton-symbol {\r\n  @extend .skeleton-base;\r\n  width: 100px;\r\n  height: 24px;\r\n}\r\n\r\n.skeleton-tags {\r\n  display: flex;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.skeleton-tag {\r\n  @extend .skeleton-base;\r\n  width: 80px;\r\n  height: 20px;\r\n  border-radius: 10px;\r\n}\r\n\r\n.skeleton-header-actions {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.skeleton-back-button {\r\n  @extend .skeleton-base;\r\n  width: 160px;\r\n  height: 36px;\r\n  border-radius: 6px;\r\n}\r\n\r\n/* Widgets Container  */\r\n.skeleton-widgets-container {\r\n  display: grid;\r\n  grid-template-columns: 2fr 1fr;\r\n  gap: 1.5rem;\r\n  margin-bottom: 1.5rem;\r\n  min-height: 450px;\r\n}\r\n\r\n.skeleton-widget-overview,\r\n.skeleton-widget-technical {\r\n  background: #fafafa;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.skeleton-widget-header {\r\n  background: #f8f9fa;\r\n  padding: 0.75rem 1rem;\r\n  border-bottom: 1px solid #e9ecef;\r\n  flex-shrink: 0;\r\n}\r\n\r\n.skeleton-title {\r\n  @extend .skeleton-base;\r\n  width: 120px;\r\n  height: 16px;\r\n}\r\n\r\n.skeleton-overview-content,\r\n.skeleton-technical-content {\r\n  @extend .skeleton-base;\r\n  flex: 1;\r\n  margin: 1rem;\r\n  min-height: 380px;\r\n  border-radius: 8px;\r\n}\r\n\r\n/* Insight Widgets  */\r\n.skeleton-insight-widgets {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 1.5rem;\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.skeleton-insight-widget {\r\n  background: #fafafa;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-height: 600px;\r\n}\r\n\r\n.skeleton-insight-content {\r\n  @extend .skeleton-base;\r\n  flex: 1;\r\n  margin: 1rem;\r\n  min-height: 540px;\r\n  border-radius: 8px;\r\n}\r\n\r\n/* Widget  */\r\n.skeleton-widget-container {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  margin-bottom: 1.5rem;\r\n  overflow: hidden;\r\n  position: relative;\r\n}\r\n\r\n/* Technical Indicators  */\r\n.skeleton-technical-indicators {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\r\n  gap: 1rem;\r\n  min-height: 300px;\r\n}\r\n\r\n.skeleton-indicator-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n  padding: 1rem;\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n}\r\n\r\n.skeleton-indicator-name {\r\n  @extend .skeleton-base;\r\n  width: 120px;\r\n  height: 16px;\r\n}\r\n\r\n.skeleton-indicator-value {\r\n  @extend .skeleton-base;\r\n  width: 80px;\r\n  height: 24px;\r\n}\r\n\r\n.skeleton-indicator-signal {\r\n  @extend .skeleton-base;\r\n  width: 60px;\r\n  height: 20px;\r\n  border-radius: 10px;\r\n}\r\n\r\n/* Performance Monitor  */\r\n.skeleton-performance-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\r\n  gap: 1rem;\r\n  min-height: 120px;\r\n}\r\n\r\n.skeleton-performance-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n  padding: 1rem;\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n}\r\n\r\n.skeleton-performance-label {\r\n  @extend .skeleton-base;\r\n  width: 100px;\r\n  height: 16px;\r\n}\r\n\r\n.skeleton-performance-value {\r\n  @extend .skeleton-base;\r\n  width: 80px;\r\n  height: 24px;\r\n}\r\n\r\n/* Content Layout  */\r\n.skeleton-content-layout {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1.5rem;\r\n}\r\n\r\n.skeleton-news-row,\r\n.skeleton-fundamental-row,\r\n.skeleton-profile-row {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  overflow: hidden;\r\n}\r\n\r\n/* Stock News  */\r\n.skeleton-news-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1rem;\r\n  min-height: 400px;\r\n}\r\n\r\n.skeleton-news-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n  padding: 1rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.skeleton-news-title {\r\n  @extend .skeleton-base;\r\n  width: 80%;\r\n  height: 18px;\r\n}\r\n\r\n.skeleton-news-summary {\r\n  @extend .skeleton-base;\r\n  width: 60%;\r\n  height: 14px;\r\n}\r\n\r\n.skeleton-news-time {\r\n  @extend .skeleton-base;\r\n  width: 100px;\r\n  height: 12px;\r\n}\r\n\r\n/* Fundamental Data  */\r\n.skeleton-fundamental-content {\r\n  min-height: 600px;\r\n}\r\n\r\n.skeleton-fundamental-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\r\n  gap: 1rem;\r\n}\r\n\r\n.skeleton-fundamental-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n  padding: 1rem;\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n}\r\n\r\n.skeleton-fundamental-label {\r\n  @extend .skeleton-base;\r\n  width: 80px;\r\n  height: 14px;\r\n}\r\n\r\n.skeleton-fundamental-value {\r\n  @extend .skeleton-base;\r\n  width: 100px;\r\n  height: 20px;\r\n}\r\n\r\n/* Company Profile  */\r\n.skeleton-profile-content {\r\n  min-height: 400px;\r\n}\r\n\r\n.skeleton-profile-info {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\r\n  gap: 1rem;\r\n}\r\n\r\n.skeleton-profile-item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 0.75rem;\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n}\r\n\r\n.skeleton-profile-label {\r\n  @extend .skeleton-base;\r\n  width: 100px;\r\n  height: 16px;\r\n}\r\n\r\n.skeleton-profile-value {\r\n  @extend .skeleton-base;\r\n  width: 120px;\r\n  height: 16px;\r\n}\r\n\r\n/*  */\r\n.skeleton-breadcrumb-link,\r\n.skeleton-breadcrumb-current,\r\n.skeleton-symbol,\r\n.skeleton-tag,\r\n.skeleton-back-button,\r\n.skeleton-title,\r\n.skeleton-overview-content,\r\n.skeleton-technical-content,\r\n.skeleton-insight-content,\r\n.skeleton-indicator-name,\r\n.skeleton-indicator-value,\r\n.skeleton-indicator-signal,\r\n.skeleton-performance-label,\r\n.skeleton-performance-value,\r\n.skeleton-news-title,\r\n.skeleton-news-summary,\r\n.skeleton-news-time,\r\n.skeleton-fundamental-label,\r\n.skeleton-fundamental-value,\r\n.skeleton-profile-label,\r\n.skeleton-profile-value {\r\n  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\r\n  background-size: 200px 100%;\r\n  animation: shimmer 1.5s infinite linear;\r\n  border-radius: 4px;\r\n}\r\n\r\n/*  */\r\n@media (max-width: 1200px) {\r\n  .skeleton-widgets-container {\r\n    grid-template-columns: 1fr;\r\n    gap: 1rem;\r\n  }\r\n  \r\n  .skeleton-insight-widgets {\r\n    grid-template-columns: 1fr;\r\n    gap: 1rem;\r\n  }\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .stock-detail-skeleton {\r\n    padding: 0.5rem;\r\n  }\r\n  \r\n  .skeleton-stock-header {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .skeleton-header-info {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 0.75rem;\r\n  }\r\n  \r\n  .skeleton-widgets-container {\r\n    grid-template-columns: 1fr;\r\n    gap: 1rem;\r\n    min-height: auto;\r\n  }\r\n  \r\n  .skeleton-insight-widgets {\r\n    grid-template-columns: 1fr;\r\n    gap: 1rem;\r\n  }\r\n  \r\n  .skeleton-insight-widget {\r\n    height: auto;\r\n    min-height: 500px;\r\n  }\r\n  \r\n  .skeleton-insight-content {\r\n    min-height: 450px;\r\n  }\r\n  \r\n  .skeleton-overview-content,\r\n  .skeleton-technical-content {\r\n    min-height: 330px;\r\n  }\r\n  \r\n  .skeleton-technical-indicators {\r\n    grid-template-columns: 1fr;\r\n  }\r\n  \r\n  .skeleton-performance-grid {\r\n    grid-template-columns: 1fr;\r\n  }\r\n  \r\n  .skeleton-fundamental-grid {\r\n    grid-template-columns: repeat(2, 1fr);\r\n  }\r\n  \r\n  .skeleton-profile-info {\r\n    grid-template-columns: 1fr;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .skeleton-stock-header {\r\n    padding: 0.75rem;\r\n    margin: 0 -0.25rem 1rem -0.25rem;\r\n  }\r\n  \r\n  .skeleton-widget-container,\r\n  .skeleton-news-row,\r\n  .skeleton-fundamental-row,\r\n  .skeleton-profile-row {\r\n    padding: 0.5rem;\r\n    margin: 0 -0.25rem 1rem -0.25rem;\r\n  }\r\n  \r\n  .skeleton-fundamental-grid {\r\n    grid-template-columns: 1fr;\r\n  }\r\n}\r\n\r\n/*  */\r\n.skeleton-tag:nth-child(1) { animation-delay: 0.1s; }\r\n.skeleton-tag:nth-child(2) { animation-delay: 0.2s; }\r\n\r\n.skeleton-indicator-item:nth-child(odd) { animation-delay: 0.1s; }\r\n.skeleton-indicator-item:nth-child(even) { animation-delay: 0.2s; }\r\n\r\n.skeleton-news-item:nth-child(1) { animation-delay: 0.1s; }\r\n.skeleton-news-item:nth-child(2) { animation-delay: 0.2s; }\r\n.skeleton-news-item:nth-child(3) { animation-delay: 0.3s; }\r\n\r\n.skeleton-fundamental-item:nth-child(odd) { animation-delay: 0.1s; }\r\n.skeleton-fundamental-item:nth-child(even) { animation-delay: 0.2s; }\r\n\r\n.skeleton-profile-item:nth-child(odd) { animation-delay: 0.1s; }\r\n.skeleton-profile-item:nth-child(even) { animation-delay: 0.2s; }\r\n\r\n/*  */\r\n.stock-detail-skeleton {\r\n  animation: fadeIn 0.3s ease-in;\r\n}\r\n\r\n@keyframes fadeIn {\r\n  from {\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    opacity: 1;\r\n  }\r\n}\r\n</style>","/**\r\n * Zod validation schemas for Investment Dashboard data models\r\n * Provides runtime validation for all data contracts\r\n */\r\n\r\nimport { z } from 'zod'\r\nimport type {\r\n  UserState,\r\n  QuotesSnapshot,\r\n  DailySnapshot,\r\n  MetadataSnapshot,\r\n  SystemStatus,\r\n  UniverseConfig,\r\n  MacroIndicatorConfig,\r\n  NewsSourcesConfig,\r\n  WishConfig,\r\n  VersionConfig,\r\n  ValidationResult\r\n} from '@/types'\r\n\r\n// ============================================================================\r\n// Custom datetime validator that accepts ISO strings with timezone\r\nconst DateTimeString = z.string().refine(\r\n  (val) => {\r\n    try {\r\n      const date = new Date(val)\r\n      return !isNaN(date.getTime()) && val.includes('T')\r\n    } catch {\r\n      return false\r\n    }\r\n  },\r\n  { message: 'Invalid datetime format' }\r\n)\r\n// ============================================================================\r\n\r\nconst StaleLevel = z.enum(['fresh', 'stale', 'very_stale'])\r\nconst MarketState = z.enum(['open', 'closed', 'pre', 'post']).nullable()\r\nconst PriceType = z.enum(['latest', 'close', 'last_known'])\r\nconst BriefSource = z.enum(['llm', 'fallback'])\r\nconst QualityFlag = z.enum(['good', 'stale', 'degraded', 'disabled_scrape'])\r\nconst ConfidenceLevel = z.union([z.literal(0.50), z.literal(0.75), z.literal(0.90)])\r\nconst SystemStatusType = z.enum(['operational', 'degraded', 'maintenance', 'outage'])\r\nconst JobStatusType = z.enum(['success', 'failed', 'running', 'pending'])\r\n\r\n// ============================================================================\r\n// User State Validation Schemas\r\n// ============================================================================\r\n\r\nconst HoldingDataSchema = z.object({\r\n  avg_cost_usd: z.number().positive().finite(),\r\n  shares: z.number().positive().finite().optional()\r\n})\r\n\r\nconst UserSettingsSchema = z.object({\r\n  scraping_enabled: z.boolean(),\r\n  degradation_enabled: z.boolean(),\r\n  ga_enabled: z.boolean(),\r\n  clarity_enabled: z.boolean()\r\n})\r\n\r\nconst ImportResultSchema = z.object({\r\n  timestamp: DateTimeString,\r\n  success: z.boolean(),\r\n  error: z.string().optional(),\r\n  changes_applied: z.number().nonnegative(),\r\n  dry_run: z.boolean()\r\n})\r\n\r\nconst DiagnosticsDataSchema = z.object({\r\n  last_import_result: ImportResultSchema.optional()\r\n})\r\n\r\n// Forward declarations for recursive types\r\nconst DailySnapshotSchema: z.ZodType<DailySnapshot> = z.lazy(() => DailySnapshotSchemaImpl)\r\nconst QuotesSnapshotSchema: z.ZodType<QuotesSnapshot> = z.lazy(() => QuotesSnapshotSchemaImpl)\r\nconst MetadataSnapshotSchema: z.ZodType<MetadataSnapshot> = z.lazy(() => MetadataSnapshotSchemaImpl)\r\n\r\nconst CacheDataSchema = z.object({\r\n  last_daily_snapshot: DailySnapshotSchema.optional(),\r\n  last_quotes_snapshot: QuotesSnapshotSchema.optional(),\r\n  last_metadata: MetadataSnapshotSchema.optional()\r\n})\r\n\r\nexport const UserStateSchema = z.object({\r\n  schema_version: z.string(),\r\n  watchlist: z.array(z.string().max(10).regex(/^[A-Z0-9.-]+$/)),\r\n  holdings: z.record(z.string(), HoldingDataSchema),\r\n  settings: UserSettingsSchema,\r\n  cache: CacheDataSchema,\r\n  diagnostics: DiagnosticsDataSchema\r\n})\r\n\r\n// ============================================================================\r\n// Quote Data Validation Schemas\r\n// ============================================================================\r\n\r\nconst QuoteItemSchema = z.object({\r\n  symbol: z.string().max(10).regex(/^[A-Z0-9.-]+$/),\r\n  price_usd: z.number().nullable(),\r\n  price_type: PriceType,\r\n  market_state: MarketState,\r\n  is_delayed: z.boolean(),\r\n  stale_level: StaleLevel,\r\n  error: z.string().nullable(),\r\n  change_percent: z.number().optional(),\r\n  volume: z.number().nonnegative().optional()\r\n})\r\n\r\nconst QuotesMetadataSchema = z.object({\r\n  total_symbols: z.number().nonnegative(),\r\n  successful_updates: z.number().nonnegative(),\r\n  failed_updates: z.number().nonnegative(),\r\n  average_delay_minutes: z.number().nonnegative().optional(),\r\n  next_update: DateTimeString.optional()\r\n})\r\n\r\nconst QuotesSnapshotSchemaImpl = z.object({\r\n  as_of: DateTimeString,\r\n  provider: z.string(),\r\n  market_session: z.string().optional(),\r\n  items: z.array(QuoteItemSchema),\r\n  metadata: QuotesMetadataSchema.optional()\r\n})\r\n\r\n// ============================================================================\r\n// Daily Snapshot Validation Schemas\r\n// ============================================================================\r\n\r\nconst NewsItemSchema = z.object({\r\n  title: z.string().min(1),\r\n  url: z.string().url(),\r\n  published_at: DateTimeString,\r\n  source: z.string().min(1),\r\n  summary: z.string().optional()\r\n})\r\n\r\nconst SymbolDataSchema = z.object({\r\n  symbol: z.string().max(10).regex(/^[A-Z0-9.-]+$/),\r\n  short_brief_zh: z.string(),\r\n  brief_truncated: z.boolean(),\r\n  brief_source: BriefSource,\r\n  news_top10: z.array(NewsItemSchema),\r\n  news_insufficient: z.boolean(),\r\n  gaps: z.array(z.string())\r\n})\r\n\r\nconst MarketsIndicatorSchema = z.object({\r\n  id: z.string().min(1),\r\n  value: z.number().nullable(),\r\n  as_of: DateTimeString,\r\n  source_name: z.string().min(1),\r\n  quality_flag: QualityFlag\r\n})\r\n\r\nconst MacroDataSchema = z.object({\r\n  items: z.array(MarketsIndicatorSchema).length(10, 'Must have exactly 10 markets indicators')\r\n})\r\n\r\nconst GenerationMetadataSchema = z.object({\r\n  total_processing_time_ms: z.number().nonnegative(),\r\n  news_sources_attempted: z.number().nonnegative(),\r\n  news_sources_successful: z.number().nonnegative(),\r\n  total_articles_collected: z.number().nonnegative(),\r\n  articles_after_deduplication: z.number().nonnegative(),\r\n  llm_brief_generation_success_rate: z.number().min(0).max(1),\r\n  macro_indicators_updated: z.number().nonnegative(),\r\n  macro_indicators_failed: z.number().nonnegative()\r\n})\r\n\r\nconst DailySnapshotSchemaImpl = z.object({\r\n  as_of_date_taipei: z.string().regex(/^\\d{4}-\\d{2}-\\d{2}$/),\r\n  generated_at_utc: DateTimeString,\r\n  universe: z.array(z.string()).length(10, 'Universe must have exactly 10 symbols'),\r\n  per_symbol: z.array(SymbolDataSchema).length(10, 'Must have data for exactly 10 symbols'),\r\n  macro: MacroDataSchema,\r\n  generation_metadata: GenerationMetadataSchema.optional()\r\n})\r\n\r\n// ============================================================================\r\n// Metadata Validation Schemas\r\n// ============================================================================\r\n\r\nconst SymbolMetadataSchema = z.object({\r\n  symbol: z.string().max(10).regex(/^[A-Z0-9.-]+$/),\r\n  sector: z.string().nullable(),\r\n  industry: z.string().nullable(),\r\n  confidence: ConfidenceLevel,\r\n  sources: z.array(z.string()).min(1),\r\n  last_verified_at: DateTimeString,\r\n  market_cap_category: z.string().optional(),\r\n  exchange: z.string().optional()\r\n})\r\n\r\nconst ConfidenceDistributionSchema = z.object({\r\n  high_confidence_0_90: z.number().nonnegative(),\r\n  medium_confidence_0_75: z.number().nonnegative(),\r\n  low_confidence_0_50: z.number().nonnegative()\r\n})\r\n\r\nconst RefreshMetadataSchema = z.object({\r\n  last_refresh_duration_ms: z.number().nonnegative(),\r\n  symbols_updated: z.number().nonnegative(),\r\n  symbols_failed: z.number().nonnegative(),\r\n  confidence_improvements: z.number().nonnegative(),\r\n  new_sources_added: z.number().nonnegative()\r\n})\r\n\r\nconst MetadataSnapshotSchemaImpl = z.object({\r\n  ttl_days: z.number().positive(),\r\n  as_of: DateTimeString,\r\n  next_refresh: DateTimeString.optional(),\r\n  items: z.array(SymbolMetadataSchema).length(10, 'Must have metadata for exactly 10 symbols'),\r\n  industry_grouping: z.record(z.string(), z.array(z.string())).optional(),\r\n  confidence_distribution: ConfidenceDistributionSchema.optional(),\r\n  data_sources: z.record(z.string(), z.number().nonnegative()).optional(),\r\n  refresh_metadata: RefreshMetadataSchema.optional()\r\n})\r\n\r\n// ============================================================================\r\n// System Status Validation Schemas\r\n// ============================================================================\r\n\r\nconst JobStatusSchema = z.object({\r\n  last_run: DateTimeString,\r\n  next_run: DateTimeString,\r\n  status: JobStatusType,\r\n  duration_ms: z.number().nonnegative(),\r\n  symbols_updated: z.number().nonnegative().optional(),\r\n  symbols_processed: z.number().nonnegative().optional(),\r\n  errors: z.array(z.string()),\r\n  provider: z.string().optional()\r\n})\r\n\r\nconst FreshnessInfoSchema = z.object({\r\n  age_minutes: z.number().nonnegative().optional(),\r\n  age_hours: z.number().nonnegative().optional(),\r\n  age_days: z.number().nonnegative().optional(),\r\n  staleness: StaleLevel\r\n})\r\n\r\nconst QuotaInfoSchema = z.object({\r\n  used_minutes: z.number().nonnegative(),\r\n  total_minutes: z.number().nonnegative(),\r\n  reset_date: z.string() // Just a date string, not datetime\r\n})\r\n\r\nconst StorageInfoSchema = z.object({\r\n  data_files_mb: z.number().nonnegative(),\r\n  total_repo_mb: z.number().nonnegative()\r\n})\r\n\r\nconst ApiLimitInfoSchema = z.object({\r\n  calls_today: z.number().nonnegative(),\r\n  daily_limit: z.number().nonnegative(),\r\n  reset_time: DateTimeString\r\n})\r\n\r\nconst SystemHealthSchema = z.object({\r\n  github_actions_quota: QuotaInfoSchema.optional(),\r\n  storage_usage: StorageInfoSchema.optional(),\r\n  api_limits: z.record(z.string(), ApiLimitInfoSchema).optional()\r\n})\r\n\r\nconst DegradationStatusSchema = z.object({\r\n  enabled: z.boolean(),\r\n  active_fallbacks: z.array(z.string()),\r\n  cache_hits_last_hour: z.number().nonnegative()\r\n})\r\n\r\nexport const SystemStatusSchema = z.object({\r\n  description: z.string(),\r\n  last_updated: DateTimeString,\r\n  system_status: SystemStatusType,\r\n  jobs: z.record(z.string(), JobStatusSchema),\r\n  data_freshness: z.record(z.string(), FreshnessInfoSchema),\r\n  system_health: SystemHealthSchema,\r\n  degradation_status: DegradationStatusSchema\r\n})\r\n\r\n// ============================================================================\r\n// Configuration Validation Schemas\r\n// ============================================================================\r\n\r\nconst ValidationRulesSchema = z.object({\r\n  max_length: z.number().positive(),\r\n  allowed_chars: z.string(),\r\n  case_sensitive: z.boolean()\r\n})\r\n\r\nexport const UniverseConfigSchema = z.object({\r\n  description: z.string(),\r\n  version: z.string(),\r\n  last_updated: z.string(),\r\n  symbols: z.array(z.string().max(10).regex(/^[A-Z0-9.-]+$/)).length(10, 'Universe must have exactly 10 symbols'),\r\n  validation: ValidationRulesSchema\r\n})\r\n\r\nconst MarketsIndicatorDefinitionSchema = z.object({\r\n  id: z.string().min(1),\r\n  name: z.string().min(1),\r\n  description: z.string().min(1),\r\n  scrape_only: z.boolean(),\r\n  data_source: z.string().min(1),\r\n  update_frequency: z.string().min(1),\r\n  unit: z.string().min(1)\r\n})\r\n\r\nconst ScrapingSettingsSchema = z.object({\r\n  default_enabled: z.boolean(),\r\n  timeout_seconds: z.number().positive(),\r\n  retry_attempts: z.number().nonnegative(),\r\n  user_agent: z.string().min(1)\r\n})\r\n\r\nexport const MarketsIndicatorConfigSchema = z.object({\r\n  description: z.string(),\r\n  version: z.string(),\r\n  last_updated: z.string(),\r\n  indicators: z.array(MarketsIndicatorDefinitionSchema).length(10, 'Must have exactly 10 markets indicators'),\r\n  scraping_settings: ScrapingSettingsSchema\r\n})\r\n\r\n// ============================================================================\r\n// Validation Utility Functions\r\n// ============================================================================\r\n\r\nexport function validateData<T>(\r\n  schema: z.ZodSchema<T>,\r\n  data: unknown\r\n): ValidationResult<T> {\r\n  try {\r\n    const validatedData = schema.parse(data)\r\n    return {\r\n      success: true,\r\n      data: validatedData\r\n    }\r\n  } catch (error) {\r\n    if (error instanceof z.ZodError) {\r\n      return {\r\n        success: false,\r\n        error: {\r\n          message: 'Validation failed',\r\n          details: error.errors\r\n        }\r\n      }\r\n    }\r\n    return {\r\n      success: false,\r\n      error: {\r\n        message: 'Unknown validation error',\r\n        details: { error: String(error) }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport function validateUserState(data: unknown): ValidationResult<UserState> {\r\n  return validateData(UserStateSchema, data)\r\n}\r\n\r\nexport function validateQuotesSnapshot(data: unknown): ValidationResult<QuotesSnapshot> {\r\n  return validateData(QuotesSnapshotSchema, data)\r\n}\r\n\r\nexport function validateDailySnapshot(data: unknown): ValidationResult<DailySnapshot> {\r\n  return validateData(DailySnapshotSchema, data)\r\n}\r\n\r\nexport function validateMetadataSnapshot(data: unknown): ValidationResult<MetadataSnapshot> {\r\n  return validateData(MetadataSnapshotSchema, data)\r\n}\r\n\r\nexport function validateSystemStatus(data: unknown): ValidationResult<SystemStatus> {\r\n  return validateData(SystemStatusSchema, data)\r\n}\r\n\r\nexport function validateUniverseConfig(data: unknown): ValidationResult<UniverseConfig> {\r\n  return validateData(UniverseConfigSchema, data)\r\n}\r\n\r\nexport function validateMarketsIndicatorConfig(data: unknown): ValidationResult<MarketsIndicatorConfig> {\r\n  return validateData(MarketsIndicatorConfigSchema, data)\r\n}\r\n\r\n// ============================================================================\r\n// Symbol Validation Functions\r\n// ============================================================================\r\n\r\nexport function validateSymbolFormat(symbol: string): boolean {\r\n  const symbolSchema = z.string().max(10).regex(/^[A-Z0-9.-]+$/)\r\n  const trimmedSymbol = symbol.trim()\r\n  // Check if symbol was already trimmed (no leading/trailing spaces)\r\n  if (trimmedSymbol !== symbol) return false\r\n  return symbolSchema.safeParse(trimmedSymbol).success\r\n}\r\n\r\nexport function validateSymbolInUniverse(symbol: string, universe: string[]): boolean {\r\n  return universe.includes(symbol.toUpperCase())\r\n}\r\n\r\nexport function validateNoDuplicateSymbol(symbol: string, existingSymbols: string[]): boolean {\r\n  const normalizedSymbol = symbol.toUpperCase()\r\n  const normalizedExisting = existingSymbols.map(s => s.toUpperCase())\r\n  return !normalizedExisting.includes(normalizedSymbol)\r\n}\r\n\r\nexport function validateHoldingsCost(cost: number): ValidationResult<number> {\r\n  const costSchema = z.number().positive()\r\n  const result = costSchema.safeParse(cost)\r\n  if (result.success) {\r\n    return { success: true, data: result.data }\r\n  } else {\r\n    return {\r\n      success: false,\r\n      error: {\r\n        message: 'Cost must be positive',\r\n        details: result.error.errors\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// ============================================================================\r\n// Import/Export Validation\r\n// ============================================================================\r\n\r\nexport function validateImportFileSize(file: File): ValidationResult<File> {\r\n  const maxSizeBytes = 256 * 1024 // 256KB\r\n  if (file.size > maxSizeBytes) {\r\n    return {\r\n      success: false,\r\n      error: {\r\n        message: `File size ${Math.round(file.size / 1024)}KB exceeds maximum of 256KB`,\r\n        code: 'FILE_TOO_LARGE'\r\n      }\r\n    }\r\n  }\r\n  return { success: true, data: file }\r\n}\r\n\r\nexport function validateImportData(data: unknown): ValidationResult<UserState> {\r\n  // First check if it's a valid object with known top-level keys\r\n  const allowedKeys = ['schema_version', 'watchlist', 'holdings', 'settings', 'cache', 'diagnostics']\r\n  \r\n  if (typeof data !== 'object' || data === null) {\r\n    return {\r\n      success: false,\r\n      error: {\r\n        message: 'Import data must be a valid JSON object',\r\n        code: 'INVALID_FORMAT'\r\n      }\r\n    }\r\n  }\r\n  \r\n  const dataKeys = Object.keys(data as object)\r\n  const unknownKeys = dataKeys.filter(key => !allowedKeys.includes(key))\r\n  \r\n  if (unknownKeys.length > 0) {\r\n    return {\r\n      success: false,\r\n      error: {\r\n        message: `Unknown keys found: ${unknownKeys.join(', ')}`,\r\n        code: 'UNKNOWN_KEYS',\r\n        details: { unknownKeys }\r\n      }\r\n    }\r\n  }\r\n  \r\n  // Then validate the full schema\r\n  return validateUserState(data)\r\n}","/**\r\n * StateManager for localStorage-based user state management\r\n * Handles schema versioning, migration, and validation\r\n */\r\n\r\nimport type { UserState, ValidationResult } from '@/types'\r\nimport { validateUserState, validateImportData } from './validation'\r\n\r\nexport class StateManager {\r\n  private static readonly STORAGE_KEY = 'investment-dashboard-state'\r\n  private static readonly CURRENT_SCHEMA_VERSION = '1.0.0'\r\n  \r\n  private static readonly DEFAULT_STATE: UserState = {\r\n    schema_version: StateManager.CURRENT_SCHEMA_VERSION,\r\n    watchlist: [],\r\n    holdings: {},\r\n    settings: {\r\n      scraping_enabled: false,\r\n      degradation_enabled: true,\r\n      ga_enabled: false,\r\n      clarity_enabled: false\r\n    },\r\n    cache: {},\r\n    diagnostics: {}\r\n  }\r\n\r\n  /**\r\n   * Load user state from localStorage with validation and migration\r\n   */\r\n  static loadState(): UserState {\r\n    try {\r\n      const stored = localStorage.getItem(StateManager.STORAGE_KEY)\r\n      if (!stored) {\r\n        return { ...StateManager.DEFAULT_STATE }\r\n      }\r\n\r\n      const parsed = JSON.parse(stored)\r\n      const migrated = StateManager.migrateState(parsed)\r\n      const validation = validateUserState(migrated)\r\n      \r\n      if (validation.success && validation.data) {\r\n        return validation.data\r\n      } else {\r\n        console.warn('Invalid state in localStorage, using defaults:', validation.error)\r\n        return { ...StateManager.DEFAULT_STATE }\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load state from localStorage:', error)\r\n      return { ...StateManager.DEFAULT_STATE }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Save user state to localStorage with validation\r\n   */\r\n  static saveState(state: UserState): ValidationResult<UserState> {\r\n    const validation = validateUserState(state)\r\n    if (!validation.success) {\r\n      return validation\r\n    }\r\n\r\n    try {\r\n      localStorage.setItem(StateManager.STORAGE_KEY, JSON.stringify(state))\r\n      return { success: true, data: state }\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        error: {\r\n          message: 'Failed to save state to localStorage',\r\n          details: { error: String(error) }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clear all user state from localStorage\r\n   */\r\n  static clearState(): void {\r\n    localStorage.removeItem(StateManager.STORAGE_KEY)\r\n  }\r\n\r\n  /**\r\n   * Export user state as JSON string\r\n   */\r\n  static exportState(): string {\r\n    const state = StateManager.loadState()\r\n    return JSON.stringify(state, null, 2)\r\n  }\r\n\r\n  /**\r\n   * Import user state from JSON string with validation\r\n   */\r\n  static importState(jsonData: string, dryRun: boolean = false): ValidationResult<UserState> {\r\n    try {\r\n      const parsed = JSON.parse(jsonData)\r\n      const validation = validateImportData(parsed)\r\n      \r\n      if (!validation.success) {\r\n        return validation\r\n      }\r\n\r\n      const migrated = StateManager.migrateState(validation.data!)\r\n      const finalValidation = validateUserState(migrated)\r\n      \r\n      if (!finalValidation.success) {\r\n        return finalValidation\r\n      }\r\n\r\n      if (!dryRun) {\r\n        const saveResult = StateManager.saveState(finalValidation.data!)\r\n        if (!saveResult.success) {\r\n          return saveResult\r\n        }\r\n      }\r\n\r\n      return { success: true, data: finalValidation.data }\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        error: {\r\n          message: 'Invalid JSON format',\r\n          details: { error: String(error) }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update watchlist with validation\r\n   */\r\n  static updateWatchlist(symbols: string[]): ValidationResult<UserState> {\r\n    const currentState = StateManager.loadState()\r\n    const newState: UserState = {\r\n      ...currentState,\r\n      watchlist: symbols\r\n    }\r\n    return StateManager.saveState(newState)\r\n  }\r\n\r\n  /**\r\n   * Add symbol to watchlist\r\n   */\r\n  static addToWatchlist(symbol: string): ValidationResult<UserState> {\r\n    const currentState = StateManager.loadState()\r\n    if (currentState.watchlist.includes(symbol.toUpperCase())) {\r\n      return {\r\n        success: false,\r\n        error: {\r\n          message: 'Symbol already in watchlist',\r\n          code: 'DUPLICATE_SYMBOL'\r\n        }\r\n      }\r\n    }\r\n\r\n    const newWatchlist = [...currentState.watchlist, symbol.toUpperCase()]\r\n    return StateManager.updateWatchlist(newWatchlist)\r\n  }\r\n\r\n  /**\r\n   * Remove symbol from watchlist\r\n   */\r\n  static removeFromWatchlist(symbol: string): ValidationResult<UserState> {\r\n    const currentState = StateManager.loadState()\r\n    const newWatchlist = currentState.watchlist.filter(s => s !== symbol.toUpperCase())\r\n    return StateManager.updateWatchlist(newWatchlist)\r\n  }\r\n\r\n  /**\r\n   * Update holdings for a symbol\r\n   */\r\n  static updateHolding(symbol: string, avgCost: number, shares?: number): ValidationResult<UserState> {\r\n    const currentState = StateManager.loadState()\r\n    const newState: UserState = {\r\n      ...currentState,\r\n      holdings: {\r\n        ...currentState.holdings,\r\n        [symbol.toUpperCase()]: {\r\n          avg_cost_usd: avgCost,\r\n          ...(shares !== undefined && { shares })\r\n        }\r\n      }\r\n    }\r\n    return StateManager.saveState(newState)\r\n  }\r\n\r\n  /**\r\n   * Remove holding for a symbol\r\n   */\r\n  static removeHolding(symbol: string): ValidationResult<UserState> {\r\n    const currentState = StateManager.loadState()\r\n    const newHoldings = { ...currentState.holdings }\r\n    delete newHoldings[symbol.toUpperCase()]\r\n    \r\n    const newState: UserState = {\r\n      ...currentState,\r\n      holdings: newHoldings\r\n    }\r\n    return StateManager.saveState(newState)\r\n  }\r\n\r\n  /**\r\n   * Update user settings\r\n   */\r\n  static updateSettings(settings: Partial<UserState['settings']>): ValidationResult<UserState> {\r\n    const currentState = StateManager.loadState()\r\n    const newState: UserState = {\r\n      ...currentState,\r\n      settings: {\r\n        ...currentState.settings,\r\n        ...settings\r\n      }\r\n    }\r\n    return StateManager.saveState(newState)\r\n  }\r\n\r\n  /**\r\n   * Update cache data\r\n   */\r\n  static updateCache(cache: Partial<UserState['cache']>): ValidationResult<UserState> {\r\n    const currentState = StateManager.loadState()\r\n    const newState: UserState = {\r\n      ...currentState,\r\n      cache: {\r\n        ...currentState.cache,\r\n        ...cache\r\n      }\r\n    }\r\n    return StateManager.saveState(newState)\r\n  }\r\n\r\n  /**\r\n   * Record import result in diagnostics\r\n   */\r\n  static recordImportResult(result: UserState['diagnostics']['last_import_result']): ValidationResult<UserState> {\r\n    const currentState = StateManager.loadState()\r\n    const newState: UserState = {\r\n      ...currentState,\r\n      diagnostics: {\r\n        ...currentState.diagnostics,\r\n        last_import_result: result\r\n      }\r\n    }\r\n    return StateManager.saveState(newState)\r\n  }\r\n\r\n  /**\r\n   * Migrate state from older schema versions\r\n   */\r\n  private static migrateState(state: any): UserState {\r\n    // Handle missing schema_version (assume v1.0.0)\r\n    if (!state.schema_version) {\r\n      state.schema_version = '1.0.0'\r\n    }\r\n\r\n    // Future migrations would go here\r\n    // Example:\r\n    // if (state.schema_version === '1.0.0') {\r\n    //   // Migrate to 1.1.0\r\n    //   state = migrateFrom1_0_0To1_1_0(state)\r\n    // }\r\n\r\n    // Ensure all required fields exist with defaults\r\n    const migrated: UserState = {\r\n      schema_version: StateManager.CURRENT_SCHEMA_VERSION,\r\n      watchlist: state.watchlist || [],\r\n      holdings: state.holdings || {},\r\n      settings: {\r\n        scraping_enabled: state.settings?.scraping_enabled ?? false,\r\n        degradation_enabled: state.settings?.degradation_enabled ?? true,\r\n        ga_enabled: state.settings?.ga_enabled ?? false,\r\n        clarity_enabled: state.settings?.clarity_enabled ?? false\r\n      },\r\n      cache: state.cache || {},\r\n      diagnostics: state.diagnostics || {}\r\n    }\r\n\r\n    return migrated\r\n  }\r\n\r\n  /**\r\n   * Get current schema version\r\n   */\r\n  static getCurrentSchemaVersion(): string {\r\n    return StateManager.CURRENT_SCHEMA_VERSION\r\n  }\r\n\r\n  /**\r\n   * Check if localStorage is available\r\n   */\r\n  static isStorageAvailable(): boolean {\r\n    try {\r\n      const test = '__storage_test__'\r\n      localStorage.setItem(test, test)\r\n      localStorage.removeItem(test)\r\n      return true\r\n    } catch {\r\n      return false\r\n    }\r\n  }\r\n}","/**\r\n * Data Fetcher -  PRD  status-first + fallback \r\n * \r\n * Fetch :\r\n * 1. /data/status.json ()\r\n * 2.  (latest)\r\n * 3. localStorage  (last-known-good)\r\n * 4.  N/A + stale indicator\r\n */\r\n\r\nimport type { \r\n  SystemStatus, \r\n  QuotesSnapshot, \r\n  DailySnapshot, \r\n  MetadataSnapshot\r\n} from '@/types'\r\nimport { \r\n  validateSystemStatus,\r\n  validateQuotesSnapshot, \r\n  validateDailySnapshot,\r\n  validateMetadataSnapshot\r\n} from '@/utils/validation'\r\nimport { StateManager } from '@/utils/state-manager'\r\n\r\nexport interface FetchResult<T> {\r\n  data: T | null\r\n  source: 'network' | 'cache' | 'fallback'\r\n  stale_level: 'fresh' | 'stale' | 'very_stale'\r\n  error?: string\r\n  as_of?: string\r\n}\r\n\r\nexport class DataFetcher {\r\n  private baseUrl: string\r\n  private cacheBustingEnabled: boolean\r\n\r\n  constructor(baseUrl: string = '', cacheBustingEnabled: boolean = true) {\r\n    this.baseUrl = baseUrl\r\n    this.cacheBustingEnabled = cacheBustingEnabled\r\n  }\r\n\r\n  /**\r\n   *  - \r\n   */\r\n  async fetchSystemStatus(): Promise<FetchResult<SystemStatus>> {\r\n    try {\r\n      const response = await fetch(`${this.baseUrl}/data/status.json`)\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}`)\r\n      }\r\n\r\n      const data = await response.json()\r\n      const validation = validateSystemStatus(data)\r\n      \r\n      if (!validation.success) {\r\n        throw new Error(`Invalid status.json: ${validation.error?.message}`)\r\n      }\r\n\r\n      return {\r\n        data: validation.data!,\r\n        source: 'network',\r\n        stale_level: 'fresh',\r\n        as_of: validation.data!.last_updated\r\n      }\r\n    } catch (error) {\r\n      console.warn('Failed to fetch system status:', error)\r\n      \r\n      // Fallback to cached status if available\r\n      const state = StateManager.loadState()\r\n      if (state.cache.last_daily_snapshot) {\r\n        return {\r\n          data: null, // We don't cache status.json separately\r\n          source: 'fallback',\r\n          stale_level: 'very_stale',\r\n          error: String(error)\r\n        }\r\n      }\r\n\r\n      return {\r\n        data: null,\r\n        source: 'fallback', \r\n        stale_level: 'very_stale',\r\n        error: String(error)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   *  -  last-known-good \r\n   */\r\n  async fetchQuotesSnapshot(): Promise<FetchResult<QuotesSnapshot>> {\r\n    try {\r\n      // 1.  status.json \r\n      const statusResult = await this.fetchSystemStatus()\r\n      let cacheBuster = ''\r\n      \r\n      if (this.cacheBustingEnabled && statusResult.data?.last_updated) {\r\n        const timestamp = new Date(statusResult.data.last_updated).getTime()\r\n        cacheBuster = `?t=${timestamp}`\r\n      }\r\n\r\n      // 2. \r\n      const response = await fetch(`${this.baseUrl}/data/quotes/latest.json${cacheBuster}`)\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}`)\r\n      }\r\n\r\n      const data = await response.json()\r\n      const validation = validateQuotesSnapshot(data)\r\n      \r\n      if (!validation.success) {\r\n        throw new Error(`Invalid quotes snapshot: ${validation.error?.message}`)\r\n      }\r\n\r\n      // 3.  localStorage cache\r\n      const userState = StateManager.loadState()\r\n      StateManager.updateCache({\r\n        last_quotes_snapshot: validation.data!\r\n      })\r\n\r\n      return {\r\n        data: validation.data!,\r\n        source: 'network',\r\n        stale_level: this.calculateStaleness(validation.data!.as_of),\r\n        as_of: validation.data!.as_of\r\n      }\r\n\r\n    } catch (error) {\r\n      console.warn('Failed to fetch quotes snapshot:', error)\r\n      \r\n      // 4. Fallback to localStorage cache\r\n      const userState = StateManager.loadState()\r\n      if (userState.cache.last_quotes_snapshot) {\r\n        return {\r\n          data: userState.cache.last_quotes_snapshot,\r\n          source: 'cache',\r\n          stale_level: this.calculateStaleness(userState.cache.last_quotes_snapshot.as_of),\r\n          as_of: userState.cache.last_quotes_snapshot.as_of,\r\n          error: String(error)\r\n        }\r\n      }\r\n\r\n      // 5.  fallback\r\n      return {\r\n        data: null,\r\n        source: 'fallback',\r\n        stale_level: 'very_stale',\r\n        error: String(error)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  async fetchDailySnapshot(date?: string): Promise<FetchResult<DailySnapshot>> {\r\n    try {\r\n      //  (Taipei timezone) \r\n      const targetDate = date || this.getTaipeiDateString()\r\n      \r\n      const statusResult = await this.fetchSystemStatus()\r\n      let cacheBuster = ''\r\n      \r\n      if (this.cacheBustingEnabled && statusResult.data?.last_updated) {\r\n        const timestamp = new Date(statusResult.data.last_updated).getTime()\r\n        cacheBuster = `?t=${timestamp}`\r\n      }\r\n\r\n      const response = await fetch(`${this.baseUrl}/data/daily/${targetDate}.json${cacheBuster}`)\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}`)\r\n      }\r\n\r\n      const data = await response.json()\r\n      const validation = validateDailySnapshot(data)\r\n      \r\n      if (!validation.success) {\r\n        throw new Error(`Invalid daily snapshot: ${validation.error?.message}`)\r\n      }\r\n\r\n      //  cache\r\n      StateManager.updateCache({\r\n        last_daily_snapshot: validation.data!\r\n      })\r\n\r\n      return {\r\n        data: validation.data!,\r\n        source: 'network',\r\n        stale_level: this.calculateStaleness(validation.data!.generated_at_utc),\r\n        as_of: validation.data!.generated_at_utc\r\n      }\r\n\r\n    } catch (error) {\r\n      console.warn('Failed to fetch daily snapshot:', error)\r\n      \r\n      // Fallback to cache\r\n      const userState = StateManager.loadState()\r\n      if (userState.cache.last_daily_snapshot) {\r\n        return {\r\n          data: userState.cache.last_daily_snapshot,\r\n          source: 'cache',\r\n          stale_level: this.calculateStaleness(userState.cache.last_daily_snapshot.generated_at_utc),\r\n          as_of: userState.cache.last_daily_snapshot.generated_at_utc,\r\n          error: String(error)\r\n        }\r\n      }\r\n\r\n      return {\r\n        data: null,\r\n        source: 'fallback',\r\n        stale_level: 'very_stale',\r\n        error: String(error)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  async fetchMetadataSnapshot(): Promise<FetchResult<MetadataSnapshot>> {\r\n    try {\r\n      const statusResult = await this.fetchSystemStatus()\r\n      let cacheBuster = ''\r\n      \r\n      if (this.cacheBustingEnabled && statusResult.data?.last_updated) {\r\n        const timestamp = new Date(statusResult.data.last_updated).getTime()\r\n        cacheBuster = `?t=${timestamp}`\r\n      }\r\n\r\n      const response = await fetch(`${this.baseUrl}/data/symbols_metadata.json${cacheBuster}`)\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}`)\r\n      }\r\n\r\n      const data = await response.json()\r\n      const validation = validateMetadataSnapshot(data)\r\n      \r\n      if (!validation.success) {\r\n        throw new Error(`Invalid metadata snapshot: ${validation.error?.message}`)\r\n      }\r\n\r\n      //  cache\r\n      StateManager.updateCache({\r\n        last_metadata: validation.data!\r\n      })\r\n\r\n      return {\r\n        data: validation.data!,\r\n        source: 'network',\r\n        stale_level: this.calculateStaleness(validation.data!.as_of),\r\n        as_of: validation.data!.as_of\r\n      }\r\n\r\n    } catch (error) {\r\n      console.warn('Failed to fetch metadata snapshot:', error)\r\n      \r\n      // Fallback to cache\r\n      const userState = StateManager.loadState()\r\n      if (userState.cache.last_metadata) {\r\n        return {\r\n          data: userState.cache.last_metadata,\r\n          source: 'cache',\r\n          stale_level: this.calculateStaleness(userState.cache.last_metadata.as_of),\r\n          as_of: userState.cache.last_metadata.as_of,\r\n          error: String(error)\r\n        }\r\n      }\r\n\r\n      return {\r\n        data: null,\r\n        source: 'fallback',\r\n        stale_level: 'very_stale',\r\n        error: String(error)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  private calculateStaleness(asOfString: string): 'fresh' | 'stale' | 'very_stale' {\r\n    try {\r\n      const asOf = new Date(asOfString)\r\n      const now = new Date()\r\n      const ageMinutes = (now.getTime() - asOf.getTime()) / (1000 * 60)\r\n\r\n      if (ageMinutes <= 60) return 'fresh'        // 1 \r\n      if (ageMinutes <= 24 * 60) return 'stale'  // 24 \r\n      return 'very_stale'                         //  24 \r\n    } catch {\r\n      return 'very_stale'\r\n    }\r\n  }\r\n\r\n  /**\r\n   *  Taipei  (YYYY-MM-DD)\r\n   */\r\n  private getTaipeiDateString(): string {\r\n    const now = new Date()\r\n    //  Taipei  (UTC+8)\r\n    const taipeiTime = new Date(now.getTime() + (8 * 60 * 60 * 1000))\r\n    return taipeiTime.toISOString().split('T')[0]\r\n  }\r\n}\r\n\r\n//  - \r\nconst getBaseUrl = () => {\r\n  if (typeof window !== 'undefined') {\r\n    //  GitHub Pages\r\n    const hostname = window.location.hostname\r\n    const pathname = window.location.pathname\r\n    \r\n    if (hostname === 'romarin-hsieh.github.io' && pathname.startsWith('/investment-dashboard')) {\r\n      return '/investment-dashboard'\r\n    }\r\n  }\r\n  \r\n  // \r\n  return ''\r\n}\r\n\r\nexport const dataFetcher = new DataFetcher(getBaseUrl())","//  -  Yahoo Finance API  sector  industry \r\nimport { yahooFinanceAPI } from './yahooFinanceApi.js'\r\n\r\nclass DynamicMetadataService {\r\n  constructor() {\r\n    this.cache = new Map()\r\n    this.cacheExpiry = 24 * 60 * 60 * 1000 // 24 hours - sector/industry \r\n    this.batchSize = 5 // \r\n    this.requestDelay = 1000 //  ()\r\n  }\r\n\r\n  // \r\n  async getSymbolMetadata(symbol) {\r\n    try {\r\n      // \r\n      if (this.cache.has(symbol)) {\r\n        const cached = this.cache.get(symbol)\r\n        if (Date.now() - cached.timestamp < this.cacheExpiry) {\r\n          console.log(`Using cached metadata for ${symbol}`)\r\n          return cached.data\r\n        }\r\n      }\r\n\r\n      console.log(`Fetching fresh metadata for ${symbol} from Yahoo Finance API...`)\r\n      \r\n      //  Yahoo Finance API \r\n      const stockInfo = await yahooFinanceAPI.getStockInfo(symbol)\r\n      \r\n      if (stockInfo && !stockInfo.error && stockInfo.sector !== 'Unknown') {\r\n        // \r\n        const metadata = {\r\n          symbol: symbol,\r\n          sector: stockInfo.sector || 'Unknown',\r\n          industry: stockInfo.industry || 'Unknown Industry',\r\n          exchange: stockInfo.exchange || this.getDefaultExchange(symbol),\r\n          marketCap: stockInfo.marketCap,\r\n          marketCapFormatted: stockInfo.marketCapFormatted,\r\n          marketCapCategory: stockInfo.marketCapCategory || 'unknown',\r\n          currency: stockInfo.currency || 'USD',\r\n          country: stockInfo.country || 'Unknown',\r\n          website: stockInfo.website,\r\n          employees: stockInfo.employees,\r\n          businessSummary: stockInfo.businessSummary,\r\n          confidence: stockInfo.confidence || 0.95, // Yahoo Finance API \r\n          source: 'Yahoo Finance API (Live)',\r\n          lastUpdated: stockInfo.lastUpdated || new Date().toISOString(),\r\n          isLive: true // \r\n        }\r\n\r\n        // \r\n        this.cache.set(symbol, {\r\n          data: metadata,\r\n          timestamp: Date.now()\r\n        })\r\n\r\n        console.log(`Successfully fetched metadata for ${symbol}:`, {\r\n          sector: metadata.sector,\r\n          industry: metadata.industry,\r\n          confidence: metadata.confidence\r\n        })\r\n\r\n        return metadata\r\n      } else {\r\n        // API \r\n        console.warn(`Yahoo Finance API failed for ${symbol}, using static fallback data`)\r\n        return this.getStaticFallbackMetadata(symbol)\r\n      }\r\n    } catch (error) {\r\n      console.error(`Error fetching metadata for ${symbol}:`, error)\r\n      return this.getStaticFallbackMetadata(symbol)\r\n    }\r\n  }\r\n\r\n  //  ( symbols_metadata.json)\r\n  getStaticFallbackMetadata(symbol) {\r\n    const staticData = {\r\n      'ASTS': { sector: 'Communication Services', industry: 'Satellite Communications', confidence: 0.75 },\r\n      'RIVN': { sector: 'Consumer Cyclical', industry: 'Electric Vehicles', confidence: 0.90 },\r\n      'PL': { sector: 'Technology', industry: 'Satellite Imaging & Analytics', confidence: 0.90 },\r\n      'ONDS': { sector: 'Technology', industry: 'Industrial IoT Solutions', confidence: 0.75 },\r\n      'RDW': { sector: 'Industrials', industry: 'Space Infrastructure', confidence: 0.75 },\r\n      'AVAV': { sector: 'Industrials', industry: 'Aerospace & Defense', confidence: 0.75 },\r\n      'MDB': { sector: 'Technology', industry: 'Database Software', confidence: 0.90 },\r\n      'ORCL': { sector: 'Technology', industry: 'Enterprise Software', confidence: 0.90 },\r\n      'TSM': { sector: 'Technology', industry: 'Semiconductors', confidence: 0.90 },\r\n      'RKLB': { sector: 'Industrials', industry: 'Aerospace & Defense', confidence: 0.90 },\r\n      'CRM': { sector: 'Technology', industry: 'Enterprise Software', confidence: 0.90 },\r\n      'NVDA': { sector: 'Technology', industry: 'Semiconductors', confidence: 0.90 },\r\n      'AVGO': { sector: 'Technology', industry: 'Semiconductors', confidence: 0.90 },\r\n      'AMZN': { sector: 'Consumer Cyclical', industry: 'Internet Retail', confidence: 0.90 },\r\n      'GOOG': { sector: 'Communication Services', industry: 'Internet Content & Information', confidence: 0.90 },\r\n      'META': { sector: 'Communication Services', industry: 'Internet Content & Information', confidence: 0.90 },\r\n      'NFLX': { sector: 'Communication Services', industry: 'Entertainment', confidence: 0.90 },\r\n      'LEU': { sector: 'Energy', industry: 'Uranium', confidence: 0.75 },\r\n      'SMR': { sector: 'Energy', industry: 'Nuclear Energy', confidence: 0.75 },\r\n      'CRWV': { sector: 'Technology', industry: 'Software - Application', confidence: 0.75 },\r\n      'IONQ': { sector: 'Technology', industry: 'Quantum Computing', confidence: 0.75 },\r\n      'PLTR': { sector: 'Technology', industry: 'Software - Infrastructure', confidence: 0.90 },\r\n      'HIMS': { sector: 'Healthcare', industry: 'Health Information Services', confidence: 0.75 },\r\n      'TSLA': { sector: 'Consumer Cyclical', industry: 'Auto Manufacturers', confidence: 0.90 }\r\n    }\r\n\r\n    const fallbackData = staticData[symbol] || { \r\n      sector: 'Unknown', \r\n      industry: 'Unknown Industry', \r\n      confidence: 0.0 \r\n    }\r\n\r\n    const metadata = {\r\n      symbol: symbol,\r\n      sector: fallbackData.sector,\r\n      industry: fallbackData.industry,\r\n      exchange: this.getDefaultExchange(symbol),\r\n      marketCap: null,\r\n      marketCapFormatted: 'N/A',\r\n      marketCapCategory: 'unknown',\r\n      currency: 'USD',\r\n      country: 'Unknown',\r\n      website: null,\r\n      employees: null,\r\n      businessSummary: null,\r\n      confidence: fallbackData.confidence,\r\n      source: 'Static Fallback Data',\r\n      lastUpdated: new Date().toISOString(),\r\n      isLive: false\r\n    }\r\n\r\n    //  ()\r\n    this.cache.set(symbol, {\r\n      data: metadata,\r\n      timestamp: Date.now()\r\n    })\r\n\r\n    console.log(`Using static fallback for ${symbol}:`, {\r\n      sector: metadata.sector,\r\n      industry: metadata.industry,\r\n      confidence: metadata.confidence\r\n    })\r\n\r\n    return metadata\r\n  }\r\n\r\n  // \r\n  async getBatchMetadata(symbols) {\r\n    const results = new Map()\r\n    const batches = this.createBatches(symbols, this.batchSize)\r\n    \r\n    console.log(`Fetching metadata for ${symbols.length} symbols in ${batches.length} batches...`)\r\n\r\n    for (let i = 0; i < batches.length; i++) {\r\n      const batch = batches[i]\r\n      console.log(`Processing batch ${i + 1}/${batches.length} (${batch.length} symbols)`)\r\n\r\n      // \r\n      const batchPromises = batch.map(symbol => \r\n        this.getSymbolMetadata(symbol).catch(error => {\r\n          console.error(`Failed to fetch metadata for ${symbol}:`, error)\r\n          return this.getDefaultMetadata(symbol)\r\n        })\r\n      )\r\n\r\n      const batchResults = await Promise.all(batchPromises)\r\n      \r\n      // \r\n      batch.forEach((symbol, index) => {\r\n        results.set(symbol, batchResults[index])\r\n      })\r\n\r\n      //  API \r\n      if (i < batches.length - 1) {\r\n        console.log(`Waiting ${this.requestDelay}ms before next batch...`)\r\n        await this.delay(this.requestDelay)\r\n      }\r\n    }\r\n\r\n    console.log(`Completed fetching metadata for ${results.size} symbols`)\r\n    return results\r\n  }\r\n\r\n  // \r\n  getDefaultMetadata(symbol) {\r\n    return {\r\n      symbol: symbol,\r\n      sector: 'Unknown',\r\n      industry: 'Unknown Industry',\r\n      exchange: this.getDefaultExchange(symbol),\r\n      marketCap: null,\r\n      marketCapFormatted: 'N/A',\r\n      marketCapCategory: 'unknown',\r\n      currency: 'USD',\r\n      country: 'Unknown',\r\n      website: null,\r\n      employees: null,\r\n      businessSummary: null,\r\n      confidence: 0.0,\r\n      source: 'Default (API Failed)',\r\n      lastUpdated: new Date().toISOString(),\r\n      isLive: false\r\n    }\r\n  }\r\n\r\n  // \r\n  getDefaultExchange(symbol) {\r\n    const nasdaqSymbols = ['AAPL', 'MSFT', 'GOOGL', 'GOOG', 'AMZN', 'TSLA', 'NVDA', 'META', 'NFLX', 'RKLB', 'ASTS', 'RIVN', 'MDB', 'ONDS', 'PL', 'AVAV', 'CRM', 'AVGO', 'LEU', 'SMR', 'CRWV', 'IONQ', 'PLTR', 'HIMS']\r\n    const nyseSymbols = ['TSM', 'ORCL', 'RDW']\r\n    \r\n    if (nasdaqSymbols.includes(symbol)) {\r\n      return 'NASDAQ'\r\n    } else if (nyseSymbols.includes(symbol)) {\r\n      return 'NYSE'\r\n    }\r\n    \r\n    return 'NASDAQ' // Default\r\n  }\r\n\r\n  //  ( API)\r\n  getIndustryDisplay(metadata) {\r\n    if (!metadata || metadata.confidence < 0.7) {\r\n      return 'Unknown Industry'\r\n    }\r\n    \r\n    return metadata.industry || metadata.sector || 'Unknown Industry'\r\n  }\r\n\r\n  //  ( CSS )\r\n  getIndustryCategory(metadata) {\r\n    const industry = this.getIndustryDisplay(metadata)\r\n    \r\n    const industryCategories = {\r\n      // \r\n      'Software - Application': 'tech-software',\r\n      'Software - Infrastructure': 'tech-software',\r\n      'Database Software': 'tech-software',\r\n      'Enterprise Software': 'tech-software',\r\n      'Internet Content & Information': 'tech-internet',\r\n      'Semiconductors': 'tech-hardware',\r\n      'Quantum Computing': 'tech-quantum',\r\n      \r\n      // \r\n      'Aerospace & Defense': 'industrial-aerospace',\r\n      'Space Infrastructure': 'industrial-space',\r\n      'Industrial IoT Solutions': 'tech-iot',\r\n      \r\n      // \r\n      'Satellite Communications': 'communications',\r\n      'Satellite Imaging & Analytics': 'tech-satellite',\r\n      \r\n      // \r\n      'Auto Manufacturers': 'automotive',\r\n      'Electric Vehicles': 'automotive',\r\n      \r\n      // \r\n      'Internet Retail': 'retail',\r\n      \r\n      // \r\n      'Entertainment': 'entertainment',\r\n      \r\n      // \r\n      'Uranium': 'energy-nuclear',\r\n      'Nuclear Energy': 'energy-nuclear',\r\n      \r\n      // \r\n      'Health Information Services': 'healthcare',\r\n      \r\n      // \r\n      'Unknown Industry': 'unknown'\r\n    }\r\n    \r\n    return industryCategories[industry] || 'other'\r\n  }\r\n\r\n  // \r\n  generateSectorGrouping(metadataMap) {\r\n    const sectorGrouping = {}\r\n    \r\n    for (const [symbol, metadata] of metadataMap) {\r\n      const sector = metadata.sector || 'Unknown'\r\n      \r\n      if (!sectorGrouping[sector]) {\r\n        sectorGrouping[sector] = []\r\n      }\r\n      \r\n      sectorGrouping[sector].push(symbol)\r\n    }\r\n    \r\n    return sectorGrouping\r\n  }\r\n\r\n  // \r\n  generateConfidenceDistribution(metadataMap) {\r\n    const distribution = {\r\n      high_confidence_0_90: 0,\r\n      medium_confidence_0_75: 0,\r\n      low_confidence_0_50: 0,\r\n      unknown_confidence: 0\r\n    }\r\n    \r\n    for (const [symbol, metadata] of metadataMap) {\r\n      const confidence = metadata.confidence || 0\r\n      \r\n      if (confidence >= 0.90) {\r\n        distribution.high_confidence_0_90++\r\n      } else if (confidence >= 0.75) {\r\n        distribution.medium_confidence_0_75++\r\n      } else if (confidence >= 0.50) {\r\n        distribution.low_confidence_0_50++\r\n      } else {\r\n        distribution.unknown_confidence++\r\n      }\r\n    }\r\n    \r\n    return distribution\r\n  }\r\n\r\n  // \r\n  createBatches(array, batchSize) {\r\n    const batches = []\r\n    for (let i = 0; i < array.length; i += batchSize) {\r\n      batches.push(array.slice(i, i + batchSize))\r\n    }\r\n    return batches\r\n  }\r\n\r\n  // \r\n  delay(ms) {\r\n    return new Promise(resolve => setTimeout(resolve, ms))\r\n  }\r\n\r\n  // \r\n  clearCache() {\r\n    this.cache.clear()\r\n    console.log('Dynamic metadata cache cleared')\r\n  }\r\n\r\n  // \r\n  getCacheStats() {\r\n    const stats = {\r\n      totalCached: this.cache.size,\r\n      cacheEntries: {}\r\n    }\r\n    \r\n    for (const [symbol, cached] of this.cache.entries()) {\r\n      stats.cacheEntries[symbol] = {\r\n        age: Date.now() - cached.timestamp,\r\n        expired: Date.now() - cached.timestamp > this.cacheExpiry,\r\n        sector: cached.data.sector,\r\n        industry: cached.data.industry,\r\n        confidence: cached.data.confidence\r\n      }\r\n    }\r\n    \r\n    return stats\r\n  }\r\n\r\n  //  - \r\n  async warmupCache(symbols) {\r\n    console.log(`Warming up metadata cache for ${symbols.length} symbols...`)\r\n    \r\n    const startTime = Date.now()\r\n    const results = await this.getBatchMetadata(symbols)\r\n    const duration = Date.now() - startTime\r\n    \r\n    console.log(`Cache warmup completed in ${duration}ms for ${results.size} symbols`)\r\n    \r\n    return {\r\n      duration,\r\n      symbolsProcessed: results.size,\r\n      successRate: (results.size / symbols.length * 100).toFixed(1) + '%'\r\n    }\r\n  }\r\n}\r\n\r\n// \r\nexport const dynamicMetadataService = new DynamicMetadataService()\r\nexport default dynamicMetadataService","// Shared metadata service for stock industry information\r\n//  API (Yahoo Finance) \r\nimport { dataFetcher } from '@/lib/fetcher'\r\nimport { dynamicMetadataService } from './dynamicMetadataService.js'\r\nimport { paths } from './baseUrl.js'\r\n\r\nclass MetadataService {\r\n  constructor() {\r\n    this.cache = new Map()\r\n    this.cacheExpiry = 24 * 60 * 60 * 1000 // 24 hours\r\n    this.lastFetch = null\r\n    this.metadata = null\r\n    this.useDynamicAPI = true //  API\r\n  }\r\n\r\n  //  API\r\n  setUseDynamicAPI(useDynamic) {\r\n    this.useDynamicAPI = useDynamic\r\n    console.log(`Metadata service mode: ${useDynamic ? 'Dynamic API' : 'Static File'}`)\r\n  }\r\n\r\n  // Get metadata for a specific symbol\r\n  async getSymbolMetadata(symbol) {\r\n    if (this.useDynamicAPI) {\r\n      //  Yahoo Finance API\r\n      return await dynamicMetadataService.getSymbolMetadata(symbol)\r\n    } else {\r\n      // \r\n      return await this.getStaticSymbolMetadata(symbol)\r\n    }\r\n  }\r\n\r\n  //  ()\r\n  async getStaticSymbolMetadata(symbol) {\r\n    // Check if we have cached metadata\r\n    if (this.cache.has(symbol)) {\r\n      const cached = this.cache.get(symbol)\r\n      if (Date.now() - cached.timestamp < this.cacheExpiry) {\r\n        return cached.data\r\n      }\r\n    }\r\n\r\n    // If no cached data or expired, fetch fresh metadata\r\n    await this.refreshMetadata()\r\n    \r\n    // Find the symbol in the metadata\r\n    if (this.metadata && this.metadata.items) {\r\n      const symbolMetadata = this.metadata.items.find(m => m.symbol === symbol)\r\n      if (symbolMetadata) {\r\n        console.log(` Found static metadata for ${symbol}:`, symbolMetadata)\r\n        // Cache the result\r\n        this.cache.set(symbol, {\r\n          data: symbolMetadata,\r\n          timestamp: Date.now()\r\n        })\r\n        return symbolMetadata\r\n      }\r\n    }\r\n\r\n    console.warn(` No metadata found for ${symbol}, using default`)\r\n    // Return default metadata if not found\r\n    const defaultMetadata = {\r\n      symbol,\r\n      sector: 'Unknown',\r\n      industry: 'Unknown Industry',\r\n      exchange: this.getDefaultExchange(symbol),\r\n      confidence: 0.0,\r\n      source: 'Static File (Default)',\r\n      isLive: false\r\n    }\r\n\r\n    this.cache.set(symbol, {\r\n      data: defaultMetadata,\r\n      timestamp: Date.now()\r\n    })\r\n\r\n    return defaultMetadata\r\n  }\r\n\r\n  // \r\n  async getBatchMetadata(symbols) {\r\n    if (this.useDynamicAPI) {\r\n      return await dynamicMetadataService.getBatchMetadata(symbols)\r\n    } else {\r\n      // \r\n      console.log(` getBatchMetadata (static mode) for ${symbols.length} symbols:`, symbols)\r\n      const results = new Map()\r\n      \r\n      //  metadata \r\n      await this.refreshMetadata()\r\n      \r\n      for (const symbol of symbols) {\r\n        const metadata = await this.getStaticSymbolMetadata(symbol)\r\n        results.set(symbol, metadata)\r\n        \r\n        //  CRM  IONQ\r\n        if (['CRM', 'IONQ'].includes(symbol)) {\r\n          console.log(` getBatchMetadata result for ${symbol}:`, metadata)\r\n        }\r\n      }\r\n      \r\n      console.log(` getBatchMetadata completed, ${results.size} results`)\r\n      return results\r\n    }\r\n  }\r\n\r\n  //  metadata \r\n  getMetadataUrl() {\r\n    return paths.symbolsMetadata()\r\n  }\r\n\r\n  // Refresh metadata from API\r\n  async refreshMetadata() {\r\n    try {\r\n      console.log(' Refreshing metadata from dataFetcher...')\r\n      \r\n      //  JSON \r\n      let result;\r\n      try {\r\n        result = await dataFetcher.fetchMetadataSnapshot()\r\n      } catch (fetcherError) {\r\n        console.warn(' dataFetcher failed, trying direct fetch:', fetcherError)\r\n        \r\n        //  paths helper\r\n        const url = this.getMetadataUrl()\r\n        console.log(' MetadataService fetching from:', url)\r\n        \r\n        const response = await fetch(url)\r\n        if (!response.ok) {\r\n          throw new Error(`HTTP ${response.status}: ${response.statusText}`)\r\n        }\r\n        const data = await response.json()\r\n        result = { data }\r\n      }\r\n      \r\n      if (result.data) {\r\n        this.metadata = result.data\r\n        this.lastFetch = Date.now()\r\n        console.log(` Metadata refreshed successfully, ${this.metadata.items?.length || 0} items loaded`)\r\n        \r\n        // Debug: Check if CRM is in the loaded data\r\n        if (this.metadata.items) {\r\n          const crmData = this.metadata.items.find(item => item.symbol === 'CRM')\r\n          if (crmData) {\r\n            console.log(' CRM found in refreshed metadata:', crmData)\r\n          } else {\r\n            console.warn(' CRM not found in refreshed metadata')\r\n            console.log('Available symbols:', this.metadata.items.map(item => item.symbol).slice(0, 10))\r\n          }\r\n        }\r\n      } else {\r\n        console.warn(' No data returned from fetchMetadataSnapshot')\r\n      }\r\n    } catch (error) {\r\n      console.warn(' Failed to refresh metadata:', error)\r\n    }\r\n  }\r\n\r\n  // Get default exchange for a symbol\r\n  getDefaultExchange(symbol) {\r\n    const nasdaqSymbols = ['AAPL', 'MSFT', 'GOOGL', 'GOOG', 'AMZN', 'TSLA', 'NVDA', 'META', 'NFLX', 'RKLB', 'ASTS', 'RIVN', 'MDB', 'ONDS', 'PL', 'AVAV', 'CRM', 'AVGO', 'LEU', 'SMR', 'CRWV', 'IONQ', 'PLTR', 'HIMS']\r\n    const nyseSymbols = ['TSM', 'ORCL', 'RDW']\r\n    \r\n    if (nasdaqSymbols.includes(symbol)) {\r\n      return 'NASDAQ'\r\n    } else if (nyseSymbols.includes(symbol)) {\r\n      return 'NYSE'\r\n    }\r\n    \r\n    return 'NASDAQ' // Default\r\n  }\r\n\r\n  // Get industry display name ()\r\n  getIndustryDisplay(metadata) {\r\n    if (this.useDynamicAPI) {\r\n      return dynamicMetadataService.getIndustryDisplay(metadata)\r\n    }\r\n    \r\n    // \r\n    if (!metadata || metadata.confidence < 0.7) {\r\n      return 'Unknown Industry'\r\n    }\r\n    \r\n    return metadata.industry || metadata.sector || 'Unknown Industry'\r\n  }\r\n\r\n  // Get industry category for styling ()\r\n  getIndustryCategory(metadata) {\r\n    if (this.useDynamicAPI) {\r\n      return dynamicMetadataService.getIndustryCategory(metadata)\r\n    }\r\n    \r\n    // \r\n    const industry = this.getIndustryDisplay(metadata)\r\n    \r\n    const industryCategories = {\r\n      'Industrial IoT Solutions': 'tech-iot',\r\n      'Satellite Imaging & Analytics': 'tech-satellite',\r\n      'Database Software': 'tech-software',\r\n      'Enterprise Software': 'tech-software',\r\n      'Semiconductors': 'tech-hardware',\r\n      'Aerospace & Defense': 'industrial-aerospace',\r\n      'Space Infrastructure': 'industrial-space',\r\n      'Satellite Communications': 'communications',\r\n      'Electric Vehicles': 'automotive',\r\n      'Unknown Industry': 'unknown'\r\n    }\r\n    \r\n    return industryCategories[industry] || 'other'\r\n  }\r\n\r\n  // \r\n  async warmupCache(symbols) {\r\n    if (this.useDynamicAPI) {\r\n      return await dynamicMetadataService.warmupCache(symbols)\r\n    } else {\r\n      // \r\n      console.log(`Warming up static metadata cache for ${symbols.length} symbols...`)\r\n      const startTime = Date.now()\r\n      \r\n      await this.refreshMetadata()\r\n      \r\n      for (const symbol of symbols) {\r\n        await this.getStaticSymbolMetadata(symbol)\r\n      }\r\n      \r\n      const duration = Date.now() - startTime\r\n      console.log(`Static cache warmup completed in ${duration}ms`)\r\n      \r\n      return {\r\n        duration,\r\n        symbolsProcessed: symbols.length,\r\n        mode: 'static'\r\n      }\r\n    }\r\n  }\r\n\r\n  // Clear cache\r\n  clearCache() {\r\n    this.cache.clear()\r\n    this.metadata = null\r\n    this.lastFetch = null\r\n    \r\n    if (this.useDynamicAPI) {\r\n      dynamicMetadataService.clearCache()\r\n    }\r\n  }\r\n\r\n  // \r\n  getCacheStats() {\r\n    if (this.useDynamicAPI) {\r\n      return {\r\n        mode: 'dynamic',\r\n        ...dynamicMetadataService.getCacheStats()\r\n      }\r\n    } else {\r\n      return {\r\n        mode: 'static',\r\n        totalCached: this.cache.size,\r\n        lastFetch: this.lastFetch,\r\n        metadataLoaded: !!this.metadata\r\n      }\r\n    }\r\n  }\r\n\r\n  // \r\n  getCurrentMode() {\r\n    return this.useDynamicAPI ? 'dynamic' : 'static'\r\n  }\r\n}\r\n\r\n// Export singleton instance\r\nexport const metadataService = new MetadataService()","//  metadata \r\n//  dataFetcher  metadataService\r\n\r\nimport { paths } from './baseUrl.js';\r\n\r\nclass DirectMetadataLoader {\r\n  constructor() {\r\n    this.cache = null\r\n    this.loading = false\r\n  }\r\n\r\n  async loadMetadata() {\r\n    if (this.cache) {\r\n      return this.cache\r\n    }\r\n\r\n    if (this.loading) {\r\n      // \r\n      while (this.loading) {\r\n        await new Promise(resolve => setTimeout(resolve, 100))\r\n      }\r\n      return this.cache\r\n    }\r\n\r\n    this.loading = true\r\n    \r\n    try {\r\n      const url = paths.symbolsMetadata()\r\n      console.log(' DirectMetadataLoader fetching from:', url)\r\n      \r\n      const response = await fetch(url)\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`)\r\n      }\r\n      \r\n      const data = await response.json()\r\n      this.cache = data\r\n      \r\n      console.log(' DirectMetadataLoader loaded successfully:', data.items?.length, 'items')\r\n      return this.cache\r\n      \r\n    } catch (error) {\r\n      console.error(' DirectMetadataLoader failed:', error)\r\n      return null\r\n    } finally {\r\n      this.loading = false\r\n    }\r\n  }\r\n\r\n  async getSymbolMetadata(symbol) {\r\n    const data = await this.loadMetadata()\r\n    if (!data || !data.items) {\r\n      return {\r\n        symbol,\r\n        sector: 'Unknown',\r\n        industry: 'Unknown Industry',\r\n        exchange: 'NASDAQ',\r\n        confidence: 0.0,\r\n        source: 'DirectLoader (Failed)'\r\n      }\r\n    }\r\n\r\n    const symbolData = data.items.find(item => item.symbol === symbol)\r\n    if (symbolData) {\r\n      return {\r\n        ...symbolData,\r\n        source: 'DirectLoader (Success)'\r\n      }\r\n    }\r\n\r\n    return {\r\n      symbol,\r\n      sector: 'Unknown',\r\n      industry: 'Unknown Industry',\r\n      exchange: 'NASDAQ',\r\n      confidence: 0.0,\r\n      source: 'DirectLoader (Not Found)'\r\n    }\r\n  }\r\n\r\n  async getBatchMetadata(symbols) {\r\n    const results = new Map()\r\n    \r\n    for (const symbol of symbols) {\r\n      const metadata = await this.getSymbolMetadata(symbol)\r\n      results.set(symbol, metadata)\r\n    }\r\n    \r\n    return results\r\n  }\r\n}\r\n\r\nexport const directMetadataLoader = new DirectMetadataLoader()","<template>\r\n  <div class=\"stock-detail\">\r\n    <!-- Breadcrumb -->\r\n    <nav class=\"breadcrumb\">\r\n      <router-link to=\"/stock-overview\" class=\"breadcrumb-link\">Stock Overview</router-link>\r\n      <span class=\"breadcrumb-separator\"></span>\r\n      <span class=\"breadcrumb-current\">{{ symbol }} Analysis</span>\r\n    </nav>\r\n\r\n    <!--  -->\r\n    <div v-if=\"loading\" class=\"loading-with-skeleton\">\r\n      <StockDetailSkeleton />\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div v-else-if=\"error\" class=\"error\">\r\n      <p class=\"text-danger\">{{ error }}</p>\r\n      <button @click=\"refresh\" class=\"btn btn-secondary\">Retry</button>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div v-else>\r\n      <!-- Stock Header -->\r\n      <div class=\"stock-header\">\r\n        <div class=\"stock-info-header\">\r\n          <div class=\"symbol-info\">\r\n            <h3 class=\"symbol\">{{ symbol }}</h3>\r\n            <div class=\"symbol-tags\">\r\n              <span class=\"exchange-tag\">{{ exchange }}</span>\r\n              <span class=\"industry-tag\" :class=\"`industry-${getIndustryCategory()}`\">{{ getIndustry() }}</span>\r\n            </div>\r\n          </div>\r\n          <div class=\"header-actions\">\r\n            <button @click=\"goBack\" class=\"detail-btn\">\r\n              <span class=\"btn-icon\"></span>\r\n              Back to Stock Overview\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- TradingView Widgets Container - Same as StockCard -->\r\n        <div class=\"widgets-container\">\r\n          <!-- Symbol Overview (2/3 width) -->\r\n          <div class=\"widget-overview\">\r\n            <div class=\"widget-header\">\r\n              <h4>Symbol Overview</h4>\r\n            </div>\r\n            <FastTradingViewWidget \r\n              widget-type=\"overview\"\r\n              :symbol=\"symbol\" \r\n              :exchange=\"exchange\"\r\n            />\r\n          </div>\r\n\r\n          <!-- Technical Analysis (1/3 width) -  Symbol Overview  -->\r\n          <div class=\"widget-technical\">\r\n            <div class=\"widget-header\">\r\n              <h4>Technical Analysis</h4>\r\n            </div>\r\n            <FastTradingViewWidget \r\n              widget-type=\"technical\"\r\n              :symbol=\"symbol\" \r\n              :exchange=\"exchange\"\r\n              class=\"technical-overview-style\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Symbol Insight Block -->\r\n      <div class=\"symbol-insight-block\">\r\n        <div class=\"insight-header\">\r\n          <h3>Symbol Insight</h3>\r\n        </div>\r\n        \r\n        <!-- Market Regime Block (Full Width) -->\r\n        <div class=\"insight-full-widget market-regime\">\r\n          <div class=\"widget-header\">\r\n            <h4>Market Regime</h4>\r\n          </div>\r\n          <MarketRegimeWidget\r\n            :symbol=\"symbol\"\r\n            :exchange=\"exchange\"\r\n            :priority=\"2\"\r\n          />\r\n        </div>\r\n\r\n        <!-- Trading Strategy Block (Full Width) -->\r\n        <div class=\"insight-full-widget trading-strategy\">\r\n          <div class=\"widget-header\">\r\n            <h4>Trading Strategy</h4>\r\n          </div>\r\n          <TradingStrategyWidget\r\n            :symbol=\"symbol\"\r\n            :exchange=\"exchange\"\r\n            :priority=\"3\"\r\n          />\r\n        </div>\r\n\r\n        <!-- MFI Volume Profile Block (Full Width) -->\r\n        <div class=\"insight-full-widget mfi-volume-profile\">\r\n          <div class=\"widget-header\">\r\n            <h4>MFI Volume Profile</h4>\r\n          </div>\r\n          <MFIVolumeProfilePanel\r\n            :symbol=\"symbol\"\r\n            :exchange=\"exchange\"\r\n            :priority=\"4\"\r\n          />\r\n        </div>\r\n        \r\n        <!-- Daily and Weekly Insight (Two Columns) -->\r\n        <div class=\"insight-widgets-container\">\r\n          <!-- Daily Insight (MA5) - Left -->\r\n          <div class=\"insight-widget daily-insight\">\r\n            <div class=\"widget-header\">\r\n              <h4>Daily Insight (MA5)</h4>\r\n            </div>\r\n            <LazyTradingViewWidget\r\n              widget-type=\"Daily Insight\"\r\n              :config=\"dailyInsightConfig\"\r\n              script-url=\"https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js\"\r\n              height=\"550px\"\r\n              :priority=\"5\"\r\n            />\r\n          </div>\r\n\r\n          <!-- Weekly Insight (MA4) - Right -->\r\n          <div class=\"insight-widget weekly-insight\">\r\n            <div class=\"widget-header\">\r\n              <h4>Weekly Insight (MA4)</h4>\r\n            </div>\r\n            <LazyTradingViewWidget\r\n              widget-type=\"Weekly Insight\"\r\n              :config=\"weeklyInsightConfig\"\r\n              script-url=\"https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js\"\r\n              height=\"550px\"\r\n              :priority=\"6\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Technical Indicators - Match Market Overview style -->\r\n      <div class=\"widget-container\">\r\n        <div class=\"widget-header\">\r\n          <h3>Technical Indicators</h3>\r\n        </div>\r\n        <TechnicalIndicators :symbol=\"symbol\" :exchange=\"exchange\" />\r\n      </div>\r\n\r\n      <!-- Performance Monitor -->\r\n      <PerformanceMonitor />\r\n\r\n      <!-- Main Content Layout -->\r\n      <div class=\"content-layout\">\r\n        <!-- Row 1: Stock News (Full Width) -->\r\n        <div class=\"widget-container\">\r\n          <div class=\"widget-header\">\r\n            <h3>Latest News</h3>\r\n          </div>\r\n          <StockNews :symbol=\"symbol\" />\r\n        </div>\r\n\r\n        <!-- Row 2: Fundamental Data (Full Width) -->\r\n        <div class=\"widget-container\">\r\n          <div class=\"widget-header\">\r\n            <h3>Fundamental Data</h3>\r\n          </div>\r\n          <TradingViewFundamentalData :symbol=\"symbol\" :exchange=\"exchange\" />\r\n        </div>\r\n\r\n        <!-- Row 3: Company Profile (Full Width) -->\r\n        <div class=\"widget-container\">\r\n          <div class=\"widget-header\">\r\n            <h3>Company Profile</h3>\r\n          </div>\r\n          <TradingViewCompanyProfile \r\n            :symbol=\"symbol\" \r\n            :exchange=\"exchange\" \r\n            color-theme=\"light\"\r\n            :is-transparent=\"true\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport FastTradingViewWidget from '@/components/FastTradingViewWidget.vue'\r\nimport LazyTradingViewWidget from '@/components/LazyTradingViewWidget.vue'\r\nimport MarketRegimeWidget from '@/components/MarketRegimeWidget.vue'\r\nimport TradingStrategyWidget from '@/components/TradingStrategyWidget.vue'\r\nimport MFIVolumeProfilePanel from '@/components/MFIVolumeProfilePanel.vue'\r\nimport TradingViewCompanyProfile from '@/components/TradingViewCompanyProfile.vue'\r\nimport TradingViewFundamentalData from '@/components/TradingViewFundamentalData.vue'\r\nimport TechnicalIndicators from '@/components/TechnicalIndicators.vue'\r\nimport PerformanceMonitor from '@/components/PerformanceMonitor.vue'\r\nimport StockNews from '@/components/StockNews.vue'\r\nimport StockDetailSkeleton from '@/components/StockDetailSkeleton.vue'\r\nimport { metadataService } from '@/utils/metadataService.js'\r\nimport { directMetadataLoader } from '@/utils/directMetadataLoader.js'\r\n\r\nexport default {\r\n  name: 'StockDetail',\r\n  components: {\r\n    FastTradingViewWidget,\r\n    LazyTradingViewWidget,\r\n    MarketRegimeWidget,\r\n    TradingStrategyWidget,\r\n    MFIVolumeProfilePanel,\r\n    TradingViewCompanyProfile,\r\n    TradingViewFundamentalData,\r\n    TechnicalIndicators,\r\n    PerformanceMonitor,\r\n    StockNews,\r\n    StockDetailSkeleton\r\n  },\r\n  data() {\r\n    return {\r\n      loading: true,\r\n      error: null,\r\n      metadata: null\r\n    }\r\n  },\r\n  computed: {\r\n    symbol() {\r\n      return this.$route.params.symbol || 'RKLB'\r\n    },\r\n    exchange() {\r\n      //  metadata \r\n      if (this.metadata && this.metadata.exchange) {\r\n        //  metadata  exchange \r\n        const exchangeMap = {\r\n          'NYQ': 'NYSE',    // New York Stock Exchange\r\n          'NMS': 'NASDAQ',  // NASDAQ Global Select Market\r\n          'NCM': 'NASDAQ',  // NASDAQ Capital Market\r\n          'NGM': 'NASDAQ',  // NASDAQ Global Market\r\n          'ASE': 'AMEX',    // NYSE American ( American Stock Exchange)\r\n          'NYSE': 'NYSE',   //  NYSE\r\n          'NASDAQ': 'NASDAQ' //  NASDAQ\r\n        }\r\n        return exchangeMap[this.metadata.exchange] || this.metadata.exchange\r\n      }\r\n      \r\n      //  symbol \r\n      const symbol = this.symbol\r\n      \r\n      // NYSE  ( symbols_metadata.json )\r\n      if (['ORCL', 'TSM', 'RDW', 'CRM', 'PL', 'LEU', 'SMR', 'IONQ', 'HIMS'].includes(symbol)) {\r\n        return 'NYSE'\r\n      }\r\n      // NASDAQ \r\n      else if (['ASTS', 'RIVN', 'ONDS', 'AVAV', 'MDB', 'RKLB', 'NVDA', 'AVGO', 'AMZN', 'GOOG', 'META', 'NFLX', 'CRWV', 'PLTR', 'TSLA'].includes(symbol)) {\r\n        return 'NASDAQ'\r\n      }\r\n      \r\n      return 'NASDAQ' // \r\n    },\r\n\r\n    dailyInsightConfig() {\r\n      return {\r\n        \"lineWidth\": 2,\r\n        \"lineType\": 0,\r\n        \"chartType\": \"candlesticks\",\r\n        \"showVolume\": true,\r\n        \"fontColor\": \"rgb(106, 109, 120)\",\r\n        \"gridLineColor\": \"rgba(46, 46, 46, 0.06)\",\r\n        \"volumeUpColor\": \"rgba(34, 171, 148, 0.5)\",\r\n        \"volumeDownColor\": \"rgba(247, 82, 95, 0.5)\",\r\n        \"backgroundColor\": \"#ffffff\",\r\n        \"widgetFontColor\": \"#0F0F0F\",\r\n        \"upColor\": \"#22ab94\",\r\n        \"downColor\": \"#f7525f\",\r\n        \"borderUpColor\": \"#22ab94\",\r\n        \"borderDownColor\": \"#f7525f\",\r\n        \"wickUpColor\": \"#22ab94\",\r\n        \"wickDownColor\": \"#f7525f\",\r\n        \"colorTheme\": \"light\",\r\n        \"isTransparent\": true,\r\n        \"locale\": \"en\",\r\n        \"chartOnly\": false,\r\n        \"scalePosition\": \"right\",\r\n        \"scaleMode\": \"Normal\",\r\n        \"fontFamily\": \"-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif\",\r\n        \"valuesTracking\": \"1\",\r\n        \"changeMode\": \"price-and-percent\",\r\n        \"symbols\": [[`${this.exchange}:${this.symbol}|6M`]],\r\n        \"dateRanges\": [\"6m|1D\"],\r\n        \"fontSize\": \"10\",\r\n        \"headerFontSize\": \"medium\",\r\n        \"autosize\": true,\r\n        \"width\": \"100%\",\r\n        \"height\": \"100%\",\r\n        \"noTimeScale\": false,\r\n        \"hideDateRanges\": false,\r\n        \"showMA\": true,\r\n        \"maLength\": \"5\",\r\n        \"maLineColor\": \"#2962FF\",\r\n        \"maLineWidth\": 1,\r\n        \"hideMarketStatus\": false,\r\n        \"hideSymbolLogo\": false\r\n      }\r\n    },\r\n\r\n    weeklyInsightConfig() {\r\n      return {\r\n        \"lineWidth\": 2,\r\n        \"lineType\": 0,\r\n        \"chartType\": \"candlesticks\",\r\n        \"showVolume\": true,\r\n        \"fontColor\": \"rgb(106, 109, 120)\",\r\n        \"gridLineColor\": \"rgba(46, 46, 46, 0.06)\",\r\n        \"volumeUpColor\": \"rgba(34, 171, 148, 0.5)\",\r\n        \"volumeDownColor\": \"rgba(247, 82, 95, 0.5)\",\r\n        \"backgroundColor\": \"#ffffff\",\r\n        \"widgetFontColor\": \"#0F0F0F\",\r\n        \"upColor\": \"#22ab94\",\r\n        \"downColor\": \"#f7525f\",\r\n        \"borderUpColor\": \"#22ab94\",\r\n        \"borderDownColor\": \"#f7525f\",\r\n        \"wickUpColor\": \"#22ab94\",\r\n        \"wickDownColor\": \"#f7525f\",\r\n        \"colorTheme\": \"light\",\r\n        \"isTransparent\": true,\r\n        \"locale\": \"en\",\r\n        \"chartOnly\": false,\r\n        \"scalePosition\": \"right\",\r\n        \"scaleMode\": \"Normal\",\r\n        \"fontFamily\": \"-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif\",\r\n        \"valuesTracking\": \"1\",\r\n        \"changeMode\": \"price-and-percent\",\r\n        \"symbols\": [[`${this.exchange}:${this.symbol}|6M`]],\r\n        \"dateRanges\": [\"6m|1W\"],\r\n        \"fontSize\": \"10\",\r\n        \"headerFontSize\": \"medium\",\r\n        \"autosize\": true,\r\n        \"width\": \"100%\",\r\n        \"height\": \"100%\",\r\n        \"noTimeScale\": false,\r\n        \"hideDateRanges\": false,\r\n        \"showMA\": true,\r\n        \"maLength\": \"4\",\r\n        \"maLineColor\": \"#2962FF\",\r\n        \"maLineWidth\": 1,\r\n        \"hideMarketStatus\": false,\r\n        \"hideSymbolLogo\": false\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    symbol() {\r\n      //  symbol \r\n      this.scrollToTop()\r\n      this.loadMetadata()\r\n    },\r\n    $route() {\r\n      // \r\n      this.scrollToTop()\r\n    }\r\n  },\r\n    mounted() {\r\n    // \r\n    this.scrollToTop()\r\n    \r\n    //  API  sector/industry \r\n    metadataService.setUseDynamicAPI(true)\r\n    \r\n    this.loadMetadata()\r\n    this.initializePage()\r\n  },\r\n  methods: {\r\n    async initializePage() {\r\n      try {\r\n        // Remove fixed delay for better performance\r\n        this.loading = false\r\n      } catch (err) {\r\n        this.error = String(err)\r\n        this.loading = false\r\n      }\r\n    },\r\n    async refresh() {\r\n      this.loading = true\r\n      this.error = null\r\n      await this.initializePage()\r\n    },\r\n    async loadMetadata() {\r\n      try {\r\n        //  DirectMetadataLoader  StockOverview \r\n        this.metadata = await directMetadataLoader.getSymbolMetadata(this.symbol)\r\n        console.log(` StockDetail loaded metadata for ${this.symbol}:`, this.metadata)\r\n      } catch (error) {\r\n        console.warn(`Failed to load metadata for ${this.symbol}:`, error)\r\n        this.metadata = null\r\n      }\r\n    },\r\n\r\n    getSector() {\r\n      if (!this.metadata || this.metadata.confidence < 0.7) {\r\n        return 'Unknown'\r\n      }\r\n      return this.metadata.sector || 'Unknown'\r\n    },\r\n\r\n    getIndustry() {\r\n      if (!this.metadata) {\r\n        return 'Unknown Industry'\r\n      }\r\n      \r\n      //  PRD confidence < 0.7  Unknown\r\n      if (this.metadata.confidence < 0.7) {\r\n        return 'Unknown Industry'\r\n      }\r\n      \r\n      return this.metadata.industry || this.metadata.sector || 'Unknown Industry'\r\n    },\r\n\r\n    getIndustryCategory() {\r\n      const industry = this.getIndustry()\r\n      \r\n      //  industry \r\n      const industryCategories = {\r\n        'Software - Application': 'tech-software',\r\n        'Computer Hardware': 'tech-hardware',\r\n        'Communication Equipment': 'tech-satellite',\r\n        'Database Software': 'tech-software',\r\n        'Enterprise Software': 'tech-software',\r\n        'Semiconductors': 'tech-hardware',\r\n        'Aerospace & Defense': 'industrial-aerospace',\r\n        'Space Infrastructure': 'industrial-space',\r\n        'Satellite Communications': 'communications',\r\n        'Auto Manufacturers': 'automotive',\r\n        'Unknown Industry': 'unknown'\r\n      }\r\n      \r\n      return industryCategories[industry] || 'other'\r\n    },\r\n\r\n    goBack() {\r\n      console.log('Navigating back to stock overview')\r\n      this.$router.push({ name: 'stock-overview' }).catch(err => {\r\n        console.error('Navigation error:', err)\r\n      })\r\n    },\r\n\r\n    // \r\n    scrollToTop() {\r\n      //  nextTick  DOM \r\n      this.$nextTick(() => {\r\n        window.scrollTo({\r\n          top: 0,\r\n          left: 0,\r\n          behavior: 'smooth'\r\n        })\r\n        \r\n        // \r\n        setTimeout(() => {\r\n          window.scrollTo(0, 0)\r\n        }, 100)\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.stock-detail {\r\n  background: #f5f5f5; /*  main-content  */\r\n  padding: 1rem;\r\n  min-height: 100vh;\r\n}\r\n\r\n/* Breadcrumb */\r\n.breadcrumb {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 1rem;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.breadcrumb-link {\r\n  color: #007bff;\r\n  text-decoration: none;\r\n  font-weight: 500;\r\n}\r\n\r\n.breadcrumb-link:hover {\r\n  text-decoration: underline;\r\n}\r\n\r\n.breadcrumb-separator {\r\n  margin: 0 0.5rem;\r\n  color: #6c757d;\r\n}\r\n\r\n.breadcrumb-current {\r\n  color: #495057;\r\n  font-weight: 600;\r\n}\r\n\r\n/* Stock Header - Match Stock Overview Style */\r\n.stock-header {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 12px;\r\n  padding: 1.5rem;\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.stock-info-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding-bottom: 1rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n/* Widgets Container - Same as StockCard */\r\n.widgets-container {\r\n  display: grid;\r\n  grid-template-columns: 2fr 1fr; /* 2/3  1/3  */\r\n  gap: 1.5rem;\r\n  margin-bottom: 0px; /*  padding */\r\n  min-height: 450px;\r\n  will-change: transform;\r\n}\r\n\r\n.widget-overview,\r\n.widget-technical {\r\n  background: #fafafa;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n  display: flex;\r\n  flex-direction: column;\r\n  contain: layout style paint;\r\n}\r\n\r\n.widget-overview {\r\n  min-height: 440px; /* Symbol Overview  Technical Analysis  */\r\n  height: 440px;\r\n}\r\n\r\n.widget-technical {\r\n  min-height: 440px; /* Technical Analysis  440px  scroll bar */\r\n  height: 440px;\r\n}\r\n\r\n.widget-header {\r\n  padding: 0.75rem 1rem;\r\n  border-bottom: 1px solid #e9ecef;\r\n  border-top-left-radius: 8px;\r\n  border-top-right-radius: 8px;\r\n  flex-shrink: 0;\r\n  margin: 0; /*  Symbol Overview  Technical Analysis  header  margin */\r\n}\r\n\r\n.widget-header h4 {\r\n  font-size: 0.95rem;\r\n  font-weight: 600;\r\n  color: #495057;\r\n  margin: 0;\r\n}\r\n\r\n/*  widget  */\r\n.widget-overview > :not(.widget-header) {\r\n  flex: 1;\r\n  min-height: 390px; /* Symbol Overview  */\r\n}\r\n\r\n.widget-technical > :not(.widget-header) {\r\n  flex: 1;\r\n  min-height: 390px; /* Technical Analysis  390px */\r\n}\r\n\r\n/* Technical Analysis  Symbol Overview  */\r\n.technical-overview-style {\r\n  background: #ffffff !important;\r\n  padding: 0px !important; /*  0px  */\r\n  box-sizing: border-box !important;\r\n}\r\n\r\n/* Technical Analysis loading  */\r\n.technical-overview-style .fast-loading {\r\n  background: #ffffff; /*  */\r\n  border-radius: 0; /*  */\r\n  margin: 0; /*  padding */\r\n}\r\n\r\n/* Technical Analysis error  */\r\n.technical-overview-style .fast-error {\r\n  background: #ffffff; /*  */\r\n  border: 1px solid #e0e0e0; /*  */\r\n  border-radius: 0; /*  */\r\n  color: #6c757d; /*  */\r\n  margin: 0; /*  padding */\r\n}\r\n\r\n/* Symbol Insight Block - Match stock-card style */\r\n.symbol-insight-block {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 12px;\r\n  padding: 1.5rem;\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.insight-header {\r\n  padding-bottom: 1rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.insight-header h3 {\r\n  font-size: 1.25rem;\r\n  font-weight: 600;\r\n  color: #495057;\r\n  margin: 0;\r\n}\r\n\r\n/* Insight Widgets Container */\r\n.insight-widgets-container {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 1.5rem;\r\n}\r\n\r\n/* Full Width Insight Widgets */\r\n.insight-full-widget {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-height: 900px; /* 850px + header space */\r\n  height: 900px;\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n/* MFI Volume Profile specific styling */\r\n.insight-full-widget.mfi-volume-profile {\r\n  /*  */\r\n  min-height: auto;\r\n  height: auto;\r\n}\r\n\r\n.insight-full-widget .widget-header {\r\n  padding: 0.75rem 1rem;\r\n  border-bottom: 1px solid #e9ecef;\r\n  border-top-left-radius: 8px;\r\n  border-top-right-radius: 8px;\r\n  flex-shrink: 0;\r\n  margin: 0;\r\n}\r\n\r\n.insight-full-widget .widget-header h4 {\r\n  font-size: 0.95rem;\r\n  font-weight: 600;\r\n  color: #495057;\r\n  margin: 0;\r\n}\r\n\r\n.insight-full-widget > :not(.widget-header) {\r\n  flex: 1;\r\n  min-height: 850px;\r\n  height: 850px;\r\n}\r\n\r\n/* MFI Volume Profile content area */\r\n.insight-full-widget.mfi-volume-profile > :not(.widget-header) {\r\n  /*  */\r\n  min-height: auto;\r\n  height: auto;\r\n}\r\n\r\n.insight-widget {\r\n  background: white; /*  */\r\n  border: 1px solid #e0e0e0; /*  */\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-height: 600px; /*  500px  600px */\r\n  height: auto; /*  auto  */\r\n}\r\n\r\n.insight-widget .widget-header {\r\n  padding-bottom: 0.75rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n  margin-bottom: 1rem;\r\n  flex-shrink: 0;\r\n  height: auto; /*  auto  */\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.insight-widget .widget-header h4 {\r\n  font-size: 0.95rem;\r\n  font-weight: 600;\r\n  color: #495057;\r\n  margin: 0;\r\n  line-height: 1.2;\r\n}\r\n\r\n.insight-widget > :not(.widget-header) {\r\n  flex: 1;\r\n  min-height: 550px; /*  */\r\n  height: 550px; /*  */\r\n  overflow: visible; /*  iframe  */\r\n}\r\n\r\n/* Symbol Insight  lazy-widget  8px padding */\r\n.insight-widget .lazy-widget {\r\n  padding: 8px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.symbol-info .symbol {\r\n  font-size: 1.5rem;\r\n  font-weight: 700;\r\n  color: #333;\r\n  margin: 0 0 0.5rem 0;\r\n}\r\n\r\n.symbol-tags {\r\n  display: flex;\r\n  gap: 0.5rem;\r\n  align-items: center;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.exchange-tag {\r\n  font-size: 0.75rem;\r\n  color: #007bff;\r\n  background-color: #e7f3ff;\r\n  padding: 0.25rem 0.5rem;\r\n  border-radius: 4px;\r\n  font-weight: 500;\r\n  border: 1px solid #90caf9;\r\n  display: inline-block;\r\n}\r\n\r\n.industry-tag {\r\n  font-size: 0.75rem;\r\n  color: #666;\r\n  background-color: #f5f5f5;\r\n  padding: 0.25rem 0.5rem;\r\n  border-radius: 4px;\r\n  font-weight: 500;\r\n  border: 1px solid #e0e0e0;\r\n  display: inline-block;\r\n}\r\n\r\n/*  */\r\n.industry-tag.industry-tech-iot,\r\n.industry-tag.industry-tech-satellite,\r\n.industry-tag.industry-tech-software,\r\n.industry-tag.industry-tech-hardware,\r\n.industry-tag.industry-industrial-aerospace,\r\n.industry-tag.industry-industrial-space,\r\n.industry-tag.industry-communications,\r\n.industry-tag.industry-automotive,\r\n.industry-tag.industry-unknown,\r\n.industry-tag.industry-other {\r\n  background-color: #f5f5f5;\r\n  color: #666;\r\n  border-color: #e0e0e0;\r\n}\r\n\r\n/* Header Actions */\r\n.header-actions {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 1rem;\r\n}\r\n\r\n.detail-btn {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 0.5rem;\r\n  padding: 0.5rem 1rem;\r\n  background: linear-gradient(135deg, #6c757d, #5a6268);\r\n  color: white;\r\n  border: none;\r\n  border-radius: 6px;\r\n  font-size: 0.85rem;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n  box-shadow: 0 2px 4px rgba(108, 117, 125, 0.2);\r\n  line-height: 1;\r\n  min-height: 36px;\r\n}\r\n\r\n.detail-btn:hover {\r\n  background: linear-gradient(135deg, #5a6268, #495057);\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 4px 8px rgba(108, 117, 125, 0.3);\r\n}\r\n\r\n.btn-icon {\r\n  font-size: 1rem;\r\n  line-height: 1;\r\n  display: inline-flex;\r\n  align-items: center;\r\n}\r\n\r\n/* Widget Container - Match Market Overview Style */\r\n.widget-container {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  margin-bottom: 2rem;\r\n  overflow: hidden;\r\n  position: relative;\r\n}\r\n\r\n.widget-container .widget-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 1rem; /*  widget-container  header margin */\r\n  padding-bottom: 0.75rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.widget-container .widget-header h3 {\r\n  font-size: 1.1rem;\r\n  font-weight: 600;\r\n  color: #333;\r\n  margin: 0;\r\n}\r\n\r\n/* Content Layout - Row-based Structure */\r\n.content-layout {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0; /*  gap widget-container  margin-bottom  */\r\n  margin-top: 0; /*  margin-top */\r\n}\r\n\r\n/*  */\r\n@media (max-width: 1200px) {\r\n  .widgets-container {\r\n    grid-template-columns: 1fr;\r\n    gap: 1rem;\r\n  }\r\n  \r\n  .insight-widgets-container {\r\n    grid-template-columns: 1fr;\r\n    gap: 1rem;\r\n  }\r\n  \r\n  .insight-full-widget {\r\n    min-height: 800px;\r\n    height: 800px;\r\n  }\r\n  \r\n  .insight-full-widget.mfi-volume-profile {\r\n    /*  */\r\n    min-height: auto;\r\n    height: auto;\r\n  }\r\n  \r\n  .insight-full-widget > :not(.widget-header) {\r\n    min-height: 750px;\r\n    height: 750px;\r\n  }\r\n  \r\n  .insight-full-widget.mfi-volume-profile > :not(.widget-header) {\r\n    /*  */\r\n    min-height: auto;\r\n    height: auto;\r\n  }\r\n  \r\n  .symbol-insight-block {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .widget-container {\r\n    padding: 0.75rem;\r\n    margin-bottom: 1.5rem;\r\n  }\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .stock-detail {\r\n    padding: 0.5rem;\r\n  }\r\n  \r\n  .stock-header {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .symbol-insight-block {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .widget-container {\r\n    padding: 0.75rem;\r\n    margin-bottom: 1.5rem;\r\n  }\r\n  \r\n  .stock-info-header {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 0.75rem;\r\n  }\r\n  \r\n  .header-actions {\r\n    width: 100%;\r\n    justify-content: space-between;\r\n  }\r\n  \r\n  .widgets-container {\r\n    grid-template-columns: 1fr;\r\n    gap: 1rem;\r\n    min-height: auto;\r\n  }\r\n  \r\n  .insight-widgets-container {\r\n    grid-template-columns: 1fr;\r\n    gap: 1rem;\r\n  }\r\n  \r\n  .insight-full-widget {\r\n    min-height: 700px;\r\n    height: 700px;\r\n  }\r\n  \r\n  .insight-full-widget.mfi-volume-profile {\r\n    /*  */\r\n    min-height: auto;\r\n    height: auto;\r\n  }\r\n  \r\n  .insight-full-widget > :not(.widget-header) {\r\n    min-height: 650px;\r\n    height: 650px;\r\n  }\r\n  \r\n  .insight-full-widget.mfi-volume-profile > :not(.widget-header) {\r\n    /*  */\r\n    min-height: auto;\r\n    height: auto;\r\n  }\r\n  \r\n  .insight-widget {\r\n    height: auto; /*  */\r\n    min-height: 500px;\r\n  }\r\n  \r\n  .insight-widget > :not(.widget-header) {\r\n    height: 500px;\r\n    min-height: 500px;\r\n  }\r\n  \r\n  .widget-overview {\r\n    height: 380px; /*  */\r\n    min-height: 380px;\r\n  }\r\n  \r\n  .widget-technical {\r\n    height: 380px; /*  Technical Analysis  */\r\n    min-height: 380px;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .breadcrumb {\r\n    font-size: 0.8rem;\r\n  }\r\n  \r\n  .stock-header {\r\n    padding: 0.75rem;\r\n  }\r\n  \r\n  .symbol-insight-block {\r\n    padding: 0.75rem;\r\n  }\r\n  \r\n  .insight-header h3 {\r\n    font-size: 1.1rem;\r\n  }\r\n  \r\n  .symbol-info .symbol {\r\n    font-size: 1.2rem;\r\n  }\r\n  \r\n  .widget-header {\r\n    padding: 0.5rem 0.75rem;\r\n  }\r\n  \r\n  .widget-header h4 {\r\n    font-size: 0.9rem;\r\n  }\r\n  \r\n  .widget-title {\r\n    font-size: 0.9rem;\r\n    padding: 0.5rem 0.75rem;\r\n  }\r\n  \r\n  .detail-btn {\r\n    padding: 0.4rem 0.8rem;\r\n    font-size: 0.8rem;\r\n  }\r\n  \r\n  .widgets-container {\r\n    gap: 0.75rem;\r\n  }\r\n  \r\n  .insight-widgets-container {\r\n    gap: 0.75rem;\r\n  }\r\n  \r\n  .insight-full-widget {\r\n    min-height: 600px;\r\n    height: 600px;\r\n    margin-bottom: 1rem;\r\n  }\r\n  \r\n  .insight-full-widget.mfi-volume-profile {\r\n    /*  */\r\n    min-height: auto;\r\n    height: auto;\r\n  }\r\n  \r\n  .insight-full-widget > :not(.widget-header) {\r\n    min-height: 550px;\r\n    height: 550px;\r\n  }\r\n  \r\n  .insight-full-widget.mfi-volume-profile > :not(.widget-header) {\r\n    /*  */\r\n    min-height: auto;\r\n    height: auto;\r\n  }\r\n  \r\n  .insight-widget {\r\n    height: auto; /*  */\r\n    min-height: 450px;\r\n  }\r\n  \r\n  .insight-widget > :not(.widget-header) {\r\n    height: 450px;\r\n    min-height: 450px;\r\n  }\r\n  \r\n  .widget-overview {\r\n    height: 330px; /*  */\r\n    min-height: 330px;\r\n  }\r\n  \r\n  .widget-technical {\r\n    height: 330px; /*  Technical Analysis  */\r\n    min-height: 330px;\r\n  }\r\n  \r\n  .content-layout {\r\n    margin-top: 0.75rem; /*  */\r\n  }\r\n  \r\n  .company-profile-row .widget-container,\r\n  .fundamental-data-row .widget-container {\r\n    height: 300px;\r\n    min-height: 300px;\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"top-stories-container\">\r\n    <div class=\"widget-header\">\r\n      <h3>Top Stories</h3>\r\n    </div>\r\n    \r\n    <div class=\"top-stories-widget\" :id=\"widgetId\" ref=\"container\">\r\n      <div v-if=\"!loaded && !error\" class=\"stories-loading\">\r\n        <div class=\"loading-spinner\"></div>\r\n        <span>Loading market news...</span>\r\n      </div>\r\n      \r\n      <div v-if=\"error\" class=\"stories-error\">\r\n        <span> Failed to load market news</span>\r\n        <button @click=\"retry\" class=\"retry-btn\">Retry</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'TradingViewTopStories',\r\n  props: {\r\n    displayMode: {\r\n      type: String,\r\n      default: 'regular'\r\n    },\r\n    feedMode: {\r\n      type: String,\r\n      default: 'market'\r\n    },\r\n    colorTheme: {\r\n      type: String,\r\n      default: 'light'\r\n    },\r\n    isTransparent: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    locale: {\r\n      type: String,\r\n      default: 'en'\r\n    },\r\n    market: {\r\n      type: String,\r\n      default: 'stock'\r\n    },\r\n    height: {\r\n      type: String,\r\n      default: '600px'\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      loaded: false,\r\n      error: false,\r\n      widgetId: `top-stories-${Date.now()}`\r\n    }\r\n  },\r\n  mounted() {\r\n    this.loadTopStories()\r\n  },\r\n  methods: {\r\n    async loadTopStories() {\r\n      this.loaded = false\r\n      this.error = false\r\n\r\n      try {\r\n        await this.$nextTick()\r\n        this.createTopStories()\r\n      } catch (err) {\r\n        console.error('Failed to load top stories:', err)\r\n        this.error = true\r\n      }\r\n    },\r\n\r\n    createTopStories() {\r\n      const container = this.$refs.container\r\n      if (!container) return\r\n\r\n      //  widget\r\n      container.innerHTML = ''\r\n\r\n      //  widget \r\n      const widgetContainer = document.createElement('div')\r\n      widgetContainer.className = 'tradingview-widget-container'\r\n      widgetContainer.style.height = '100%'\r\n      widgetContainer.style.width = '100%'\r\n\r\n      const widgetContent = document.createElement('div')\r\n      widgetContent.className = 'tradingview-widget-container__widget'\r\n\r\n      widgetContainer.appendChild(widgetContent)\r\n      container.appendChild(widgetContainer)\r\n\r\n      // \r\n      const config = {\r\n        \"displayMode\": this.displayMode,\r\n        \"feedMode\": this.feedMode,\r\n        \"colorTheme\": this.colorTheme,\r\n        \"isTransparent\": this.isTransparent,\r\n        \"locale\": this.locale,\r\n        \"market\": this.market,\r\n        \"width\": \"100%\",\r\n        \"height\": \"100%\"\r\n      }\r\n\r\n      // \r\n      const script = document.createElement('script')\r\n      script.type = 'text/javascript'\r\n      script.src = 'https://s3.tradingview.com/external-embedding/embed-widget-timeline.js'\r\n      script.async = true\r\n      script.innerHTML = JSON.stringify(config)\r\n\r\n      // \r\n      script.onload = () => {\r\n        this.loaded = true\r\n        console.log('TradingView Top Stories loaded successfully')\r\n      }\r\n\r\n      script.onerror = () => {\r\n        this.error = true\r\n        console.error('TradingView Top Stories failed to load')\r\n      }\r\n\r\n      //  widget \r\n      widgetContent.appendChild(script)\r\n\r\n      // \r\n      setTimeout(() => {\r\n        if (!this.loaded && !this.error) {\r\n          this.loaded = true\r\n        }\r\n      }, 8000)\r\n    },\r\n\r\n    async retry() {\r\n      await this.loadTopStories()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.top-stories-container {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  margin-bottom: 2rem;\r\n  overflow: hidden;\r\n  position: relative;\r\n}\r\n\r\n.widget-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 1rem;\r\n  padding-bottom: 0.75rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.widget-header h3 {\r\n  font-size: 1.1rem;\r\n  font-weight: 600;\r\n  color: #333;\r\n  margin: 0;\r\n}\r\n\r\n.top-stories-widget {\r\n  height: 650px;\r\n  min-height: 650px;\r\n  width: 100%;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n/* Loading  */\r\n.stories-loading {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 0.5rem;\r\n  height: 100%;\r\n  color: #6c757d;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.loading-spinner {\r\n  width: 20px;\r\n  height: 20px;\r\n  border: 2px solid #e9ecef;\r\n  border-top: 2px solid #007bff;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n/* Error  */\r\n.stories-error {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 1rem;\r\n  height: 100%;\r\n  background: #f8d7da;\r\n  border: 1px solid #f5c6cb;\r\n  color: #721c24;\r\n  border-radius: 4px;\r\n}\r\n\r\n.retry-btn {\r\n  padding: 0.25rem 0.75rem;\r\n  background: #dc3545;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.8rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.retry-btn:hover {\r\n  background: #c82333;\r\n}\r\n\r\n/* TradingView Widget  */\r\n:global(.top-stories-container .tradingview-widget-container) {\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n  overflow: hidden !important;\r\n  position: relative !important;\r\n}\r\n\r\n:global(.top-stories-container .tradingview-widget-container__widget) {\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n  overflow: hidden !important;\r\n}\r\n\r\n/*  */\r\n@media (max-width: 768px) {\r\n  .top-stories-widget {\r\n    height: 550px;\r\n    min-height: 550px;\r\n  }\r\n  \r\n  .widget-header {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 0.5rem;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .top-stories-container {\r\n    padding: 0.75rem;\r\n    margin: 0 -0.25rem 2rem -0.25rem;\r\n  }\r\n  \r\n  .top-stories-widget {\r\n    height: 500px;\r\n    min-height: 500px;\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"top-stories-skeleton\">\r\n    <!-- Page Header Skeleton -->\r\n    <div class=\"skeleton-page-header\">\r\n      <div class=\"skeleton-page-title\"></div>\r\n      <div class=\"skeleton-page-description\"></div>\r\n    </div>\r\n\r\n    <!-- Top Stories Widget Skeleton -->\r\n    <div class=\"skeleton-widget-container\">\r\n      <div class=\"skeleton-stories-area\">\r\n        <div class=\"skeleton-story-item\" v-for=\"i in 10\" :key=\"i\">\r\n          <div class=\"skeleton-story-time\"></div>\r\n          <div class=\"skeleton-story-title\"></div>\r\n          <div class=\"skeleton-story-content\"></div>\r\n          <div class=\"skeleton-story-tags\">\r\n            <div class=\"skeleton-story-tag\" v-for=\"j in 3\" :key=\"j\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Configuration Info Skeleton -->\r\n    <div class=\"skeleton-config-info\">\r\n      <div class=\"skeleton-config-title\"></div>\r\n      <div class=\"skeleton-config-list\">\r\n        <div class=\"skeleton-config-item\" v-for=\"i in 5\" :key=\"i\">\r\n          <div class=\"skeleton-config-label\"></div>\r\n          <div class=\"skeleton-config-value\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'TopStoriesSkeleton'\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/*  */\r\n@keyframes shimmer {\r\n  0% {\r\n    background-position: -200px 0;\r\n  }\r\n  100% {\r\n    background-position: calc(200px + 100%) 0;\r\n  }\r\n}\r\n\r\n.top-stories-skeleton {\r\n  padding: 0;\r\n  overflow-x: hidden;\r\n  max-width: 100%;\r\n}\r\n\r\n/*  */\r\n.skeleton-base {\r\n  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\r\n  background-size: 200px 100%;\r\n  animation: shimmer 1.5s infinite linear;\r\n  border-radius: 4px;\r\n}\r\n\r\n/* Page Header  */\r\n.skeleton-page-header {\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.skeleton-page-title {\r\n  @extend .skeleton-base;\r\n  width: 280px;\r\n  height: 32px;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.skeleton-page-description {\r\n  @extend .skeleton-base;\r\n  width: 350px;\r\n  height: 16px;\r\n  margin-bottom: 0.75rem;\r\n}\r\n\r\n/* Widget  */\r\n.skeleton-widget-container {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  margin-bottom: 2rem;\r\n  overflow: hidden;\r\n  position: relative;\r\n  min-height: 650px;\r\n}\r\n\r\n/* Top Stories  */\r\n.skeleton-stories-area {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1rem;\r\n  min-height: 600px;\r\n}\r\n\r\n.skeleton-story-item {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.75rem;\r\n  padding: 1.5rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n  background: #fafafa;\r\n  border-radius: 8px;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.skeleton-story-time {\r\n  @extend .skeleton-base;\r\n  width: 120px;\r\n  height: 14px;\r\n}\r\n\r\n.skeleton-story-title {\r\n  @extend .skeleton-base;\r\n  width: 85%;\r\n  height: 20px;\r\n}\r\n\r\n.skeleton-story-content {\r\n  @extend .skeleton-base;\r\n  width: 70%;\r\n  height: 16px;\r\n}\r\n\r\n.skeleton-story-tags {\r\n  display: flex;\r\n  gap: 0.5rem;\r\n  margin-top: 0.5rem;\r\n}\r\n\r\n.skeleton-story-tag {\r\n  @extend .skeleton-base;\r\n  width: 60px;\r\n  height: 18px;\r\n  border-radius: 9px;\r\n}\r\n\r\n/* Configuration Info  */\r\n.skeleton-config-info {\r\n  background: #f8f9fa;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  margin-top: 2rem;\r\n}\r\n\r\n.skeleton-config-title {\r\n  @extend .skeleton-base;\r\n  width: 180px;\r\n  height: 20px;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.skeleton-config-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.skeleton-config-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.skeleton-config-label {\r\n  @extend .skeleton-base;\r\n  width: 120px;\r\n  height: 16px;\r\n}\r\n\r\n.skeleton-config-value {\r\n  @extend .skeleton-base;\r\n  width: 80px;\r\n  height: 16px;\r\n}\r\n\r\n/*  */\r\n.skeleton-page-title,\r\n.skeleton-page-description,\r\n.skeleton-story-time,\r\n.skeleton-story-title,\r\n.skeleton-story-content,\r\n.skeleton-story-tag,\r\n.skeleton-config-title,\r\n.skeleton-config-label,\r\n.skeleton-config-value {\r\n  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\r\n  background-size: 200px 100%;\r\n  animation: shimmer 1.5s infinite linear;\r\n  border-radius: 4px;\r\n}\r\n\r\n/*  */\r\n@media (max-width: 768px) {\r\n  .skeleton-widget-container {\r\n    padding: 0.75rem;\r\n    margin-bottom: 1rem;\r\n    min-height: 500px;\r\n  }\r\n  \r\n  .skeleton-stories-area {\r\n    min-height: 450px;\r\n  }\r\n  \r\n  .skeleton-story-item {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .skeleton-config-info {\r\n    padding: 0.75rem;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .skeleton-widget-container {\r\n    padding: 0.5rem;\r\n    margin: 0 -0.25rem 1rem -0.25rem;\r\n    min-height: 400px;\r\n  }\r\n  \r\n  .skeleton-stories-area {\r\n    min-height: 350px;\r\n  }\r\n  \r\n  .skeleton-story-item {\r\n    padding: 0.75rem;\r\n  }\r\n  \r\n  .skeleton-config-info {\r\n    padding: 0.5rem;\r\n    margin: 0 -0.25rem 2rem -0.25rem;\r\n  }\r\n  \r\n  .skeleton-story-tags {\r\n    flex-wrap: wrap;\r\n  }\r\n}\r\n\r\n/*  */\r\n.skeleton-story-item:nth-child(1) { animation-delay: 0.1s; }\r\n.skeleton-story-item:nth-child(2) { animation-delay: 0.2s; }\r\n.skeleton-story-item:nth-child(3) { animation-delay: 0.3s; }\r\n.skeleton-story-item:nth-child(4) { animation-delay: 0.4s; }\r\n.skeleton-story-item:nth-child(5) { animation-delay: 0.5s; }\r\n\r\n.skeleton-story-tag:nth-child(1) { animation-delay: 0.1s; }\r\n.skeleton-story-tag:nth-child(2) { animation-delay: 0.2s; }\r\n.skeleton-story-tag:nth-child(3) { animation-delay: 0.3s; }\r\n\r\n.skeleton-config-item:nth-child(odd) { animation-delay: 0.1s; }\r\n.skeleton-config-item:nth-child(even) { animation-delay: 0.2s; }\r\n\r\n/*  */\r\n.top-stories-skeleton {\r\n  animation: fadeIn 0.3s ease-in;\r\n}\r\n\r\n@keyframes fadeIn {\r\n  from {\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    opacity: 1;\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"top-stories-test\">\r\n    <h2>Top Stories Widget Test</h2>\r\n    <p class=\"text-muted mb-3\">Testing TradingView Top Stories component</p>\r\n\r\n    <!--  -->\r\n    <div v-if=\"loading\" class=\"loading-with-skeleton\">\r\n      <TopStoriesSkeleton />\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div v-else-if=\"error\" class=\"error\">\r\n      <p class=\"text-danger\">{{ error }}</p>\r\n      <button @click=\"refresh\" class=\"btn btn-secondary\">Retry</button>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div v-else>\r\n      <!-- Top Stories Widget -->\r\n      <TradingViewTopStories \r\n        display-mode=\"regular\"\r\n        feed-mode=\"market\"\r\n        color-theme=\"light\"\r\n        :is-transparent=\"true\"\r\n        locale=\"en\"\r\n        market=\"stock\"\r\n        height=\"650px\"\r\n      />\r\n\r\n      <!-- Configuration Info -->\r\n      <div class=\"config-info\">\r\n        <h3>Widget Configuration</h3>\r\n        <ul>\r\n          <li><strong>Display Mode:</strong> regular</li>\r\n          <li><strong>Feed Mode:</strong> market</li>\r\n          <li><strong>Color Theme:</strong> light</li>\r\n          <li><strong>Market:</strong> stock</li>\r\n          <li><strong>Height:</strong> 650px</li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport TradingViewTopStories from '@/components/TradingViewTopStories.vue'\r\nimport TopStoriesSkeleton from '@/components/TopStoriesSkeleton.vue'\r\n\r\nexport default {\r\n  name: 'TopStoriesTest',\r\n  components: {\r\n    TradingViewTopStories,\r\n    TopStoriesSkeleton\r\n  },\r\n  data() {\r\n    return {\r\n      loading: true,\r\n      error: null\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initializePage()\r\n  },\r\n  methods: {\r\n    async initializePage() {\r\n      try {\r\n        // \r\n        await new Promise(resolve => setTimeout(resolve, 800))\r\n        this.loading = false\r\n      } catch (err) {\r\n        this.error = String(err)\r\n        this.loading = false\r\n      }\r\n    },\r\n    async refresh() {\r\n      this.loading = true\r\n      this.error = null\r\n      await this.initializePage()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.top-stories-test {\r\n  padding: 0;\r\n}\r\n\r\n.mb-3 {\r\n  margin-bottom: 0.75rem;\r\n}\r\n\r\n.text-muted {\r\n  color: #6c757d;\r\n}\r\n\r\n.loading-with-skeleton {\r\n  /*  */\r\n}\r\n\r\n.error {\r\n  text-align: center;\r\n  padding: 2rem;\r\n  background-color: #f8d7da;\r\n  border: 1px solid #f5c6cb;\r\n  border-radius: 8px;\r\n  margin: 1rem 0;\r\n}\r\n\r\n.text-danger {\r\n  color: #dc3545;\r\n}\r\n\r\n.btn {\r\n  padding: 0.5rem 1rem;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.btn-secondary {\r\n  background: #6c757d;\r\n  color: white;\r\n}\r\n\r\n.btn-secondary:hover {\r\n  background: #545b62;\r\n}\r\n\r\n.config-info {\r\n  background: #f8f9fa;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  margin-top: 2rem;\r\n}\r\n\r\n.config-info h3 {\r\n  margin-bottom: 1rem;\r\n  color: #333;\r\n}\r\n\r\n.config-info ul {\r\n  margin: 0;\r\n  padding-left: 1.5rem;\r\n}\r\n\r\n.config-info li {\r\n  margin-bottom: 0.5rem;\r\n  color: #666;\r\n}\r\n</style>","<template>\r\n  <div class=\"stock-market-insight-container\">\r\n    <div class=\"widget-header\">\r\n      <h3>Stock Market Insight</h3>\r\n    </div>\r\n    \r\n    <div class=\"insight-grid\">\r\n      <!-- Stock Market Daily -->\r\n      <div class=\"insight-section\">\r\n        <div class=\"section-header\">\r\n          <h4>Stock Market Daily</h4>\r\n        </div>\r\n        <div class=\"daily-widget\" :id=\"dailyWidgetId\" ref=\"dailyContainer\">\r\n          <div v-if=\"!dailyLoaded && !dailyError\" class=\"widget-loading\">\r\n            <div class=\"loading-spinner\"></div>\r\n            <span>Loading daily market data...</span>\r\n          </div>\r\n          \r\n          <div v-if=\"dailyError\" class=\"widget-error\">\r\n            <span> Failed to load daily data</span>\r\n            <button @click=\"retryDaily\" class=\"retry-btn\">Retry</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Stock Market Weekly -->\r\n      <div class=\"insight-section\">\r\n        <div class=\"section-header\">\r\n          <h4>Stock Market Weekly</h4>\r\n        </div>\r\n        <div class=\"weekly-widget\" :id=\"weeklyWidgetId\" ref=\"weeklyContainer\">\r\n          <div v-if=\"!weeklyLoaded && !weeklyError\" class=\"widget-loading\">\r\n            <div class=\"loading-spinner\"></div>\r\n            <span>Loading weekly market data...</span>\r\n          </div>\r\n          \r\n          <div v-if=\"weeklyError\" class=\"widget-error\">\r\n            <span> Failed to load weekly data</span>\r\n            <button @click=\"retryWeekly\" class=\"retry-btn\">Retry</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'StockMarketInsight',\r\n  props: {\r\n    colorTheme: {\r\n      type: String,\r\n      default: 'light'\r\n    },\r\n    isTransparent: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    locale: {\r\n      type: String,\r\n      default: 'en'\r\n    },\r\n    height: {\r\n      type: String,\r\n      default: '1300px'\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      dailyLoaded: false,\r\n      dailyError: false,\r\n      weeklyLoaded: false,\r\n      weeklyError: false,\r\n      dailyWidgetId: `daily-market-${Date.now()}`,\r\n      weeklyWidgetId: `weekly-market-${Date.now()}`\r\n    }\r\n  },\r\n  mounted() {\r\n    this.loadWidgets()\r\n  },\r\n  methods: {\r\n    async loadWidgets() {\r\n      await this.$nextTick()\r\n      this.createDailyWidget()\r\n      this.createWeeklyWidget()\r\n    },\r\n\r\n    createDailyWidget() {\r\n      const container = this.$refs.dailyContainer\r\n      if (!container) return\r\n\r\n      //  widget\r\n      container.innerHTML = ''\r\n\r\n      //  widget \r\n      const widgetContainer = document.createElement('div')\r\n      widgetContainer.className = 'tradingview-widget-container'\r\n      widgetContainer.style.height = '100%'\r\n      widgetContainer.style.width = '100%'\r\n\r\n      const widgetContent = document.createElement('div')\r\n      widgetContent.className = 'tradingview-widget-container__widget'\r\n\r\n      widgetContainer.appendChild(widgetContent)\r\n      container.appendChild(widgetContainer)\r\n\r\n      // Daily \r\n      const dailyConfig = {\r\n        \"lineWidth\": 2,\r\n        \"lineType\": 0,\r\n        \"chartType\": \"candlesticks\",\r\n        \"showVolume\": true,\r\n        \"fontColor\": \"#707070\",\r\n        \"gridLineColor\": \"rgba(46, 46, 46, 0.06)\",\r\n        \"volumeUpColor\": \"rgba(34, 171, 148, 0.5)\",\r\n        \"volumeDownColor\": \"rgba(247, 82, 95, 0.5)\",\r\n        \"backgroundColor\": \"#ffffff\",\r\n        \"widgetFontColor\": \"#0F0F0F\",\r\n        \"upColor\": \"#22ab94\",\r\n        \"downColor\": \"#f7525f\",\r\n        \"borderUpColor\": \"#22ab94\",\r\n        \"borderDownColor\": \"#f7525f\",\r\n        \"wickUpColor\": \"#22ab94\",\r\n        \"wickDownColor\": \"#f7525f\",\r\n        \"colorTheme\": this.colorTheme,\r\n        \"isTransparent\": this.isTransparent,\r\n        \"locale\": this.locale,\r\n        \"chartOnly\": false,\r\n        \"scalePosition\": \"right\",\r\n        \"scaleMode\": \"Normal\",\r\n        \"fontFamily\": \"-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif\",\r\n        \"valuesTracking\": \"1\",\r\n        \"changeMode\": \"price-and-percent\",\r\n        \"symbols\": [[\"IG:NASDAQ|6M\"], [\"THINKMARKETS:US30|6M\"]],\r\n        \"dateRanges\": [\"6m|1D\"],\r\n        \"fontSize\": \"10\",\r\n        \"headerFontSize\": \"medium\",\r\n        \"autosize\": true,\r\n        \"width\": \"100%\",\r\n        \"height\": \"100%\",\r\n        \"noTimeScale\": false,\r\n        \"hideDateRanges\": false,\r\n        \"showMA\": true,\r\n        \"maLength\": \"5\",\r\n        \"maLineColor\": \"#2962FF\",\r\n        \"maLineWidth\": 1,\r\n        \"hideMarketStatus\": false,\r\n        \"hideSymbolLogo\": false\r\n      }\r\n\r\n      // \r\n      const script = document.createElement('script')\r\n      script.type = 'text/javascript'\r\n      script.src = 'https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js'\r\n      script.async = true\r\n      script.innerHTML = JSON.stringify(dailyConfig)\r\n\r\n      // \r\n      script.onload = () => {\r\n        this.dailyLoaded = true\r\n        console.log('Daily Market Widget loaded successfully')\r\n      }\r\n\r\n      script.onerror = () => {\r\n        this.dailyError = true\r\n        console.error('Daily Market Widget failed to load')\r\n      }\r\n\r\n      //  widget \r\n      widgetContent.appendChild(script)\r\n\r\n      // \r\n      setTimeout(() => {\r\n        if (!this.dailyLoaded && !this.dailyError) {\r\n          this.dailyLoaded = true\r\n        }\r\n      }, 8000)\r\n    },\r\n\r\n    createWeeklyWidget() {\r\n      const container = this.$refs.weeklyContainer\r\n      if (!container) return\r\n\r\n      //  widget\r\n      container.innerHTML = ''\r\n\r\n      //  widget \r\n      const widgetContainer = document.createElement('div')\r\n      widgetContainer.className = 'tradingview-widget-container'\r\n      widgetContainer.style.height = '100%'\r\n      widgetContainer.style.width = '100%'\r\n\r\n      const widgetContent = document.createElement('div')\r\n      widgetContent.className = 'tradingview-widget-container__widget'\r\n\r\n      widgetContainer.appendChild(widgetContent)\r\n      container.appendChild(widgetContainer)\r\n\r\n      // Weekly  ( dateRanges: [\"6m|1W\"])\r\n      const weeklyConfig = {\r\n        \"lineWidth\": 2,\r\n        \"lineType\": 0,\r\n        \"chartType\": \"candlesticks\",\r\n        \"showVolume\": true,\r\n        \"fontColor\": \"#707070\",\r\n        \"gridLineColor\": \"rgba(46, 46, 46, 0.06)\",\r\n        \"volumeUpColor\": \"rgba(34, 171, 148, 0.5)\",\r\n        \"volumeDownColor\": \"rgba(247, 82, 95, 0.5)\",\r\n        \"backgroundColor\": \"#ffffff\",\r\n        \"widgetFontColor\": \"#0F0F0F\",\r\n        \"upColor\": \"#22ab94\",\r\n        \"downColor\": \"#f7525f\",\r\n        \"borderUpColor\": \"#22ab94\",\r\n        \"borderDownColor\": \"#f7525f\",\r\n        \"wickUpColor\": \"#22ab94\",\r\n        \"wickDownColor\": \"#f7525f\",\r\n        \"colorTheme\": this.colorTheme,\r\n        \"isTransparent\": this.isTransparent,\r\n        \"locale\": this.locale,\r\n        \"chartOnly\": false,\r\n        \"scalePosition\": \"right\",\r\n        \"scaleMode\": \"Normal\",\r\n        \"fontFamily\": \"-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif\",\r\n        \"valuesTracking\": \"1\",\r\n        \"changeMode\": \"price-and-percent\",\r\n        \"symbols\": [[\"IG:NASDAQ|6M\"], [\"THINKMARKETS:US30|6M\"]],\r\n        \"dateRanges\": [\"6m|1W\"],\r\n        \"fontSize\": \"10\",\r\n        \"headerFontSize\": \"medium\",\r\n        \"autosize\": true,\r\n        \"width\": \"100%\",\r\n        \"height\": \"100%\",\r\n        \"noTimeScale\": false,\r\n        \"hideDateRanges\": false,\r\n        \"showMA\": true,\r\n        \"maLength\": \"5\",\r\n        \"maLineColor\": \"#2962FF\",\r\n        \"maLineWidth\": 1,\r\n        \"hideMarketStatus\": false,\r\n        \"hideSymbolLogo\": false\r\n      }\r\n\r\n      // \r\n      const script = document.createElement('script')\r\n      script.type = 'text/javascript'\r\n      script.src = 'https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js'\r\n      script.async = true\r\n      script.innerHTML = JSON.stringify(weeklyConfig)\r\n\r\n      // \r\n      script.onload = () => {\r\n        this.weeklyLoaded = true\r\n        console.log('Weekly Market Widget loaded successfully')\r\n      }\r\n\r\n      script.onerror = () => {\r\n        this.weeklyError = true\r\n        console.error('Weekly Market Widget failed to load')\r\n      }\r\n\r\n      //  widget \r\n      widgetContent.appendChild(script)\r\n\r\n      // \r\n      setTimeout(() => {\r\n        if (!this.weeklyLoaded && !this.weeklyError) {\r\n          this.weeklyLoaded = true\r\n        }\r\n      }, 8000)\r\n    },\r\n\r\n    async retryDaily() {\r\n      this.dailyLoaded = false\r\n      this.dailyError = false\r\n      await this.$nextTick()\r\n      this.createDailyWidget()\r\n    },\r\n\r\n    async retryWeekly() {\r\n      this.weeklyLoaded = false\r\n      this.weeklyError = false\r\n      await this.$nextTick()\r\n      this.createWeeklyWidget()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.stock-market-insight-container {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  margin-bottom: 2rem;\r\n  overflow: hidden;\r\n  position: relative;\r\n}\r\n\r\n.widget-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 1rem;\r\n  padding-bottom: 0.75rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.widget-header h3 {\r\n  font-size: 1.1rem;\r\n  font-weight: 600;\r\n  color: #333;\r\n  margin: 0;\r\n}\r\n\r\n.insight-grid {\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n  gap: 1.5rem;\r\n  align-items: start;\r\n}\r\n\r\n.insight-section {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.75rem;\r\n}\r\n\r\n.section-header {\r\n  padding-bottom: 0.5rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.section-header h4 {\r\n  font-size: 0.95rem;\r\n  font-weight: 600;\r\n  color: #555;\r\n  margin: 0;\r\n}\r\n\r\n.daily-widget,\r\n.weekly-widget {\r\n  height: 600px;\r\n  min-height: 600px;\r\n  width: 100%;\r\n  position: relative;\r\n  overflow: hidden;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 6px;\r\n  background: #fafafa;\r\n}\r\n\r\n/* Loading  */\r\n.widget-loading {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 0.5rem;\r\n  height: 100%;\r\n  color: #6c757d;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.loading-spinner {\r\n  width: 20px;\r\n  height: 20px;\r\n  border: 2px solid #e9ecef;\r\n  border-top: 2px solid #007bff;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n/* Error  */\r\n.widget-error {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 1rem;\r\n  height: 100%;\r\n  background: #f8d7da;\r\n  border: 1px solid #f5c6cb;\r\n  color: #721c24;\r\n  border-radius: 4px;\r\n}\r\n\r\n.retry-btn {\r\n  padding: 0.25rem 0.75rem;\r\n  background: #dc3545;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.8rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.retry-btn:hover {\r\n  background: #c82333;\r\n}\r\n\r\n/* TradingView Widget  */\r\n:global(.stock-market-insight-container .tradingview-widget-container) {\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n  overflow: hidden !important;\r\n  position: relative !important;\r\n}\r\n\r\n:global(.stock-market-insight-container .tradingview-widget-container__widget) {\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n  overflow: hidden !important;\r\n}\r\n\r\n/*  */\r\n@media (max-width: 1024px) {\r\n  .daily-widget,\r\n  .weekly-widget {\r\n    height: 550px;\r\n    min-height: 550px;\r\n  }\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .widget-header {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 0.5rem;\r\n  }\r\n  \r\n  .daily-widget,\r\n  .weekly-widget {\r\n    height: 500px;\r\n    min-height: 500px;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .stock-market-insight-container {\r\n    padding: 0.75rem;\r\n    margin: 0 -0.25rem 2rem -0.25rem;\r\n  }\r\n  \r\n  .insight-grid {\r\n    gap: 0.75rem;\r\n  }\r\n  \r\n  .daily-widget,\r\n  .weekly-widget {\r\n    height: 450px;\r\n    min-height: 450px;\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"stock-market-insight-skeleton\">\r\n    <!-- Page Header Skeleton -->\r\n    <div class=\"skeleton-page-header\">\r\n      <div class=\"skeleton-page-title\"></div>\r\n      <div class=\"skeleton-page-description\"></div>\r\n    </div>\r\n\r\n    <!-- Stock Market Insight Widget Skeleton -->\r\n    <div class=\"skeleton-widget-container large\">\r\n      <div class=\"skeleton-insight-grid\">\r\n        <!-- Daily Insight Section -->\r\n        <div class=\"skeleton-insight-section\">\r\n          <div class=\"skeleton-section-header\">\r\n            <div class=\"skeleton-section-title\"></div>\r\n          </div>\r\n          <div class=\"skeleton-chart-area\">\r\n            <div class=\"skeleton-chart\"></div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Weekly Insight Section -->\r\n        <div class=\"skeleton-insight-section\">\r\n          <div class=\"skeleton-section-header\">\r\n            <div class=\"skeleton-section-title\"></div>\r\n          </div>\r\n          <div class=\"skeleton-chart-area\">\r\n            <div class=\"skeleton-chart\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Configuration Info Skeleton -->\r\n    <div class=\"skeleton-config-info\">\r\n      <div class=\"skeleton-config-title\"></div>\r\n      <div class=\"skeleton-config-grid\">\r\n        <div class=\"skeleton-config-section\">\r\n          <div class=\"skeleton-config-section-title\"></div>\r\n          <div class=\"skeleton-config-list\">\r\n            <div class=\"skeleton-config-item\" v-for=\"i in 5\" :key=\"i\">\r\n              <div class=\"skeleton-config-label\"></div>\r\n              <div class=\"skeleton-config-value\"></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"skeleton-config-section\">\r\n          <div class=\"skeleton-config-section-title\"></div>\r\n          <div class=\"skeleton-config-list\">\r\n            <div class=\"skeleton-config-item\" v-for=\"i in 5\" :key=\"i\">\r\n              <div class=\"skeleton-config-label\"></div>\r\n              <div class=\"skeleton-config-value\"></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'StockMarketInsightSkeleton'\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/*  */\r\n@keyframes shimmer {\r\n  0% {\r\n    background-position: -200px 0;\r\n  }\r\n  100% {\r\n    background-position: calc(200px + 100%) 0;\r\n  }\r\n}\r\n\r\n.stock-market-insight-skeleton {\r\n  padding: 0;\r\n  overflow-x: hidden;\r\n  max-width: 100%;\r\n}\r\n\r\n/*  */\r\n.skeleton-base {\r\n  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\r\n  background-size: 200px 100%;\r\n  animation: shimmer 1.5s infinite linear;\r\n  border-radius: 4px;\r\n}\r\n\r\n/* Page Header  */\r\n.skeleton-page-header {\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.skeleton-page-title {\r\n  @extend .skeleton-base;\r\n  width: 320px;\r\n  height: 32px;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.skeleton-page-description {\r\n  @extend .skeleton-base;\r\n  width: 450px;\r\n  height: 16px;\r\n  margin-bottom: 0.75rem;\r\n}\r\n\r\n/* Widget  */\r\n.skeleton-widget-container {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  margin-bottom: 2rem;\r\n  overflow: hidden;\r\n  position: relative;\r\n}\r\n\r\n.skeleton-widget-container.large {\r\n  min-height: 1300px;\r\n}\r\n\r\n/* Market Insight Grid  */\r\n.skeleton-insight-grid {\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n  gap: 1.5rem;\r\n  align-items: start;\r\n}\r\n\r\n.skeleton-insight-section {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.75rem;\r\n}\r\n\r\n.skeleton-insight-section:nth-child(2) {\r\n  border-top: 1px solid #f0f0f0;\r\n  padding-top: 1.5rem;\r\n}\r\n\r\n.skeleton-section-header {\r\n  padding-bottom: 0.5rem;\r\n}\r\n\r\n.skeleton-section-title {\r\n  @extend .skeleton-base;\r\n  width: 220px;\r\n  height: 18px;\r\n}\r\n\r\n.skeleton-chart-area {\r\n  min-height: 600px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.skeleton-chart {\r\n  @extend .skeleton-base;\r\n  width: 100%;\r\n  height: 550px;\r\n  border-radius: 8px;\r\n}\r\n\r\n/* Configuration Info  */\r\n.skeleton-config-info {\r\n  background: #f8f9fa;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  margin-top: 2rem;\r\n}\r\n\r\n.skeleton-config-title {\r\n  @extend .skeleton-base;\r\n  width: 200px;\r\n  height: 20px;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.skeleton-config-grid {\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n  gap: 1.5rem;\r\n}\r\n\r\n.skeleton-config-section {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.75rem;\r\n}\r\n\r\n.skeleton-config-section-title {\r\n  @extend .skeleton-base;\r\n  width: 160px;\r\n  height: 18px;\r\n}\r\n\r\n.skeleton-config-list {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.skeleton-config-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.skeleton-config-label {\r\n  @extend .skeleton-base;\r\n  width: 100px;\r\n  height: 14px;\r\n}\r\n\r\n.skeleton-config-value {\r\n  @extend .skeleton-base;\r\n  width: 150px;\r\n  height: 14px;\r\n}\r\n\r\n/*  */\r\n.skeleton-page-title,\r\n.skeleton-page-description,\r\n.skeleton-section-title,\r\n.skeleton-chart,\r\n.skeleton-config-title,\r\n.skeleton-config-section-title,\r\n.skeleton-config-label,\r\n.skeleton-config-value {\r\n  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\r\n  background-size: 200px 100%;\r\n  animation: shimmer 1.5s infinite linear;\r\n  border-radius: 4px;\r\n}\r\n\r\n/*  */\r\n@media (max-width: 768px) {\r\n  .skeleton-widget-container {\r\n    padding: 0.75rem;\r\n    margin-bottom: 1rem;\r\n  }\r\n  \r\n  .skeleton-widget-container.large {\r\n    min-height: 1000px;\r\n  }\r\n  \r\n  .skeleton-chart-area {\r\n    min-height: 450px;\r\n  }\r\n  \r\n  .skeleton-chart {\r\n    height: 400px;\r\n  }\r\n  \r\n  .skeleton-config-info {\r\n    padding: 0.75rem;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .skeleton-widget-container {\r\n    padding: 0.5rem;\r\n    margin: 0 -0.25rem 1rem -0.25rem;\r\n  }\r\n  \r\n  .skeleton-widget-container.large {\r\n    min-height: 800px;\r\n  }\r\n  \r\n  .skeleton-chart-area {\r\n    min-height: 350px;\r\n  }\r\n  \r\n  .skeleton-chart {\r\n    height: 300px;\r\n  }\r\n  \r\n  .skeleton-config-info {\r\n    padding: 0.5rem;\r\n    margin: 0 -0.25rem 2rem -0.25rem;\r\n  }\r\n}\r\n\r\n/*  */\r\n.skeleton-insight-section:nth-child(1) { animation-delay: 0.1s; }\r\n.skeleton-insight-section:nth-child(2) { animation-delay: 0.2s; }\r\n\r\n.skeleton-config-section:nth-child(1) { animation-delay: 0.1s; }\r\n.skeleton-config-section:nth-child(2) { animation-delay: 0.2s; }\r\n\r\n.skeleton-config-item:nth-child(odd) { animation-delay: 0.1s; }\r\n.skeleton-config-item:nth-child(even) { animation-delay: 0.2s; }\r\n\r\n/*  */\r\n.stock-market-insight-skeleton {\r\n  animation: fadeIn 0.3s ease-in;\r\n}\r\n\r\n@keyframes fadeIn {\r\n  from {\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    opacity: 1;\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"stock-market-insight-test\">\r\n    <h2>Stock Market Insight Test</h2>\r\n    <p class=\"text-muted mb-3\">Testing Stock Market Insight component with Daily and Weekly views</p>\r\n\r\n    <!--  -->\r\n    <div v-if=\"loading\" class=\"loading-with-skeleton\">\r\n      <StockMarketInsightSkeleton />\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div v-else-if=\"error\" class=\"error\">\r\n      <p class=\"text-danger\">{{ error }}</p>\r\n      <button @click=\"refresh\" class=\"btn btn-secondary\">Retry</button>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div v-else>\r\n      <!-- Stock Market Insight Widget -->\r\n      <StockMarketInsight \r\n        color-theme=\"light\"\r\n        :is-transparent=\"true\"\r\n        locale=\"en\"\r\n        height=\"1300px\"\r\n      />\r\n\r\n      <!-- Configuration Info -->\r\n      <div class=\"config-info\">\r\n        <h3>Widget Configuration</h3>\r\n        <div class=\"config-grid\">\r\n          <div class=\"config-section\">\r\n            <h4>Daily Configuration</h4>\r\n            <ul>\r\n              <li><strong>Symbols:</strong> NASDAQ, US30</li>\r\n              <li><strong>Date Range:</strong> 6 months, 1 Day intervals</li>\r\n              <li><strong>Chart Type:</strong> Candlesticks</li>\r\n              <li><strong>Moving Average:</strong> 5-period</li>\r\n              <li><strong>Volume:</strong> Enabled</li>\r\n            </ul>\r\n          </div>\r\n          <div class=\"config-section\">\r\n            <h4>Weekly Configuration</h4>\r\n            <ul>\r\n              <li><strong>Symbols:</strong> NASDAQ, US30</li>\r\n              <li><strong>Date Range:</strong> 6 months, 1 Week intervals</li>\r\n              <li><strong>Chart Type:</strong> Candlesticks</li>\r\n              <li><strong>Moving Average:</strong> 5-period</li>\r\n              <li><strong>Volume:</strong> Enabled</li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport StockMarketInsight from '@/components/StockMarketInsight.vue'\r\nimport StockMarketInsightSkeleton from '@/components/StockMarketInsightSkeleton.vue'\r\n\r\nexport default {\r\n  name: 'StockMarketInsightTest',\r\n  components: {\r\n    StockMarketInsight,\r\n    StockMarketInsightSkeleton\r\n  },\r\n  data() {\r\n    return {\r\n      loading: true,\r\n      error: null\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initializePage()\r\n  },\r\n  methods: {\r\n    async initializePage() {\r\n      try {\r\n        // \r\n        await new Promise(resolve => setTimeout(resolve, 1000))\r\n        this.loading = false\r\n      } catch (err) {\r\n        this.error = String(err)\r\n        this.loading = false\r\n      }\r\n    },\r\n    async refresh() {\r\n      this.loading = true\r\n      this.error = null\r\n      await this.initializePage()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.stock-market-insight-test {\r\n  padding: 0;\r\n}\r\n\r\n.mb-3 {\r\n  margin-bottom: 0.75rem;\r\n}\r\n\r\n.text-muted {\r\n  color: #6c757d;\r\n}\r\n\r\n.loading-with-skeleton {\r\n  /*  */\r\n}\r\n\r\n.error {\r\n  text-align: center;\r\n  padding: 2rem;\r\n  background-color: #f8d7da;\r\n  border: 1px solid #f5c6cb;\r\n  border-radius: 8px;\r\n  margin: 1rem 0;\r\n}\r\n\r\n.text-danger {\r\n  color: #dc3545;\r\n}\r\n\r\n.btn {\r\n  padding: 0.5rem 1rem;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.btn-secondary {\r\n  background: #6c757d;\r\n  color: white;\r\n}\r\n\r\n.btn-secondary:hover {\r\n  background: #545b62;\r\n}\r\n\r\n.config-info {\r\n  background: #f8f9fa;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  margin-top: 2rem;\r\n}\r\n\r\n.config-info h3 {\r\n  margin-bottom: 1rem;\r\n  color: #333;\r\n}\r\n\r\n.config-grid {\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n  gap: 1.5rem;\r\n}\r\n\r\n.config-section h4 {\r\n  margin-bottom: 0.75rem;\r\n  color: #555;\r\n  font-size: 1rem;\r\n}\r\n\r\n.config-section ul {\r\n  margin: 0;\r\n  padding-left: 1.5rem;\r\n}\r\n\r\n.config-section li {\r\n  margin-bottom: 0.5rem;\r\n  color: #666;\r\n  font-size: 0.9rem;\r\n}\r\n</style>","<template>\r\n  <div class=\"yahoo-finance-test\">\r\n    <div class=\"test-header\">\r\n      <h2>Yahoo Finance API </h2>\r\n      <p> Yahoo Finance API </p>\r\n    </div>\r\n\r\n    <div class=\"test-controls\">\r\n      <div class=\"symbol-input\">\r\n        <label for=\"symbol\">:</label>\r\n        <input \r\n          id=\"symbol\"\r\n          v-model=\"testSymbol\" \r\n          type=\"text\" \r\n          placeholder=\": AAPL, TSLA, ONDS\"\r\n          @keyup.enter=\"testSymbol && loadTestData()\"\r\n        />\r\n        <button \r\n          @click=\"loadTestData()\" \r\n          :disabled=\"!testSymbol || loading\"\r\n          class=\"test-btn\"\r\n        >\r\n          {{ loading ? '...' : '' }}\r\n        </button>\r\n      </div>\r\n      \r\n      <div class=\"preset-symbols\">\r\n        <span>:</span>\r\n        <button \r\n          v-for=\"symbol in presetSymbols\" \r\n          :key=\"symbol\"\r\n          @click=\"testSymbol = symbol; loadTestData()\"\r\n          :disabled=\"loading\"\r\n          class=\"preset-btn\"\r\n        >\r\n          {{ symbol }}\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-if=\"loading\" class=\"loading-section\">\r\n      <div class=\"loading-spinner\"></div>\r\n      <p> Yahoo Finance  {{ testSymbol }} ...</p>\r\n    </div>\r\n\r\n    <div v-if=\"error\" class=\"error-section\">\r\n      <h3> </h3>\r\n      <p>{{ error }}</p>\r\n    </div>\r\n\r\n    <div v-if=\"testData && !loading\" class=\"results-section\">\r\n      <h3> {{ testSymbol }} </h3>\r\n      \r\n      <div class=\"indicators-grid\">\r\n        <!--  -->\r\n        <div class=\"indicator-section\">\r\n          <h3> (Moving Averages)</h3>\r\n          <div class=\"ma-grid\">\r\n            <!-- MA5/SMA5 -->\r\n            <div class=\"indicator-card compact\">\r\n              <h4>MA5 / SMA5</h4>\r\n              <div class=\"indicator-details\">\r\n                <div class=\"main-value\" :class=\"getSignalClass(testData.ma5?.signal)\">\r\n                  {{ testData.ma5?.value || 'N/A' }}\r\n                </div>\r\n                <div class=\"signal-badge\" :class=\"getSignalClass(testData.ma5?.signal)\">\r\n                  {{ testData.ma5?.signal || 'N/A' }}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- MA10/SMA10 -->\r\n            <div class=\"indicator-card compact\">\r\n              <h4>MA10 / SMA10</h4>\r\n              <div class=\"indicator-details\">\r\n                <div class=\"main-value\" :class=\"getSignalClass(testData.ma10?.signal)\">\r\n                  {{ testData.ma10?.value || 'N/A' }}\r\n                </div>\r\n                <div class=\"signal-badge\" :class=\"getSignalClass(testData.ma10?.signal)\">\r\n                  {{ testData.ma10?.signal || 'N/A' }}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- MA30/SMA30 -->\r\n            <div class=\"indicator-card compact\">\r\n              <h4>MA30 / SMA30</h4>\r\n              <div class=\"indicator-details\">\r\n                <div class=\"main-value\" :class=\"getSignalClass(testData.ma30?.signal)\">\r\n                  {{ testData.ma30?.value || 'N/A' }}\r\n                </div>\r\n                <div class=\"signal-badge\" :class=\"getSignalClass(testData.ma30?.signal)\">\r\n                  {{ testData.ma30?.signal || 'N/A' }}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- SMA50 -->\r\n            <div class=\"indicator-card compact\">\r\n              <h4>SMA50</h4>\r\n              <div class=\"indicator-details\">\r\n                <div class=\"main-value\" :class=\"getSignalClass(testData.sma50?.signal)\">\r\n                  {{ testData.sma50?.value || 'N/A' }}\r\n                </div>\r\n                <div class=\"signal-badge\" :class=\"getSignalClass(testData.sma50?.signal)\">\r\n                  {{ testData.sma50?.signal || 'N/A' }}\r\n                </div>\r\n                <div class=\"additional-info\">\r\n                  <small>: ${{ testData.sma50?.currentPrice || 'N/A' }}</small>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!--  -->\r\n        <div class=\"indicator-section\">\r\n          <h3> (Ichimoku Cloud)</h3>\r\n          <div class=\"ichimoku-grid\">\r\n            <!--  -->\r\n            <div class=\"indicator-card compact\">\r\n              <h4> (9)</h4>\r\n              <div class=\"indicator-details\">\r\n                <div class=\"main-value\" :class=\"getSignalClass(testData.ichimokuConversionLine?.signal)\">\r\n                  {{ testData.ichimokuConversionLine?.value || 'N/A' }}\r\n                </div>\r\n                <div class=\"signal-badge\" :class=\"getSignalClass(testData.ichimokuConversionLine?.signal)\">\r\n                  {{ testData.ichimokuConversionLine?.signal || 'N/A' }}\r\n                </div>\r\n                <div class=\"additional-info\">\r\n                  <small>: {{ testData.ichimokuConversionLine?.highestHigh || 'N/A' }}</small>\r\n                  <small>: {{ testData.ichimokuConversionLine?.lowestLow || 'N/A' }}</small>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!--  -->\r\n            <div class=\"indicator-card compact\">\r\n              <h4> (26)</h4>\r\n              <div class=\"indicator-details\">\r\n                <div class=\"main-value\" :class=\"getSignalClass(testData.ichimokuBaseLine?.signal)\">\r\n                  {{ testData.ichimokuBaseLine?.value || 'N/A' }}\r\n                </div>\r\n                <div class=\"signal-badge\" :class=\"getSignalClass(testData.ichimokuBaseLine?.signal)\">\r\n                  {{ testData.ichimokuBaseLine?.signal || 'N/A' }}\r\n                </div>\r\n                <div class=\"additional-info\">\r\n                  <small>: {{ testData.ichimokuBaseLine?.highestHigh || 'N/A' }}</small>\r\n                  <small>: {{ testData.ichimokuBaseLine?.lowestLow || 'N/A' }}</small>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!--  -->\r\n            <div class=\"indicator-card compact\">\r\n              <h4> (26)</h4>\r\n              <div class=\"indicator-details\">\r\n                <div class=\"main-value\" :class=\"getSignalClass(testData.ichimokuLaggingSpan?.signal)\">\r\n                  {{ testData.ichimokuLaggingSpan?.value || 'N/A' }}\r\n                </div>\r\n                <div class=\"signal-badge\" :class=\"getSignalClass(testData.ichimokuLaggingSpan?.signal)\">\r\n                  {{ testData.ichimokuLaggingSpan?.signal || 'N/A' }}\r\n                </div>\r\n                <div class=\"additional-info\">\r\n                  <small>: {{ testData.ichimokuLaggingSpan?.laggingReference || 'N/A' }}</small>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!--  -->\r\n        <div class=\"indicator-section\">\r\n          <h3> (VWMA)</h3>\r\n          <div class=\"vwma-grid\">\r\n            <div class=\"indicator-card\">\r\n              <h4>VWMA (20)</h4>\r\n              <div class=\"indicator-details\">\r\n                <div class=\"main-value\" :class=\"getSignalClass(testData.vwma20?.signal)\">\r\n                  {{ testData.vwma20?.value || 'N/A' }}\r\n                </div>\r\n                <div class=\"signal-badge\" :class=\"getSignalClass(testData.vwma20?.signal)\">\r\n                  {{ testData.vwma20?.signal || 'N/A' }}\r\n                </div>\r\n                <div class=\"additional-info\">\r\n                  <small>: ${{ testData.vwma20?.currentPrice || 'N/A' }}</small>\r\n                  <small>: {{ testData.vwma20?.totalVolume || 'N/A' }}</small>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!--  -->\r\n        <div class=\"indicator-section\">\r\n          <h3> (Technical Indicators)</h3>\r\n          <div class=\"technical-grid\">\r\n            <!-- RSI(14) -->\r\n            <div class=\"indicator-card\">\r\n              <h4>Relative Strength Index (14)</h4>\r\n              <div class=\"indicator-details\">\r\n                <div class=\"main-value\" :class=\"getSignalClass(testData.rsi14?.signal)\">\r\n                  {{ testData.rsi14?.value || 'N/A' }}\r\n                </div>\r\n                <div class=\"signal-badge\" :class=\"getSignalClass(testData.rsi14?.signal)\">\r\n                  {{ testData.rsi14?.signal || 'N/A' }}\r\n                </div>\r\n                <div class=\"rsi-bar\" v-if=\"testData.rsi14?.value\">\r\n                  <div class=\"rsi-fill\" :style=\"{ width: testData.rsi14.value + '%' }\"></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- ADX(14) -->\r\n            <div class=\"indicator-card\">\r\n              <h4>Average Directional Index (14)</h4>\r\n              <div class=\"indicator-details\">\r\n                <div class=\"main-value\" :class=\"getSignalClass(testData.adx14?.signal)\">\r\n                  {{ testData.adx14?.value || 'N/A' }}\r\n                </div>\r\n                <div class=\"signal-badge\" :class=\"getSignalClass(testData.adx14?.signal)\">\r\n                  {{ testData.adx14?.signal || 'N/A' }}\r\n                </div>\r\n                <div class=\"additional-info\">\r\n                  <small>+DI: {{ testData.adx14?.plusDI || 'N/A' }}</small>\r\n                  <small>-DI: {{ testData.adx14?.minusDI || 'N/A' }}</small>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- MACD -->\r\n            <div class=\"indicator-card\">\r\n              <h4>MACD Level (12, 26)</h4>\r\n              <div class=\"indicator-details\">\r\n                <div class=\"main-value\" :class=\"getSignalClass(testData.macd?.signal)\">\r\n                  {{ testData.macd?.value || 'N/A' }}\r\n                </div>\r\n                <div class=\"signal-badge\" :class=\"getSignalClass(testData.macd?.signal)\">\r\n                  {{ testData.macd?.signal || 'N/A' }}\r\n                </div>\r\n                <div class=\"additional-info\">\r\n                  <small>: {{ testData.macd?.signalLine || 'N/A' }}</small>\r\n                  <small>: {{ testData.macd?.histogram || 'N/A' }}</small>\r\n                  <small>EMA12: {{ testData.macd?.ema12 || 'N/A' }}</small>\r\n                  <small>EMA26: {{ testData.macd?.ema26 || 'N/A' }}</small>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"metadata\">\r\n        <p><strong>:</strong> {{ formatDate(testData.lastUpdated) }}</p>\r\n        <p><strong>:</strong> {{ testData.source || 'Yahoo Finance' }}</p>\r\n        <p v-if=\"testData.proxy\"><strong>:</strong> {{ testData.proxy }}</p>\r\n        <p v-if=\"testData.dataPoints\"><strong>:</strong> {{ testData.dataPoints }}</p>\r\n        <p v-if=\"testData.error\" class=\"error-text\"><strong>:</strong> {{ testData.error }}</p>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"cache-section\">\r\n      <h3></h3>\r\n      <button @click=\"loadCacheStatus()\" class=\"cache-btn\"></button>\r\n      <button @click=\"clearCache()\" class=\"cache-btn\"></button>\r\n      \r\n      <div v-if=\"cacheStatus\" class=\"cache-info\">\r\n        <h4>API  (5)</h4>\r\n        <pre>{{ JSON.stringify(cacheStatus.apiCache, null, 2) }}</pre>\r\n        \r\n        <h4> (24)</h4>\r\n        <pre>{{ JSON.stringify(cacheStatus.dailyCache, null, 2) }}</pre>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport yahooFinanceAPI from '../utils/yahooFinanceApi.js'\r\n\r\nexport default {\r\n  name: 'YahooFinanceTest',\r\n  data() {\r\n    return {\r\n      testSymbol: 'AAPL',\r\n      loading: false,\r\n      error: null,\r\n      testData: null,\r\n      cacheStatus: null,\r\n      presetSymbols: ['AAPL', 'TSLA', 'MSFT', 'GOOGL', 'ONDS', 'RDW']\r\n    }\r\n  },\r\n  methods: {\r\n    async loadTestData() {\r\n      if (!this.testSymbol) return;\r\n      \r\n      this.loading = true;\r\n      this.error = null;\r\n      this.testData = null;\r\n      \r\n      try {\r\n        console.log(`Testing Yahoo Finance API for ${this.testSymbol}...`);\r\n        this.testData = await yahooFinanceAPI.getTechnicalIndicators(this.testSymbol);\r\n        \r\n        if (this.testData.error) {\r\n          this.error = this.testData.error;\r\n        }\r\n        \r\n      } catch (err) {\r\n        this.error = err.message;\r\n        console.error('Test failed:', err);\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n    \r\n    getSignalClass(signal) {\r\n      if (!signal) return 'neutral';\r\n      \r\n      const bullishSignals = ['BUY', 'OVERSOLD', 'STRONG_TREND'];\r\n      const bearishSignals = ['SELL', 'OVERBOUGHT'];\r\n      const neutralSignals = ['WEAK_TREND'];\r\n      \r\n      if (bullishSignals.includes(signal)) return 'bullish';\r\n      if (bearishSignals.includes(signal)) return 'bearish';\r\n      return 'neutral';\r\n    },\r\n    \r\n    formatDate(dateString) {\r\n      if (!dateString) return 'N/A';\r\n      return new Date(dateString).toLocaleString('zh-TW');\r\n    },\r\n    \r\n    async loadCacheStatus() {\r\n      this.cacheStatus = yahooFinanceAPI.getCacheStats();\r\n    },\r\n    \r\n    clearCache() {\r\n      yahooFinanceAPI.clearCache();\r\n      yahooFinanceAPI.clearDailyCache();\r\n      this.cacheStatus = null;\r\n      alert(' (API  + )');\r\n    }\r\n  },\r\n  \r\n  mounted() {\r\n    //  AAPL \r\n    this.loadTestData();\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.yahoo-finance-test {\r\n  max-width: 1600px;\r\n  margin: 0 auto;\r\n  padding: 2rem;\r\n}\r\n\r\n.test-header {\r\n  text-align: center;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.test-header h2 {\r\n  color: #2c3e50;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.test-controls {\r\n  background: #f8f9fa;\r\n  padding: 1.5rem;\r\n  border-radius: 8px;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.symbol-input {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 1rem;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.symbol-input label {\r\n  font-weight: 600;\r\n  min-width: 80px;\r\n}\r\n\r\n.symbol-input input {\r\n  flex: 1;\r\n  padding: 0.5rem;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 1rem;\r\n}\r\n\r\n.test-btn, .preset-btn, .cache-btn {\r\n  padding: 0.5rem 1rem;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.9rem;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.test-btn {\r\n  background: #007bff;\r\n  color: white;\r\n}\r\n\r\n.test-btn:hover:not(:disabled) {\r\n  background: #0056b3;\r\n}\r\n\r\n.test-btn:disabled {\r\n  background: #6c757d;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.preset-symbols {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.preset-btn {\r\n  background: #e9ecef;\r\n  color: #495057;\r\n  border: 1px solid #ced4da;\r\n}\r\n\r\n.preset-btn:hover:not(:disabled) {\r\n  background: #dee2e6;\r\n}\r\n\r\n.loading-section {\r\n  text-align: center;\r\n  padding: 2rem;\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.loading-spinner {\r\n  width: 40px;\r\n  height: 40px;\r\n  border: 4px solid #e9ecef;\r\n  border-top: 4px solid #007bff;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n  margin: 0 auto 1rem;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n.error-section {\r\n  background: #f8d7da;\r\n  color: #721c24;\r\n  padding: 1.5rem;\r\n  border-radius: 8px;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.results-section {\r\n  background: white;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  padding: 2rem;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.indicators-grid {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 2rem;\r\n  margin: 1.5rem 0;\r\n}\r\n\r\n.indicator-section {\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n  padding: 1.5rem;\r\n}\r\n\r\n.indicator-section h3 {\r\n  margin: 0 0 1rem 0;\r\n  color: #495057;\r\n  font-size: 1.1rem;\r\n  border-bottom: 2px solid #dee2e6;\r\n  padding-bottom: 0.5rem;\r\n}\r\n\r\n.ma-grid, .ichimoku-grid, .technical-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\r\n  gap: 1rem;\r\n}\r\n\r\n.vwma-grid {\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n  max-width: 400px;\r\n}\r\n\r\n.indicator-card {\r\n  background: white;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  padding: 1.5rem;\r\n}\r\n\r\n.indicator-card.compact {\r\n  padding: 1rem;\r\n}\r\n\r\n.indicator-card h4 {\r\n  margin: 0 0 1rem 0;\r\n  color: #495057;\r\n  font-size: 0.95rem;\r\n}\r\n\r\n.main-value {\r\n  font-size: 1.3rem;\r\n  font-weight: bold;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.signal-badge {\r\n  display: inline-block;\r\n  padding: 0.25rem 0.75rem;\r\n  border-radius: 20px;\r\n  font-size: 0.75rem;\r\n  font-weight: 600;\r\n  text-transform: uppercase;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.bullish {\r\n  color: #155724;\r\n  background: #d4edda;\r\n}\r\n\r\n.bearish {\r\n  color: #721c24;\r\n  background: #f8d7da;\r\n}\r\n\r\n.neutral {\r\n  color: #495057;\r\n  background: #e9ecef;\r\n}\r\n\r\n.additional-info {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.25rem;\r\n}\r\n\r\n.additional-info small {\r\n  color: #6c757d;\r\n  font-size: 0.8rem;\r\n}\r\n\r\n.rsi-bar {\r\n  width: 100%;\r\n  height: 8px;\r\n  background: #e9ecef;\r\n  border-radius: 4px;\r\n  overflow: hidden;\r\n  margin-top: 0.5rem;\r\n}\r\n\r\n.rsi-fill {\r\n  height: 100%;\r\n  background: linear-gradient(90deg, #28a745 0%, #ffc107 50%, #dc3545 100%);\r\n  transition: width 0.3s ease;\r\n}\r\n\r\n.metadata {\r\n  background: #f8f9fa;\r\n  padding: 1rem;\r\n  border-radius: 4px;\r\n  margin-top: 1.5rem;\r\n}\r\n\r\n.metadata p {\r\n  margin: 0.25rem 0;\r\n  font-size: 0.9rem;\r\n  color: #6c757d;\r\n}\r\n\r\n.error-text {\r\n  color: #dc3545 !important;\r\n  font-weight: 600;\r\n}\r\n\r\n.cache-section {\r\n  background: #f8f9fa;\r\n  padding: 1.5rem;\r\n  border-radius: 8px;\r\n}\r\n\r\n.cache-section h3 {\r\n  margin: 0 0 1rem 0;\r\n  color: #495057;\r\n}\r\n\r\n.cache-btn {\r\n  background: #6c757d;\r\n  color: white;\r\n  margin-right: 0.5rem;\r\n}\r\n\r\n.cache-btn:hover {\r\n  background: #545b62;\r\n}\r\n\r\n.cache-info {\r\n  margin-top: 1rem;\r\n  background: white;\r\n  padding: 1rem;\r\n  border-radius: 4px;\r\n  border: 1px solid #e9ecef;\r\n}\r\n\r\n.cache-info pre {\r\n  margin: 0;\r\n  font-size: 0.8rem;\r\n  color: #495057;\r\n  white-space: pre-wrap;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .yahoo-finance-test {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .symbol-input {\r\n    flex-direction: column;\r\n    align-items: stretch;\r\n  }\r\n  \r\n  .preset-symbols {\r\n    justify-content: center;\r\n  }\r\n  \r\n  .ma-grid, .ichimoku-grid, .technical-grid {\r\n    grid-template-columns: 1fr;\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"validation-page\">\r\n    <div class=\"validation-header\">\r\n      <h2></h2>\r\n      <p> TradingView </p>\r\n    </div>\r\n\r\n    <div class=\"validation-controls\">\r\n      <div class=\"symbol-input\">\r\n        <label>:</label>\r\n        <input \r\n          v-model=\"testSymbol\" \r\n          type=\"text\" \r\n          placeholder=\": AAPL\"\r\n          @keyup.enter=\"loadData()\"\r\n        />\r\n        <button @click=\"loadData()\" :disabled=\"loading\">\r\n          {{ loading ? '...' : '' }}\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-if=\"loading\" class=\"loading-section\">\r\n      <div class=\"loading-spinner\"></div>\r\n      <p>...</p>\r\n    </div>\r\n\r\n    <div v-if=\"ourData && !loading\" class=\"comparison-section\">\r\n      <h3>{{ testSymbol }} </h3>\r\n      \r\n      <div class=\"comparison-grid\">\r\n        <!--  -->\r\n        <div class=\"our-results\">\r\n          <h4></h4>\r\n          <div class=\"indicator-list\">\r\n            <div class=\"indicator-item\">\r\n              <strong>SMA(50):</strong> {{ ourData.sma50?.value || 'N/A' }}\r\n              <span class=\"signal\" :class=\"getSignalClass(ourData.sma50?.signal)\">\r\n                {{ ourData.sma50?.signal }}\r\n              </span>\r\n            </div>\r\n            <div class=\"indicator-item\">\r\n              <strong>RSI(14):</strong> {{ ourData.rsi14?.value || 'N/A' }}\r\n              <span class=\"signal\" :class=\"getSignalClass(ourData.rsi14?.signal)\">\r\n                {{ ourData.rsi14?.signal }}\r\n              </span>\r\n            </div>\r\n            <div class=\"indicator-item\">\r\n              <strong>MACD:</strong> {{ ourData.macd?.value || 'N/A' }}\r\n              <span class=\"signal\" :class=\"getSignalClass(ourData.macd?.signal)\">\r\n                {{ ourData.macd?.signal }}\r\n              </span>\r\n            </div>\r\n          </div>\r\n          \r\n          <div class=\"debug-info\">\r\n            <h5></h5>\r\n            <p><strong>:</strong> {{ ourData.dataPoints }}</p>\r\n            <p><strong>:</strong> ${{ ourData.priceRange?.min }} - ${{ ourData.priceRange?.max }}</p>\r\n            <p><strong>:</strong> ${{ ourData.priceRange?.latest }}</p>\r\n            <p><strong>:</strong> ${{ ourData.sma50?.currentPrice }}</p>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- TradingView Widget -->\r\n        <div class=\"tradingview-results\">\r\n          <h4>TradingView </h4>\r\n          <div class=\"tradingview-widget-container\">\r\n            <div class=\"tradingview-widget\" :id=\"`tradingview-widget-${testSymbol}`\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!--  -->\r\n      <div class=\"detailed-comparison\">\r\n        <h4></h4>\r\n        <div class=\"comparison-table\">\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                <th></th>\r\n                <th></th>\r\n                <th>TradingView</th>\r\n                <th></th>\r\n                <th></th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr>\r\n                <td>SMA(50)</td>\r\n                <td>${{ ourData.sma50?.value || 'N/A' }}</td>\r\n                <td> Widget</td>\r\n                <td>-</td>\r\n                <td>{{ ourData.sma50?.signal }}</td>\r\n              </tr>\r\n              <tr>\r\n                <td>RSI(14)</td>\r\n                <td>{{ ourData.rsi14?.value || 'N/A' }}</td>\r\n                <td> Widget</td>\r\n                <td>-</td>\r\n                <td>{{ ourData.rsi14?.signal }}</td>\r\n              </tr>\r\n              <tr>\r\n                <td>MACD</td>\r\n                <td>{{ ourData.macd?.value || 'N/A' }}</td>\r\n                <td> Widget</td>\r\n                <td>-</td>\r\n                <td>{{ ourData.macd?.signal }}</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport yahooFinanceAPI from '../utils/yahooFinanceApi.js'\r\n\r\nexport default {\r\n  name: 'TechnicalIndicatorsValidation',\r\n  data() {\r\n    return {\r\n      testSymbol: 'AAPL',\r\n      loading: false,\r\n      ourData: null,\r\n      tradingViewWidget: null\r\n    }\r\n  },\r\n  methods: {\r\n    async loadData() {\r\n      if (!this.testSymbol) return;\r\n      \r\n      this.loading = true;\r\n      this.ourData = null;\r\n      \r\n      try {\r\n        //  API \r\n        yahooFinanceAPI.setMockMode(false);\r\n        \r\n        // \r\n        this.ourData = await yahooFinanceAPI.getTechnicalIndicators(this.testSymbol);\r\n        \r\n        //  TradingView Widget\r\n        this.loadTradingViewWidget();\r\n        \r\n      } catch (error) {\r\n        console.error('Failed to load data:', error);\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n    \r\n    loadTradingViewWidget() {\r\n      //  widget\r\n      if (this.tradingViewWidget) {\r\n        const container = document.getElementById(`tradingview-widget-${this.testSymbol}`);\r\n        if (container) {\r\n          container.innerHTML = '';\r\n        }\r\n      }\r\n      \r\n      //  TradingView widget\r\n      setTimeout(() => {\r\n        const script = document.createElement('script');\r\n        script.type = 'text/javascript';\r\n        script.src = 'https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js';\r\n        script.async = true;\r\n        script.innerHTML = JSON.stringify({\r\n          \"interval\": \"1D\",\r\n          \"width\": \"100%\",\r\n          \"height\": \"400\",\r\n          \"isTransparent\": false,\r\n          \"symbol\": `NASDAQ:${this.testSymbol}`,\r\n          \"showIntervalTabs\": true,\r\n          \"locale\": \"en\",\r\n          \"colorTheme\": \"light\"\r\n        });\r\n        \r\n        const container = document.getElementById(`tradingview-widget-${this.testSymbol}`);\r\n        if (container) {\r\n          container.appendChild(script);\r\n        }\r\n      }, 100);\r\n    },\r\n    \r\n    getSignalClass(signal) {\r\n      if (!signal) return 'neutral';\r\n      \r\n      const bullishSignals = ['BUY', 'OVERSOLD'];\r\n      const bearishSignals = ['SELL', 'OVERBOUGHT'];\r\n      \r\n      if (bullishSignals.includes(signal)) return 'bullish';\r\n      if (bearishSignals.includes(signal)) return 'bearish';\r\n      return 'neutral';\r\n    }\r\n  },\r\n  \r\n  mounted() {\r\n    this.loadData();\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.validation-page {\r\n  max-width: 1400px;\r\n  margin: 0 auto;\r\n  padding: 2rem;\r\n}\r\n\r\n.validation-header {\r\n  text-align: center;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.validation-header h2 {\r\n  color: #2c3e50;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.validation-controls {\r\n  background: #f8f9fa;\r\n  padding: 1.5rem;\r\n  border-radius: 8px;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.symbol-input {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 1rem;\r\n}\r\n\r\n.symbol-input label {\r\n  font-weight: 600;\r\n  min-width: 100px;\r\n}\r\n\r\n.symbol-input input {\r\n  flex: 1;\r\n  padding: 0.5rem;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 1rem;\r\n  max-width: 200px;\r\n}\r\n\r\n.symbol-input button {\r\n  padding: 0.5rem 1rem;\r\n  background: #007bff;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n\r\n.symbol-input button:hover:not(:disabled) {\r\n  background: #0056b3;\r\n}\r\n\r\n.symbol-input button:disabled {\r\n  background: #6c757d;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.loading-section {\r\n  text-align: center;\r\n  padding: 2rem;\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n}\r\n\r\n.loading-spinner {\r\n  width: 40px;\r\n  height: 40px;\r\n  border: 4px solid #e9ecef;\r\n  border-top: 4px solid #007bff;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n  margin: 0 auto 1rem;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n.comparison-section {\r\n  background: white;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  padding: 2rem;\r\n}\r\n\r\n.comparison-grid {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 2rem;\r\n  margin: 2rem 0;\r\n}\r\n\r\n.our-results, .tradingview-results {\r\n  background: #f8f9fa;\r\n  padding: 1.5rem;\r\n  border-radius: 8px;\r\n}\r\n\r\n.our-results h4, .tradingview-results h4 {\r\n  margin: 0 0 1rem 0;\r\n  color: #495057;\r\n}\r\n\r\n.indicator-list {\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.indicator-item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 0.5rem 0;\r\n  border-bottom: 1px solid #e9ecef;\r\n}\r\n\r\n.indicator-item:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.signal {\r\n  padding: 0.25rem 0.5rem;\r\n  border-radius: 4px;\r\n  font-size: 0.8rem;\r\n  font-weight: 600;\r\n  text-transform: uppercase;\r\n}\r\n\r\n.signal.bullish {\r\n  background: #d4edda;\r\n  color: #155724;\r\n}\r\n\r\n.signal.bearish {\r\n  background: #f8d7da;\r\n  color: #721c24;\r\n}\r\n\r\n.signal.neutral {\r\n  background: #e9ecef;\r\n  color: #495057;\r\n}\r\n\r\n.debug-info {\r\n  background: white;\r\n  padding: 1rem;\r\n  border-radius: 4px;\r\n  border: 1px solid #e9ecef;\r\n}\r\n\r\n.debug-info h5 {\r\n  margin: 0 0 0.5rem 0;\r\n  color: #495057;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.debug-info p {\r\n  margin: 0.25rem 0;\r\n  font-size: 0.8rem;\r\n  color: #6c757d;\r\n}\r\n\r\n.tradingview-widget-container {\r\n  height: 400px;\r\n  background: white;\r\n  border-radius: 4px;\r\n  overflow: hidden;\r\n}\r\n\r\n.detailed-comparison {\r\n  margin-top: 2rem;\r\n  background: #f8f9fa;\r\n  padding: 1.5rem;\r\n  border-radius: 8px;\r\n}\r\n\r\n.detailed-comparison h4 {\r\n  margin: 0 0 1rem 0;\r\n  color: #495057;\r\n}\r\n\r\n.comparison-table {\r\n  overflow-x: auto;\r\n}\r\n\r\n.comparison-table table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  background: white;\r\n  border-radius: 4px;\r\n  overflow: hidden;\r\n}\r\n\r\n.comparison-table th,\r\n.comparison-table td {\r\n  padding: 0.75rem;\r\n  text-align: left;\r\n  border-bottom: 1px solid #e9ecef;\r\n}\r\n\r\n.comparison-table th {\r\n  background: #e9ecef;\r\n  font-weight: 600;\r\n  color: #495057;\r\n}\r\n\r\n.comparison-table tr:last-child td {\r\n  border-bottom: none;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .validation-page {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .comparison-grid {\r\n    grid-template-columns: 1fr;\r\n  }\r\n  \r\n  .symbol-input {\r\n    flex-direction: column;\r\n    align-items: stretch;\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"metadata-test-container\">\r\n    <div class=\"header\">\r\n      <h1></h1>\r\n      <p> Yahoo Finance API vs  sector/industry </p>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div class=\"control-panel\">\r\n      <div class=\"mode-selector\">\r\n        <label>\r\n          <input \r\n            type=\"radio\" \r\n            :value=\"true\" \r\n            v-model=\"useDynamicAPI\"\r\n            @change=\"switchMode\"\r\n          />\r\n           API (Yahoo Finance)\r\n        </label>\r\n        <label>\r\n          <input \r\n            type=\"radio\" \r\n            :value=\"false\" \r\n            v-model=\"useDynamicAPI\"\r\n            @change=\"switchMode\"\r\n          />\r\n           (symbols_metadata.json)\r\n        </label>\r\n      </div>\r\n\r\n      <div class=\"test-controls\">\r\n        <button @click=\"testSingleSymbol\" :disabled=\"loading\">\r\n          \r\n        </button>\r\n        <button @click=\"testBatchSymbols\" :disabled=\"loading\">\r\n          \r\n        </button>\r\n        <button @click=\"clearCache\" :disabled=\"loading\">\r\n          \r\n        </button>\r\n        <button @click=\"warmupCache\" :disabled=\"loading\">\r\n          \r\n        </button>\r\n      </div>\r\n\r\n      <div class=\"symbol-input\">\r\n        <input \r\n          v-model=\"testSymbol\" \r\n          placeholder=\" (: AAPL)\"\r\n          @keyup.enter=\"testSingleSymbol\"\r\n        />\r\n      </div>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div class=\"status-panel\" v-if=\"loading || error || successMessage\">\r\n      <div v-if=\"loading\" class=\"loading\">\r\n        <span class=\"spinner\"></span>\r\n        {{ loadingMessage }}\r\n      </div>\r\n      <div v-if=\"error\" class=\"error\">\r\n         {{ error }}\r\n      </div>\r\n      <div v-if=\"successMessage\" class=\"success\">\r\n         {{ successMessage }}\r\n      </div>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div class=\"cache-stats\" v-if=\"cacheStats\">\r\n      <h3></h3>\r\n      <div class=\"stats-grid\">\r\n        <div class=\"stat-item\">\r\n          <label>:</label>\r\n          <span>{{ cacheStats.mode === 'dynamic' ? ' API' : '' }}</span>\r\n        </div>\r\n        <div class=\"stat-item\">\r\n          <label>:</label>\r\n          <span>{{ cacheStats.totalCached || 0 }}</span>\r\n        </div>\r\n        <div class=\"stat-item\" v-if=\"cacheStats.mode === 'static'\">\r\n          <label>:</label>\r\n          <span>{{ cacheStats.metadataLoaded ? '' : '' }}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div class=\"results-section\" v-if=\"testResults.length > 0\">\r\n      <h3></h3>\r\n      <div class=\"results-grid\">\r\n        <div \r\n          v-for=\"result in testResults\" \r\n          :key=\"result.symbol\"\r\n          class=\"result-card\"\r\n          :class=\"getResultCardClass(result)\"\r\n        >\r\n          <div class=\"result-header\">\r\n            <h4>{{ result.symbol }}</h4>\r\n            <span class=\"confidence-badge\" :class=\"getConfidenceBadgeClass(result.confidence)\">\r\n              {{ (result.confidence * 100).toFixed(0) }}%\r\n            </span>\r\n          </div>\r\n          \r\n          <div class=\"result-content\">\r\n            <div class=\"metadata-row\">\r\n              <label>Sector:</label>\r\n              <span>{{ result.sector }}</span>\r\n            </div>\r\n            <div class=\"metadata-row\">\r\n              <label>Industry:</label>\r\n              <span>{{ result.industry }}</span>\r\n            </div>\r\n            <div class=\"metadata-row\">\r\n              <label>Exchange:</label>\r\n              <span>{{ result.exchange }}</span>\r\n            </div>\r\n            <div class=\"metadata-row\" v-if=\"result.marketCapFormatted\">\r\n              <label>Market Cap:</label>\r\n              <span>{{ result.marketCapFormatted }}</span>\r\n            </div>\r\n            <div class=\"metadata-row\" v-if=\"result.country\">\r\n              <label>Country:</label>\r\n              <span>{{ result.country }}</span>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"result-footer\">\r\n            <div class=\"source-info\">\r\n              <small>{{ result.source }}</small>\r\n            </div>\r\n            <div class=\"timestamp\">\r\n              <small>{{ formatTimestamp(result.lastUpdated) }}</small>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div class=\"comparison-section\" v-if=\"comparisonResults.length > 0\">\r\n      <h3> vs </h3>\r\n      <div class=\"comparison-table\">\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>Symbol</th>\r\n              <th> API - Sector</th>\r\n              <th> - Sector</th>\r\n              <th> API - Industry</th>\r\n              <th> - Industry</th>\r\n              <th></th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"comp in comparisonResults\" :key=\"comp.symbol\">\r\n              <td>{{ comp.symbol }}</td>\r\n              <td>{{ comp.dynamic.sector }}</td>\r\n              <td>{{ comp.static.sector }}</td>\r\n              <td>{{ comp.dynamic.industry }}</td>\r\n              <td>{{ comp.static.industry }}</td>\r\n              <td>\r\n                <span class=\"match-indicator\" :class=\"comp.matchClass\">\r\n                  {{ comp.matchScore }}%\r\n                </span>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { metadataService } from '@/utils/metadataService.js'\r\n\r\nexport default {\r\n  name: 'MetadataServiceTest',\r\n  data() {\r\n    return {\r\n      useDynamicAPI: true,\r\n      loading: false,\r\n      loadingMessage: '',\r\n      error: null,\r\n      successMessage: null,\r\n      testSymbol: 'AAPL',\r\n      testResults: [],\r\n      comparisonResults: [],\r\n      cacheStats: null,\r\n      \r\n      // \r\n      testSymbols: ['AAPL', 'MSFT', 'GOOGL', 'TSLA', 'NVDA', 'META', 'AMZN', 'NFLX', 'ASTS', 'RIVN']\r\n    }\r\n  },\r\n  \r\n  async mounted() {\r\n    await this.updateCacheStats()\r\n  },\r\n  \r\n  methods: {\r\n    async switchMode() {\r\n      try {\r\n        metadataService.setUseDynamicAPI(this.useDynamicAPI)\r\n        await this.updateCacheStats()\r\n        this.successMessage = `${this.useDynamicAPI ? ' API' : ''}`\r\n        setTimeout(() => { this.successMessage = null }, 3000)\r\n      } catch (error) {\r\n        this.error = `: ${error.message}`\r\n        setTimeout(() => { this.error = null }, 5000)\r\n      }\r\n    },\r\n\r\n    async testSingleSymbol() {\r\n      if (!this.testSymbol.trim()) {\r\n        this.error = ''\r\n        setTimeout(() => { this.error = null }, 3000)\r\n        return\r\n      }\r\n\r\n      this.loading = true\r\n      this.loadingMessage = ` ${this.testSymbol} ...`\r\n      this.error = null\r\n\r\n      try {\r\n        const startTime = Date.now()\r\n        const metadata = await metadataService.getSymbolMetadata(this.testSymbol.toUpperCase())\r\n        const duration = Date.now() - startTime\r\n\r\n        // \r\n        const result = {\r\n          ...metadata,\r\n          duration,\r\n          timestamp: new Date().toISOString()\r\n        }\r\n\r\n        //  ()\r\n        this.testResults = [result, ...this.testResults.filter(r => r.symbol !== result.symbol)]\r\n\r\n        this.successMessage = ` ${result.symbol}  (${duration}ms)`\r\n        setTimeout(() => { this.successMessage = null }, 3000)\r\n\r\n        await this.updateCacheStats()\r\n      } catch (error) {\r\n        this.error = `: ${error.message}`\r\n        setTimeout(() => { this.error = null }, 5000)\r\n      } finally {\r\n        this.loading = false\r\n        this.loadingMessage = ''\r\n      }\r\n    },\r\n\r\n    async testBatchSymbols() {\r\n      this.loading = true\r\n      this.loadingMessage = ` ${this.testSymbols.length} ...`\r\n      this.error = null\r\n\r\n      try {\r\n        const startTime = Date.now()\r\n        const metadataMap = await metadataService.getBatchMetadata(this.testSymbols)\r\n        const duration = Date.now() - startTime\r\n\r\n        // \r\n        const results = []\r\n        for (const [symbol, metadata] of metadataMap) {\r\n          results.push({\r\n            ...metadata,\r\n            duration: duration / metadataMap.size, // \r\n            timestamp: new Date().toISOString()\r\n          })\r\n        }\r\n\r\n        this.testResults = results\r\n        this.successMessage = ` ${results.length}  (${duration}ms)`\r\n        setTimeout(() => { this.successMessage = null }, 3000)\r\n\r\n        await this.updateCacheStats()\r\n      } catch (error) {\r\n        this.error = `: ${error.message}`\r\n        setTimeout(() => { this.error = null }, 5000)\r\n      } finally {\r\n        this.loading = false\r\n        this.loadingMessage = ''\r\n      }\r\n    },\r\n\r\n    async clearCache() {\r\n      this.loading = true\r\n      this.loadingMessage = '...'\r\n\r\n      try {\r\n        metadataService.clearCache()\r\n        await this.updateCacheStats()\r\n        this.successMessage = ''\r\n        setTimeout(() => { this.successMessage = null }, 3000)\r\n      } catch (error) {\r\n        this.error = `: ${error.message}`\r\n        setTimeout(() => { this.error = null }, 5000)\r\n      } finally {\r\n        this.loading = false\r\n        this.loadingMessage = ''\r\n      }\r\n    },\r\n\r\n    async warmupCache() {\r\n      this.loading = true\r\n      this.loadingMessage = '...'\r\n\r\n      try {\r\n        const result = await metadataService.warmupCache(this.testSymbols)\r\n        await this.updateCacheStats()\r\n        \r\n        this.successMessage = `: ${result.symbolsProcessed} , ${result.duration}ms`\r\n        setTimeout(() => { this.successMessage = null }, 3000)\r\n      } catch (error) {\r\n        this.error = `: ${error.message}`\r\n        setTimeout(() => { this.error = null }, 5000)\r\n      } finally {\r\n        this.loading = false\r\n        this.loadingMessage = ''\r\n      }\r\n    },\r\n\r\n    async updateCacheStats() {\r\n      try {\r\n        this.cacheStats = metadataService.getCacheStats()\r\n      } catch (error) {\r\n        console.warn('Failed to get cache stats:', error)\r\n      }\r\n    },\r\n\r\n    getResultCardClass(result) {\r\n      if (result.confidence >= 0.9) return 'high-confidence'\r\n      if (result.confidence >= 0.7) return 'medium-confidence'\r\n      if (result.confidence >= 0.5) return 'low-confidence'\r\n      return 'no-confidence'\r\n    },\r\n\r\n    getConfidenceBadgeClass(confidence) {\r\n      if (confidence >= 0.9) return 'high'\r\n      if (confidence >= 0.7) return 'medium'\r\n      if (confidence >= 0.5) return 'low'\r\n      return 'none'\r\n    },\r\n\r\n    formatTimestamp(timestamp) {\r\n      if (!timestamp) return 'N/A'\r\n      return new Date(timestamp).toLocaleString('zh-TW')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.metadata-test-container {\r\n  max-width: 1600px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\r\n}\r\n\r\n.header {\r\n  text-align: center;\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.header h1 {\r\n  color: #2c3e50;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.header p {\r\n  color: #7f8c8d;\r\n  font-size: 16px;\r\n}\r\n\r\n.control-panel {\r\n  background: #f8f9fa;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.mode-selector {\r\n  display: flex;\r\n  gap: 20px;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.mode-selector label {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  cursor: pointer;\r\n  font-weight: 500;\r\n}\r\n\r\n.test-controls {\r\n  display: flex;\r\n  gap: 10px;\r\n  margin-bottom: 15px;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.test-controls button {\r\n  padding: 8px 16px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  background: #3498db;\r\n  color: white;\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n  transition: background-color 0.2s;\r\n}\r\n\r\n.test-controls button:hover:not(:disabled) {\r\n  background: #2980b9;\r\n}\r\n\r\n.test-controls button:disabled {\r\n  background: #bdc3c7;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.symbol-input input {\r\n  padding: 8px 12px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 14px;\r\n  width: 200px;\r\n}\r\n\r\n.status-panel {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.loading {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  color: #3498db;\r\n  font-weight: 500;\r\n}\r\n\r\n.spinner {\r\n  width: 16px;\r\n  height: 16px;\r\n  border: 2px solid #e3f2fd;\r\n  border-top: 2px solid #3498db;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n.error {\r\n  color: #e74c3c;\r\n  font-weight: 500;\r\n}\r\n\r\n.success {\r\n  color: #27ae60;\r\n  font-weight: 500;\r\n}\r\n\r\n.cache-stats {\r\n  background: #f8f9fa;\r\n  padding: 15px;\r\n  border-radius: 8px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.cache-stats h3 {\r\n  margin: 0 0 10px 0;\r\n  color: #2c3e50;\r\n}\r\n\r\n.stats-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\r\n  gap: 10px;\r\n}\r\n\r\n.stat-item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n\r\n.stat-item label {\r\n  font-weight: 500;\r\n  color: #7f8c8d;\r\n}\r\n\r\n.results-section {\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.results-section h3 {\r\n  color: #2c3e50;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.results-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\r\n  gap: 15px;\r\n}\r\n\r\n.result-card {\r\n  border: 1px solid #e1e8ed;\r\n  border-radius: 8px;\r\n  padding: 15px;\r\n  background: white;\r\n}\r\n\r\n.result-card.high-confidence {\r\n  border-left: 4px solid #27ae60;\r\n}\r\n\r\n.result-card.medium-confidence {\r\n  border-left: 4px solid #f39c12;\r\n}\r\n\r\n.result-card.low-confidence {\r\n  border-left: 4px solid #e67e22;\r\n}\r\n\r\n.result-card.no-confidence {\r\n  border-left: 4px solid #e74c3c;\r\n}\r\n\r\n.result-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.result-header h4 {\r\n  margin: 0;\r\n  color: #2c3e50;\r\n}\r\n\r\n.confidence-badge {\r\n  padding: 2px 8px;\r\n  border-radius: 12px;\r\n  font-size: 12px;\r\n  font-weight: bold;\r\n}\r\n\r\n.confidence-badge.high {\r\n  background: #d5f4e6;\r\n  color: #27ae60;\r\n}\r\n\r\n.confidence-badge.medium {\r\n  background: #fef9e7;\r\n  color: #f39c12;\r\n}\r\n\r\n.confidence-badge.low {\r\n  background: #fdf2e9;\r\n  color: #e67e22;\r\n}\r\n\r\n.confidence-badge.none {\r\n  background: #fdedec;\r\n  color: #e74c3c;\r\n}\r\n\r\n.result-content {\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.metadata-row {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-bottom: 5px;\r\n}\r\n\r\n.metadata-row label {\r\n  font-weight: 500;\r\n  color: #7f8c8d;\r\n}\r\n\r\n.result-footer {\r\n  border-top: 1px solid #ecf0f1;\r\n  padding-top: 8px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n\r\n.result-footer small {\r\n  color: #95a5a6;\r\n  font-size: 11px;\r\n}\r\n\r\n.comparison-section {\r\n  margin-top: 30px;\r\n}\r\n\r\n.comparison-section h3 {\r\n  color: #2c3e50;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.comparison-table {\r\n  overflow-x: auto;\r\n}\r\n\r\n.comparison-table table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  background: white;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\r\n}\r\n\r\n.comparison-table th,\r\n.comparison-table td {\r\n  padding: 12px;\r\n  text-align: left;\r\n  border-bottom: 1px solid #ecf0f1;\r\n}\r\n\r\n.comparison-table th {\r\n  background: #f8f9fa;\r\n  font-weight: 600;\r\n  color: #2c3e50;\r\n}\r\n\r\n.match-indicator {\r\n  padding: 2px 8px;\r\n  border-radius: 12px;\r\n  font-size: 12px;\r\n  font-weight: bold;\r\n}\r\n\r\n.match-indicator.high {\r\n  background: #d5f4e6;\r\n  color: #27ae60;\r\n}\r\n\r\n.match-indicator.medium {\r\n  background: #fef9e7;\r\n  color: #f39c12;\r\n}\r\n\r\n.match-indicator.low {\r\n  background: #fdedec;\r\n  color: #e74c3c;\r\n}\r\n</style>","<template>\r\n  <div class=\"proxy-diagnostic\">\r\n    <div class=\"test-header\">\r\n      <h2> Yahoo Finance API Proxy </h2>\r\n      <p> CORS  Yahoo Finance API </p>\r\n    </div>\r\n\r\n    <div class=\"test-controls\">\r\n      <div class=\"symbol-input\">\r\n        <label>:</label>\r\n        <input v-model=\"testSymbol\" placeholder=\"AAPL\" />\r\n        <button @click=\"runFullDiagnostic\" :disabled=\"testing\">\r\n          {{ testing ? '...' : '' }}\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-if=\"testing\" class=\"loading\">\r\n      <div class=\"spinner\"></div>\r\n      <p> {{ currentTest }}...</p>\r\n    </div>\r\n\r\n    <!-- Proxy  -->\r\n    <div class=\"proxy-results\">\r\n      <h3> CORS Proxy </h3>\r\n      <div class=\"proxy-grid\">\r\n        <div \r\n          v-for=\"(result, index) in proxyResults\" \r\n          :key=\"index\"\r\n          class=\"proxy-card\"\r\n          :class=\"getStatusClass(result.status)\"\r\n        >\r\n          <div class=\"proxy-header\">\r\n            <h4>Proxy {{ index + 1 }}: {{ result.name }}</h4>\r\n            <span class=\"status-badge\" :class=\"getStatusClass(result.status)\">\r\n              {{ result.status }}\r\n            </span>\r\n          </div>\r\n          \r\n          <div class=\"proxy-details\">\r\n            <p><strong>URL:</strong> {{ result.url }}</p>\r\n            <p><strong>:</strong> {{ result.responseTime }}ms</p>\r\n            <p><strong>HTTP :</strong> {{ result.httpStatus }}</p>\r\n            \r\n            <div v-if=\"result.error\" class=\"error-details\">\r\n              <p><strong>:</strong> {{ result.errorType }}</p>\r\n              <p><strong>:</strong> {{ result.error }}</p>\r\n            </div>\r\n            \r\n            <div v-if=\"result.data\" class=\"success-details\">\r\n              <p><strong>:</strong> {{ result.dataPoints }}</p>\r\n              <p><strong>:</strong> ${{ result.priceRange?.min }} - ${{ result.priceRange?.max }}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Yahoo Finance API  -->\r\n    <div class=\"direct-api-test\">\r\n      <h3> Yahoo Finance API </h3>\r\n      <div class=\"api-test-grid\">\r\n        <div class=\"api-test-card\">\r\n          <h4>Chart API ()</h4>\r\n          <div class=\"test-result\" :class=\"getStatusClass(directApiResults.chart?.status)\">\r\n            <p><strong>:</strong> {{ directApiResults.chart?.status || '' }}</p>\r\n            <p v-if=\"directApiResults.chart?.error\"><strong>:</strong> {{ directApiResults.chart.error }}</p>\r\n            <p v-if=\"directApiResults.chart?.dataPoints\"><strong>:</strong> {{ directApiResults.chart.dataPoints }}</p>\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"api-test-card\">\r\n          <h4>Quote Summary API ()</h4>\r\n          <div class=\"test-result\" :class=\"getStatusClass(directApiResults.quoteSummary?.status)\">\r\n            <p><strong>:</strong> {{ directApiResults.quoteSummary?.status || '' }}</p>\r\n            <p v-if=\"directApiResults.quoteSummary?.error\"><strong>:</strong> {{ directApiResults.quoteSummary.error }}</p>\r\n            <p v-if=\"directApiResults.quoteSummary?.sector\"><strong>Sector:</strong> {{ directApiResults.quoteSummary.sector }}</p>\r\n            <p v-if=\"directApiResults.quoteSummary?.industry\"><strong>Industry:</strong> {{ directApiResults.quoteSummary.industry }}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div class=\"network-info\">\r\n      <h3> </h3>\r\n      <div class=\"network-details\">\r\n        <p><strong>:</strong> {{ networkInfo.userAgent }}</p>\r\n        <p><strong>:</strong> {{ networkInfo.language }}</p>\r\n        <p><strong>:</strong> {{ networkInfo.timezone }}</p>\r\n        <p><strong>:</strong> {{ networkInfo.connection }}</p>\r\n        <p><strong>:</strong> {{ networkInfo.online ? '' : '' }}</p>\r\n      </div>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div v-if=\"diagnosticComplete\" class=\"recommendations\">\r\n      <h3> </h3>\r\n      <div class=\"recommendation-content\">\r\n        <div v-if=\"workingProxies.length > 0\" class=\"success-recommendation\">\r\n          <h4>  ({{ workingProxies.length }}/{{ proxyResults.length }})</h4>\r\n          <ul>\r\n            <li v-for=\"proxy in workingProxies\" :key=\"proxy.index\">\r\n              {{ proxy.name }} - : {{ proxy.responseTime }}ms\r\n            </li>\r\n          </ul>\r\n        </div>\r\n        \r\n        <div v-if=\"failedProxies.length > 0\" class=\"warning-recommendation\">\r\n          <h4>  ({{ failedProxies.length }}/{{ proxyResults.length }})</h4>\r\n          <ul>\r\n            <li v-for=\"proxy in failedProxies\" :key=\"proxy.index\">\r\n              {{ proxy.name }} - {{ proxy.errorType }}: {{ proxy.error }}\r\n            </li>\r\n          </ul>\r\n        </div>\r\n\r\n        <div class=\"solution-suggestions\">\r\n          <h4> </h4>\r\n          <div v-if=\"workingProxies.length === 0\" class=\"critical-suggestions\">\r\n            <p><strong>:</strong></p>\r\n            <ul>\r\n              <li><strong>CORS :</strong> </li>\r\n              <li><strong>:</strong> </li>\r\n              <li><strong>Yahoo Finance API :</strong> API </li>\r\n              <li><strong>:</strong> </li>\r\n            </ul>\r\n          </div>\r\n          \r\n          <div v-else class=\"optimization-suggestions\">\r\n            <p><strong>:</strong></p>\r\n            <ul>\r\n              <li>: {{ fastestProxy?.name }}</li>\r\n              <li></li>\r\n              <li></li>\r\n              <li> API </li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'ProxyDiagnosticTest',\r\n  data() {\r\n    return {\r\n      testSymbol: 'AAPL',\r\n      testing: false,\r\n      currentTest: '',\r\n      diagnosticComplete: false,\r\n      \r\n      // Proxy \r\n      proxyResults: [],\r\n      \r\n      //  API \r\n      directApiResults: {\r\n        chart: null,\r\n        quoteSummary: null\r\n      },\r\n      \r\n      // \r\n      networkInfo: {\r\n        userAgent: navigator.userAgent,\r\n        language: navigator.language,\r\n        timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\r\n        connection: navigator.connection?.effectiveType || 'unknown',\r\n        online: navigator.onLine\r\n      },\r\n      \r\n      // CORS  - 202412\r\n      corsProxies: [\r\n        {\r\n          name: 'CORS.SH',\r\n          url: 'https://cors.sh/',\r\n          description: ' CORS ',\r\n          type: 'direct'\r\n        },\r\n        {\r\n          name: 'Proxy CORS (isomorphic-git)',\r\n          url: 'https://proxy-cors.isomorphic-git.org/',\r\n          description: ' isomorphic-git ',\r\n          type: 'direct'\r\n        },\r\n        {\r\n          name: 'ThingProxy',\r\n          url: 'https://thingproxy.freeboard.io/fetch/',\r\n          description: ' Freeboard.io ',\r\n          type: 'direct'\r\n        },\r\n        {\r\n          name: 'CORS Proxy (HTMLDriven)',\r\n          url: 'https://cors-proxy.htmldriven.com/?url=',\r\n          description: '',\r\n          type: 'query'\r\n        },\r\n        {\r\n          name: 'AllOrigins',\r\n          url: 'https://api.allorigins.win/raw?url=',\r\n          description: ' CORS  ( CORS )',\r\n          type: 'query'\r\n        },\r\n        {\r\n          name: 'CorsProxy.io',\r\n          url: 'https://corsproxy.io/?',\r\n          description: ' CORS  ()',\r\n          type: 'query'\r\n        },\r\n        {\r\n          name: 'CORS Anywhere',\r\n          url: 'https://cors-anywhere.herokuapp.com/',\r\n          description: 'Heroku  CORS  ()',\r\n          type: 'direct'\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  \r\n  computed: {\r\n    workingProxies() {\r\n      return this.proxyResults.filter(p => p.status === 'SUCCESS')\r\n    },\r\n    \r\n    failedProxies() {\r\n      return this.proxyResults.filter(p => p.status === 'FAILED')\r\n    },\r\n    \r\n    fastestProxy() {\r\n      const working = this.workingProxies\r\n      if (working.length === 0) return null\r\n      return working.reduce((fastest, current) => \r\n        current.responseTime < fastest.responseTime ? current : fastest\r\n      )\r\n    }\r\n  },\r\n  \r\n  methods: {\r\n    async runFullDiagnostic() {\r\n      this.testing = true\r\n      this.diagnosticComplete = false\r\n      this.proxyResults = []\r\n      this.directApiResults = { chart: null, quoteSummary: null }\r\n      \r\n      try {\r\n        //  CORS \r\n        await this.testAllProxies()\r\n        \r\n        //  API \r\n        await this.testDirectAPI()\r\n        \r\n        this.diagnosticComplete = true\r\n      } catch (error) {\r\n        console.error(':', error)\r\n      } finally {\r\n        this.testing = false\r\n        this.currentTest = ''\r\n      }\r\n    },\r\n    \r\n    async testAllProxies() {\r\n      for (let i = 0; i < this.corsProxies.length; i++) {\r\n        const proxy = this.corsProxies[i]\r\n        this.currentTest = `${proxy.name} `\r\n        \r\n        const result = await this.testSingleProxy(proxy, i)\r\n        this.proxyResults.push(result)\r\n        \r\n        // \r\n        if (i < this.corsProxies.length - 1) {\r\n          await this.delay(1000)\r\n        }\r\n      }\r\n    },\r\n    \r\n    async testSingleProxy(proxy, index) {\r\n      const startTime = Date.now()\r\n      const result = {\r\n        index,\r\n        name: proxy.name,\r\n        url: proxy.url,\r\n        type: proxy.type,\r\n        status: 'TESTING',\r\n        responseTime: 0,\r\n        httpStatus: null,\r\n        error: null,\r\n        errorType: null,\r\n        data: null,\r\n        dataPoints: 0,\r\n        priceRange: null\r\n      }\r\n      \r\n      try {\r\n        //  URL - \r\n        const targetUrl = `https://query1.finance.yahoo.com/v8/finance/chart/${this.testSymbol}?interval=1d&range=1mo`\r\n        let testUrl\r\n        \r\n        if (proxy.type === 'query') {\r\n          // : ?url=\r\n          testUrl = `${proxy.url}${encodeURIComponent(targetUrl)}`\r\n        } else {\r\n          // \r\n          testUrl = `${proxy.url}${targetUrl}`\r\n        }\r\n        \r\n        console.log(`Testing ${proxy.name}:`, testUrl.substring(0, 120) + '...')\r\n        \r\n        const response = await fetch(testUrl, {\r\n          method: 'GET',\r\n          headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json',\r\n            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'\r\n          }\r\n        })\r\n        \r\n        result.responseTime = Date.now() - startTime\r\n        result.httpStatus = response.status\r\n        \r\n        if (!response.ok) {\r\n          throw new Error(`HTTP ${response.status}: ${response.statusText}`)\r\n        }\r\n        \r\n        const data = await response.json()\r\n        \r\n        // \r\n        if (!data.chart || !data.chart.result || data.chart.result.length === 0) {\r\n          throw new Error('Invalid data structure - no chart results')\r\n        }\r\n        \r\n        const chartResult = data.chart.result[0]\r\n        const quotes = chartResult.indicators?.quote?.[0]\r\n        \r\n        if (!quotes || !quotes.close) {\r\n          throw new Error('Invalid data structure - no price data')\r\n        }\r\n        \r\n        const closes = quotes.close.filter(price => price !== null)\r\n        \r\n        result.status = 'SUCCESS'\r\n        result.data = data\r\n        result.dataPoints = closes.length\r\n        result.priceRange = {\r\n          min: Math.min(...closes).toFixed(2),\r\n          max: Math.max(...closes).toFixed(2)\r\n        }\r\n        \r\n        console.log(` ${proxy.name} :`, {\r\n          responseTime: result.responseTime,\r\n          dataPoints: result.dataPoints,\r\n          priceRange: result.priceRange\r\n        })\r\n        \r\n      } catch (error) {\r\n        result.status = 'FAILED'\r\n        result.responseTime = Date.now() - startTime\r\n        result.error = error.message\r\n        \r\n        // \r\n        if (error.message.includes('CORS') || error.message.includes('cors')) {\r\n          result.errorType = 'CORS_ERROR'\r\n        } else if (error.message.includes('401')) {\r\n          result.errorType = 'UNAUTHORIZED'\r\n        } else if (error.message.includes('403')) {\r\n          result.errorType = 'FORBIDDEN'\r\n        } else if (error.message.includes('404')) {\r\n          result.errorType = 'NOT_FOUND'\r\n        } else if (error.message.includes('429')) {\r\n          result.errorType = 'RATE_LIMITED'\r\n        } else if (error.message.includes('Failed to fetch') || error.message.includes('fetch')) {\r\n          result.errorType = 'NETWORK_ERROR'\r\n        } else if (error.message.includes('Invalid data structure')) {\r\n          result.errorType = 'DATA_FORMAT_ERROR'\r\n        } else if (error.message.includes('timeout')) {\r\n          result.errorType = 'TIMEOUT_ERROR'\r\n        } else {\r\n          result.errorType = 'UNKNOWN_ERROR'\r\n        }\r\n        \r\n        console.log(` ${proxy.name} :`, {\r\n          errorType: result.errorType,\r\n          error: result.error,\r\n          responseTime: result.responseTime\r\n        })\r\n      }\r\n      \r\n      return result\r\n    },\r\n    \r\n    async testDirectAPI() {\r\n      this.currentTest = 'Yahoo Finance API '\r\n      \r\n      //  Chart API\r\n      try {\r\n        const chartUrl = `https://query1.finance.yahoo.com/v8/finance/chart/${this.testSymbol}?interval=1d&range=1mo`\r\n        const chartResponse = await fetch(chartUrl)\r\n        \r\n        if (chartResponse.ok) {\r\n          const chartData = await chartResponse.json()\r\n          const dataPoints = chartData.chart?.result?.[0]?.indicators?.quote?.[0]?.close?.filter(p => p !== null)?.length || 0\r\n          \r\n          this.directApiResults.chart = {\r\n            status: 'SUCCESS',\r\n            dataPoints\r\n          }\r\n        } else {\r\n          throw new Error(`HTTP ${chartResponse.status}`)\r\n        }\r\n      } catch (error) {\r\n        this.directApiResults.chart = {\r\n          status: 'FAILED',\r\n          error: error.message\r\n        }\r\n      }\r\n      \r\n      //  Quote Summary API\r\n      try {\r\n        const quoteUrl = `https://query1.finance.yahoo.com/v10/finance/quoteSummary/${this.testSymbol}?modules=summaryProfile`\r\n        const quoteResponse = await fetch(quoteUrl)\r\n        \r\n        if (quoteResponse.ok) {\r\n          const quoteData = await quoteResponse.json()\r\n          const profile = quoteData.quoteSummary?.result?.[0]?.summaryProfile\r\n          \r\n          this.directApiResults.quoteSummary = {\r\n            status: 'SUCCESS',\r\n            sector: profile?.sector,\r\n            industry: profile?.industry\r\n          }\r\n        } else {\r\n          throw new Error(`HTTP ${quoteResponse.status}`)\r\n        }\r\n      } catch (error) {\r\n        this.directApiResults.quoteSummary = {\r\n          status: 'FAILED',\r\n          error: error.message\r\n        }\r\n      }\r\n    },\r\n    \r\n    getStatusClass(status) {\r\n      switch (status) {\r\n        case 'SUCCESS': return 'success'\r\n        case 'FAILED': return 'failed'\r\n        case 'TESTING': return 'testing'\r\n        default: return 'unknown'\r\n      }\r\n    },\r\n    \r\n    delay(ms) {\r\n      return new Promise(resolve => setTimeout(resolve, ms))\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.proxy-diagnostic {\r\n  max-width: 1600px;\r\n  margin: 0 auto;\r\n  padding: 2rem;\r\n}\r\n\r\n.test-header {\r\n  text-align: center;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.test-header h2 {\r\n  color: #2c3e50;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.test-controls {\r\n  background: #f8f9fa;\r\n  padding: 1.5rem;\r\n  border-radius: 8px;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.symbol-input {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 1rem;\r\n}\r\n\r\n.symbol-input input {\r\n  padding: 0.5rem;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  width: 100px;\r\n}\r\n\r\n.symbol-input button {\r\n  padding: 0.5rem 1rem;\r\n  background: #007bff;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n\r\n.symbol-input button:disabled {\r\n  background: #6c757d;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.loading {\r\n  text-align: center;\r\n  padding: 2rem;\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.spinner {\r\n  width: 40px;\r\n  height: 40px;\r\n  border: 4px solid #e9ecef;\r\n  border-top: 4px solid #007bff;\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n  margin: 0 auto 1rem;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n.proxy-results, .direct-api-test, .network-info, .recommendations {\r\n  background: white;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  padding: 2rem;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.proxy-results h3, .direct-api-test h3, .network-info h3, .recommendations h3 {\r\n  margin: 0 0 1.5rem 0;\r\n  color: #495057;\r\n  border-bottom: 2px solid #dee2e6;\r\n  padding-bottom: 0.5rem;\r\n}\r\n\r\n.proxy-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));\r\n  gap: 1.5rem;\r\n}\r\n\r\n.proxy-card {\r\n  border: 2px solid #e9ecef;\r\n  border-radius: 8px;\r\n  padding: 1.5rem;\r\n  transition: all 0.3s;\r\n}\r\n\r\n.proxy-card.success {\r\n  border-color: #28a745;\r\n  background: #f8fff9;\r\n}\r\n\r\n.proxy-card.failed {\r\n  border-color: #dc3545;\r\n  background: #fff8f8;\r\n}\r\n\r\n.proxy-card.testing {\r\n  border-color: #ffc107;\r\n  background: #fffdf5;\r\n}\r\n\r\n.proxy-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.proxy-header h4 {\r\n  margin: 0;\r\n  color: #495057;\r\n}\r\n\r\n.status-badge {\r\n  padding: 0.25rem 0.75rem;\r\n  border-radius: 20px;\r\n  font-size: 0.75rem;\r\n  font-weight: 600;\r\n  text-transform: uppercase;\r\n}\r\n\r\n.status-badge.success {\r\n  background: #d4edda;\r\n  color: #155724;\r\n}\r\n\r\n.status-badge.failed {\r\n  background: #f8d7da;\r\n  color: #721c24;\r\n}\r\n\r\n.status-badge.testing {\r\n  background: #fff3cd;\r\n  color: #856404;\r\n}\r\n\r\n.proxy-details p {\r\n  margin: 0.5rem 0;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.error-details {\r\n  background: #f8d7da;\r\n  padding: 1rem;\r\n  border-radius: 4px;\r\n  margin-top: 1rem;\r\n}\r\n\r\n.success-details {\r\n  background: #d4edda;\r\n  padding: 1rem;\r\n  border-radius: 4px;\r\n  margin-top: 1rem;\r\n}\r\n\r\n.api-test-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\r\n  gap: 1.5rem;\r\n}\r\n\r\n.api-test-card {\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  padding: 1.5rem;\r\n}\r\n\r\n.api-test-card h4 {\r\n  margin: 0 0 1rem 0;\r\n  color: #495057;\r\n}\r\n\r\n.test-result {\r\n  padding: 1rem;\r\n  border-radius: 4px;\r\n}\r\n\r\n.test-result.success {\r\n  background: #d4edda;\r\n  color: #155724;\r\n}\r\n\r\n.test-result.failed {\r\n  background: #f8d7da;\r\n  color: #721c24;\r\n}\r\n\r\n.network-details p {\r\n  margin: 0.5rem 0;\r\n  font-size: 0.9rem;\r\n  color: #6c757d;\r\n}\r\n\r\n.recommendation-content {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1.5rem;\r\n}\r\n\r\n.success-recommendation {\r\n  background: #d4edda;\r\n  padding: 1.5rem;\r\n  border-radius: 8px;\r\n  color: #155724;\r\n}\r\n\r\n.warning-recommendation {\r\n  background: #f8d7da;\r\n  padding: 1.5rem;\r\n  border-radius: 8px;\r\n  color: #721c24;\r\n}\r\n\r\n.solution-suggestions {\r\n  background: #e2f3ff;\r\n  padding: 1.5rem;\r\n  border-radius: 8px;\r\n  color: #004085;\r\n}\r\n\r\n.critical-suggestions {\r\n  background: #fff3cd;\r\n  padding: 1rem;\r\n  border-radius: 4px;\r\n  margin-top: 1rem;\r\n  color: #856404;\r\n}\r\n\r\n.optimization-suggestions {\r\n  background: #d1ecf1;\r\n  padding: 1rem;\r\n  border-radius: 4px;\r\n  margin-top: 1rem;\r\n  color: #0c5460;\r\n}\r\n\r\nul {\r\n  margin: 0.5rem 0;\r\n  padding-left: 1.5rem;\r\n}\r\n\r\nli {\r\n  margin: 0.25rem 0;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .proxy-diagnostic {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .proxy-grid, .api-test-grid {\r\n    grid-template-columns: 1fr;\r\n  }\r\n  \r\n  .symbol-input {\r\n    flex-direction: column;\r\n    align-items: stretch;\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"indicators-manager\">\r\n    <div class=\"manager-header\">\r\n      <h2></h2>\r\n      <p></p>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div class=\"status-section\">\r\n      <h3></h3>\r\n      \r\n      <div class=\"status-grid\">\r\n        <!--  -->\r\n        <div class=\"status-card\" :class=\"{ 'available': dataSourceStatus?.precomputed?.available }\">\r\n          <div class=\"status-header\">\r\n            <h4></h4>\r\n            <span class=\"status-badge\" :class=\"dataSourceStatus?.precomputed?.available ? 'success' : 'error'\">\r\n              {{ dataSourceStatus?.precomputed?.available ? '' : '' }}\r\n            </span>\r\n          </div>\r\n          \r\n          <div v-if=\"dataSourceStatus?.precomputed?.available\" class=\"status-details\">\r\n            <p><strong>:</strong> {{ dataSourceStatus.precomputed.symbols.length }}</p>\r\n            <p><strong>:</strong> {{ dataSourceStatus.precomputed.successful }}</p>\r\n            <p><strong>:</strong> {{ dataSourceStatus.precomputed.failed }}</p>\r\n            <p><strong>:</strong> {{ formatDate(dataSourceStatus.precomputed.lastUpdate) }}</p>\r\n          </div>\r\n        </div>\r\n\r\n        <!--  -->\r\n        <div class=\"status-card available\">\r\n          <div class=\"status-header\">\r\n            <h4></h4>\r\n            <span class=\"status-badge success\"></span>\r\n          </div>\r\n          \r\n          <div class=\"status-details\">\r\n            <p><strong>:</strong> {{ dataSourceStatus?.cache?.memoryCache || 0 }} </p>\r\n            <p><strong>:</strong> {{ dataSourceStatus?.cache?.localStorageCache || 0 }} </p>\r\n            <p><strong>:</strong> {{ formatBytes(dataSourceStatus?.cache?.totalSize || 0) }}</p>\r\n          </div>\r\n        </div>\r\n\r\n        <!--  -->\r\n        <div class=\"status-card available\">\r\n          <div class=\"status-header\">\r\n            <h4></h4>\r\n            <span class=\"status-badge success\"></span>\r\n          </div>\r\n          \r\n          <div class=\"status-details\">\r\n            <p><strong>:</strong> {{ dataSourceStatus?.realtime?.proxies || 0 }} </p>\r\n            <p><strong>:</strong> </p>\r\n            <p><strong>:</strong> 2-20</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div class=\"control-section\">\r\n      <h3></h3>\r\n      \r\n      <div class=\"control-grid\">\r\n        <button @click=\"refreshStatus()\" class=\"control-btn primary\" :disabled=\"loading\">\r\n          {{ loading ? '...' : '' }}\r\n        </button>\r\n        \r\n        <button @click=\"clearAllCaches()\" class=\"control-btn warning\">\r\n          \r\n        </button>\r\n        \r\n        <button @click=\"testPrecomputed()\" class=\"control-btn info\" :disabled=\"testing\">\r\n          {{ testing ? '...' : '' }}\r\n        </button>\r\n        \r\n        <button @click=\"showPreferences = !showPreferences\" class=\"control-btn secondary\">\r\n          {{ showPreferences ? '' : '' }}\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div v-if=\"showPreferences\" class=\"preferences-section\">\r\n      <h3></h3>\r\n      \r\n      <div class=\"preferences-form\">\r\n        <div class=\"form-group\">\r\n          <label>\r\n            <input \r\n              type=\"checkbox\" \r\n              v-model=\"preferences.preferPrecomputed\"\r\n              @change=\"updatePreferences\"\r\n            />\r\n            \r\n          </label>\r\n        </div>\r\n        \r\n        <div class=\"form-group\">\r\n          <label>\r\n            <input \r\n              type=\"checkbox\" \r\n              v-model=\"preferences.fallbackToRealtime\"\r\n              @change=\"updatePreferences\"\r\n            />\r\n            \r\n          </label>\r\n        </div>\r\n        \r\n        <div class=\"form-group\">\r\n          <label> ():</label>\r\n          <input \r\n            type=\"number\" \r\n            v-model.number=\"preferences.maxAgeHours\"\r\n            @change=\"updatePreferences\"\r\n            min=\"1\" \r\n            max=\"72\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div v-if=\"testResults.length > 0\" class=\"test-results-section\">\r\n      <h3></h3>\r\n      \r\n      <div class=\"test-results\">\r\n        <div \r\n          v-for=\"(result, index) in testResults\" \r\n          :key=\"index\"\r\n          class=\"test-result-item\"\r\n          :class=\"{ 'success': result.success, 'error': !result.success }\"\r\n        >\r\n          <div class=\"result-header\">\r\n            <span class=\"symbol\">{{ result.symbol }}</span>\r\n            <span class=\"source\">{{ result.source }}</span>\r\n            <span class=\"load-time\">{{ result.loadTime }}</span>\r\n          </div>\r\n          \r\n          <div v-if=\"result.error\" class=\"error-message\">\r\n            {{ result.error }}\r\n          </div>\r\n          \r\n          <div v-else class=\"indicators-preview\">\r\n            <span>MA5: {{ result.data.ma5?.value || 'N/A' }}</span>\r\n            <span>ADX: {{ result.data.adx14?.value || 'N/A' }}</span>\r\n            <span>MACD: {{ result.data.macd?.signal || 'N/A' }}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div v-if=\"dataSourceStatus?.precomputed?.available\" class=\"symbols-section\">\r\n      <h3></h3>\r\n      \r\n      <div class=\"symbols-grid\">\r\n        <span \r\n          v-for=\"symbol in dataSourceStatus.precomputed.symbols\" \r\n          :key=\"symbol\"\r\n          class=\"symbol-tag\"\r\n        >\r\n          {{ symbol }}\r\n        </span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport hybridTechnicalIndicatorsAPI from '../utils/hybridTechnicalIndicatorsApi.js'\r\n\r\nexport default {\r\n  name: 'TechnicalIndicatorsManager',\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      testing: false,\r\n      showPreferences: false,\r\n      dataSourceStatus: null,\r\n      testResults: [],\r\n      preferences: {\r\n        preferPrecomputed: true,\r\n        fallbackToRealtime: true,\r\n        maxAgeHours: 24\r\n      }\r\n    }\r\n  },\r\n  async mounted() {\r\n    await this.refreshStatus();\r\n  },\r\n  methods: {\r\n    async refreshStatus() {\r\n      this.loading = true;\r\n      try {\r\n        this.dataSourceStatus = await hybridTechnicalIndicatorsAPI.getDataSourceStatus();\r\n      } catch (error) {\r\n        console.error('Failed to refresh status:', error);\r\n        alert(': ' + error.message);\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n    \r\n    async clearAllCaches() {\r\n      if (!confirm('')) {\r\n        return;\r\n      }\r\n      \r\n      try {\r\n        // \r\n        // technicalIndicatorsCache.clearAllCache();\r\n        // precomputedIndicatorsAPI.clearCache();\r\n        alert('');\r\n        await this.refreshStatus();\r\n      } catch (error) {\r\n        alert(': ' + error.message);\r\n      }\r\n    },\r\n    \r\n    async testPrecomputed() {\r\n      this.testing = true;\r\n      this.testResults = [];\r\n      \r\n      const testSymbols = ['AAPL', 'TSLA', 'MSFT'];\r\n      \r\n      try {\r\n        for (const symbol of testSymbols) {\r\n          const startTime = Date.now();\r\n          \r\n          try {\r\n            const data = await hybridTechnicalIndicatorsAPI.getTechnicalIndicators(symbol);\r\n            const loadTime = Date.now() - startTime;\r\n            \r\n            this.testResults.push({\r\n              symbol,\r\n              success: true,\r\n              data,\r\n              source: data.source,\r\n              loadTime: `${loadTime}ms`\r\n            });\r\n          } catch (error) {\r\n            this.testResults.push({\r\n              symbol,\r\n              success: false,\r\n              error: error.message,\r\n              loadTime: `${Date.now() - startTime}ms`\r\n            });\r\n          }\r\n        }\r\n      } finally {\r\n        this.testing = false;\r\n      }\r\n    },\r\n    \r\n    updatePreferences() {\r\n      const maxAge = this.preferences.maxAgeHours * 60 * 60 * 1000;\r\n      \r\n      hybridTechnicalIndicatorsAPI.setPreferences({\r\n        preferPrecomputed: this.preferences.preferPrecomputed,\r\n        fallbackToRealtime: this.preferences.fallbackToRealtime,\r\n        maxPrecomputedAge: maxAge\r\n      });\r\n      \r\n      console.log('Preferences updated:', this.preferences);\r\n    },\r\n    \r\n    formatDate(dateString) {\r\n      if (!dateString) return 'N/A';\r\n      return new Date(dateString).toLocaleString('zh-TW');\r\n    },\r\n    \r\n    formatBytes(bytes) {\r\n      if (bytes === 0) return '0 B';\r\n      const k = 1024;\r\n      const sizes = ['B', 'KB', 'MB'];\r\n      const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.indicators-manager {\r\n  max-width: 1600px;\r\n  margin: 0 auto;\r\n  padding: 2rem;\r\n}\r\n\r\n.manager-header {\r\n  text-align: center;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.manager-header h2 {\r\n  color: #2c3e50;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.status-section, .control-section, .preferences-section, .test-results-section, .symbols-section {\r\n  background: white;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  padding: 1.5rem;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.status-section h3, .control-section h3, .preferences-section h3, .test-results-section h3, .symbols-section h3 {\r\n  margin: 0 0 1rem 0;\r\n  color: #495057;\r\n}\r\n\r\n.status-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\r\n  gap: 1rem;\r\n}\r\n\r\n.status-card {\r\n  background: #f8f9fa;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  border-left: 4px solid #dc3545;\r\n}\r\n\r\n.status-card.available {\r\n  border-left-color: #28a745;\r\n}\r\n\r\n.status-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.status-header h4 {\r\n  margin: 0;\r\n  color: #495057;\r\n}\r\n\r\n.status-badge {\r\n  padding: 0.25rem 0.5rem;\r\n  border-radius: 4px;\r\n  font-size: 0.8rem;\r\n  font-weight: 600;\r\n}\r\n\r\n.status-badge.success {\r\n  background: #d4edda;\r\n  color: #155724;\r\n}\r\n\r\n.status-badge.error {\r\n  background: #f8d7da;\r\n  color: #721c24;\r\n}\r\n\r\n.status-details p {\r\n  margin: 0.25rem 0;\r\n  font-size: 0.9rem;\r\n  color: #6c757d;\r\n}\r\n\r\n.control-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\r\n  gap: 1rem;\r\n}\r\n\r\n.control-btn {\r\n  padding: 0.75rem 1rem;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.9rem;\r\n  font-weight: 600;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.control-btn.primary {\r\n  background: #007bff;\r\n  color: white;\r\n}\r\n\r\n.control-btn.primary:hover:not(:disabled) {\r\n  background: #0056b3;\r\n}\r\n\r\n.control-btn.warning {\r\n  background: #ffc107;\r\n  color: #212529;\r\n}\r\n\r\n.control-btn.warning:hover {\r\n  background: #e0a800;\r\n}\r\n\r\n.control-btn.info {\r\n  background: #17a2b8;\r\n  color: white;\r\n}\r\n\r\n.control-btn.info:hover:not(:disabled) {\r\n  background: #138496;\r\n}\r\n\r\n.control-btn.secondary {\r\n  background: #6c757d;\r\n  color: white;\r\n}\r\n\r\n.control-btn.secondary:hover {\r\n  background: #545b62;\r\n}\r\n\r\n.control-btn:disabled {\r\n  opacity: 0.6;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.preferences-form {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1rem;\r\n}\r\n\r\n.form-group label {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.form-group input[type=\"number\"] {\r\n  padding: 0.5rem;\r\n  border: 1px solid #ced4da;\r\n  border-radius: 4px;\r\n  width: 100px;\r\n}\r\n\r\n.test-results {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1rem;\r\n}\r\n\r\n.test-result-item {\r\n  background: #f8f9fa;\r\n  border: 1px solid #e9ecef;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  border-left: 4px solid #dc3545;\r\n}\r\n\r\n.test-result-item.success {\r\n  border-left-color: #28a745;\r\n}\r\n\r\n.result-header {\r\n  display: flex;\r\n  gap: 1rem;\r\n  margin-bottom: 0.5rem;\r\n  font-weight: 600;\r\n}\r\n\r\n.symbol {\r\n  color: #495057;\r\n}\r\n\r\n.source {\r\n  color: #6c757d;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.load-time {\r\n  margin-left: auto;\r\n  color: #007bff;\r\n}\r\n\r\n.error-message {\r\n  color: #dc3545;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.indicators-preview {\r\n  display: flex;\r\n  gap: 1rem;\r\n  font-size: 0.9rem;\r\n  color: #6c757d;\r\n}\r\n\r\n.symbols-grid {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.symbol-tag {\r\n  background: #e9ecef;\r\n  color: #495057;\r\n  padding: 0.25rem 0.5rem;\r\n  border-radius: 4px;\r\n  font-size: 0.8rem;\r\n  font-weight: 500;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .indicators-manager {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .status-grid, .control-grid {\r\n    grid-template-columns: 1fr;\r\n  }\r\n  \r\n  .result-header {\r\n    flex-direction: column;\r\n    gap: 0.5rem;\r\n  }\r\n  \r\n  .load-time {\r\n    margin-left: 0;\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"auto-update-monitor\">\r\n    <div class=\"monitor-header\">\r\n      <h2></h2>\r\n      <div class=\"header-actions\">\r\n        <button @click=\"refreshStatus\" class=\"btn btn-secondary\" :disabled=\"loading\">\r\n          <span v-if=\"loading\"></span>\r\n          <span v-else></span>\r\n          \r\n        </button>\r\n        <button @click=\"toggleScheduler\" :class=\"schedulerButtonClass\" :disabled=\"loading\">\r\n          {{ schedulerButtonText }}\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"monitor-grid\">\r\n      <!--  -->\r\n      <div class=\"status-card\">\r\n        <div class=\"card-header\">\r\n          <h3></h3>\r\n          <div class=\"status-indicator\" :class=\"schedulerStatusClass\">\r\n            {{ schedulerStatus }}\r\n          </div>\r\n        </div>\r\n        <div class=\"card-content\">\r\n          <div class=\"status-item\">\r\n            <span class=\"label\">:</span>\r\n            <span class=\"value\" :class=\"schedulerStatusClass\">\r\n              {{ status.isRunning ? '' : '' }}\r\n            </span>\r\n          </div>\r\n          <div class=\"status-item\">\r\n            <span class=\"label\">:</span>\r\n            <span class=\"value\">{{ status.activeIntervals?.length || 0 }} </span>\r\n          </div>\r\n          <div class=\"status-item\">\r\n            <span class=\"label\">:</span>\r\n            <span class=\"value\">{{ formatTime(startTime) }}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!--  -->\r\n      <div class=\"status-card\">\r\n        <div class=\"card-header\">\r\n          <h3></h3>\r\n          <div class=\"status-indicator\" :class=\"technicalIndicatorsStatusClass\">\r\n            {{ technicalIndicatorsStatus }}\r\n          </div>\r\n        </div>\r\n        <div class=\"card-content\">\r\n          <div class=\"status-item\">\r\n            <span class=\"label\">:</span>\r\n            <span class=\"value\">{{ formatTime(technicalIndicatorsLastUpdate) }}</span>\r\n          </div>\r\n          <div class=\"status-item\">\r\n            <span class=\"label\">:</span>\r\n            <span class=\"value\" :class=\"getDataAgeClass(technicalIndicatorsAge)\">\r\n              {{ formatDataAge(technicalIndicatorsAge) }}\r\n            </span>\r\n          </div>\r\n          <div class=\"status-item\">\r\n            <span class=\"label\">:</span>\r\n            <span class=\"value\">{{ formatTime(status.nextUpdates?.technicalIndicators) }}</span>\r\n          </div>\r\n          <div class=\"status-item\">\r\n            <span class=\"label\">:</span>\r\n            <span class=\"value\">{{ technicalIndicatorsSuccessRate }}%</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"card-actions\">\r\n          <button @click=\"triggerUpdate('technicalIndicators')\" class=\"btn btn-primary btn-sm\" :disabled=\"loading\">\r\n            \r\n          </button>\r\n          <div class=\"update-note\">\r\n            <small>: </small>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!--  -->\r\n      <div class=\"status-card\">\r\n        <div class=\"card-header\">\r\n          <h3></h3>\r\n          <div class=\"status-indicator\" :class=\"metadataStatusClass\">\r\n            {{ metadataStatus }}\r\n          </div>\r\n        </div>\r\n        <div class=\"card-content\">\r\n          <div class=\"status-item\">\r\n            <span class=\"label\">:</span>\r\n            <span class=\"value\">{{ formatTime(metadataLastUpdate) }}</span>\r\n          </div>\r\n          <div class=\"status-item\">\r\n            <span class=\"label\">:</span>\r\n            <span class=\"value\" :class=\"getDataAgeClass(metadataAge)\">\r\n              {{ formatDataAge(metadataAge) }}\r\n            </span>\r\n          </div>\r\n          <div class=\"status-item\">\r\n            <span class=\"label\">:</span>\r\n            <span class=\"value\">{{ formatTime(status.nextUpdates?.metadata) }}</span>\r\n          </div>\r\n          <div class=\"status-item\">\r\n            <span class=\"label\">:</span>\r\n            <span class=\"value\">{{ metadataSymbolCount }} </span>\r\n          </div>\r\n        </div>\r\n        <div class=\"card-actions\">\r\n          <button @click=\"triggerUpdate('metadata')\" class=\"btn btn-primary btn-sm\" :disabled=\"loading\">\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <!--  -->\r\n      <div class=\"status-card\">\r\n        <div class=\"card-header\">\r\n          <h3></h3>\r\n          <div class=\"status-indicator\" :class=\"warmupStatusClass\">\r\n            {{ warmupStatus }}\r\n          </div>\r\n        </div>\r\n        <div class=\"card-content\">\r\n          <div class=\"status-item\">\r\n            <span class=\"label\">:</span>\r\n            <span class=\"value\" :class=\"warmupStatusClass\">\r\n              {{ warmupInfo.isWarming ? '' : '' }}\r\n            </span>\r\n          </div>\r\n          <div class=\"status-item\">\r\n            <span class=\"label\">:</span>\r\n            <span class=\"value\">{{ Math.round(warmupInfo.progress) }}%</span>\r\n          </div>\r\n          <div class=\"status-item\">\r\n            <span class=\"label\">:</span>\r\n            <span class=\"value\">{{ warmupInfo.trackedSymbols?.length || 0 }} </span>\r\n          </div>\r\n          <div class=\"status-item\">\r\n            <span class=\"label\">:</span>\r\n            <span class=\"value\">{{ formatTime(warmupInfo.lastWarmupTime) }}</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"card-actions\">\r\n          <button @click=\"triggerWarmup\" class=\"btn btn-info btn-sm\" :disabled=\"loading || warmupInfo.isWarming\">\r\n            {{ warmupInfo.isWarming ? '...' : '' }}\r\n          </button>\r\n          <div class=\"update-note\">\r\n            <small>: </small>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!--  -->\r\n      <div class=\"status-card\">\r\n        <div class=\"card-header\">\r\n          <h3></h3>\r\n          <div class=\"status-indicator status-info\">\r\n            {{ cacheStatus }}\r\n          </div>\r\n        </div>\r\n        <div class=\"card-content\">\r\n          <div class=\"status-item\">\r\n            <span class=\"label\">:</span>\r\n            <span class=\"value\">{{ cacheStats.memoryCache }} </span>\r\n          </div>\r\n          <div class=\"status-item\">\r\n            <span class=\"label\">:</span>\r\n            <span class=\"value\">{{ cacheStats.localStorage }} </span>\r\n          </div>\r\n          <div class=\"status-item\">\r\n            <span class=\"label\">:</span>\r\n            <span class=\"value\">{{ cacheStats.totalSize }} </span>\r\n          </div>\r\n          <div class=\"status-item\">\r\n            <span class=\"label\">:</span>\r\n            <span class=\"value\">{{ formatTime(status.nextUpdates?.cacheCleanup) }}</span>\r\n          </div>\r\n        </div>\r\n        <div class=\"card-actions\">\r\n          <button @click=\"triggerUpdate('cache')\" class=\"btn btn-warning btn-sm\" :disabled=\"loading\">\r\n            \r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div class=\"update-logs\">\r\n      <div class=\"logs-header\">\r\n        <h3></h3>\r\n        <button @click=\"clearLogs\" class=\"btn btn-sm btn-outline\"></button>\r\n      </div>\r\n      <div class=\"logs-content\">\r\n        <div v-if=\"logs.length === 0\" class=\"no-logs\">\r\n          \r\n        </div>\r\n        <div v-else class=\"log-entries\">\r\n          <div \r\n            v-for=\"(log, index) in logs\" \r\n            :key=\"index\" \r\n            class=\"log-entry\" \r\n            :class=\"getLogLevelClass(log.level)\"\r\n          >\r\n            <span class=\"log-time\">{{ formatTime(log.timestamp) }}</span>\r\n            <span class=\"log-level\">{{ log.level }}</span>\r\n            <span class=\"log-message\">{{ log.message }}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div class=\"config-panel\">\r\n      <div class=\"config-header\">\r\n        <h3></h3>\r\n        <button @click=\"saveConfig\" class=\"btn btn-success btn-sm\" :disabled=\"!configChanged\">\r\n          \r\n        </button>\r\n      </div>\r\n      <div class=\"config-content\">\r\n        <div class=\"config-section\">\r\n          <h4></h4>\r\n          <div class=\"config-item\">\r\n            <label>\r\n              <input type=\"checkbox\" v-model=\"config.technicalIndicators.enabled\" @change=\"onConfigChange\">\r\n              \r\n            </label>\r\n          </div>\r\n          <div class=\"config-item\">\r\n            <label> ():</label>\r\n            <input \r\n              type=\"number\" \r\n              v-model.number=\"config.technicalIndicators.intervalHours\" \r\n              @change=\"onConfigChange\"\r\n              min=\"1\" \r\n              max=\"24\"\r\n            >\r\n          </div>\r\n          <div class=\"config-item\">\r\n            <label>\r\n              <input type=\"checkbox\" v-model=\"config.technicalIndicators.marketHoursOnly\" @change=\"onConfigChange\">\r\n              \r\n            </label>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"config-section\">\r\n          <h4></h4>\r\n          <div class=\"config-item\">\r\n            <label>\r\n              <input type=\"checkbox\" v-model=\"config.metadata.enabled\" @change=\"onConfigChange\">\r\n              \r\n            </label>\r\n          </div>\r\n          <div class=\"config-item\">\r\n            <label> ():</label>\r\n            <input \r\n              type=\"number\" \r\n              v-model.number=\"config.metadata.intervalHours\" \r\n              @change=\"onConfigChange\"\r\n              min=\"1\" \r\n              max=\"168\"\r\n            >\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { autoUpdateScheduler } from '@/utils/autoUpdateScheduler.js'\r\nimport { performanceCache } from '@/utils/performanceCache.js'\r\nimport { cacheWarmupService } from '@/utils/cacheWarmupService.js'\r\n\r\nexport default {\r\n  name: 'AutoUpdateMonitor',\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      status: {},\r\n      cacheStats: {},\r\n      logs: [],\r\n      config: {\r\n        technicalIndicators: {\r\n          enabled: true,\r\n          intervalHours: 1,\r\n          marketHoursOnly: true\r\n        },\r\n        metadata: {\r\n          enabled: true,\r\n          intervalHours: 24\r\n        }\r\n      },\r\n      configChanged: false,\r\n      startTime: null,\r\n      technicalIndicatorsLastUpdate: null,\r\n      technicalIndicatorsAge: 0,\r\n      technicalIndicatorsSuccessRate: 0,\r\n      metadataLastUpdate: null,\r\n      metadataAge: 0,\r\n      metadataSymbolCount: 0,\r\n      warmupInfo: {\r\n        isWarming: false,\r\n        progress: 0,\r\n        lastWarmupTime: null,\r\n        trackedSymbols: []\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    schedulerStatus() {\r\n      return this.status.isRunning ? '' : ''\r\n    },\r\n    schedulerStatusClass() {\r\n      return this.status.isRunning ? 'status-success' : 'status-error'\r\n    },\r\n    schedulerButtonText() {\r\n      return this.status.isRunning ? '' : ''\r\n    },\r\n    schedulerButtonClass() {\r\n      return this.status.isRunning ? 'btn btn-danger' : 'btn btn-success'\r\n    },\r\n    technicalIndicatorsStatus() {\r\n      if (this.technicalIndicatorsAge < 1) return ''\r\n      if (this.technicalIndicatorsAge < 12) return ''\r\n      if (this.technicalIndicatorsAge < 24) return ''\r\n      return ''\r\n    },\r\n    technicalIndicatorsStatusClass() {\r\n      if (this.technicalIndicatorsAge < 1) return 'status-success'\r\n      if (this.technicalIndicatorsAge < 12) return 'status-warning'\r\n      return 'status-error'\r\n    },\r\n    metadataStatus() {\r\n      if (this.metadataAge < 24) return ''\r\n      if (this.metadataAge < 72) return ''\r\n      return ''\r\n    },\r\n    metadataStatusClass() {\r\n      if (this.metadataAge < 24) return 'status-success'\r\n      if (this.metadataAge < 72) return 'status-warning'\r\n      return 'status-error'\r\n    },\r\n    cacheStatus() {\r\n      const total = this.cacheStats.totalSize || 0\r\n      if (total > 100) return ''\r\n      if (total > 50) return ''\r\n      return ''\r\n    },\r\n    warmupStatus() {\r\n      if (this.warmupInfo.isWarming) return ''\r\n      if (this.warmupInfo.progress === 100) return ''\r\n      if (this.warmupInfo.lastWarmupTime) return ''\r\n      return ''\r\n    },\r\n    warmupStatusClass() {\r\n      if (this.warmupInfo.isWarming) return 'status-warning'\r\n      if (this.warmupInfo.progress === 100) return 'status-success'\r\n      if (this.warmupInfo.lastWarmupTime) return 'status-info'\r\n      return 'status-error'\r\n    }\r\n  },\r\n  async mounted() {\r\n    await this.initializeMonitor()\r\n    this.startPeriodicRefresh()\r\n  },\r\n  beforeUnmount() {\r\n    if (this.refreshInterval) {\r\n      clearInterval(this.refreshInterval)\r\n    }\r\n  },\r\n  methods: {\r\n    async initializeMonitor() {\r\n      this.loading = true\r\n      try {\r\n        await this.refreshStatus()\r\n        await this.loadTechnicalIndicatorsStatus()\r\n        await this.loadMetadataStatus()\r\n        await this.loadWarmupStatus()\r\n        this.startTime = new Date()\r\n        this.addLog('', 'INFO')\r\n      } catch (error) {\r\n        this.addLog(`: ${error.message}`, 'ERROR')\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n\r\n    async refreshStatus() {\r\n      try {\r\n        this.status = autoUpdateScheduler.getStatus()\r\n        this.cacheStats = performanceCache.getStats()\r\n      } catch (error) {\r\n        this.addLog(`: ${error.message}`, 'ERROR')\r\n      }\r\n    },\r\n\r\n    async loadTechnicalIndicatorsStatus() {\r\n      try {\r\n        const basePath = window.location.hostname === 'romarin-hsieh.github.io' ? '/investment-dashboard/' : '/';\r\n        const response = await fetch(`${basePath}data/technical-indicators/latest_index.json`)\r\n        if (response.ok) {\r\n          const data = await response.json()\r\n          this.technicalIndicatorsLastUpdate = new Date(data.generatedAt)\r\n          this.technicalIndicatorsAge = (Date.now() - this.technicalIndicatorsLastUpdate) / (1000 * 60 * 60)\r\n          this.technicalIndicatorsSuccessRate = Math.round((data.successfulSymbols / data.totalSymbols) * 100)\r\n        }\r\n      } catch (error) {\r\n        this.addLog(`: ${error.message}`, 'ERROR')\r\n      }\r\n    },\r\n\r\n    async loadMetadataStatus() {\r\n      try {\r\n        // \r\n        this.metadataLastUpdate = new Date() // \r\n        this.metadataAge = 0\r\n        this.metadataSymbolCount = 24 // \r\n      } catch (error) {\r\n        this.addLog(`: ${error.message}`, 'ERROR')\r\n      }\r\n    },\r\n\r\n    async loadWarmupStatus() {\r\n      try {\r\n        this.warmupInfo = cacheWarmupService.getWarmupStatus()\r\n      } catch (error) {\r\n        this.addLog(`: ${error.message}`, 'ERROR')\r\n      }\r\n    },\r\n\r\n    async triggerWarmup() {\r\n      this.loading = true\r\n      try {\r\n        this.addLog('', 'INFO')\r\n        await cacheWarmupService.triggerManualWarmup()\r\n        this.addLog('', 'SUCCESS')\r\n        await this.loadWarmupStatus()\r\n      } catch (error) {\r\n        this.addLog(`: ${error.message}`, 'ERROR')\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n\r\n    async toggleScheduler() {\r\n      this.loading = true\r\n      try {\r\n        if (this.status.isRunning) {\r\n          autoUpdateScheduler.stop()\r\n          this.addLog('', 'INFO')\r\n        } else {\r\n          autoUpdateScheduler.start()\r\n          this.addLog('', 'INFO')\r\n        }\r\n        await this.refreshStatus()\r\n      } catch (error) {\r\n        this.addLog(`: ${error.message}`, 'ERROR')\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n\r\n    async triggerUpdate(updateType) {\r\n      this.loading = true\r\n      try {\r\n        this.addLog(`: ${updateType}`, 'INFO')\r\n        await autoUpdateScheduler.triggerManualUpdate(updateType)\r\n        this.addLog(`: ${updateType}`, 'SUCCESS')\r\n        await this.refreshStatus()\r\n        \r\n        if (updateType === 'technicalIndicators') {\r\n          await this.loadTechnicalIndicatorsStatus()\r\n        } else if (updateType === 'metadata') {\r\n          await this.loadMetadataStatus()\r\n        }\r\n      } catch (error) {\r\n        this.addLog(`: ${error.message}`, 'ERROR')\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n\r\n    startPeriodicRefresh() {\r\n      this.refreshInterval = setInterval(async () => {\r\n        await this.refreshStatus()\r\n        await this.loadTechnicalIndicatorsStatus()\r\n        await this.loadMetadataStatus()\r\n        await this.loadWarmupStatus()\r\n      }, 30000) //  30 \r\n    },\r\n\r\n    addLog(message, level = 'INFO') {\r\n      const log = {\r\n        timestamp: new Date(),\r\n        level,\r\n        message\r\n      }\r\n      this.logs.unshift(log)\r\n      \r\n      //  100 \r\n      if (this.logs.length > 100) {\r\n        this.logs = this.logs.slice(0, 100)\r\n      }\r\n    },\r\n\r\n    clearLogs() {\r\n      this.logs = []\r\n      this.addLog('', 'INFO')\r\n    },\r\n\r\n    onConfigChange() {\r\n      this.configChanged = true\r\n    },\r\n\r\n    async saveConfig() {\r\n      try {\r\n        // \r\n        localStorage.setItem('autoUpdateConfig', JSON.stringify(this.config))\r\n        this.configChanged = false\r\n        this.addLog('', 'SUCCESS')\r\n      } catch (error) {\r\n        this.addLog(`: ${error.message}`, 'ERROR')\r\n      }\r\n    },\r\n\r\n    formatTime(date) {\r\n      if (!date) return 'N/A'\r\n      return new Date(date).toLocaleString('zh-TW')\r\n    },\r\n\r\n    formatDataAge(ageHours) {\r\n      if (ageHours < 1) return '< 1 '\r\n      if (ageHours < 24) return `${Math.round(ageHours)} `\r\n      return `${Math.round(ageHours / 24)} `\r\n    },\r\n\r\n    getDataAgeClass(ageHours) {\r\n      if (ageHours < 1) return 'text-success'\r\n      if (ageHours < 12) return 'text-warning'\r\n      return 'text-danger'\r\n    },\r\n\r\n    getLogLevelClass(level) {\r\n      return {\r\n        'log-info': level === 'INFO',\r\n        'log-success': level === 'SUCCESS',\r\n        'log-warning': level === 'WARN',\r\n        'log-error': level === 'ERROR'\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.auto-update-monitor {\r\n  padding: 1rem;\r\n  max-width: 1600px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.monitor-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 2rem;\r\n  padding-bottom: 1rem;\r\n  border-bottom: 1px solid #e0e0e0;\r\n}\r\n\r\n.monitor-header h2 {\r\n  margin: 0;\r\n  color: #333;\r\n}\r\n\r\n.header-actions {\r\n  display: flex;\r\n  gap: 1rem;\r\n}\r\n\r\n.monitor-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\r\n  gap: 1.5rem;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.status-card {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 1rem;\r\n  background: #f8f9fa;\r\n  border-bottom: 1px solid #e0e0e0;\r\n}\r\n\r\n.card-header h3 {\r\n  margin: 0;\r\n  font-size: 1.1rem;\r\n  color: #333;\r\n}\r\n\r\n.status-indicator {\r\n  padding: 0.25rem 0.75rem;\r\n  border-radius: 12px;\r\n  font-size: 0.8rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.status-success {\r\n  background: #d4edda;\r\n  color: #155724;\r\n}\r\n\r\n.status-warning {\r\n  background: #fff3cd;\r\n  color: #856404;\r\n}\r\n\r\n.status-error {\r\n  background: #f8d7da;\r\n  color: #721c24;\r\n}\r\n\r\n.status-info {\r\n  background: #d1ecf1;\r\n  color: #0c5460;\r\n}\r\n\r\n.card-content {\r\n  padding: 1rem;\r\n}\r\n\r\n.status-item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 0.75rem;\r\n}\r\n\r\n.status-item:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.status-item .label {\r\n  color: #666;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.status-item .value {\r\n  font-weight: 500;\r\n  color: #333;\r\n}\r\n\r\n.text-success {\r\n  color: #28a745;\r\n}\r\n\r\n.text-warning {\r\n  color: #ffc107;\r\n}\r\n\r\n.text-danger {\r\n  color: #dc3545;\r\n}\r\n\r\n.card-actions {\r\n  padding: 0 1rem 1rem;\r\n}\r\n\r\n.update-note {\r\n  margin-top: 0.5rem;\r\n  color: #6c757d;\r\n  font-style: italic;\r\n}\r\n\r\n.btn {\r\n  padding: 0.5rem 1rem;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  font-size: 0.9rem;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.btn:disabled {\r\n  opacity: 0.6;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.btn-primary {\r\n  background: #007bff;\r\n  color: white;\r\n}\r\n\r\n.btn-primary:hover:not(:disabled) {\r\n  background: #0056b3;\r\n}\r\n\r\n.btn-secondary {\r\n  background: #6c757d;\r\n  color: white;\r\n}\r\n\r\n.btn-secondary:hover:not(:disabled) {\r\n  background: #545b62;\r\n}\r\n\r\n.btn-success {\r\n  background: #28a745;\r\n  color: white;\r\n}\r\n\r\n.btn-success:hover:not(:disabled) {\r\n  background: #1e7e34;\r\n}\r\n\r\n.btn-danger {\r\n  background: #dc3545;\r\n  color: white;\r\n}\r\n\r\n.btn-danger:hover:not(:disabled) {\r\n  background: #c82333;\r\n}\r\n\r\n.btn-warning {\r\n  background: #ffc107;\r\n  color: #212529;\r\n}\r\n\r\n.btn-warning:hover:not(:disabled) {\r\n  background: #e0a800;\r\n}\r\n\r\n.btn-sm {\r\n  padding: 0.375rem 0.75rem;\r\n  font-size: 0.8rem;\r\n}\r\n\r\n.btn-outline {\r\n  background: transparent;\r\n  border: 1px solid #6c757d;\r\n  color: #6c757d;\r\n}\r\n\r\n.btn-outline:hover:not(:disabled) {\r\n  background: #6c757d;\r\n  color: white;\r\n}\r\n\r\n.update-logs, .config-panel {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.logs-header, .config-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 1rem;\r\n  background: #f8f9fa;\r\n  border-bottom: 1px solid #e0e0e0;\r\n}\r\n\r\n.logs-header h3, .config-header h3 {\r\n  margin: 0;\r\n  font-size: 1.1rem;\r\n  color: #333;\r\n}\r\n\r\n.logs-content {\r\n  max-height: 400px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.no-logs {\r\n  padding: 2rem;\r\n  text-align: center;\r\n  color: #666;\r\n}\r\n\r\n.log-entries {\r\n  padding: 1rem;\r\n}\r\n\r\n.log-entry {\r\n  display: flex;\r\n  gap: 1rem;\r\n  padding: 0.5rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.log-entry:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.log-time {\r\n  color: #666;\r\n  white-space: nowrap;\r\n  min-width: 150px;\r\n}\r\n\r\n.log-level {\r\n  font-weight: 500;\r\n  min-width: 60px;\r\n}\r\n\r\n.log-message {\r\n  flex: 1;\r\n}\r\n\r\n.log-info .log-level {\r\n  color: #17a2b8;\r\n}\r\n\r\n.log-success .log-level {\r\n  color: #28a745;\r\n}\r\n\r\n.log-warning .log-level {\r\n  color: #ffc107;\r\n}\r\n\r\n.log-error .log-level {\r\n  color: #dc3545;\r\n}\r\n\r\n.config-content {\r\n  padding: 1rem;\r\n}\r\n\r\n.config-section {\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.config-section:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.config-section h4 {\r\n  margin: 0 0 1rem 0;\r\n  color: #333;\r\n  font-size: 1rem;\r\n}\r\n\r\n.config-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 1rem;\r\n  margin-bottom: 0.75rem;\r\n}\r\n\r\n.config-item label {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  color: #333;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.config-item input[type=\"number\"] {\r\n  padding: 0.375rem 0.75rem;\r\n  border: 1px solid #ced4da;\r\n  border-radius: 4px;\r\n  width: 80px;\r\n}\r\n\r\n.config-item input[type=\"checkbox\"] {\r\n  margin: 0;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .monitor-header {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 1rem;\r\n  }\r\n\r\n  .header-actions {\r\n    width: 100%;\r\n    justify-content: space-between;\r\n  }\r\n\r\n  .monitor-grid {\r\n    grid-template-columns: 1fr;\r\n  }\r\n\r\n  .status-item {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 0.25rem;\r\n  }\r\n\r\n  .log-entry {\r\n    flex-direction: column;\r\n    gap: 0.25rem;\r\n  }\r\n\r\n  .log-time {\r\n    min-width: auto;\r\n  }\r\n\r\n  .config-item {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"system-manager\">\r\n    <div class=\"manager-header\">\r\n      <h2>Control Panel</h2>\r\n      <p></p>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div class=\"overview-section\">\r\n      <div class=\"overview-grid\">\r\n        <div class=\"overview-card\" :class=\"{ 'healthy': systemHealth.overall >= 80 }\">\r\n          <div class=\"card-icon\"></div>\r\n          <div class=\"card-content\">\r\n            <h3></h3>\r\n            <div class=\"health-score\">{{ systemHealth.overall }}%</div>\r\n            <div class=\"health-status\">{{ getHealthStatus(systemHealth.overall) }}</div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"overview-card\">\r\n          <div class=\"card-icon\"></div>\r\n          <div class=\"card-content\">\r\n            <h3></h3>\r\n            <div class=\"data-sources\">\r\n              <span class=\"source-item\" :class=\"{ 'active': dataSourceStatus?.precomputed?.available }\">\r\n                 {{ dataSourceStatus?.precomputed?.available ? '' : '' }}\r\n              </span>\r\n              <span class=\"source-item active\"> </span>\r\n              <span class=\"source-item active\"> </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"overview-card\">\r\n          <div class=\"card-icon\"></div>\r\n          <div class=\"card-content\">\r\n            <h3></h3>\r\n            <div class=\"update-status\" :class=\"schedulerStatusClass\">\r\n              {{ status.isRunning ? '' : '' }}\r\n            </div>\r\n            <div class=\"update-info\">\r\n              : {{ status.activeIntervals?.length || 0 }} \r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"overview-card\">\r\n          <div class=\"card-icon\"></div>\r\n          <div class=\"card-content\">\r\n            <h3></h3>\r\n            <div class=\"performance-score\">{{ performanceScore }}%</div>\r\n            <div class=\"performance-info\">\r\n              : {{ cacheHitRate }}%\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div class=\"details-section\">\r\n      <div class=\"details-grid\">\r\n        <!--  -->\r\n        <div class=\"detail-card\">\r\n          <div class=\"card-header\">\r\n            <h3> </h3>\r\n            <button @click=\"refreshDataSources\" class=\"btn btn-sm\" :disabled=\"loading\">\r\n              {{ loading ? '' : '' }} \r\n            </button>\r\n          </div>\r\n          \r\n          <div class=\"data-source-list\">\r\n            <!--  -->\r\n            <div class=\"source-item\" :class=\"{ 'available': dataSourceStatus?.precomputed?.available }\">\r\n              <div class=\"source-header\">\r\n                <h4></h4>\r\n                <span class=\"status-badge\" :class=\"dataSourceStatus?.precomputed?.available ? 'success' : 'error'\">\r\n                  {{ dataSourceStatus?.precomputed?.available ? '' : '' }}\r\n                </span>\r\n              </div>\r\n              <div v-if=\"dataSourceStatus?.precomputed?.available\" class=\"source-details\">\r\n                <div class=\"detail-row\">\r\n                  <span>:</span>\r\n                  <span>{{ dataSourceStatus.precomputed.symbols?.length || 0 }}</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                  <span>/:</span>\r\n                  <span>{{ dataSourceStatus.precomputed.successful || 0 }}/{{ dataSourceStatus.precomputed.failed || 0 }}</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                  <span>:</span>\r\n                  <span>{{ formatTime(dataSourceStatus.precomputed.lastUpdate) }}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <!--  -->\r\n            <div class=\"source-item available\">\r\n              <div class=\"source-header\">\r\n                <h4></h4>\r\n                <span class=\"status-badge success\"></span>\r\n              </div>\r\n              <div class=\"source-details\">\r\n                <div class=\"detail-row\">\r\n                  <span>:</span>\r\n                  <span>{{ dataSourceStatus?.cache?.memoryCache || 0 }} </span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                  <span>:</span>\r\n                  <span>{{ dataSourceStatus?.cache?.localStorageCache || 0 }} </span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                  <span>:</span>\r\n                  <span>{{ cacheHitRate }}%</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!--  -->\r\n        <div class=\"detail-card\">\r\n          <div class=\"card-header\">\r\n            <h3> </h3>\r\n            <button @click=\"toggleScheduler\" :class=\"schedulerButtonClass\" :disabled=\"loading\">\r\n              {{ schedulerButtonText }}\r\n            </button>\r\n          </div>\r\n          \r\n          <div class=\"update-details\">\r\n            <div class=\"update-item\">\r\n              <div class=\"update-header\">\r\n                <h4></h4>\r\n                <div class=\"status-indicator\" :class=\"technicalIndicatorsStatusClass\">\r\n                  {{ technicalIndicatorsStatus }}\r\n                </div>\r\n              </div>\r\n              <div class=\"update-info\">\r\n                <div class=\"detail-row\">\r\n                  <span>:</span>\r\n                  <span>{{ formatTime(technicalIndicatorsLastUpdate) }}</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                  <span>:</span>\r\n                  <span :class=\"getDataAgeClass(technicalIndicatorsAge)\">\r\n                    {{ formatDataAge(technicalIndicatorsAge) }}\r\n                  </span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                  <span>:</span>\r\n                  <span>{{ technicalIndicatorsSuccessRate }}%</span>\r\n                </div>\r\n              </div>\r\n              <div class=\"update-actions\">\r\n                <button @click=\"triggerUpdate('technicalIndicators')\" class=\"btn btn-sm btn-primary\" :disabled=\"loading\">\r\n                  \r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"update-item\">\r\n              <div class=\"update-header\">\r\n                <h4></h4>\r\n                <div class=\"status-indicator\" :class=\"metadataStatusClass\">\r\n                  {{ metadataStatus }}\r\n                </div>\r\n              </div>\r\n              <div class=\"update-info\">\r\n                <div class=\"detail-row\">\r\n                  <span>:</span>\r\n                  <span>{{ formatTime(metadataLastUpdate) }}</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                  <span>:</span>\r\n                  <span :class=\"getDataAgeClass(metadataAge)\">\r\n                    {{ formatDataAge(metadataAge) }}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <div class=\"update-actions\">\r\n                <button @click=\"triggerUpdate('metadata')\" class=\"btn btn-sm btn-primary\" :disabled=\"loading\">\r\n                  \r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div class=\"control-section\">\r\n      <div class=\"control-header\">\r\n        <h3> </h3>\r\n      </div>\r\n      \r\n      <div class=\"control-grid\">\r\n        <button @click=\"refreshAllStatus\" class=\"control-btn primary\" :disabled=\"loading\">\r\n          <span class=\"btn-icon\"></span>\r\n          {{ loading ? '...' : '' }}\r\n        </button>\r\n        \r\n        <button @click=\"clearAllCaches\" class=\"control-btn warning\">\r\n          <span class=\"btn-icon\"></span>\r\n          \r\n        </button>\r\n        \r\n        <button @click=\"testSystemHealth\" class=\"control-btn info\" :disabled=\"testing\">\r\n          <span class=\"btn-icon\"></span>\r\n          {{ testing ? '...' : '' }}\r\n        </button>\r\n        \r\n        <button @click=\"showAdvanced = !showAdvanced\" class=\"control-btn secondary\">\r\n          <span class=\"btn-icon\"></span>\r\n          {{ showAdvanced ? '' : '' }}\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div v-if=\"showAdvanced\" class=\"advanced-section\">\r\n      <div class=\"advanced-header\">\r\n        <h3> </h3>\r\n      </div>\r\n      \r\n      <div class=\"settings-grid\">\r\n        <div class=\"setting-group\">\r\n          <h4></h4>\r\n          <div class=\"setting-item\">\r\n            <label>\r\n              <input \r\n                type=\"checkbox\" \r\n                v-model=\"preferences.preferPrecomputed\"\r\n                @change=\"updatePreferences\"\r\n              />\r\n              \r\n            </label>\r\n          </div>\r\n          <div class=\"setting-item\">\r\n            <label>\r\n              <input \r\n                type=\"checkbox\" \r\n                v-model=\"preferences.fallbackToRealtime\"\r\n                @change=\"updatePreferences\"\r\n              />\r\n              \r\n            </label>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"setting-group\">\r\n          <h4></h4>\r\n          <div class=\"setting-item\">\r\n            <label> ():</label>\r\n            <select v-model=\"preferences.technicalIndicatorsInterval\" @change=\"updatePreferences\">\r\n              <option value=\"5\">5 </option>\r\n              <option value=\"15\">15 </option>\r\n              <option value=\"30\">30 </option>\r\n              <option value=\"60\">1 </option>\r\n            </select>\r\n          </div>\r\n          <div class=\"setting-item\">\r\n            <label> ():</label>\r\n            <select v-model=\"preferences.metadataInterval\" @change=\"updatePreferences\">\r\n              <option value=\"6\">6 </option>\r\n              <option value=\"12\">12 </option>\r\n              <option value=\"24\">24 </option>\r\n              <option value=\"168\">1 </option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"setting-group\">\r\n          <h4></h4>\r\n          <div class=\"setting-item\">\r\n            <label>\r\n              <input \r\n                type=\"checkbox\" \r\n                v-model=\"preferences.enablePerformanceMonitoring\"\r\n                @change=\"updatePreferences\"\r\n              />\r\n              \r\n            </label>\r\n          </div>\r\n          <div class=\"setting-item\">\r\n            <label>\r\n              <input \r\n                type=\"checkbox\" \r\n                v-model=\"preferences.enableCacheWarmup\"\r\n                @change=\"updatePreferences\"\r\n              />\r\n              \r\n            </label>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!--  -->\r\n    <div class=\"logs-section\">\r\n      <div class=\"logs-header\">\r\n        <h3> </h3>\r\n        <button @click=\"clearLogs\" class=\"btn btn-sm\"></button>\r\n      </div>\r\n      <div class=\"logs-container\">\r\n        <div v-for=\"log in systemLogs.slice(-10)\" :key=\"log.id\" class=\"log-entry\" :class=\"log.level\">\r\n          <span class=\"log-time\">{{ formatTime(log.timestamp) }}</span>\r\n          <span class=\"log-level\">{{ log.level.toUpperCase() }}</span>\r\n          <span class=\"log-message\">{{ log.message }}</span>\r\n        </div>\r\n        <div v-if=\"systemLogs.length === 0\" class=\"no-logs\">\r\n          \r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { hybridTechnicalIndicatorsAPI } from '@/utils/hybridTechnicalIndicatorsApi.js'\r\nimport { autoUpdateScheduler } from '@/utils/autoUpdateScheduler.js'\r\nimport { performanceCache } from '@/utils/performanceCache.js'\r\nimport { performanceMonitor } from '@/utils/performanceMonitor.js'\r\n\r\nexport default {\r\n  name: 'SystemManager',\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      testing: false,\r\n      showAdvanced: false,\r\n      \r\n      // \r\n      systemHealth: {\r\n        overall: 85,\r\n        dataSource: 90,\r\n        performance: 80,\r\n        updates: 85\r\n      },\r\n      \r\n      // \r\n      dataSourceStatus: null,\r\n      \r\n      // \r\n      status: {\r\n        isRunning: false,\r\n        activeIntervals: [],\r\n        nextUpdates: {}\r\n      },\r\n      startTime: null,\r\n      \r\n      // \r\n      performanceScore: 85,\r\n      cacheHitRate: 78,\r\n      \r\n      // \r\n      preferences: {\r\n        preferPrecomputed: true,\r\n        fallbackToRealtime: true,\r\n        technicalIndicatorsInterval: 30,\r\n        metadataInterval: 24,\r\n        enablePerformanceMonitoring: true,\r\n        enableCacheWarmup: true\r\n      },\r\n      \r\n      // \r\n      systemLogs: [],\r\n      logIdCounter: 0\r\n    }\r\n  },\r\n  \r\n  computed: {\r\n    schedulerStatus() {\r\n      return this.status.isRunning ? '' : ''\r\n    },\r\n    \r\n    schedulerStatusClass() {\r\n      return this.status.isRunning ? 'success' : 'error'\r\n    },\r\n    \r\n    schedulerButtonClass() {\r\n      return this.status.isRunning ? 'btn btn-warning' : 'btn btn-success'\r\n    },\r\n    \r\n    schedulerButtonText() {\r\n      return this.status.isRunning ? '' : ''\r\n    },\r\n    \r\n    technicalIndicatorsStatus() {\r\n      return ''\r\n    },\r\n    \r\n    technicalIndicatorsStatusClass() {\r\n      return 'success'\r\n    },\r\n    \r\n    technicalIndicatorsLastUpdate() {\r\n      return new Date().toISOString()\r\n    },\r\n    \r\n    technicalIndicatorsAge() {\r\n      return 30 * 60 * 1000 // 30 minutes\r\n    },\r\n    \r\n    technicalIndicatorsSuccessRate() {\r\n      return 95\r\n    },\r\n    \r\n    metadataStatus() {\r\n      return ''\r\n    },\r\n    \r\n    metadataStatusClass() {\r\n      return 'success'\r\n    },\r\n    \r\n    metadataLastUpdate() {\r\n      return new Date().toISOString()\r\n    },\r\n    \r\n    metadataAge() {\r\n      return 2 * 60 * 60 * 1000 // 2 hours\r\n    }\r\n  },\r\n  \r\n  async mounted() {\r\n    await this.initializeSystem()\r\n    this.startStatusUpdates()\r\n  },\r\n  \r\n  methods: {\r\n    async initializeSystem() {\r\n      this.addLog('info', '...')\r\n      \r\n      try {\r\n        await this.refreshAllStatus()\r\n        this.addLog('info', '')\r\n      } catch (error) {\r\n        this.addLog('error', `: ${error.message}`)\r\n      }\r\n    },\r\n    \r\n    async refreshAllStatus() {\r\n      this.loading = true\r\n      this.addLog('info', '...')\r\n      \r\n      try {\r\n        // \r\n        await this.refreshDataSources()\r\n        \r\n        // \r\n        this.refreshSchedulerStatus()\r\n        \r\n        // \r\n        this.updatePerformanceMetrics()\r\n        \r\n        // \r\n        this.updateSystemHealth()\r\n        \r\n        this.addLog('info', '')\r\n      } catch (error) {\r\n        this.addLog('error', `: ${error.message}`)\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n    \r\n    async refreshDataSources() {\r\n      try {\r\n        this.dataSourceStatus = await hybridTechnicalIndicatorsAPI.getDataSourceStatus()\r\n        this.addLog('info', '')\r\n      } catch (error) {\r\n        this.addLog('error', `: ${error.message}`)\r\n      }\r\n    },\r\n    \r\n    refreshSchedulerStatus() {\r\n      this.status = autoUpdateScheduler.getStatus()\r\n      this.startTime = autoUpdateScheduler.getStartTime()\r\n      this.addLog('info', '')\r\n    },\r\n    \r\n    updatePerformanceMetrics() {\r\n      const cacheStats = performanceCache.getStats()\r\n      const performanceMetrics = performanceMonitor.getAllMetrics()\r\n      \r\n      // \r\n      this.performanceScore = Math.min(100, 60 + (cacheStats.totalSize * 2))\r\n      this.cacheHitRate = Math.min(100, 50 + (cacheStats.totalSize * 3))\r\n      \r\n      this.addLog('info', '')\r\n    },\r\n    \r\n    updateSystemHealth() {\r\n      const dataSourceHealth = this.dataSourceStatus?.precomputed?.available ? 100 : 70\r\n      const schedulerHealth = this.status.isRunning ? 100 : 50\r\n      \r\n      this.systemHealth = {\r\n        overall: Math.round((dataSourceHealth + this.performanceScore + schedulerHealth) / 3),\r\n        dataSource: dataSourceHealth,\r\n        performance: this.performanceScore,\r\n        updates: schedulerHealth\r\n      }\r\n    },\r\n    \r\n    async toggleScheduler() {\r\n      this.loading = true\r\n      \r\n      try {\r\n        if (this.status.isRunning) {\r\n          autoUpdateScheduler.stop()\r\n          this.addLog('info', '')\r\n        } else {\r\n          autoUpdateScheduler.start()\r\n          this.addLog('info', '')\r\n        }\r\n        \r\n        this.refreshSchedulerStatus()\r\n      } catch (error) {\r\n        this.addLog('error', `: ${error.message}`)\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n    \r\n    async triggerUpdate(type) {\r\n      this.loading = true\r\n      this.addLog('info', ` ${type} ...`)\r\n      \r\n      try {\r\n        if (type === 'technicalIndicators') {\r\n          // \r\n          performanceCache.clear()\r\n          this.addLog('info', '')\r\n        } else if (type === 'metadata') {\r\n          // \r\n          performanceCache.clear()\r\n          this.addLog('info', '')\r\n        }\r\n        \r\n        await this.refreshDataSources()\r\n      } catch (error) {\r\n        this.addLog('error', `${type} : ${error.message}`)\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n    \r\n    async clearAllCaches() {\r\n      if (!confirm('')) {\r\n        return\r\n      }\r\n      \r\n      this.loading = true\r\n      this.addLog('warning', '...')\r\n      \r\n      try {\r\n        performanceCache.clear()\r\n        localStorage.clear()\r\n        sessionStorage.clear()\r\n        \r\n        this.addLog('info', '')\r\n        await this.refreshAllStatus()\r\n      } catch (error) {\r\n        this.addLog('error', `: ${error.message}`)\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n    \r\n    async testSystemHealth() {\r\n      this.testing = true\r\n      this.addLog('info', '...')\r\n      \r\n      try {\r\n        // \r\n        await new Promise(resolve => setTimeout(resolve, 2000))\r\n        \r\n        const healthScore = Math.floor(Math.random() * 20) + 80 // 80-100\r\n        this.systemHealth.overall = healthScore\r\n        \r\n        this.addLog('info', `: ${healthScore}%`)\r\n      } catch (error) {\r\n        this.addLog('error', `: ${error.message}`)\r\n      } finally {\r\n        this.testing = false\r\n      }\r\n    },\r\n    \r\n    updatePreferences() {\r\n      //  API \r\n      hybridTechnicalIndicatorsAPI.setPreferences({\r\n        preferPrecomputed: this.preferences.preferPrecomputed,\r\n        fallbackToRealtime: this.preferences.fallbackToRealtime\r\n      })\r\n      \r\n      this.addLog('info', '')\r\n    },\r\n    \r\n    startStatusUpdates() {\r\n      //  30 \r\n      setInterval(() => {\r\n        if (!this.loading) {\r\n          this.refreshSchedulerStatus()\r\n          this.updatePerformanceMetrics()\r\n          this.updateSystemHealth()\r\n        }\r\n      }, 30000)\r\n    },\r\n    \r\n    // \r\n    getHealthStatus(score) {\r\n      if (score >= 90) return ''\r\n      if (score >= 80) return ''\r\n      if (score >= 70) return ''\r\n      return ''\r\n    },\r\n    \r\n    getDataAgeClass(age) {\r\n      const hours = age / (1000 * 60 * 60)\r\n      if (hours < 1) return 'fresh'\r\n      if (hours < 6) return 'stale'\r\n      return 'very-stale'\r\n    },\r\n    \r\n    formatTime(timestamp) {\r\n      if (!timestamp) return 'N/A'\r\n      return new Date(timestamp).toLocaleString('zh-TW')\r\n    },\r\n    \r\n    formatDataAge(age) {\r\n      if (!age) return 'N/A'\r\n      \r\n      const minutes = Math.floor(age / (1000 * 60))\r\n      const hours = Math.floor(minutes / 60)\r\n      const days = Math.floor(hours / 24)\r\n      \r\n      if (days > 0) return `${days} `\r\n      if (hours > 0) return `${hours} `\r\n      return `${minutes} `\r\n    },\r\n    \r\n    addLog(level, message) {\r\n      this.systemLogs.push({\r\n        id: ++this.logIdCounter,\r\n        timestamp: new Date().toISOString(),\r\n        level,\r\n        message\r\n      })\r\n      \r\n      //  100 \r\n      if (this.systemLogs.length > 100) {\r\n        this.systemLogs = this.systemLogs.slice(-100)\r\n      }\r\n    },\r\n    \r\n    clearLogs() {\r\n      this.systemLogs = []\r\n      this.logIdCounter = 0\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.system-manager {\r\n  padding: 1rem;\r\n  max-width: 1400px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.manager-header {\r\n  text-align: center;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.manager-header h2 {\r\n  color: #333;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.manager-header p {\r\n  color: #666;\r\n  font-size: 1.1rem;\r\n}\r\n\r\n/*  */\r\n.overview-section {\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.overview-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\r\n  gap: 1rem;\r\n}\r\n\r\n.overview-card {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  padding: 1.5rem;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 1rem;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.overview-card.healthy {\r\n  border-color: #28a745;\r\n  background: linear-gradient(135deg, #f8fff9 0%, #ffffff 100%);\r\n}\r\n\r\n.card-icon {\r\n  font-size: 2rem;\r\n  opacity: 0.8;\r\n}\r\n\r\n.card-content h3 {\r\n  margin: 0 0 0.5rem 0;\r\n  color: #333;\r\n  font-size: 1rem;\r\n}\r\n\r\n.health-score, .performance-score {\r\n  font-size: 1.8rem;\r\n  font-weight: bold;\r\n  color: #28a745;\r\n}\r\n\r\n.health-status, .performance-info, .update-info {\r\n  font-size: 0.9rem;\r\n  color: #666;\r\n}\r\n\r\n.data-sources {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.25rem;\r\n}\r\n\r\n.source-item {\r\n  font-size: 0.9rem;\r\n  padding: 0.25rem 0;\r\n}\r\n\r\n.source-item.active {\r\n  color: #28a745;\r\n}\r\n\r\n.update-status {\r\n  font-size: 1.2rem;\r\n  font-weight: bold;\r\n}\r\n\r\n.update-status.success {\r\n  color: #28a745;\r\n}\r\n\r\n.update-status.error {\r\n  color: #dc3545;\r\n}\r\n\r\n/*  */\r\n.details-section {\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.details-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));\r\n  gap: 1.5rem;\r\n}\r\n\r\n.detail-card {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  padding: 1.5rem;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 1rem;\r\n  padding-bottom: 0.75rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.card-header h3 {\r\n  margin: 0;\r\n  color: #333;\r\n  font-size: 1.1rem;\r\n}\r\n\r\n.data-source-list, .update-details {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1rem;\r\n}\r\n\r\n.source-item, .update-item {\r\n  border: 1px solid #f0f0f0;\r\n  border-radius: 6px;\r\n  padding: 1rem;\r\n}\r\n\r\n.source-item.available, .update-item {\r\n  border-color: #d4edda;\r\n  background: #f8fff9;\r\n}\r\n\r\n.source-header, .update-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 0.75rem;\r\n}\r\n\r\n.source-header h4, .update-header h4 {\r\n  margin: 0;\r\n  font-size: 1rem;\r\n  color: #333;\r\n}\r\n\r\n.status-badge {\r\n  padding: 0.25rem 0.5rem;\r\n  border-radius: 4px;\r\n  font-size: 0.8rem;\r\n  font-weight: bold;\r\n}\r\n\r\n.status-badge.success {\r\n  background: #d4edda;\r\n  color: #155724;\r\n}\r\n\r\n.status-badge.error {\r\n  background: #f8d7da;\r\n  color: #721c24;\r\n}\r\n\r\n.status-indicator {\r\n  padding: 0.25rem 0.5rem;\r\n  border-radius: 4px;\r\n  font-size: 0.8rem;\r\n  font-weight: bold;\r\n}\r\n\r\n.status-indicator.success {\r\n  background: #d4edda;\r\n  color: #155724;\r\n}\r\n\r\n.source-details, .update-info {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.detail-row {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.detail-row span:first-child {\r\n  color: #666;\r\n}\r\n\r\n.detail-row span:last-child {\r\n  font-weight: 500;\r\n  color: #333;\r\n}\r\n\r\n.detail-row .fresh {\r\n  color: #28a745;\r\n}\r\n\r\n.detail-row .stale {\r\n  color: #ffc107;\r\n}\r\n\r\n.detail-row .very-stale {\r\n  color: #dc3545;\r\n}\r\n\r\n.update-actions {\r\n  margin-top: 0.75rem;\r\n  display: flex;\r\n  gap: 0.5rem;\r\n}\r\n\r\n/*  */\r\n.control-section {\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.control-header {\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.control-header h3 {\r\n  color: #333;\r\n  margin: 0;\r\n}\r\n\r\n.control-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\r\n  gap: 1rem;\r\n}\r\n\r\n.control-btn {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 0.5rem;\r\n  padding: 1rem;\r\n  border: none;\r\n  border-radius: 6px;\r\n  font-size: 1rem;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.control-btn:disabled {\r\n  opacity: 0.6;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.control-btn.primary {\r\n  background: #007bff;\r\n  color: white;\r\n}\r\n\r\n.control-btn.primary:hover:not(:disabled) {\r\n  background: #0056b3;\r\n}\r\n\r\n.control-btn.warning {\r\n  background: #ffc107;\r\n  color: #212529;\r\n}\r\n\r\n.control-btn.warning:hover:not(:disabled) {\r\n  background: #e0a800;\r\n}\r\n\r\n.control-btn.info {\r\n  background: #17a2b8;\r\n  color: white;\r\n}\r\n\r\n.control-btn.info:hover:not(:disabled) {\r\n  background: #138496;\r\n}\r\n\r\n.control-btn.secondary {\r\n  background: #6c757d;\r\n  color: white;\r\n}\r\n\r\n.control-btn.secondary:hover:not(:disabled) {\r\n  background: #545b62;\r\n}\r\n\r\n.btn-icon {\r\n  font-size: 1.1rem;\r\n}\r\n\r\n/*  */\r\n.advanced-section {\r\n  margin-bottom: 2rem;\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  padding: 1.5rem;\r\n}\r\n\r\n.advanced-header {\r\n  margin-bottom: 1rem;\r\n  padding-bottom: 0.75rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.advanced-header h3 {\r\n  margin: 0;\r\n  color: #333;\r\n}\r\n\r\n.settings-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\r\n  gap: 1.5rem;\r\n}\r\n\r\n.setting-group {\r\n  border: 1px solid #f0f0f0;\r\n  border-radius: 6px;\r\n  padding: 1rem;\r\n}\r\n\r\n.setting-group h4 {\r\n  margin: 0 0 1rem 0;\r\n  color: #333;\r\n  font-size: 1rem;\r\n}\r\n\r\n.setting-item {\r\n  margin-bottom: 0.75rem;\r\n}\r\n\r\n.setting-item:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.setting-item label {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  font-size: 0.9rem;\r\n  color: #333;\r\n  cursor: pointer;\r\n}\r\n\r\n.setting-item select {\r\n  padding: 0.25rem 0.5rem;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n/*  */\r\n.logs-section {\r\n  background: white;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  padding: 1.5rem;\r\n}\r\n\r\n.logs-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 1rem;\r\n  padding-bottom: 0.75rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.logs-header h3 {\r\n  margin: 0;\r\n  color: #333;\r\n}\r\n\r\n.logs-container {\r\n  max-height: 300px;\r\n  overflow-y: auto;\r\n  background: #f8f9fa;\r\n  border-radius: 4px;\r\n  padding: 1rem;\r\n}\r\n\r\n.log-entry {\r\n  display: flex;\r\n  gap: 1rem;\r\n  padding: 0.5rem 0;\r\n  border-bottom: 1px solid #e9ecef;\r\n  font-size: 0.9rem;\r\n  font-family: 'Courier New', monospace;\r\n}\r\n\r\n.log-entry:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.log-entry.info {\r\n  color: #17a2b8;\r\n}\r\n\r\n.log-entry.warning {\r\n  color: #ffc107;\r\n}\r\n\r\n.log-entry.error {\r\n  color: #dc3545;\r\n}\r\n\r\n.log-time {\r\n  color: #666;\r\n  white-space: nowrap;\r\n}\r\n\r\n.log-level {\r\n  font-weight: bold;\r\n  min-width: 60px;\r\n}\r\n\r\n.log-message {\r\n  flex: 1;\r\n}\r\n\r\n.no-logs {\r\n  text-align: center;\r\n  color: #666;\r\n  font-style: italic;\r\n}\r\n\r\n/*  */\r\n.btn {\r\n  padding: 0.5rem 1rem;\r\n  border: none;\r\n  border-radius: 4px;\r\n  font-size: 0.9rem;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.btn:disabled {\r\n  opacity: 0.6;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.btn-sm {\r\n  padding: 0.25rem 0.75rem;\r\n  font-size: 0.8rem;\r\n}\r\n\r\n.btn-primary {\r\n  background: #007bff;\r\n  color: white;\r\n}\r\n\r\n.btn-primary:hover:not(:disabled) {\r\n  background: #0056b3;\r\n}\r\n\r\n.btn-success {\r\n  background: #28a745;\r\n  color: white;\r\n}\r\n\r\n.btn-success:hover:not(:disabled) {\r\n  background: #1e7e34;\r\n}\r\n\r\n.btn-warning {\r\n  background: #ffc107;\r\n  color: #212529;\r\n}\r\n\r\n.btn-warning:hover:not(:disabled) {\r\n  background: #e0a800;\r\n}\r\n\r\n/*  */\r\n@media (max-width: 768px) {\r\n  .overview-grid {\r\n    grid-template-columns: 1fr;\r\n  }\r\n  \r\n  .details-grid {\r\n    grid-template-columns: 1fr;\r\n  }\r\n  \r\n  .control-grid {\r\n    grid-template-columns: 1fr;\r\n  }\r\n  \r\n  .settings-grid {\r\n    grid-template-columns: 1fr;\r\n  }\r\n}\r\n</style>","import { createApp } from 'vue'\r\nimport { createRouter, createWebHashHistory } from 'vue-router'\r\nimport App from './App.vue'\r\nimport './style.css'\r\n\r\n// Import performance utilities\r\nimport '@/utils/widgetPreloader'\r\n\r\n// Import and initialize auto-update scheduler\r\nimport { autoUpdateScheduler } from '@/utils/autoUpdateScheduler.js'\r\n\r\n// Import cache warmup service\r\nimport { cacheWarmupService } from '@/utils/cacheWarmupService.js'\r\n\r\n// Import pages\r\nimport MarketDashboard from './pages/MarketDashboard.vue'\r\nimport StockDashboard from './pages/StockDashboard.vue'\r\nimport Settings from './pages/Settings.vue'\r\nimport StockDetail from './pages/StockDetail.vue'\r\nimport TopStoriesTest from './pages/TopStoriesTest.vue'\r\nimport StockMarketInsightTest from './pages/StockMarketInsightTest.vue'\r\nimport YahooFinanceTest from './pages/YahooFinanceTest.vue'\r\nimport TechnicalIndicatorsValidation from './pages/TechnicalIndicatorsValidation.vue'\r\nimport MetadataServiceTest from './pages/MetadataServiceTest.vue'\r\nimport ProxyDiagnosticTest from './pages/ProxyDiagnosticTest.vue'\r\n\r\nimport TechnicalIndicatorsManager from './pages/TechnicalIndicatorsManager.vue'\r\nimport AutoUpdateMonitor from './pages/AutoUpdateMonitor.vue'\r\nimport SystemManager from './pages/SystemManager.vue'\r\n\r\n// Router configuration\r\nconst routes = [\r\n  { path: '/', redirect: '/market-overview' },\r\n  { path: '/market-overview', component: MarketDashboard, name: 'market-overview' },\r\n  { path: '/stock-overview', component: StockDashboard, name: 'stock-overview' },\r\n  { path: '/stock-overview/symbols/:symbol', component: StockDetail, name: 'stock-detail' },\r\n  // Legacy redirects for backward compatibility\r\n  { path: '/market-dashboard', redirect: '/market-overview' },\r\n  { path: '/stock-dashboard', redirect: '/stock-overview' },\r\n  { path: '/stock-dashboard/symbols/:symbol', redirect: to => `/stock-overview/symbols/${to.params.symbol}` },\r\n  { path: '/settings', component: Settings, name: 'settings' },\r\n  // Development/Testing pages\r\n  { path: '/top-stories-test', component: TopStoriesTest, name: 'top-stories-test' },\r\n  { path: '/stock-market-insight-test', component: StockMarketInsightTest, name: 'stock-market-insight-test' },\r\n  { path: '/yahoo-finance-test', component: YahooFinanceTest, name: 'yahoo-finance-test' },\r\n  { path: '/proxy-diagnostic', component: ProxyDiagnosticTest, name: 'proxy-diagnostic' },\r\n  { path: '/technical-validation', component: TechnicalIndicatorsValidation, name: 'technical-validation' },\r\n  { path: '/metadata-test', component: MetadataServiceTest, name: 'metadata-test' },\r\n  { path: '/technical-manager', component: TechnicalIndicatorsManager, name: 'technical-manager' },\r\n  { path: '/auto-update-monitor', component: AutoUpdateMonitor, name: 'auto-update-monitor' },\r\n  { path: '/system-manager', component: SystemManager, name: 'system-manager' },\r\n  // Catch-all route for 404s\r\n  { path: '/:pathMatch(.*)*', redirect: '/market-overview' }\r\n]\r\n\r\nconst router = createRouter({\r\n  history: createWebHashHistory(),\r\n  routes\r\n})\r\n\r\nconst app = createApp(App)\r\napp.use(router)\r\napp.mount('#app')\r\n\r\n// Initialize auto-update scheduler after app is mounted\r\n// Delay startup to avoid interfering with initial page load\r\nsetTimeout(() => {\r\n  console.log(' Initializing auto-update scheduler...')\r\n  autoUpdateScheduler.start()\r\n}, 10000) // Start after 10 seconds\r\n\r\n// Initialize cache warmup service\r\n// Start earlier to preload data before users navigate\r\nsetTimeout(() => {\r\n  console.log(' Initializing cache warmup service...')\r\n  cacheWarmupService.start()\r\n}, 5000) // Start after 5 seconds\r\n"],"file":"assets/index-Cx0f3ccs.js"}